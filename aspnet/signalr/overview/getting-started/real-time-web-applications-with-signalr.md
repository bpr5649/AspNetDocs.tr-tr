---
uid: signalr/overview/getting-started/real-time-web-applications-with-signalr
title: 'Uygulamalı Laboratuvar: SignalR ile gerçek zamanlı Web uygulamaları | Microsoft Docs'
author: bradygaster
description: Gerçek zamanlı Web uygulamaları, sunucu tarafı, gerçek zamanlı olarak ortaya çıktığı gibi bağlı istemcilere içerik gönderme olanağı özellik. ASP, ASP.NET geliştiricileri için...
ms.author: bradyg
ms.date: 07/16/2014
ms.assetid: ba07958c-42e1-4da0-81db-ba6925ed6db0
msc.legacyurl: /signalr/overview/getting-started/real-time-web-applications-with-signalr
msc.type: authoredcontent
ms.openlocfilehash: 3db54a134e8f842cab1d3471c69f5a8e2039d83d
ms.sourcegitcommit: 289e051cc8a90e8f7127e239fda73047bde4de12
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/25/2019
ms.locfileid: "58423617"
---
<a name="hands-on-lab-real-time-web-applications-with-signalr"></a><span data-ttu-id="adc18-104">Uygulamalı Laboratuvar: SignalR ile Gerçek Zamanlı Web Uygulamaları</span><span class="sxs-lookup"><span data-stu-id="adc18-104">Hands On Lab: Real-Time Web Applications with SignalR</span></span>
====================

<span data-ttu-id="adc18-105">Tarafından [Team Web Kampları](https://twitter.com/webcamps)</span><span class="sxs-lookup"><span data-stu-id="adc18-105">by [Web Camps Team](https://twitter.com/webcamps)</span></span>

[!INCLUDE [Consider ASP.NET Core SignalR](~/includes/signalr/signalr-version-disambiguation.md)]

[<span data-ttu-id="adc18-106">Eğitim Seti Web Kampları indirin</span><span class="sxs-lookup"><span data-stu-id="adc18-106">Download Web Camps Training Kit</span></span>](https://aka.ms/webcamps-training-kit)

> <span data-ttu-id="adc18-107">Gerçek zamanlı Web uygulamaları, sunucu tarafı, gerçek zamanlı olarak ortaya çıktığı gibi bağlı istemcilere içerik gönderme olanağı özellik.</span><span class="sxs-lookup"><span data-stu-id="adc18-107">Real-time Web applications feature the ability to push server-side content to the connected clients as it happens, in real-time.</span></span> <span data-ttu-id="adc18-108">ASP.NET geliştiricilerine yönelik **ASP.NET SignalR** uygulamalarına gerçek zamanlı web işlevselliği eklemek için bir kitaplıktır.</span><span class="sxs-lookup"><span data-stu-id="adc18-108">For ASP.NET developers, **ASP.NET SignalR** is a library to add real-time web functionality to their applications.</span></span> <span data-ttu-id="adc18-109">Otomatik olarak verilen istemci ve sunucunun en iyi kullanılabilir aktarım en iyi kullanılabilir taşıma seçme birkaç aktarımı avantajlarından yararlanır.</span><span class="sxs-lookup"><span data-stu-id="adc18-109">It takes advantage of several transports, automatically selecting the best available transport given the client and server's best available transport.</span></span> <span data-ttu-id="adc18-110">Avantajlarından yararlanır **WebSocket**, tarayıcı ve sunucu arasında çift yönlü iletişimi sağlayan HTML5 API.</span><span class="sxs-lookup"><span data-stu-id="adc18-110">It takes advantage of **WebSocket**, an HTML5 API that enables bi-directional communication between the browser and server.</span></span>
> 
> <span data-ttu-id="adc18-111">**SignalR** ayrıca istemciye RPC sunucusu yapmak için basit, üst düzey bir API sağlar. (sunucu tarafı .NET kodundan müşterilerinizin tarayıcılarında JavaScript işlevleri çağırmak) ASP.NET uygulamanızı, aynı zamanda bağlantı yönetimi, kullanışlı kancaları ekleme olayları bağlama/bağlantısını kes, bağlantıları gruplandırma ve yetkilendirme gibi.</span><span class="sxs-lookup"><span data-stu-id="adc18-111">**SignalR** also provides a simple, high-level API for doing server to client RPC (call JavaScript functions in your clients' browsers from server-side .NET code) in your ASP.NET application, as well as adding useful hooks for connection management, such as connect/disconnect events, grouping connections, and authorization.</span></span>
> 
> <span data-ttu-id="adc18-112">**SignalR** bazı istemci ve sunucu arasında gerçek zamanlı iş yapmak için gerekli olan taşımalar üzerinde bir soyutlamadır.</span><span class="sxs-lookup"><span data-stu-id="adc18-112">**SignalR** is an abstraction over some of the transports that are required to do real-time work between client and server.</span></span> <span data-ttu-id="adc18-113">A **SignalR** bağlantı HTTP başlar ve sonra yükseltilen bir **WebSocket** bağlantı varsa.</span><span class="sxs-lookup"><span data-stu-id="adc18-113">A **SignalR** connection starts as HTTP, and is then promoted to a **WebSocket** connection if available.</span></span> <span data-ttu-id="adc18-114">**WebSocket** için ideal aktarım **SignalR**, sunucu bellek en verimli bir şekilde kullanılmasını kolaylaştırır. bu yana varsa gecikme süresi en düşük ve en alttaki özellikler (gibi istemci arasındaki tam çift yönlü iletişim ve sunucu için), ancak ayrıca en katı gereksinimleri vardır: **WebSocket** sunucusu kullanılmasını gerektirir **Windows Server 2012** veya **Windows 8**, birlikte **.NET Framework 4.5**.</span><span class="sxs-lookup"><span data-stu-id="adc18-114">**WebSocket** is the ideal transport for **SignalR**, since it makes the most efficient use of server memory, has the lowest latency, and has the most underlying features (such as full duplex communication between client and server), but it also has the most stringent requirements: **WebSocket** requires the server to be using **Windows Server 2012** or **Windows 8**, along with **.NET Framework 4.5**.</span></span> <span data-ttu-id="adc18-115">Bu gereksinimler karşılanmazsa **SignalR** bağlantılarından olmak için diğer taşımalar kullanmayı dener (gibi *Ajax uzun yoklama*).</span><span class="sxs-lookup"><span data-stu-id="adc18-115">If these requirements are not met, **SignalR** will attempt to use other transports to make its connections (like *Ajax long polling*).</span></span>
> 
> <span data-ttu-id="adc18-116">**SignalR** API, istemciler ve sunucular arasında iletişim kurmak için iki modeli içerir: **Kalıcı bağlantılar** ve **Hubs**.</span><span class="sxs-lookup"><span data-stu-id="adc18-116">The **SignalR** API contains two models for communicating between clients and servers: **Persistent Connections** and **Hubs**.</span></span> <span data-ttu-id="adc18-117">A **bağlantı** tek alıcısı, gönderme gruplandırılmış veya yayın iletileri için basit bir uç noktasını temsil eder.</span><span class="sxs-lookup"><span data-stu-id="adc18-117">A **Connection** represents a simple endpoint for sending single-recipient, grouped, or broadcast messages.</span></span> <span data-ttu-id="adc18-118">A **Hub** olduğundan, istemci ve sunucunun doğrudan birbirleri üzerinde yöntemleri çağırmak verir bağlantı API üzerinde derlenmiş daha üst düzey bir işlem hattı.</span><span class="sxs-lookup"><span data-stu-id="adc18-118">A **Hub** is a more high-level pipeline built upon the Connection API that allows your client and server to call methods on each other directly.</span></span>
> 
> ![SignalR mimarisi](real-time-web-applications-with-signalr/_static/image1.png)
> 
> <span data-ttu-id="adc18-120">Web Kampları eğitim Seti, kullanılabilir tüm örnek kodu ve kod parçacıkları dahil [ https://aka.ms/webcamps-training-kit ](https://aka.ms/webcamps-training-kit).</span><span class="sxs-lookup"><span data-stu-id="adc18-120">All sample code and snippets are included in the Web Camps Training Kit, available at [https://aka.ms/webcamps-training-kit](https://aka.ms/webcamps-training-kit).</span></span>


<a id="Overview"></a>
## <a name="overview"></a><span data-ttu-id="adc18-121">Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="adc18-121">Overview</span></span>

<a id="Objectives"></a>
### <a name="objectives"></a><span data-ttu-id="adc18-122">Amaçlar</span><span class="sxs-lookup"><span data-stu-id="adc18-122">Objectives</span></span>

<span data-ttu-id="adc18-123">Bu uygulamalı laboratuvarda, öğreneceksiniz nasıl yapılır:</span><span class="sxs-lookup"><span data-stu-id="adc18-123">In this hands-on lab, you will learn how to:</span></span>

- <span data-ttu-id="adc18-124">Bildirimleri, sunucudan istemciye SignalR kullanarak gönderin.</span><span class="sxs-lookup"><span data-stu-id="adc18-124">Send notifications from server to client using SignalR.</span></span>
- <span data-ttu-id="adc18-125">SignalR kullanarak uygulama ölçek **SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="adc18-125">Scale Out your SignalR application using **SQL Server**.</span></span>

<a id="Prerequisites"></a>
### <a name="prerequisites"></a><span data-ttu-id="adc18-126">Önkoşullar</span><span class="sxs-lookup"><span data-stu-id="adc18-126">Prerequisites</span></span>

<span data-ttu-id="adc18-127">Aşağıda bu uygulamalı laboratuvarı tamamlamak için gereklidir:</span><span class="sxs-lookup"><span data-stu-id="adc18-127">The following is required to complete this hands-on lab:</span></span>

- <span data-ttu-id="adc18-128">[Visual Studio Express 2013 Web](https://www.microsoft.com/visualstudio/) veya üzeri</span><span class="sxs-lookup"><span data-stu-id="adc18-128">[Visual Studio Express 2013 for Web](https://www.microsoft.com/visualstudio/) or greater</span></span>

<a id="Setup"></a>
### <a name="setup"></a><span data-ttu-id="adc18-129">Kurulum</span><span class="sxs-lookup"><span data-stu-id="adc18-129">Setup</span></span>

<span data-ttu-id="adc18-130">Bu uygulamalı laboratuvarda alıştırmalar çalıştırmak için önce ortamı oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="adc18-130">In order to run the exercises in this hands-on lab, you will need to set up your environment first.</span></span>

1. <span data-ttu-id="adc18-131">Bir Windows Explorer penceresi açın ve Laboratuvar için Gözat **kaynak** klasör.</span><span class="sxs-lookup"><span data-stu-id="adc18-131">Open a Windows Explorer window and browse to the lab's **Source** folder.</span></span>
2. <span data-ttu-id="adc18-132">Sağ **Setup.cmd** seçip **yönetici olarak çalıştır** ortamınızı yapılandırın ve bu Laboratuvar için Visual Studio kod parçacıkları yükleme kurulum işlemini başlatmak için.</span><span class="sxs-lookup"><span data-stu-id="adc18-132">Right-click **Setup.cmd** and select **Run as administrator** to launch the setup process that will configure your environment and install the Visual Studio code snippets for this lab.</span></span>
3. <span data-ttu-id="adc18-133">Kullanıcı Hesabı Denetimi iletişim kutusunu gösteriliyorsa, devam etmek için eylemi onaylayın.</span><span class="sxs-lookup"><span data-stu-id="adc18-133">If the User Account Control dialog box is shown, confirm the action to proceed.</span></span>

> [!NOTE]
> <span data-ttu-id="adc18-134">Kurulumu çalıştırmadan önce bu Laboratuvar için tüm bağımlılıkların etkinleştirdiğinizden emin olun.</span><span class="sxs-lookup"><span data-stu-id="adc18-134">Make sure you have checked all the dependencies for this lab before running the setup.</span></span>


<a id="CodeSnippets"></a>
### <a name="using-the-code-snippets"></a><span data-ttu-id="adc18-135">Kod parçacıklarını kullanma</span><span class="sxs-lookup"><span data-stu-id="adc18-135">Using the Code Snippets</span></span>

<span data-ttu-id="adc18-136">Laboratuvar belge boyunca kod blokları eklemeye yönlendirilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="adc18-136">Throughout the lab document, you will be instructed to insert code blocks.</span></span> <span data-ttu-id="adc18-137">Kolaylık olması için bu kodu çoğunu, Visual Studio el ile eklemek zorunda kalmamak için 2013 içinde erişebileceğiniz Visual Studio kod parçacıkları, olarak sağlanır.</span><span class="sxs-lookup"><span data-stu-id="adc18-137">For your convenience, most of this code is provided as Visual Studio Code Snippets, which you can access from within Visual Studio 2013 to avoid having to add it manually.</span></span>

> [!NOTE]
> <span data-ttu-id="adc18-138">Her alıştırma bulunan bir başlangıç çözüm eşlik **başlamak** her alıştırma diğerlerinden takip etmenize olanak tanıyan çalışma klasörü.</span><span class="sxs-lookup"><span data-stu-id="adc18-138">Each exercise is accompanied by a starting solution located in the **Begin** folder of the exercise that allows you to follow each exercise independently of the others.</span></span> <span data-ttu-id="adc18-139">Lütfen bir alıştırma sırasında eklenen kod parçacıkları bu çözümleri başlangıç eksik ve alıştırma tamamlayıncaya kadar çalışmayabilir unutmayın.</span><span class="sxs-lookup"><span data-stu-id="adc18-139">Please be aware that the code snippets that are added during an exercise are missing from these starting solutions and may not work until you have completed the exercise.</span></span> <span data-ttu-id="adc18-140">Ayrıca bulabilirsiniz bir alıştırma için kaynak kod içinde bir **son** karşılık gelen bir alıştırma olarak adımları tamamlamanızı sonuçları kodunu içeren bir Visual Studio çözüm içeren klasör.</span><span class="sxs-lookup"><span data-stu-id="adc18-140">Inside the source code for an exercise, you will also find an **End** folder containing a Visual Studio solution with the code that results from completing the steps in the corresponding exercise.</span></span> <span data-ttu-id="adc18-141">Bu uygulamalı laboratuvarı çalışırken ek yardıma ihtiyacınız varsa, bu çözümleri kılavuz kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="adc18-141">You can use these solutions as guidance if you need additional help as you work through this hands-on lab.</span></span>


* * *

<a id="Exercises"></a>
## <a name="exercises"></a><span data-ttu-id="adc18-142">Alıştırmaları</span><span class="sxs-lookup"><span data-stu-id="adc18-142">Exercises</span></span>

<span data-ttu-id="adc18-143">Bu uygulamalı laboratuvarı aşağıdaki alıştırmaları içerir:</span><span class="sxs-lookup"><span data-stu-id="adc18-143">This hands-on lab includes the following exercises:</span></span>

1. [<span data-ttu-id="adc18-144">SignalR kullanarak gerçek zamanlı verilerle çalışma</span><span class="sxs-lookup"><span data-stu-id="adc18-144">Working with Real-Time Data Using SignalR</span></span>](#Exercise1)
2. [<span data-ttu-id="adc18-145">SQL Server kullanarak ölçeklendirme</span><span class="sxs-lookup"><span data-stu-id="adc18-145">Scaling Out Using SQL Server</span></span>](#Exercise2)

<span data-ttu-id="adc18-146">Bu laboratuvarı tamamlamak için tahmini süre: **60 dakika**</span><span class="sxs-lookup"><span data-stu-id="adc18-146">Estimated time to complete this lab: **60 minutes**</span></span>

> [!NOTE]
> <span data-ttu-id="adc18-147">Visual Studio'yu ilk başlattığınızda, önceden tanımlı ayar koleksiyonlarından birini seçmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="adc18-147">When you first start Visual Studio, you must select one of the predefined settings collections.</span></span> <span data-ttu-id="adc18-148">Her önceden tanımlı bir koleksiyon belirli geliştirme stili eşleşecek şekilde tasarlanmıştır ve pencere düzenlerini, düzenleyici davranışı, IntelliSense kod parçacıkları ve iletişim kutusu seçenekleri belirler.</span><span class="sxs-lookup"><span data-stu-id="adc18-148">Each predefined collection is designed to match a particular development style and determines window layouts, editor behavior, IntelliSense code snippets, and dialog box options.</span></span> <span data-ttu-id="adc18-149">Bu Laboratuvar yordamları kullanarak Visual Studio'da belirli bir görevi gerçekleştirmek için gerekli eylemleri açıklayan **genel geliştirme ayarları** koleksiyonu.</span><span class="sxs-lookup"><span data-stu-id="adc18-149">The procedures in this lab describe the actions necessary to accomplish a given task in Visual Studio when using the **General Development Settings** collection.</span></span> <span data-ttu-id="adc18-150">Geliştirme ortamınız için farklı ayarlar koleksiyonu seçerseniz, dikkate almanız adımlar farklılıklar olabilir.</span><span class="sxs-lookup"><span data-stu-id="adc18-150">If you choose a different settings collection for your development environment, there may be differences in the steps that you should take into account.</span></span>


<a id="Exercise1"></a>
### <a name="exercise-1-working-with-real-time-data-using-signalr"></a><span data-ttu-id="adc18-151">Alıştırma 1: SignalR kullanarak gerçek zamanlı verilerle çalışma</span><span class="sxs-lookup"><span data-stu-id="adc18-151">Exercise 1: Working with Real-Time Data Using SignalR</span></span>

<span data-ttu-id="adc18-152">Sohbet genellikle bir örnek olarak kullanılırken, bütün yapabileceğiniz çok daha ile gerçek zamanlı Web işlevselliği.</span><span class="sxs-lookup"><span data-stu-id="adc18-152">While chat is often used as an example, you can do a whole lot more with real-time Web functionality.</span></span> <span data-ttu-id="adc18-153">Bir kullanıcı yeni veriler veya uzun yoklama yeni verileri almak için bir Ajax sayfasına uygulayan bir web sayfası her yenilendiğinde SignalR kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="adc18-153">Any time a user refreshes a web page to see new data or the page implements Ajax long polling to retrieve new data, you can use SignalR.</span></span>

<span data-ttu-id="adc18-154">SignalR destekler **sunucu gönderimi** veya **yayın** işlevselliği; bağlantı yönetimi otomatik olarak işler.</span><span class="sxs-lookup"><span data-stu-id="adc18-154">SignalR supports **server push** or **broadcasting** functionality; it handles connection management automatically.</span></span> <span data-ttu-id="adc18-155">Klasik HTTP bağlantılarında istemci-sunucu iletişimi için bağlantı her istek için yeniden kurulur, ancak SignalR istemci ve sunucu arasında kalıcı bir bağlantı sağlar.</span><span class="sxs-lookup"><span data-stu-id="adc18-155">In classic HTTP connections for client-server communication, connection is re-established for each request, but SignalR provides persistent connection between the client and server.</span></span> <span data-ttu-id="adc18-156">Sunucu kodu tarayıcıda uzak yordam çağrılarını (RPC) kullanarak bir istemci kodu çağıran SignalR öğesinde istek-yanıt modeli yerine bugün biliyoruz.</span><span class="sxs-lookup"><span data-stu-id="adc18-156">In SignalR the server code calls out to a client code in the browser using Remote Procedure Calls (RPC), rather than the request-response model we know today.</span></span>

<span data-ttu-id="adc18-157">Bu alıştırmada yapılandıracağınız **Geek test** güncelleştirilmiş Ölçümler ve tüm sayfanın yenilenmesi gerekmeden istatistikleri panoyu görüntülemek için SignalR kullanılacak uygulama.</span><span class="sxs-lookup"><span data-stu-id="adc18-157">In this exercise, you will configure the **Geek Quiz** application to use SignalR to display the Statistics dashboard with the updated metrics without the need to refresh the entire page.</span></span>

<a id="Ex1Task1"></a>
#### <a name="task-1--exploring-the-geek-quiz-statistics-page"></a><span data-ttu-id="adc18-158">Görev 1 – Geek test istatistikleri sayfası keşfetme</span><span class="sxs-lookup"><span data-stu-id="adc18-158">Task 1 – Exploring the Geek Quiz Statistics Page</span></span>

<span data-ttu-id="adc18-159">Bu görevde, uygulamasına gidin ve istatistikleri sayfanın nasıl gösterildiğini doğrulayın ve bilgileri şekilde nasıl geliştireceğiniz güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="adc18-159">In this task, you will go through the application and verify how the statistics page is shown and how you can improve the way the information is updated.</span></span>

1. <span data-ttu-id="adc18-160">Açık **Visual Studio Express 2013 Web** açın **GeekQuiz.sln** çözüm bulunan **Source\Ex1 WorkingWithRealTimeData\Begin** klasör.</span><span class="sxs-lookup"><span data-stu-id="adc18-160">Open **Visual Studio Express 2013 for Web** and open the **GeekQuiz.sln** solution located in the **Source\Ex1-WorkingWithRealTimeData\Begin** folder.</span></span>
2. <span data-ttu-id="adc18-161">Tuşuna **F5** çözümü çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="adc18-161">Press **F5** to run the solution.</span></span> <span data-ttu-id="adc18-162">**Oturum** sayfası, tarayıcıda görüntülenmelidir.</span><span class="sxs-lookup"><span data-stu-id="adc18-162">The **Log in** page should appear in the browser.</span></span>

    <span data-ttu-id="adc18-163">![Çözüm çalıştırılmadan](real-time-web-applications-with-signalr/_static/image2.png "çözümü çalıştırma")</span><span class="sxs-lookup"><span data-stu-id="adc18-163">![Running the solution](real-time-web-applications-with-signalr/_static/image2.png "Running the solution")</span></span>

    <span data-ttu-id="adc18-164">*Çözüm çalıştırma*</span><span class="sxs-lookup"><span data-stu-id="adc18-164">*Running the solution*</span></span>
3. <span data-ttu-id="adc18-165">Tıklayın **kaydetme** uygulamada yeni bir kullanıcı oluşturmak için sayfanın üst sağ üst köşedeki.</span><span class="sxs-lookup"><span data-stu-id="adc18-165">Click **Register** in the upper-right corner of the page to create a new user in the application.</span></span>

    <span data-ttu-id="adc18-166">![Bağlantı kaydetme](real-time-web-applications-with-signalr/_static/image3.png "Kaydet bağlantısına")</span><span class="sxs-lookup"><span data-stu-id="adc18-166">![Register link](real-time-web-applications-with-signalr/_static/image3.png "Register link")</span></span>

    <span data-ttu-id="adc18-167">*Bağlantı kaydetme*</span><span class="sxs-lookup"><span data-stu-id="adc18-167">*Register link*</span></span>
4. <span data-ttu-id="adc18-168">İçinde **kaydetme** want bir **kullanıcı adı** ve **parola**ve ardından **kaydetme**.</span><span class="sxs-lookup"><span data-stu-id="adc18-168">In the **Register** page, enter a **User name** and **Password**, and then click **Register**.</span></span>

    <span data-ttu-id="adc18-169">![Bir kullanıcıyı kaydediyor](real-time-web-applications-with-signalr/_static/image4.png "kullanıcı kaydetme")</span><span class="sxs-lookup"><span data-stu-id="adc18-169">![Registering a user](real-time-web-applications-with-signalr/_static/image4.png "Registering a user")</span></span>

    <span data-ttu-id="adc18-170">*Bir kullanıcı kaydetme*</span><span class="sxs-lookup"><span data-stu-id="adc18-170">*Registering a user*</span></span>
5. <span data-ttu-id="adc18-171">Uygulama, yeni hesabı kaydeder ve kullanıcı kimlik doğrulaması ve geri ilk test soru gösteren giriş sayfasına yeniden yönlendirildi.</span><span class="sxs-lookup"><span data-stu-id="adc18-171">The application registers the new account and the user is authenticated and redirected back to the home page showing the first quiz question.</span></span>
6. <span data-ttu-id="adc18-172">Açık **istatistikleri** sayfasında yeni bir pencerede ve put **giriş** sayfası ve **istatistikleri** yan yana sayfasında.</span><span class="sxs-lookup"><span data-stu-id="adc18-172">Open the **Statistics** page in a new window and put the **Home** page and **Statistics** page side-by-side.</span></span>

    <span data-ttu-id="adc18-173">![Yan yana windows](real-time-web-applications-with-signalr/_static/image5.png "windows yan yana")</span><span class="sxs-lookup"><span data-stu-id="adc18-173">![Side-by-side windows](real-time-web-applications-with-signalr/_static/image5.png "Side by side windows")</span></span>

    <span data-ttu-id="adc18-174">*Yan yana windows*</span><span class="sxs-lookup"><span data-stu-id="adc18-174">*Side-by-side windows*</span></span>
7. <span data-ttu-id="adc18-175">İçinde **giriş** sayfasında, seçeneklerden birine tıklayarak soruyu yanıtlayın.</span><span class="sxs-lookup"><span data-stu-id="adc18-175">In the **Home** page, answer the question by clicking one of the options.</span></span>

    <span data-ttu-id="adc18-176">![Bir soruyu yanıtlarken](real-time-web-applications-with-signalr/_static/image6.png "soru yanıtlama")</span><span class="sxs-lookup"><span data-stu-id="adc18-176">![Answering a question](real-time-web-applications-with-signalr/_static/image6.png "Answering a question")</span></span>

    <span data-ttu-id="adc18-177">*Bir soru yanıtlama*</span><span class="sxs-lookup"><span data-stu-id="adc18-177">*Answering a question*</span></span>
8. <span data-ttu-id="adc18-178">Düğmelerden birine tıklandıktan sonra yanıt görüntülenmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="adc18-178">After clicking one of the buttons, the answer should appear.</span></span>

    <span data-ttu-id="adc18-179">![Sorunun yanıtlandığını doğru](real-time-web-applications-with-signalr/_static/image7.png "sorusuna cevap doğru")</span><span class="sxs-lookup"><span data-stu-id="adc18-179">![Question answered correct](real-time-web-applications-with-signalr/_static/image7.png "Question answered correct")</span></span>

    <span data-ttu-id="adc18-180">*Sorunuzun doğru*</span><span class="sxs-lookup"><span data-stu-id="adc18-180">*Question answered correctly*</span></span>
9. <span data-ttu-id="adc18-181">İstatistikleri sayfasında sağlanan bilgileri güncel olduğuna dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="adc18-181">Notice that the information provided in the Statistics page is outdated.</span></span> <span data-ttu-id="adc18-182">Güncelleştirilmiş sonuçları görmek için sayfayı yenileyin.</span><span class="sxs-lookup"><span data-stu-id="adc18-182">Refresh the page in order to see the updated results.</span></span>

    <span data-ttu-id="adc18-183">![İstatistikleri sayfası](real-time-web-applications-with-signalr/_static/image8.png "istatistikleri sayfası")</span><span class="sxs-lookup"><span data-stu-id="adc18-183">![Statistics page](real-time-web-applications-with-signalr/_static/image8.png "Statistics page")</span></span>

    <span data-ttu-id="adc18-184">*İstatistikleri sayfası*</span><span class="sxs-lookup"><span data-stu-id="adc18-184">*Statistics page*</span></span>
10. <span data-ttu-id="adc18-185">Visual Studio'ya geri dönün ve hata ayıklamayı durdurun.</span><span class="sxs-lookup"><span data-stu-id="adc18-185">Go back to Visual Studio and stop debugging.</span></span>

<a id="Ex1Task2"></a>
#### <a name="task-2--adding-signalr-to-geek-quiz-to-show-online-charts"></a><span data-ttu-id="adc18-186">Görev 2 – çevrimiçi grafikleri gösterecek şekilde Geek sınavı için ekleme SignalR</span><span class="sxs-lookup"><span data-stu-id="adc18-186">Task 2 – Adding SignalR to Geek Quiz to Show Online Charts</span></span>

<span data-ttu-id="adc18-187">Bu görevde, SignalR çözüme eklemek ve sunucuda yeni bir yanıt gönderildiğinde güncelleştirmelerini istemcilere otomatik olarak gönder.</span><span class="sxs-lookup"><span data-stu-id="adc18-187">In this task, you will add SignalR to the solution and send updates to the clients automatically when a new answer is sent to the server.</span></span>

1. <span data-ttu-id="adc18-188">Gelen **Araçları** Visual Studio'da seçim menüsünde **NuGet Paket Yöneticisi**ve ardından **Paket Yöneticisi Konsolu**.</span><span class="sxs-lookup"><span data-stu-id="adc18-188">From the **Tools** menu in Visual Studio, select **NuGet Package Manager**, and then click **Package Manager Console**.</span></span>
2. <span data-ttu-id="adc18-189">İçinde **Paket Yöneticisi Konsolu** penceresinde aşağıdaki komutu yürütün:</span><span class="sxs-lookup"><span data-stu-id="adc18-189">In the **Package Manager Console** window, execute the following command:</span></span>

    [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample1.ps1)]

    <span data-ttu-id="adc18-190">![SignalR paket yüklemesi](real-time-web-applications-with-signalr/_static/image9.png "SignalR paket yükleme")</span><span class="sxs-lookup"><span data-stu-id="adc18-190">![SignalR package installation](real-time-web-applications-with-signalr/_static/image9.png "SignalR package installation")</span></span>

    <span data-ttu-id="adc18-191">*SignalR paket yükleme*</span><span class="sxs-lookup"><span data-stu-id="adc18-191">*SignalR package installation*</span></span>

   > [!NOTE]
   > <span data-ttu-id="adc18-192">Yüklerken **SignalR** NuGet paketleri sürüm 2.0.2 yepyeni bir MVC 5 uygulamasında el ile güncelleştirmeniz gerekecek **OWIN** paketleri 2.0.1 sürümüne (veya üzeri) SignalR yüklemeden önce.</span><span class="sxs-lookup"><span data-stu-id="adc18-192">When installing **SignalR** NuGet packages version 2.0.2 from a brand new MVC 5 application, you will need to manually update **OWIN** packages to version 2.0.1 (or higher) before installing SignalR.</span></span> <span data-ttu-id="adc18-193">Bunu yapmak için aşağıdaki betiği yürütebilirsiniz **Paket Yöneticisi Konsolu**:</span><span class="sxs-lookup"><span data-stu-id="adc18-193">To do this, you can execute the following script in the **Package Manager Console**:</span></span>
   > 
   > [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample2.ps1)]
   > 
   > <span data-ttu-id="adc18-194">Gelecekteki bir SignalR sürümünde, OWIN bağımlılıkları otomatik olarak güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="adc18-194">In a future release of SignalR, OWIN dependencies will be automatically updated.</span></span>
3. <span data-ttu-id="adc18-195">İçinde **Çözüm Gezgini**, genişletin **betikleri** klasörü ve bildirimi, SignalR *js* dosyaları çözüme eklendi.</span><span class="sxs-lookup"><span data-stu-id="adc18-195">In **Solution Explorer**, expand the **Scripts** folder and notice that the SignalR *js* files were added to the solution.</span></span>

    <span data-ttu-id="adc18-196">![SignalR JavaScript başvuran](real-time-web-applications-with-signalr/_static/image10.png "SignalR JavaScript başvuruyor")</span><span class="sxs-lookup"><span data-stu-id="adc18-196">![SignalR JavaScript references](real-time-web-applications-with-signalr/_static/image10.png "SignalR JavaScript references")</span></span>

    <span data-ttu-id="adc18-197">*SignalR JavaScript başvuruları*</span><span class="sxs-lookup"><span data-stu-id="adc18-197">*SignalR JavaScript references*</span></span>
4. <span data-ttu-id="adc18-198">İçinde **Çözüm Gezgini**, sağ **GeekQuiz** proje, select **Ekle** | **yeni klasör**, adlandırın **Hub'ları**.</span><span class="sxs-lookup"><span data-stu-id="adc18-198">In **Solution Explorer**, right-click the **GeekQuiz** project, select **Add** | **New Folder**, and name it **Hubs**.</span></span>
5. <span data-ttu-id="adc18-199">Sağ **Hubs** klasörü ve select **Ekle | Yeni öğe**.</span><span class="sxs-lookup"><span data-stu-id="adc18-199">Right-click the **Hubs** folder and select **Add | New Item**.</span></span>

    <span data-ttu-id="adc18-200">![Yeni Öğe Ekle](real-time-web-applications-with-signalr/_static/image11.png "Yeni Öğe Ekle")</span><span class="sxs-lookup"><span data-stu-id="adc18-200">![Add new item](real-time-web-applications-with-signalr/_static/image11.png "Add new item")</span></span>

    <span data-ttu-id="adc18-201">*Yeni Öğe Ekle*</span><span class="sxs-lookup"><span data-stu-id="adc18-201">*Add new item*</span></span>
6. <span data-ttu-id="adc18-202">İçinde **Yeni Öğe Ekle** iletişim kutusunda **Visual C# | Web | SignalR** select sol bölmedeki düğüm **SignalR Hub sınıfı (v2)** Orta bölmede dosya adı **StatisticsHub.cs** tıklatıp **Ekle**.</span><span class="sxs-lookup"><span data-stu-id="adc18-202">In the **Add New Item** dialog box, select the **Visual C# | Web | SignalR** node in the left pane, select **SignalR Hub Class (v2)** from the center pane, name the file **StatisticsHub.cs** and click **Add**.</span></span>

    <span data-ttu-id="adc18-203">![Yeni öğe iletişim kutusu Ekle](real-time-web-applications-with-signalr/_static/image12.png "yeni öğe iletişim kutusu Ekle")</span><span class="sxs-lookup"><span data-stu-id="adc18-203">![Add new item dialog box](real-time-web-applications-with-signalr/_static/image12.png "Add new item dialog box")</span></span>

    <span data-ttu-id="adc18-204">*Yeni Öğe Ekle iletişim kutusu*</span><span class="sxs-lookup"><span data-stu-id="adc18-204">*Add new item dialog box*</span></span>
7. <span data-ttu-id="adc18-205">Değiştirin **StatisticsHub** aşağıdaki kodla sınıfı.</span><span class="sxs-lookup"><span data-stu-id="adc18-205">Replace the code in the **StatisticsHub** class with the following code.</span></span>

    <span data-ttu-id="adc18-206">(Kod parçacığını - *RealTimeSignalR - Ex1 - StatisticsHubClass*)</span><span class="sxs-lookup"><span data-stu-id="adc18-206">(Code Snippet - *RealTimeSignalR - Ex1 - StatisticsHubClass*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample3.cs)]
8. <span data-ttu-id="adc18-207">Açık **Startup.cs** ve en sonunda şu satırı ekleyin **yapılandırma** yöntemi.</span><span class="sxs-lookup"><span data-stu-id="adc18-207">Open **Startup.cs** and add the following line at the end of the **Configuration** method.</span></span>

    <span data-ttu-id="adc18-208">(Kod parçacığını - *RealTimeSignalR - Ex1 - MapSignalR*)</span><span class="sxs-lookup"><span data-stu-id="adc18-208">(Code Snippet - *RealTimeSignalR - Ex1 - MapSignalR*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample4.cs)]
9. <span data-ttu-id="adc18-209">Açık **StatisticsService.cs** içinde sayfa **Hizmetleri** klasörü ve aşağıdaki yönergeleri kullanarak.</span><span class="sxs-lookup"><span data-stu-id="adc18-209">Open the **StatisticsService.cs** page inside the **Services** folder and add the following using directives.</span></span>

    <span data-ttu-id="adc18-210">(Kod parçacığını - *RealTimeSignalR - Ex1 - UsingDirectives*)</span><span class="sxs-lookup"><span data-stu-id="adc18-210">(Code Snippet - *RealTimeSignalR - Ex1 - UsingDirectives*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample5.cs)]
10. <span data-ttu-id="adc18-211">Güncelleştirmelerin bağlı istemciler bildirmek için önce aldığınız bir **bağlam** geçerli bağlantı için nesne.</span><span class="sxs-lookup"><span data-stu-id="adc18-211">To notify connected clients of updates, you first retrieve a **Context** object for the current connection.</span></span> <span data-ttu-id="adc18-212">**Hub** nesne tek bir istemci veya yayın için tüm bağlı istemcileri iletileri göndermek için yöntemleri içerir.</span><span class="sxs-lookup"><span data-stu-id="adc18-212">The **Hub** object contains methods to send messages to a single client or broadcast to all connected clients.</span></span> <span data-ttu-id="adc18-213">Aşağıdaki yöntemi ekleyin **StatisticsService** istatistik verilerini yayınlamak için sınıf.</span><span class="sxs-lookup"><span data-stu-id="adc18-213">Add the following method to the **StatisticsService** class to broadcast the statistics data.</span></span>

    <span data-ttu-id="adc18-214">(Kod parçacığını - *RealTimeSignalR - Ex1 - NotifyUpdatesMethod*)</span><span class="sxs-lookup"><span data-stu-id="adc18-214">(Code Snippet - *RealTimeSignalR - Ex1 - NotifyUpdatesMethod*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample6.cs)]

    > [!NOTE]
    > <span data-ttu-id="adc18-215">Yukarıdaki kodda, istemcide bir işlevi çağırmak için bir rastgele yöntem adı kullanıyorsanız (örn: *updateStatistics*).</span><span class="sxs-lookup"><span data-stu-id="adc18-215">In the code above, you are using an arbitrary method name to call a function on the client (i.e.: *updateStatistics*).</span></span> <span data-ttu-id="adc18-216">Belirttiğiniz yöntem adı, IntelliSense veya derleme zamanı doğrulamasını yoktur anlamına gelen dinamik bir nesne olarak yorumlanır.</span><span class="sxs-lookup"><span data-stu-id="adc18-216">The method name that you specify is interpreted as a dynamic object, which means there is no IntelliSense or compile-time validation for it.</span></span> <span data-ttu-id="adc18-217">İfade, çalışma zamanında değerlendirilir.</span><span class="sxs-lookup"><span data-stu-id="adc18-217">The expression is evaluated at run time.</span></span> <span data-ttu-id="adc18-218">Yöntem çağrısının yürütüldüğünde, SignalR yöntem adı ve parametre değerlerini istemciye gönderir.</span><span class="sxs-lookup"><span data-stu-id="adc18-218">When the method call executes, SignalR sends the method name and the parameter values to the client.</span></span> <span data-ttu-id="adc18-219">İstemci adıyla eşleşen bir yöntemi varsa, bu yöntem çağrılır ve parametre değerlerini kendisine geçirilir.</span><span class="sxs-lookup"><span data-stu-id="adc18-219">If the client has a method that matches the name, that method is called and the parameter values are passed to it.</span></span> <span data-ttu-id="adc18-220">Eşleşen hiçbir yöntemi istemcide bulunursa, herhangi bir hata ortaya çıkar.</span><span class="sxs-lookup"><span data-stu-id="adc18-220">If no matching method is found on the client, no error is raised.</span></span> <span data-ttu-id="adc18-221">Daha fazla bilgi için [ASP.NET SignalR Hubs API Kılavuzu](../guide-to-the-api/hubs-api-guide-server.md).</span><span class="sxs-lookup"><span data-stu-id="adc18-221">For more information, refer to [ASP.NET SignalR Hubs API Guide](../guide-to-the-api/hubs-api-guide-server.md).</span></span>
11. <span data-ttu-id="adc18-222">Açık **TriviaController.cs** içinde sayfa **denetleyicileri** klasörü ve aşağıdaki yönergeleri kullanarak.</span><span class="sxs-lookup"><span data-stu-id="adc18-222">Open the **TriviaController.cs** page inside the **Controllers** folder and add the following using directives.</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample7.cs)]
12. <span data-ttu-id="adc18-223">Aşağıdaki vurgulanmış kodu ekleyin **Post** eylem yöntemi.</span><span class="sxs-lookup"><span data-stu-id="adc18-223">Add the following highlighted code to the **Post** action method.</span></span>

    <span data-ttu-id="adc18-224">(Kod parçacığını - *RealTimeSignalR - Ex1 - NotifyUpdatesCall*)</span><span class="sxs-lookup"><span data-stu-id="adc18-224">(Code Snippet - *RealTimeSignalR - Ex1 - NotifyUpdatesCall*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample8.cs)]
13. <span data-ttu-id="adc18-225">Açık **Statistics.cshtml** içinde sayfa **görünümleri | Giriş** klasör.</span><span class="sxs-lookup"><span data-stu-id="adc18-225">Open the **Statistics.cshtml** page inside the **Views | Home** folder.</span></span> <span data-ttu-id="adc18-226">Bulun **betikleri** bölümünde ve bölümün başında aşağıdaki betik başvurularını ekleyin.</span><span class="sxs-lookup"><span data-stu-id="adc18-226">Locate the **Scripts** section and add the following script references at the beginning of the section.</span></span>

    <span data-ttu-id="adc18-227">(Kod parçacığını - *RealTimeSignalR - Ex1 - SignalRScriptReferences*)</span><span class="sxs-lookup"><span data-stu-id="adc18-227">(Code Snippet - *RealTimeSignalR - Ex1 - SignalRScriptReferences*)</span></span>

    [!code-cshtml[Main](real-time-web-applications-with-signalr/samples/sample9.cshtml)]

    > [!NOTE]
    > <span data-ttu-id="adc18-228">Visual Studio projenize SignalR ve diğer betik kitaplıkları eklemek, Paket Yöneticisi SignalR betik dosyasının bu konuda gösterilen sürümden daha yeni bir sürümü yükleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="adc18-228">When you add SignalR and other script libraries to your Visual Studio project, the Package Manager might install a version of the SignalR script file that is more recent than the version shown in this topic.</span></span> <span data-ttu-id="adc18-229">Kodunuzda betik başvurusu betik kitaplığını projenize yüklü sürümü eşleştiğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="adc18-229">Make sure that the script reference in your code matches the version of the script library installed in your project.</span></span>
14. <span data-ttu-id="adc18-230">İstemci SignalR hub'ına bağlanma ve hub'ın yeni bir ileti alındığında, istatistik verileri güncelleştirmek için aşağıdaki vurgulanmış kodu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="adc18-230">Add the following highlighted code to connect the client to the SignalR hub and update the statistics data when a new message is received from the hub.</span></span>

    <span data-ttu-id="adc18-231">(Kod parçacığını - *RealTimeSignalR - Ex1 - SignalRClientCode*)</span><span class="sxs-lookup"><span data-stu-id="adc18-231">(Code Snippet - *RealTimeSignalR - Ex1 - SignalRClientCode*)</span></span>

    [!code-cshtml[Main](real-time-web-applications-with-signalr/samples/sample10.cshtml)]

    <span data-ttu-id="adc18-232">Bu kodda bir Hub Proxy oluşturma ve sunucu tarafından gönderilen iletileri dinlemek için bir olay işleyicisi kaydediliyor.</span><span class="sxs-lookup"><span data-stu-id="adc18-232">In this code, you are creating a Hub Proxy and registering an event handler to listen for messages sent by the server.</span></span> <span data-ttu-id="adc18-233">Bu durumda, aracılığıyla gönderilen iletiler için dinleme *updateStatistics* yöntemi.</span><span class="sxs-lookup"><span data-stu-id="adc18-233">In this case, you listen for messages sent through the *updateStatistics* method.</span></span>

<a id="Ex1Task3"></a>
#### <a name="task-3--running-the-solution"></a><span data-ttu-id="adc18-234">Görev 3: çözümü çalıştırma</span><span class="sxs-lookup"><span data-stu-id="adc18-234">Task 3 – Running the Solution</span></span>

<span data-ttu-id="adc18-235">Bu görevde, otomatik olarak yeni bir soru yanıtlama sonra SignalR kullanarak, istatistikleri görünümü güncelleştirildiğini doğrulamak için çözüm çalışır.</span><span class="sxs-lookup"><span data-stu-id="adc18-235">In this task, you will run the solution to verify that the statistics view is updated automatically using SignalR after answering a new question.</span></span>

1. <span data-ttu-id="adc18-236">Tuşuna **F5** çözümü çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="adc18-236">Press **F5** to run the solution.</span></span>

    > [!NOTE]
    > <span data-ttu-id="adc18-237">Görev 1'de oluşturduğunuz kullanıcı uygulamaya zaten oturum oturum.</span><span class="sxs-lookup"><span data-stu-id="adc18-237">If not already logged in to the application, log in with the user you created in Task 1.</span></span>
2. <span data-ttu-id="adc18-238">Açık **istatistikleri** sayfasında yeni bir pencerede ve put **giriş** sayfası ve **istatistikleri** görev 1'de yaptığınız gibi yan yana sayfasında.</span><span class="sxs-lookup"><span data-stu-id="adc18-238">Open the **Statistics** page in a new window and put the **Home** page and **Statistics** page side-by-side as you did in Task 1.</span></span>
3. <span data-ttu-id="adc18-239">İçinde **giriş** sayfasında, seçeneklerden birine tıklayarak soruyu yanıtlayın.</span><span class="sxs-lookup"><span data-stu-id="adc18-239">In the **Home** page, answer the question by clicking one of the options.</span></span>

    <span data-ttu-id="adc18-240">![Başka bir soruyu yanıtlarken](real-time-web-applications-with-signalr/_static/image13.png "başka bir soru yanıtlama")</span><span class="sxs-lookup"><span data-stu-id="adc18-240">![Answering another question](real-time-web-applications-with-signalr/_static/image13.png "Answering another question")</span></span>

    <span data-ttu-id="adc18-241">*Başka bir soru yanıtlama*</span><span class="sxs-lookup"><span data-stu-id="adc18-241">*Answering another question*</span></span>
4. <span data-ttu-id="adc18-242">Düğmelerden birine tıklandıktan sonra yanıt görüntülenmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="adc18-242">After clicking one of the buttons, the answer should appear.</span></span> <span data-ttu-id="adc18-243">Güncelleştirilmiş bilgileri ve tüm sayfanın yenilenmesi gerekmeden sorusu yanıtlama sonra sayfasında istatistik bilgilerini otomatik olarak güncelleştirilir dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="adc18-243">Notice that the Statistics information on the page is updated automatically after answering the question with the updated information without the need to refresh the entire page.</span></span>

    <span data-ttu-id="adc18-244">![İstatistikleri sayfası yenilenir sonra yanıt](real-time-web-applications-with-signalr/_static/image14.png "istatistikleri sayfası yenilenir sonra yanıt")</span><span class="sxs-lookup"><span data-stu-id="adc18-244">![Statistics page refreshed after answer](real-time-web-applications-with-signalr/_static/image14.png "Statistics page refreshed after answer")</span></span>

    <span data-ttu-id="adc18-245">*Yanıttan sonra yenilenmesi istatistikleri sayfası*</span><span class="sxs-lookup"><span data-stu-id="adc18-245">*Statistics page refreshed after answer*</span></span>

<a id="Exercise2"></a>
### <a name="exercise-2-scaling-out-using-sql-server"></a><span data-ttu-id="adc18-246">Alıştırma 2: SQL Server kullanarak ölçeklendirme</span><span class="sxs-lookup"><span data-stu-id="adc18-246">Exercise 2: Scaling Out Using SQL Server</span></span>

<span data-ttu-id="adc18-247">Bir web uygulaması ölçeklendirme, genellikle arasından seçim yapabilirsiniz *büyütme* ve *ölçeği genişletme* seçenekleri.</span><span class="sxs-lookup"><span data-stu-id="adc18-247">When scaling a web application, you can generally choose between *scaling up* and *scaling out* options.</span></span> <span data-ttu-id="adc18-248">*Ölçeği artırma* sırasında daha fazla kaynağa (CPU, RAM, vb.) daha büyük bir sunucu kullanmak anlamına gelir *ölçeğini* yükü işlemek için daha fazla sunucu eklemek anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="adc18-248">*Scale up* means using a larger server, with more resources (CPU, RAM, etc.) while *scale out* means adding more servers to handle the load.</span></span> <span data-ttu-id="adc18-249">İstemciler farklı sunuculara yönlendirilir ikinci bir sorun var.</span><span class="sxs-lookup"><span data-stu-id="adc18-249">The problem with the latter is that the clients can get routed to different servers.</span></span> <span data-ttu-id="adc18-250">Bir sunucuya bağlı bir istemci, başka bir sunucudan gönderilen iletileri almazsınız.</span><span class="sxs-lookup"><span data-stu-id="adc18-250">A client that is connected to one server will not receive messages sent from another server.</span></span>

<span data-ttu-id="adc18-251">Adlı bir bileşen kullanarak bu sorunları çözebilir *devre kartı*, sunucular arasında iletileri iletecek şekilde.</span><span class="sxs-lookup"><span data-stu-id="adc18-251">You can solve these issues by using a component called *backplane*, to forward messages between servers.</span></span> <span data-ttu-id="adc18-252">Etkin bir devre kartı ile her uygulama örneği devre kartına ileti gönderir ve devre kartına bunları diğer uygulama örnekleri iletir.</span><span class="sxs-lookup"><span data-stu-id="adc18-252">With a backplane enabled, each application instance sends messages to the backplane, and the backplane forwards them to the other application instances.</span></span>

<span data-ttu-id="adc18-253">Şu anda backplanes SignalR için üç tür vardır:</span><span class="sxs-lookup"><span data-stu-id="adc18-253">There are currently three types of backplanes for SignalR:</span></span>

- <span data-ttu-id="adc18-254">**Windows Azure Service Bus**.</span><span class="sxs-lookup"><span data-stu-id="adc18-254">**Windows Azure Service Bus**.</span></span> <span data-ttu-id="adc18-255">Service Bus bileşenleri gevşek ileti göndermek izin veren bir Mesajlaşma altyapısıdır.</span><span class="sxs-lookup"><span data-stu-id="adc18-255">Service Bus is a messaging infrastructure that allows components to send loosely coupled messages.</span></span>
- <span data-ttu-id="adc18-256">**SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="adc18-256">**SQL Server**.</span></span> <span data-ttu-id="adc18-257">SQL Server devre kartına ileti SQL tablolarının yazar.</span><span class="sxs-lookup"><span data-stu-id="adc18-257">The SQL Server backplane writes messages to SQL tables.</span></span> <span data-ttu-id="adc18-258">Devre kartına verimli Mesajlaşma için hizmet Aracısı kullanır.</span><span class="sxs-lookup"><span data-stu-id="adc18-258">The backplane uses Service Broker for efficient messaging.</span></span> <span data-ttu-id="adc18-259">Hizmet Aracısı etkin değilse ancak, bu da çalışır.</span><span class="sxs-lookup"><span data-stu-id="adc18-259">However, it also works if Service Broker is not enabled.</span></span>
- <span data-ttu-id="adc18-260">**Redis**.</span><span class="sxs-lookup"><span data-stu-id="adc18-260">**Redis**.</span></span> <span data-ttu-id="adc18-261">Redis bellek içi anahtar-değer deposudur.</span><span class="sxs-lookup"><span data-stu-id="adc18-261">Redis is an in-memory key-value store.</span></span> <span data-ttu-id="adc18-262">Redis ileti göndermek için bir yayımlama/abone olma ("pub/sub") deseni destekler.</span><span class="sxs-lookup"><span data-stu-id="adc18-262">Redis supports a publish/subscribe ("pub/sub") pattern for sending messages.</span></span>

<span data-ttu-id="adc18-263">Her ileti bir ileti veri yolu gönderilir.</span><span class="sxs-lookup"><span data-stu-id="adc18-263">Every message is sent through a message bus.</span></span> <span data-ttu-id="adc18-264">Bir ileti veri yoluna uygulayan [IMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) arabirimi, yayımlama/abone olma bir Özet sağlar.</span><span class="sxs-lookup"><span data-stu-id="adc18-264">A message bus implements the [IMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) interface, which provides a publish/subscribe abstraction.</span></span> <span data-ttu-id="adc18-265">Varsayılan değiştirerek backplanes çalışma **IMessageBus** o devre kartı için tasarlanan veri.</span><span class="sxs-lookup"><span data-stu-id="adc18-265">The backplanes work by replacing the default **IMessageBus** with a bus designed for that backplane.</span></span>

<span data-ttu-id="adc18-266">Her sunucu örneği devre kartına Veriyolu aracılığıyla bağlanır.</span><span class="sxs-lookup"><span data-stu-id="adc18-266">Each server instance connects to the backplane through the bus.</span></span> <span data-ttu-id="adc18-267">Bir ileti gönderildiğinde devre kartına gider ve isteğe bağlı olarak devre kartına her sunucuya gönderir.</span><span class="sxs-lookup"><span data-stu-id="adc18-267">When a message is sent, it goes to the backplane, and the backplane sends it to every server.</span></span> <span data-ttu-id="adc18-268">Bir sunucu devre kartından bir ileti aldığında, iletiyi kendi yerel önbellekte depolar.</span><span class="sxs-lookup"><span data-stu-id="adc18-268">When a server receives a message from the backplane, it stores the message in its local cache.</span></span> <span data-ttu-id="adc18-269">Sunucu, bunun yerel önbelleğinden istemciler için iletileri ardından sunar.</span><span class="sxs-lookup"><span data-stu-id="adc18-269">The server then delivers messages to clients from its local cache.</span></span>

<span data-ttu-id="adc18-270">SignalR devre kartına, bunu okuyun işleyişi hakkında daha fazla bilgi için [makale](../performance/scaleout-in-signalr.md).</span><span class="sxs-lookup"><span data-stu-id="adc18-270">For more information about how the SignalR backplane works, read this [article](../performance/scaleout-in-signalr.md).</span></span>

> [!NOTE]
> <span data-ttu-id="adc18-271">Burada bir devre kartı bir performans sorunu haline gelebilir bazı senaryolar vardır.</span><span class="sxs-lookup"><span data-stu-id="adc18-271">There are some scenarios where a backplane can become a bottleneck.</span></span> <span data-ttu-id="adc18-272">Bazı tipik SignalR senaryolar aşağıda verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="adc18-272">Here are some typical SignalR scenarios:</span></span>
> 
> - <span data-ttu-id="adc18-273">[Sunucu yayın](tutorial-server-broadcast-with-signalr.md) (örneğin, bandı): Sunucu iletilerinin gönderilme oranı denetlediğinden Backplanes bu senaryo için iyi çalışır.</span><span class="sxs-lookup"><span data-stu-id="adc18-273">[Server broadcast](tutorial-server-broadcast-with-signalr.md) (e.g., stock ticker): Backplanes work well for this scenario, because the server controls the rate at which messages are sent.</span></span>
> - <span data-ttu-id="adc18-274">[İstemci istemci](tutorial-getting-started-with-signalr.md) (örneğin, sohbet edin): Bu senaryoda, istemci sayısı ile ileti sayısını ölçeklenirse devre kartına bir performans sorunu olabilir; diğer bir deyişle, iletileri oranı büyürse orantılı olarak daha fazla istemciye katılın.</span><span class="sxs-lookup"><span data-stu-id="adc18-274">[Client-to-client](tutorial-getting-started-with-signalr.md) (e.g., chat): In this scenario, the backplane might be a bottleneck if the number of messages scales with the number of clients; that is, if the rate of messages grows proportionally as more clients join.</span></span>
> - <span data-ttu-id="adc18-275">[Yüksek sıklıkta gerçek zamanlı](tutorial-high-frequency-realtime-with-signalr.md) (örneğin, gerçek zamanlı oyun): Bir devre kartı, bu senaryo için önerilmez.</span><span class="sxs-lookup"><span data-stu-id="adc18-275">[High-frequency realtime](tutorial-high-frequency-realtime-with-signalr.md) (e.g., real-time games): A backplane is not recommended for this scenario.</span></span>


<span data-ttu-id="adc18-276">Bu alıştırmada, kullanacağınız **SQL Server** iletilerini arasında dağıtmak için **Geek test** uygulama.</span><span class="sxs-lookup"><span data-stu-id="adc18-276">In this exercise, you will use **SQL Server** to distribute messages across the **Geek Quiz** application.</span></span> <span data-ttu-id="adc18-277">Bu görevleri öğrenmenin yapılandırmayı ayarlamak için ancak tam etkiyi görmek için bir tek test makinesinde çalışır, iki veya daha fazla sunucu SignalR uygulamayı dağıtmak ihtiyacınız olacak.</span><span class="sxs-lookup"><span data-stu-id="adc18-277">You will run these tasks on a single test machine to learn how to set up the configuration, but in order to get the full effect, you will need to deploy the SignalR application to two or more servers.</span></span> <span data-ttu-id="adc18-278">SQL Server sunuculardan biri üzerinde veya ayrılmış ayrı bir sunucuya yüklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="adc18-278">You must also install SQL Server on one of the servers, or on a separate dedicated server.</span></span>

![SQL Server diyagramı kullanarak ölçek](real-time-web-applications-with-signalr/_static/image15.png)

<a id="Ex2Task1"></a>
#### <a name="task-1---understanding-the-scenario"></a><span data-ttu-id="adc18-280">Görev 1 - senaryo anlama</span><span class="sxs-lookup"><span data-stu-id="adc18-280">Task 1 - Understanding the Scenario</span></span>

<span data-ttu-id="adc18-281">Bu görevde, 2 örneklerini çalıştıracağınız **Geek test** örnekler yerel makinenizde birden fazla IIS benzetimi.</span><span class="sxs-lookup"><span data-stu-id="adc18-281">In this task, you will run 2 instances of **Geek Quiz** simulating multiple IIS instances on your local machine.</span></span> <span data-ttu-id="adc18-282">Bu senaryoda, bir uygulama üzerinde Trivia sorularını yanıtlama, ikinci örnek istatistik sayfasında güncelleştirme bildirilmez.</span><span class="sxs-lookup"><span data-stu-id="adc18-282">In this scenario, when answering trivia questions on one application, update won't be notified on the statistics page of the second instance.</span></span> <span data-ttu-id="adc18-283">Uygulamanızı birden çok örnek üzerinde dağıtıldığı bir ortamda bu simülasyon benzer ve bunlarla iletişim kurmak için bir yük dengeleyici kullanma.</span><span class="sxs-lookup"><span data-stu-id="adc18-283">This simulation resembles an environment where your application is deployed on multiple instances and using a load balancer to communicate with them.</span></span>

1. <span data-ttu-id="adc18-284">Açık **Begin.sln** çözüm bulunan **kaynak/Ex2-ScalingOutWithSQLServer/başlangıcı** klasör.</span><span class="sxs-lookup"><span data-stu-id="adc18-284">Open the **Begin.sln** solution located in the **Source/Ex2-ScalingOutWithSQLServer/Begin** folder.</span></span> <span data-ttu-id="adc18-285">Veriler yüklendikten sonra üzerinde fark edeceksiniz **Sunucu Gezgini** çözüm iki proje ile aynı olduğunu, ancak farklı adlar yapıları.</span><span class="sxs-lookup"><span data-stu-id="adc18-285">Once loaded, you will notice on the **Server Explorer** that the solution has two projects with identical structures but different names.</span></span> <span data-ttu-id="adc18-286">Bu, iki örneği aynı uygulamayı çalıştıran yerel makinenizde benzetimini yapacaksınız.</span><span class="sxs-lookup"><span data-stu-id="adc18-286">This will simulate running two instances of the same application on your local machine.</span></span>

    <span data-ttu-id="adc18-287">![Çözüm Geek test 2 örneklerini benzetimi başlatmak](real-time-web-applications-with-signalr/_static/image16.png "başlamak çözüm Geek test 2 örneklerini benzetimi")</span><span class="sxs-lookup"><span data-stu-id="adc18-287">![Begin Solution Simulating 2 Instances of Geek Quiz](real-time-web-applications-with-signalr/_static/image16.png "Begin Solution Simulating 2 Instances of Geek Quiz")</span></span>

    <span data-ttu-id="adc18-288">*Geek test 2 örneklerini benzetimi çözüm başlayın*</span><span class="sxs-lookup"><span data-stu-id="adc18-288">*Begin Solution Simulating 2 Instances of Geek Quiz*</span></span>
2. <span data-ttu-id="adc18-289">Çözüm düğümüne sağ tıklatıp seçerek çözümün özellikler sayfasını açın **özellikleri**.</span><span class="sxs-lookup"><span data-stu-id="adc18-289">Open the properties page of the solution by right-clicking the solution node and selecting **Properties**.</span></span> <span data-ttu-id="adc18-290">Altında **başlangıç projesi**seçin **birden fazla başlangıç projesi** değiştirip **eylem** iki proje için değer *Başlat*.</span><span class="sxs-lookup"><span data-stu-id="adc18-290">Under **Startup Project**, select **Multiple startup projects** and change the **Action** value for both projects to *Start*.</span></span>

    <span data-ttu-id="adc18-291">![Birden çok proje başlangıç](real-time-web-applications-with-signalr/_static/image17.png "birden çok proje başlatılıyor")</span><span class="sxs-lookup"><span data-stu-id="adc18-291">![Starting Multiple Projects](real-time-web-applications-with-signalr/_static/image17.png "Starting Multiple Projects")</span></span>

    <span data-ttu-id="adc18-292">*Birden çok proje başlatılıyor*</span><span class="sxs-lookup"><span data-stu-id="adc18-292">*Starting Multiple Projects*</span></span>
3. <span data-ttu-id="adc18-293">Tuşuna **F5** çözümü çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="adc18-293">Press **F5** to run the solution.</span></span> <span data-ttu-id="adc18-294">Uygulama iki örneği başlatacak **Geek test** aynı uygulamanın birden çok örneğini farklı bağlantı noktalarını simüle.</span><span class="sxs-lookup"><span data-stu-id="adc18-294">The application will launch two instances of **Geek Quiz** in different ports, simulating multiple instances of the same application.</span></span> <span data-ttu-id="adc18-295">Sol taraftaki ekranınızın sağ taraftaki diğer tarayıcılardan birini sabitleyin.</span><span class="sxs-lookup"><span data-stu-id="adc18-295">Pin one of the browsers on left and the other on the right of your screen.</span></span> <span data-ttu-id="adc18-296">Kimlik bilgilerinizle oturum açın veya yeni bir kullanıcı kaydı.</span><span class="sxs-lookup"><span data-stu-id="adc18-296">Log in with your credentials or register a new user.</span></span> <span data-ttu-id="adc18-297">Oturum açtıktan sonra Meraklısına Notlar sayfanın sol tarafta tutun ve Git **istatistikleri** sağdaki tarayıcıdaki sayfası.</span><span class="sxs-lookup"><span data-stu-id="adc18-297">Once logged in, keep the Trivia page on the left and go to the **Statistics** page in the browser on the right.</span></span>

    ![Geek test yan yana](real-time-web-applications-with-signalr/_static/image18.png)

    <span data-ttu-id="adc18-299">*Geek test yan yana*</span><span class="sxs-lookup"><span data-stu-id="adc18-299">*Geek Quiz Side by Side*</span></span>

    ![Geek test farklı bağlantı noktaları](real-time-web-applications-with-signalr/_static/image19.png)

    <span data-ttu-id="adc18-301">*Geek test farklı bağlantı noktaları*</span><span class="sxs-lookup"><span data-stu-id="adc18-301">*Geek Quiz in Different Ports*</span></span>
4. <span data-ttu-id="adc18-302">Sol tarayıcıda soru yanıtlama başlatın ve göreceksiniz **istatistikleri** sağdaki tarayıcıdaki sayfa değil güncelleştiriliyor.</span><span class="sxs-lookup"><span data-stu-id="adc18-302">Start answering questions in the left browser and you will notice that the **Statistics** page in the right browser is not being updated.</span></span> <span data-ttu-id="adc18-303">Bunun nedeni, **SignalR** kullanan yerel bir önbellek arasında istemcileri iletilerini dağıtmak için ve bu senaryo, birden çok örneği benzetimi, bu nedenle bir önbellek bunlar arasında paylaşılmaz.</span><span class="sxs-lookup"><span data-stu-id="adc18-303">This is because **SignalR** uses a local cache to distribute messages across their clients and this scenario is simulating multiple instances, therefore the cache is not shared between them.</span></span> <span data-ttu-id="adc18-304">Doğrulayabilirsiniz **SignalR** aynı adımları test ancak tek bir uygulama kullanarak çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="adc18-304">You can verify that **SignalR** is working by testing the same steps but using a single app.</span></span> <span data-ttu-id="adc18-305">Aşağıdaki görevleri örneklerinde iletileri çoğaltmak için bir devre kartı yapılandıracaksınız.</span><span class="sxs-lookup"><span data-stu-id="adc18-305">In the following tasks you will configure a backplane to replicate the messages across instances.</span></span>
5. <span data-ttu-id="adc18-306">Visual Studio'ya geri dönün ve hata ayıklamayı durdurun.</span><span class="sxs-lookup"><span data-stu-id="adc18-306">Go back to Visual Studio and stop debugging.</span></span>

<a id="Ex2Task2"></a>
#### <a name="task-2--creating-the-sql-server-backplane"></a><span data-ttu-id="adc18-307">Görev 2: SQL Server devre kartı oluşturma</span><span class="sxs-lookup"><span data-stu-id="adc18-307">Task 2 – Creating the SQL Server Backplane</span></span>

<span data-ttu-id="adc18-308">Bu görevde, için bir devre kartı olarak hizmet verecek bir veritabanı oluşturacaksınız **Geek test** uygulama.</span><span class="sxs-lookup"><span data-stu-id="adc18-308">In this task, you will create a database that will serve as a backplane for the **Geek Quiz** application.</span></span> <span data-ttu-id="adc18-309">Kullanacağınız **SQL Server Nesne Gezgini** sunucunuza gidin ve veritabanını başlatmak için.</span><span class="sxs-lookup"><span data-stu-id="adc18-309">You will use **SQL Server Object Explorer** to browse your server and initialize the database.</span></span> <span data-ttu-id="adc18-310">Ayrıca, sağlayacak **hizmet Aracısı**.</span><span class="sxs-lookup"><span data-stu-id="adc18-310">Additionally, you will enable the **Service Broker**.</span></span>

1. <span data-ttu-id="adc18-311">İçinde **Visual Studio**açın menü **görünümü** seçip **SQL Server Nesne Gezgini**.</span><span class="sxs-lookup"><span data-stu-id="adc18-311">In **Visual Studio**, open menu **View** and select **SQL Server Object Explorer**.</span></span>
2. <span data-ttu-id="adc18-312">Sağ tıklayarak LocalDB Örneğinize bağlanmak **SQL Server** düğüm ve seçerek **SQL Server Ekle...**  seçeneği.</span><span class="sxs-lookup"><span data-stu-id="adc18-312">Connect to your LocalDB instance by right-clicking the **SQL Server** node and selecting **Add SQL Server...** option.</span></span>

    <span data-ttu-id="adc18-313">![Bir SQL Server örneği ekleme](real-time-web-applications-with-signalr/_static/image20.png "bir SQL Server örneği ekleme")</span><span class="sxs-lookup"><span data-stu-id="adc18-313">![Adding a SQL Server Instance](real-time-web-applications-with-signalr/_static/image20.png "Adding a SQL Server Instance")</span></span>

    <span data-ttu-id="adc18-314">*Bir SQL Server örneği için SQL Server Nesne Gezgini ekleme*</span><span class="sxs-lookup"><span data-stu-id="adc18-314">*Adding a SQL Server instance to SQL Server Object Explorer*</span></span>
3. <span data-ttu-id="adc18-315">Ayarlama **sunucu adı** için *(localdb) \v11.0* bırakıp **Windows kimlik doğrulaması** , kimlik doğrulama modu.</span><span class="sxs-lookup"><span data-stu-id="adc18-315">Set the **server name** to *(localdb)\v11.0* and leave **Windows Authentication** as your authentication mode.</span></span> <span data-ttu-id="adc18-316">Tıklayın **Connect** devam etmek için.</span><span class="sxs-lookup"><span data-stu-id="adc18-316">Click **Connect** to continue.</span></span>

    <span data-ttu-id="adc18-317">![Bağlanmak için LocalDB](real-time-web-applications-with-signalr/_static/image21.png "yerel veritabanı'na bağlanma")</span><span class="sxs-lookup"><span data-stu-id="adc18-317">![Connecting to LocalDB](real-time-web-applications-with-signalr/_static/image21.png "Connecting to LocalDB")</span></span>

    <span data-ttu-id="adc18-318">*Yerel veritabanı'na bağlanma*</span><span class="sxs-lookup"><span data-stu-id="adc18-318">*Connecting to LocalDB*</span></span>
4. <span data-ttu-id="adc18-319">LocalDB Örneğinize bağlı, SignalR için SQL Server devre kartı temsil edecek bir veritabanı oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="adc18-319">Now that you are connected to your LocalDB instance, you will need to create a database that will represent the SQL Server backplane for SignalR.</span></span> <span data-ttu-id="adc18-320">Bunu yapmak için sağ **veritabanları** düğümünü seçip alt **yeni veritabanı Ekle**.</span><span class="sxs-lookup"><span data-stu-id="adc18-320">To do this, right-click the **Databases** node and select **Add New Database**.</span></span>

    <span data-ttu-id="adc18-321">![Yeni bir veritabanı ekleme](real-time-web-applications-with-signalr/_static/image22.png "yeni bir veritabanı ekleme")</span><span class="sxs-lookup"><span data-stu-id="adc18-321">![Adding a new database](real-time-web-applications-with-signalr/_static/image22.png "Adding a new database")</span></span>

    <span data-ttu-id="adc18-322">*Yeni bir veritabanı ekleme*</span><span class="sxs-lookup"><span data-stu-id="adc18-322">*Adding a new database*</span></span>
5. <span data-ttu-id="adc18-323">Veritabanı adı kümesine *SignalR* tıklatıp **Tamam** oluşturun.</span><span class="sxs-lookup"><span data-stu-id="adc18-323">Set the database name to *SignalR* and click **OK** to create it.</span></span>

    <span data-ttu-id="adc18-324">![SignalR veritabanı oluşturma](real-time-web-applications-with-signalr/_static/image23.png "SignalR veritabanı oluşturma")</span><span class="sxs-lookup"><span data-stu-id="adc18-324">![Creating the SignalR database](real-time-web-applications-with-signalr/_static/image23.png "Creating the SignalR database")</span></span>

    <span data-ttu-id="adc18-325">*SignalR veritabanı oluşturma*</span><span class="sxs-lookup"><span data-stu-id="adc18-325">*Creating the SignalR database*</span></span>

    > [!NOTE]
    > <span data-ttu-id="adc18-326">Veritabanı için herhangi bir ad seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="adc18-326">You can choose any name for the database.</span></span>
6. <span data-ttu-id="adc18-327">Güncelleştirmeleri kartından daha verimli bir şekilde almak için bu veritabanı için hizmet Aracısı etkinleştirme önerilir.</span><span class="sxs-lookup"><span data-stu-id="adc18-327">To receive updates more efficiently from the backplane, it is recommended to enable Service Broker for the database.</span></span> <span data-ttu-id="adc18-328">Hizmet Aracısı ileti ve SQL Server'da queuing için yerel destek sağlar.</span><span class="sxs-lookup"><span data-stu-id="adc18-328">Service Broker provides native support for messaging and queuing in SQL Server.</span></span> <span data-ttu-id="adc18-329">Devre kartına de hizmet aracısı çalışır.</span><span class="sxs-lookup"><span data-stu-id="adc18-329">The backplane also works without Service Broker.</span></span> <span data-ttu-id="adc18-330">Yeni bir sorgu seçin ve veritabanı sağ tıklayarak açın **yeni sorgu**.</span><span class="sxs-lookup"><span data-stu-id="adc18-330">Open a new query by right-clicking the database and select **New Query**.</span></span>

    <span data-ttu-id="adc18-331">![Yeni bir sorgu açarak](real-time-web-applications-with-signalr/_static/image24.png "yeni bir sorgu açma")</span><span class="sxs-lookup"><span data-stu-id="adc18-331">![Opening a New Query](real-time-web-applications-with-signalr/_static/image24.png "Opening a New Query")</span></span>

    <span data-ttu-id="adc18-332">*Yeni bir sorgu açma*</span><span class="sxs-lookup"><span data-stu-id="adc18-332">*Opening a New Query*</span></span>
7. <span data-ttu-id="adc18-333">Hizmet Aracısı etkin olup olmadığını denetlemek için sorgu **olduğu\_Aracısı\_etkin** sütununda **sys.databases** Katalog görünümü.</span><span class="sxs-lookup"><span data-stu-id="adc18-333">To check whether Service Broker is enabled, query the **is\_broker\_enabled** column in the **sys.databases** catalog view.</span></span> <span data-ttu-id="adc18-334">En son açılan sorgu penceresinde aşağıdaki komutu yürütün.</span><span class="sxs-lookup"><span data-stu-id="adc18-334">Execute the following script in the recently opened query window.</span></span>

    [!code-sql[Main](real-time-web-applications-with-signalr/samples/sample11.sql)]

    <span data-ttu-id="adc18-335">![Hizmet Aracısı durumu sorgulama](real-time-web-applications-with-signalr/_static/image25.png "hizmet Aracısı durumu sorgulama")</span><span class="sxs-lookup"><span data-stu-id="adc18-335">![Querying the Service Broker Status](real-time-web-applications-with-signalr/_static/image25.png "Querying the Service Broker Status")</span></span>

    <span data-ttu-id="adc18-336">*Hizmet Aracısı durumu sorgulama*</span><span class="sxs-lookup"><span data-stu-id="adc18-336">*Querying the Service Broker Status*</span></span>
8. <span data-ttu-id="adc18-337">Varsa değerini **olduğu\_Aracısı\_etkin** veritabanı sütunudur &quot;0&quot;, etkinleştirmek için aşağıdaki komutu kullanın.</span><span class="sxs-lookup"><span data-stu-id="adc18-337">If the value of the **is\_broker\_enabled** column in your database is &quot;0&quot;, use the following command to enable it.</span></span> <span data-ttu-id="adc18-338">Değiştirin **&lt;YOUR-veritabanı&gt;** veritabanını oluştururken ayarladığınız adıyla (örn: SignalR).</span><span class="sxs-lookup"><span data-stu-id="adc18-338">Replace **&lt;YOUR-DATABASE&gt;** with the name you set when creating the database (e.g.: SignalR).</span></span>

    [!code-sql[Main](real-time-web-applications-with-signalr/samples/sample12.sql)]

    <span data-ttu-id="adc18-339">![Hizmet Aracısı etkinleştirme](real-time-web-applications-with-signalr/_static/image26.png "hizmet Aracısı etkinleştirme")</span><span class="sxs-lookup"><span data-stu-id="adc18-339">![Enabling Service Broker](real-time-web-applications-with-signalr/_static/image26.png "Enabling Service Broker")</span></span>

    <span data-ttu-id="adc18-340">*Hizmet Aracısı etkinleştirme*</span><span class="sxs-lookup"><span data-stu-id="adc18-340">*Enabling Service Broker*</span></span>

    > [!NOTE]
    > <span data-ttu-id="adc18-341">Bu sorgu görünürse emin olmak için kilitlenme DB'ye bağlı hiç uygulama yok.</span><span class="sxs-lookup"><span data-stu-id="adc18-341">If this query appears to deadlock, make sure there are no applications connected to the DB.</span></span>

<a id="Ex2Task3"></a>
#### <a name="task-3--configuring-the-signalr-application"></a><span data-ttu-id="adc18-342">Görev 3: SignalR uygulamayı yapılandırma</span><span class="sxs-lookup"><span data-stu-id="adc18-342">Task 3 – Configuring the SignalR Application</span></span>

<span data-ttu-id="adc18-343">Bu görevde, yapılandıracağınız **Geek test** SQL Server devre kartına bağlanmak için.</span><span class="sxs-lookup"><span data-stu-id="adc18-343">In this task, you will configure **Geek Quiz** to connect to the SQL Server backplane.</span></span> <span data-ttu-id="adc18-344">İlk ekleyeceksiniz **SignalR.SqlServer** NuGet paketi kümesi bağlantı dizesi devre kartı veritabanınıza.</span><span class="sxs-lookup"><span data-stu-id="adc18-344">You will first add the **SignalR.SqlServer** NuGet package and set the connection string to your backplane database.</span></span>

1. <span data-ttu-id="adc18-345">Açık **Paket Yöneticisi Konsolu** gelen **Araçları** > **NuGet Paket Yöneticisi**.</span><span class="sxs-lookup"><span data-stu-id="adc18-345">Open the **Package Manager Console** from **Tools** > **NuGet Package Manager**.</span></span> <span data-ttu-id="adc18-346">Emin olun **GeekQuiz** projenin içinde seçili **varsayılan proje** aşağı açılan listesi.</span><span class="sxs-lookup"><span data-stu-id="adc18-346">Make sure that **GeekQuiz** project is selected in the **Default project** drop-down list.</span></span> <span data-ttu-id="adc18-347">Yüklemek için aşağıdaki komutu yazın **Microsoft.AspNet.SignalR.SqlServer** NuGet paketi.</span><span class="sxs-lookup"><span data-stu-id="adc18-347">Type the following command to install the **Microsoft.AspNet.SignalR.SqlServer** NuGet package.</span></span>

    [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample13.ps1)]
2. <span data-ttu-id="adc18-348">Proje için önceki adımı ancak bu kez tekrarlayın **GeekQuiz2**.</span><span class="sxs-lookup"><span data-stu-id="adc18-348">Repeat the previous step but this time for project **GeekQuiz2**.</span></span>
3. <span data-ttu-id="adc18-349">SQL Server devre kartına yapılandırmak için açık **Startup.cs** dosya **GeekQuiz** proje ve aşağıdaki kodu ekleyin **yapılandırma** yöntemi.</span><span class="sxs-lookup"><span data-stu-id="adc18-349">To configure the SQL Server backplane, open the **Startup.cs** file of the **GeekQuiz** project and add the following code to the **Configure** method.</span></span> <span data-ttu-id="adc18-350">Değiştirin **&lt;YOUR-veritabanı&gt;** ile SQL Server devre kartına oluştururken, veritabanı adı.</span><span class="sxs-lookup"><span data-stu-id="adc18-350">Replace **&lt;YOUR-DATABASE&gt;** with your database name you used when creating the SQL Server backplane.</span></span> <span data-ttu-id="adc18-351">Bu adım için yineleyin **GeekQuiz2** proje.</span><span class="sxs-lookup"><span data-stu-id="adc18-351">Repeat this step for the **GeekQuiz2** project.</span></span>

    <span data-ttu-id="adc18-352">(Kod parçacığını - *RealTimeSignalR - Ex2 - StartupConfiguration*)</span><span class="sxs-lookup"><span data-stu-id="adc18-352">(Code Snippet - *RealTimeSignalR - Ex2 - StartupConfiguration*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample14.cs)]
4. <span data-ttu-id="adc18-353">Her iki proje SQL Server devre kartına kullanmak üzere yapılandırılmış, basın **F5** aynı anda çalıştırmak için.</span><span class="sxs-lookup"><span data-stu-id="adc18-353">Now that both projects are configured to use the SQL Server backplane, press **F5** to run them simultaneously.</span></span>
5. <span data-ttu-id="adc18-354">Yeniden **Visual Studio** iki örneği başlatacak **Geek test** farklı bağlantı noktaları.</span><span class="sxs-lookup"><span data-stu-id="adc18-354">Again, **Visual Studio** will launch two instances of **Geek Quiz** in different ports.</span></span> <span data-ttu-id="adc18-355">Sol tarafta, ekranınızın sağ taraftaki diğer tarayıcılardan birini sabitleme ve kimlik bilgilerinizle oturum açın.</span><span class="sxs-lookup"><span data-stu-id="adc18-355">Pin one of the browsers on the left and the other on the right of your screen and log in with your credentials.</span></span> <span data-ttu-id="adc18-356">Meraklısına Notlar sayfanın sol tarafta tutun ve Git **istatistikleri** pageın doğru tarayıcı.</span><span class="sxs-lookup"><span data-stu-id="adc18-356">Keep the Trivia page on the left and go to **Statistics** pagein the right browser.</span></span>
6. <span data-ttu-id="adc18-357">Sol tarayıcıda soruyu yanıtlayarak başlatın.</span><span class="sxs-lookup"><span data-stu-id="adc18-357">Start answering questions in the left browser.</span></span> <span data-ttu-id="adc18-358">Bu kez, **istatistikleri** sayfası devre kartına sayesinde güncelleştirildi.</span><span class="sxs-lookup"><span data-stu-id="adc18-358">This time, the **Statistics** page is updated thanks to the backplane.</span></span> <span data-ttu-id="adc18-359">Uygulamalar arasında geçiş yapma (**istatistikleri** solda, sunulmuştur ve **Meraklısına Notlar** sağ tarafta olduğundan) ve test için her iki örnek çalıştığını doğrulamak için yineleyin.</span><span class="sxs-lookup"><span data-stu-id="adc18-359">Switch between applications (**Statistics** is now on the left, and **Trivia** is on the right) and repeat the test to validate that it is working for both instances.</span></span> <span data-ttu-id="adc18-360">Devre kartı olarak hizmet veren bir *paylaşımlı önbellek* bağlı her sunucu ve her sunucu için iletilerin iletileri bağlı istemcilere dağıtmak için kendi yerel önbellekte depolar.</span><span class="sxs-lookup"><span data-stu-id="adc18-360">The backplane serves as a *shared cache* of messages for each connected server, and each server will store the messages in their own local cache to distribute to connected clients.</span></span>
7. <span data-ttu-id="adc18-361">Visual Studio'ya geri dönün ve hata ayıklamayı durdurun.</span><span class="sxs-lookup"><span data-stu-id="adc18-361">Go back to Visual Studio and stop debugging.</span></span>
8. <span data-ttu-id="adc18-362">SQL Server devre kartı bileşeni, belirtilen veritabanında gerekli tabloları otomatik olarak oluşturur.</span><span class="sxs-lookup"><span data-stu-id="adc18-362">The SQL Server backplane component automatically generates the necessary tables on the specified database.</span></span> <span data-ttu-id="adc18-363">İçinde **SQL Server Nesne Gezgini** panelinde, devre kartı için oluşturduğunuz veritabanına açın (örneğin: SignalR) ve alt tablolar'ı genişletin.</span><span class="sxs-lookup"><span data-stu-id="adc18-363">In the **SQL Server Object Explorer** panel, open the database you created for the backplane (e.g.: SignalR) and expand its tables.</span></span> <span data-ttu-id="adc18-364">Aşağıdaki tablolarda görmeniz gerekir:</span><span class="sxs-lookup"><span data-stu-id="adc18-364">You should see the following tables:</span></span>

    ![Devre kartına tabloları oluşturulan](real-time-web-applications-with-signalr/_static/image27.png)

    <span data-ttu-id="adc18-366">*Devre kartına tabloları oluşturulan*</span><span class="sxs-lookup"><span data-stu-id="adc18-366">*Backplane Generated Tables*</span></span>
9. <span data-ttu-id="adc18-367">Sağ **SignalR.Messages\_0** tablosunu seçip **görünüm verilerini**.</span><span class="sxs-lookup"><span data-stu-id="adc18-367">Right-click the **SignalR.Messages\_0** table and select **View Data**.</span></span>

    ![SignalR devre kartına ileti tabloyu görüntüle](real-time-web-applications-with-signalr/_static/image28.png)

    <span data-ttu-id="adc18-369">*SignalR devre kartına ileti tabloyu görüntüle*</span><span class="sxs-lookup"><span data-stu-id="adc18-369">*View SignalR Backplane Messages Table*</span></span>
10. <span data-ttu-id="adc18-370">Gönderilen farklı iletileri görebilirsiniz **Hub** trivia soruyu yanıtlayarak olduğunda.</span><span class="sxs-lookup"><span data-stu-id="adc18-370">You can see the different messages sent to the **Hub** when answering the trivia questions.</span></span> <span data-ttu-id="adc18-371">Devre kartına bağlı herhangi bir örneğe bu iletileri dağıtır.</span><span class="sxs-lookup"><span data-stu-id="adc18-371">The backplane distributes these messages to any connected instance.</span></span>

    ![Devre kartına ileti tablo](real-time-web-applications-with-signalr/_static/image29.png)

    <span data-ttu-id="adc18-373">*Devre kartına ileti tablo*</span><span class="sxs-lookup"><span data-stu-id="adc18-373">*Backplane Messages Table*</span></span>

* * *

<a id="Summary"></a>
## <a name="summary"></a><span data-ttu-id="adc18-374">Özet</span><span class="sxs-lookup"><span data-stu-id="adc18-374">Summary</span></span>

<span data-ttu-id="adc18-375">Bu uygulamalı laboratuvarda nasıl ekleneceğini öğrendiniz **SignalR** uygulama ve gönderme bildirimlerinizi sunucudan kullanan, bağlı istemciler için **Hubs**.</span><span class="sxs-lookup"><span data-stu-id="adc18-375">In this hands-on lab, you have learned how to add **SignalR** to your application and send notifications from the server to your connected clients using **Hubs**.</span></span> <span data-ttu-id="adc18-376">Kullanarak, uygulamanın ölçeğini genişletmek öğrendiniz ek olarak, bir *devre kartı* uygulamanız birden çok IIS örneğinde dağıtıldığında bileşeni.</span><span class="sxs-lookup"><span data-stu-id="adc18-376">Additionally, you learned how to scale out your application by using a *backplane* component when your application is deployed in multiple IIS instances.</span></span>
