---
uid: signalr/overview/getting-started/real-time-web-applications-with-signalr
title: 'Uygulamalı laboratuvar: SignalR ile gerçek zamanlı web uygulamaları | Microsoft Docs'
author: bradygaster
description: Gerçek zamanlı web uygulamaları, bağlı istemcilere gerçek zamanlı olarak sunucu tarafı içeriği gönderme özelliğini sağlar. ASP.NET geliştiricileri için ASP...
ms.author: bradyg
ms.date: 07/16/2014
ms.assetid: ba07958c-42e1-4da0-81db-ba6925ed6db0
msc.legacyurl: /signalr/overview/getting-started/real-time-web-applications-with-signalr
msc.type: authoredcontent
ms.openlocfilehash: 9e39fd3f2fc9d4e791002450085215096c222fcd
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78537102"
---
# <a name="hands-on-lab-real-time-web-applications-with-signalr"></a><span data-ttu-id="a9d53-104">Uygulamalı Laboratuvar: SignalR ile Gerçek Zamanlı Web Uygulamaları</span><span class="sxs-lookup"><span data-stu-id="a9d53-104">Hands On Lab: Real-Time Web Applications with SignalR</span></span>

<span data-ttu-id="a9d53-105">[Web 'de Camps ekibine](https://twitter.com/webcamps) göre</span><span class="sxs-lookup"><span data-stu-id="a9d53-105">by [Web Camps Team](https://twitter.com/webcamps)</span></span>

[!INCLUDE [Consider ASP.NET Core SignalR](~/includes/signalr/signalr-version-disambiguation.md)]

[<span data-ttu-id="a9d53-106">Web Camps eğitim paketini indirin, 2015 Ekim yayını</span><span class="sxs-lookup"><span data-stu-id="a9d53-106">Download Web Camps Training Kit, October 2015 Release</span></span>](https://github.com/Microsoft-Web/WebCampTrainingKit/releases/tag/v2015.10.13b)

> <span data-ttu-id="a9d53-107">Gerçek zamanlı web uygulamaları, bağlı istemcilere gerçek zamanlı olarak sunucu tarafı içeriği gönderme özelliğini sağlar.</span><span class="sxs-lookup"><span data-stu-id="a9d53-107">Real-time Web applications feature the ability to push server-side content to the connected clients as it happens, in real-time.</span></span> <span data-ttu-id="a9d53-108">ASP.NET geliştiricileri için **ASP.NET SignalR** , uygulamalarına gerçek zamanlı Web işlevselliği eklemek için bir kitaplıktır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-108">For ASP.NET developers, **ASP.NET SignalR** is a library to add real-time web functionality to their applications.</span></span> <span data-ttu-id="a9d53-109">İstemci ve sunucunun en iyi kullanılabilir taşıması verilen en iyi kullanılabilir aktarımı otomatik olarak seçerek birkaç aktarımdan yararlanır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-109">It takes advantage of several transports, automatically selecting the best available transport given the client and server's best available transport.</span></span> <span data-ttu-id="a9d53-110">Tarayıcı ve sunucu arasında çift yönlü iletişime izin veren bir HTML5 API 'SI olan **WebSocket**'ten faydalanır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-110">It takes advantage of **WebSocket**, an HTML5 API that enables bi-directional communication between the browser and server.</span></span>
> 
> <span data-ttu-id="a9d53-111">**SignalR** ayrıca, ASP.net uygulamanızda sunucu istemci RPC 'ye (Istemcilerinizdeki JavaScript işlevlerini çağırma) ve bağlantı yönetimi için, bağlanma/bağlantı kesme, gruplama bağlantıları ve yetkilendirme gibi faydalı kancalar ekleme için basit ve yüksek düzey bir API sağlar.</span><span class="sxs-lookup"><span data-stu-id="a9d53-111">**SignalR** also provides a simple, high-level API for doing server to client RPC (call JavaScript functions in your clients' browsers from server-side .NET code) in your ASP.NET application, as well as adding useful hooks for connection management, such as connect/disconnect events, grouping connections, and authorization.</span></span>
> 
> <span data-ttu-id="a9d53-112">**SignalR** , istemci ve sunucu arasında gerçek zamanlı çalışma yapmak için gereken aktarımlara göre soyutlamadır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-112">**SignalR** is an abstraction over some of the transports that are required to do real-time work between client and server.</span></span> <span data-ttu-id="a9d53-113">Bir **SignalR** bağlantısı http olarak başlar ve varsa bir **WebSocket** bağlantısına yükseltilir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-113">A **SignalR** connection starts as HTTP, and is then promoted to a **WebSocket** connection if available.</span></span> <span data-ttu-id="a9d53-114">**WebSocket** , **SignalR**için ideal bir aktarımdır, çünkü sunucu belleğinin en verimli şekilde kullanılmasını sağlar, en düşük gecikme süresine sahiptir ve en temel özelliklere sahiptir (istemci ve sunucu arasında tam çift yönlü iletişim gibi), ancak aynı zamanda en sıkı gereksinimlere sahiptir: **WebSocket** , sunucunun **Windows server 2012** veya **Windows 8**ile birlikte **.NET Framework 4,5**kullanmasını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-114">**WebSocket** is the ideal transport for **SignalR**, since it makes the most efficient use of server memory, has the lowest latency, and has the most underlying features (such as full duplex communication between client and server), but it also has the most stringent requirements: **WebSocket** requires the server to be using **Windows Server 2012** or **Windows 8**, along with **.NET Framework 4.5**.</span></span> <span data-ttu-id="a9d53-115">Bu gereksinimler karşılanmazsa, **SignalR** bağlantı yapmak için diğer aktarımları kullanmayı dener ( *Ajax uzun yoklama*gibi).</span><span class="sxs-lookup"><span data-stu-id="a9d53-115">If these requirements are not met, **SignalR** will attempt to use other transports to make its connections (like *Ajax long polling*).</span></span>
> 
> <span data-ttu-id="a9d53-116">**SignalR** API 'si istemciler ve sunucular arasında iletişim kurmak için iki model Içerir: **kalıcı bağlantılar** ve **hub 'lar**.</span><span class="sxs-lookup"><span data-stu-id="a9d53-116">The **SignalR** API contains two models for communicating between clients and servers: **Persistent Connections** and **Hubs**.</span></span> <span data-ttu-id="a9d53-117">**Bağlantı** , tek alıcı, gruplandırılmış veya yayın iletileri göndermek için basit bir uç noktasını temsil eder.</span><span class="sxs-lookup"><span data-stu-id="a9d53-117">A **Connection** represents a simple endpoint for sending single-recipient, grouped, or broadcast messages.</span></span> <span data-ttu-id="a9d53-118">**Hub** , istemci ve sunucunuzun birbirlerine doğrudan Yöntemler çağırmasını sağlayan bağlantı API 'si üzerinde oluşturulmuş daha yüksek düzey bir işlem hattdır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-118">A **Hub** is a more high-level pipeline built upon the Connection API that allows your client and server to call methods on each other directly.</span></span>
> 
> ![SignalR mimarisi](real-time-web-applications-with-signalr/_static/image1.png)
> 
> <span data-ttu-id="a9d53-120">Tüm örnek kod ve kod parçacıkları [https://github.com/Microsoft-Web/WebCampTrainingKit/releases/tag/v2015.10.13b](https://github.com/Microsoft-Web/WebCampTrainingKit/releases/tag/v2015.10.13b)adresinden erişilebilen Web Camps eğitim seti, 2015 Ekim sürümüne eklenmiştir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-120">All sample code and snippets are included in the Web Camps Training Kit, October 2015 Release, available at [https://github.com/Microsoft-Web/WebCampTrainingKit/releases/tag/v2015.10.13b](https://github.com/Microsoft-Web/WebCampTrainingKit/releases/tag/v2015.10.13b).</span></span>  <span data-ttu-id="a9d53-121">Lütfen bu sayfadaki yükleyici bağlantısının artık çalışmadığını unutmayın; Bunun yerine varlıklar bölümünde bağlantılardan birini kullanın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-121">Please note that the Installer link on that page no longer works; use one of the links under the Assets section instead.</span></span>

<a id="Overview"></a>
## <a name="overview"></a><span data-ttu-id="a9d53-122">Genel bakış</span><span class="sxs-lookup"><span data-stu-id="a9d53-122">Overview</span></span>

<a id="Objectives"></a>
### <a name="objectives"></a><span data-ttu-id="a9d53-123">Amaçlar</span><span class="sxs-lookup"><span data-stu-id="a9d53-123">Objectives</span></span>

<span data-ttu-id="a9d53-124">Bu uygulamalı laboratuvarda şunları nasıl yapacağınızı öğreneceksiniz:</span><span class="sxs-lookup"><span data-stu-id="a9d53-124">In this hands-on lab, you will learn how to:</span></span>

- <span data-ttu-id="a9d53-125">SignalR kullanarak sunucudan istemciye bildirim gönderin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-125">Send notifications from server to client using SignalR.</span></span>
- <span data-ttu-id="a9d53-126">**SQL Server**kullanarak SignalR uygulamanızı ölçeklendirin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-126">Scale Out your SignalR application using **SQL Server**.</span></span>

<a id="Prerequisites"></a>
### <a name="prerequisites"></a><span data-ttu-id="a9d53-127">Önkoşullar</span><span class="sxs-lookup"><span data-stu-id="a9d53-127">Prerequisites</span></span>

<span data-ttu-id="a9d53-128">Bu uygulamalı laboratuvarın tamamlanabilmesi için aşağıdakiler gereklidir:</span><span class="sxs-lookup"><span data-stu-id="a9d53-128">The following is required to complete this hands-on lab:</span></span>

- <span data-ttu-id="a9d53-129">Web veya daha büyük [için Visual Studio Express 2013](https://www.microsoft.com/visualstudio/)</span><span class="sxs-lookup"><span data-stu-id="a9d53-129">[Visual Studio Express 2013 for Web](https://www.microsoft.com/visualstudio/) or greater</span></span>

<a id="Setup"></a>
### <a name="setup"></a><span data-ttu-id="a9d53-130">Kurulum</span><span class="sxs-lookup"><span data-stu-id="a9d53-130">Setup</span></span>

<span data-ttu-id="a9d53-131">Bu uygulamalı laboratuvarda alýþtýrmalarý çalıştırmak için öncelikle ortamınızı ayarlamanız gerekecektir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-131">In order to run the exercises in this hands-on lab, you will need to set up your environment first.</span></span>

1. <span data-ttu-id="a9d53-132">Bir Windows Explorer penceresi açın ve laboratuvarın **kaynak** klasörüne gidin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-132">Open a Windows Explorer window and browse to the lab's **Source** folder.</span></span>
2. <span data-ttu-id="a9d53-133">Ortamınızı yapılandıracak ve bu laboratuvar için Visual Studio kod parçacıklarını yükleyecek kurulum işlemini başlatmak için **Setup. cmd** ' ye sağ tıklayın ve **yönetici olarak çalıştır** ' ı seçin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-133">Right-click **Setup.cmd** and select **Run as administrator** to launch the setup process that will configure your environment and install the Visual Studio code snippets for this lab.</span></span>
3. <span data-ttu-id="a9d53-134">Kullanıcı hesabı denetimi iletişim kutusu gösterilirse, devam etmek için eylemi onaylayın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-134">If the User Account Control dialog box is shown, confirm the action to proceed.</span></span>

> [!NOTE]
> <span data-ttu-id="a9d53-135">Kurulumu çalıştırmadan önce bu laboratuvarın tüm bağımlılıklarını denetlediğinizden emin olun.</span><span class="sxs-lookup"><span data-stu-id="a9d53-135">Make sure you have checked all the dependencies for this lab before running the setup.</span></span>

<a id="CodeSnippets"></a>
### <a name="using-the-code-snippets"></a><span data-ttu-id="a9d53-136">Kod parçacıklarını kullanma</span><span class="sxs-lookup"><span data-stu-id="a9d53-136">Using the Code Snippets</span></span>

<span data-ttu-id="a9d53-137">Laboratuvar belgesi boyunca kod blokları eklemeniz istenir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-137">Throughout the lab document, you will be instructed to insert code blocks.</span></span> <span data-ttu-id="a9d53-138">Kolaylık olması için, bu kodun çoğu Visual Studio Code kod parçacığı olarak sağlanır ve bu, el ile ekleme zorunluluğunu ortadan kaldırmak için Visual Studio 2013 içinden erişebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-138">For your convenience, most of this code is provided as Visual Studio Code Snippets, which you can access from within Visual Studio 2013 to avoid having to add it manually.</span></span>

> [!NOTE]
> <span data-ttu-id="a9d53-139">Her alıştırma, her alıştırmanın bağımsız olarak her birini takip etmenizi sağlayan alıştırmanın **BEGIN** klasöründe bulunan bir başlangıç çözümüdür.</span><span class="sxs-lookup"><span data-stu-id="a9d53-139">Each exercise is accompanied by a starting solution located in the **Begin** folder of the exercise that allows you to follow each exercise independently of the others.</span></span> <span data-ttu-id="a9d53-140">Lütfen bir alıştırma sırasında eklenen kod parçacıklarının bu başlangıç çözümlerinde eksik olduğunu ve Alıştırmayı tamamlayana kadar çalışmadığının farkında olun.</span><span class="sxs-lookup"><span data-stu-id="a9d53-140">Please be aware that the code snippets that are added during an exercise are missing from these starting solutions and may not work until you have completed the exercise.</span></span> <span data-ttu-id="a9d53-141">Bir alıştırmada kaynak kodun içinde, ilgili alıştırmada adımların tamamlanmasına neden olan koda sahip bir Visual Studio çözümü içeren bir **son** klasör de bulacaksınız.</span><span class="sxs-lookup"><span data-stu-id="a9d53-141">Inside the source code for an exercise, you will also find an **End** folder containing a Visual Studio solution with the code that results from completing the steps in the corresponding exercise.</span></span> <span data-ttu-id="a9d53-142">Bu uygulamalı laboratuvarda çalışırken daha fazla yardıma ihtiyacınız varsa bu çözümleri kılavuz olarak kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-142">You can use these solutions as guidance if you need additional help as you work through this hands-on lab.</span></span>

---

<a id="Exercises"></a>
## <a name="exercises"></a><span data-ttu-id="a9d53-143">Alıştırmalarda</span><span class="sxs-lookup"><span data-stu-id="a9d53-143">Exercises</span></span>

<span data-ttu-id="a9d53-144">Bu uygulamalı laboratuvar aşağıdaki alıştırmaları içerir:</span><span class="sxs-lookup"><span data-stu-id="a9d53-144">This hands-on lab includes the following exercises:</span></span>

1. [<span data-ttu-id="a9d53-145">SignalR kullanarak gerçek zamanlı verilerle çalışma</span><span class="sxs-lookup"><span data-stu-id="a9d53-145">Working with Real-Time Data Using SignalR</span></span>](#Exercise1)
2. [<span data-ttu-id="a9d53-146">SQL Server kullanarak genişletme</span><span class="sxs-lookup"><span data-stu-id="a9d53-146">Scaling Out Using SQL Server</span></span>](#Exercise2)

<span data-ttu-id="a9d53-147">Bu Laboratuvarı tamamlamaya yönelik tahmini süre: **60 dakika**</span><span class="sxs-lookup"><span data-stu-id="a9d53-147">Estimated time to complete this lab: **60 minutes**</span></span>

> [!NOTE]
> <span data-ttu-id="a9d53-148">Visual Studio 'Yu ilk kez başlattığınızda, önceden tanımlanmış ayarlar koleksiyonundan birini seçmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-148">When you first start Visual Studio, you must select one of the predefined settings collections.</span></span> <span data-ttu-id="a9d53-149">Her önceden tanımlı koleksiyon, belirli bir geliştirme stiliyle eşleşecek şekilde tasarlanmıştır ve pencere düzenlerini, düzenleyici davranışını, IntelliSense kod parçacıklarını ve iletişim kutusu seçeneklerini belirler.</span><span class="sxs-lookup"><span data-stu-id="a9d53-149">Each predefined collection is designed to match a particular development style and determines window layouts, editor behavior, IntelliSense code snippets, and dialog box options.</span></span> <span data-ttu-id="a9d53-150">Bu laboratuvardaki yordamlarda, **genel geliştirme ayarları** koleksiyonu kullanılırken, Visual Studio 'da belirli bir görevi gerçekleştirmek için gereken eylemler açıklanır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-150">The procedures in this lab describe the actions necessary to accomplish a given task in Visual Studio when using the **General Development Settings** collection.</span></span> <span data-ttu-id="a9d53-151">Geliştirme ortamınız için farklı bir ayarlar koleksiyonu seçerseniz, adımlarda dikkate almanız gereken adımlarda farklılıklar olabilir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-151">If you choose a different settings collection for your development environment, there may be differences in the steps that you should take into account.</span></span>

<a id="Exercise1"></a>
### <a name="exercise-1-working-with-real-time-data-using-signalr"></a><span data-ttu-id="a9d53-152">Alıştırma 1: SignalR kullanarak gerçek zamanlı verilerle çalışma</span><span class="sxs-lookup"><span data-stu-id="a9d53-152">Exercise 1: Working with Real-Time Data Using SignalR</span></span>

<span data-ttu-id="a9d53-153">Sohbet genellikle örnek olarak kullanıldığında, gerçek zamanlı web işlevselliğiyle çok daha fazlasını yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-153">While chat is often used as an example, you can do a whole lot more with real-time Web functionality.</span></span> <span data-ttu-id="a9d53-154">Bir Kullanıcı yeni verileri görmek için bir Web sayfasını yenilediğinde veya yeni verileri almak için AJAX uzun yoklamayı uygularsa, SignalR kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-154">Any time a user refreshes a web page to see new data or the page implements Ajax long polling to retrieve new data, you can use SignalR.</span></span>

<span data-ttu-id="a9d53-155">SignalR, **sunucu gönderme** veya **yayınlama** işlevlerini destekler; bağlantı yönetimini otomatik olarak işler.</span><span class="sxs-lookup"><span data-stu-id="a9d53-155">SignalR supports **server push** or **broadcasting** functionality; it handles connection management automatically.</span></span> <span data-ttu-id="a9d53-156">İstemci-sunucu iletişimi için klasik HTTP bağlantılarında, her istek için bağlantı yeniden oluşturulur, ancak SignalR istemci ile sunucu arasında kalıcı bağlantı sağlar.</span><span class="sxs-lookup"><span data-stu-id="a9d53-156">In classic HTTP connections for client-server communication, connection is re-established for each request, but SignalR provides persistent connection between the client and server.</span></span> <span data-ttu-id="a9d53-157">SignalR 'de sunucu kodu, Bugün öğrendiğimiz istek-yanıt modeli yerine uzak yordam çağrılarını (RPC) kullanarak tarayıcıda istemci koduna çağrı yapılır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-157">In SignalR the server code calls out to a client code in the browser using Remote Procedure Calls (RPC), rather than the request-response model we know today.</span></span>

<span data-ttu-id="a9d53-158">Bu alıştırmada, tüm sayfayı yenilemeye gerek kalmadan, Istatistik panosunu güncelleştirilmiş ölçümlerle birlikte göstermek için **Geek test** uygulamasını bir SignalR kullanacak şekilde yapılandıracaksınız.</span><span class="sxs-lookup"><span data-stu-id="a9d53-158">In this exercise, you will configure the **Geek Quiz** application to use SignalR to display the Statistics dashboard with the updated metrics without the need to refresh the entire page.</span></span>

<a id="Ex1Task1"></a>
#### <a name="task-1--exploring-the-geek-quiz-statistics-page"></a><span data-ttu-id="a9d53-159">Görev 1 – Geek test Istatistikleri sayfasını keşfetme</span><span class="sxs-lookup"><span data-stu-id="a9d53-159">Task 1 – Exploring the Geek Quiz Statistics Page</span></span>

<span data-ttu-id="a9d53-160">Bu görevde, uygulamayı ilertirecek ve istatistik sayfasının nasıl görüntülendiğini ve bilgilerin güncelleştirilme şeklini nasıl geliştirebileceğinizi doğrulayacaksınız.</span><span class="sxs-lookup"><span data-stu-id="a9d53-160">In this task, you will go through the application and verify how the statistics page is shown and how you can improve the way the information is updated.</span></span>

1. <span data-ttu-id="a9d53-161">**Web için Visual Studio Express 2013** ' i açın ve **Source\Ex1-WorkingWithRealTimeData\Begin** klasöründe bulunan **geektest. sln** çözümünü açın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-161">Open **Visual Studio Express 2013 for Web** and open the **GeekQuiz.sln** solution located in the **Source\Ex1-WorkingWithRealTimeData\Begin** folder.</span></span>
2. <span data-ttu-id="a9d53-162">Çözümü çalıştırmak için **F5** tuşuna basın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-162">Press **F5** to run the solution.</span></span> <span data-ttu-id="a9d53-163">**Oturum açma** sayfası tarayıcıda görünmelidir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-163">The **Log in** page should appear in the browser.</span></span>

    <span data-ttu-id="a9d53-164">![Çözümü çalıştırma](real-time-web-applications-with-signalr/_static/image2.png "Çözümü çalıştırma")</span><span class="sxs-lookup"><span data-stu-id="a9d53-164">![Running the solution](real-time-web-applications-with-signalr/_static/image2.png "Running the solution")</span></span>

    <span data-ttu-id="a9d53-165">*Çözümü çalıştırma*</span><span class="sxs-lookup"><span data-stu-id="a9d53-165">*Running the solution*</span></span>
3. <span data-ttu-id="a9d53-166">Uygulamada yeni bir kullanıcı oluşturmak için sayfanın sağ üst köşesindeki **Kaydet** ' e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-166">Click **Register** in the upper-right corner of the page to create a new user in the application.</span></span>

    <span data-ttu-id="a9d53-167">![Bağlantıyı Kaydet](real-time-web-applications-with-signalr/_static/image3.png "Bağlantıyı Kaydet")</span><span class="sxs-lookup"><span data-stu-id="a9d53-167">![Register link](real-time-web-applications-with-signalr/_static/image3.png "Register link")</span></span>

    <span data-ttu-id="a9d53-168">*Bağlantıyı Kaydet*</span><span class="sxs-lookup"><span data-stu-id="a9d53-168">*Register link*</span></span>
4. <span data-ttu-id="a9d53-169">**Kaydet** sayfasında, bir **Kullanıcı adı** ve **parola**girin ve ardından **Kaydet**' e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-169">In the **Register** page, enter a **User name** and **Password**, and then click **Register**.</span></span>

    <span data-ttu-id="a9d53-170">![Kullanıcı kaydetme](real-time-web-applications-with-signalr/_static/image4.png "Kullanıcı kaydetme")</span><span class="sxs-lookup"><span data-stu-id="a9d53-170">![Registering a user](real-time-web-applications-with-signalr/_static/image4.png "Registering a user")</span></span>

    <span data-ttu-id="a9d53-171">*Kullanıcı kaydetme*</span><span class="sxs-lookup"><span data-stu-id="a9d53-171">*Registering a user*</span></span>
5. <span data-ttu-id="a9d53-172">Uygulama yeni hesabı kaydeder ve kullanıcının kimliği doğrulanır ve ilk test sorusunu gösteren giriş sayfasına yeniden yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-172">The application registers the new account and the user is authenticated and redirected back to the home page showing the first quiz question.</span></span>
6. <span data-ttu-id="a9d53-173">**İstatistikler** sayfasını yeni bir pencerede açın ve **giriş** sayfası ve **İstatistikler** sayfasını yan yana yerleştirin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-173">Open the **Statistics** page in a new window and put the **Home** page and **Statistics** page side-by-side.</span></span>

    <span data-ttu-id="a9d53-174">![Yan yana Windows](real-time-web-applications-with-signalr/_static/image5.png "Yan yana pencereler")</span><span class="sxs-lookup"><span data-stu-id="a9d53-174">![Side-by-side windows](real-time-web-applications-with-signalr/_static/image5.png "Side by side windows")</span></span>

    <span data-ttu-id="a9d53-175">*Yan yana Windows*</span><span class="sxs-lookup"><span data-stu-id="a9d53-175">*Side-by-side windows*</span></span>
7. <span data-ttu-id="a9d53-176">**Giriş** sayfasında, seçeneklerden birine tıklayarak soruyu yanıtlayın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-176">In the **Home** page, answer the question by clicking one of the options.</span></span>

    <span data-ttu-id="a9d53-177">![Soru yanıt verme](real-time-web-applications-with-signalr/_static/image6.png "Soru yanıt verme")</span><span class="sxs-lookup"><span data-stu-id="a9d53-177">![Answering a question](real-time-web-applications-with-signalr/_static/image6.png "Answering a question")</span></span>

    <span data-ttu-id="a9d53-178">*Soru yanıt verme*</span><span class="sxs-lookup"><span data-stu-id="a9d53-178">*Answering a question*</span></span>
8. <span data-ttu-id="a9d53-179">Düğmelerden birine tıkladıktan sonra yanıt görüntülenmelidir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-179">After clicking one of the buttons, the answer should appear.</span></span>

    <span data-ttu-id="a9d53-180">![Soru yanıt doğru](real-time-web-applications-with-signalr/_static/image7.png "Soru yanıt doğru")</span><span class="sxs-lookup"><span data-stu-id="a9d53-180">![Question answered correct](real-time-web-applications-with-signalr/_static/image7.png "Question answered correct")</span></span>

    <span data-ttu-id="a9d53-181">*Soru doğru yanıtlandı*</span><span class="sxs-lookup"><span data-stu-id="a9d53-181">*Question answered correctly*</span></span>
9. <span data-ttu-id="a9d53-182">Istatistikler sayfasında belirtilen bilgilerin güncel olmadığına dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-182">Notice that the information provided in the Statistics page is outdated.</span></span> <span data-ttu-id="a9d53-183">Güncelleştirilmiş sonuçları görmek için sayfayı yenileyin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-183">Refresh the page in order to see the updated results.</span></span>

    <span data-ttu-id="a9d53-184">![İstatistikler sayfası](real-time-web-applications-with-signalr/_static/image8.png "İstatistikler sayfası")</span><span class="sxs-lookup"><span data-stu-id="a9d53-184">![Statistics page](real-time-web-applications-with-signalr/_static/image8.png "Statistics page")</span></span>

    <span data-ttu-id="a9d53-185">*İstatistikler sayfası*</span><span class="sxs-lookup"><span data-stu-id="a9d53-185">*Statistics page*</span></span>
10. <span data-ttu-id="a9d53-186">Visual Studio 'ya geri dönün ve hata ayıklamayı durdurun.</span><span class="sxs-lookup"><span data-stu-id="a9d53-186">Go back to Visual Studio and stop debugging.</span></span>

<a id="Ex1Task2"></a>
#### <a name="task-2--adding-signalr-to-geek-quiz-to-show-online-charts"></a><span data-ttu-id="a9d53-187">Görev 2 – çevrimiçi grafikleri göstermek için SignalR to Geek sınavını ekleme</span><span class="sxs-lookup"><span data-stu-id="a9d53-187">Task 2 – Adding SignalR to Geek Quiz to Show Online Charts</span></span>

<span data-ttu-id="a9d53-188">Bu görevde, çözüme bir SignalR ekler ve sunucuya yeni bir yanıt gönderildiğinde güncelleştirmeleri otomatik olarak istemcilere gönderebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-188">In this task, you will add SignalR to the solution and send updates to the clients automatically when a new answer is sent to the server.</span></span>

1. <span data-ttu-id="a9d53-189">Visual Studio 'daki **Araçlar** menüsünde, **NuGet Paket Yöneticisi**' ni seçin ve ardından **Paket Yöneticisi konsolu**' na tıklayın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-189">From the **Tools** menu in Visual Studio, select **NuGet Package Manager**, and then click **Package Manager Console**.</span></span>
2. <span data-ttu-id="a9d53-190">**Paket Yöneticisi konsolu** penceresinde aşağıdaki komutu yürütün:</span><span class="sxs-lookup"><span data-stu-id="a9d53-190">In the **Package Manager Console** window, execute the following command:</span></span>

    [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample1.ps1)]

    <span data-ttu-id="a9d53-191">![SignalR paketi yüklemesi](real-time-web-applications-with-signalr/_static/image9.png "SignalR paketi yüklemesi")</span><span class="sxs-lookup"><span data-stu-id="a9d53-191">![SignalR package installation](real-time-web-applications-with-signalr/_static/image9.png "SignalR package installation")</span></span>

    <span data-ttu-id="a9d53-192">*SignalR paketi yüklemesi*</span><span class="sxs-lookup"><span data-stu-id="a9d53-192">*SignalR package installation*</span></span>

   > [!NOTE]
   > <span data-ttu-id="a9d53-193">**SignalR** NuGet paketleri sürüm 2.0.2 'i yenı bir MVC 5 uygulamasından yüklerken, SignalR 'yi yüklemeden önce **owın** paketlerini (veya üzeri) sürüm 2.0.1'i el ile güncelleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-193">When installing **SignalR** NuGet packages version 2.0.2 from a brand new MVC 5 application, you will need to manually update **OWIN** packages to version 2.0.1 (or higher) before installing SignalR.</span></span> <span data-ttu-id="a9d53-194">Bunu yapmak için, **Paket Yöneticisi konsolunda**aşağıdaki betiği çalıştırabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="a9d53-194">To do this, you can execute the following script in the **Package Manager Console**:</span></span>
   > 
   > [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample2.ps1)]
   > 
   > <span data-ttu-id="a9d53-195">SignalR 'nin gelecekteki bir sürümünde OWIN bağımlılıkları otomatik olarak güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-195">In a future release of SignalR, OWIN dependencies will be automatically updated.</span></span>
3. <span data-ttu-id="a9d53-196">**Çözüm Gezgini**, **betikler** klasörünü genişletin ve SignalR *js* dosyalarının çözüme eklendiğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="a9d53-196">In **Solution Explorer**, expand the **Scripts** folder and notice that the SignalR *js* files were added to the solution.</span></span>

    <span data-ttu-id="a9d53-197">![SignalR JavaScript başvuruları](real-time-web-applications-with-signalr/_static/image10.png "SignalR JavaScript başvuruları")</span><span class="sxs-lookup"><span data-stu-id="a9d53-197">![SignalR JavaScript references](real-time-web-applications-with-signalr/_static/image10.png "SignalR JavaScript references")</span></span>

    <span data-ttu-id="a9d53-198">*SignalR JavaScript başvuruları*</span><span class="sxs-lookup"><span data-stu-id="a9d53-198">*SignalR JavaScript references*</span></span>
4. <span data-ttu-id="a9d53-199">**Çözüm Gezgini**, **geektest** projesine sağ tıklayın, | **Yeni klasör** **Ekle** ' yi seçin ve BT **hub**'ını adlandırın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-199">In **Solution Explorer**, right-click the **GeekQuiz** project, select **Add** | **New Folder**, and name it **Hubs**.</span></span>
5. <span data-ttu-id="a9d53-200">**Hub** klasörüne sağ tıklayın ve Ekle | ' yi seçin.  **Yeni öğe**.</span><span class="sxs-lookup"><span data-stu-id="a9d53-200">Right-click the **Hubs** folder and select **Add | New Item**.</span></span>

    <span data-ttu-id="a9d53-201">![Yeni öğe Ekle](real-time-web-applications-with-signalr/_static/image11.png "Yeni öğe Ekle")</span><span class="sxs-lookup"><span data-stu-id="a9d53-201">![Add new item](real-time-web-applications-with-signalr/_static/image11.png "Add new item")</span></span>

    <span data-ttu-id="a9d53-202">*Yeni öğe Ekle*</span><span class="sxs-lookup"><span data-stu-id="a9d53-202">*Add new item*</span></span>
6. <span data-ttu-id="a9d53-203">**Yeni öğe Ekle** Iletişim kutusunda  **C# görseli seçin | Web | SignalR** düğümü sol bölmede, orta bölmeden **SignalR hub sınıfı (v2)** öğesini seçin, dosyayı **StatisticsHub.cs** olarak adlandırın ve **Ekle**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-203">In the **Add New Item** dialog box, select the **Visual C# | Web | SignalR** node in the left pane, select **SignalR Hub Class (v2)** from the center pane, name the file **StatisticsHub.cs** and click **Add**.</span></span>

    <span data-ttu-id="a9d53-204">![Yeni öğe Ekle iletişim kutusu](real-time-web-applications-with-signalr/_static/image12.png "Yeni öğe Ekle iletişim kutusu")</span><span class="sxs-lookup"><span data-stu-id="a9d53-204">![Add new item dialog box](real-time-web-applications-with-signalr/_static/image12.png "Add new item dialog box")</span></span>

    <span data-ttu-id="a9d53-205">*Yeni öğe Ekle iletişim kutusu*</span><span class="sxs-lookup"><span data-stu-id="a9d53-205">*Add new item dialog box*</span></span>
7. <span data-ttu-id="a9d53-206">**Statisticshub** sınıfındaki kodu aşağıdaki kodla değiştirin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-206">Replace the code in the **StatisticsHub** class with the following code.</span></span>

    <span data-ttu-id="a9d53-207">(Kod parçacığı- *RealTimeSignalR-Ex1-StatisticsHubClass*)</span><span class="sxs-lookup"><span data-stu-id="a9d53-207">(Code Snippet - *RealTimeSignalR - Ex1 - StatisticsHubClass*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample3.cs)]
8. <span data-ttu-id="a9d53-208">**Startup.cs** ' i açın ve **yapılandırma** yönteminin sonuna aşağıdaki satırı ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-208">Open **Startup.cs** and add the following line at the end of the **Configuration** method.</span></span>

    <span data-ttu-id="a9d53-209">(Kod parçacığı- *RealTimeSignalR-Ex1-MapSignalR*)</span><span class="sxs-lookup"><span data-stu-id="a9d53-209">(Code Snippet - *RealTimeSignalR - Ex1 - MapSignalR*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample4.cs)]
9. <span data-ttu-id="a9d53-210">**Hizmetler** klasörünün içindeki **StatisticsService.cs** sayfasını açın ve aşağıdaki using yönergelerini ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-210">Open the **StatisticsService.cs** page inside the **Services** folder and add the following using directives.</span></span>

    <span data-ttu-id="a9d53-211">(Kod parçacığı- *RealTimeSignalR-Ex1-Usingyönergeleri*)</span><span class="sxs-lookup"><span data-stu-id="a9d53-211">(Code Snippet - *RealTimeSignalR - Ex1 - UsingDirectives*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample5.cs)]
10. <span data-ttu-id="a9d53-212">Güncelleştirmelerin bağlı istemcilerini bilgilendirmek için, önce geçerli bağlantı için bir **bağlam** nesnesi alırsınız.</span><span class="sxs-lookup"><span data-stu-id="a9d53-212">To notify connected clients of updates, you first retrieve a **Context** object for the current connection.</span></span> <span data-ttu-id="a9d53-213">**Hub** nesnesi, tek bir istemciye ileti gönderme veya tüm bağlı istemcilere yayımlama yöntemlerini içerir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-213">The **Hub** object contains methods to send messages to a single client or broadcast to all connected clients.</span></span> <span data-ttu-id="a9d53-214">İstatistik verilerini yayınlamak için aşağıdaki yöntemi **Statisticsservice** sınıfına ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-214">Add the following method to the **StatisticsService** class to broadcast the statistics data.</span></span>

    <span data-ttu-id="a9d53-215">(Kod parçacığı- *RealTimeSignalR-Ex1-NotifyUpdatesMethod*)</span><span class="sxs-lookup"><span data-stu-id="a9d53-215">(Code Snippet - *RealTimeSignalR - Ex1 - NotifyUpdatesMethod*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample6.cs)]

    > [!NOTE]
    > <span data-ttu-id="a9d53-216">Yukarıdaki kodda, istemcideki bir işlevi çağırmak için rastgele bir yöntem adı kullanıyorsunuz (yani: *UpdateStatistics*).</span><span class="sxs-lookup"><span data-stu-id="a9d53-216">In the code above, you are using an arbitrary method name to call a function on the client (i.e.: *updateStatistics*).</span></span> <span data-ttu-id="a9d53-217">Belirttiğiniz Yöntem adı dinamik bir nesne olarak yorumlanır, yani bunun için IntelliSense veya derleme zamanı doğrulaması yoktur.</span><span class="sxs-lookup"><span data-stu-id="a9d53-217">The method name that you specify is interpreted as a dynamic object, which means there is no IntelliSense or compile-time validation for it.</span></span> <span data-ttu-id="a9d53-218">İfade çalışma zamanında değerlendirilir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-218">The expression is evaluated at run time.</span></span> <span data-ttu-id="a9d53-219">Yöntem çağrısı yürütüldüğünde, SignalR, yöntem adını ve parametre değerlerini istemciye gönderir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-219">When the method call executes, SignalR sends the method name and the parameter values to the client.</span></span> <span data-ttu-id="a9d53-220">İstemcinin adıyla eşleşen bir yöntemi varsa, bu yöntem çağrılır ve parametre değerleri kendisine geçirilir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-220">If the client has a method that matches the name, that method is called and the parameter values are passed to it.</span></span> <span data-ttu-id="a9d53-221">İstemcide eşleşen bir yöntem bulunamazsa, hiçbir hata oluşturulmaz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-221">If no matching method is found on the client, no error is raised.</span></span> <span data-ttu-id="a9d53-222">Daha fazla bilgi için [ASP.NET SignalR hub 'LARı API Kılavuzu](../guide-to-the-api/hubs-api-guide-server.md)' na bakın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-222">For more information, refer to [ASP.NET SignalR Hubs API Guide](../guide-to-the-api/hubs-api-guide-server.md).</span></span>
11. <span data-ttu-id="a9d53-223">**Denetleyiciler** klasörünün içindeki **TriviaController.cs** sayfasını açın ve aşağıdaki using yönergelerini ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-223">Open the **TriviaController.cs** page inside the **Controllers** folder and add the following using directives.</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample7.cs)]
12. <span data-ttu-id="a9d53-224">Aşağıdaki Vurgulanan kodu **Post** ACTION yöntemine ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-224">Add the following highlighted code to the **Post** action method.</span></span>

    <span data-ttu-id="a9d53-225">(Kod parçacığı- *RealTimeSignalR-Ex1-NotifyUpdatesCall*)</span><span class="sxs-lookup"><span data-stu-id="a9d53-225">(Code Snippet - *RealTimeSignalR - Ex1 - NotifyUpdatesCall*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample8.cs)]
13. <span data-ttu-id="a9d53-226">Görünümler içindeki **Statistics. cshtml** sayfasını açın **| Giriş** klasörü.</span><span class="sxs-lookup"><span data-stu-id="a9d53-226">Open the **Statistics.cshtml** page inside the **Views | Home** folder.</span></span> <span data-ttu-id="a9d53-227">**Betikler** bölümünü bulun ve bölümün başında aşağıdaki komut dosyası başvurularını ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-227">Locate the **Scripts** section and add the following script references at the beginning of the section.</span></span>

    <span data-ttu-id="a9d53-228">(Kod parçacığı- *RealTimeSignalR-Ex1-SignalRScriptReferences*)</span><span class="sxs-lookup"><span data-stu-id="a9d53-228">(Code Snippet - *RealTimeSignalR - Ex1 - SignalRScriptReferences*)</span></span>

    [!code-cshtml[Main](real-time-web-applications-with-signalr/samples/sample9.cshtml)]

    > [!NOTE]
    > <span data-ttu-id="a9d53-229">Visual Studio projenize SignalR ve diğer betik kitaplıklarını eklediğinizde Paket Yöneticisi, bu konuda gösterilen sürümden daha yeni bir SignalR betik dosyası sürümü kurabilir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-229">When you add SignalR and other script libraries to your Visual Studio project, the Package Manager might install a version of the SignalR script file that is more recent than the version shown in this topic.</span></span> <span data-ttu-id="a9d53-230">Kodunuzda betik başvurusunun projenizde yüklü olan betik kitaplığının sürümüyle eşleştiğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="a9d53-230">Make sure that the script reference in your code matches the version of the script library installed in your project.</span></span>
14. <span data-ttu-id="a9d53-231">İstemciyi SignalR hub 'ına bağlamak ve hub 'dan yeni bir ileti alındığında istatistik verilerini güncelleştirmek için aşağıdaki vurgulanmış kodu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-231">Add the following highlighted code to connect the client to the SignalR hub and update the statistics data when a new message is received from the hub.</span></span>

    <span data-ttu-id="a9d53-232">(Kod parçacığı- *RealTimeSignalR-Ex1-SignalRClientCode*)</span><span class="sxs-lookup"><span data-stu-id="a9d53-232">(Code Snippet - *RealTimeSignalR - Ex1 - SignalRClientCode*)</span></span>

    [!code-cshtml[Main](real-time-web-applications-with-signalr/samples/sample10.cshtml)]

    <span data-ttu-id="a9d53-233">Bu kodda, bir hub proxy oluşturuyorsunuz ve sunucu tarafından gönderilen iletileri dinlemek için bir olay işleyicisi kaydediliyor.</span><span class="sxs-lookup"><span data-stu-id="a9d53-233">In this code, you are creating a Hub Proxy and registering an event handler to listen for messages sent by the server.</span></span> <span data-ttu-id="a9d53-234">Bu durumda, *UpdateStatistics* yöntemiyle gönderilen iletileri dinler.</span><span class="sxs-lookup"><span data-stu-id="a9d53-234">In this case, you listen for messages sent through the *updateStatistics* method.</span></span>

<a id="Ex1Task3"></a>
#### <a name="task-3--running-the-solution"></a><span data-ttu-id="a9d53-235">Görev 3 – çözümü çalıştırma</span><span class="sxs-lookup"><span data-stu-id="a9d53-235">Task 3 – Running the Solution</span></span>

<span data-ttu-id="a9d53-236">Bu görevde, yeni bir soru Yanıtlandıktan sonra istatistik görünümünün SignalR kullanılarak otomatik olarak güncelleştirildiğini doğrulamak için çözümü çalıştıracaksınız.</span><span class="sxs-lookup"><span data-stu-id="a9d53-236">In this task, you will run the solution to verify that the statistics view is updated automatically using SignalR after answering a new question.</span></span>

1. <span data-ttu-id="a9d53-237">Çözümü çalıştırmak için **F5** tuşuna basın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-237">Press **F5** to run the solution.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a9d53-238">Zaten uygulamada oturum açmamışsa, görev 1 ' de oluşturduğunuz kullanıcıyla oturum açın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-238">If not already logged in to the application, log in with the user you created in Task 1.</span></span>
2. <span data-ttu-id="a9d53-239">**İstatistikler** sayfasını yeni bir pencerede açın ve **giriş** sayfası ve **İstatistikler** sayfasını görev 1 ' de yaptığınız gibi yan yana yerleştirin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-239">Open the **Statistics** page in a new window and put the **Home** page and **Statistics** page side-by-side as you did in Task 1.</span></span>
3. <span data-ttu-id="a9d53-240">**Giriş** sayfasında, seçeneklerden birine tıklayarak soruyu yanıtlayın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-240">In the **Home** page, answer the question by clicking one of the options.</span></span>

    <span data-ttu-id="a9d53-241">![Başka bir soruyu yanıtlama](real-time-web-applications-with-signalr/_static/image13.png "Başka bir soruyu yanıtlama")</span><span class="sxs-lookup"><span data-stu-id="a9d53-241">![Answering another question](real-time-web-applications-with-signalr/_static/image13.png "Answering another question")</span></span>

    <span data-ttu-id="a9d53-242">*Başka bir soruyu yanıtlama*</span><span class="sxs-lookup"><span data-stu-id="a9d53-242">*Answering another question*</span></span>
4. <span data-ttu-id="a9d53-243">Düğmelerden birine tıkladıktan sonra yanıt görüntülenmelidir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-243">After clicking one of the buttons, the answer should appear.</span></span> <span data-ttu-id="a9d53-244">Sayfadaki Istatistik bilgilerinin, tüm sayfayı yenilemeye gerek kalmadan, güncelleştirilmiş bilgilerle soru Yanıtlandıktan sonra otomatik olarak güncelleştirildiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-244">Notice that the Statistics information on the page is updated automatically after answering the question with the updated information without the need to refresh the entire page.</span></span>

    <span data-ttu-id="a9d53-245">![İstatistikler sayfası, yanıt sonrasında yenilendi](real-time-web-applications-with-signalr/_static/image14.png "İstatistikler sayfası, yanıt sonrasında yenilendi")</span><span class="sxs-lookup"><span data-stu-id="a9d53-245">![Statistics page refreshed after answer](real-time-web-applications-with-signalr/_static/image14.png "Statistics page refreshed after answer")</span></span>

    <span data-ttu-id="a9d53-246">*İstatistikler sayfası, yanıt sonrasında yenilendi*</span><span class="sxs-lookup"><span data-stu-id="a9d53-246">*Statistics page refreshed after answer*</span></span>

<a id="Exercise2"></a>
### <a name="exercise-2-scaling-out-using-sql-server"></a><span data-ttu-id="a9d53-247">Alıştırma 2: SQL Server kullanarak genişletme</span><span class="sxs-lookup"><span data-stu-id="a9d53-247">Exercise 2: Scaling Out Using SQL Server</span></span>

<span data-ttu-id="a9d53-248">Bir Web uygulamasını ölçeklendirirken, genellikle *ölçeği artırma* ve *genişletme* seçenekleri arasından seçim yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-248">When scaling a web application, you can generally choose between *scaling up* and *scaling out* options.</span></span> <span data-ttu-id="a9d53-249">*Ölçeği artırma* , daha fazla kaynak (CPU, RAM, vb.) ile daha büyük bir sunucu kullanarak yükü işlemek için daha fazla sunucu *ekleme anlamına gelir* .</span><span class="sxs-lookup"><span data-stu-id="a9d53-249">*Scale up* means using a larger server, with more resources (CPU, RAM, etc.) while *scale out* means adding more servers to handle the load.</span></span> <span data-ttu-id="a9d53-250">İkincisi ile ilgili sorun, istemcilerin farklı sunuculara yönlendirilmesidir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-250">The problem with the latter is that the clients can get routed to different servers.</span></span> <span data-ttu-id="a9d53-251">Bir sunucuya bağlı olan istemci, başka bir sunucudan gönderilen iletileri almaz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-251">A client that is connected to one server will not receive messages sent from another server.</span></span>

<span data-ttu-id="a9d53-252">Bu sorunları, iletileri sunucular arasında iletmek için *backdüzlemi*adlı bir bileşen kullanarak çözebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-252">You can solve these issues by using a component called *backplane*, to forward messages between servers.</span></span> <span data-ttu-id="a9d53-253">Bir sırt etkin olduğunda, her bir uygulama örneği geri düzleme iletiler gönderir ve geri düzlemi bunları diğer uygulama örneklerine iletir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-253">With a backplane enabled, each application instance sends messages to the backplane, and the backplane forwards them to the other application instances.</span></span>

<span data-ttu-id="a9d53-254">SignalR için şu anda üç tür arka düzlem vardır:</span><span class="sxs-lookup"><span data-stu-id="a9d53-254">There are currently three types of backplanes for SignalR:</span></span>

- <span data-ttu-id="a9d53-255">**Windows Azure Service Bus**.</span><span class="sxs-lookup"><span data-stu-id="a9d53-255">**Windows Azure Service Bus**.</span></span> <span data-ttu-id="a9d53-256">Service Bus, bileşenlerin gevşek olarak bağlanmış iletiler göndermesini sağlayan bir mesajlaşma altyapısıdır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-256">Service Bus is a messaging infrastructure that allows components to send loosely coupled messages.</span></span>
- <span data-ttu-id="a9d53-257">**SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="a9d53-257">**SQL Server**.</span></span> <span data-ttu-id="a9d53-258">SQL Server arka düzlemi, iletileri SQL tablolarına yazar.</span><span class="sxs-lookup"><span data-stu-id="a9d53-258">The SQL Server backplane writes messages to SQL tables.</span></span> <span data-ttu-id="a9d53-259">Geri düzlemi verimli mesajlaşma için Hizmet Aracısı kullanır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-259">The backplane uses Service Broker for efficient messaging.</span></span> <span data-ttu-id="a9d53-260">Ancak, Hizmet Aracısı etkinleştirilmemişse da bu da işe yarar.</span><span class="sxs-lookup"><span data-stu-id="a9d53-260">However, it also works if Service Broker is not enabled.</span></span>
- <span data-ttu-id="a9d53-261">**Redsıs**.</span><span class="sxs-lookup"><span data-stu-id="a9d53-261">**Redis**.</span></span> <span data-ttu-id="a9d53-262">Redsıs, bellek içi anahtar-değer deposudur.</span><span class="sxs-lookup"><span data-stu-id="a9d53-262">Redis is an in-memory key-value store.</span></span> <span data-ttu-id="a9d53-263">Redsıs, ileti göndermek için bir yayımla/abone ol ("pub/Sub") modelini destekler.</span><span class="sxs-lookup"><span data-stu-id="a9d53-263">Redis supports a publish/subscribe ("pub/sub") pattern for sending messages.</span></span>

<span data-ttu-id="a9d53-264">Her ileti bir ileti veri yolu aracılığıyla gönderilir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-264">Every message is sent through a message bus.</span></span> <span data-ttu-id="a9d53-265">İleti veri yolu, yayımlama/abone olma soyutlaması sağlayan [IMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) arabirimini uygular.</span><span class="sxs-lookup"><span data-stu-id="a9d53-265">A message bus implements the [IMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) interface, which provides a publish/subscribe abstraction.</span></span> <span data-ttu-id="a9d53-266">Arka düzlemler, varsayılan **IMessageBus 'ı** bu geri düzlemi için tasarlanan bir veri yolu ile değiştirerek çalışır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-266">The backplanes work by replacing the default **IMessageBus** with a bus designed for that backplane.</span></span>

<span data-ttu-id="a9d53-267">Her sunucu örneği, veri yolu aracılığıyla geri düzleme bağlanır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-267">Each server instance connects to the backplane through the bus.</span></span> <span data-ttu-id="a9d53-268">Bir ileti gönderildiğinde, geri düzlemi ' ne gider ve geri düzlemi onu her sunucuya gönderir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-268">When a message is sent, it goes to the backplane, and the backplane sends it to every server.</span></span> <span data-ttu-id="a9d53-269">Bir sunucu arkadüzleden bir ileti aldığında, iletiyi yerel önbelleğinde depolar.</span><span class="sxs-lookup"><span data-stu-id="a9d53-269">When a server receives a message from the backplane, it stores the message in its local cache.</span></span> <span data-ttu-id="a9d53-270">Sunucu daha sonra istemcilere yerel önbelleğinden iletiler gönderir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-270">The server then delivers messages to clients from its local cache.</span></span>

<span data-ttu-id="a9d53-271">SignalR geri düzlemi 'nin nasıl çalıştığı hakkında daha fazla bilgi için bu [makaleyi](../performance/scaleout-in-signalr.md)okuyun.</span><span class="sxs-lookup"><span data-stu-id="a9d53-271">For more information about how the SignalR backplane works, read this [article](../performance/scaleout-in-signalr.md).</span></span>

> [!NOTE]
> <span data-ttu-id="a9d53-272">Bir geri düzlemin performans sorunlarına neden olduğu bazı senaryolar vardır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-272">There are some scenarios where a backplane can become a bottleneck.</span></span> <span data-ttu-id="a9d53-273">Tipik bir SignalR senaryosu aşağıda verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="a9d53-273">Here are some typical SignalR scenarios:</span></span>
> 
> - <span data-ttu-id="a9d53-274">[Sunucu yayını](tutorial-server-broadcast-with-signalr.md) (örneğin, hisse senedi bandı): sunucu iletilerin gönderilme hızını denetlemediğinden, bu senaryo Için geri düzler iyi çalışır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-274">[Server broadcast](tutorial-server-broadcast-with-signalr.md) (e.g., stock ticker): Backplanes work well for this scenario, because the server controls the rate at which messages are sent.</span></span>
> - <span data-ttu-id="a9d53-275">[İstemciden istemciye](tutorial-getting-started-with-signalr.md) (ör. sohbet): Bu senaryoda, iletilerin sayısı istemci sayısıyla ölçeklenirken, arka uç bir performans sorunu olabilir; diğer bir deyişle, daha fazla istemci katılırken ileti hızının orantılı olarak büyümesi.</span><span class="sxs-lookup"><span data-stu-id="a9d53-275">[Client-to-client](tutorial-getting-started-with-signalr.md) (e.g., chat): In this scenario, the backplane might be a bottleneck if the number of messages scales with the number of clients; that is, if the rate of messages grows proportionally as more clients join.</span></span>
> - <span data-ttu-id="a9d53-276">[Yüksek frekanslı gerçek zamanlı](tutorial-high-frequency-realtime-with-signalr.md) (örn. gerçek zamanlı Oyunlar): Bu senaryo için bir geri düzlem önerilmez.</span><span class="sxs-lookup"><span data-stu-id="a9d53-276">[High-frequency realtime](tutorial-high-frequency-realtime-with-signalr.md) (e.g., real-time games): A backplane is not recommended for this scenario.</span></span>

<span data-ttu-id="a9d53-277">Bu alıştırmada, iletileri **Geek test** uygulaması üzerinden dağıtmak için **SQL Server** kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="a9d53-277">In this exercise, you will use **SQL Server** to distribute messages across the **Geek Quiz** application.</span></span> <span data-ttu-id="a9d53-278">Yapılandırmayı ayarlamayı öğrenmek için bu görevleri tek bir test makinesinde çalıştıracaksınız, ancak tüm etkiyi almak için, SignalR uygulamasını iki veya daha fazla sunucuya dağıtmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-278">You will run these tasks on a single test machine to learn how to set up the configuration, but in order to get the full effect, you will need to deploy the SignalR application to two or more servers.</span></span> <span data-ttu-id="a9d53-279">Ayrıca, sunuculardan birine veya ayrı bir adanmış sunucuya SQL Server de yüklemelisiniz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-279">You must also install SQL Server on one of the servers, or on a separate dedicated server.</span></span>

![SQL Server diyagramı kullanarak ölçeği genişletme](real-time-web-applications-with-signalr/_static/image15.png)

<a id="Ex2Task1"></a>
#### <a name="task-1---understanding-the-scenario"></a><span data-ttu-id="a9d53-281">Görev 1-senaryoyu anlama</span><span class="sxs-lookup"><span data-stu-id="a9d53-281">Task 1 - Understanding the Scenario</span></span>

<span data-ttu-id="a9d53-282">Bu görevde, yerel makinenizde birden çok IIS örneğinin benzetimini yaparken, **Geek sınavın** 2 örneğini çalıştıracaksınız.</span><span class="sxs-lookup"><span data-stu-id="a9d53-282">In this task, you will run 2 instances of **Geek Quiz** simulating multiple IIS instances on your local machine.</span></span> <span data-ttu-id="a9d53-283">Bu senaryoda, bir uygulamadaki sorular aracılığıyla yanıt verme sırasında, ikinci örneğin istatistik sayfasında güncelleştirmeye bildirilmez.</span><span class="sxs-lookup"><span data-stu-id="a9d53-283">In this scenario, when answering trivia questions on one application, update won't be notified on the statistics page of the second instance.</span></span> <span data-ttu-id="a9d53-284">Bu benzetim, uygulamanızın birden çok örneğe dağıtıldığı ve onlarla iletişim kurmak için bir yük dengeleyici kullanıldığı bir ortama benzer.</span><span class="sxs-lookup"><span data-stu-id="a9d53-284">This simulation resembles an environment where your application is deployed on multiple instances and using a load balancer to communicate with them.</span></span>

1. <span data-ttu-id="a9d53-285">**Kaynak/EX2-ScalingOutWithSQLServer/Begin** klasöründe bulunan **BEGIN. sln** çözümünü açın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-285">Open the **Begin.sln** solution located in the **Source/Ex2-ScalingOutWithSQLServer/Begin** folder.</span></span> <span data-ttu-id="a9d53-286">Yüklendikten sonra, çözümün aynı yapılar, ancak farklı adlara sahip iki proje olduğunu **Sunucu Gezgini** görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-286">Once loaded, you will notice on the **Server Explorer** that the solution has two projects with identical structures but different names.</span></span> <span data-ttu-id="a9d53-287">Bu, yerel makinenizde aynı uygulamanın iki örneğini çalıştırmanın benzetimini yapar.</span><span class="sxs-lookup"><span data-stu-id="a9d53-287">This will simulate running two instances of the same application on your local machine.</span></span>

    <span data-ttu-id="a9d53-288">![Çözüme başla Geek sınavın 2 örnek benzetimi](real-time-web-applications-with-signalr/_static/image16.png "Çözüme başla Geek sınavın 2 örnek benzetimi")</span><span class="sxs-lookup"><span data-stu-id="a9d53-288">![Begin Solution Simulating 2 Instances of Geek Quiz](real-time-web-applications-with-signalr/_static/image16.png "Begin Solution Simulating 2 Instances of Geek Quiz")</span></span>

    <span data-ttu-id="a9d53-289">*Çözüme başla Geek sınavın 2 örnek benzetimi*</span><span class="sxs-lookup"><span data-stu-id="a9d53-289">*Begin Solution Simulating 2 Instances of Geek Quiz*</span></span>
2. <span data-ttu-id="a9d53-290">Çözüm düğümüne sağ tıklayıp **Özellikler**' i seçerek çözümün Özellikler sayfasını açın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-290">Open the properties page of the solution by right-clicking the solution node and selecting **Properties**.</span></span> <span data-ttu-id="a9d53-291">**Başlangıç projesi**altında **birden çok başlangıç** projesi seçin ve her Iki proje Için de **eylem** değerini *başlatılacak*şekilde değiştirin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-291">Under **Startup Project**, select **Multiple startup projects** and change the **Action** value for both projects to *Start*.</span></span>

    <span data-ttu-id="a9d53-292">![Birden çok proje başlatılıyor](real-time-web-applications-with-signalr/_static/image17.png "Birden çok proje başlatılıyor")</span><span class="sxs-lookup"><span data-stu-id="a9d53-292">![Starting Multiple Projects](real-time-web-applications-with-signalr/_static/image17.png "Starting Multiple Projects")</span></span>

    <span data-ttu-id="a9d53-293">*Birden çok proje başlatılıyor*</span><span class="sxs-lookup"><span data-stu-id="a9d53-293">*Starting Multiple Projects*</span></span>
3. <span data-ttu-id="a9d53-294">Çözümü çalıştırmak için **F5** tuşuna basın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-294">Press **F5** to run the solution.</span></span> <span data-ttu-id="a9d53-295">Uygulama, farklı bağlantı noktalarında aynı uygulamanın birden fazla örneğini taklit eden iki **Geek test** örneğini başlatır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-295">The application will launch two instances of **Geek Quiz** in different ports, simulating multiple instances of the same application.</span></span> <span data-ttu-id="a9d53-296">Sol taraftaki tarayıcıların birini ekranın sağ tarafında sabitleyin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-296">Pin one of the browsers on left and the other on the right of your screen.</span></span> <span data-ttu-id="a9d53-297">Kimlik bilgilerinizle oturum açın veya yeni bir Kullanıcı kaydedin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-297">Log in with your credentials or register a new user.</span></span> <span data-ttu-id="a9d53-298">Oturum açtıktan sonra, Üçlü sayfayı sola tutun ve sağdaki tarayıcıdaki **İstatistikler** sayfasına gidin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-298">Once logged in, keep the Trivia page on the left and go to the **Statistics** page in the browser on the right.</span></span>

    ![Yan yana Geek test](real-time-web-applications-with-signalr/_static/image18.png)

    <span data-ttu-id="a9d53-300">*Yan yana Geek test*</span><span class="sxs-lookup"><span data-stu-id="a9d53-300">*Geek Quiz Side by Side*</span></span>

    ![Farklı bağlantı noktalarında Geek test](real-time-web-applications-with-signalr/_static/image19.png)

    <span data-ttu-id="a9d53-302">*Farklı bağlantı noktalarında Geek test*</span><span class="sxs-lookup"><span data-stu-id="a9d53-302">*Geek Quiz in Different Ports*</span></span>
4. <span data-ttu-id="a9d53-303">Sol tarayıcıda sorularınızı yanıtlamayı başlatın ve doğru tarayıcıda **istatistik** sayfasının güncelleştirilmediğini fark edeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-303">Start answering questions in the left browser and you will notice that the **Statistics** page in the right browser is not being updated.</span></span> <span data-ttu-id="a9d53-304">Bunun nedeni, **SignalR** 'nin istemcilerine iletileri dağıtmak için yerel bir önbellek kullanması ve bu senaryonun birden çok örneği benzetiğinden, önbelleğin aralarında paylaşılmaması nedeniyle oluşur.</span><span class="sxs-lookup"><span data-stu-id="a9d53-304">This is because **SignalR** uses a local cache to distribute messages across their clients and this scenario is simulating multiple instances, therefore the cache is not shared between them.</span></span> <span data-ttu-id="a9d53-305">Aynı adımları test ederek ve tek bir uygulama kullanarak **SignalR** 'nin çalıştığını doğrulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-305">You can verify that **SignalR** is working by testing the same steps but using a single app.</span></span> <span data-ttu-id="a9d53-306">Aşağıdaki görevlerde, iletileri örnekler arasında çoğaltmak için bir arka düzlem yapılandıracaksınız.</span><span class="sxs-lookup"><span data-stu-id="a9d53-306">In the following tasks you will configure a backplane to replicate the messages across instances.</span></span>
5. <span data-ttu-id="a9d53-307">Visual Studio 'ya geri dönün ve hata ayıklamayı durdurun.</span><span class="sxs-lookup"><span data-stu-id="a9d53-307">Go back to Visual Studio and stop debugging.</span></span>

<a id="Ex2Task2"></a>
#### <a name="task-2--creating-the-sql-server-backplane"></a><span data-ttu-id="a9d53-308">Görev 2 – SQL Server arka düzlemi oluşturma</span><span class="sxs-lookup"><span data-stu-id="a9d53-308">Task 2 – Creating the SQL Server Backplane</span></span>

<span data-ttu-id="a9d53-309">Bu görevde, **Geek test** uygulaması için bir arka düzlem olarak kullanılacak bir veritabanı oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="a9d53-309">In this task, you will create a database that will serve as a backplane for the **Geek Quiz** application.</span></span> <span data-ttu-id="a9d53-310">**SQL Server Nesne Gezgini** kullanarak sunucunuza gözatıp veritabanını başlatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-310">You will use **SQL Server Object Explorer** to browse your server and initialize the database.</span></span> <span data-ttu-id="a9d53-311">Ayrıca, **Hizmet Aracısı**etkinleştirecektir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-311">Additionally, you will enable the **Service Broker**.</span></span>

1. <span data-ttu-id="a9d53-312">**Visual Studio**'Da menü **görünümü** ' nü açın ve **SQL Server Nesne Gezgini**' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-312">In **Visual Studio**, open menu **View** and select **SQL Server Object Explorer**.</span></span>
2. <span data-ttu-id="a9d53-313">**SQL Server** düğümüne sağ tıklayıp **SQL Server Ekle...** seçeneğini belirleyerek LocalDB örneğinizi bağlayın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-313">Connect to your LocalDB instance by right-clicking the **SQL Server** node and selecting **Add SQL Server...** option.</span></span>

    <span data-ttu-id="a9d53-314">![SQL Server örneği ekleme](real-time-web-applications-with-signalr/_static/image20.png "SQL Server örneği ekleme")</span><span class="sxs-lookup"><span data-stu-id="a9d53-314">![Adding a SQL Server Instance](real-time-web-applications-with-signalr/_static/image20.png "Adding a SQL Server Instance")</span></span>

    <span data-ttu-id="a9d53-315">*SQL Server Nesne Gezgini SQL Server örnek ekleme*</span><span class="sxs-lookup"><span data-stu-id="a9d53-315">*Adding a SQL Server instance to SQL Server Object Explorer*</span></span>
3. <span data-ttu-id="a9d53-316">**Sunucu adını** *(LocalDB) \v11.0* olarak ayarlayın ve **Windows kimlik doğrulamasını** kimlik doğrulama modu olarak bırakın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-316">Set the **server name** to *(localdb)\v11.0* and leave **Windows Authentication** as your authentication mode.</span></span> <span data-ttu-id="a9d53-317">Devam etmek için **Bağlan**’a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-317">Click **Connect** to continue.</span></span>

    <span data-ttu-id="a9d53-318">![LocalDB 'ye bağlanma](real-time-web-applications-with-signalr/_static/image21.png "LocalDB 'ye bağlanma")</span><span class="sxs-lookup"><span data-stu-id="a9d53-318">![Connecting to LocalDB](real-time-web-applications-with-signalr/_static/image21.png "Connecting to LocalDB")</span></span>

    <span data-ttu-id="a9d53-319">*LocalDB 'ye bağlanma*</span><span class="sxs-lookup"><span data-stu-id="a9d53-319">*Connecting to LocalDB*</span></span>
4. <span data-ttu-id="a9d53-320">LocalDB örneğinize bağlı olduğunuza göre, SignalR için SQL Server geri düzlemi temsil edecek bir veritabanı oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-320">Now that you are connected to your LocalDB instance, you will need to create a database that will represent the SQL Server backplane for SignalR.</span></span> <span data-ttu-id="a9d53-321">Bunu yapmak için **veritabanları** düğümüne sağ tıklayın ve **Yeni veritabanı Ekle**' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-321">To do this, right-click the **Databases** node and select **Add New Database**.</span></span>

    <span data-ttu-id="a9d53-322">![Yeni veritabanı ekleme](real-time-web-applications-with-signalr/_static/image22.png "Yeni veritabanı ekleme")</span><span class="sxs-lookup"><span data-stu-id="a9d53-322">![Adding a new database](real-time-web-applications-with-signalr/_static/image22.png "Adding a new database")</span></span>

    <span data-ttu-id="a9d53-323">*Yeni veritabanı ekleme*</span><span class="sxs-lookup"><span data-stu-id="a9d53-323">*Adding a new database*</span></span>
5. <span data-ttu-id="a9d53-324">Veritabanı adını *SignalR* olarak ayarlayın ve **Tamam** ' a tıklayarak oluşturun.</span><span class="sxs-lookup"><span data-stu-id="a9d53-324">Set the database name to *SignalR* and click **OK** to create it.</span></span>

    <span data-ttu-id="a9d53-325">![SignalR veritabanı oluşturma](real-time-web-applications-with-signalr/_static/image23.png "SignalR veritabanı oluşturma")</span><span class="sxs-lookup"><span data-stu-id="a9d53-325">![Creating the SignalR database](real-time-web-applications-with-signalr/_static/image23.png "Creating the SignalR database")</span></span>

    <span data-ttu-id="a9d53-326">*SignalR veritabanı oluşturma*</span><span class="sxs-lookup"><span data-stu-id="a9d53-326">*Creating the SignalR database*</span></span>

    > [!NOTE]
    > <span data-ttu-id="a9d53-327">Veritabanı için herhangi bir ad seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-327">You can choose any name for the database.</span></span>
6. <span data-ttu-id="a9d53-328">Güncelleştirmeleri geri düzlemden daha verimli bir şekilde almak için, veritabanı için Hizmet Aracısı etkinleştirmeniz önerilir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-328">To receive updates more efficiently from the backplane, it is recommended to enable Service Broker for the database.</span></span> <span data-ttu-id="a9d53-329">Hizmet Aracısı, SQL Server mesajlaşma ve kuyruğa alma için yerel destek sağlar.</span><span class="sxs-lookup"><span data-stu-id="a9d53-329">Service Broker provides native support for messaging and queuing in SQL Server.</span></span> <span data-ttu-id="a9d53-330">Arka düzlem Hizmet Aracısı olmadan da kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-330">The backplane also works without Service Broker.</span></span> <span data-ttu-id="a9d53-331">Veritabanına sağ tıklayıp **Yeni sorgu**' yı seçerek yeni bir sorgu açın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-331">Open a new query by right-clicking the database and select **New Query**.</span></span>

    <span data-ttu-id="a9d53-332">![Yeni bir sorgu açılıyor](real-time-web-applications-with-signalr/_static/image24.png "Yeni bir sorgu açılıyor")</span><span class="sxs-lookup"><span data-stu-id="a9d53-332">![Opening a New Query](real-time-web-applications-with-signalr/_static/image24.png "Opening a New Query")</span></span>

    <span data-ttu-id="a9d53-333">*Yeni bir sorgu açılıyor*</span><span class="sxs-lookup"><span data-stu-id="a9d53-333">*Opening a New Query*</span></span>
7. <span data-ttu-id="a9d53-334">Hizmet Aracısı etkinleştirilip etkinleştirilmediğini denetlemek için **sys. databases** katalog görünümündeki **\_Broker\_etkin** sütununu sorgulayın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-334">To check whether Service Broker is enabled, query the **is\_broker\_enabled** column in the **sys.databases** catalog view.</span></span> <span data-ttu-id="a9d53-335">Son açılan sorgu penceresinde aşağıdaki betiği yürütün.</span><span class="sxs-lookup"><span data-stu-id="a9d53-335">Execute the following script in the recently opened query window.</span></span>

    [!code-sql[Main](real-time-web-applications-with-signalr/samples/sample11.sql)]

    <span data-ttu-id="a9d53-336">![Hizmet Aracısı durumu sorgulanıyor](real-time-web-applications-with-signalr/_static/image25.png "Hizmet Aracısı durumu sorgulanıyor")</span><span class="sxs-lookup"><span data-stu-id="a9d53-336">![Querying the Service Broker Status](real-time-web-applications-with-signalr/_static/image25.png "Querying the Service Broker Status")</span></span>

    <span data-ttu-id="a9d53-337">*Hizmet Aracısı durumu sorgulanıyor*</span><span class="sxs-lookup"><span data-stu-id="a9d53-337">*Querying the Service Broker Status*</span></span>
8. <span data-ttu-id="a9d53-338">Veritabanınızdaki **\_broker\_etkin** sütununun değeri &quot;0&quot;ise, etkinleştirmek için aşağıdaki komutu kullanın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-338">If the value of the **is\_broker\_enabled** column in your database is &quot;0&quot;, use the following command to enable it.</span></span> <span data-ttu-id="a9d53-339">Veritabanı **&gt;&lt;** , veritabanını oluştururken ayarladığınız adla değiştirin (örn. SignalR).</span><span class="sxs-lookup"><span data-stu-id="a9d53-339">Replace **&lt;YOUR-DATABASE&gt;** with the name you set when creating the database (e.g.: SignalR).</span></span>

    [!code-sql[Main](real-time-web-applications-with-signalr/samples/sample12.sql)]

    <span data-ttu-id="a9d53-340">![Hizmet Aracısı etkinleştiriliyor](real-time-web-applications-with-signalr/_static/image26.png "Hizmet Aracısı etkinleştiriliyor")</span><span class="sxs-lookup"><span data-stu-id="a9d53-340">![Enabling Service Broker](real-time-web-applications-with-signalr/_static/image26.png "Enabling Service Broker")</span></span>

    <span data-ttu-id="a9d53-341">*Hizmet Aracısı etkinleştiriliyor*</span><span class="sxs-lookup"><span data-stu-id="a9d53-341">*Enabling Service Broker*</span></span>

    > [!NOTE]
    > <span data-ttu-id="a9d53-342">Bu sorgu kilitlenme olarak görünüyorsa, VERITABANıNA bağlı bir uygulama olmadığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="a9d53-342">If this query appears to deadlock, make sure there are no applications connected to the DB.</span></span>

<a id="Ex2Task3"></a>
#### <a name="task-3--configuring-the-signalr-application"></a><span data-ttu-id="a9d53-343">Görev 3 – SignalR uygulamasını yapılandırma</span><span class="sxs-lookup"><span data-stu-id="a9d53-343">Task 3 – Configuring the SignalR Application</span></span>

<span data-ttu-id="a9d53-344">Bu görevde, **Geek sınavını** SQL Server arka düzleme bağlanacak şekilde yapılandıracaksınız.</span><span class="sxs-lookup"><span data-stu-id="a9d53-344">In this task, you will configure **Geek Quiz** to connect to the SQL Server backplane.</span></span> <span data-ttu-id="a9d53-345">Önce **SignalR. SqlServer** NuGet paketini ekleyecek ve bağlantı dizesini arka düzlem veritabanınıza ayarlayacaksınız.</span><span class="sxs-lookup"><span data-stu-id="a9d53-345">You will first add the **SignalR.SqlServer** NuGet package and set the connection string to your backplane database.</span></span>

1. <span data-ttu-id="a9d53-346">**NuGet paket yöneticisi** > **Araçlar** ' dan **Paket Yöneticisi konsolunu** açın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-346">Open the **Package Manager Console** from **Tools** > **NuGet Package Manager**.</span></span> <span data-ttu-id="a9d53-347">**Varsayılan proje** açılan listesinde **geektest** projesinin seçildiğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="a9d53-347">Make sure that **GeekQuiz** project is selected in the **Default project** drop-down list.</span></span> <span data-ttu-id="a9d53-348">**Microsoft. Aspnet. SignalR. SqlServer** NuGet paketini yüklemek için aşağıdaki komutu yazın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-348">Type the following command to install the **Microsoft.AspNet.SignalR.SqlServer** NuGet package.</span></span>

    [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample13.ps1)]
2. <span data-ttu-id="a9d53-349">Project **GeekQuiz2**için önceki adımı, ancak bu kez tekrarlayın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-349">Repeat the previous step but this time for project **GeekQuiz2**.</span></span>
3. <span data-ttu-id="a9d53-350">SQL Server geri düzlemi yapılandırmak için, **Geektest** projesinin **Startup.cs** dosyasını açın ve **Configure** yöntemine aşağıdaki kodu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-350">To configure the SQL Server backplane, open the **Startup.cs** file of the **GeekQuiz** project and add the following code to the **Configure** method.</span></span> <span data-ttu-id="a9d53-351">**&lt;-veritabanı&gt;** , SQL Server geri düzlemi oluştururken kullandığınız veritabanı adınızla değiştirin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-351">Replace **&lt;YOUR-DATABASE&gt;** with your database name you used when creating the SQL Server backplane.</span></span> <span data-ttu-id="a9d53-352">**GeekQuiz2** projesi için bu adımı tekrarlayın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-352">Repeat this step for the **GeekQuiz2** project.</span></span>

    <span data-ttu-id="a9d53-353">(Kod parçacığı- *RealTimeSignalR-EX2-StartupConfiguration*)</span><span class="sxs-lookup"><span data-stu-id="a9d53-353">(Code Snippet - *RealTimeSignalR - Ex2 - StartupConfiguration*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample14.cs)]
4. <span data-ttu-id="a9d53-354">Her iki proje de SQL Server arkadüzlemi kullanacak şekilde yapılandırıldığına göre, bunları aynı anda çalıştırmak için **F5** tuşuna basın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-354">Now that both projects are configured to use the SQL Server backplane, press **F5** to run them simultaneously.</span></span>
5. <span data-ttu-id="a9d53-355">**Visual Studio** , farklı bağlantı noktalarında **Geek sınavın** iki örneğini başlatır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-355">Again, **Visual Studio** will launch two instances of **Geek Quiz** in different ports.</span></span> <span data-ttu-id="a9d53-356">Sol taraftaki tarayıcılardan birini ekranın sağ tarafında sabitleyin ve kimlik bilgilerinizle oturum açın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-356">Pin one of the browsers on the left and the other on the right of your screen and log in with your credentials.</span></span> <span data-ttu-id="a9d53-357">Sol taraftaki sayfayı sola tutun ve sağ tarayıcıda **İstatistikler** sayfasına gidin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-357">Keep the Trivia page on the left and go to **Statistics** pagein the right browser.</span></span>
6. <span data-ttu-id="a9d53-358">Sol tarayıcıda sorularınızı yanıtlamayı başlatın.</span><span class="sxs-lookup"><span data-stu-id="a9d53-358">Start answering questions in the left browser.</span></span> <span data-ttu-id="a9d53-359">Bu kez, **istatistik** sayfası, geri düzlemi için teşekkürler.</span><span class="sxs-lookup"><span data-stu-id="a9d53-359">This time, the **Statistics** page is updated thanks to the backplane.</span></span> <span data-ttu-id="a9d53-360">Uygulamalar arasında geçiş yapın (**İstatistikler** artık sol **tarafta bulunur ve en sağda** bulunur) ve her iki örnek için çalıştığını doğrulamak için test yinelenir.</span><span class="sxs-lookup"><span data-stu-id="a9d53-360">Switch between applications (**Statistics** is now on the left, and **Trivia** is on the right) and repeat the test to validate that it is working for both instances.</span></span> <span data-ttu-id="a9d53-361">Biriktirme listesi, her bağlı sunucu için paylaşılan bir ileti *önbelleği* görevi görür ve her sunucu, bağlı istemcilere dağıtmak üzere iletileri kendi yerel önbelleğinde depolar.</span><span class="sxs-lookup"><span data-stu-id="a9d53-361">The backplane serves as a *shared cache* of messages for each connected server, and each server will store the messages in their own local cache to distribute to connected clients.</span></span>
7. <span data-ttu-id="a9d53-362">Visual Studio 'ya geri dönün ve hata ayıklamayı durdurun.</span><span class="sxs-lookup"><span data-stu-id="a9d53-362">Go back to Visual Studio and stop debugging.</span></span>
8. <span data-ttu-id="a9d53-363">SQL Server backdüzlemi bileşeni, belirtilen veritabanında gerekli tabloları otomatik olarak oluşturur.</span><span class="sxs-lookup"><span data-stu-id="a9d53-363">The SQL Server backplane component automatically generates the necessary tables on the specified database.</span></span> <span data-ttu-id="a9d53-364">**SQL Server Nesne Gezgini** panelinde, geri düzlemi (ör. SignalR) için oluşturduğunuz veritabanını açın ve tabloları genişletin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-364">In the **SQL Server Object Explorer** panel, open the database you created for the backplane (e.g.: SignalR) and expand its tables.</span></span> <span data-ttu-id="a9d53-365">Aşağıdaki tabloları görmeniz gerekir:</span><span class="sxs-lookup"><span data-stu-id="a9d53-365">You should see the following tables:</span></span>

    ![Arka düzlem tarafından oluşturulan tablolar](real-time-web-applications-with-signalr/_static/image27.png)

    <span data-ttu-id="a9d53-367">*Arka düzlem tarafından oluşturulan tablolar*</span><span class="sxs-lookup"><span data-stu-id="a9d53-367">*Backplane Generated Tables*</span></span>
9. <span data-ttu-id="a9d53-368">**SignalR. Messages\_0** tablosuna sağ tıklayın ve **verileri görüntüle**' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="a9d53-368">Right-click the **SignalR.Messages\_0** table and select **View Data**.</span></span>

    ![SignalR geri düzlemi Iletileri tablosunu görüntüle](real-time-web-applications-with-signalr/_static/image28.png)

    <span data-ttu-id="a9d53-370">*SignalR geri düzlemi Iletileri tablosunu görüntüle*</span><span class="sxs-lookup"><span data-stu-id="a9d53-370">*View SignalR Backplane Messages Table*</span></span>
10. <span data-ttu-id="a9d53-371">Gidiş ile soruları yanıtlarken **hub** 'a gönderilen farklı iletileri görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-371">You can see the different messages sent to the **Hub** when answering the trivia questions.</span></span> <span data-ttu-id="a9d53-372">Geri düzlemi, bu iletileri herhangi bir bağlı örneğe dağıtır.</span><span class="sxs-lookup"><span data-stu-id="a9d53-372">The backplane distributes these messages to any connected instance.</span></span>

    ![Backuçak Iletileri tablosu](real-time-web-applications-with-signalr/_static/image29.png)

    <span data-ttu-id="a9d53-374">*Backuçak Iletileri tablosu*</span><span class="sxs-lookup"><span data-stu-id="a9d53-374">*Backplane Messages Table*</span></span>

---

<a id="Summary"></a>
## <a name="summary"></a><span data-ttu-id="a9d53-375">Özet</span><span class="sxs-lookup"><span data-stu-id="a9d53-375">Summary</span></span>

<span data-ttu-id="a9d53-376">Bu uygulamalı laboratuvarda, uygulamanıza **SignalR** ekleme ve **hub 'ları**kullanarak sunucudan bağlı istemcilerinize bildirim gönderme hakkında bilgiler edindiniz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-376">In this hands-on lab, you have learned how to add **SignalR** to your application and send notifications from the server to your connected clients using **Hubs**.</span></span> <span data-ttu-id="a9d53-377">Ayrıca, uygulamanız birden fazla IIS örneğine dağıtıldığında bir *backdüzlemi* bileşeni kullanarak uygulamanızı nasıl ölçeklendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a9d53-377">Additionally, you learned how to scale out your application by using a *backplane* component when your application is deployed in multiple IIS instances.</span></span>
