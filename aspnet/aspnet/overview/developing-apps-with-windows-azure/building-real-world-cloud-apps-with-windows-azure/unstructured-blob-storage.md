---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/unstructured-blob-storage
title: Yapılandırılmamış BLOB depolama (Azure ile gerçek dünyada bulut uygulamaları oluşturma) | Microsoft Docs
author: MikeWasson
description: Azure e-Book ile gerçek dünyada bulut uygulamaları oluşturma, Scott Guthrie tarafından geliştirilen bir sunuyu temel alır. 13 desen ve şunları yapabilir...
ms.author: riande
ms.date: 03/30/2015
ms.assetid: 9f05ccb1-2004-4661-ad8b-c370e6c09c8e
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/unstructured-blob-storage
msc.type: authoredcontent
ms.openlocfilehash: f48b2be755b84dff9b2672bd348c73107602c6dd
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78617315"
---
# <a name="unstructured-blob-storage-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="ac7bd-104">Yapılandırılmamış BLOB depolama (Azure ile gerçek dünyada bulut uygulamaları oluşturma)</span><span class="sxs-lookup"><span data-stu-id="ac7bd-104">Unstructured Blob Storage (Building Real-World Cloud Apps with Azure)</span></span>

<span data-ttu-id="ac7bd-105">, [Mike te son](https://github.com/MikeWasson), [Rick Anderson](https://twitter.com/RickAndMSFT), [Tom Dykstra](https://github.com/tdykstra) tarafından</span><span class="sxs-lookup"><span data-stu-id="ac7bd-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://twitter.com/RickAndMSFT), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="ac7bd-106">[Onarma projesini indirin](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) veya [E-kitabı indirin](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="ac7bd-106">[Download Fix It Project](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="ac7bd-107">Azure e-book **Ile gerçek dünyada bulut uygulamaları oluşturma** , Scott Guthrie tarafından geliştirilen bir sunuyu temel alır.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="ac7bd-108">Bulut için Web Apps 'i başarılı bir şekilde geliştirmeye yardımcı olabilecek 13 desen ve uygulamaları açıklar.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="ac7bd-109">E-kitap hakkında daha fazla bilgi için [ilk bölüme](introduction.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>

<span data-ttu-id="ac7bd-110">Önceki bölümde bölümleme düzenlerini inceledik ve BT BT uygulamasının, Azure Depolama Blobu hizmetinde görüntüleri nasıl sakladığı ve Azure SQL veritabanı 'ndaki diğer görev verileri açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-110">In the previous chapter we looked at partitioning schemes and explained how the Fix It app stores images in the Azure Storage Blob service, and other task data in Azure SQL Database.</span></span> <span data-ttu-id="ac7bd-111">Bu bölümde, blob hizmetini daha ayrıntılı bir şekilde inceleyeceğiz ve BT Proje kodunu nasıl düzelteceğinizi nasıl uygulandığını göstereceğiz.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-111">In this chapter we go deeper into the Blob service and show how it's implemented in Fix It project code.</span></span>

## <a name="what-is-blob-storage"></a><span data-ttu-id="ac7bd-112">BLOB depolama nedir?</span><span class="sxs-lookup"><span data-stu-id="ac7bd-112">What is Blob storage?</span></span>

<span data-ttu-id="ac7bd-113">Azure Depolama Blobu hizmeti, dosyaları bulutta depolamak için bir yol sağlar.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-113">The Azure Storage Blob service provides a way to store files in the cloud.</span></span> <span data-ttu-id="ac7bd-114">Blob hizmeti, dosyaları yerel ağ dosya sisteminde depolamanın çeşitli avantajları içerir:</span><span class="sxs-lookup"><span data-stu-id="ac7bd-114">The Blob service has a number of advantages over storing files in a local network file system:</span></span>

- <span data-ttu-id="ac7bd-115">Oldukça ölçeklenebilir.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-115">It's highly scalable.</span></span> <span data-ttu-id="ac7bd-116">Tek bir depolama hesabı [yüzlerce terabayt](https://msdn.microsoft.com/library/windowsazure/dn249410.aspx)saklayabilir ve birden çok depolama hesabınız olabilir.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-116">A single Storage account can store [hundreds of terabytes](https://msdn.microsoft.com/library/windowsazure/dn249410.aspx), and you can have multiple Storage accounts.</span></span> <span data-ttu-id="ac7bd-117">En büyük Azure müşterilerinin yüzlerce Petabaytlarca depolama alanı.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-117">Some of the biggest Azure customers store hundreds of petabytes.</span></span> <span data-ttu-id="ac7bd-118">Microsoft SkyDrive blob Storage kullanır.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-118">Microsoft SkyDrive uses blob storage.</span></span>
- <span data-ttu-id="ac7bd-119">Dayanıklı.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-119">It's durable.</span></span> <span data-ttu-id="ac7bd-120">Blob hizmetinde depoladığınız her dosya otomatik olarak yedeklenir.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-120">Every file you store in the Blob service is automatically backed up.</span></span>
- <span data-ttu-id="ac7bd-121">Yüksek kullanılabilirlik sağlar.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-121">It provides high availability.</span></span> <span data-ttu-id="ac7bd-122">[Depolama SLA 'sı](https://go.microsoft.com/fwlink/p/?linkid=159705&amp;clcid=0x409) , seçtiğiniz coğrafi artıklık seçeneğine bağlı olarak% 99,9 veya% 99,99 çalışma süresini taahhüt eder.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-122">The [SLA for Storage](https://go.microsoft.com/fwlink/p/?linkid=159705&amp;clcid=0x409) promises 99.9% or 99.99% uptime, depending on which geo-redundancy option you choose.</span></span>
- <span data-ttu-id="ac7bd-123">Azure 'un bir hizmet olarak platform (PaaS) özelliğidir. Bu, yalnızca dosya depoladığınız ve aldığınız, yalnızca kullandığınız depolama alanı için ödeme yaptığınız ve Azure 'un şu şekilde gerektirdiği tüm VM 'Leri ve disk sürücüleri ayarlama ve yönetme işlemini otomatik olarak gerçekleştirir. hizmetle.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-123">It's a platform-as-a-service (PaaS) feature of Azure, which means you just store and retrieve files, paying only for the actual amount of storage you use, and Azure automatically takes care of setting up and managing all of the VMs and disk drives required for the service.</span></span>
- <span data-ttu-id="ac7bd-124">Blob hizmetine bir REST API kullanarak veya bir programlama dili API 'SI kullanarak erişebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-124">You can access the Blob service by using a REST API or by using a programming language API.</span></span> <span data-ttu-id="ac7bd-125">SDK 'lar .NET, Java, Ruby ve diğerleri için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-125">SDKs are available for .NET, Java, Ruby, and others.</span></span>
- <span data-ttu-id="ac7bd-126">Blob hizmetinde bir dosyayı depolayadığınızda, kolayca Internet üzerinden kullanılabilir hale getirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-126">When you store a file in the Blob service, you can easily make it publicly available over the Internet.</span></span>
- <span data-ttu-id="ac7bd-127">Blob hizmetindeki dosyaları yalnızca yetkili kullanıcılar tarafından erişilebilmeleri için güvenli hale getirebilirsiniz veya yalnızca sınırlı bir süre için kullanılabilir hale getiren geçici erişim belirteçleri sağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-127">You can secure files in the Blob service so they can accessed only by authorized users, or you can provide temporary access tokens that makes them available to someone only for a limited period of time.</span></span>

<span data-ttu-id="ac7bd-128">Azure için bir uygulama oluşturduğunuzda ve şirket içi bir ortamda çok fazla veri depolamak istediğinizde, resimler, videolar, PDF 'Ler, elektronik tablolar vb. gibi dosyalar da vardır. blob hizmetini düşünün.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-128">Anytime you're building an app for Azure and you want to store a lot of data that in an on-premises environment would go in files -- such as images, videos, PDFs, spreadsheets, etc. -- consider the Blob service.</span></span>

## <a name="creating-a-storage-account"></a><span data-ttu-id="ac7bd-129">Depolama hesabı oluşturma</span><span class="sxs-lookup"><span data-stu-id="ac7bd-129">Creating a Storage account</span></span>

<span data-ttu-id="ac7bd-130">Blob hizmetini kullanmaya başlamak için Azure 'da bir depolama hesabı oluşturursunuz.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-130">To get started with the Blob service you create a Storage account in Azure.</span></span> <span data-ttu-id="ac7bd-131">Portalda, **yeni** -- **veri hizmetleri** -- **depolama** -- **hızlı oluştur**' a tıklayın ve ardından bir URL ve veri merkezi konumu girin.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-131">In the portal, click **New** -- **Data Services** -- **Storage** -- **Quick Create**, and then enter a URL and a data center location.</span></span> <span data-ttu-id="ac7bd-132">Veri merkezi konumu, Web uygulamanız ile aynı olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-132">The data center location should be the same as your web app.</span></span>

![Depolama hesabı oluşturma](unstructured-blob-storage/_static/image1.png)

<span data-ttu-id="ac7bd-134">İçeriği depolamak istediğiniz birincil bölgeyi seçersiniz ve [coğrafi çoğaltma](https://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx#_Geo_Redundant_Storage) seçeneğini belirlerseniz Azure, diğer tüm verilerinizin, ülkenin başka bir bölgesindeki farklı bir veri merkezinde kopyalarını oluşturur.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-134">You pick the primary region where you want to store the content, and if you choose the [geo-replication](https://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx#_Geo_Redundant_Storage) option, Azure creates replicas of all your data in a different data center in another region of the country.</span></span> <span data-ttu-id="ac7bd-135">Örneğin, Batı ABD veri merkezini seçerseniz, Batı ABD veri merkezine giden bir dosyayı depoladığınız halde Azure, arka planda diğer ABD veri merkezlerinden birine de kopyalanır.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-135">For example, if you choose the Western US data center, when you store a file it goes to the Western US data center, but in the background Azure also copies it to one of the other US data centers.</span></span> <span data-ttu-id="ac7bd-136">Ülkenin bir bölgesinde bir olağanüstü durum oluşursa, verileriniz hala güvende olur.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-136">If a disaster happens in one region of the country, your data is still safe.</span></span>

<span data-ttu-id="ac7bd-137">Azure, coğrafi olmayan sınırlar arasında veri çoğaltmayacaktır: birincil konumunuz ABD içindeyse dosyalarınız yalnızca ABD içindeki başka bir bölgeye çoğaltılır; birincil konumunuz Avustralya ise dosyalarınız yalnızca Avustralya 'daki başka bir veri merkezine çoğaltılır.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-137">Azure won't replicate data across geo-political boundaries: if your primary location is in the U.S., your files are only replicated to another region within the U.S.; if your primary location is Australia, your files are only replicated to another data center in Australia.</span></span>

<span data-ttu-id="ac7bd-138">Kuşkusuz, daha önce gördüğünüz gibi bir betikten komutları yürüterek bir depolama hesabı da oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-138">Of course, you can also create a Storage account by executing commands from a script, as we saw earlier.</span></span> <span data-ttu-id="ac7bd-139">Bir depolama hesabı oluşturmak için bir Windows PowerShell komutu aşağıda verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="ac7bd-139">Here's a Windows PowerShell command to create a Storage account:</span></span>

[!code-powershell[Main](unstructured-blob-storage/samples/sample1.ps1)]

<span data-ttu-id="ac7bd-140">Depolama Hesabınız olduktan sonra blob hizmetinde dosyaları depolamaya hemen başlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-140">Once you have a Storage account, you can immediately start storing files in the Blob service.</span></span>

## <a name="using-blob-storage-in-the-fix-it-app"></a><span data-ttu-id="ac7bd-141">BT BT uygulamasında blob depolamayı kullanma</span><span class="sxs-lookup"><span data-stu-id="ac7bd-141">Using Blob storage in the Fix It app</span></span>

<span data-ttu-id="ac7bd-142">BT BT uygulaması, Fotoğrafları karşıya yüklemenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-142">The Fix It app enables you to upload photos.</span></span>

![Bir düzelme görevi oluşturun](unstructured-blob-storage/_static/image2.png)

<span data-ttu-id="ac7bd-144">**Armatürü oluştur**' a tıkladığınızda, uygulama belirtilen görüntü dosyasını karşıya yükler ve BLOB hizmetinde depolar.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-144">When you click **Create the FixIt**, the application uploads the specified image file and stores it in the Blob service.</span></span>

### <a name="set-up-the-blob-container"></a><span data-ttu-id="ac7bd-145">Blob kapsayıcısını ayarlama</span><span class="sxs-lookup"><span data-stu-id="ac7bd-145">Set up the Blob container</span></span>

<span data-ttu-id="ac7bd-146">Blob hizmetinde bir dosyayı depolamak için bir *kapsayıcıya* ihtiyacınız vardır.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-146">In order to store a file in the Blob service you need a *container* to store it in.</span></span> <span data-ttu-id="ac7bd-147">Blob hizmeti kapsayıcısı bir dosya sistemi klasörüne karşılık gelir.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-147">A Blob service container corresponds to a file system folder.</span></span> <span data-ttu-id="ac7bd-148">[Her şeyi otomatikleştirin](automate-everything.md) bölümünde gözden geçirdiğimiz ortam oluşturma betikleri depolama hesabını oluşturur, ancak bir kapsayıcı oluşturmaz.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-148">The environment creation scripts that we reviewed in the [Automate Everything chapter](automate-everything.md) create the Storage account, but they don't create a container.</span></span> <span data-ttu-id="ac7bd-149">Bu nedenle, `PhotoService` sınıfının `CreateAndConfigure` yönteminin amacı, zaten mevcut değilse bir kapsayıcı oluşturmaktır.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-149">So the purpose of the `CreateAndConfigure` method of the `PhotoService` class is to create a container if it doesn't already exist.</span></span> <span data-ttu-id="ac7bd-150">Bu yöntem, *Global. asax*dosyasındaki `Application_Start` yönteminden çağrılır.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-150">This method is called from the `Application_Start` method in *Global.asax*.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample2.cs)]

<span data-ttu-id="ac7bd-151">Depolama hesabı adı ve erişim anahtarı, *Web. config* dosyasının `appSettings` koleksiyonunda depolanır ve `StorageUtils.StorageAccount` yöntemindeki kod bu değerleri bir bağlantı dizesi oluşturmak ve bir bağlantı oluşturmak için kullanır:</span><span class="sxs-lookup"><span data-stu-id="ac7bd-151">The storage account name and access key are stored in the `appSettings` collection of the *Web.config* file, and code in the `StorageUtils.StorageAccount` method uses those values to build a connection string and establish a connection:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample3.cs)]

<span data-ttu-id="ac7bd-152">`CreateAndConfigureAsync` yöntemi daha sonra blob hizmetini temsil eden bir nesne ve BLOB hizmetinde "görüntüler" adlı bir kapsayıcıyı (klasör) temsil eden bir nesneyi oluşturur:</span><span class="sxs-lookup"><span data-stu-id="ac7bd-152">The `CreateAndConfigureAsync` method then creates an object that represents the Blob service, and an object that represents a container (folder) named "images" in the Blob service:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample4.cs)]

<span data-ttu-id="ac7bd-153">"Görüntüler" adlı bir kapsayıcı henüz yoksa ve uygulamayı yeni bir depolama hesabında ilk kez çalıştırdığınızda doğru olacaktır; kod kapsayıcıyı oluşturur ve ortak hale getirmek için izinleri ayarlar.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-153">If a container named "images" doesn't exist yet -- which will be true the first time you run the app against a new storage account -- the code creates the container and sets permissions to make it public.</span></span> <span data-ttu-id="ac7bd-154">(Varsayılan olarak, yeni blob kapsayıcıları özeldir ve yalnızca depolama hesabınıza erişim izni olan kullanıcılar için erişilebilir.)</span><span class="sxs-lookup"><span data-stu-id="ac7bd-154">(By default, new blob containers are private and are accessible only to users who have permission to access your storage account.)</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample5.cs)]

### <a name="store-the-uploaded-photo-in-blob-storage"></a><span data-ttu-id="ac7bd-155">Karşıya yüklenen fotoğrafı BLOB depolama alanına depolayın</span><span class="sxs-lookup"><span data-stu-id="ac7bd-155">Store the uploaded photo in Blob storage</span></span>

<span data-ttu-id="ac7bd-156">Uygulama, görüntü dosyasını karşıya yüklemek ve kaydetmek için bir `IPhotoService` arabirimi ve `PhotoService` sınıfında arabirimin bir uygulamasını kullanır.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-156">To upload and save the image file, the app uses an `IPhotoService` interface and an implementation of the interface in the `PhotoService` class.</span></span> <span data-ttu-id="ac7bd-157">*Photoservice.cs* dosyası, blob hizmetiyle Iletişim kuran BT BT uygulamasındaki tüm kodu içerir.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-157">The *PhotoService.cs* file contains all of the code in the Fix It app that communicates with the Blob service.</span></span>

<span data-ttu-id="ac7bd-158">Aşağıdaki MVC denetleyici yöntemi, Kullanıcı **Armaöğeyi oluştur**' a tıkladığında çağrılır.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-158">The following MVC controller method is called when the user clicks **Create the FixIt**.</span></span> <span data-ttu-id="ac7bd-159">Bu kodda, `photoService` `PhotoService` sınıfının bir örneğine başvurur ve `fixittask` yeni bir görev için veri depolayan `FixItTask` Entity sınıfının bir örneğine başvurur.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-159">In this code, `photoService` refers to an instance of the `PhotoService` class, and `fixittask` refers to an instance of the `FixItTask` entity class that stores data for a new task.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample6.cs?highlight=8)]

<span data-ttu-id="ac7bd-160">`PhotoService` sınıfındaki `UploadPhotoAsync` yöntemi, karşıya yüklenen dosyayı blob hizmetinde depolar ve yeni Blobun işaret eden bir URL döndürür.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-160">The `UploadPhotoAsync` method in the `PhotoService` class stores the uploaded file in the Blob service and returns a URL that points to the new blob.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample7.cs)]

<span data-ttu-id="ac7bd-161">`CreateAndConfigure` yönteminde olduğu gibi, kod depolama hesabına bağlanır ve "görüntüler" blob kapsayıcısını temsil eden bir nesne oluşturur; burada, kapsayıcının zaten var olduğunu varsaymaktadır.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-161">As in the `CreateAndConfigure` method, the code connects to the storage account and creates an object that represents the "images" blob container, except here it assumes the container already exists.</span></span>

<span data-ttu-id="ac7bd-162">Sonra, dosya uzantısıyla yeni bir GUID değeri birleştirerek karşıya yüklenmek üzere bir benzersiz tanımlayıcı oluşturur:</span><span class="sxs-lookup"><span data-stu-id="ac7bd-162">Then it creates a unique identifier for the image about to be uploaded, by concatenating a new GUID value with the file extension:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample8.cs)]

<span data-ttu-id="ac7bd-163">Daha sonra kod, blob nesnesi oluşturmak için blob kapsayıcı nesnesini ve yeni benzersiz tanımlayıcıyı kullanır, bu nesne üzerinde ne tür dosya olduğunu gösteren bir özniteliği ayarlar ve sonra blob nesnesini kullanarak dosyayı BLOB depolama alanında depolar.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-163">The code then uses the blob container object and the new unique identifier to create a blob object, sets an attribute on that object indicating what kind of file it is, and then uses the blob object to store the file in blob storage.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample9.cs)]

<span data-ttu-id="ac7bd-164">Son olarak, blob 'a başvuran bir URL alır.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-164">Finally, it gets a URL that references the blob.</span></span> <span data-ttu-id="ac7bd-165">Bu URL veritabanında depolanacak ve karşıya yüklenen görüntüyü göstermek için BT Web sayfalarında kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-165">This URL will be stored in the database and can be used in Fix It web pages to display the uploaded image.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample10.cs)]

<span data-ttu-id="ac7bd-166">Bu URL, FixItTask tablosunun sütunlarından biri olarak veritabanında depolanır.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-166">This URL is stored in the database as one of the columns of the FixItTask table.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample11.cs?highlight=10)]

<span data-ttu-id="ac7bd-167">Yalnızca veritabanındaki URL ve BLOB depolamada bulunan görüntüler ile, BT BT uygulaması veritabanını küçük, ölçeklenebilir ve pahalı halde tutar, ancak resimler depolamanın depolama birimi olduğu ve terabayt veya petabaytlarca işleme yeteneğine sahip olduğu yerde saklanır.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-167">With only the URL in the database, and images in Blob storage, the Fix It app keeps the database small, scalable, and inexpensive, while the images are stored where storage is cheap and capable of handling terabytes or petabytes.</span></span> <span data-ttu-id="ac7bd-168">Bir depolama hesabı yüzlerce terabaytlık BT fotoğraflarını saklayabilir ve yalnızca kullandığınız kadar ödersiniz.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-168">One storage account can store hundreds of terabytes of Fix It photos, and you only pay for what you use.</span></span> <span data-ttu-id="ac7bd-169">Bu nedenle, ilk gigabayt için küçük ödeme 9 ' u kapatabilir ve ek gigabayt başına yarımada için daha fazla görüntü ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-169">So you can start off small paying 9 cents for the first gigabyte, and add more images for pennies per additional gigabyte.</span></span>

### <a name="display-the-uploaded-file"></a><span data-ttu-id="ac7bd-170">Karşıya yüklenen dosyayı görüntüle</span><span class="sxs-lookup"><span data-stu-id="ac7bd-170">Display the uploaded file</span></span>

<span data-ttu-id="ac7bd-171">BT BT uygulaması, bir görevin ayrıntılarını görüntülediğinde karşıya yüklenen resim dosyasını görüntüler.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-171">The Fix It application displays the uploaded image file when it displays details for a task.</span></span>

![Fotoğraf ile BT görevi ayrıntılarını onarma](unstructured-blob-storage/_static/image3.png)

<span data-ttu-id="ac7bd-173">Görüntüyü görüntülemek için, tüm MVC görünümü tarayıcıya gönderilen HTML 'de `PhotoUrl` değerini içermelidir.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-173">To display the image, all the MVC view has to do is include the `PhotoUrl` value in the HTML sent to the browser.</span></span> <span data-ttu-id="ac7bd-174">Web sunucusu ve veritabanı, görüntüyü göstermek için döngüleri kullanmıyor, görüntü URL 'sine yalnızca birkaç bayt sunuluyor.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-174">The web server and the database are not using cycles to display the image, they are only serving up a few bytes to the image URL.</span></span> <span data-ttu-id="ac7bd-175">Aşağıdaki Razor kodunda, `Model` `FixItTask` varlık sınıfının bir örneğine başvurur.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-175">In the following Razor code, `Model` refers to an instance of the `FixItTask` entity class.</span></span>

[!code-cshtml[Main](unstructured-blob-storage/samples/sample12.cshtml?highlight=11)]

<span data-ttu-id="ac7bd-176">Görüntülenen sayfanın HTML 'sine bakarsanız, BLOB depolama alanındaki görüntüye doğrudan işaret eden URL 'yi görürsünüz, şöyle bir şey vardır:</span><span class="sxs-lookup"><span data-stu-id="ac7bd-176">If you look at the HTML of the page that displays, you see the URL pointing directly to the image in blob storage, something like this:</span></span>

[!code-cshtml[Main](unstructured-blob-storage/samples/sample13.cshtml?highlight=11)]

## <a name="summary"></a><span data-ttu-id="ac7bd-177">Özet</span><span class="sxs-lookup"><span data-stu-id="ac7bd-177">Summary</span></span>

<span data-ttu-id="ac7bd-178">Bu uygulamayı onarma uygulamasının, blob hizmetinde görüntüleri ve yalnızca SQL veritabanındaki görüntü URL 'Lerini nasıl depoladığını gördünüz.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-178">You've seen how the Fix It app stores images in the Blob service and only image URLs in the SQL database.</span></span> <span data-ttu-id="ac7bd-179">Blob hizmetini kullanmak SQL veritabanının çok daha küçük olmasını önler, aksi takdirde, neredeyse sınırsız sayıda göreve kadar ölçeklendirme yapabilir ve çok fazla kod yazmadan yapılabilir.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-179">Using the Blob service keeps the SQL database much smaller than it otherwise would be, makes it possible to scale up to an almost unlimited number of tasks, and can be done without writing a lot of code.</span></span>

<span data-ttu-id="ac7bd-180">Bir depolama hesabında yüzlerce terabayta sahip olabilirsiniz ve depolama maliyeti SQL veritabanı depolamadan çok daha ucuzdur. Bu işlem, ayda gigabayt başına yaklaşık 3 sent ve küçük bir işlem ücreti ile başlar.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-180">You can have hundreds of terabytes in a storage account, and the storage cost is much less expensive than SQL Database storage, starting at about 3 cents per gigabyte per month plus a small transaction charge.</span></span> <span data-ttu-id="ac7bd-181">Ve yalnızca gerçekten depoladığınız miktar için, en yüksek kapasite için ödeme yapmadıysanız, ancak uygulamanızın ölçeklendirmeye hazır olması, ancak tüm bu ek kapasiteniz için ödeme yapamayacağınızı unutmayın.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-181">And keep in mind that you're not paying for the maximum capacity but only for the amount you actually store, so your app is ready to scale but you're not paying for all that extra capacity.</span></span>

<span data-ttu-id="ac7bd-182">Bir [sonraki bölümde](design-to-survive-failures.md) , bir bulut uygulamasının sorunları sorunsuz bir şekilde işlemesini sağlamak için önem derecesi hakkında konuşacağız.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-182">In the [next chapter](design-to-survive-failures.md) we'll talk about the importance of making a cloud app capable of gracefully handling failures.</span></span>

## <a name="resources"></a><span data-ttu-id="ac7bd-183">Kaynaklar</span><span class="sxs-lookup"><span data-stu-id="ac7bd-183">Resources</span></span>

<span data-ttu-id="ac7bd-184">Daha fazla bilgi için aşağıdaki kaynaklara bakın:</span><span class="sxs-lookup"><span data-stu-id="ac7bd-184">For more information see the following resources:</span></span>

- <span data-ttu-id="ac7bd-185">[Azure Blob depolamaya giriş](https://www.simple-talk.com/cloud/cloud-data/an-introduction-to-windows-azure-blob-storage-/).</span><span class="sxs-lookup"><span data-stu-id="ac7bd-185">[An Introduction to Azure BLOB Storage](https://www.simple-talk.com/cloud/cloud-data/an-introduction-to-windows-azure-blob-storage-/).</span></span> <span data-ttu-id="ac7bd-186">Mike Wood tarafından blog.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-186">Blog by Mike Wood.</span></span>
- <span data-ttu-id="ac7bd-187">[.Net ' te Azure Blob depolama hizmetini kullanma](https://docs.microsoft.com/azure/storage/blobs/storage-dotnet-how-to-use-blobs).</span><span class="sxs-lookup"><span data-stu-id="ac7bd-187">[How to use the Azure Blob Storage Service in .NET](https://docs.microsoft.com/azure/storage/blobs/storage-dotnet-how-to-use-blobs).</span></span> <span data-ttu-id="ac7bd-188">MicrosoftAzure.com sitesinde resmi belgeler.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-188">Official documentation on the MicrosoftAzure.com site.</span></span> <span data-ttu-id="ac7bd-189">Blob depolamaya kısa bir giriş ve ardından blob depolamaya bağlanmayı, kapsayıcılar oluşturmayı, Blobları yüklemeyi ve indirmeyi gösteren kod örnekleri, vb.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-189">A brief introduction to blob storage followed by code examples showing how to connect to blob storage, create containers, upload and download blobs, etc.</span></span>
- <span data-ttu-id="ac7bd-190">[Failsafe: ölçeklenebilir, dayanıklı Cloud Services oluşturma](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="ac7bd-190">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="ac7bd-191">Ulrich Homann, Marc Mercuri ve Mark Simms ile dokuz parçalı video serisi.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-191">Nine-part video series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="ac7bd-192">, Microsoft Müşteri danışmanlık ekibi (CAT) deneyiminden gerçek müşterilerle çekilen hikayelerle, yüksek düzeyde kavramlar ve mimari ilkeleri çok erişilebilir ve ilginç bir şekilde sunar.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-192">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="ac7bd-193">Azure depolama hizmeti ve Blobları hakkında bir tartışma için 35:13 adresinden başlayan Bölüm 5 ' i inceleyin.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-193">For a discussion of Azure Storage service and blobs, see episode 5 starting at 35:13.</span></span>
- <span data-ttu-id="ac7bd-194">[Microsoft desenleri ve uygulamaları-Azure Kılavuzu](https://msdn.microsoft.com/library/dn568099.aspx).</span><span class="sxs-lookup"><span data-stu-id="ac7bd-194">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="ac7bd-195">Bkz. Valet anahtar stili.</span><span class="sxs-lookup"><span data-stu-id="ac7bd-195">See Valet Key pattern.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ac7bd-196">[Önceki](data-partitioning-strategies.md)
> [İleri](design-to-survive-failures.md)</span><span class="sxs-lookup"><span data-stu-id="ac7bd-196">[Previous](data-partitioning-strategies.md)
[Next](design-to-survive-failures.md)</span></span>
