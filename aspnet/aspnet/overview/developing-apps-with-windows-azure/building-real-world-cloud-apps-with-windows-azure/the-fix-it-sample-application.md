---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/the-fix-it-sample-application
title: "Ek: Düzeltme (Azure'la gerçek hayatta kullanılan bulut uygulamaları oluşturma) uygulama örneği | Microsoft Docs"
author: MikeWasson
description: Gerçek dünya ile bulut uygulamaları oluşturma Azure e-kitap Scott Guthrie tarafından geliştirilen bir sunuma dayalıdır. Bu, 13 desenler ve kendisi için uygulamalar açıklanmaktadır...
ms.author: riande
ms.date: 06/12/2014
ms.assetid: 1bc333c5-f096-4ea7-b170-779accc21c1a
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/the-fix-it-sample-application
msc.type: authoredcontent
ms.openlocfilehash: d3a965ccf7ca001d3178819f88836b59f2893bb0
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59406424"
---
# <a name="appendix-the-fix-it-sample-application-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="d35e0-104">Ek: Düzeltme (Azure'la gerçek hayatta kullanılan bulut uygulamaları oluşturma) uygulama örneği</span><span class="sxs-lookup"><span data-stu-id="d35e0-104">Appendix: The Fix It Sample Application (Building Real-World Cloud Apps with Azure)</span></span>

<span data-ttu-id="d35e0-105">tarafından [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="d35e0-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="d35e0-106">Bu proje düzeltmeyi indirin</span><span class="sxs-lookup"><span data-stu-id="d35e0-106">Download The Fix It Project</span></span>](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4)

> <span data-ttu-id="d35e0-107">**Yapı gerçek dünyaya yönelik bulut uygulamaları Azure ile** e-kitap, Scott Guthrie tarafından geliştirilen bir sunuma dayalıdır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="d35e0-108">13 desenleri açıklar ve web uygulamaları bulut için geliştirme başarılı yardımcı olabilecek uygulamalar.</span><span class="sxs-lookup"><span data-stu-id="d35e0-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="d35e0-109">E-kitabı hakkında daha fazla bilgi için bkz. [ilk bölüm](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="d35e0-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>

<span data-ttu-id="d35e0-110">Bu ekte gerçek dünya ile bulut uygulamaları oluşturma Azure e-kitap için indirebileceğiniz Düzelt örnek uygulaması hakkında ek bilgi sağlayan aşağıdaki bölümleri içerir:</span><span class="sxs-lookup"><span data-stu-id="d35e0-110">This appendix to the Building Real World Cloud Apps with Azure e-book contains the following sections that provide additional information about the Fix It sample application that you can download:</span></span>

- [<span data-ttu-id="d35e0-111">Bilinen sorunlar</span><span class="sxs-lookup"><span data-stu-id="d35e0-111">Known issues</span></span>](#knownissues)
- [<span data-ttu-id="d35e0-112">En iyi uygulamalar</span><span class="sxs-lookup"><span data-stu-id="d35e0-112">Best practices</span></span>](#bestpractices)
- [<span data-ttu-id="d35e0-113">Uygulamayı yerel bilgisayarınızda Visual Studio'dan çalıştırma</span><span class="sxs-lookup"><span data-stu-id="d35e0-113">How to run the app from Visual Studio on your local computer</span></span>](#run-in-vs)
- [<span data-ttu-id="d35e0-114">Windows PowerShell komut dosyalarını kullanarak Azure App Service Web Apps için temel uygulama dağıtma</span><span class="sxs-lookup"><span data-stu-id="d35e0-114">How to deploy the base app to Azure App Service Web Apps by using the Windows PowerShell scripts</span></span>](#deploybase)
- [<span data-ttu-id="d35e0-115">Windows PowerShell komut dosyaları sorunlarını giderme</span><span class="sxs-lookup"><span data-stu-id="d35e0-115">Troubleshooting the Windows PowerShell scripts</span></span>](#troubleshooting)
- [<span data-ttu-id="d35e0-116">Azure App Service Web Apps ve Azure bulut hizmeti için işleme sırası ile uygulama dağıtma</span><span class="sxs-lookup"><span data-stu-id="d35e0-116">How to deploy the app with queue processing to Azure App Service Web Apps and an Azure Cloud Service</span></span>](#deployqueues)

<a id="knownissues"></a>
## <a name="known-issues"></a><span data-ttu-id="d35e0-117">Bilinen sorunlar</span><span class="sxs-lookup"><span data-stu-id="d35e0-117">Known issues</span></span>

<span data-ttu-id="d35e0-118">Düzeltme uygulama desenleri bazıları bu e-kitapta tanıtılan olabildiğince basit bir şekilde göstermek için ilk olarak geliştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-118">The Fix It app was originally developed in order to illustrate as simply as possible some of the patterns presented in this e-book.</span></span> <span data-ttu-id="d35e0-119">E-kitap, gerçek uygulamaları oluşturma hakkında olduğundan, ancak biz Düzelt kod gözden geçirme ve test işlemi ne için yayımlanan yazılım yapmamız için benzer tabi.</span><span class="sxs-lookup"><span data-stu-id="d35e0-119">However, since the e-book is about building real-world apps, we subjected the Fix It code to a review and testing process similar to what we'd do for released software.</span></span> <span data-ttu-id="d35e0-120">Birkaç sorun bulduk ve tüm gerçek uygulamada olduğu gibi bunların bazılarını düzelttik ve bunların bazılarını daha sonraki bir sürüme biz ertelenmiş.</span><span class="sxs-lookup"><span data-stu-id="d35e0-120">We found a number of issues, and as with any real-world application, some of them we fixed and some of them we deferred to a later release.</span></span>

<span data-ttu-id="d35e0-121">Aşağıdaki listede, bir üretim uygulaması, ancak bir sebeple veya başka Düzelt örnek uygulamanın ilk sürümde adresine değil verdik ele alınması gereken sorunları içerir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-121">The following list includes issues that should be addressed in a production application, but for one reason or another we decided not to address in the initial release of the Fix It sample application.</span></span>

### <a name="security"></a><span data-ttu-id="d35e0-122">Güvenlik</span><span class="sxs-lookup"><span data-stu-id="d35e0-122">Security</span></span>

- <span data-ttu-id="d35e0-123">Bir görev var olmayan bir kullanıcıya atanamaz emin olun.</span><span class="sxs-lookup"><span data-stu-id="d35e0-123">Ensure that you can't assign a task to a non-existent owner.</span></span>
- <span data-ttu-id="d35e0-124">Yalnızca yapabilecekleriniz olun görüntüleyin ve oluşturduğunuz veya size atanan görevlerin değiştirin.</span><span class="sxs-lookup"><span data-stu-id="d35e0-124">Ensure that you can only view and modify tasks that you created or are assigned to you.</span></span>
- <span data-ttu-id="d35e0-125">Oturum açma sayfaları ve kimlik doğrulaması tanımlama bilgileri için HTTPS kullanır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-125">Use HTTPS for sign-in pages and authentication cookies.</span></span>
- <span data-ttu-id="d35e0-126">Kimlik doğrulama tanımlama bilgisi için bir süre belirtin.</span><span class="sxs-lookup"><span data-stu-id="d35e0-126">Specify a time limit for authentication cookies.</span></span>

### <a name="input-validation"></a><span data-ttu-id="d35e0-127">Giriş doğrulaması</span><span class="sxs-lookup"><span data-stu-id="d35e0-127">Input validation</span></span>

<span data-ttu-id="d35e0-128">Genel olarak, bir üretim uygulaması yaptığınız Düzelt uygulama daha fazla giriş doğrulama.</span><span class="sxs-lookup"><span data-stu-id="d35e0-128">In general, a production app would do more input validation than the Fix It app.</span></span> <span data-ttu-id="d35e0-129">Örneğin, görüntü boyutu / görüntü karşıya yükleme sınırlandırılmalıdır için izin verilen maksimum dosya boyutu.</span><span class="sxs-lookup"><span data-stu-id="d35e0-129">For example, the image size / image file size allowed for upload should be limited.</span></span>

### <a name="administrator-functionality"></a><span data-ttu-id="d35e0-130">Yönetici işlevi</span><span class="sxs-lookup"><span data-stu-id="d35e0-130">Administrator functionality</span></span>

<span data-ttu-id="d35e0-131">Yöneticinin mevcut görevlerde sahipliğini değiştirmek görebilmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-131">An administrator should be able to change ownership on existing tasks.</span></span> <span data-ttu-id="d35e0-132">Örneğin, bir görev oluşturan hiç yönetici erişimi etkinleştirilmediği sürece Görev korumak yetkilisiyle bırakarak şirket bırakabilir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-132">For example, the creator of a task might leave the company, leaving no one with authority to maintain the task unless administrative access is enabled.</span></span>

### <a name="queue-message-processing"></a><span data-ttu-id="d35e0-133">Kuyruk ileti işleme</span><span class="sxs-lookup"><span data-stu-id="d35e0-133">Queue message processing</span></span>

<span data-ttu-id="d35e0-134">Kuyruk iletisi Düzelt uygulamada işleme minimum miktarda kod kuyruk merkezli çalışma deseni göstermek için basit olacak şekilde tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-134">Queue message processing in the Fix It app was designed to be simple in order to illustrate the queue-centric work pattern with a minimum amount of code.</span></span> <span data-ttu-id="d35e0-135">Bu basit kod bir gerçek bir üretim uygulaması için yeterli olmaz.</span><span class="sxs-lookup"><span data-stu-id="d35e0-135">This simple code would not be adequate for an actual production application.</span></span>

- <span data-ttu-id="d35e0-136">Kod, her bir kuyruk iletisi en fazla bir kez işlenir garanti etmez.</span><span class="sxs-lookup"><span data-stu-id="d35e0-136">The code does not guarantee that each queue message will be processed at most once.</span></span> <span data-ttu-id="d35e0-137">Kuyruktan bir ileti aldığınızda iletiyi diğer kuyruk dinleyicilere görünmez bir zaman aşımı süresi yoktur.</span><span class="sxs-lookup"><span data-stu-id="d35e0-137">When you get a message from the queue, there is a timeout period, during which the message is invisible to other queue listeners.</span></span> <span data-ttu-id="d35e0-138">İleti silinmeden önce zaman aşımı süresi dolarsa, ileti yeniden görünür hale gelir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-138">If the timeout expires before the message is deleted, the message becomes visible again.</span></span> <span data-ttu-id="d35e0-139">Bir çalışan rolü örneği bir ileti işlenirken zaman harcıyorsa, bu nedenle, yinelenen bir görevi veritabanında kaynaklanan aynı ileti iki kez işlenemedi teorik olarak mümkündür.</span><span class="sxs-lookup"><span data-stu-id="d35e0-139">Therefore, if a worker role instance spends a long time processing a message, it is theoretically possible for the same message to get processed twice, resulting in a duplicate task in the database.</span></span> <span data-ttu-id="d35e0-140">Bu sorun hakkında daha fazla bilgi için bkz. [kullanarak Azure depolama kuyrukları](https://msdn.microsoft.com/library/ff803365.aspx#sec7).</span><span class="sxs-lookup"><span data-stu-id="d35e0-140">For more information about this issue, see [Using Azure Storage Queues](https://msdn.microsoft.com/library/ff803365.aspx#sec7).</span></span>
- <span data-ttu-id="d35e0-141">Kuyruk yoklama mantığı ileti alma toplu işleme göre daha uygun maliyetli olabilir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-141">The queue polling logic could be more cost-effective, by batching message retrieval.</span></span> <span data-ttu-id="d35e0-142">Çağırmanızı her zaman [CloudQueue.GetMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.getmessageasync.aspx), işlem maliyeti yoktur.</span><span class="sxs-lookup"><span data-stu-id="d35e0-142">Every time you call [CloudQueue.GetMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.getmessageasync.aspx), there is a transaction cost.</span></span> <span data-ttu-id="d35e0-143">Bunun yerine, çağırabilirsiniz [CloudQueue.GetMessagesAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.getmessagesasync.aspx) (çoğul'ın unutmayın '), tek bir işlemde birden çok ileti alır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-143">Instead, you can call [CloudQueue.GetMessagesAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.getmessagesasync.aspx) (note the plural 's'), which gets multiple messages in a single transaction.</span></span> <span data-ttu-id="d35e0-144">Azure depolama kuyruklarına ilişkin işlem maliyetlerini çok düşük olduğundan maliyetleri üzerindeki etkiyi Çoğu senaryoda önemli değildir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-144">The transaction costs for Azure Storage Queues are very low, so the impact on costs is not substantial in most scenarios.</span></span>
- <span data-ttu-id="d35e0-145">Kuyruk ileti işleme kodunu sıkı bir döngüde çok çekirdekli sanal makineleri verimli bir şekilde kullanmaz CPU benzeşimi, neden olur.</span><span class="sxs-lookup"><span data-stu-id="d35e0-145">The tight loop in the queue message-processing code causes CPU affinity, which does not utilize multi-core VMs efficiently.</span></span> <span data-ttu-id="d35e0-146">Daha iyi bir tasarım, birden çok zaman uyumsuz görevleri paralel olarak çalıştırmak için görev paralelliği kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-146">A better design would use task parallelism to run several async tasks in parallel.</span></span>
- <span data-ttu-id="d35e0-147">Kuyruk ileti işleme yalnızca ilkel bir özel durum işleme yok.</span><span class="sxs-lookup"><span data-stu-id="d35e0-147">Queue message-processing has only rudimentary exception handling.</span></span> <span data-ttu-id="d35e0-148">Örneğin, kod işlemiyor [zehirli iletiler](https://msdn.microsoft.com/library/ms789028.aspx).</span><span class="sxs-lookup"><span data-stu-id="d35e0-148">For example, the code doesn't handle [poison messages](https://msdn.microsoft.com/library/ms789028.aspx).</span></span> <span data-ttu-id="d35e0-149">(Bir özel durum iletisi işleme neden olduğunda için hata günlüğüne ve iletiyi silmek için sahip olduğunuz veya çalışan rolü yeniden dener ve döngü süresiz olarak devam eder.)</span><span class="sxs-lookup"><span data-stu-id="d35e0-149">(When message processing causes an exception, you have to log the error and delete the message, or the worker role will try to process it again, and the loop will continue indefinitely.)</span></span>

### <a name="sql-queries-are-unbounded"></a><span data-ttu-id="d35e0-150">SQL sorguları sınırsız</span><span class="sxs-lookup"><span data-stu-id="d35e0-150">SQL queries are unbounded</span></span>

<span data-ttu-id="d35e0-151">Düzelt geçerli kod dizin sayfalarını sorgularında döndürebilir kaç satır sınır yerleştirir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-151">Current Fix It code places no limit on how many rows the queries for Index pages might return.</span></span> <span data-ttu-id="d35e0-152">Büyük miktarlarda görev veritabanına girilir, alınan sonuç listesi boyutu performans sorunlarına neden olabilecek.</span><span class="sxs-lookup"><span data-stu-id="d35e0-152">If a large volume of tasks is entered into the database, the size of the resulting lists received could cause performance issues.</span></span> <span data-ttu-id="d35e0-153">Çözüm, disk belleği uygulamaktır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-153">The solution is to implement paging.</span></span> <span data-ttu-id="d35e0-154">Bir örnek için bkz. [sıralama, filtreleme ve bir ASP.NET MVC uygulamasında Entity Framework ile sayfalama](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="d35e0-154">For an example, see [Sorting, Filtering, and Paging with the Entity Framework in an ASP.NET MVC Application](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application.md).</span></span>

### <a name="view-models-recommended"></a><span data-ttu-id="d35e0-155">Önerilen modelleri görüntüle</span><span class="sxs-lookup"><span data-stu-id="d35e0-155">View models recommended</span></span>

<span data-ttu-id="d35e0-156">Düzeltme uygulama FixItTask varlık sınıfı denetleyici ve görünüm arasında bilgi geçirmek için kullanır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-156">The Fix It app uses the FixItTask entity class to pass information between the controller and the view.</span></span> <span data-ttu-id="d35e0-157">Görünüm modelleri kullanmak iyi bir uygulamadır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-157">A best practice is to use view models.</span></span> <span data-ttu-id="d35e0-158">Etki alanı modeli (örneğin, FixItTask varlık sınıfı) bir görünüm modeli verilerini sunumu için tasarlanabilir veri kalıcılığı için gerekli geçici olarak tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-158">The domain model (e.g., the FixItTask entity class) is designed around what is needed for data persistence, while a view model can be designed for data presentation.</span></span> <span data-ttu-id="d35e0-159">Daha fazla bilgi için [12 ASP.NET MVC en iyi uygulamaları](http://codeclimber.net.nz/archive/2009/10/27/12-asp.net-mvc-best-practices.aspx).</span><span class="sxs-lookup"><span data-stu-id="d35e0-159">For more information, see [12 ASP.NET MVC Best Practices](http://codeclimber.net.nz/archive/2009/10/27/12-asp.net-mvc-best-practices.aspx).</span></span>

### <a name="secure-image-blob-recommended"></a><span data-ttu-id="d35e0-160">Önerilen güvenli görüntü blob'u</span><span class="sxs-lookup"><span data-stu-id="d35e0-160">Secure image blob recommended</span></span>

<span data-ttu-id="d35e0-161">Düzelt uygulama mağazaları genel URL bulur herkes görüntüleri erişebileceği anlamına gelir görüntüleri karşıya yüklendi.</span><span class="sxs-lookup"><span data-stu-id="d35e0-161">The Fix It app stores uploaded images as public, meaning that anyone who finds the URL can access the images.</span></span> <span data-ttu-id="d35e0-162">Görüntüleri yerine genel güvenli.</span><span class="sxs-lookup"><span data-stu-id="d35e0-162">The images could be secured instead of public.</span></span>

### <a name="no-powershell-automation-scripts-for-queues"></a><span data-ttu-id="d35e0-163">Kuyruklar için hiçbir PowerShell Otomasyon betikleri</span><span class="sxs-lookup"><span data-stu-id="d35e0-163">No PowerShell automation scripts for queues</span></span>

<span data-ttu-id="d35e0-164">Örnek PowerShell Otomasyon betikleri, yalnızca temel sürümü düzeltme tamamen Azure App Service Web Apps'te çalışan için yazılmıştır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-164">Sample PowerShell automation scripts were written only for the base version of Fix It that runs entirely in Azure App Service Web Apps.</span></span> <span data-ttu-id="d35e0-165">Biz ayarlama ve web uygulama ve kuyruk işlenmesi için gereken bulut hizmeti ortamı dağıtmak için betikler sağlamıyordu.</span><span class="sxs-lookup"><span data-stu-id="d35e0-165">We haven't provided scripts for setting up and deploying to the web app plus Cloud Service environment required for queue processing.</span></span>

### <a name="special-handling-for-html-codes-in-user-input"></a><span data-ttu-id="d35e0-166">Kullanıcı girişini HTML kodları için özel işleme</span><span class="sxs-lookup"><span data-stu-id="d35e0-166">Special handling for HTML codes in user input</span></span>

<span data-ttu-id="d35e0-167">ASP.NET, kullanıcı giriş metin kutularına betiği girerek siteler arası betik saldırıları kötü niyetli kullanıcılar çalışabilir birçok yolu otomatik olarak engeller.</span><span class="sxs-lookup"><span data-stu-id="d35e0-167">ASP.NET automatically prevents many ways in which malicious users might attempt cross-site scripting attacks by entering script in user input text boxes.</span></span> <span data-ttu-id="d35e0-168">Ve MVC `DisplayFor` görev görüntülemek için kullanılan yardımcı başlıklar ve tarayıcıya gönderir ve HTML olarak kodlar değerleri otomatik olarak notlar.</span><span class="sxs-lookup"><span data-stu-id="d35e0-168">And the MVC `DisplayFor` helper used to display task titles and notes automatically HTML-encodes values that it sends to the browser.</span></span> <span data-ttu-id="d35e0-169">Ancak bir üretim uygulamasında ek önlemler almak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d35e0-169">But in a production app you might want to take additional measures.</span></span> <span data-ttu-id="d35e0-170">Daha fazla bilgi için [ASP.NET'te doğrulama isteği](https://msdn.microsoft.com/library/hh882339.aspx).</span><span class="sxs-lookup"><span data-stu-id="d35e0-170">For more information, see [Request Validation in ASP.NET](https://msdn.microsoft.com/library/hh882339.aspx).</span></span>

<a id="bestpractices"></a>
## <a name="best-practices"></a><span data-ttu-id="d35e0-171">Önerilen uygulamalar</span><span class="sxs-lookup"><span data-stu-id="d35e0-171">Best practices</span></span>

<span data-ttu-id="d35e0-172">Kod incelemesi içinde bulunan ve düzeltme uygulamanın orijinal sürümünü test kaldıktan sonra düzeltilen bazı sorunlar aşağıda verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-172">Following are some issues that were fixed after being discovered in code review and testing of the original version of the Fix It app.</span></span> <span data-ttu-id="d35e0-173">Bazı bazılarını yalnızca belirli bir en iyi uygulama farkına varmadan değil özgün Kodlayıcı tarafından kaynaklanan kod hızlı bir şekilde yazılmış ve yayınlanan yazılım için hedeflenen değildi.</span><span class="sxs-lookup"><span data-stu-id="d35e0-173">Some were caused by the original coder not being aware of a particular best practice, some simply because the code was written quickly and wasn't intended for released software.</span></span> <span data-ttu-id="d35e0-174">Durumunda bu gözden geçirme sürecinden öğrendiğimiz bir şey sorunları burada listeleniyor ve sınama Ayrıca web uygulamaları geliştiren kişilere yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-174">We're listing the issues here in case there's something we learned from this review and testing that might be helpful to others who are also developing web apps.</span></span>

### <a name="dispose-the-database-repository"></a><span data-ttu-id="d35e0-175">Veritabanı havuzu dispose</span><span class="sxs-lookup"><span data-stu-id="d35e0-175">Dispose the database repository</span></span>

<span data-ttu-id="d35e0-176">`FixItTaskRepository` Sınıfı, varlık çerçevesi dispose gerekir `DbContext` örneği.</span><span class="sxs-lookup"><span data-stu-id="d35e0-176">The `FixItTaskRepository` class must dispose the Entity Framework `DbContext` instance.</span></span> <span data-ttu-id="d35e0-177">Bu uygulama tarafından yaptığımız `IDisposable` içinde `FixItTaskRepository` sınıfı:</span><span class="sxs-lookup"><span data-stu-id="d35e0-177">We did this by implementing `IDisposable` in the `FixItTaskRepository` class:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample1.cs)]

<span data-ttu-id="d35e0-178">AutoFac otomatik olarak dispose Not `FixItTaskRepository` örnek biz açıkça elden yapmak zorunda kalmazsınız.</span><span class="sxs-lookup"><span data-stu-id="d35e0-178">Note that AutoFac will automatically dispose the `FixItTaskRepository` instance, so we don't need to explicitly dispose it.</span></span>

<span data-ttu-id="d35e0-179">Kaldırmak için başka bir seçenektir `DbContext` üye değişkeninin `FixItTaskRepository`ve bunun yerine yerel bir oluşturma `DbContext` her depo yöntemi içinde değişken içine bir `using` deyimi.</span><span class="sxs-lookup"><span data-stu-id="d35e0-179">Another option is to remove the `DbContext` member variable from `FixItTaskRepository`, and instead create a local `DbContext` variable within each repository method, inside a `using` statement.</span></span> <span data-ttu-id="d35e0-180">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="d35e0-180">For example:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample2.cs)]

### <a name="register-singletons-as-such-with-di"></a><span data-ttu-id="d35e0-181">Teklileri DI, bu nedenle kaydedin.</span><span class="sxs-lookup"><span data-stu-id="d35e0-181">Register singletons as such with DI</span></span>

<span data-ttu-id="d35e0-182">Yalnızca bir örneğini beri `PhotoService` sınıfı ve `Logger` sınıfı gerekiyor, bu sınıflar olmalıdır [tek örnekleri için bağımlılık ekleme olarak kayıtlı](https://code.google.com/p/autofac/wiki/InstanceScope) içinde *DependenciesConfig.cs*:</span><span class="sxs-lookup"><span data-stu-id="d35e0-182">Since only one instance of the `PhotoService` class and `Logger` class is needed, these classes should be [registered as single instances for dependency injection](https://code.google.com/p/autofac/wiki/InstanceScope) in *DependenciesConfig.cs*:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample3.cs?highlight=1,3)]

### <a name="security-dont-show-error-details-to-users"></a><span data-ttu-id="d35e0-183">Güvenlik: Hata ayrıntıları, kullanıcılara gösterme</span><span class="sxs-lookup"><span data-stu-id="d35e0-183">Security: Don't show error details to users</span></span>

<span data-ttu-id="d35e0-184">Düzelt özgün uygulama genel hata sayfası ve veritabanı bağlantı hataları gibi bazı özel durumlar tarayıcıda görüntülenen bir tam yığın izlemesi neden olabilir, böylece yalnızca kullanıcı Arabirimi kadar tüm özel durumları Kabarcık izin vermedi.</span><span class="sxs-lookup"><span data-stu-id="d35e0-184">The original Fix It app didn't have a generic error page and just let all exceptions bubble up to the UI, so some exceptions such as database connection errors could result in a full stack trace being displayed to the browser.</span></span> <span data-ttu-id="d35e0-185">Ayrıntılı hata bilgileri kötü amaçlı kullanıcılar tarafından saldırıları bazen kolaylaştırabilir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-185">Detailed error information can sometimes facilitate attacks by malicious users.</span></span> <span data-ttu-id="d35e0-186">Özel durum ayrıntılarını ve hata ayrıntılarını içermez kullanıcıya bir hata sayfası görüntüleme çözümüdür.</span><span class="sxs-lookup"><span data-stu-id="d35e0-186">The solution is to log the exception details and display an error page to the user that doesn't include error details.</span></span> <span data-ttu-id="d35e0-187">Düzeltme uygulama zaten günlüğe kaydetme ve bir hata sayfası görüntüleme için ekledik `<customErrors mode=On>` Web.config dosyasında.</span><span class="sxs-lookup"><span data-stu-id="d35e0-187">The Fix It app was already logging, and in order to display an error page, we added `<customErrors mode=On>` in the Web.config file.</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample4.xml?highlight=2)]

<span data-ttu-id="d35e0-188">Varsayılan olarak bu neden *Views\Shared\Error.cshtml* hataları görüntülenecek.</span><span class="sxs-lookup"><span data-stu-id="d35e0-188">By default this causes *Views\Shared\Error.cshtml* to be displayed for errors.</span></span> <span data-ttu-id="d35e0-189">Özelleştirebileceğiniz *Error.cshtml* veya kendi hata sayfası görünümü oluşturma ve ekleme bir `defaultRedirect` özniteliği.</span><span class="sxs-lookup"><span data-stu-id="d35e0-189">You can customize *Error.cshtml* or create your own error page view and add a `defaultRedirect` attribute.</span></span> <span data-ttu-id="d35e0-190">Ayrıca, belirli hataları için farklı hata sayfaları belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d35e0-190">You can also specify different error pages for specific errors.</span></span>

### <a name="security-only-allow-a-task-to-be-edited-by-its-creator"></a><span data-ttu-id="d35e0-191">Güvenlik: yalnızca bir görev oluşturucusu tarafından düzenlenecek izin ver</span><span class="sxs-lookup"><span data-stu-id="d35e0-191">Security: only allow a task to be edited by its creator</span></span>

<span data-ttu-id="d35e0-192">Pano dizini sayfasında, yalnızca oturum açmış kullanıcı tarafından oluşturulan görevler gösterilmektedir, ancak kötü niyetli bir kullanıcı başka bir kullanıcının Görev Kimliğine sahip bir URL oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d35e0-192">The Dashboard Index page only shows tasks created by the logged-on user, but a malicious user could create a URL with an ID to another user's task.</span></span> <span data-ttu-id="d35e0-193">Kod olarak eklediğimiz *DashboardController.cs* bu durumda bir 404 döndürmek için:</span><span class="sxs-lookup"><span data-stu-id="d35e0-193">We added code in *DashboardController.cs* to return a 404 in that case:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample5.cs?highlight=9-14,24-29)]

### <a name="dont-swallow-exceptions"></a><span data-ttu-id="d35e0-194">Özel durumlar swallow yok</span><span class="sxs-lookup"><span data-stu-id="d35e0-194">Don't swallow exceptions</span></span>

<span data-ttu-id="d35e0-195">Düzelt özgün uygulamanın yalnızca bir SQL sorgudan sonuçlanan bir özel durum günlüğe kaydetme sonra null döndürdü:</span><span class="sxs-lookup"><span data-stu-id="d35e0-195">The original Fix It app just returned null after logging an exception that resulted from a SQL query:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample6.cs?highlight=4)]

<span data-ttu-id="d35e0-196">Bu, kullanıcıya sorgu başarılı oldu, ancak hiçbir satır döndürmedi. yalnızca gibi görünmesini hale getirir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-196">This would make it look to the user as if the query succeeded but just didn't return any rows.</span></span> <span data-ttu-id="d35e0-197">Yakalama ve günlük sonra özel durumu yeniden harekete geçirileceğini çözümüdür:</span><span class="sxs-lookup"><span data-stu-id="d35e0-197">Solution is to re-throw the exception after catching and logging:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample7.cs)]

### <a name="catch-all-exceptions-in-worker-roles"></a><span data-ttu-id="d35e0-198">Çalışan rolleri tüm özel durumları Yakala</span><span class="sxs-lookup"><span data-stu-id="d35e0-198">Catch all exceptions in worker roles</span></span>

<span data-ttu-id="d35e0-199">İşlenmemiş özel durumlar bir çalışan rolünde geri dönüştürülmesi VM neden olur, her şeyi sarmalamak istediğiniz şekilde bir try-catch bloğu içinde yapın ve tüm özel durumları işleme.</span><span class="sxs-lookup"><span data-stu-id="d35e0-199">Any unhandled exceptions in a worker role will cause the VM to be recycled, so you want to wrap everything you do in a try-catch block and handle all exceptions.</span></span>

### <a name="specify-length-for-string-properties-in-entity-classes"></a><span data-ttu-id="d35e0-200">Varlık sınıflarında dize özellikleri için uzunluğu belirtin</span><span class="sxs-lookup"><span data-stu-id="d35e0-200">Specify length for string properties in entity classes</span></span>

<span data-ttu-id="d35e0-201">Basit kod görüntülemek için düzeltme uygulama orijinal sürümünü alanlar için uzunluk FixItTask varlık belirtmediniz ve sonuç olarak, veritabanındaki varchar(max) olarak tanımlanan.</span><span class="sxs-lookup"><span data-stu-id="d35e0-201">In order to display simple code, the original version of the Fix It app didn't specify lengths for the fields of the FixItTask entity, and as a result they were defined as varchar(max) in the database.</span></span> <span data-ttu-id="d35e0-202">Sonuç olarak, kullanıcı Arabirimi, neredeyse her miktarda giriş kabul eder.</span><span class="sxs-lookup"><span data-stu-id="d35e0-202">As a result, the UI would accept almost any amount of input.</span></span> <span data-ttu-id="d35e0-203">Web sayfası ve sütun boyutu veritabanındaki kullanıcı için her ikisinin de geçerli belirten uzunlukları kümeleri sınırları girin:</span><span class="sxs-lookup"><span data-stu-id="d35e0-203">Specifying lengths sets limits that apply both to user input in the web page and column size in the database:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample8.cs?highlight=4,7,10,12,14)]

### <a name="mark-private-members-as-readonly-when-they-arent-expected-to-change"></a><span data-ttu-id="d35e0-204">Değiştirmek için beklenen olmayan yüklerken özel üyeler readonly olarak işaretle</span><span class="sxs-lookup"><span data-stu-id="d35e0-204">Mark private members as readonly when they aren't expected to change</span></span>

<span data-ttu-id="d35e0-205">Örneğin, `DashboardController` sınıfının bir örneğini `FixItTaskRepository` oluşturulur ve olarak tanımladığımız şekilde değiştirmek için beklenen değil [salt okunur](https://msdn.microsoft.com/library/acdd6hb7.aspx).</span><span class="sxs-lookup"><span data-stu-id="d35e0-205">For example, in the `DashboardController` class an instance of `FixItTaskRepository` is created and isn't expected to change, so we defined it as [readonly](https://msdn.microsoft.com/library/acdd6hb7.aspx).</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample9.cs?highlight=3)]

### <a name="use-listany-instead-of-listcount-gt-0"></a><span data-ttu-id="d35e0-206">Use list.Any() instead of list.Count() &gt; 0</span><span class="sxs-lookup"><span data-stu-id="d35e0-206">Use list.Any() instead of list.Count() &gt; 0</span></span>

<span data-ttu-id="d35e0-207">Önem verdiğiniz tüm, ister bir listedeki öğeler bir veya daha fazla belirtilen ölçütlere uyan kullanın [herhangi](https://msdn.microsoft.com/library/bb534972.aspx) yöntemi ölçütleri sığdırma bir öğe bulundu hemen sonra oysa döndürüldüğünden `Count` yöntemi her zaman sahip yinelemek her öğe arasında.</span><span class="sxs-lookup"><span data-stu-id="d35e0-207">If you all you care about is whether one or more items in a list fit the specified criteria, use the [Any](https://msdn.microsoft.com/library/bb534972.aspx) method, because it returns as soon as an item fitting the criteria is found, whereas the `Count` method always has to iterate through every item.</span></span> <span data-ttu-id="d35e0-208">Pano *Index.cshtml* dosya ilk olarak bu kodu sahipti:</span><span class="sxs-lookup"><span data-stu-id="d35e0-208">The Dashboard *Index.cshtml* file originally had this code:</span></span>

[!code-cshtml[Main](the-fix-it-sample-application/samples/sample10.cshtml)]

<span data-ttu-id="d35e0-209">Bunun için bunu değiştirdik:</span><span class="sxs-lookup"><span data-stu-id="d35e0-209">We changed it to this:</span></span>

[!code-cshtml[Main](the-fix-it-sample-application/samples/sample11.cshtml?highlight=1)]

### <a name="generate-urls-in-mvc-views-using-mvc-helpers"></a><span data-ttu-id="d35e0-210">MVC görünümleri MVC Yardımcıları kullanarak URL üretmek</span><span class="sxs-lookup"><span data-stu-id="d35e0-210">Generate URLs in MVC views using MVC helpers</span></span>

<span data-ttu-id="d35e0-211">İçin **bir düzeltme oluşturmak** düğmesi giriş sayfasındaki Düzelt uygulama sabit kodlanmış bağlayıcı bir öğe:</span><span class="sxs-lookup"><span data-stu-id="d35e0-211">For the **Create a Fix It** button on the home page, the Fix It app hard coded an anchor element:</span></span>

[!code-cshtml[Main](the-fix-it-sample-application/samples/sample12.cshtml)]

<span data-ttu-id="d35e0-212">Bunun gibi görünüm/eylem bağlantıları için bunu kullanmak en iyisidir [Url.Action](https://msdn.microsoft.com/library/system.web.mvc.urlhelper.action.aspx) HTML Yardımcısı, örneğin:</span><span class="sxs-lookup"><span data-stu-id="d35e0-212">For View/Action links like this it's better to use the [Url.Action](https://msdn.microsoft.com/library/system.web.mvc.urlhelper.action.aspx) HTML helper, for example:</span></span>

[!code-cshtml[Main](the-fix-it-sample-application/samples/sample13.cshtml)]

### <a name="use-taskdelay-instead-of-threadsleep-in-worker-role"></a><span data-ttu-id="d35e0-213">Task.Delay yerine net_thread_sleep çalışan rolünde kullanın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-213">Use Task.Delay instead of Thread.Sleep in worker role</span></span>

<span data-ttu-id="d35e0-214">Yeni Proje şablonu koyar `Thread.Sleep` örnekte gereksiz ek iş parçacığı üretme iş parçacığı havuzu bir çalışan rolü, ancak iş parçacığının Uyku neden kodu neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-214">The new-project template puts `Thread.Sleep` in the sample code for a worker role, but causing the thread to sleep can cause the thread pool to spawn additional unnecessary threads.</span></span> <span data-ttu-id="d35e0-215">Bunu kullanarak önlemek [Task.Delay](https://msdn.microsoft.com/library/hh139096.aspx) yerine.</span><span class="sxs-lookup"><span data-stu-id="d35e0-215">You can avoid that by using [Task.Delay](https://msdn.microsoft.com/library/hh139096.aspx) instead.</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample14.cs?highlight=11)]

### <a name="avoid-async-void"></a><span data-ttu-id="d35e0-216">Zaman uyumsuz void kaçının</span><span class="sxs-lookup"><span data-stu-id="d35e0-216">Avoid async void</span></span>

<span data-ttu-id="d35e0-217">Zaman uyumsuz bir yöntem bir değer döndürmesi gerekmez, iade bir `Task` türü yerine `void`.</span><span class="sxs-lookup"><span data-stu-id="d35e0-217">If an async method doesn't need to return a value, return a `Task` type rather than `void`.</span></span>

<span data-ttu-id="d35e0-218">Bu örnekte dandır `FixItQueueManager` sınıfı:</span><span class="sxs-lookup"><span data-stu-id="d35e0-218">This example is from the `FixItQueueManager` class:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample15.cs)]

<span data-ttu-id="d35e0-219">Kullanmanız gereken `async void` yalnızca üst düzey olay işleyicileri için.</span><span class="sxs-lookup"><span data-stu-id="d35e0-219">You should use `async void` only for top-level event handlers.</span></span> <span data-ttu-id="d35e0-220">Bir yöntem olarak tanımlarsanız `async void`, çağırana olamaz **await** yöntemi veya yöntemin oluşturduğu özel durumları yakalama.</span><span class="sxs-lookup"><span data-stu-id="d35e0-220">If you define a method as `async void`, the caller cannot **await** the method or catch any exceptions the method throws.</span></span> <span data-ttu-id="d35e0-221">Daha fazla bilgi için [iyi zaman uyumsuz programlama](https://msdn.microsoft.com/magazine/jj991977.aspx).</span><span class="sxs-lookup"><span data-stu-id="d35e0-221">For more information, see [Best Practices in Asynchronous Programming](https://msdn.microsoft.com/magazine/jj991977.aspx).</span></span>

### <a name="use-a-cancellation-token-to-break-from-worker-role-loop"></a><span data-ttu-id="d35e0-222">Çalışan rolü döngüden ayırmak için bir iptal belirteci kullanma</span><span class="sxs-lookup"><span data-stu-id="d35e0-222">Use a cancellation token to break from worker role loop</span></span>

<span data-ttu-id="d35e0-223">Genellikle, **çalıştırma** bir çalışan rolü yöntemi sonsuz bir döngü içeriyor.</span><span class="sxs-lookup"><span data-stu-id="d35e0-223">Typically, the **Run** method on a worker role contains an infinite loop.</span></span> <span data-ttu-id="d35e0-224">Çalışan rolü durdururken, [RoleEntryPoint.OnStop](https://msdn.microsoft.com/library/windowsazure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx) yöntemi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-224">When the worker role is stopping, the [RoleEntryPoint.OnStop](https://msdn.microsoft.com/library/windowsazure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx) method is called.</span></span> <span data-ttu-id="d35e0-225">İçinde yapılan işi iptal etmek için bu yöntem kullanmalısınız **çalıştırın** yöntemi ve çıkış gerçekleşecektir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-225">You should use this method to cancel the work that is being done inside the **Run** method and exit gracefully.</span></span> <span data-ttu-id="d35e0-226">Aksi takdirde, işlemin ortasında bir işlem sonlandırılacak.</span><span class="sxs-lookup"><span data-stu-id="d35e0-226">Otherwise, the process might be terminated in the middle of an operation.</span></span>

### <a name="opt-out-of-automatic-mime-sniffing-procedure"></a><span data-ttu-id="d35e0-227">Otomatik MIME algılaması yordamı dışında iyileştirilmiş</span><span class="sxs-lookup"><span data-stu-id="d35e0-227">Opt out of Automatic MIME Sniffing Procedure</span></span>

<span data-ttu-id="d35e0-228">Bazı durumlarda, Internet Explorer web sunucusu tarafından belirtilen türü farklı bir MIME türü bildirir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-228">In some cases, Internet Explorer reports a MIME type different than the type specified by the web server.</span></span> <span data-ttu-id="d35e0-229">Örneğin, Internet Explorer HTML HTTP yanıt üst bilgisi ile Content-Type teslim dosyasındaki içerik bulursa: metin/düz, Internet Explorer içeriğini HTML olarak işleneceğini belirler.</span><span class="sxs-lookup"><span data-stu-id="d35e0-229">For instance, if Internet Explorer finds HTML content in a file delivered with the HTTP response header Content-Type: text/plain, Internet Explorer determines that the content should be rendered as HTML.</span></span> <span data-ttu-id="d35e0-230">Ne yazık ki bu "MIME-algılaması" da güvenilmeyen içerik barındıran sunucular için güvenlik sorunlarına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-230">Unfortunately, this "MIME-sniffing" can also lead to security problems for servers hosting untrusted content.</span></span> <span data-ttu-id="d35e0-231">Bu sorunu gidermek için Internet Explorer 8 MIME türünü belirleme kodu bir dizi değişiklik getirmiştir ve uygulama geliştiricilerinin sağlayan [MIME algılaması dışında iyileştirilmiş](https://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx).</span><span class="sxs-lookup"><span data-stu-id="d35e0-231">To combat this problem, Internet Explorer 8 has made a number of changes to MIME-type determination code and allows application developers to [opt out of MIME-sniffing](https://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx).</span></span> <span data-ttu-id="d35e0-232">Aşağıdaki kod eklendi *Web.config* dosya.</span><span class="sxs-lookup"><span data-stu-id="d35e0-232">The following code was added to the *Web.config* file.</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample16.xml?highlight=2-7)]

### <a name="enable-bundling-and-minification"></a><span data-ttu-id="d35e0-233">Paketleme ve küçültme etkinleştir</span><span class="sxs-lookup"><span data-stu-id="d35e0-233">Enable bundling and minification</span></span>

<span data-ttu-id="d35e0-234">Visual Studio, yeni bir web projesi oluşturduğunda, paketleme ve küçültme JavaScript dosyalarının değil varsayılan olarak etkindir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-234">When Visual Studio creates a new web project, bundling and minification of JavaScript files is not enabled by default.</span></span> <span data-ttu-id="d35e0-235">Bir kod satırı BundleConfig.cs ekledik:</span><span class="sxs-lookup"><span data-stu-id="d35e0-235">We added a line of code in BundleConfig.cs:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample17.cs?highlight=9)]

### <a name="set-an-expiration-time-out-for-authentication-cookies"></a><span data-ttu-id="d35e0-236">Kimlik doğrulama tanımlama bilgilerinin bir sona erme zaman aşımını ayarlama</span><span class="sxs-lookup"><span data-stu-id="d35e0-236">Set an expiration time-out for authentication cookies</span></span>

<span data-ttu-id="d35e0-237">Varsayılan olarak, kimlik doğrulama tanımlama bilgisi iki hafta içinde süresi dolar.</span><span class="sxs-lookup"><span data-stu-id="d35e0-237">By default, authentication cookies expire in two weeks.</span></span> <span data-ttu-id="d35e0-238">Daha kısa bir süre daha güvenlidir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-238">A shorter time is more secure.</span></span> <span data-ttu-id="d35e0-239">Bu ayarı değiştirebilirsiniz *StartupAuth.cs*:</span><span class="sxs-lookup"><span data-stu-id="d35e0-239">You can change this setting in *StartupAuth.cs*:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample18.cs?highlight=4-5)]

<a id="run-in-vs"></a>
## <a name="how-to-run-the-app-from-visual-studio-on-your-local-computer"></a><span data-ttu-id="d35e0-240">Uygulamayı yerel bilgisayarınızda Visual Studio'dan çalıştırma</span><span class="sxs-lookup"><span data-stu-id="d35e0-240">How to run the app from Visual Studio on your local computer</span></span>

<span data-ttu-id="d35e0-241">Düzelt uygulamayı çalıştırmak için iki yolu vardır:</span><span class="sxs-lookup"><span data-stu-id="d35e0-241">There are two ways to run the Fix It app:</span></span>

- <span data-ttu-id="d35e0-242">Yeni görevleri doğrudan SQL veritabanına yazar temel uygulamayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-242">Run the base application that writes new tasks directly to the SQL database.</span></span>
- <span data-ttu-id="d35e0-243">Görevleri oluşturmak üzere bir kuyruk yanı sıra bir arka uç hizmetini kullanarak uygulamayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-243">Run the application using a queue plus a backend service to create tasks.</span></span> <span data-ttu-id="d35e0-244">Kuyruk düzeni bölümde açıklanan [kuyruk merkezli çalışma deseni](queue-centric-work-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="d35e0-244">The queue pattern is described in the chapter [Queue-Centric Work Pattern](queue-centric-work-pattern.md).</span></span>

<a id="runbase"></a>
### <a name="run-the-base-application"></a><span data-ttu-id="d35e0-245">Temel uygulamayı çalıştırın</span><span class="sxs-lookup"><span data-stu-id="d35e0-245">Run the base application</span></span>

1. <span data-ttu-id="d35e0-246">Yükleme [Visual Studio 2017](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=button+cta&utm_content=download+vs2017).</span><span class="sxs-lookup"><span data-stu-id="d35e0-246">Install [Visual Studio 2017](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=button+cta&utm_content=download+vs2017).</span></span>
2. <span data-ttu-id="d35e0-247">Yükleme [Visual Studio için .NET için Azure SDK](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="d35e0-247">Install the [Azure SDK for .NET for Visual Studio](https://azure.microsoft.com/downloads/).</span></span>
3. <span data-ttu-id="d35e0-248">.Zip dosyasından indirme [MSDN Kod Galerisi](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4).</span><span class="sxs-lookup"><span data-stu-id="d35e0-248">Download the .zip file from the [MSDN Code Gallery](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4).</span></span>
4. <span data-ttu-id="d35e0-249">Dosya Gezgini'nde, .zip dosyasını sağ tıklayın ve Özellikler'e tıklayın, sonra Özellikler penceresinde engelini Kaldır'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-249">In File Explorer, right-click the .zip file and click Properties, then in the Properties window click Unblock.</span></span>
5. <span data-ttu-id="d35e0-250">Dosyanın sıkıştırmasını açın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-250">Unzip the file.</span></span>
6. <span data-ttu-id="d35e0-251">Visual Studio'yu başlatmak .sln dosyasına çift tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-251">Double-click the .sln file to launch Visual Studio.</span></span>
7. <span data-ttu-id="d35e0-252">Gelen **Araçları** menüsünde tıklatın **NuGet Paket Yöneticisi**, ardından **Paket Yöneticisi Konsolu**.</span><span class="sxs-lookup"><span data-stu-id="d35e0-252">From the **Tools** menu, click **NuGet Package Manager**, then **Package Manager Console**.</span></span>
8. <span data-ttu-id="d35e0-253">Paket Yöneticisi Konsolu (PMC'de), geri yükleme'yi tıklatın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-253">In the Package Manager Console (PMC), click Restore.</span></span>
9. <span data-ttu-id="d35e0-254">Visual Studio'dan çıkın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-254">Exit Visual Studio.</span></span>
10. <span data-ttu-id="d35e0-255">Başlangıç [Azure storage öykünücüsü](/azure/storage/common/storage-use-emulator).</span><span class="sxs-lookup"><span data-stu-id="d35e0-255">Start the [Azure storage emulator](/azure/storage/common/storage-use-emulator).</span></span>
11. <span data-ttu-id="d35e0-256">Visual Studio'yu yeniden başlatın, çözüm dosyasını açmadan önceki adımda kapalı.</span><span class="sxs-lookup"><span data-stu-id="d35e0-256">Restart Visual Studio, opening the solution file you closed in the previous step.</span></span>
12. <span data-ttu-id="d35e0-257">Düzelt projeyi başlangıç projesi olarak ayarlandığından emin olun ve ardından projeyi çalıştırmak için CTRL + F5 tuşuna basın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-257">Make sure the FixIt project is set as the startup project, and then press CTRL+F5 to run the project.</span></span>

<a id="queueslocal"></a>
### <a name="run-the-application-with-queue-processing"></a><span data-ttu-id="d35e0-258">Kuyruk işleme ile uygulamayı çalıştırın</span><span class="sxs-lookup"><span data-stu-id="d35e0-258">Run the application with queue processing</span></span>

1. <span data-ttu-id="d35e0-259">İçin yönergeleri izleyin [temel uygulamayı çalıştırmak](#runbase), tarayıcıyı kapatın ve ardından Visual Studio'yu kapatın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-259">Follow the directions for [Run the base application](#runbase), and then close the browser and close Visual Studio.</span></span>
2. <span data-ttu-id="d35e0-260">Visual Studio'yu yönetici ayrıcalıklarıyla başlatın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-260">Start Visual Studio with administrator privileges.</span></span> <span data-ttu-id="d35e0-261">(Azure işlem öykünücüsü kullanarak ve yönetici ayrıcalıkları gerektirir.)</span><span class="sxs-lookup"><span data-stu-id="d35e0-261">(You'll be using the Azure compute emulator, and that requires administrator privileges.)</span></span>
3. <span data-ttu-id="d35e0-262">Uygulamada *Web.config* dosyası *MyFixIt* değerini değiştirebilir, proje (web projesi) `appSettings/UseQueues` "true":</span><span class="sxs-lookup"><span data-stu-id="d35e0-262">In the application *Web.config* file in the *MyFixIt* project (the web project), change the value of `appSettings/UseQueues` to "true":</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample19.cmd?highlight=3)]
4. <span data-ttu-id="d35e0-263">Varsa [Azure storage öykünücüsü](https://msdn.microsoft.com/library/windowsazure/hh403989.aspx) hala çalışıyor, olmadığından yeniden başlatın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-263">If the [Azure storage emulator](https://msdn.microsoft.com/library/windowsazure/hh403989.aspx) isn't still running, start it again.</span></span>
5. <span data-ttu-id="d35e0-264">Aynı anda Düzelt web projesini ve MyFixItCloudService projesini çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-264">Run the FixIt web project and the MyFixItCloudService project simultaneously.</span></span>

    <span data-ttu-id="d35e0-265">Visual Studio kullanarak:</span><span class="sxs-lookup"><span data-stu-id="d35e0-265">Using Visual Studio:</span></span>

   1. <span data-ttu-id="d35e0-266">Tuşuna **F5** Düzelt projeyi çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-266">Press **F5** to run the FixIt project.</span></span>
   2. <span data-ttu-id="d35e0-267">İçinde **Çözüm Gezgini**MyFixItCloudService projeye sağ tıklayın ve ardından **hata ayıklama** > **yeni örnek Başlat**.</span><span class="sxs-lookup"><span data-stu-id="d35e0-267">In **Solution Explorer**, right-click the MyFixItCloudService project, and then click **Debug** > **Start New Instance**.</span></span>

    <span data-ttu-id="d35e0-268">Web için Visual Studio 2013 Express kullanarak:</span><span class="sxs-lookup"><span data-stu-id="d35e0-268">Using Visual Studio 2013 Express for Web:</span></span>

   3. <span data-ttu-id="d35e0-269">Çözüm Gezgini'nde Düzelt çözüme sağ tıklayıp seçin **özellikleri**.</span><span class="sxs-lookup"><span data-stu-id="d35e0-269">In Solution Explorer, right-click the FixIt solution and select **Properties**.</span></span>
   4. <span data-ttu-id="d35e0-270">Seçin **birden fazla başlangıç projesi**.</span><span class="sxs-lookup"><span data-stu-id="d35e0-270">Select **Multiple Startup Projects**.</span></span>
   5. <span data-ttu-id="d35e0-271">İçinde **eylem** MyFixIt ve MyFixItCloudService, altındaki açılır listede seçin **Başlat**.</span><span class="sxs-lookup"><span data-stu-id="d35e0-271">In the **Action** dropdown list under MyFixIt and MyFixItCloudService, select **Start**.</span></span>
   6. <span data-ttu-id="d35e0-272">**Tamam**'ı tıklatın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-272">Click **OK**.</span></span>
   7. <span data-ttu-id="d35e0-273">Tuşuna **F5** iki projeyi de çalıştırmak için.</span><span class="sxs-lookup"><span data-stu-id="d35e0-273">Press **F5** to run both projects.</span></span>

      <span data-ttu-id="d35e0-274">MyFixItCloudService Projeyi çalıştırdığınızda, Visual Studio Azure işlem öykünücüsü başlatır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-274">When you run the MyFixItCloudService project, Visual Studio starts the Azure compute emulator.</span></span> <span data-ttu-id="d35e0-275">Güvenlik Duvarı'nı yapılandırmanıza bağlı olarak, güvenlik duvarı üzerinden öykünücü izin gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-275">Depending on your firewall configuration, you might need to allow the emulator through the firewall.</span></span>

<a id="deploybase"></a>
## <a name="how-to-deploy-the-base-app-to-azure-app-service-web-apps-by-using-the-windows-powershell-scripts"></a><span data-ttu-id="d35e0-276">Windows PowerShell komut dosyalarını kullanarak Azure App Service Web Apps için temel uygulama dağıtma</span><span class="sxs-lookup"><span data-stu-id="d35e0-276">How to deploy the base app to Azure App Service Web Apps by using the Windows PowerShell scripts</span></span>

<span data-ttu-id="d35e0-277">Göstermek için [her şeyi otomatikleştirin](automate-everything.md) deseni, düzeltme uygulama, azure'daki bir ortamı ayarlayın ve projeyi yeni ortama dağıtmak betiklerle sağlanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-277">To illustrate the [Automate Everything](automate-everything.md) pattern, the Fix It app is supplied with scripts that set up an environment in Azure and deploy the project to the new environment.</span></span> <span data-ttu-id="d35e0-278">Aşağıdaki yönergeler, komut dosyalarının nasıl kullanılacağı açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-278">The following instructions explain how to use the scripts.</span></span>

<span data-ttu-id="d35e0-279">Kuyrukları kullanarak olmadan Azure'da çalıştırmak istediğiniz ve kuyrukları ile yerel olarak çalıştırmak için değişiklikler, aşağıdaki yönergelere geçmeden önce false dön UseQueues appSetting değeri ayarlamak emin olun.</span><span class="sxs-lookup"><span data-stu-id="d35e0-279">If you want to run in Azure without using queues, and you made the changes to run locally with queues, make sure you set the UseQueues appSetting value back to false before proceeding with the following instructions.</span></span>

<span data-ttu-id="d35e0-280">Bu yönergeler zaten indirmiş ve Düzelt çözümü yerel olarak çalıştırın ve sahip olduğunuz bir Azure hesabı veya bir Azure aboneliğine sahip varsayar Yönetme yetkisine sahip.</span><span class="sxs-lookup"><span data-stu-id="d35e0-280">These instructions assume you have already downloaded and run the Fix It solution locally, and that you have an Azure account or have an Azure subscription that you are authorized to manage.</span></span>

1. <span data-ttu-id="d35e0-281">Yükleme **Azure PowerShell** Konsolu.</span><span class="sxs-lookup"><span data-stu-id="d35e0-281">Install the **Azure PowerShell** console.</span></span> <span data-ttu-id="d35e0-282">Yönergeler için [Azure PowerShell'i yükleme ve yapılandırma işlemini](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.3.1).</span><span class="sxs-lookup"><span data-stu-id="d35e0-282">For instructions, see [How to install and configure Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.3.1).</span></span>

    <span data-ttu-id="d35e0-283">Bu özelleştirilmiş konsol, Azure aboneliğinizle çalışacak şekilde yapılandırılmıştır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-283">This customized console is configured to work with your Azure subscription.</span></span> <span data-ttu-id="d35e0-284">Azure Modülü yüklü *Program dosyaları* directory ve Azure PowerShell konsolunu her kullanımı hakkında otomatik olarak içeri aktarılır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-284">The Azure module is installed in the *Program Files* directory and is automatically imported on every use of the Azure PowerShell console.</span></span>

    <span data-ttu-id="d35e0-285">Windows PowerShell ISE'yi gibi farklı bir konak programında çalışmayı tercih ederseniz kullandığınızdan emin olun [Import-Module](https://go.microsoft.com/fwlink/?LinkID=141553) cmdlet'ini Azure modülünü içeri aktarın veya otomatik modül içeri tetiklemek için Azure modülünde bir komut kullanın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-285">If you prefer to work in a different host program, such as Windows PowerShell ISE, be sure to use the [Import-Module](https://go.microsoft.com/fwlink/?LinkID=141553) cmdlet to import the Azure module or use a command in the Azure module to trigger automatic importing of the module.</span></span>
2. <span data-ttu-id="d35e0-286">Azure PowerShell ile başlatma **yönetici olarak çalıştır** seçeneği.</span><span class="sxs-lookup"><span data-stu-id="d35e0-286">Start Azure PowerShell with the **Run as administrator** option.</span></span>
3. <span data-ttu-id="d35e0-287">Çalıştırma [Set-ExecutionPolicy](https://go.microsoft.com/fwlink/p/?linkid=293941) Azure PowerShell yürütme ilkesini ayarlamak için cmdlet `RemoteSigned`.</span><span class="sxs-lookup"><span data-stu-id="d35e0-287">Run the [Set-ExecutionPolicy](https://go.microsoft.com/fwlink/p/?linkid=293941) cmdlet to set the Azure PowerShell execution policy to `RemoteSigned`.</span></span> <span data-ttu-id="d35e0-288">Girin **Y** (Evet için) ilke değişikliğinin tamamlanması.</span><span class="sxs-lookup"><span data-stu-id="d35e0-288">Enter **Y** (for Yes) to complete the policy change.</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample20.cmd)]

    <span data-ttu-id="d35e0-289">Bu ayar, dijital olarak imzalı olmayan yerel betikleri çalıştırmanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="d35e0-289">This setting enables you to run local scripts that aren't digitally signed.</span></span> <span data-ttu-id="d35e0-290">(De yürütme ilkesi ayarlayabilirsiniz `Unrestricted`hangi engellemeyi kaldırma adımı daha sonra gereksinimini ortadan, ancak güvenlik nedeniyle önerilmez.)</span><span class="sxs-lookup"><span data-stu-id="d35e0-290">(You can also set the execution policy to `Unrestricted`, which would eliminate the need for the unblock step later, but this is not recommended for security reasons.)</span></span>
4. <span data-ttu-id="d35e0-291">Çalıştırma `Add-AzureAccount` hesabınızın kimlik bilgileriyle PowerShell cmdlet'ini.</span><span class="sxs-lookup"><span data-stu-id="d35e0-291">Run the `Add-AzureAccount` cmdlet to set up PowerShell with credentials for your account.</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample21.cmd)]

    <span data-ttu-id="d35e0-292">Bu kimlik bilgilerinin bir süre sonra süresi dolar ve yeniden çalıştırmak sahip olduğunuz `Add-AzureAccount` cmdlet'i.</span><span class="sxs-lookup"><span data-stu-id="d35e0-292">These credentials expire after a period of time and you have to re-run the `Add-AzureAccount` cmdlet.</span></span> <span data-ttu-id="d35e0-293">Bu e-kitap yazılmış gibi kimlik bilgilerinin süresi sona ermeden önce zaman sınırını 12 saati geçmez.</span><span class="sxs-lookup"><span data-stu-id="d35e0-293">As this e-book is being written, the time limit before credentials expire is 12 hours.</span></span>
5. <span data-ttu-id="d35e0-294">Birden fazla aboneliğiniz varsa, test ortamında oluşturmak istediğiniz aboneliği belirtmek için Select-AzureSubscription cmdlet'ini kullanın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-294">If you have multiple subscriptions, use the Select-AzureSubscription cmdlet to specify the subscription you want to create the test environment in.</span></span>
6. <span data-ttu-id="d35e0-295">Aynı Azure aboneliği için yönetim sertifikası kullanarak içeri `Get-AzurePublishSettingsFile` ve `Import-AzurePublishSettingsFile` cmdlet'leri.</span><span class="sxs-lookup"><span data-stu-id="d35e0-295">Import a management certificate for the same Azure subscription by using the `Get-AzurePublishSettingsFile` and `Import-AzurePublishSettingsFile` cmdlets.</span></span> <span data-ttu-id="d35e0-296">Bir sertifika dosyası birinci bu cmdlet'lerin indirir ve ikinci bir almak için bu dosyanın konumunu belirtin.</span><span class="sxs-lookup"><span data-stu-id="d35e0-296">The first of these cmdlets downloads a certificate file, and in the second one you specify the location of that file in order to import it.</span></span> > [!IMPORTANT]
   > <span data-ttu-id="d35e0-297">İndirilen dosyayı güvenli bir yerde saklayın veya bu ile işiniz bittiğinde, Azure hizmetlerinizi yönetmek için kullanılan bir sertifika içerdiğinden silin.</span><span class="sxs-lookup"><span data-stu-id="d35e0-297">Keep the downloaded file in a safe location or delete it when you're done with it, because it contains a certificate that can be used to manage your Azure services.</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample22.cmd)]

    <span data-ttu-id="d35e0-298">Sertifika kullanılır SQL veritabanı sunucusunda bir güvenlik duvarı kuralını ayarlamak için geliştirme makinenin IP adresi algılar bir REST API çağrısı.</span><span class="sxs-lookup"><span data-stu-id="d35e0-298">The certificate is used for a REST API call that detects the development machine's IP address in order to set a firewall rule on the SQL Database server.</span></span>
7. <span data-ttu-id="d35e0-299">Çalıştırma [Set-Location](https://go.microsoft.com/fwlink/p/?linkid=293912) cmdlet (diğer adlar `cd`, `chdir`, ve `sl`) komut dosyaları içeren dizine gidin.</span><span class="sxs-lookup"><span data-stu-id="d35e0-299">Run the [Set-Location](https://go.microsoft.com/fwlink/p/?linkid=293912) cmdlet (aliases are `cd`, `chdir`, and `sl`) to navigate to the directory that contains the scripts.</span></span> <span data-ttu-id="d35e0-300">(Bulunan *Otomasyon* Düzelt Çözüm klasörü klasöründe.) Herhangi bir dizin adları boşluk içeriyorsa, yolu tırnak işaretleri içine alın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-300">(They're located in the *Automation* folder in the Fix It solution folder.) Put the path in quotes if any of the directory names contain spaces.</span></span> <span data-ttu-id="d35e0-301">Örneğin, gitmek için `c:\Sample Apps\FixIt\Automation` dizin şu komutu yazabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="d35e0-301">For example, to navigate to the `c:\Sample Apps\FixIt\Automation` directory you could enter the following command:</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample23.cmd)]
8. <span data-ttu-id="d35e0-302">Bu komut dosyalarını çalıştırmak Windows PowerShell izin vermek üzere [Engellemeyi Kaldır-dosya](https://go.microsoft.com/fwlink/p/?linkid=294021) cmdlet'i.</span><span class="sxs-lookup"><span data-stu-id="d35e0-302">To allow Windows PowerShell to run these scripts, use the [Unblock-File](https://go.microsoft.com/fwlink/p/?linkid=294021) cmdlet.</span></span> <span data-ttu-id="d35e0-303">(Internet'ten karşıdan yüklendiği için betikler engellenir.)</span><span class="sxs-lookup"><span data-stu-id="d35e0-303">(The scripts are blocked because they were downloaded from the Internet.)</span></span>

    > [!WARNING]
    > <span data-ttu-id="d35e0-304">Güvenlik - çalıştırmadan önce `Unblock-File` her betik veya yürütülebilir dosya, dosyasını Not Defteri'nde açın, komutları inceleyin ve bunlar tüm kötü amaçlı kod içerip içermediğini doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-304">Security - Before running `Unblock-File` on any script or executable file, open the file in Notepad, examine the commands, and verify that they do not contain any malicious code.</span></span>

    <span data-ttu-id="d35e0-305">Örneğin, aşağıdaki çalıştırmalar komut `Unblock-File` cmdlet'ini geçerli dizindeki tüm betikler.</span><span class="sxs-lookup"><span data-stu-id="d35e0-305">For example, the following command runs the `Unblock-File` cmdlet on all scripts in the current directory.</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample24.cmd)]
9. <span data-ttu-id="d35e0-306">Web uygulaması için temel (kuyruklar işleme) oluşturmak için uygulama düzeltmek için ortam oluşturma betiği çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-306">To create the web app for the base (no queues processing) Fix It app, run the environment creation script.</span></span>

    <span data-ttu-id="d35e0-307">Gerekli `Name` parametresi veritabanı adını belirtir ve betiğin oluşturduğu depolama hesabı için de kullanılır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-307">The required `Name` parameter specifies the name of the database and is also used for the storage account that the script creates.</span></span> <span data-ttu-id="d35e0-308">Ad azurewebsites.net etki alanı içinde genel olarak benzersiz olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-308">The name must be globally unique within the azurewebsites.net domain.</span></span> <span data-ttu-id="d35e0-309">Düzelt veya Test gibi (veya hatta fixitdemo örnekte olduğu gibi), benzersiz olmayan bir ad belirtirseniz `New-AzureWebsite` cmdlet'i bir iç bir çakışma raporların hata ile başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="d35e0-309">If you specify a name that is not unique, like Fixit or Test (or even as in the example, fixitdemo), the `New-AzureWebsite` cmdlet fails with an Internal Error that reports a conflict.</span></span> <span data-ttu-id="d35e0-310">Betik adı tamamen küçük harflerden oluşan web uygulamaları, depolama hesapları ve veritabanları için ad gereksinimleri ile uyum sağlamak için dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="d35e0-310">The script converts the name to all lower-case to comply with name requirements for web apps, storage accounts, and databases.</span></span>

    <span data-ttu-id="d35e0-311">Gerekli `SqlDatabasePassword` parametresi, SQL veritabanı için oluşturulacak yönetici hesabının parolasını belirtir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-311">The required `SqlDatabasePassword` parameter specifies the password for the admin account that will be created for SQL Database.</span></span> <span data-ttu-id="d35e0-312">Özel XML karakterlerinden parola eklemeyin (&amp; &lt; &gt; ;).</span><span class="sxs-lookup"><span data-stu-id="d35e0-312">Don't include special XML characters in the password (&amp; &lt; &gt; ;).</span></span> <span data-ttu-id="d35e0-313">Bu komut dosyalarının yazıldığı, bir kısıtlaması değil Azure yolu kısıtlamasıdır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-313">This is a limitation of the way the scripts were written, not a limitation of Azure.</span></span>

    <span data-ttu-id="d35e0-314">Örneğin, "fixitdemo" adlı bir web uygulaması oluşturma ve bir SQL Server Yönetici parolasını "Passw0rd1" kullanmak istiyorsanız, aşağıdaki komutu girebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="d35e0-314">For example, if you want to create a web app named "fixitdemo" and use a SQL Server administrator password of "Passw0rd1", you could enter the following command:</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample25.cmd)]

    <span data-ttu-id="d35e0-315">Bu ad azurewebsites.net etki alanında benzersiz olması gerekir ve parola, parola karmaşıklığını SQL veritabanı gereksinimlerini karşılaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-315">The name must be unique in the azurewebsites.net domain, and the password must meet SQL Database requirements for password complexity.</span></span> <span data-ttu-id="d35e0-316">(Örnek Passw0rd1 gereksinimlerini karşılamıyor.)</span><span class="sxs-lookup"><span data-stu-id="d35e0-316">(The example Passw0rd1 does meet the requirements.)</span></span>

    <span data-ttu-id="d35e0-317">Komutu ile başlayıp başlamadığını Not ". \".</span><span class="sxs-lookup"><span data-stu-id="d35e0-317">Note that the command begins with ".\".</span></span> <span data-ttu-id="d35e0-318">Kötü amaçlı betikler yürütülmesini önlemeye yardımcı olmak için bir komut çalıştırdığınızda betik dosyasının tam yolunu sağlamanız Windows PowerShell gerektirir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-318">To help prevent malicious execution of scripts, Windows PowerShell requires that you provide the fully qualified path to the script file when you run a script.</span></span> <span data-ttu-id="d35e0-319">Bir nokta geçerli dizini belirtmek için kullanabilirsiniz (".\") veya tam yolunu sağlayın:</span><span class="sxs-lookup"><span data-stu-id="d35e0-319">You can use a dot to indicate the current directory (".\") or provide the fully qualified path, such as:</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample26.cmd)]

    <span data-ttu-id="d35e0-320">Komut dosyası hakkında daha fazla bilgi için `Get-Help` cmdlet'i.</span><span class="sxs-lookup"><span data-stu-id="d35e0-320">For more information about the script, use the `Get-Help` cmdlet.</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample27.cmd)]

    <span data-ttu-id="d35e0-321">Kullanabileceğiniz `Detailed`, `Full`, `Parameters`, ve `Examples` döndürülen Yardım filtrelemek için Get-Help cmdlet parametreleri.</span><span class="sxs-lookup"><span data-stu-id="d35e0-321">You can use the `Detailed`, `Full`, `Parameters`, and `Examples` parameters of the Get-Help cmdlet to filter the help that is returned.</span></span>

    <span data-ttu-id="d35e0-322">Betik başarısız olursa veya hataları gibi oluşturur, "New-AzureWebsite: Set-AzureSubscription ve Select-AzureSubscription ilk olarak, çağrı"Azure PowerShell yapılandırması tamamlandı.</span><span class="sxs-lookup"><span data-stu-id="d35e0-322">If the script fails or generates errors, such as "New-AzureWebsite : Call Set-AzureSubscription and Select-AzureSubscription first," you might not have completed the configuration of Azure PowerShell.</span></span>

    <span data-ttu-id="d35e0-323">Betik bittikten sonra Azure Yönetim Portalı gösterildiği gibi oluşturulmuş olan kaynakları görmek için kullanabileceğiniz [her şeyi otomatikleştirin](automate-everything.md) bölüm.</span><span class="sxs-lookup"><span data-stu-id="d35e0-323">After the script finishes, you can use the Azure Management Portal to see the resources that were created, as shown in the [Automate Everything](automate-everything.md) chapter.</span></span>
10. <span data-ttu-id="d35e0-324">Düzelt proje için yeni Azure ortamına dağıtmak için kullanın *AzureWebsite.ps1* betiği.</span><span class="sxs-lookup"><span data-stu-id="d35e0-324">To deploy the FixIt project to the new Azure environment, use the *AzureWebsite.ps1* script.</span></span> <span data-ttu-id="d35e0-325">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="d35e0-325">For example:</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample28.cmd)]

    <span data-ttu-id="d35e0-326">Dağıtım tamamlandığında, onunla düzeltme Azure'da çalıştırılan tarayıcı açılır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-326">When deployment is done, the browser opens with Fix It running in Azure.</span></span>

<a id="troubleshooting"></a>
## <a name="troubleshooting-the-windows-powershell-scripts"></a><span data-ttu-id="d35e0-327">Windows PowerShell komut dosyaları sorunlarını giderme</span><span class="sxs-lookup"><span data-stu-id="d35e0-327">Troubleshooting the Windows PowerShell scripts</span></span>

<span data-ttu-id="d35e0-328">Bu betikler çalışırken karşılaşılan en yaygın hataları izinleri ilgilidir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-328">The most common errors encountered when running these scripts are related to permissions.</span></span> <span data-ttu-id="d35e0-329">Emin olun `Add-AzureAccount` ve `Import-AzurePublishSettingsFile` başarılı ve aynı Azure aboneliği için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="d35e0-329">Make sure that `Add-AzureAccount` and `Import-AzurePublishSettingsFile` were successful and that you used them for the same Azure subscription.</span></span> <span data-ttu-id="d35e0-330">Bile `Add-AzureAccount` olan başarılı, yeniden çalıştırmak sahip olabilir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-330">Even if `Add-AzureAccount` was successful you might have to run it again.</span></span> <span data-ttu-id="d35e0-331">Tarafından eklenen izinleri `Add-AzureAccount` 12 saat içinde süresi dolacak.</span><span class="sxs-lookup"><span data-stu-id="d35e0-331">The permissions added by `Add-AzureAccount` expire in 12 hours.</span></span>

### <a name="object-reference-not-set-to-an-instance-of-an-object"></a><span data-ttu-id="d35e0-332">Nesne başvurusu bir nesnenin örneğine ayarlı değil.</span><span class="sxs-lookup"><span data-stu-id="d35e0-332">Object reference not set to an instance of an object.</span></span>

<span data-ttu-id="d35e0-333">Betiği Çalıştır "Windows PowerShell bir nesneye (Bu, bir null başvurusu özel durumu) işlem bulunamıyor anlamına gelir, bir nesnenin örneğine ayarlı değil nesne başvurusu" gibi hatalar, döndürürse `Add-AzureAccount` cmdlet'i ve komut dosyasını yeniden deneyin.</span><span class="sxs-lookup"><span data-stu-id="d35e0-333">If the script returns errors, such as "Object reference not set to an instance of an object," which means that Windows PowerShell can't find an object to process (this is a null reference exception), run the `Add-AzureAccount` cmdlet and try the script again.</span></span>

[!code-console[Main](the-fix-it-sample-application/samples/sample29.cmd)]

### <a name="internalerror-the-server-encountered-an-internal-error"></a><span data-ttu-id="d35e0-334">Internalerror: Sunucu bir iç hatayla karşılaştı.</span><span class="sxs-lookup"><span data-stu-id="d35e0-334">InternalError: The server encountered an internal error.</span></span>

<span data-ttu-id="d35e0-335">`New-AzureWebsite` Ad azurewebsites.net etki alanında benzersiz değilse cmdlet bir iç hata döndürür.</span><span class="sxs-lookup"><span data-stu-id="d35e0-335">The `New-AzureWebsite` cmdlet returns an internal error when the name is not unique in the azurewebsites.net domain.</span></span> <span data-ttu-id="d35e0-336">Hatayı gidermek için Name parametresinde adı için farklı bir değer kullanın *yeni AzureWebsiteEnv.ps1*.</span><span class="sxs-lookup"><span data-stu-id="d35e0-336">To resolve the error, use a different value for the name, which is in the Name parameter of *New-AzureWebsiteEnv.ps1*.</span></span>

[!code-console[Main](the-fix-it-sample-application/samples/sample30.cmd)]

### <a name="restarting-the-script"></a><span data-ttu-id="d35e0-337">Betiği yeniden başlatılıyor</span><span class="sxs-lookup"><span data-stu-id="d35e0-337">Restarting the script</span></span>

<span data-ttu-id="d35e0-338">Yeniden başlatmanız gerekirse *yeni AzureWebsiteEnv.ps1* betik "Betik tamamlandı" iletisi yazdırmadan önce başarısız olduğundan, daha önce oluşturduğunuz betiğin durduruldu kaynaklarını silmek isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d35e0-338">If you need to restart the *New-AzureWebsiteEnv.ps1* script because it failed before it printed the "Script is complete" message, you might want to delete resources that the script created before it stopped.</span></span> <span data-ttu-id="d35e0-339">Örneğin, ContosoFixItDemo web uygulaması ve komut dosyasını aynı adla yeniden çalıştırın. komut dosyası zaten oluşturduysanız, betik adının kullanımda olduğu için başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="d35e0-339">For example, if the script already created the ContosoFixItDemo web app and you run the script again with the same name, the script will fail because the name is in use.</span></span>

<span data-ttu-id="d35e0-340">Hangi kaynakların durdurulmadan önce oluşturulan betik belirlemek için aşağıdaki cmdlet'leri kullanın:</span><span class="sxs-lookup"><span data-stu-id="d35e0-340">To determine which resources the script created before it stopped, use the following cmdlets:</span></span>

- `Get-AzureWebsite`
- `Get-AzureSqlDatabaseServer`
- <span data-ttu-id="d35e0-341">`Get-AzureSqlDatabase`: Bu cmdlet'i çalıştırmak için veritabanı sunucusu adını kanal oluşturarak `Get-AzureSqlDatabase`:   `Get-AzureSqlDatabaseServer | Get-AzureSqlDatabase.`</span><span class="sxs-lookup"><span data-stu-id="d35e0-341">`Get-AzureSqlDatabase`: To run this cmdlet, pipe the database server name to `Get-AzureSqlDatabase`:   `Get-AzureSqlDatabaseServer | Get-AzureSqlDatabase.`</span></span>

<span data-ttu-id="d35e0-342">Bu kaynakları silmek için aşağıdaki komutları kullanın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-342">To delete these resources, use the following commands.</span></span> <span data-ttu-id="d35e0-343">Veritabanı sunucusu silerseniz, otomatik olarak sunucuyla ilişkili veritabanlarını silmeniz gerektiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-343">Note that if you delete the database server, you automatically delete the databases associated with the server.</span></span>

- `Get-AzureWebsite -Name <WebsiteName> | Remove-AzureWebsite`
- `Get-AzureSqlDatabase -Name <DatabaseName> -ServerName <DatabaseServerName> | Remove-SqlAzureDatabase`
- `Get-AzureSqlDatabaseServer | Remove-AzureSqlDatabaseServer`

<a id="deployqueues"></a>
## <a name="how-to-deploy-the-app-with-queue-processing-to-azure-app-service-web-apps-and-an-azure-cloud-service"></a><span data-ttu-id="d35e0-344">Azure App Service Web Apps ve Azure bulut hizmeti için işleme sırası ile uygulama dağıtma</span><span class="sxs-lookup"><span data-stu-id="d35e0-344">How to deploy the app with queue processing to Azure App Service Web Apps and an Azure Cloud Service</span></span>

<span data-ttu-id="d35e0-345">Kuyruklar etkinleştirmek için MyFixIt\Web.config dosyasına aşağıdaki değişikliği yapın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-345">To enable queues, make the following change in the MyFixIt\Web.config file.</span></span> <span data-ttu-id="d35e0-346">Altında `appSettings`, değiştirin `UseQueues` "true":</span><span class="sxs-lookup"><span data-stu-id="d35e0-346">Under `appSettings`, change the value of `UseQueues` to "true":</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample31.xml)]

<span data-ttu-id="d35e0-347">Daha sonra açıklandığı MVC uygulamasını Azure App Service'te bir web uygulamasına dağıtma [önceki](#deploybase).</span><span class="sxs-lookup"><span data-stu-id="d35e0-347">Then deploy the MVC application to an web app in Azure App Service, as described [earlier](#deploybase).</span></span>

<span data-ttu-id="d35e0-348">Ardından, yeni bir Azure bulut hizmeti oluşturun.</span><span class="sxs-lookup"><span data-stu-id="d35e0-348">Next, create a new Azure cloud service.</span></span> <span data-ttu-id="d35e0-349">Düzelt uygulamayla dahil betikleri oluşturamadı veya bunun için Azure portalını kullanmanız gerekir böylece bulut hizmeti dağıtın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-349">The scripts included with the Fix It app do not create or deploy the cloud service, so you must use Azure portal for this.</span></span> <span data-ttu-id="d35e0-350">Portalında **yeni** -- **işlem** – **bulut hizmeti** -- **hızlı Oluştur**ve ardından bir URL girin ve veri merkezi konumu.</span><span class="sxs-lookup"><span data-stu-id="d35e0-350">In the portal, click **New** -- **Compute** – **Cloud Service** -- **Quick Create**, and then enter a URL and a data center location.</span></span> <span data-ttu-id="d35e0-351">Web uygulaması dağıtıldığı aynı veri merkezinde kullanın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-351">Use the same data center where you deployed the web app.</span></span>

![](the-fix-it-sample-application/_static/image1.png)

<span data-ttu-id="d35e0-352">Bulut hizmeti dağıtmadan önce bazı yapılandırma dosyalarını güncelleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="d35e0-352">Before you can deploy the cloud service, you need to update some of the configuration files.</span></span>

<span data-ttu-id="d35e0-353">MyFixIt.WorkerRole\app.config içinde altında `connectionStrings`, değiştirin `appdb` SQL veritabanı için gerçek bağlantı dizesiyle bağlantı dizesi.</span><span class="sxs-lookup"><span data-stu-id="d35e0-353">In MyFixIt.WorkerRole\app.config, under `connectionStrings`, replace the value of the `appdb` connection string with the actual connection string for the SQL Database.</span></span> <span data-ttu-id="d35e0-354">Bağlantı dizesini portaldan alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d35e0-354">You can get the connection string from the portal.</span></span> <span data-ttu-id="d35e0-355">Portalında **SQL veritabanları** - **appdb** - **görünümü SQL veritabanı bağlantı dizelerini ADO .net, ODBC, PHP ve JDBC**.</span><span class="sxs-lookup"><span data-stu-id="d35e0-355">In the portal, click **SQL Databases** - **appdb** - **View SQL Database connection strings for ADO .Net, ODBC, PHP, and JDBC**.</span></span> <span data-ttu-id="d35e0-356">ADO.NET bağlantı dizesini kopyalayın ve değeri app.config dosyasına yapıştırın.</span><span class="sxs-lookup"><span data-stu-id="d35e0-356">Copy the ADO.NET connection string and paste the value into the app.config file.</span></span> <span data-ttu-id="d35e0-357">Değiştir "{,\_parola\_burada}" veritabanı parolanızla.</span><span class="sxs-lookup"><span data-stu-id="d35e0-357">Replace "{your\_password\_here}" with your database password.</span></span> <span data-ttu-id="d35e0-358">(MVC uygulaması dağıtmak için betikler kullandığınız varsayılarak, veritabanı Parolada belirtilen `SqlDatabasePassword` parametresi komut dosyası.)</span><span class="sxs-lookup"><span data-stu-id="d35e0-358">(Assuming you used the scripts to deploy the MVC app, you specified the database password in the `SqlDatabasePassword` script parameter.)</span></span>

<span data-ttu-id="d35e0-359">Sonuç aşağıdaki gibi görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="d35e0-359">The result should look like the following:</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample32.xml)]

<span data-ttu-id="d35e0-360">Aynı MyFixIt.WorkerRole\app.config dosyada altında `appSettings`, Azure depolama hesabı için iki yer tutucu değerlerini değiştirin.</span><span class="sxs-lookup"><span data-stu-id="d35e0-360">In the same MyFixIt.WorkerRole\app.config file, under `appSettings`, replace the two placeholder values for the Azure storage account.</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample33.xml?highlight=2-3)]

<span data-ttu-id="d35e0-361">Erişim anahtarı portaldan alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d35e0-361">You can get the access key from the portal.</span></span> <span data-ttu-id="d35e0-362">Bkz: [depolama hesaplarını yönetme](https://docs.microsoft.com/azure/storage/common/storage-create-storage-account).</span><span class="sxs-lookup"><span data-stu-id="d35e0-362">See [How To Manage Storage Accounts](https://docs.microsoft.com/azure/storage/common/storage-create-storage-account).</span></span>

<span data-ttu-id="d35e0-363">MyFixItCloudService\ServiceConfiguration.Cloud.cscfg Azure depolama hesabı için aynı iki yer tutucu değeri değiştirin.</span><span class="sxs-lookup"><span data-stu-id="d35e0-363">In MyFixItCloudService\ServiceConfiguration.Cloud.cscfg, replace the same two placeholders values for the Azure storage account.</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample34.xml?highlight=3)]

<span data-ttu-id="d35e0-364">Bulut hizmeti dağıtmak hazırsınız.</span><span class="sxs-lookup"><span data-stu-id="d35e0-364">Now you are ready to deploy the cloud service.</span></span> <span data-ttu-id="d35e0-365">Çözümü keşfedin, MyFixItCloudService projeye sağ tıklayın ve seçin **Yayımla**.</span><span class="sxs-lookup"><span data-stu-id="d35e0-365">In Solution Explore, right-click the MyFixItCloudService project and select **Publish**.</span></span> <span data-ttu-id="d35e0-366">Daha fazla bilgi için "[uygulamasını azure'a dağıtma](https://www.windowsazure.com/develop/net/tutorials/multi-tier-web-site/2-download-and-run/#deployAz)", parçası 2 olduğu [Bu öğreticide](https://code.msdn.microsoft.com/Windows-Azure-Multi-Tier-eadceb36).</span><span class="sxs-lookup"><span data-stu-id="d35e0-366">For more information, see "[Deploy the Application to Azure](https://www.windowsazure.com/develop/net/tutorials/multi-tier-web-site/2-download-and-run/#deployAz)", which is in part 2 of [this tutorial](https://code.msdn.microsoft.com/Windows-Azure-Multi-Tier-eadceb36).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="d35e0-367">Önceki</span><span class="sxs-lookup"><span data-stu-id="d35e0-367">Previous</span></span>](more-patterns-and-guidance.md)
