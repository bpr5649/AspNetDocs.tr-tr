---
uid: identity/overview/getting-started/aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider
title: "ASP.NET Identity: MySQL Storage 'ı bir EntityFramework MySQL sağlayıcısıyla kullanma (C#)-ASP.NET 4. x"
author: maumar
description: Bu öğreticide, ASP.NET Identity için varsayılan veri depolama mekanizmanın (SQL istemci sağlayıcısı) MySQL provid... ile nasıl değiştirileceği gösterilmektedir.
ms.author: riande
ms.date: 12/10/2013
ms.assetid: 15253312-a92c-43ba-908e-b5dacd3d08b8
ms.custom: seoapril2019
msc.legacyurl: /identity/overview/getting-started/aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider
msc.type: authoredcontent
ms.openlocfilehash: e89ed139657c5ce9ddcc56879946c62038919483
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78584009"
---
# <a name="aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider-c"></a><span data-ttu-id="d7b42-103">ASP.NET Identity: Bir EntityFramework MySQL Sağlayıcısı ile MySQL Depolama Kullanma (C#)</span><span class="sxs-lookup"><span data-stu-id="d7b42-103">ASP.NET Identity: Using MySQL Storage with an EntityFramework MySQL Provider (C#)</span></span>

<span data-ttu-id="d7b42-104">by [Maurycy Markowski](https://github.com/maumar), [Raquel Soares de almete](https://github.com/raquelsa), [Robert McMurray](https://github.com/rmcmurray)</span><span class="sxs-lookup"><span data-stu-id="d7b42-104">by [Maurycy Markowski](https://github.com/maumar), [Raquel Soares De Almeida](https://github.com/raquelsa), [Robert McMurray](https://github.com/rmcmurray)</span></span>

> <span data-ttu-id="d7b42-105">Bu öğreticide, [**ASP.NET Identity**](introduction-to-aspnet-identity.md) için varsayılan veri depolama mekanizmasını bir MySQL sağlayıcısı Ile EntityFramework (SQL istemci sağlayıcısı) ile nasıl değiştireceğiniz gösterilir.</span><span class="sxs-lookup"><span data-stu-id="d7b42-105">This tutorial shows you how to replace the default data storage mechanism for [**ASP.NET Identity**](introduction-to-aspnet-identity.md) with EntityFramework (SQL client provider) with a MySQL provider.</span></span>

<span data-ttu-id="d7b42-106">Bu öğreticide aşağıdaki konular ele alınacaktır:</span><span class="sxs-lookup"><span data-stu-id="d7b42-106">The following topics will be covered in this tutorial:</span></span>

- <span data-ttu-id="d7b42-107">Azure 'da MySQL veritabanı oluşturma</span><span class="sxs-lookup"><span data-stu-id="d7b42-107">Creating a MySQL database on Azure</span></span>
- <span data-ttu-id="d7b42-108">Visual Studio 2013 MVC şablonu kullanarak MVC uygulaması oluşturma</span><span class="sxs-lookup"><span data-stu-id="d7b42-108">Creating an MVC application using Visual Studio 2013 MVC template</span></span>
- <span data-ttu-id="d7b42-109">EntityFramework 'Ü bir MySQL veritabanı sağlayıcısıyla çalışacak şekilde yapılandırma</span><span class="sxs-lookup"><span data-stu-id="d7b42-109">Configuring EntityFramework to work with a MySQL database provider</span></span>
- <span data-ttu-id="d7b42-110">Sonuçları doğrulamak için uygulamayı çalıştırma</span><span class="sxs-lookup"><span data-stu-id="d7b42-110">Running the application to verify the results</span></span>

<span data-ttu-id="d7b42-111">Bu öğreticinin sonunda, Azure 'da barındırılan bir MySQL veritabanı kullanan ASP.NET Identity deposuna sahip bir MVC uygulamanız olacaktır.</span><span class="sxs-lookup"><span data-stu-id="d7b42-111">At the end of this tutorial, you will have an MVC application with the ASP.NET Identity store that is using a MySQL database that is hosted in Azure.</span></span>

## <a name="creating-a-mysql-database-instance-on-azure"></a><span data-ttu-id="d7b42-112">Azure 'da MySQL veritabanı örneği oluşturma</span><span class="sxs-lookup"><span data-stu-id="d7b42-112">Creating a MySQL database instance on Azure</span></span>

1. <span data-ttu-id="d7b42-113">[Azure Portal](https://go.microsoft.com/fwlink/?linkid=529715&amp;clcid=0x409)’da oturum açın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-113">Log in to the [Azure Portal](https://go.microsoft.com/fwlink/?linkid=529715&amp;clcid=0x409).</span></span>
2. <span data-ttu-id="d7b42-114">Sayfanın alt kısmındaki **Yeni** ' ye tıklayın ve ardından **Mağaza**' ı seçin:</span><span class="sxs-lookup"><span data-stu-id="d7b42-114">Click **NEW** at the bottom of the page, and then select **STORE**:</span></span>

    [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image2.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image1.png)
3. <span data-ttu-id="d7b42-115">**Seçim ve eklenti** sihirbazında **ClearDB MySQL veritabanı**' nı seçin ve ardından çerçevenin altındaki **İleri** okuna tıklayın:</span><span class="sxs-lookup"><span data-stu-id="d7b42-115">In the **Choose and Add-on** wizard, select **ClearDB MySQL Database**, and then click the **Next** arrow at the bottom of the frame:</span></span>

   <span data-ttu-id="d7b42-116">[Genişletmek için aşağıdaki görüntüye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-116">[Click the following image to expand it.</span></span> <span data-ttu-id="d7b42-117">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image4.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="d7b42-117">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image4.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image3.png)</span></span>
4. <span data-ttu-id="d7b42-118">Varsayılan **ücretsiz** planı koruyun, **adı** **ıdentitymysqldatabase**olarak değiştirin, size en yakın bölgeyi seçin ve ardından çerçevenin altındaki **İleri** okuna tıklayın:</span><span class="sxs-lookup"><span data-stu-id="d7b42-118">Keep the default **Free** plan, change the **NAME** to **IdentityMySQLDatabase**, select the region that is nearest to you, and then click the **Next** arrow at the bottom of the frame:</span></span>

   <span data-ttu-id="d7b42-119">[Genişletmek için aşağıdaki görüntüye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-119">[Click the following image to expand it.</span></span> <span data-ttu-id="d7b42-120">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image6.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="d7b42-120">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image6.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image5.png)</span></span>
5. <span data-ttu-id="d7b42-121">Veritabanı oluşturma işleminin tamamlanabilmesi için **satın alma** onay işaretine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-121">Click the **PURCHASE** checkmark to complete the database creation.</span></span>

   <span data-ttu-id="d7b42-122">[Genişletmek için aşağıdaki görüntüye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-122">[Click the following image to expand it.</span></span> <span data-ttu-id="d7b42-123">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image8.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="d7b42-123">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image8.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image7.png)</span></span>
6. <span data-ttu-id="d7b42-124">Veritabanınız oluşturulduktan sonra yönetim portalındaki **Eklentiler sekmesinden bu** dosyayı yönetebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="d7b42-124">After your database has been created, you can manage it from the **ADD-ONS** tab in the management portal.</span></span> <span data-ttu-id="d7b42-125">Veritabanınızın bağlantı bilgilerini almak için sayfanın altındaki **bağlantı bilgileri** ' ne tıklayın:</span><span class="sxs-lookup"><span data-stu-id="d7b42-125">To retrieve the connection information for your database, click **CONNECTION INFO** at the bottom of the page:</span></span>

   <span data-ttu-id="d7b42-126">[Genişletmek için aşağıdaki görüntüye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-126">[Click the following image to expand it.</span></span> <span data-ttu-id="d7b42-127">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image10.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="d7b42-127">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image10.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image9.png)</span></span>
7. <span data-ttu-id="d7b42-128">Bağlantı dizesini, **CONNECTIONSTRING** alanına tıklayarak Kopyala düğmesine tıklayıp kaydedin; Bu bilgileri, MVC uygulamanız için bu öğreticide daha sonra kullanacaksınız:</span><span class="sxs-lookup"><span data-stu-id="d7b42-128">Copy the connection string by clicking on the copy button by the **CONNECTIONSTRING** field and save it; you will use this information later in this tutorial for your MVC application:</span></span>

   <span data-ttu-id="d7b42-129">[Genişletmek için aşağıdaki görüntüye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-129">[Click the following image to expand it.</span></span> <span data-ttu-id="d7b42-130">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image12.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="d7b42-130">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image12.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image11.png)</span></span>

## <a name="creating-an-mvc-application-project"></a><span data-ttu-id="d7b42-131">MVC uygulama projesi oluşturma</span><span class="sxs-lookup"><span data-stu-id="d7b42-131">Creating an MVC application project</span></span>

<span data-ttu-id="d7b42-132">Öğreticinin bu bölümündeki adımları tamamlayabilmeniz için öncelikle Web veya [Visual Studio 2013](https://go.microsoft.com/fwlink/?LinkId=306566) [için Visual Studio Express 2013](https://go.microsoft.com/fwlink/?LinkId=299058) ' i yüklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="d7b42-132">To complete the steps in this section of the tutorial, you will first need to install [Visual Studio Express 2013 for Web](https://go.microsoft.com/fwlink/?LinkId=299058) or [Visual Studio 2013](https://go.microsoft.com/fwlink/?LinkId=306566).</span></span> <span data-ttu-id="d7b42-133">Visual Studio yüklendikten sonra, yeni bir MVC uygulama projesi oluşturmak için aşağıdaki adımları kullanın:</span><span class="sxs-lookup"><span data-stu-id="d7b42-133">Once Visual Studio has been installed, use the following steps to create a new MVC application project:</span></span>

1. <span data-ttu-id="d7b42-134">Visual Studio 2103 ' i açın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-134">Open Visual Studio 2103.</span></span>
2. <span data-ttu-id="d7b42-135">**Başlangıç** sayfasından **Yeni proje** ' ye tıklayın veya **Dosya** menüsünü ve ardından **Yeni proje**' ye tıklayın:</span><span class="sxs-lookup"><span data-stu-id="d7b42-135">Click **New Project** from the **Start** page, or you can click the **File** menu and then **New Project**:</span></span>

   <span data-ttu-id="d7b42-136">[Genişletmek için aşağıdaki görüntüye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-136">[Click the following image to expand it.</span></span> <span data-ttu-id="d7b42-137">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image2.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="d7b42-137">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image2.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image1.jpg)</span></span>
3. <span data-ttu-id="d7b42-138">**Yeni proje** iletişim kutusu görüntülendiğinde, şablonlar listesinde **görsel C#**  ' i genişletin, **Web**' e tıklayın ve **ASP.NET Web uygulaması**' nı seçin.</span><span class="sxs-lookup"><span data-stu-id="d7b42-138">When the **New Project** dialog box is displayed, expand **Visual C#** in the list of templates, then click **Web**, and select **ASP.NET Web Application**.</span></span> <span data-ttu-id="d7b42-139">Projenizi **ıdentitymysqldemo** olarak adlandırın ve ardından **Tamam**' a tıklayın:</span><span class="sxs-lookup"><span data-stu-id="d7b42-139">Name your project **IdentityMySQLDemo** and then click **OK**:</span></span>

   <span data-ttu-id="d7b42-140">[Genişletmek için aşağıdaki görüntüye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-140">[Click the following image to expand it.</span></span> <span data-ttu-id="d7b42-141">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image14.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="d7b42-141">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image14.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image13.png)</span></span>
4. <span data-ttu-id="d7b42-142">**Yeni ASP.NET projesi** iletişim kutusunda varsayılan seçeneklerle **MVC** template' i seçin; Bu, **bireysel kullanıcı hesaplarını** kimlik doğrulama yöntemi olarak yapılandırır.</span><span class="sxs-lookup"><span data-stu-id="d7b42-142">In the **New ASP.NET Project** dialog, select the **MVC** templatewith the default options; this will configure **Individual User Accounts** as the authentication method.</span></span> <span data-ttu-id="d7b42-143">**Tamam 'a**tıklayın:</span><span class="sxs-lookup"><span data-stu-id="d7b42-143">Click **OK**:</span></span>

   <span data-ttu-id="d7b42-144">[Genişletmek için aşağıdaki görüntüye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-144">[Click the following image to expand it.</span></span> <span data-ttu-id="d7b42-145">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image16.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="d7b42-145">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image16.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image15.png)</span></span>

## <a name="configure-entityframework-to-work-with-a-mysql-database"></a><span data-ttu-id="d7b42-146">EntityFramework 'Ü bir MySQL veritabanıyla çalışacak şekilde yapılandırma</span><span class="sxs-lookup"><span data-stu-id="d7b42-146">Configure EntityFramework to work with a MySQL database</span></span>

### <a name="update-the-entity-framework-assembly-for-your-project"></a><span data-ttu-id="d7b42-147">Projeniz için Entity Framework derlemeyi güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="d7b42-147">Update the Entity Framework assembly for your project</span></span>

<span data-ttu-id="d7b42-148">Visual Studio 2013 şablondan oluşturulan MVC uygulaması [EntityFramework 6.0.0](http://www.nuget.org/packages/EntityFramework) paketine yönelik bir başvuru içerir, ancak bu derleme için önemli performans iyileştirmeleri içeren sürümünden bu yana güncelleştirmeler yapılmıştır.</span><span class="sxs-lookup"><span data-stu-id="d7b42-148">The MVC application that was created from the Visual Studio 2013 template contains a reference to the [EntityFramework 6.0.0](http://www.nuget.org/packages/EntityFramework) package, but there have been updates to that assembly since its release which contain significant performance improvements.</span></span> <span data-ttu-id="d7b42-149">Uygulamanızda bu en son güncelleştirmeleri kullanmak için aşağıdaki adımları kullanın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-149">In order to use these latest updates in your application, use the following steps.</span></span>

1. <span data-ttu-id="d7b42-150">Visual Studio 'da MVC projenizi açın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-150">Open your MVC project in Visual Studio.</span></span>
2. <span data-ttu-id="d7b42-151">**Araçlar**' a ve ardından **NuGet Paket Yöneticisi**' ne ve ardından **Paket Yöneticisi konsolu**' na tıklayın:</span><span class="sxs-lookup"><span data-stu-id="d7b42-151">Click **Tools**, then click **NuGet Package Manager**, and then click **Package Manager Console**:</span></span>

   <span data-ttu-id="d7b42-152">[Genişletmek için aşağıdaki görüntüye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-152">[Click the following image to expand it.</span></span> <span data-ttu-id="d7b42-153">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image18.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="d7b42-153">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image18.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image17.png)</span></span>
3. <span data-ttu-id="d7b42-154">**Paket Yöneticisi konsolu** , Visual Studio 'nun alt bölümünde görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="d7b42-154">The **Package Manager Console** will appear in the bottom section of Visual Studio.</span></span> <span data-ttu-id="d7b42-155">&quot;**Update-Package EntityFramework**&quot; yazın ve ENTER tuşuna basın:</span><span class="sxs-lookup"><span data-stu-id="d7b42-155">Type &quot;**Update-Package EntityFramework**&quot; and press Enter:</span></span>

   <span data-ttu-id="d7b42-156">[Genişletmek için aşağıdaki görüntüye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-156">[Click the following image to expand it.</span></span> <span data-ttu-id="d7b42-157">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image20.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="d7b42-157">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image20.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image19.png)</span></span>

### <a name="install-the-mysql-provider-for-entityframework"></a><span data-ttu-id="d7b42-158">EntityFramework için MySQL sağlayıcısını yükler</span><span class="sxs-lookup"><span data-stu-id="d7b42-158">Install the MySQL provider for EntityFramework</span></span>

<span data-ttu-id="d7b42-159">EntityFramework 'Ün MySQL veritabanına bağlanabilmesi için bir MySQL sağlayıcısı yüklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="d7b42-159">In order for EntityFramework to connect to MySQL database, you need to install a MySQL provider.</span></span> <span data-ttu-id="d7b42-160">Bunu yapmak için, **Paket Yöneticisi konsolunu** açın ve **Install-Package MySQL. Data. Entity-pre**&quot;&quot;yazın ve ardından ENTER tuşuna basın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-160">To do so, open the **Package Manager Console** and type &quot;**Install-Package MySql.Data.Entity -Pre**&quot;, and then press Enter.</span></span>

> [!NOTE]
> <span data-ttu-id="d7b42-161">Bu, derlemenin yayın öncesi sürümüdür ve bu nedenle hata içerebilir.</span><span class="sxs-lookup"><span data-stu-id="d7b42-161">This is a pre-release version of the assembly, and as such it may contain bugs.</span></span> <span data-ttu-id="d7b42-162">Üretimde sağlayıcının yayın öncesi bir sürümünü kullanmamalısınız.</span><span class="sxs-lookup"><span data-stu-id="d7b42-162">You should not use a pre-release version of the provider in production.</span></span>

<span data-ttu-id="d7b42-163">[Genişletmek için aşağıdaki resme tıklayın.]</span><span class="sxs-lookup"><span data-stu-id="d7b42-163">[Click the following image to expand it.]</span></span>

[![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image22.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image21.png)

### <a name="making-project-configuration-changes-to-the-webconfig-file-for-your-application"></a><span data-ttu-id="d7b42-164">Uygulamanızın Web. config dosyasında proje yapılandırması değişiklikleri yapılıyor</span><span class="sxs-lookup"><span data-stu-id="d7b42-164">Making project configuration changes to the Web.config file for your application</span></span>

<span data-ttu-id="d7b42-165">Bu bölümde, yeni yüklediğiniz MySQL sağlayıcısını kullanmak için Entity Framework yapılandıracaksınız, MySQL sağlayıcı fabrikasını kaydedebilir ve Bağlantı dizenizi Azure 'dan eklersiniz.</span><span class="sxs-lookup"><span data-stu-id="d7b42-165">In this section you will configure the Entity Framework to use the MySQL provider that you just installed, register the MySQL provider factory, and add your connection string from Azure.</span></span>

> [!NOTE]
> <span data-ttu-id="d7b42-166">Aşağıdaki örneklerde MySql. Data. dll için belirli bir derleme sürümü bulunur.</span><span class="sxs-lookup"><span data-stu-id="d7b42-166">The following examples contain a specific assembly version for MySql.Data.dll.</span></span> <span data-ttu-id="d7b42-167">Derleme sürümü değişirse, uygun yapılandırma ayarlarını doğru sürümle değiştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="d7b42-167">If the assembly version changes, you will need to modify the appropriate configuration settings with the correct version.</span></span>

1. <span data-ttu-id="d7b42-168">Projeniz için Web. config dosyasını Visual Studio 2013 açın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-168">Open the Web.config file for your project in Visual Studio 2013.</span></span>
2. <span data-ttu-id="d7b42-169">Entity Framework için varsayılan veritabanı sağlayıcısını ve fabrikası tanımlayan aşağıdaki yapılandırma ayarlarını bulun:</span><span class="sxs-lookup"><span data-stu-id="d7b42-169">Locate the following configuration settings, which define the default database provider and factory for the Entity Framework:</span></span>

    [!code-xml[Main](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/samples/sample1.xml)]
3. <span data-ttu-id="d7b42-170">Bu yapılandırma ayarlarını aşağıdaki ile değiştirin ve bu, Entity Framework MySQL sağlayıcısını kullanacak şekilde yapılandırır:</span><span class="sxs-lookup"><span data-stu-id="d7b42-170">Replace those configuration settings with the following, which will configure the Entity Framework to use the MySQL provider:</span></span>

    [!code-xml[Main](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/samples/sample2.xml)]
4. <span data-ttu-id="d7b42-171">&lt;connectionStrings&gt; bölümünü bulun ve Azure üzerinde barındırılan MySQL veritabanınızın bağlantı dizesini tanımlayacak aşağıdaki kodla değiştirin (providerName değeri de orijinalden değiştirildiğini unutmayın):</span><span class="sxs-lookup"><span data-stu-id="d7b42-171">Locate the &lt;connectionStrings&gt; section and replace it with the following code, which will define the connection string for your MySQL database that is hosted on Azure (note that providerName value has also been changed from the original):</span></span>

    [!code-xml[Main](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/samples/sample3.xml?highlight=3-4)]

### <a name="adding-custom-migrationhistory-context"></a><span data-ttu-id="d7b42-172">Özel MigrationHistory bağlamı ekleniyor</span><span class="sxs-lookup"><span data-stu-id="d7b42-172">Adding custom MigrationHistory context</span></span>

<span data-ttu-id="d7b42-173">Entity Framework Code First, model değişikliklerini izlemek ve veritabanı şeması ile kavramsal şema arasındaki tutarlılığı sağlamak için bir **Migrationhistory** tablosu kullanır.</span><span class="sxs-lookup"><span data-stu-id="d7b42-173">Entity Framework Code First uses a **MigrationHistory** table to keep track of model changes and to ensure the consistency between the database schema and conceptual schema.</span></span> <span data-ttu-id="d7b42-174">Ancak, birincil anahtar çok büyük olduğundan bu tablo MySQL için varsayılan olarak çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="d7b42-174">However, this table does not work for MySQL by default because the primary key is too large.</span></span> <span data-ttu-id="d7b42-175">Bu durumu gidermek için, bu tablo için anahtar boyutunu küçültmenize gerek duyarsınız.</span><span class="sxs-lookup"><span data-stu-id="d7b42-175">To remedy this situation, you will need to shrink the key size for that table.</span></span> <span data-ttu-id="d7b42-176">Bunu yapmak için aşağıdaki adımları kullanın:</span><span class="sxs-lookup"><span data-stu-id="d7b42-176">To do so, use the following steps:</span></span>

1. <span data-ttu-id="d7b42-177">Bu tablo için şema bilgileri, başka bir **DbContext**olarak değiştirilebilen bir, bir bir bir bir bir bir bir bir bir **bağlam**içinde yakalanır.</span><span class="sxs-lookup"><span data-stu-id="d7b42-177">The schema information for this table is captured in a **HistoryContext**, which can be modified as any other **DbContext**.</span></span> <span data-ttu-id="d7b42-178">Bunu yapmak için projeye **MySqlHistoryContext.cs** adlı yeni bir sınıf dosyası ekleyin ve içeriğini şu kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="d7b42-178">To do so, add a new class file named **MySqlHistoryContext.cs** to the project, and replace its contents with the following code:</span></span>

    [!code-csharp[Main](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/samples/sample4.cs)]
2. <span data-ttu-id="d7b42-179">Daha sonra, Entity Framework varsayılan bir yerine değiştirilen bir değiştirme **bağlamını**kullanacak şekilde yapılandırmanız gerekecektir.</span><span class="sxs-lookup"><span data-stu-id="d7b42-179">Next you will need to configure Entity Framework to use the modified **HistoryContext**, rather than default one.</span></span> <span data-ttu-id="d7b42-180">Bu, kod tabanlı yapılandırma özelliklerinden yararlanarak yapılabilir.</span><span class="sxs-lookup"><span data-stu-id="d7b42-180">This can be done by leveraging code-based configuration features.</span></span> <span data-ttu-id="d7b42-181">Bunu yapmak için, **MySqlConfiguration.cs** adlı yeni sınıf dosyasını projenize ekleyin ve içeriğini ile değiştirin:</span><span class="sxs-lookup"><span data-stu-id="d7b42-181">To do so, add new class file named **MySqlConfiguration.cs** to your project and replace its contents with:</span></span>

    [!code-csharp[Main](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/samples/sample5.cs)]

### <a name="creating-a-custom-entityframework-initializer-for-applicationdbcontext"></a><span data-ttu-id="d7b42-182">ApplicationDbContext için özel bir EntityFramework başlatıcısı oluşturma</span><span class="sxs-lookup"><span data-stu-id="d7b42-182">Creating a custom EntityFramework initializer for ApplicationDbContext</span></span>

<span data-ttu-id="d7b42-183">Bu öğreticide tanıtılan MySQL sağlayıcısı şu anda Entity Framework geçişleri desteklemediğinden, veritabanına bağlanmak için model başlatıcılarının kullanılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="d7b42-183">The MySQL provider that is featured in this tutorial does not currently support Entity Framework migrations, so you will need to use model initializers in order to connect to the database.</span></span> <span data-ttu-id="d7b42-184">Bu öğretici Azure üzerinde bir MySQL örneği kullandığından, özel bir Entity Framework başlatıcısı oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="d7b42-184">Because this tutorial is using a MySQL instance on Azure, you will need to create a custom Entity Framework initializer.</span></span>

> [!NOTE]
> <span data-ttu-id="d7b42-185">Azure 'da bir SQL Server örneğine bağlanıyorsanız veya şirket içinde barındırılan bir veritabanı kullanıyorsanız bu adım gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="d7b42-185">This step is not required if you are connecting to a SQL Server instance on Azure or if you are using a database that is hosted on premises.</span></span>

<span data-ttu-id="d7b42-186">MySQL için özel bir Entity Framework başlatıcısı oluşturmak için aşağıdaki adımları kullanın:</span><span class="sxs-lookup"><span data-stu-id="d7b42-186">To create a custom Entity Framework initializer for MySQL, use the following steps:</span></span>

1. <span data-ttu-id="d7b42-187">Projeye **MySqlInitializer.cs** adlı yeni bir sınıf dosyası ekleyin ve içeriğini şu kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="d7b42-187">Add a new class file named **MySqlInitializer.cs** to the project, and replace it's contents with the following code:</span></span>

    [!code-csharp[Main](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/samples/sample6.cs?highlight=23)]
2. <span data-ttu-id="d7b42-188">Projeniz için **modeller** dizininde bulunan **IdentityModels.cs** dosyasını açın ve içeriğini aşağıdakiler ile değiştirin:</span><span class="sxs-lookup"><span data-stu-id="d7b42-188">Open the **IdentityModels.cs** file for your project, which is located in the **Models** directory, and replace it's contents with the following:</span></span>

    [!code-csharp[Main](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/samples/sample7.cs)]

## <a name="running-the-application-and-verifying-the-database"></a><span data-ttu-id="d7b42-189">Uygulamayı çalıştırma ve veritabanını doğrulama</span><span class="sxs-lookup"><span data-stu-id="d7b42-189">Running the application and verifying the database</span></span>

<span data-ttu-id="d7b42-190">Yukarıdaki bölümlerde bulunan adımları tamamladıktan sonra, veritabanınızı test etmelisiniz.</span><span class="sxs-lookup"><span data-stu-id="d7b42-190">Once you have completed the steps in the preceding sections, you should test your database.</span></span> <span data-ttu-id="d7b42-191">Bunu yapmak için aşağıdaki adımları kullanın:</span><span class="sxs-lookup"><span data-stu-id="d7b42-191">To do so, use the following steps:</span></span>

1. <span data-ttu-id="d7b42-192">Web uygulamasını derlemek ve çalıştırmak için **CTRL + F5** tuşlarına basın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-192">Press **Ctrl + F5** to build and run the web application.</span></span>
2. <span data-ttu-id="d7b42-193">Sayfanın üst kısmındaki **Kaydet** sekmesine tıklayın:</span><span class="sxs-lookup"><span data-stu-id="d7b42-193">Click the **Register** tab on the top of the page:</span></span>

   <span data-ttu-id="d7b42-194">[Genişletmek için aşağıdaki görüntüye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-194">[Click the following image to expand it.</span></span> <span data-ttu-id="d7b42-195">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image4.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image3.jpg)</span><span class="sxs-lookup"><span data-stu-id="d7b42-195">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image4.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image3.jpg)</span></span>
3. <span data-ttu-id="d7b42-196">Yeni bir Kullanıcı adı ve parola girin ve ardından **Kaydet**' e tıklayın:</span><span class="sxs-lookup"><span data-stu-id="d7b42-196">Enter a new user name and password, and then click **Register**:</span></span>

   <span data-ttu-id="d7b42-197">[Genişletmek için aşağıdaki görüntüye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-197">[Click the following image to expand it.</span></span> <span data-ttu-id="d7b42-198">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image24.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="d7b42-198">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image24.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image23.png)</span></span>
4. <span data-ttu-id="d7b42-199">Bu noktada, ASP.NET Identity tabloları MySQL veritabanında oluşturulur ve Kullanıcı kaydedilir ve uygulamaya kaydedilir:</span><span class="sxs-lookup"><span data-stu-id="d7b42-199">At this point the ASP.NET Identity tables are created on the MySQL Database, and the user is registered and logged into the application:</span></span>

   <span data-ttu-id="d7b42-200">[Genişletmek için aşağıdaki görüntüye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-200">[Click the following image to expand it.</span></span> <span data-ttu-id="d7b42-201">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image6.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image5.jpg)</span><span class="sxs-lookup"><span data-stu-id="d7b42-201">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image6.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image5.jpg)</span></span>

### <a name="installing-mysql-workbench-tool-to-verify-the-data"></a><span data-ttu-id="d7b42-202">Verileri doğrulamak için MySQL bir aracı yükleniyor</span><span class="sxs-lookup"><span data-stu-id="d7b42-202">Installing MySQL Workbench tool to verify the data</span></span>

1. <span data-ttu-id="d7b42-203">MySQL [İndirmeleri sayfasından](http://dev.mysql.com/downloads/windows/installer/) **MySQL çalışma ekranı** aracını yükler</span><span class="sxs-lookup"><span data-stu-id="d7b42-203">Install the **MySQL Workbench** tool from the [MySQL downloads page](http://dev.mysql.com/downloads/windows/installer/)</span></span>
2. <span data-ttu-id="d7b42-204">Yükleme Sihirbazı: **Özellik seçimi** sekmesinde, **uygulamalar** bölümünde **MySQL çalışma ekranı** ' nı seçin.</span><span class="sxs-lookup"><span data-stu-id="d7b42-204">In the installation wizard: **Feature Selection** tab, select **MySQL Workbench** under **applications** section.</span></span>
3. <span data-ttu-id="d7b42-205">Uygulamayı başlatın ve Bu öğreticinin başında oluşturduğunuz Azure MySQL veritabanındaki bağlantı dizesi verilerini kullanarak yeni bir bağlantı ekleyin.</span><span class="sxs-lookup"><span data-stu-id="d7b42-205">Launch the app and add a new connection using the connection string data from the Azure MySQL database you created at the begging of this tutorial.</span></span>
4. <span data-ttu-id="d7b42-206">Bağlantıyı kurduktan sonra, **ıdentitymysqldatabase** üzerinde oluşturulan **ASP.NET Identity** tablolarını inceleyin.</span><span class="sxs-lookup"><span data-stu-id="d7b42-206">After establishing the connection, inspect the **ASP.NET Identity** tables created on the **IdentityMySQLDatabase.**</span></span>
5. <span data-ttu-id="d7b42-207">Aşağıdaki görüntüde gösterildiği gibi, gerekli tüm ASP.NET Identity tablolarının oluşturulduğunu görürsünüz:</span><span class="sxs-lookup"><span data-stu-id="d7b42-207">You will see that all ASP.NET Identity required tables are created as shown in the image below:</span></span>

   <span data-ttu-id="d7b42-208">[Genişletmek için aşağıdaki görüntüye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-208">[Click the following image to expand it.</span></span> <span data-ttu-id="d7b42-209">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image8.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="d7b42-209">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image8.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image7.jpg)</span></span>
6. <span data-ttu-id="d7b42-210">Yeni kullanıcıları kaydettiğinizde girişleri denetlemek üzere örnek için **aspnetusers** tablosunu inceleyin.</span><span class="sxs-lookup"><span data-stu-id="d7b42-210">Inspect the **aspnetusers** table for instance to check for the entries as you register new users.</span></span>

   <span data-ttu-id="d7b42-211">[Genişletmek için aşağıdaki görüntüye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="d7b42-211">[Click the following image to expand it.</span></span> <span data-ttu-id="d7b42-212">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image26.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="d7b42-212">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image26.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image25.png)</span></span>
