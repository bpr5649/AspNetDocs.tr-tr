---
uid: web-forms/overview/security/create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset
title: E-posta onayı ve parola sıfırlama (C#) ile kullanıcı kaydı, güvenli bir ASP.NET Web Forms uygulaması oluşturma | Microsoft Docs
author: Erikre
description: Bu öğretici, kullanıcı kaydı, e-posta onayı ve ASP.NET Identity üye kullanarak parola sıfırlama ile bir ASP.NET Web formları uygulamasının nasıl oluşturulacağını gösterir...
ms.author: riande
ms.date: 10/02/2014
ms.assetid: 0a8d6044-5fab-4213-82d6-5618d5601358
msc.legacyurl: /web-forms/overview/security/create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset
msc.type: authoredcontent
ms.openlocfilehash: 3df728891103de9c8e461ab9507237c9b14e8251
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/09/2019
ms.locfileid: "59390694"
---
# <a name="create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset-c"></a><span data-ttu-id="37dab-103">Kullanıcı kaydı, e-posta onayı ve parola sıfırlama özellikli, güvenli bir ASP.NET Web Forms uygulaması oluşturma (C#)</span><span class="sxs-lookup"><span data-stu-id="37dab-103">Create a secure ASP.NET Web Forms app with user registration, email confirmation and password reset (C#)</span></span>

<span data-ttu-id="37dab-104">tarafından [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="37dab-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

> <span data-ttu-id="37dab-105">Bu öğretici, kullanıcı kaydı, e-posta onayı ve ASP.NET Identity üyelik sistemini kullanarak parola sıfırlama ile bir ASP.NET Web Forms uygulaması derleme işlemini göstermektedir.</span><span class="sxs-lookup"><span data-stu-id="37dab-105">This tutorial shows you how to build an ASP.NET Web Forms app with user registration, email confirmation and password reset using the ASP.NET Identity membership system.</span></span> <span data-ttu-id="37dab-106">Bu öğreticide Rick Anderson'un üzerinde temel [MVC Öğreticisi](../../../mvc/overview/security/create-an-aspnet-mvc-5-web-app-with-email-confirmation-and-password-reset.md).</span><span class="sxs-lookup"><span data-stu-id="37dab-106">This tutorial was based on Rick Anderson's [MVC tutorial](../../../mvc/overview/security/create-an-aspnet-mvc-5-web-app-with-email-confirmation-and-password-reset.md).</span></span>


## <a name="introduction"></a><span data-ttu-id="37dab-107">Giriş</span><span class="sxs-lookup"><span data-stu-id="37dab-107">Introduction</span></span>

<span data-ttu-id="37dab-108">Bu öğreticide Visual Studio ve ASP.NET 4.5 kullanarak kullanıcı kaydı ile güvenli bir Web Forms uygulaması oluşturma, e-posta onayı ve parola sıfırlama için bir ASP.NET Web Forms uygulaması oluşturmak için gereken adımlarda size kılavuzluk eder.</span><span class="sxs-lookup"><span data-stu-id="37dab-108">This tutorial guides you through the steps required to create an ASP.NET Web Forms application using Visual Studio and ASP.NET 4.5 to create a secure Web Forms app with user registration, email confirmation and password reset.</span></span>

### <a name="tutorial-tasks-and-information"></a><span data-ttu-id="37dab-109">Öğretici görevleri ve bilgileri:</span><span class="sxs-lookup"><span data-stu-id="37dab-109">Tutorial Tasks and Information:</span></span>

- [<span data-ttu-id="37dab-110">Oluşturma bir ASP.NET Web Forms uygulaması</span><span class="sxs-lookup"><span data-stu-id="37dab-110">Create an ASP.NET Web Forms app</span></span>](#createWebForms)
- [<span data-ttu-id="37dab-111">SendGrid bağlama</span><span class="sxs-lookup"><span data-stu-id="37dab-111">Hook Up SendGrid</span></span>](#SG)
- [<span data-ttu-id="37dab-112">Oturum açma önce e-posta onayı gerektir</span><span class="sxs-lookup"><span data-stu-id="37dab-112">Require Email Confirmation Before Log In</span></span>](#require)
- [<span data-ttu-id="37dab-113">Parola kurtarma ve sıfırlama</span><span class="sxs-lookup"><span data-stu-id="37dab-113">Password Recovery and Reset</span></span>](#reset)
- [<span data-ttu-id="37dab-114">E-posta doğrulama bağlantısını yeniden gönder</span><span class="sxs-lookup"><span data-stu-id="37dab-114">Resend Email Confirmation Link</span></span>](#rsend)
- [<span data-ttu-id="37dab-115">Uygulama sorunlarını giderme</span><span class="sxs-lookup"><span data-stu-id="37dab-115">Troubleshooting the App</span></span>](#dbg)
- [<span data-ttu-id="37dab-116">Ek Kaynaklar</span><span class="sxs-lookup"><span data-stu-id="37dab-116">Additional Resources</span></span>](#addRes)

<a id="createWebForms"></a>
## <a name="create-an-aspnet-web-forms-app"></a><span data-ttu-id="37dab-117">Bir ASP.NET Web Forms uygulaması oluşturma</span><span class="sxs-lookup"><span data-stu-id="37dab-117">Create an ASP.NET Web Forms App</span></span>

<span data-ttu-id="37dab-118">Yükleme ve çalıştırmaya başlayın [Visual Studio Express 2013 Web](https://go.microsoft.com/fwlink/?LinkId=299058) veya [Visual Studio 2013](https://go.microsoft.com/fwlink/?LinkId=306566).</span><span class="sxs-lookup"><span data-stu-id="37dab-118">Start by installing and running [Visual Studio Express 2013 for Web](https://go.microsoft.com/fwlink/?LinkId=299058) or [Visual Studio 2013](https://go.microsoft.com/fwlink/?LinkId=306566).</span></span> <span data-ttu-id="37dab-119">Yükleme [Visual Studio 2013 güncelleştirme 3'ü](https://go.microsoft.com/fwlink/?LinkId=390465) veya üzeri de.</span><span class="sxs-lookup"><span data-stu-id="37dab-119">Install [Visual Studio 2013 Update 3](https://go.microsoft.com/fwlink/?LinkId=390465) or higher as well.</span></span>

> [!NOTE]
> <span data-ttu-id="37dab-120">Uyarı: Yüklemelisiniz [Visual Studio 2013 güncelleştirme 3'ü](https://go.microsoft.com/fwlink/?LinkId=390465) ya da bu öğreticiyi tamamlamak için daha yüksek.</span><span class="sxs-lookup"><span data-stu-id="37dab-120">Warning: You must install [Visual Studio 2013 Update 3](https://go.microsoft.com/fwlink/?LinkId=390465) or higher to complete this tutorial.</span></span>


1. <span data-ttu-id="37dab-121">Yeni bir proje oluşturun (**dosya**  - &gt; **yeni proje**) seçip **ASP.NET Web uygulaması** şablon ve en son .NET Framework sürümünden **yeni proje** iletişim kutusu.</span><span class="sxs-lookup"><span data-stu-id="37dab-121">Create a new project (**File** -&gt; **New Project**) and select the **ASP.NET Web Application** template and the latest .NET Framework version from the **New Project** dialog box.</span></span>
2. <span data-ttu-id="37dab-122">Gelen **yeni ASP.NET projesi** iletişim kutusunda **Web Forms** şablonu.</span><span class="sxs-lookup"><span data-stu-id="37dab-122">From the **New ASP.NET Project** dialog box, select the **Web Forms** template.</span></span> <span data-ttu-id="37dab-123">Varsayılan kimlik doğrulaması olarak bırakın **bireysel kullanıcı hesapları**.</span><span class="sxs-lookup"><span data-stu-id="37dab-123">Leave the default authentication as **Individual User Accounts**.</span></span> <span data-ttu-id="37dab-124">Uygulamayı azure'da barındırmak istiyorsanız, bırakın **bulutta Barındır** onay kutusunu işaretli.</span><span class="sxs-lookup"><span data-stu-id="37dab-124">If you'd like to host the app in Azure, leave the **Host in the cloud** check box checked.</span></span>   
 <span data-ttu-id="37dab-125">' A tıklayarak **Tamam** yeni projeyi oluşturmak için.</span><span class="sxs-lookup"><span data-stu-id="37dab-125">Then, click **OK** to create the new project.</span></span>  
    ![Yeni ASP.NET projesi iletişim kutusu](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/_static/image1.png)
3. <span data-ttu-id="37dab-127">Proje için Güvenli Yuva Katmanı (SSL) etkinleştirin.</span><span class="sxs-lookup"><span data-stu-id="37dab-127">Enable Secure Sockets Layer (SSL) for the project.</span></span> <span data-ttu-id="37dab-128">Bulunan adımları **projesi için SSL'yi etkinleştir** bölümünü [öğretici serisinin Web Forms ile çalışmaya başlama](../getting-started/getting-started-with-aspnet-45-web-forms/checkout-and-payment-with-paypal.md#SSLWebForms).</span><span class="sxs-lookup"><span data-stu-id="37dab-128">Follow the steps available in the **Enable SSL for the Project** section of the [Getting Started with Web Forms tutorial series](../getting-started/getting-started-with-aspnet-45-web-forms/checkout-and-payment-with-paypal.md#SSLWebForms).</span></span>
4. <span data-ttu-id="37dab-129">Uygulamayı çalıştırın, tıklayın **kaydetme** bağlamak ve yeni bir kullanıcı kaydı.</span><span class="sxs-lookup"><span data-stu-id="37dab-129">Run the app, click the **Register** link and register a new user.</span></span> <span data-ttu-id="37dab-130">Bu noktada, yalnızca doğrulama e-posta dayanır [[EmailAddress]](https://msdn.microsoft.com/library/system.componentmodel.dataannotations.emailaddressattribute(v=vs.110).aspx) e-posta adresi doğru biçimlendirildiğinden emin olmak için özniteliği.</span><span class="sxs-lookup"><span data-stu-id="37dab-130">At this point, the only validation on the email is based on the [[EmailAddress]](https://msdn.microsoft.com/library/system.componentmodel.dataannotations.emailaddressattribute(v=vs.110).aspx) attribute to ensure the email address is well-formed.</span></span> <span data-ttu-id="37dab-131">E-posta onayı eklenecek kodu değiştirir.</span><span class="sxs-lookup"><span data-stu-id="37dab-131">You will modify the code to add email confirmation.</span></span> <span data-ttu-id="37dab-132">Tarayıcı penceresini kapatın.</span><span class="sxs-lookup"><span data-stu-id="37dab-132">Close the browser window.</span></span>
5. <span data-ttu-id="37dab-133">İçinde **Sunucu Gezgini** Visual Studio'nun (**görünümü**  - &gt; **Sunucu Gezgini**), gitmek **veri Connections\ DefaultConnection\Tables\AspNetUsers**sağ tıklayın ve seçin **tablo tanımını açın**.</span><span class="sxs-lookup"><span data-stu-id="37dab-133">In **Server Explorer** of Visual Studio (**View** -&gt; **Server Explorer**), navigate to **Data Connections\DefaultConnection\Tables\AspNetUsers**, right click and select **Open table definition**.</span></span> 

    <span data-ttu-id="37dab-134">Aşağıdaki görüntüde `AspNetUsers` tablo şeması:</span><span class="sxs-lookup"><span data-stu-id="37dab-134">The following image shows the `AspNetUsers` table schema:</span></span>

    ![AspNetUsers tablosu şeması](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/_static/image2.png)
6. <span data-ttu-id="37dab-136">İçinde **Sunucu Gezgini**, sağ **AspNetUsers** tablosunu seçip **tablo verilerini Göster**.</span><span class="sxs-lookup"><span data-stu-id="37dab-136">In **Server Explorer**, right-click on the **AspNetUsers** table and select **Show Table Data**.</span></span>  
  
    ![AspNetUsers tablo verileri](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/_static/image3.png)  
 <span data-ttu-id="37dab-138">Bu noktada kayıtlı kullanıcı için e-posta onaylanmamıştır.</span><span class="sxs-lookup"><span data-stu-id="37dab-138">At this point the email for the registered user has not been confirmed.</span></span>
7. <span data-ttu-id="37dab-139">Kullanıcı tıklayın, satır ve silmek üzere delete seçin.</span><span class="sxs-lookup"><span data-stu-id="37dab-139">Click on the row and select delete to delete the user.</span></span> <span data-ttu-id="37dab-140">Bu e-postayı yeniden sonraki adımda ekleyecek ve e-posta adresine bir onay iletisi gönderin.</span><span class="sxs-lookup"><span data-stu-id="37dab-140">You'll add this email again in the next step and send a confirmation message to the email address.</span></span>

## <a name="email-confirmation"></a><span data-ttu-id="37dab-141">E-posta onayı</span><span class="sxs-lookup"><span data-stu-id="37dab-141">Email Confirmation</span></span>

<span data-ttu-id="37dab-142">Bunlar değil kimliğe bürünerek başka birisi doğrulamak için yeni bir kullanıcı kaydı sırasında e-postayı onaylamak için iyi bir uygulamadır (diğer bir deyişle, bunlar başka birinin e-posta ile kayıtlı olmayabilirsiniz).</span><span class="sxs-lookup"><span data-stu-id="37dab-142">It's a best practice to confirm the email during the registration of a new user to verify they are not impersonating someone else (that is, they haven't registered with someone else's email).</span></span> <span data-ttu-id="37dab-143">Tartışma Forumu tablonuz olduğunu varsayın engellemek istiyorsunuz `"bob@cpandl.com"` olarak kaydetme gelen `"joe@contoso.com"`.</span><span class="sxs-lookup"><span data-stu-id="37dab-143">Suppose you had a discussion forum, you would want to prevent `"bob@cpandl.com"` from registering as `"joe@contoso.com"`.</span></span> <span data-ttu-id="37dab-144">E-posta onayı olmadan `"joe@contoso.com"` uygulamanızdan istenmeyen e-posta alabilir.</span><span class="sxs-lookup"><span data-stu-id="37dab-144">Without email confirmation, `"joe@contoso.com"` could get unwanted email from your app.</span></span> <span data-ttu-id="37dab-145">Bob yanlışlıkla olarak kayıtlı varsayalım `"bib@cpandl.com"` ve bunu fark yüklediniz o uygulamayı doğru e-postasını olmadığı için parola kurtarmayı kullanın saptayamazdınız.</span><span class="sxs-lookup"><span data-stu-id="37dab-145">Suppose Bob accidentally registered as `"bib@cpandl.com"` and hadn't noticed it, he wouldn't be able to use password recovery because the app doesn't have his correct email.</span></span> <span data-ttu-id="37dab-146">E-posta onayı robotlar yalnızca sınırlı koruma sağlar ve belirlenen istenmeyen posta gönderenlere koruma sağlamaz.</span><span class="sxs-lookup"><span data-stu-id="37dab-146">Email confirmation provides only limited protection from bots and doesn't provide protection from determined spammers.</span></span>

<span data-ttu-id="37dab-147">Genellikle, yeni kullanıcıların ya da e-posta, SMS mesajı ya da başka bir mekanizma onaylanmıştır önce Web sitenizi herhangi bir veri gönderme engellemek istiyorsunuz.</span><span class="sxs-lookup"><span data-stu-id="37dab-147">You generally want to prevent new users from posting any data to your website before they have been confirmed by either email, an SMS text message or another mechanism.</span></span> <span data-ttu-id="37dab-148">Aşağıdaki bölümler size e-posta onayı etkinleştirin ve yeni kaydettiğiniz kullanıcıların e-postasına onaylanana kadar oturum açmayı engellemek için kodu değiştirin.</span><span class="sxs-lookup"><span data-stu-id="37dab-148">In the sections below, we will enable email confirmation and modify the code to prevent newly registered users from logging in until their email has been confirmed.</span></span> <span data-ttu-id="37dab-149">SendGrid e-posta hizmeti Bu öğreticide kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="37dab-149">You'll use the email service SendGrid in this tutorial.</span></span>

<a id="SG"></a>
## <a name="hook-up-sendgrid"></a><span data-ttu-id="37dab-150">SendGrid bağlama</span><span class="sxs-lookup"><span data-stu-id="37dab-150">Hook up SendGrid</span></span>

<span data-ttu-id="37dab-151">SendGrid, API, Bu öğretici yazıldığı yana değişti.</span><span class="sxs-lookup"><span data-stu-id="37dab-151">SendGrid has changed it's API since this tutorial was written.</span></span> <span data-ttu-id="37dab-152">Geçerli SendGrid yönergeler için bkz: [SendGrid](http://sendgrid.com/) veya [hesap onaylama ve parola kurtarmayı etkinleştir](xref:security/authentication/accconfirm#enable-account-confirmation-and-password-recovery).</span><span class="sxs-lookup"><span data-stu-id="37dab-152">For current SendGrid instructions, see [SendGrid](http://sendgrid.com/) or [Enable account confirmation and password recovery](xref:security/authentication/accconfirm#enable-account-confirmation-and-password-recovery).</span></span>

<span data-ttu-id="37dab-153">Bu öğreticide yalnızca e-posta bildirimi aracılığıyla ekleme gösterir, ancak [SendGrid](http://sendgrid.com/), e-posta SMTP veya başka mekanizmalar kullanılarak gönderebilirsiniz (bkz [ek kaynaklar](#addRes)).</span><span class="sxs-lookup"><span data-stu-id="37dab-153">Although this tutorial only shows how to add email notification through [SendGrid](http://sendgrid.com/), you can send email using SMTP and other mechanisms (see [additional resources](#addRes)).</span></span>

1. <span data-ttu-id="37dab-154">Visual Studio'da açın **Paket Yöneticisi Konsolu** (**Araçları**  - &gt; **NuGet Paket Yöneticisi**  - &gt; **Paket Yöneticisi Konsolu**) ve aşağıdaki komutu girin:</span><span class="sxs-lookup"><span data-stu-id="37dab-154">In Visual Studio, open the **Package Manager Console** (**Tools** -&gt; **NuGet Package Manger** -&gt; **Package Manager Console**), and enter the following command:</span></span>  
    `Install-Package SendGrid`
2. <span data-ttu-id="37dab-155">Git [Azure SendGrid kayıt sayfasına](https://azure.microsoft.com/gallery/store/sendgrid/sendgrid-azure/) ve SendGrid hesabı ücretsiz kaydolun.</span><span class="sxs-lookup"><span data-stu-id="37dab-155">Go to the [Azure SendGrid sign-up page](https://azure.microsoft.com/gallery/store/sendgrid/sendgrid-azure/) and register for free SendGrid account.</span></span> <span data-ttu-id="37dab-156">Ayrıca doğrudan açık bir ücretsiz SendGrid hesabı için kaydolun yapabilecekleriniz [SendGrid site](http://www.sendgrid.com).</span><span class="sxs-lookup"><span data-stu-id="37dab-156">You can also sign-up for a free SendGrid account directly on [SendGrid's site](http://www.sendgrid.com).</span></span>
3. <span data-ttu-id="37dab-157">Gelen **Çözüm Gezgini** açın *IdentityConfig.cs* dosyası *uygulama\_Başlat* klasör içinsarırenklevurgulanırveaşağıdakikoduekleyin`EmailService` yapılandırmak için sınıf **SendGrid**:</span><span class="sxs-lookup"><span data-stu-id="37dab-157">From **Solution Explorer** open the *IdentityConfig.cs* file in the *App\_Start* folder and add the following code highlighted in yellow to the `EmailService` class to configure **SendGrid**:</span></span>

    [!code-csharp[Main](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/samples/sample1.cs?highlight=3,5,8-37)]
4. <span data-ttu-id="37dab-158">Ayrıca, aşağıdaki ekleyin `using` başlangıcına deyimleri *IdentityConfig.cs* dosyası:</span><span class="sxs-lookup"><span data-stu-id="37dab-158">Also, add the following `using` statements to the beginning of the *IdentityConfig.cs* file:</span></span> 

    [!code-csharp[Main](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/samples/sample2.cs?highlight=1-4)]
5. <span data-ttu-id="37dab-159">Bu örneği basit tutmak için e-posta hizmeti hesabı değerleri depolayacağınızı `appSettings` bölümünü *web.config* dosya.</span><span class="sxs-lookup"><span data-stu-id="37dab-159">To keep this sample simple, you'll store the email service account values in the `appSettings` section of the *web.config* file.</span></span> <span data-ttu-id="37dab-160">Sarı ile vurgulanmış aşağıdaki XML'i ekleyin *web.config* projenizin kökünde dosyası:</span><span class="sxs-lookup"><span data-stu-id="37dab-160">Add the following XML highlighted in yellow to the *web.config* file at the root of your project:</span></span>

    [!code-xml[Main](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/samples/sample3.xml?highlight=2-5)]

    > [!WARNING]
    > <span data-ttu-id="37dab-161">Güvenlik - hiçbir zaman deposu hassas verileri, kaynak kodunuzdaki.</span><span class="sxs-lookup"><span data-stu-id="37dab-161">Security - Never store sensitive data in your source code.</span></span> <span data-ttu-id="37dab-162">Bu örnekte ve hesabın kimlik bilgileri depolanır **appSetting** bölümünü *Web.config* dosya.</span><span class="sxs-lookup"><span data-stu-id="37dab-162">In this example, the account and credentials are stored in the **appSetting** section of the *Web.config* file.</span></span> <span data-ttu-id="37dab-163">Azure üzerinde güvenli bir şekilde bu değerleri üzerinde depolamanın **[yapılandırma](https://blogs.msdn.com/b/webdev/archive/2014/06/04/queuebackgroundworkitem-to-reliably-schedule-and-run-long-background-process-in-asp-net.aspx)** Azure portalında sekmesi.</span><span class="sxs-lookup"><span data-stu-id="37dab-163">On Azure, you can securely store these values on the **[Configure](https://blogs.msdn.com/b/webdev/archive/2014/06/04/queuebackgroundworkitem-to-reliably-schedule-and-run-long-background-process-in-asp-net.aspx)** tab in the Azure portal.</span></span> <span data-ttu-id="37dab-164">İlgili bilgiler için Rick Anderson'un başlıklı konusuna bakın [parolalar ve diğer hassas verileri ASP.NET ve Azure'a dağıtmak için en iyi yöntemler](https://go.microsoft.com/fwlink/?LinkId=513141).</span><span class="sxs-lookup"><span data-stu-id="37dab-164">For related information see Rick Anderson's topic titled [Best practices for deploying passwords and other sensitive data to ASP.NET and Azure](https://go.microsoft.com/fwlink/?LinkId=513141).</span></span>
6. <span data-ttu-id="37dab-165">Başarılı olan (kullanıcı adı ve parola) SendGrid kimlik doğrulama değerlerini uygulamanızdan e-posta Gönder yansıtmak üzere e-posta hizmeti değerleri ekleyin.</span><span class="sxs-lookup"><span data-stu-id="37dab-165">Add the email service values to reflect your SendGrid authentication values (User Name and Password) so that you can successful send email from your app.</span></span> <span data-ttu-id="37dab-166">SendGrid sağlanan e-posta adresi yerine SendGrid hesap adınızı kullandığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="37dab-166">Be sure to use your SendGrid account name rather than the email address you provided SendGrid.</span></span>

### <a name="enable-email-confirmation"></a><span data-ttu-id="37dab-167">E-posta onayı etkinleştir</span><span class="sxs-lookup"><span data-stu-id="37dab-167">Enable Email Confirmation</span></span>

 <span data-ttu-id="37dab-168">E-posta Onayı etkinleştirmek için aşağıdaki adımları kullanarak kayıt kodu değiştireceksiniz.</span><span class="sxs-lookup"><span data-stu-id="37dab-168">To enable email confirmation, you'll modify the registration code using the following steps.</span></span>  
 

1. <span data-ttu-id="37dab-169">İçinde *hesabı* açık klasör *Register.aspx.cs* arka plan kod ve güncelleştirme `CreateUser_Click` yöntemine aşağıdaki vurgulanmış değişiklikleri etkinleştirmek için:</span><span class="sxs-lookup"><span data-stu-id="37dab-169">In the *Account* folder, open the *Register.aspx.cs* code-behind and update the `CreateUser_Click` method to enable the following highlighted changes:</span></span> 

    [!code-csharp[Main](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/samples/sample4.cs?highlight=9-11)]
2. <span data-ttu-id="37dab-170">İçinde **Çözüm Gezgini**, sağ *Default.aspx* seçip **başlangıç sayfası olarak ayarla**.</span><span class="sxs-lookup"><span data-stu-id="37dab-170">In **Solution Explorer**, right-click *Default.aspx* and select **Set As Start Page**.</span></span>
3. <span data-ttu-id="37dab-171">Tuşlarına basarak uygulamayı çalıştırma **F5.**</span><span class="sxs-lookup"><span data-stu-id="37dab-171">Run the app by pressing **F5.**</span></span> <span data-ttu-id="37dab-172">Sayfası görüntülendikten sonra tıklayın **kaydetme** kayıt sayfasını görüntülemek için bağlantı.</span><span class="sxs-lookup"><span data-stu-id="37dab-172">After the page is displayed, click the **Register** link to display the Register page.</span></span>
4. <span data-ttu-id="37dab-173">E-postanızı ve parolanızı girin ve ardından tıklayın **kaydetme** SendGrid aracılığıyla bir e-posta iletisi göndermek için düğme.</span><span class="sxs-lookup"><span data-stu-id="37dab-173">Enter your email and password, then click the **Register** button to send an email message via SendGrid.</span></span>  
   <span data-ttu-id="37dab-174">Proje ve kod geçerli durumu, kullanıcının hesabını onaylanan henüz olsa da bunlar kayıt formunu tamamladıktan sonra oturum açmak izin verir.</span><span class="sxs-lookup"><span data-stu-id="37dab-174">The current state of your project and code will allow the user to log in once they complete the registration form, even though they haven't confirmed their account.</span></span>
5. <span data-ttu-id="37dab-175">E-posta hesabınızı denetleyin ve e-postanızı doğrulamak için bağlantıya tıklayın.</span><span class="sxs-lookup"><span data-stu-id="37dab-175">Check your email account and click on the link to confirm your email.</span></span>  
   <span data-ttu-id="37dab-176">Kayıt formunu gönderildikten sonra oturumunuz açılır.</span><span class="sxs-lookup"><span data-stu-id="37dab-176">Once you submit the registration form, you will be logged in.</span></span>  
    ![Örnek Web sitesi - oturum açıldı](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/_static/image4.png)

<a id="require"></a>
## <a name="require-email-confirmation-before-log-in"></a><span data-ttu-id="37dab-178">Oturum açma önce e-posta onayı gerektir</span><span class="sxs-lookup"><span data-stu-id="37dab-178">Require Email Confirmation Before Log In</span></span>

<span data-ttu-id="37dab-179">E-posta hesabı onayladıktan olsa da, bu noktada, tam olarak oturum açmış olması ve doğrulama e-postada yer alan bağlantıyı tıklatın ihtiyaç duymaz.</span><span class="sxs-lookup"><span data-stu-id="37dab-179">Although you have confirmed the email account, at this point you would not need to click on the link contained in the verification email to be fully signed-in.</span></span> <span data-ttu-id="37dab-180">Aşağıdaki bölümde, yeni kullanıcılar oturum önce onaylanan bir e-posta için (kimlik doğrulaması) gerektiren kodu değiştirir.</span><span class="sxs-lookup"><span data-stu-id="37dab-180">In the following section, you will modify the code requiring new users to have a confirmed email before they are logged in (authenticated).</span></span>

1. <span data-ttu-id="37dab-181">İçinde **Çözüm Gezgini** Visual Studio güncelleştirme `CreateUser_Click` olayında *Register.aspx.cs* gerideki bulunan *hesapları* klasörü Aşağıdaki vurgulanmış değişiklikler:</span><span class="sxs-lookup"><span data-stu-id="37dab-181">In **Solution Explorer** of Visual Studio, update the `CreateUser_Click` event in the *Register.aspx.cs* code-behind contained in the *Accounts* folder with the following highlighted changes:</span></span> 

    [!code-csharp[Main](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/samples/sample5.cs?highlight=13-14,17-21)]
2. <span data-ttu-id="37dab-182">Güncelleştirme `LogIn` yönteminde *Login.aspx.cs* arka plan kod vurgulanan aşağıdaki değişikliklerle birlikte:</span><span class="sxs-lookup"><span data-stu-id="37dab-182">Update the `LogIn` method in the *Login.aspx.cs* code-behind with the following highlighted changes:</span></span> 

    [!code-csharp[Main](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/samples/sample6.cs?highlight=9-19,45-46)]

### <a name="run-the-application"></a><span data-ttu-id="37dab-183">Uygulamayı çalıştırın</span><span class="sxs-lookup"><span data-stu-id="37dab-183">Run the Application</span></span>

 <span data-ttu-id="37dab-184">Bir kullanıcının e-posta adresi onaylanıp onaylanmadığını denetlemek için kod uyguladıysanız, hem de işlevlerini denetleyebilirsiniz **kaydetme** ve **oturum açma** sayfaları.</span><span class="sxs-lookup"><span data-stu-id="37dab-184">Now that you have implemented the code to check whether a user's email address has been confirmed, you can check the functionality on both the **Register** and **Login** pages.</span></span> 

1. <span data-ttu-id="37dab-185">Herhangi bir hesabı silme **AspNetUsers** test etmek istediğiniz e-posta diğer adını içeren tablo.</span><span class="sxs-lookup"><span data-stu-id="37dab-185">Delete any accounts in the **AspNetUsers** table that contain the email alias you wish to test.</span></span>
2. <span data-ttu-id="37dab-186">Uygulamayı çalıştırın (**F5**) ve e-posta adresinizi doğrulayıncaya kadar bir kullanıcı olarak kaydedilemiyor doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="37dab-186">Run the app (**F5**) and verify you cannot register as a user until you have confirmed your email address.</span></span>
3. <span data-ttu-id="37dab-187">Yeni bir hesapla oturum açmak yeni hesabınız yalnızca gönderildiği e-posta yoluyla onaylamadan önce çalışır.</span><span class="sxs-lookup"><span data-stu-id="37dab-187">Before confirming your new account via the email that was just sent, attempt to log in with the new account.</span></span>  
 <span data-ttu-id="37dab-188">Oturum ve onaylanan e-posta hesabına ihtiyacınız vardır görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="37dab-188">You'll see that you are unable to log in and that you must have a confirmed email account.</span></span>
4. <span data-ttu-id="37dab-189">E-posta adresinizi doğruladıktan sonra uygulamaya oturum açın.</span><span class="sxs-lookup"><span data-stu-id="37dab-189">Once you confirm your email address, log in to the app.</span></span>

<a id="reset"></a>
## <a name="password-recovery-and-reset"></a><span data-ttu-id="37dab-190">Parola kurtarma ve sıfırlama</span><span class="sxs-lookup"><span data-stu-id="37dab-190">Password Recovery and Reset</span></span>

1. <span data-ttu-id="37dab-191">Visual Studio'da yorum karakterleri Kaldır `Forgot` yöntemi *Forgot.aspx.cs* gerideki bulunan *hesabı* yöntemi olarak görünmesi klasörü izler:</span><span class="sxs-lookup"><span data-stu-id="37dab-191">In Visual Studio, remove the comment characters from the `Forgot` method in the *Forgot.aspx.cs* code-behind contained in the *Account* folder, so that the method appears as follows:</span></span> 

    [!code-csharp[Main](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/samples/sample7.cs?highlight=16-18)]
2. <span data-ttu-id="37dab-192">Açık *Login.aspx* sayfası.</span><span class="sxs-lookup"><span data-stu-id="37dab-192">Open the *Login.aspx* page.</span></span> <span data-ttu-id="37dab-193">Sonundaki biçimlendirmeyi Değiştir **loginForm** aşağıda vurgulanan bölüm:</span><span class="sxs-lookup"><span data-stu-id="37dab-193">Replace the markup near the end of the **loginForm** section as highlighted below:</span></span> 

    [!code-aspx[Main](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/samples/sample8.aspx?highlight=52-53)]
3. <span data-ttu-id="37dab-194">Açık *Login.aspx.cs* arka plan kod ve sarı renkle vurgulanmış kod aşağıdaki satırı açıklamadan kaldırmasına `Page_Load` olay işleyicisi:</span><span class="sxs-lookup"><span data-stu-id="37dab-194">Open the *Login.aspx.cs* code-behind and uncomment the following line of code highlighted in yellow from the `Page_Load` event handler:</span></span> 

    [!code-csharp[Main](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/samples/sample9.cs?highlight=5)]
4. <span data-ttu-id="37dab-195">Tuşlarına basarak uygulamayı çalıştırma **F5.**</span><span class="sxs-lookup"><span data-stu-id="37dab-195">Run the app by pressing **F5.**</span></span> <span data-ttu-id="37dab-196">Sayfası görüntülendikten sonra tıklayın **oturum** bağlantı.</span><span class="sxs-lookup"><span data-stu-id="37dab-196">After the page is displayed, click the **Log in** link.</span></span>
5. <span data-ttu-id="37dab-197">Tıklayın **parolanızı mı unuttunuz?** görüntülemek için bağlantıyı **parolamı unuttum** sayfası.</span><span class="sxs-lookup"><span data-stu-id="37dab-197">Click the **Forgot your password?** link to display the **Forgot Password** page.</span></span>
6. <span data-ttu-id="37dab-198">E-posta adresinizi girip __iade **Gönder** bir e-posta yığınlamanız parolanızı sıfırlamak, adresine gönderecek şekilde düğmesi.</span><span class="sxs-lookup"><span data-stu-id="37dab-198">Enter your email address and click the **Submit** button to send an email to your address which will allow you to reset your password.</span></span>   
   <span data-ttu-id="37dab-199">E-posta hesabınızı kontrol edin ve görüntülemek için bağlantıya tıklayın **parola sıfırlama** sayfası.</span><span class="sxs-lookup"><span data-stu-id="37dab-199">Check your email account and click on the link to display the **Reset Password** page.</span></span>
7. <span data-ttu-id="37dab-200">Üzerinde **parola sıfırlama** , e-posta, parola ve onay parolası girin.</span><span class="sxs-lookup"><span data-stu-id="37dab-200">On the **Reset Password** page, enter your email, password, and confirmed password.</span></span> <span data-ttu-id="37dab-201">Ardından, basın **sıfırlama** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="37dab-201">Then, press the **Reset** button.</span></span>  
   <span data-ttu-id="37dab-202">Parolanızı başarıyla sıfırladığınızda **parolanın değiştirilmesi** sayfası görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="37dab-202">When you successfully reset your password, the **Password Changed** page will be displayed.</span></span> <span data-ttu-id="37dab-203">Artık yeni parolanızla oturum açabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="37dab-203">Now you can log in with your new password.</span></span>

<a id="rsend"></a>
## <a name="resend-email-confirmation-link"></a><span data-ttu-id="37dab-204">E-posta doğrulama bağlantısını yeniden gönder</span><span class="sxs-lookup"><span data-stu-id="37dab-204">Resend Email Confirmation Link</span></span>

<span data-ttu-id="37dab-205">Bir kullanıcı yeni bir yerel hesap oluşturulduktan sonra kullanıcılar oturum açmadan önce kullanmak için gerekli onay bağlantısını e-posta gönderilir.</span><span class="sxs-lookup"><span data-stu-id="37dab-205">Once a user creates a new local account, they are emailed a confirmation link they are required to use before they can log on.</span></span> <span data-ttu-id="37dab-206">Kullanıcı onay e-postayı yanlışlıkla siler veya hiç e-posta geldiğinde, bunlar yeniden gönderilen onay bağlantısının gerekir.</span><span class="sxs-lookup"><span data-stu-id="37dab-206">If the user accidentally deletes the confirmation email, or the email never arrives, they will need the confirmation link sent again.</span></span> <span data-ttu-id="37dab-207">Aşağıdaki kod değişiklikleri, bunu etkinleştirmek gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="37dab-207">The following code changes show how to enable this.</span></span>

1. <span data-ttu-id="37dab-208">Visual Studio'da açın **Login.aspx.cs** arka plan kod ve sonra aşağıdaki olay işleyicisini eklemek `LogIn` olay işleyicisi:</span><span class="sxs-lookup"><span data-stu-id="37dab-208">In Visual Studio, open the **Login.aspx.cs** code-behind and add the following event handler after the `LogIn` event handler:</span></span>   

    [!code-csharp[Main](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/samples/sample10.cs)]
2. <span data-ttu-id="37dab-209">Değiştirme `LogIn` olay işleyicisinde *Login.aspx.cs* gibi sarı ile vurgulanmış kodu değiştirerek kodu arka plan:</span><span class="sxs-lookup"><span data-stu-id="37dab-209">Modify the `LogIn` event handler in the *Login.aspx.cs* code-behind by changing the code highlighted in yellow as follows:</span></span> 

    [!code-csharp[Main](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/samples/sample11.cs?highlight=15-17)]
3. <span data-ttu-id="37dab-210">Güncelleştirme *Login.aspx* gibi sarı ile vurgulanmış kodu ekleyerek, sayfa:</span><span class="sxs-lookup"><span data-stu-id="37dab-210">Update the *Login.aspx* page by adding the code highlighted in yellow as follows:</span></span> 

    [!code-aspx[Main](create-a-secure-aspnet-web-forms-app-with-user-registration-email-confirmation-and-password-reset/samples/sample12.aspx?highlight=45-46)]
4. <span data-ttu-id="37dab-211">Herhangi bir hesabı silme **AspNetUsers** test etmek istediğiniz e-posta diğer adını içeren tablo.</span><span class="sxs-lookup"><span data-stu-id="37dab-211">Delete any accounts in the **AspNetUsers** table that contain the email alias you wish to test.</span></span>
5. <span data-ttu-id="37dab-212">Uygulamayı çalıştırın (**F5**) ve e-posta adresinizi kaydedin.</span><span class="sxs-lookup"><span data-stu-id="37dab-212">Run the app (**F5**) and register your email address.</span></span>
6. <span data-ttu-id="37dab-213">Yeni bir hesapla oturum açmak yeni hesabınız yalnızca gönderildiği e-posta yoluyla onaylamadan önce çalışır.</span><span class="sxs-lookup"><span data-stu-id="37dab-213">Before confirming your new account via the email that was just sent, attempt to log in with the new account.</span></span>  
   <span data-ttu-id="37dab-214">Oturum ve onaylanan e-posta hesabına ihtiyacınız vardır görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="37dab-214">You'll see that you are unable to log in and that you must have a confirmed email account.</span></span> <span data-ttu-id="37dab-215">Ayrıca, e-posta hesabınız artık bir onay iletisi yeniden gönderebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="37dab-215">In addition, you can now resend a confirmation message to your email account.</span></span>
7. <span data-ttu-id="37dab-216">E-posta adresi ve parola girmeniz tuşuna **yeniden gönder onay** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="37dab-216">Enter your email address and password, then press the **Resend confirmation** button.</span></span>
8. <span data-ttu-id="37dab-217">Yeni gönderilen e-posta iletisini temel alarak e-posta adresinizi doğruladıktan sonra uygulamaya oturum açın.</span><span class="sxs-lookup"><span data-stu-id="37dab-217">Once you confirm your email address based on the newly sent email message, log in to the app.</span></span>

<a id="dbg"></a>
## <a name="troubleshooting-the-app"></a><span data-ttu-id="37dab-218">Uygulama sorunlarını giderme</span><span class="sxs-lookup"><span data-stu-id="37dab-218">Troubleshooting the App</span></span>

<span data-ttu-id="37dab-219">Kimlik bilgilerinizi doğrulamak için bağlantı içeren bir e-posta almazsanız:</span><span class="sxs-lookup"><span data-stu-id="37dab-219">If you don't receive an email containing the link to verify your credentials:</span></span>

- <span data-ttu-id="37dab-220">Önemsiz ya da istenmeyen posta klasörünüzü kontrol edin.</span><span class="sxs-lookup"><span data-stu-id="37dab-220">Check your junk or spam folder.</span></span>
- <span data-ttu-id="37dab-221">SendGrid hesabınızda oturum açın ve tıklayarak [e-posta etkinliğinin bağlantı](https://sendgrid.com/logs/index).</span><span class="sxs-lookup"><span data-stu-id="37dab-221">Log into your SendGrid account and click on the [Email Activity link](https://sendgrid.com/logs/index).</span></span>
- <span data-ttu-id="37dab-222">Olun, SendGrid kullanıcı hesabı adı olarak kullanılan belirli bir *Web.config* SendGrid hesabı e-posta adresinizi yerine değeri.</span><span class="sxs-lookup"><span data-stu-id="37dab-222">Be certain you used your SendGrid user account name as a *Web.config* value rather than your SendGrid account email address.</span></span>

<a id="addRes"></a>
## <a name="additional-resources"></a><span data-ttu-id="37dab-223">Ek Kaynaklar</span><span class="sxs-lookup"><span data-stu-id="37dab-223">Additional Resources</span></span>

- [<span data-ttu-id="37dab-224">Bağlantılar ASP.NET Identity önerilen kaynaklar</span><span class="sxs-lookup"><span data-stu-id="37dab-224">Links to ASP.NET Identity Recommended Resources</span></span>](../../../identity/overview/getting-started/aspnet-identity-recommended-resources.md)
- [<span data-ttu-id="37dab-225">Hesap onaylama ve parola kurtarma ASP.NET Identity ile</span><span class="sxs-lookup"><span data-stu-id="37dab-225">Account Confirmation and Password Recovery with ASP.NET Identity</span></span>](../../../identity/overview/features-api/account-confirmation-and-password-recovery-with-aspnet-identity.md)
- [<span data-ttu-id="37dab-226">ASP.NET Web Forms öğretici serisinin - bir OAuth 2.0 Sağlayıcısı Ekle</span><span class="sxs-lookup"><span data-stu-id="37dab-226">ASP.NET Web Forms tutorial series - Add an OAuth 2.0 Provider</span></span>](../getting-started/getting-started-with-aspnet-45-web-forms/checkout-and-payment-with-paypal.md#OAuthWebForms)
- [<span data-ttu-id="37dab-227">Azure App Service'e bir üyelik, OAuth ve SQL veritabanı ile güvenli bir ASP.NET Web Forms uygulaması dağıtma</span><span class="sxs-lookup"><span data-stu-id="37dab-227">Deploy a Secure ASP.NET Web Forms App with Membership, OAuth, and SQL Database to Azure App Service</span></span>](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/)
- [<span data-ttu-id="37dab-228">ASP.NET Web Forms öğretici serisinin - projesi için SSL'yi etkinleştir</span><span class="sxs-lookup"><span data-stu-id="37dab-228">ASP.NET Web Forms tutorial series - Enable SSL for the Project</span></span>](../getting-started/getting-started-with-aspnet-45-web-forms/checkout-and-payment-with-paypal.md#SSLWebForms)
