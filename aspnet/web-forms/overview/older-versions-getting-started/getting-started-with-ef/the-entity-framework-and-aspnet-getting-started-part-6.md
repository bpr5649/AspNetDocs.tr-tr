---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
title: Entity Framework 4,0 Database First ve ASP.NET 4 Web Forms-Bölüm 6 | ile çalışmaya başlama Microsoft Docs
author: tdykstra
description: Contoso Üniversitesi örnek Web uygulaması, Entity Framework kullanarak nasıl ASP.NET Web Forms uygulamalar oluşturacağınızı gösterir. Örnek uygulama...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: 994a5496-c648-4830-b03c-55bb43f325d2
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
msc.type: authoredcontent
ms.openlocfilehash: 8bfbe74f90eb03ea9aab7610842ef2578e80d113
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78564227"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-6"></a><span data-ttu-id="1e9e3-104">Entity Framework 4,0 Database First ve ASP.NET 4 Web Forms ile çalışmaya başlama-Bölüm 6</span><span class="sxs-lookup"><span data-stu-id="1e9e3-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 6</span></span>

<span data-ttu-id="1e9e3-105">[Tom Dykstra](https://github.com/tdykstra) tarafından</span><span class="sxs-lookup"><span data-stu-id="1e9e3-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="1e9e3-106">Contoso Üniversitesi örnek Web uygulaması, 4,0 ve Visual Studio 2010 Entity Framework kullanarak nasıl ASP.NET Web Forms uygulamalar oluşturacağınızı gösterir.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="1e9e3-107">Öğretici serisi hakkında daha fazla bilgi için, [serideki ilk öğreticiye](the-entity-framework-and-aspnet-getting-started-part-1.md) bakın</span><span class="sxs-lookup"><span data-stu-id="1e9e3-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="implementing-table-per-hierarchy-inheritance"></a><span data-ttu-id="1e9e3-108">Tablo başına devralmayı uygulama</span><span class="sxs-lookup"><span data-stu-id="1e9e3-108">Implementing Table-per-Hierarchy Inheritance</span></span>

<span data-ttu-id="1e9e3-109">Önceki öğreticide, ilişki ekleyerek ve silerek ve var olan bir varlıkla ilişkisi olan yeni bir varlık ekleyerek ilgili verilerle çalıştık.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-109">In the previous tutorial you worked with related data by adding and deleting relationships and by adding a new entity that had a relationship to an existing entity.</span></span> <span data-ttu-id="1e9e3-110">Bu öğretici, veri modelinde devralmayı nasıl uygulayacağınızı gösterir.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-110">This tutorial will show you how to implement inheritance in the data model.</span></span>

<span data-ttu-id="1e9e3-111">Nesne odaklı programlamada, ilgili sınıflarla çalışmayı kolaylaştırmak için devralmayı kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-111">In object-oriented programming, you can use inheritance to make it easier to work with related classes.</span></span> <span data-ttu-id="1e9e3-112">Örneğin, `Person` temel sınıfından türetilen `Instructor` ve `Student` sınıfları oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-112">For example, you could create `Instructor` and `Student` classes that derive from a `Person` base class.</span></span> <span data-ttu-id="1e9e3-113">Entity Framework varlıklar arasında aynı tür devralma yapılarını oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-113">You can create the same kinds of inheritance structures among entities in the Entity Framework.</span></span>

<span data-ttu-id="1e9e3-114">Öğreticinin bu bölümünde yeni Web sayfaları oluşturmayacağız.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-114">In this part of the tutorial, you won't create any new web pages.</span></span> <span data-ttu-id="1e9e3-115">Bunun yerine, veri modeline türetilmiş varlıklar ekler ve mevcut sayfaları yeni varlıkları kullanacak şekilde değiştirirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-115">Instead, you'll add derived entities to the data model and modify existing pages to use the new entities.</span></span>

## <a name="table-per-hierarchy-versus-table-per-type-inheritance"></a><span data-ttu-id="1e9e3-116">Tablo başına hiyerarşi ve tablo başına tür devralma</span><span class="sxs-lookup"><span data-stu-id="1e9e3-116">Table-per-Hierarchy versus Table-per-Type Inheritance</span></span>

<span data-ttu-id="1e9e3-117">Bir veritabanı, bir tablodaki veya birden çok tabloda ilgili nesneler hakkında bilgi saklayabilir.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-117">A database can store information about related objects in one table or in multiple tables.</span></span> <span data-ttu-id="1e9e3-118">Örneğin, `School` veritabanında `Person` tablo, tek bir tabloda hem öğrenciler hem de eğitmenler hakkında bilgiler içerir.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-118">For example, in the `School` database, the `Person` table includes information about both students and instructors in a single table.</span></span> <span data-ttu-id="1e9e3-119">Sütunlardan bazıları yalnızca Eğitmenler (`HireDate`), bazıları yalnızca öğrencilerle (`EnrollmentDate`) ve bazıları (`LastName`, `FirstName`) için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-119">Some of the columns apply only to instructors (`HireDate`), some only to students (`EnrollmentDate`), and some to both (`LastName`, `FirstName`).</span></span>

<span data-ttu-id="1e9e3-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span></span>

<span data-ttu-id="1e9e3-121">Entity Framework, `Person` varlığından devraldığı `Instructor` ve `Student` varlıkları oluşturacak şekilde yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-121">You can configure the Entity Framework to create `Instructor` and `Student` entities that inherit from the `Person` entity.</span></span> <span data-ttu-id="1e9e3-122">Tek bir veritabanı tablosundan bir varlık devralma yapısı oluşturmanın bu düzeni, *hiyerarşi başına tablo* (TPH) devralma olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-122">This pattern of generating an entity inheritance structure from a single database table is called *table-per-hierarchy* (TPH) inheritance.</span></span>

<span data-ttu-id="1e9e3-123">Kurslar için `School` veritabanı farklı bir model kullanır.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-123">For courses, the `School` database uses a different pattern.</span></span> <span data-ttu-id="1e9e3-124">Çevrimiçi kurslar ve yerinde kurslar, her birinin `Course` tablosuna işaret eden bir yabancı anahtarı olan ayrı tablolarda depolanır.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-124">Online courses and onsite courses are stored in separate tables, each of which has a foreign key that points to the `Course` table.</span></span> <span data-ttu-id="1e9e3-125">Her iki kurs türüyle ortak bilgiler yalnızca `Course` tablosunda depolanır.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-125">Information common to both course types is stored only in the `Course` table.</span></span>

<span data-ttu-id="1e9e3-126">[![image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-126">[![image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span></span>

<span data-ttu-id="1e9e3-127">Entity Framework veri modelini, `OnlineCourse` ve `OnsiteCourse` varlıkların `Course` varlıktan devralması için yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-127">You can configure the Entity Framework data model so that `OnlineCourse` and `OnsiteCourse` entities inherit from the `Course` entity.</span></span> <span data-ttu-id="1e9e3-128">Her tür için ayrı tablolardan bir varlık devralma yapısı oluşturma düzeni, tüm türlere ortak olan verileri depolayan bir tabloya geri başvuran her ayrı tabloyla birlikte *tür başına tablo* (TPT) devralma olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-128">This pattern of generating an entity inheritance structure from separate tables for each type, with each separate table referring back to a table that stores data common to all types, is called *table per type* (TPT) inheritance.</span></span>

<span data-ttu-id="1e9e3-129">TPH devralma desenleri genellikle TPT devralma desenlerinden daha iyi Entity Framework performans sağlar, çünkü TPT desenleri karmaşık JOIN sorgularına yol açabilir.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-129">TPH inheritance patterns generally deliver better performance in the Entity Framework than TPT inheritance patterns, because TPT patterns can result in complex join queries.</span></span> <span data-ttu-id="1e9e3-130">Bu izlenecek yol, TPH devralmanın nasıl uygulanacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-130">This walkthrough demonstrates how to implement TPH inheritance.</span></span> <span data-ttu-id="1e9e3-131">Bunu aşağıdaki adımları gerçekleştirerek gerçekleştirirsiniz:</span><span class="sxs-lookup"><span data-stu-id="1e9e3-131">You'll do that by performing the following steps:</span></span>

- <span data-ttu-id="1e9e3-132">`Person`türetilen `Instructor` ve `Student` varlık türleri oluşturun.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-132">Create `Instructor` and `Student` entity types that derive from `Person`.</span></span>
- <span data-ttu-id="1e9e3-133">Türetilmiş varlıklara ait özellikleri, `Person` varlığındaki türetilmiş varlıklara taşıyın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-133">Move properties that pertain to the derived entities from the `Person` entity to the derived entities.</span></span>
- <span data-ttu-id="1e9e3-134">Türetilmiş türlerdeki özelliklerde kısıtlamalar ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-134">Set constraints on properties in the derived types.</span></span>
- <span data-ttu-id="1e9e3-135">`Person` varlığını soyut bir varlık yapın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-135">Make the `Person` entity an abstract entity.</span></span>
- <span data-ttu-id="1e9e3-136">Her türetilmiş varlığı `Person` tablosuna eşleyin, bir `Person` satırının bu türetilmiş türü temsil edip etmediğini belirleyen bir koşul.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-136">Map each derived entity to the `Person` table with a condition that specifies how to determine whether a `Person` row represents that derived type.</span></span>

## <a name="adding-instructor-and-student-entities"></a><span data-ttu-id="1e9e3-137">Eğitmen ve öğrenci varlıkları ekleme</span><span class="sxs-lookup"><span data-stu-id="1e9e3-137">Adding Instructor and Student Entities</span></span>

<span data-ttu-id="1e9e3-138"><em>SchoolModel. edmx</em> dosyasını açın, tasarımcıda dolu olmayan bir alana sağ tıklayın, <strong>Ekle</strong>' yi ve ardından varlık ' ı seçin<em>.</em></span><span class="sxs-lookup"><span data-stu-id="1e9e3-138">Open the <em>SchoolModel.edmx</em> file, right-click an unoccupied area in the designer, select <strong>Add</strong>, then select <strong>Entity</strong><em>.</em></span></span>

<span data-ttu-id="1e9e3-139">[![image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-139">[![image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span></span>

<span data-ttu-id="1e9e3-140">**Varlık Ekle** iletişim kutusunda varlığı `Instructor` adlandırın ve **temel tür** seçeneğini `Person`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-140">In the **Add Entity** dialog box, name the entity `Instructor` and set its **Base type** option to `Person`.</span></span>

<span data-ttu-id="1e9e3-141">[![image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-141">[![image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span></span>

<span data-ttu-id="1e9e3-142">**Tamam**’a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-142">Click **OK**.</span></span> <span data-ttu-id="1e9e3-143">Tasarımcı, `Person` varlıktan türetilen bir `Instructor` varlığı oluşturur.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-143">The designer creates an `Instructor` entity that derives from the `Person` entity.</span></span> <span data-ttu-id="1e9e3-144">Yeni varlık henüz bir özelliğe sahip değil.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-144">The new entity does not yet have any properties.</span></span>

<span data-ttu-id="1e9e3-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span></span>

<span data-ttu-id="1e9e3-146">`Person`türeten `Student` bir varlık oluşturmak için yordamı tekrarlayın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-146">Repeat the procedure to create a `Student` entity that also derives from `Person`.</span></span>

<span data-ttu-id="1e9e3-147">Yalnızca Eğitmenler için işe alma tarihleri vardır, bu yüzden bu özelliği `Person` varlığındaki `Instructor` varlığına taşımanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-147">Only instructors have hire dates, so you need to move that property from the `Person` entity to the `Instructor` entity.</span></span> <span data-ttu-id="1e9e3-148">`Person` varlıkta, `HireDate` özelliğine sağ tıklayın ve **Kes**' e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-148">In the `Person` entity, right-click the `HireDate` property and click **Cut**.</span></span> <span data-ttu-id="1e9e3-149">Sonra `Instructor` varlığındaki **Özellikler** ' e sağ tıklayıp **Yapıştır**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-149">Then right-click **Properties** in the `Instructor` entity and click **Paste**.</span></span>

<span data-ttu-id="1e9e3-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span></span>

<span data-ttu-id="1e9e3-151">`Instructor` varlığının işe alınma tarihi null olamaz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-151">The hire date of an `Instructor` entity cannot be null.</span></span> <span data-ttu-id="1e9e3-152">`HireDate` özelliğine sağ tıklayın, **Özellikler**' e tıklayın ve ardından **özellikler** penceresinde `Nullable` `False`olarak değiştirin.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-152">Right-click the `HireDate` property, click **Properties**, and then in the **Properties** window change `Nullable` to `False`.</span></span>

<span data-ttu-id="1e9e3-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span></span>

<span data-ttu-id="1e9e3-154">`EnrollmentDate` özelliğini `Person` varlığındaki `Student` varlığına taşımak için yordamı tekrarlayın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-154">Repeat the procedure to move the `EnrollmentDate` property from the `Person` entity to the `Student` entity.</span></span> <span data-ttu-id="1e9e3-155">`EnrollmentDate` özelliği için `False` `Nullable` de ayarladığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-155">Make sure that you also set `Nullable` to `False` for the `EnrollmentDate` property.</span></span>

<span data-ttu-id="1e9e3-156">Artık `Person` bir varlık yalnızca `Instructor` ve `Student` varlıkları için ortak olan özelliklere sahip olduğuna göre (taşımakta olduğunuz gezinti özelliklerinden farklı olarak), varlık yalnızca devralma yapısında temel varlık olarak kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-156">Now that a `Person` entity has only the properties that are common to `Instructor` and `Student` entities (aside from navigation properties, which you're not moving), the entity can only be used as a base entity in the inheritance structure.</span></span> <span data-ttu-id="1e9e3-157">Bu nedenle, bunun bağımsız bir varlık olarak değerlendirilmeyeceğinden emin olmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-157">Therefore, you need to ensure that it's never treated as an independent entity.</span></span> <span data-ttu-id="1e9e3-158">`Person` varlığına sağ tıklayın, **Özellikler**' i seçin ve ardından **Özellikler** penceresinde **abstract** özelliğinin değerini **true**olarak değiştirin.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-158">Right-click the `Person` entity, select **Properties**, and then in the **Properties** window change the value of the **Abstract** property to **True**.</span></span>

<span data-ttu-id="1e9e3-159">[![image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-159">[![image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span></span>

## <a name="mapping-instructor-and-student-entities-to-the-person-table"></a><span data-ttu-id="1e9e3-160">Eğitmen ve öğrenci varlıklarını kişi tablosu ile eşleme</span><span class="sxs-lookup"><span data-stu-id="1e9e3-160">Mapping Instructor and Student Entities to the Person Table</span></span>

<span data-ttu-id="1e9e3-161">Şimdi veritabanındaki `Instructor` ve `Student` varlıkların ayırt edilmesine Entity Framework söylemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-161">Now you need to tell the Entity Framework how to differentiate between `Instructor` and `Student` entities in the database.</span></span>

<span data-ttu-id="1e9e3-162">`Instructor` varlığına sağ tıklayıp **Tablo eşleme**' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-162">Right-click the `Instructor` entity and select **Table Mapping**.</span></span> <span data-ttu-id="1e9e3-163">**Eşleme ayrıntıları** penceresinde **Tablo Ekle veya görüntüle** ' ye tıklayın ve **kişi**' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-163">In the **Mapping Details** window, click **Add a Table or View** and select **Person**.</span></span>

<span data-ttu-id="1e9e3-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span></span>

<span data-ttu-id="1e9e3-165">**Koşul Ekle**' ye tıklayın ve ardından **HireDate**' i seçin.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-165">Click **Add a Condition**, and then select **HireDate**.</span></span>

<span data-ttu-id="1e9e3-166">[![image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-166">[![image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span></span>

<span data-ttu-id="1e9e3-167">**İşleci** to ve **Value/Property değerlerini** **null** **olarak değiştirin** .</span><span class="sxs-lookup"><span data-stu-id="1e9e3-167">Change **Operator** to **Is** and **Value / Property** to **Not Null**.</span></span>

<span data-ttu-id="1e9e3-168">[![image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-168">[![image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span></span>

<span data-ttu-id="1e9e3-169">`EnrollmentDate` sütunu null olmadığında bu varlığın `Person` tabloya eşlendiğini belirterek `Students` varlık için yordamı tekrarlayın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-169">Repeat the procedure for the `Students` entity, specifying that this entity maps to the `Person` table when the `EnrollmentDate` column is not null.</span></span> <span data-ttu-id="1e9e3-170">Ardından veri modelini kaydedip kapatın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-170">Then save and close the data model.</span></span>

<span data-ttu-id="1e9e3-171">Yeni varlıkları sınıf olarak oluşturmak ve tasarımcıda kullanılabilir hale getirmek için projeyi derleyin.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-171">Build the project in order to create the new entities as classes and make them available in the designer.</span></span>

## <a name="using-the-instructor-and-student-entities"></a><span data-ttu-id="1e9e3-172">Eğitmen ve öğrenci varlıklarını kullanma</span><span class="sxs-lookup"><span data-stu-id="1e9e3-172">Using the Instructor and Student Entities</span></span>

<span data-ttu-id="1e9e3-173">Öğrenci ve eğitmen verileriyle çalışan Web sayfalarını oluşturduğunuzda, bunları `Person` varlık kümesine göre filtreleyerek ve döndürülen verileri öğrenciler veya eğitmenler 'e kısıtlamak için `HireDate` veya `EnrollmentDate` özelliğini filtrelürsünüz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-173">When you created the web pages that work with student and instructor data, you databound them to the `Person` entity set, and you filtered on the `HireDate` or `EnrollmentDate` property to restrict the returned data to students or instructors.</span></span> <span data-ttu-id="1e9e3-174">Ancak, artık her bir veri kaynağı denetimini `Person` varlık kümesine bağladığınızda, yalnızca `Student` veya `Instructor` varlık türlerinin seçili olması gerektiğini belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-174">However, now when you bind each data source control to the `Person` entity set, you can specify that only `Student` or `Instructor` entity types should be selected.</span></span> <span data-ttu-id="1e9e3-175">Entity Framework, `Person` varlık kümesindeki öğrencileri ve eğitmenleri ayırt etmek için, el ile girdiğiniz `Where` özellik ayarlarını bu şekilde kaldırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-175">Because the Entity Framework knows how to differentiate students and instructors in the `Person` entity set, you can remove the `Where` property settings you entered manually to do that.</span></span>

<span data-ttu-id="1e9e3-176">Visual Studio tasarımcısında, aşağıdaki örnekte gösterildiği gibi, bir `EntityDataSource` denetiminin, `Configure Data Source` sihirbazının **EntityTypeFilter** açılan kutusunda seçmesini gerektiren varlık türünü belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-176">In the Visual Studio Designer, you can specify the entity type that an `EntityDataSource` control should select in the **EntityTypeFilter** drop-down box of the `Configure Data Source` wizard, as shown in the following example.</span></span>

<span data-ttu-id="1e9e3-177">[![image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-177">[![image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span></span>

<span data-ttu-id="1e9e3-178">**Özellikler** penceresinde, aşağıdaki örnekte gösterildiği gibi artık gerekli olmayan `Where` yan tümce değerlerini kaldırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-178">And in the **Properties** window you can remove `Where` clause values that are no longer needed, as shown in the following example.</span></span>

<span data-ttu-id="1e9e3-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span></span>

<span data-ttu-id="1e9e3-180">Ancak, `EntityDataSource` denetimleri için biçimlendirmeyi `ContextTypeName` özniteliğini kullanacak şekilde değiştirdiğiniz için, zaten oluşturmuş olduğunuz `EntityDataSource` denetimlerinde **veri kaynağı yapılandırma** Sihirbazı 'nı çalıştıramazsınız.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-180">However, because you've changed the markup for `EntityDataSource` controls to use the `ContextTypeName` attribute, you cannot run the **Configure Data Source** wizard on `EntityDataSource` controls that you've already created.</span></span> <span data-ttu-id="1e9e3-181">Bu nedenle, bunun yerine biçimlendirmeyi değiştirerek gerekli değişiklikleri yaparsınız.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-181">Therefore, you'll make the required changes by changing markup instead.</span></span>

<span data-ttu-id="1e9e3-182">*Öğrenciler. aspx* sayfasını açın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-182">Open the *Students.aspx* page.</span></span> <span data-ttu-id="1e9e3-183">`StudentsEntityDataSource` denetiminde, `Where` özniteliğini kaldırın ve bir `EntityTypeFilter="Student"` özniteliği ekleyin.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-183">In the `StudentsEntityDataSource` control, remove the `Where` attribute and add an `EntityTypeFilter="Student"` attribute.</span></span> <span data-ttu-id="1e9e3-184">Biçimlendirme artık aşağıdaki örneğe benzeyecektir:</span><span class="sxs-lookup"><span data-stu-id="1e9e3-184">The markup will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample1.aspx)]

<span data-ttu-id="1e9e3-185">`EntityTypeFilter` özniteliği ayarlandığında, `EntityDataSource` denetiminin yalnızca belirtilen varlık türünü seçmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-185">Setting the `EntityTypeFilter` attribute ensures that the `EntityDataSource` control will select only the specified entity type.</span></span> <span data-ttu-id="1e9e3-186">Hem `Student` hem de `Instructor` varlık türlerini almak isterseniz, bu özniteliği ayarlayamazsınız.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-186">If you wanted to retrieve both `Student` and `Instructor` entity types, you would not set this attribute.</span></span> <span data-ttu-id="1e9e3-187">(Yalnızca salt okunurdur veri erişimi için denetim kullanıyorsanız, tek bir `EntityDataSource` denetimiyle birden fazla varlık türü alma seçeneğiniz vardır.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-187">(You have the option of retrieving multiple entity types with one `EntityDataSource` control only if you're using the control for read-only data access.</span></span> <span data-ttu-id="1e9e3-188">Varlıkları eklemek, güncelleştirmek veya silmek için bir `EntityDataSource` denetimi kullanıyorsanız ve bu, bağlandığı varlık kümesi birden çok tür içeriyorsa, yalnızca bir varlık türüyle çalışabilir ve bu özniteliği ayarlamanız gerekir.)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-188">If you're using an `EntityDataSource` control to insert, update, or delete entities, and if the entity set it's bound to can contain multiple types, you can only work with one entity type, and you have to set this attribute.)</span></span>

<span data-ttu-id="1e9e3-189">Özelliği tamamen kaldırmak yerine `Student` varlıkları seçen `Where` özniteliğinin yalnızca kısmını kaldır hariç `SearchEntityDataSource` denetimi için yordamı tekrarlayın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-189">Repeat the procedure for the `SearchEntityDataSource` control, except remove only the part of the `Where` attribute that selects `Student` entities instead of removing the property altogether.</span></span> <span data-ttu-id="1e9e3-190">Denetimin açılış etiketi artık aşağıdaki örneğe benzeyecektir:</span><span class="sxs-lookup"><span data-stu-id="1e9e3-190">The opening tag of the control will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample2.aspx)]

<span data-ttu-id="1e9e3-191">Daha önce olduğu gibi çalıştığını doğrulamak için sayfayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-191">Run the page to verify that it still works as it did before.</span></span>

<span data-ttu-id="1e9e3-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span></span>

<span data-ttu-id="1e9e3-193">Önceki öğreticilerde oluşturduğunuz aşağıdaki sayfaları `Person` varlıklar yerine yeni `Student` ve `Instructor` varlıkları kullanacak şekilde güncelleştirin ve ardından bunları daha önce olduğu gibi çalıştığını doğrulamak için çalıştırın:</span><span class="sxs-lookup"><span data-stu-id="1e9e3-193">Update the following pages that you created in earlier tutorials so that they use the new `Student` and `Instructor` entities instead of `Person` entities, then run them to verify that they work as they did before:</span></span>

- <span data-ttu-id="1e9e3-194">*StudentsAdd. aspx*içinde, `StudentsEntityDataSource` denetimine `EntityTypeFilter="Student"` ekleyin.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-194">In *StudentsAdd.aspx*, add `EntityTypeFilter="Student"` to the `StudentsEntityDataSource` control.</span></span> <span data-ttu-id="1e9e3-195">Biçimlendirme artık aşağıdaki örneğe benzeyecektir:</span><span class="sxs-lookup"><span data-stu-id="1e9e3-195">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample3.aspx)]

    <span data-ttu-id="1e9e3-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span></span>
- <span data-ttu-id="1e9e3-197">*About. aspx*dosyasında `StudentStatisticsEntityDataSource` denetimine `EntityTypeFilter="Student"` ekleyin ve `Where="it.EnrollmentDate is not null"`kaldırın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-197">In *About.aspx*, add `EntityTypeFilter="Student"` to the `StudentStatisticsEntityDataSource` control and remove `Where="it.EnrollmentDate is not null"`.</span></span> <span data-ttu-id="1e9e3-198">Biçimlendirme artık aşağıdaki örneğe benzeyecektir:</span><span class="sxs-lookup"><span data-stu-id="1e9e3-198">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample4.aspx)]

    <span data-ttu-id="1e9e3-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span></span>
- <span data-ttu-id="1e9e3-200">*Eğitmenler. aspx* ve *Komutctorskurslar. aspx*' de `InstructorsEntityDataSource` denetimine `EntityTypeFilter="Instructor"` ekleyin ve `Where="it.HireDate is not null"`kaldırın.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-200">In *Instructors.aspx* and *InstructorsCourses.aspx*, add `EntityTypeFilter="Instructor"` to the `InstructorsEntityDataSource` control and remove `Where="it.HireDate is not null"`.</span></span> <span data-ttu-id="1e9e3-201">*Eğitmenler. aspx* dosyasındaki biçimlendirme artık aşağıdaki örneğe benzer:</span><span class="sxs-lookup"><span data-stu-id="1e9e3-201">The markup in *Instructors.aspx* now resembles the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample5.aspx)]

    <span data-ttu-id="1e9e3-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span></span>

    <span data-ttu-id="1e9e3-203">*Komutctorskurslar. aspx* dosyasındaki biçimlendirme artık aşağıdaki örneğe benzeyecektir:</span><span class="sxs-lookup"><span data-stu-id="1e9e3-203">The markup in *InstructorsCourses.aspx* will now resemble the following example:</span></span>

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample6.aspx)]

    <span data-ttu-id="1e9e3-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span></span>

<span data-ttu-id="1e9e3-205">Bu değişikliklerin sonucu olarak, Contoso Üniversitesi uygulamasının bakımınızın bir kısmını çeşitli yollarla geliştirdiniz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-205">As a result of these changes, you've improved the Contoso University application's maintainability in several ways.</span></span> <span data-ttu-id="1e9e3-206">Seçim ve doğrulama mantığını UI katmanından ( *. aspx* Markup) taşımış ve veri erişim katmanının ayrılmaz bir parçası yaptı.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-206">You've moved selection and validation logic out of the UI layer (*.aspx* markup) and made it an integral part of the data access layer.</span></span> <span data-ttu-id="1e9e3-207">Bu, gelecekte veritabanı şeması veya veri modeli için yaptığınız değişikliklerden uygulama kodunuzu yalıtmaya yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-207">This helps to isolate your application code from changes that you might make in the future to the database schema or the data model.</span></span> <span data-ttu-id="1e9e3-208">Örneğin, öğrenciler öğretmen ' i yardımtı olarak işe alınır ve bu nedenle bir işe alım tarihi alabilir.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-208">For example, you could decide that students might be hired as teachers' aids and therefore would get a hire date.</span></span> <span data-ttu-id="1e9e3-209">Ardından öğrencileri Eğitmenler ' den ayırt etmek ve veri modelini güncelleştirmek için yeni bir özellik ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-209">You could then add a new property to differentiate students from instructors and update the data model.</span></span> <span data-ttu-id="1e9e3-210">Öğrenciler için bir işe alma tarihi göstermek istediğiniz durumlar dışında, Web uygulamasında hiçbir kodun değiştirilmesi gerekmez.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-210">No code in the web application would need to change except where you wanted to show a hire date for students.</span></span> <span data-ttu-id="1e9e3-211">`Instructor` ve `Student` varlıkların eklenmesinin başka bir avantajı da, kodunuzun gerçekten öğrenci veya eğitmenler olan `Person` nesneler tarafından daha kolay anlaşılamasıdır.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-211">Another benefit of adding `Instructor` and `Student` entities is that your code is more readily understandable than when it referred to `Person` objects that were actually students or instructors.</span></span>

<span data-ttu-id="1e9e3-212">Artık Entity Framework devralma deseninin uygulanması için bir yol gördünüz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-212">You've now seen one way to implement an inheritance pattern in the Entity Framework.</span></span> <span data-ttu-id="1e9e3-213">Aşağıdaki öğreticide, Entity Framework veritabanına nasıl eriştiği hakkında daha fazla denetime sahip olmak için saklı yordamları nasıl kullanacağınızı öğreneceksiniz.</span><span class="sxs-lookup"><span data-stu-id="1e9e3-213">In the following tutorial, you'll learn how to use stored procedures in order to have more control over how the Entity Framework accesses the database.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="1e9e3-214">[Önceki](the-entity-framework-and-aspnet-getting-started-part-5.md)
> [İleri](the-entity-framework-and-aspnet-getting-started-part-7.md)</span><span class="sxs-lookup"><span data-stu-id="1e9e3-214">[Previous](the-entity-framework-and-aspnet-getting-started-part-5.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-7.md)</span></span>
