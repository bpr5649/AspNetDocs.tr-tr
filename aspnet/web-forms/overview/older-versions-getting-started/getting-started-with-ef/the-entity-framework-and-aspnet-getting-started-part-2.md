---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
title: Entity Framework 4,0 Database First ve ASP.NET 4 Web Forms ile çalışmaya başlama-Bölüm 2 | Microsoft Docs
author: tdykstra
description: Contoso Üniversitesi örnek Web uygulaması, Entity Framework kullanarak nasıl ASP.NET Web Forms uygulamalar oluşturacağınızı gösterir. Örnek uygulama...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: fb63a326-a4ae-4b0c-a4f5-412327197216
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
msc.type: authoredcontent
ms.openlocfilehash: bd6a2e29e6f0df04e39be29160e2e08cc99c4706
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78566012"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-2"></a><span data-ttu-id="3b521-104">Entity Framework 4,0 Database First ve ASP.NET 4 Web Forms ile çalışmaya başlama-2. Bölüm</span><span class="sxs-lookup"><span data-stu-id="3b521-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 2</span></span>

<span data-ttu-id="3b521-105">[Tom Dykstra](https://github.com/tdykstra) tarafından</span><span class="sxs-lookup"><span data-stu-id="3b521-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="3b521-106">Contoso Üniversitesi örnek Web uygulaması, 4,0 ve Visual Studio 2010 Entity Framework kullanarak nasıl ASP.NET Web Forms uygulamalar oluşturacağınızı gösterir.</span><span class="sxs-lookup"><span data-stu-id="3b521-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="3b521-107">Öğretici serisi hakkında daha fazla bilgi için, [serideki ilk öğreticiye](the-entity-framework-and-aspnet-getting-started-part-1.md) bakın</span><span class="sxs-lookup"><span data-stu-id="3b521-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="the-entitydatasource-control"></a><span data-ttu-id="3b521-108">EntityDataSource denetimi</span><span class="sxs-lookup"><span data-stu-id="3b521-108">The EntityDataSource Control</span></span>

<span data-ttu-id="3b521-109">Önceki öğreticide bir Web sitesi, bir veritabanı ve bir veri modeli oluşturdunuz.</span><span class="sxs-lookup"><span data-stu-id="3b521-109">In the previous tutorial you created a web site, a database, and a data model.</span></span> <span data-ttu-id="3b521-110">Bu öğreticide, bir Entity Framework veri modeliyle çalışmayı kolaylaştırmak için ASP.NET tarafından sağlanan `EntityDataSource` denetimiyle çalışırsınız.</span><span class="sxs-lookup"><span data-stu-id="3b521-110">In this tutorial you work with the `EntityDataSource` control that ASP.NET provides in order to make it easy to work with an Entity Framework data model.</span></span> <span data-ttu-id="3b521-111">Öğrenci verilerini görüntüleme ve düzenlemeyle ilgili bir `GridView` denetimi, yeni öğrenciler eklemek için bir `DetailsView` denetimi ve bir departmanı seçmeye yönelik bir `DropDownList` denetimi oluşturacaksınız (Bu, daha sonra ilişkili kursları görüntülemek için kullanacaksınız).</span><span class="sxs-lookup"><span data-stu-id="3b521-111">You'll create a `GridView` control for displaying and editing student data, a `DetailsView` control for adding new students, and a `DropDownList` control for selecting a department (which you'll use later for displaying associated courses).</span></span>

<span data-ttu-id="3b521-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span></span>

<span data-ttu-id="3b521-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span></span>

<span data-ttu-id="3b521-114">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-114">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span></span>

<span data-ttu-id="3b521-115">Bu uygulamada, veritabanını güncelleştiren sayfalara giriş doğrulaması eklememezsiniz ve bir üretim uygulamasında gerekli olduğu gibi bazı hata işlemenin bir kısmı sağlam olmayacaktır.</span><span class="sxs-lookup"><span data-stu-id="3b521-115">Note that in this application you won't be adding input validation to pages that update the database, and some of the error handling will not be as robust as would be required in a production application.</span></span> <span data-ttu-id="3b521-116">Bu, öğreticiyi Entity Framework odaklanmasını ve çok uzun sürmasını önler.</span><span class="sxs-lookup"><span data-stu-id="3b521-116">That keeps the tutorial focused on the Entity Framework and keeps it from getting too long.</span></span> <span data-ttu-id="3b521-117">Bu özellikleri uygulamanıza ekleme hakkında ayrıntılı bilgi için bkz. [ASP.NET Web sayfalarında Kullanıcı girişini doğrulama](https://msdn.microsoft.com/library/7kh55542.aspx) ve [ASP.NET sayfalarında ve uygulamalarında hata işleme](https://msdn.microsoft.com/library/w16865z6.aspx).</span><span class="sxs-lookup"><span data-stu-id="3b521-117">For details about how to add these features to your application, see [Validating User Input in ASP.NET Web Pages](https://msdn.microsoft.com/library/7kh55542.aspx) and [Error Handling in ASP.NET Pages and Applications](https://msdn.microsoft.com/library/w16865z6.aspx).</span></span>

## <a name="adding-and-configuring-the-entitydatasource-control"></a><span data-ttu-id="3b521-118">EntityDataSource denetimini ekleme ve yapılandırma</span><span class="sxs-lookup"><span data-stu-id="3b521-118">Adding and Configuring the EntityDataSource Control</span></span>

<span data-ttu-id="3b521-119">`People` varlık kümesinden `Person` varlıkları okumak için bir `EntityDataSource` denetimi yapılandırarak başlayacaksınız.</span><span class="sxs-lookup"><span data-stu-id="3b521-119">You'll begin by configuring an `EntityDataSource` control to read `Person` entities from the `People` entity set.</span></span>

<span data-ttu-id="3b521-120">Visual Studio 'Yu açık olduğundan ve 1. bölümde oluşturduğunuz projeyle çalıştığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="3b521-120">Make sure you have Visual Studio open and that you're working with the project you created in part 1.</span></span> <span data-ttu-id="3b521-121">Projeyi veri modelini oluştururken veya yaptığınız son değişiklikten bu yana oluşturmadıysa, projeyi şimdi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3b521-121">If you haven't built the project since you created the data model or since the last change you made to it, build the project now.</span></span> <span data-ttu-id="3b521-122">Veri modelindeki değişiklikler, proje derlenene kadar tasarımcı için kullanılamaz hale getirilmez.</span><span class="sxs-lookup"><span data-stu-id="3b521-122">Changes to the data model are not made available to the designer until the project is built.</span></span>

<span data-ttu-id="3b521-123">**Ana sayfa şablonunu kullanarak Web formunu** kullanarak yeni bir Web sayfası oluşturun ve bunu *öğrenciler. aspx*olarak adlandırın.</span><span class="sxs-lookup"><span data-stu-id="3b521-123">Create a new web page using the **Web Form using Master Page** template, and name it *Students.aspx*.</span></span>

<span data-ttu-id="3b521-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span></span>

<span data-ttu-id="3b521-125">Ana sayfa olarak *site. Master* belirtin.</span><span class="sxs-lookup"><span data-stu-id="3b521-125">Specify *Site.Master* as the master page.</span></span> <span data-ttu-id="3b521-126">Bu öğreticiler için oluşturduğunuz tüm sayfalar, bu ana sayfayı kullanacaktır.</span><span class="sxs-lookup"><span data-stu-id="3b521-126">All of the pages you create for these tutorials will use this master page.</span></span>

<span data-ttu-id="3b521-127">[![Image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-127">[![Image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span></span>

<span data-ttu-id="3b521-128">**Kaynak** görünümü ' nde, aşağıdaki örnekte gösterildiği gibi `Content2`adlı `Content` denetimine `h2` başlığını ekleyin:</span><span class="sxs-lookup"><span data-stu-id="3b521-128">In **Source** view, add an `h2` heading to the `Content` control named `Content2`, as shown in the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample1.aspx)]

<span data-ttu-id="3b521-129">**Araç kutusunun** **veri** sekmesinden, sayfaya bir `EntityDataSource` denetimi sürükleyin, BAŞLıĞıN altına bırakın ve kimliği `StudentsEntityDataSource`olarak değiştirin:</span><span class="sxs-lookup"><span data-stu-id="3b521-129">From the **Data** tab of the **Toolbox**, drag an `EntityDataSource` control to the page, drop it below the heading, and change the ID to `StudentsEntityDataSource`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample2.aspx)]

<span data-ttu-id="3b521-130">**Tasarım** görünümüne geçiş yapın, veri kaynağı denetiminin akıllı etiketine tıklayın ve **veri kaynağını Yapılandır sihirbazını başlatmak** için **veri kaynağını Yapılandır** ' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3b521-130">Switch to **Design** view, click the data source control's smart tag, and then click **Configure Data Source** to launch the **Configure Data Source** wizard.</span></span>

<span data-ttu-id="3b521-131">[![Image01](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-131">[![Image01](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span></span>

<span data-ttu-id="3b521-132">**ObjectContext yapılandırma** Sihirbazı adımında, **adlandırılmış bağlantı**değeri olarak **sseçlentities** ' i seçin ve **DefaultContainerName** değeri olarak **sseçlentities** ' i seçin.</span><span class="sxs-lookup"><span data-stu-id="3b521-132">In the **Configure ObjectContext** wizard step, select **SchoolEntities** as the value for **Named Connection**, and select **SchoolEntities** as the **DefaultContainerName** value.</span></span> <span data-ttu-id="3b521-133">Ardından **İleri**'ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3b521-133">Then click **Next**.</span></span>

<span data-ttu-id="3b521-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span></span>

<span data-ttu-id="3b521-135">Note: Bu noktada aşağıdaki iletişim kutusunu alırsanız devam etmeden önce projeyi derlemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="3b521-135">Note: If you get the following dialog box at this point, you have to build the project before proceeding.</span></span>

<span data-ttu-id="3b521-136">[![Image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-136">[![Image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span></span>

<span data-ttu-id="3b521-137">**Veri seçimini Yapılandır** adımında, **entitySetName**değeri olarak **kişiler** ' i seçin.</span><span class="sxs-lookup"><span data-stu-id="3b521-137">In the **Configure Data Selection** step, select **People** as the value for **EntitySetName**.</span></span> <span data-ttu-id="3b521-138">**Seç**' in altında, **bir ll Seç** onay kutusunun seçili olduğundan emin olun.</span><span class="sxs-lookup"><span data-stu-id="3b521-138">Under **Select**, make sure the **Select A** ll check box is selected.</span></span> <span data-ttu-id="3b521-139">Ardından güncelleştirme ve silmeyi etkinleştirme seçeneklerini belirleyin.</span><span class="sxs-lookup"><span data-stu-id="3b521-139">Then select the options to enable update and delete.</span></span> <span data-ttu-id="3b521-140">İşiniz bittiğinde **son**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3b521-140">When you're done, click **Finish**.</span></span>

<span data-ttu-id="3b521-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span></span>

## <a name="configuring-database-rules-to-allow-deletion"></a><span data-ttu-id="3b521-142">Veritabanı kurallarını silmeye Izin verecek şekilde yapılandırma</span><span class="sxs-lookup"><span data-stu-id="3b521-142">Configuring Database Rules to Allow Deletion</span></span>

<span data-ttu-id="3b521-143">Kullanıcıların, diğer tablolarla (`Course`, `StudentGrade`ve `OfficeAssignment`) üç ilişkisi bulunan `Person` tablosundan öğrencileri silmesine imkan tanıyan bir sayfa oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="3b521-143">You'll be creating a page that lets users delete students from the `Person` table, which has three relationships with other tables (`Course`, `StudentGrade`, and `OfficeAssignment`).</span></span> <span data-ttu-id="3b521-144">Varsayılan olarak, diğer tablolardan birinde ilgili satırlar varsa, veritabanı `Person` bir satırı silmenizi önler.</span><span class="sxs-lookup"><span data-stu-id="3b521-144">By default, the database will prevent you from deleting a row in `Person` if there are related rows in one of the other tables.</span></span> <span data-ttu-id="3b521-145">Önce ilişkili satırları el ile silebilir veya bir `Person` satırı sildiğinizde veritabanını otomatik olarak silecek şekilde yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3b521-145">You can manually delete the related rows first, or you can configure the database to delete them automatically when you delete a `Person` row.</span></span> <span data-ttu-id="3b521-146">Bu öğreticideki öğrenci kayıtları için veritabanını ilgili verileri otomatik olarak silecek şekilde yapılandıracaksınız.</span><span class="sxs-lookup"><span data-stu-id="3b521-146">For student records in this tutorial, you'll configure the database to delete the related data automatically.</span></span> <span data-ttu-id="3b521-147">Öğrencilerin yalnızca `StudentGrade` tablosunda ilişkili satırları olabileceğinden, üç ilişkilerden yalnızca birini yapılandırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="3b521-147">Because students can have related rows only in the `StudentGrade` table, you need to configure only one of the three relationships.</span></span>

<span data-ttu-id="3b521-148">Bu öğreticiye giden projeden indirdiğiniz *okul. mdf* dosyasını kullanıyorsanız, bu yapılandırma değişiklikleri zaten yapıldığından bu bölümü atlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3b521-148">If you're using the *School.mdf* file that you downloaded from the project that goes with this tutorial, you can skip this section because these configuration changes have already been done.</span></span> <span data-ttu-id="3b521-149">Veritabanını bir komut dosyası çalıştırarak oluşturduysanız, aşağıdaki yordamları gerçekleştirerek veritabanını yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="3b521-149">If you created the database by running a script, configure the database by performing the following procedures.</span></span>

<span data-ttu-id="3b521-150">**Sunucu Gezgini**bölümünde, Bölüm 1 ' de oluşturduğunuz veritabanı diyagramını açın.</span><span class="sxs-lookup"><span data-stu-id="3b521-150">In **Server Explorer**, open the database diagram that you created in part 1.</span></span> <span data-ttu-id="3b521-151">`Person` ve `StudentGrade` arasındaki ilişkiye sağ tıklayın (tablolar arasındaki çizgi) ve ardından **Özellikler**' i seçin.</span><span class="sxs-lookup"><span data-stu-id="3b521-151">Right-click the relationship between `Person` and `StudentGrade` (the line between tables), and then select **Properties**.</span></span>

<span data-ttu-id="3b521-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span></span>

<span data-ttu-id="3b521-153">**Özellikler** penceresinde **INSERT ve Update Specification** ' ı genişletin ve **DeleteRule** özelliğini **Cascade**olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="3b521-153">In the **Properties** window, expand **INSERT and UPDATE Specification** and set the **DeleteRule** property to **Cascade**.</span></span>

<span data-ttu-id="3b521-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span></span>

<span data-ttu-id="3b521-155">Diyagramı kaydedin ve kapatın.</span><span class="sxs-lookup"><span data-stu-id="3b521-155">Save and close the diagram.</span></span> <span data-ttu-id="3b521-156">Veritabanını güncelleştirmek isteyip istemediğiniz sorulursa **Evet**' e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3b521-156">If you're asked whether you want to update the database, click **Yes**.</span></span>

<span data-ttu-id="3b521-157">Modelin bellekte bulunan varlıkların veritabanının yaptığı verilerle eşitlenmiş olduğundan emin olmak için, veri modelinde karşılık gelen kuralları ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="3b521-157">To make sure that the model keeps entities that are in memory in sync with what the database is doing, you must set corresponding rules in the data model.</span></span> <span data-ttu-id="3b521-158">*SchoolModel. edmx*' i açın, `Person` ve `StudentGrade`arasındaki ilişki hattına sağ tıklayın ve sonra **Özellikler**' i seçin.</span><span class="sxs-lookup"><span data-stu-id="3b521-158">Open *SchoolModel.edmx*, right-click the association line between `Person` and `StudentGrade`, and then select **Properties**.</span></span>

<span data-ttu-id="3b521-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span></span>

<span data-ttu-id="3b521-160">**Özellikler** penceresinde **uç1 OnDelete** öğesini **Cascade**olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="3b521-160">In the **Properties** window, set **End1 OnDelete** to **Cascade**.</span></span>

<span data-ttu-id="3b521-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span></span>

<span data-ttu-id="3b521-162">*SchoolModel. edmx* dosyasını kaydedip kapatın ve ardından projeyi yeniden derleyin.</span><span class="sxs-lookup"><span data-stu-id="3b521-162">Save and close the *SchoolModel.edmx* file, and then rebuild the project.</span></span>

<span data-ttu-id="3b521-163">Genel olarak, veritabanı değiştiğinde modelin eşitlenmesi için çeşitli seçenekleriniz vardır:</span><span class="sxs-lookup"><span data-stu-id="3b521-163">In general, when the database changes, you have several choices for how to sync up the model:</span></span>

- <span data-ttu-id="3b521-164">Belirli değişiklik türleri (tablo, görünüm veya saklı yordam ekleme veya yenileme gibi) için tasarımcıya sağ tıklayın ve tasarımcı değişiklikleri otomatik hale getirmek için **veritabanından modeli Güncelleştir** ' i seçin.</span><span class="sxs-lookup"><span data-stu-id="3b521-164">For certain kinds of changes (such as adding or refreshing tables, views, or stored procedures), right-click in the designer and select **Update Model from Database** to have the designer make the changes automatically.</span></span>
- <span data-ttu-id="3b521-165">Veri modelini yeniden oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3b521-165">Regenerate the data model.</span></span>
- <span data-ttu-id="3b521-166">Bunun gibi el ile güncelleştirmeler gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="3b521-166">Make manual updates like this one.</span></span>

<span data-ttu-id="3b521-167">Bu durumda, modeli yeniden oluşturabilirsiniz veya ilişki değişikliğinden etkilenen tabloları yeniledi, ancak alan adı değişikliğini bir daha (`FirstName` `FirstMidName`) yapmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="3b521-167">In this case, you could have regenerated the model or refreshed the tables affected by the relationship change, but then you'd have to make the field-name change again (from `FirstName` to `FirstMidName`).</span></span>

## <a name="using-a-gridview-control-to-read-and-update-entities"></a><span data-ttu-id="3b521-168">Varlıkları okumak ve güncelleştirmek için bir GridView denetimi kullanma</span><span class="sxs-lookup"><span data-stu-id="3b521-168">Using a GridView Control to Read and Update Entities</span></span>

<span data-ttu-id="3b521-169">Bu bölümde öğrencileri göstermek, güncelleştirmek veya silmek için `GridView` bir denetim kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="3b521-169">In this section you'll use a `GridView` control to display, update, or delete students.</span></span>

<span data-ttu-id="3b521-170">*Öğrenciler. aspx* ' i açın veya değiştirin ve **Tasarım** görünümü ' ne geçin.</span><span class="sxs-lookup"><span data-stu-id="3b521-170">Open or switch to *Students.aspx* and switch to **Design** view.</span></span> <span data-ttu-id="3b521-171">**Araç kutusunun** **veri** sekmesinden `EntityDataSource` denetiminin sağına bir `GridView` denetimini sürükleyin, `StudentsGridView`adlandırın, akıllı etikete tıklayın ve sonra veri kaynağı olarak **StudentsEntityDataSource** ' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="3b521-171">From the **Data** tab of the **Toolbox**, drag a `GridView` control to the right of the `EntityDataSource` control, name it `StudentsGridView`, click the smart tag, and then select **StudentsEntityDataSource** as the data source.</span></span>

<span data-ttu-id="3b521-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span></span>

<span data-ttu-id="3b521-173">**Şemayı Yenile** ' ye tıklayın (onaylamanız istenirse **Evet** ' e tıklayın), ardından **sayfalama etkinleştir**, **sıralamayı etkinleştir**, **Düzenle**etkinleştir ve **silmeyi etkinleştir**' e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3b521-173">Click **Refresh Schema** (click **Yes** if you're prompted to confirm), then click **Enable Paging**, **Enable Sorting**, **Enable Editing**, and **Enable Deleting**.</span></span>

<span data-ttu-id="3b521-174">**Sütunları Düzenle**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3b521-174">Click **Edit Columns**.</span></span>

<span data-ttu-id="3b521-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span></span>

<span data-ttu-id="3b521-176">**Seçili alanlar** kutusunda, **PersonID**, **LastName**ve **HireDate**öğesini silin.</span><span class="sxs-lookup"><span data-stu-id="3b521-176">In the **Selected fields** box, delete **PersonID**, **LastName**, and **HireDate**.</span></span> <span data-ttu-id="3b521-177">Genellikle kullanıcılara bir kayıt anahtarı görüntülememeniz, işe alım tarihi öğrencilerle ilgili değildir ve adın her iki parçasını da bir alana yerleştirip ad alanlarından yalnızca birine ihtiyacınız vardır.)</span><span class="sxs-lookup"><span data-stu-id="3b521-177">You typically don't display a record key to users, hire date is not relevant to students, and you'll put both parts of the name in one field, so you only need one of the name fields.)</span></span>

<span data-ttu-id="3b521-178">[![Image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-178">[![Image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span></span>

<span data-ttu-id="3b521-179">**Firstmidname** alanını seçin ve ardından **Bu alanı TemplateField olarak Dönüştür ' e**tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3b521-179">Select the **FirstMidName** field and then click **Convert this field into a TemplateField**.</span></span>

<span data-ttu-id="3b521-180">Kayıt **tarihi**için de aynısını yapın.</span><span class="sxs-lookup"><span data-stu-id="3b521-180">Do the same for **EnrollmentDate**.</span></span>

<span data-ttu-id="3b521-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span></span>

<span data-ttu-id="3b521-182">**Tamam** ' a tıklayın ve ardından **kaynak** görünümü ' ne geçin.</span><span class="sxs-lookup"><span data-stu-id="3b521-182">Click **OK** and then switch to **Source** view.</span></span> <span data-ttu-id="3b521-183">Kalan değişiklikler doğrudan biçimlendirmede daha kolay olacaktır.</span><span class="sxs-lookup"><span data-stu-id="3b521-183">The remaining changes will be easier to do directly in markup.</span></span> <span data-ttu-id="3b521-184">`GridView` denetim biçimlendirmesi artık aşağıdaki örneğe benzer şekilde görünür.</span><span class="sxs-lookup"><span data-stu-id="3b521-184">The `GridView` control markup now looks like the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample3.aspx)]

<span data-ttu-id="3b521-185">Komut alanından sonraki ilk sütun, şu anda ilk adı görüntüleyen bir şablon alanıdır.</span><span class="sxs-lookup"><span data-stu-id="3b521-185">The first column after the command field is a template field that currently displays the first name.</span></span> <span data-ttu-id="3b521-186">Bu şablon alanının işaretlemesini aşağıdaki örneğe benzer şekilde değiştirin:</span><span class="sxs-lookup"><span data-stu-id="3b521-186">Change the markup for this template field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample4.aspx)]

<span data-ttu-id="3b521-187">Görüntüleme modunda, iki `Label` denetim adı ve soyadı görüntüler.</span><span class="sxs-lookup"><span data-stu-id="3b521-187">In display mode, two `Label` controls display the first and last name.</span></span> <span data-ttu-id="3b521-188">Düzenleme modunda, adı ve soyadınızı değiştirebilmek için iki metin kutusu sağlanır.</span><span class="sxs-lookup"><span data-stu-id="3b521-188">In edit mode, two text boxes are provided so you can change the first and last name.</span></span> <span data-ttu-id="3b521-189">Görüntüleme modundaki `Label` denetimlerde olduğu gibi, doğrudan veritabanlarına bağlanan ASP.NET veri kaynağı denetimlerinde yaptığınız gibi `Bind` ve `Eval` ifadelerini tam olarak kullanırsınız.</span><span class="sxs-lookup"><span data-stu-id="3b521-189">As with the `Label` controls in display mode, you use `Bind` and `Eval` expressions exactly as you would with ASP.NET data source controls that connect directly to databases.</span></span> <span data-ttu-id="3b521-190">Tek fark, veritabanı sütunları yerine varlık özelliklerini belirtmektir.</span><span class="sxs-lookup"><span data-stu-id="3b521-190">The only difference is that you're specifying entity properties instead of database columns.</span></span>

<span data-ttu-id="3b521-191">Son sütun, kayıt tarihini gösteren bir şablon alanıdır.</span><span class="sxs-lookup"><span data-stu-id="3b521-191">The last column is a template field that displays the enrollment date.</span></span> <span data-ttu-id="3b521-192">Bu alanın işaretlemesini aşağıdaki örneğe benzer şekilde değiştirin:</span><span class="sxs-lookup"><span data-stu-id="3b521-192">Change the markup for this field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample5.aspx)]

<span data-ttu-id="3b521-193">Hem görüntüleme hem de düzenleme modunda, "{0, d}" biçim dizesi tarihin "kısa tarih" biçiminde görüntülenmesine neden olur.</span><span class="sxs-lookup"><span data-stu-id="3b521-193">In both display and edit mode, the format string "{0,d}" causes the date to be displayed in the "short date" format.</span></span> <span data-ttu-id="3b521-194">(Bilgisayarınız Bu öğreticide gösterilen ekran görüntülerinden farklı şekilde bu biçimi farklı şekilde görüntüleyecek şekilde yapılandırılmış olabilir.)</span><span class="sxs-lookup"><span data-stu-id="3b521-194">(Your computer might be configured to display this format differently from the screen images shown in this tutorial.)</span></span>

<span data-ttu-id="3b521-195">Bu şablon alanlarının her birinde, tasarımcının varsayılan olarak bir `Bind` ifadesi kullandığına, ancak bunu `ItemTemplate` öğelerindeki bir `Eval` ifadesine değiştirdiğine dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="3b521-195">Notice that in each of these template fields, the designer used a `Bind` expression by default, but you've changed that to an `Eval` expression in the `ItemTemplate` elements.</span></span> <span data-ttu-id="3b521-196">`Bind` ifade, verileri koddaki verilere erişmeniz gerekebilmeniz durumunda `GridView` denetim özelliklerinde kullanılabilir hale getirir.</span><span class="sxs-lookup"><span data-stu-id="3b521-196">The `Bind` expression makes the data available in `GridView` control properties in case you need to access the data in code.</span></span> <span data-ttu-id="3b521-197">Bu sayfada kodda bu verilere erişmeniz gerekmez, böylece daha verimli olan `Eval`kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3b521-197">In this page you don't need to access this data in code, so you can use `Eval`, which is more efficient.</span></span> <span data-ttu-id="3b521-198">Daha fazla bilgi için bkz. verilerinizi [veri denetimlerinden alma](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx).</span><span class="sxs-lookup"><span data-stu-id="3b521-198">For more information, see [Getting your data out of the data controls](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx).</span></span>

## <a name="revising-entitydatasource-control-markup-to-improve-performance"></a><span data-ttu-id="3b521-199">, Performansı artırmak için EntityDataSource Denetim biçimlendirmesini yeniden gözden</span><span class="sxs-lookup"><span data-stu-id="3b521-199">Revising EntityDataSource Control Markup to Improve Performance</span></span>

<span data-ttu-id="3b521-200">`EntityDataSource` denetimin biçimlendirmesinde, `ConnectionString` ve `DefaultContainerName` özniteliklerini kaldırın ve bunları bir `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` özniteliğiyle değiştirin.</span><span class="sxs-lookup"><span data-stu-id="3b521-200">In the markup for the `EntityDataSource` control, remove the `ConnectionString` and `DefaultContainerName` attributes and replace them with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="3b521-201">Bu, nesne bağlamı sınıfında sabit kodlanmış bir bağlantı kullanmanız gerekmediği müddetçe, her bir `EntityDataSource` denetimi oluşturduğunuzda yapmanız gereken bir değişiklik olacaktır.</span><span class="sxs-lookup"><span data-stu-id="3b521-201">This is a change you should make every time you create an `EntityDataSource` control, unless you need to use a connection that is different from the one that's hard-coded in the object context class.</span></span> <span data-ttu-id="3b521-202">`ContextTypeName` özniteliğini kullanmak aşağıdaki avantajları sağlar:</span><span class="sxs-lookup"><span data-stu-id="3b521-202">Using the `ContextTypeName` attribute provides the following benefits:</span></span>

- <span data-ttu-id="3b521-203">Daha iyi performans.</span><span class="sxs-lookup"><span data-stu-id="3b521-203">Better performance.</span></span> <span data-ttu-id="3b521-204">`EntityDataSource` denetimi `ConnectionString` ve `DefaultContainerName` özniteliklerini kullanarak veri modelini başlattığında, her istekte meta verileri yüklemek için ek çalışma gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="3b521-204">When the `EntityDataSource` control initializes the data model using the `ConnectionString` and `DefaultContainerName` attributes, it performs additional work to load metadata on every request.</span></span> <span data-ttu-id="3b521-205">`ContextTypeName` özniteliğini belirtirseniz bu gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="3b521-205">This isn't necessary if you specify the `ContextTypeName` attribute.</span></span>
- <span data-ttu-id="3b521-206">Yavaş yükleme, Entity Framework 4,0 ' de oluşturulan nesne bağlamı sınıflarında (Bu öğreticide `SchoolEntities` gibi) varsayılan olarak açıktır.</span><span class="sxs-lookup"><span data-stu-id="3b521-206">Lazy loading is turned on by default in generated object context classes (such as `SchoolEntities` in this tutorial) in Entity Framework 4.0.</span></span> <span data-ttu-id="3b521-207">Bu, gezinti özelliklerinin ihtiyacınız olduğunda otomatik olarak ilgili verilerle birlikte yüklendiği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="3b521-207">This means that navigation properties are loaded with related data automatically right when you need it.</span></span> <span data-ttu-id="3b521-208">Yavaş yükleme, Bu öğreticinin ilerleyen kısımlarında daha ayrıntılı olarak açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="3b521-208">Lazy loading is explained in more detail later in this tutorial.</span></span>
- <span data-ttu-id="3b521-209">Nesne bağlamı sınıfına uyguladığınız özelleştirmeler (Bu durumda `SchoolEntities` sınıfı), `EntityDataSource` denetimini kullanan denetimlerde kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="3b521-209">Any customizations that you've applied to the object context class (in this case, the `SchoolEntities` class) will be available to controls that use the `EntityDataSource` control.</span></span> <span data-ttu-id="3b521-210">Nesne bağlamı sınıfını özelleştirmek, bu öğretici serisinde kapsanmayan gelişmiş bir konudur.</span><span class="sxs-lookup"><span data-stu-id="3b521-210">Customizing the object context class is an advanced topic that is not covered in this tutorial series.</span></span> <span data-ttu-id="3b521-211">Daha fazla bilgi için bkz. [Entity Framework oluşturulan türleri genişletme](https://msdn.microsoft.com/library/dd456844.aspx).</span><span class="sxs-lookup"><span data-stu-id="3b521-211">For more information, see [Extending Entity Framework Generated Types](https://msdn.microsoft.com/library/dd456844.aspx).</span></span>

<span data-ttu-id="3b521-212">Biçimlendirme artık aşağıdaki örneğe benzeyecektir (özelliklerin sırası farklı olabilir):</span><span class="sxs-lookup"><span data-stu-id="3b521-212">The markup will now resemble the following example (the order of the properties might be different):</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample6.aspx)]

<span data-ttu-id="3b521-213">`EnableFlattening` özniteliği, yabancı anahtar sütunları varlık özellikleri olarak gösterilmediğinden, Entity Framework önceki sürümlerinde gerekli olan bir özelliğe başvurur.</span><span class="sxs-lookup"><span data-stu-id="3b521-213">The `EnableFlattening` attribute refers to a feature that was needed in earlier versions of the Entity Framework because foreign key columns were not exposed as entity properties.</span></span> <span data-ttu-id="3b521-214">Geçerli sürüm *yabancı anahtar ilişkilendirmelerini*kullanmayı mümkün kılar. Bu, yabancı anahtar özelliklerinin hepsi, çoktan çoğa ilişkilendirmeler için kullanıma sunulacak anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="3b521-214">The current version makes it possible to use *foreign key associations*, which means foreign key properties are exposed for all but many-to-many associations.</span></span> <span data-ttu-id="3b521-215">Varlıklarınızda yabancı anahtar özellikleri varsa ve [karmaşık tür](https://msdn.microsoft.com/library/bb738472.aspx)yoksa, bu özniteliği `False`olarak bırakabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3b521-215">If your entities have foreign key properties and no [complex types](https://msdn.microsoft.com/library/bb738472.aspx), you can leave this attribute set to `False`.</span></span> <span data-ttu-id="3b521-216">Varsayılan değer `True`olduğundan, biçimlendirmeden özniteliği kaldırmayın.</span><span class="sxs-lookup"><span data-stu-id="3b521-216">Don't remove the attribute from the markup, because the default value is `True`.</span></span> <span data-ttu-id="3b521-217">Daha fazla bilgi için bkz. [nesneleri düzleştirme (EntityDataSource)](https://msdn.microsoft.com/library/ee404746.aspx).</span><span class="sxs-lookup"><span data-stu-id="3b521-217">For more information, see [Flattening Objects (EntityDataSource)](https://msdn.microsoft.com/library/ee404746.aspx).</span></span>

<span data-ttu-id="3b521-218">Sayfayı çalıştırın ve öğrenciler ve çalışanların bir listesini görürsünüz (bir sonraki öğreticide yalnızca öğrencilerle filtrelemeniz gerekir).</span><span class="sxs-lookup"><span data-stu-id="3b521-218">Run the page and you see a list of students and employees (you'll filter for just students in the next tutorial).</span></span> <span data-ttu-id="3b521-219">Ad ve soyadı birlikte görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="3b521-219">The first name and last name are displayed together.</span></span>

<span data-ttu-id="3b521-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span></span>

<span data-ttu-id="3b521-221">Görüntüyü sıralamak için bir sütun adına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3b521-221">To sort the display, click a column name.</span></span>

<span data-ttu-id="3b521-222">Herhangi bir satırda **Düzenle** ' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3b521-222">Click **Edit** in any row.</span></span> <span data-ttu-id="3b521-223">İlk ve son adı değiştirebileceğiniz metin kutuları görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="3b521-223">Text boxes are displayed where you can change the first and last name.</span></span>

<span data-ttu-id="3b521-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span></span>

<span data-ttu-id="3b521-225">**Sil** düğmesi de geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="3b521-225">The **Delete** button also works.</span></span> <span data-ttu-id="3b521-226">Kayıt tarihi olan bir satır için Sil ' e tıklayın ve satır kaybolur.</span><span class="sxs-lookup"><span data-stu-id="3b521-226">Click delete for a row that has an enrollment date and the row disappears.</span></span> <span data-ttu-id="3b521-227">(Kayıt tarihi olmayan satırlar, Eğitmenler 'i temsil eder ve bir bilgi tutarlılığı hatası alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3b521-227">(Rows without an enrollment date represent instructors and you may get a referential integrity error.</span></span> <span data-ttu-id="3b521-228">Bir sonraki öğreticide, bu listeyi yalnızca öğrencileri içerecek şekilde filtrelemeniz gerekir.)</span><span class="sxs-lookup"><span data-stu-id="3b521-228">In the next tutorial you'll filter this list to include just students.)</span></span>

## <a name="displaying-data-from-a-navigation-property"></a><span data-ttu-id="3b521-229">Gezinti özelliğinden verileri görüntüleme</span><span class="sxs-lookup"><span data-stu-id="3b521-229">Displaying Data from a Navigation Property</span></span>

<span data-ttu-id="3b521-230">Şimdi her öğrencinin kaç kursu kayıtlı olduğunu öğrenmek istediğinizi varsayalım.</span><span class="sxs-lookup"><span data-stu-id="3b521-230">Now suppose you want to know how many courses each student is enrolled in.</span></span> <span data-ttu-id="3b521-231">Entity Framework, `Person` varlığının `StudentGrades` gezinti özelliğinde bu bilgileri sağlar.</span><span class="sxs-lookup"><span data-stu-id="3b521-231">The Entity Framework provides that information in the `StudentGrades` navigation property of the `Person` entity.</span></span> <span data-ttu-id="3b521-232">Veritabanı tasarımı bir ders atanmaksızın bir öğrenciye kayıt atanmasına izin vermediğinden, bu öğreticide, kurs ile ilişkili `StudentGrade` tablo satırında bir satıra sahip olduğunu varsayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3b521-232">Because the database design does not allow a student to be enrolled in a course without having a grade assigned, for this tutorial you can assume that having a row in the `StudentGrade` table row that is associated with a course is the same as being enrolled in the course.</span></span> <span data-ttu-id="3b521-233">(`Courses` gezinti özelliği yalnızca eğitmenler içindir.)</span><span class="sxs-lookup"><span data-stu-id="3b521-233">(The `Courses` navigation property is only for instructors.)</span></span>

<span data-ttu-id="3b521-234">`EntityDataSource` denetiminin `ContextTypeName` özniteliğini kullandığınızda, bu özelliğe eriştiğinizde Entity Framework bir gezinti özelliği için bilgileri otomatik olarak alır.</span><span class="sxs-lookup"><span data-stu-id="3b521-234">When you use the `ContextTypeName` attribute of the `EntityDataSource` control, the Entity Framework automatically retrieves information for a navigation property when you access that property.</span></span> <span data-ttu-id="3b521-235">Bu, *yavaş yükleme*olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="3b521-235">This is called *lazy loading*.</span></span> <span data-ttu-id="3b521-236">Ancak, bu, ek bilgi gerektiğinde veritabanına ayrı bir çağrı ile sonuçlandığından verimsiz olabilir.</span><span class="sxs-lookup"><span data-stu-id="3b521-236">However, this can be inefficient, because it results in a separate call to the database each time additional information is needed.</span></span> <span data-ttu-id="3b521-237">`EntityDataSource` denetimi tarafından döndürülen her varlık için gezinti özelliğinden veriye ihtiyacınız varsa, ilgili verileri veritabanına tek bir çağrıda varlıkla birlikte almak daha etkilidir.</span><span class="sxs-lookup"><span data-stu-id="3b521-237">If you need data from the navigation property for every entity returned by the `EntityDataSource` control, it's more efficient to retrieve the related data along with the entity itself in a single call to the database.</span></span> <span data-ttu-id="3b521-238">Buna *Eager yükleme*adı verilir ve `EntityDataSource` denetiminin `Include` özelliğini ayarlayarak bir gezinti özelliği için Eager yüklemesi belirlersiniz.</span><span class="sxs-lookup"><span data-stu-id="3b521-238">This is called *eager loading*, and you specify eager loading for a navigation property by setting the `Include` property of the `EntityDataSource` control.</span></span>

<span data-ttu-id="3b521-239">*Öğrenciler. aspx*' te her öğrenciye yönelik kurs sayısını göstermek istersiniz; bu nedenle yükleme en iyi seçenektir.</span><span class="sxs-lookup"><span data-stu-id="3b521-239">In *Students.aspx*, you want to show the number of courses for every student, so eager loading is the best choice.</span></span> <span data-ttu-id="3b521-240">Tüm öğrencileri görüntülüyor, ancak yalnızca birkaç tanesi için (biçimlendirmeye ek olarak bazı kod yazılmasını gerektiren) kurslar sayısını gösteriyorsa, geç yükleme daha iyi bir seçim olabilir.</span><span class="sxs-lookup"><span data-stu-id="3b521-240">If you were displaying all students but showing the number of courses only for a few of them (which would require writing some code in addition to the markup), lazy loading might be a better choice.</span></span>

<span data-ttu-id="3b521-241">*Öğrenciler. aspx*' i açın veya geçiş yapın, **Tasarım** görünümü ' nü değiştirin, `StudentsEntityDataSource`' yi seçin ve **Özellikler** penceresinde **Include** özelliğini **studentnotlar**olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="3b521-241">Open or switch to *Students.aspx*, switch to **Design** view, select `StudentsEntityDataSource`, and in the **Properties** window set the **Include** property to **StudentGrades**.</span></span> <span data-ttu-id="3b521-242">(Birden çok gezinti özelliği almak isterseniz, adlarını virgülle ayırarak belirtebilirsiniz; Örneğin, **Studentnotlar, kurslar**.)</span><span class="sxs-lookup"><span data-stu-id="3b521-242">(If you wanted to get multiple navigation properties, you could specify their names separated by commas — for example, **StudentGrades, Courses**.)</span></span>

<span data-ttu-id="3b521-243">[![Image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-243">[![Image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span></span>

<span data-ttu-id="3b521-244">**Kaynak** görünümüne geçin.</span><span class="sxs-lookup"><span data-stu-id="3b521-244">Switch to **Source** view.</span></span> <span data-ttu-id="3b521-245">`StudentsGridView` denetiminde, son `asp:TemplateField` öğesinden sonra aşağıdaki yeni şablon alanını ekleyin:</span><span class="sxs-lookup"><span data-stu-id="3b521-245">In the `StudentsGridView` control, after the last `asp:TemplateField` element, add the following new template field:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample7.aspx)]

<span data-ttu-id="3b521-246">`Eval` ifadesinde, gezinti özelliğine `StudentGrades`başvurabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3b521-246">In the `Eval` expression, you can reference the navigation property `StudentGrades`.</span></span> <span data-ttu-id="3b521-247">Bu özellik bir koleksiyon içerdiğinden, öğrencinin kaydolduğu kurslar sayısını göstermek için kullanabileceğiniz bir `Count` özelliğine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="3b521-247">Because this property contains a collection, it has a `Count` property that you can use to display the number of courses in which the student is enrolled.</span></span> <span data-ttu-id="3b521-248">Daha sonraki bir öğreticide, Koleksiyonlar yerine tek varlıklar içeren gezinti özelliklerinden verileri görüntülemeyi göreceksiniz.</span><span class="sxs-lookup"><span data-stu-id="3b521-248">In a later tutorial you'll see how to display data from navigation properties that contain single entities instead of collections.</span></span> <span data-ttu-id="3b521-249">(Verileri gezinti özelliklerinden göstermek için `BoundField` öğelerini kullanmayacağınızı unutmayın.)</span><span class="sxs-lookup"><span data-stu-id="3b521-249">(Note that you cannot use `BoundField` elements to display data from navigation properties.)</span></span>

<span data-ttu-id="3b521-250">Sayfayı çalıştırın ve şimdi her öğrencinin kaç kursu kayıtlı olduğunu görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="3b521-250">Run the page and you now see how many courses each student is enrolled in.</span></span>

<span data-ttu-id="3b521-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span></span>

## <a name="using-a-detailsview-control-to-insert-entities"></a><span data-ttu-id="3b521-252">Varlıkları eklemek için DetailsView denetimi kullanma</span><span class="sxs-lookup"><span data-stu-id="3b521-252">Using a DetailsView Control to Insert Entities</span></span>

<span data-ttu-id="3b521-253">Sonraki adım, yeni öğrenciler eklemenize olanak sağlayacak `DetailsView` denetimine sahip bir sayfa oluşturmaktır.</span><span class="sxs-lookup"><span data-stu-id="3b521-253">The next step is to create a page that has a `DetailsView` control that will let you add new students.</span></span> <span data-ttu-id="3b521-254">Tarayıcıyı kapatın ve ardından *site. Master* ana sayfasını kullanarak yeni bir Web sayfası oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3b521-254">Close the browser and then create a new web page using the *Site.Master* master page.</span></span> <span data-ttu-id="3b521-255">Sayfayı *StudentsAdd. aspx*olarak adlandırın ve ardından **kaynak** görünümüne geçin.</span><span class="sxs-lookup"><span data-stu-id="3b521-255">Name the page *StudentsAdd.aspx*, and then switch to **Source** view.</span></span>

<span data-ttu-id="3b521-256">`Content2`adlı `Content` denetimi için varolan biçimlendirmeyi değiştirmek üzere aşağıdaki biçimlendirmeyi ekleyin:</span><span class="sxs-lookup"><span data-stu-id="3b521-256">Add the following markup to replace the existing markup for the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample8.aspx)]

<span data-ttu-id="3b521-257">Bu biçimlendirme,, ekleme işlemini etkinleştirse de, *öğrenciler. aspx*içinde oluşturduğunuz birine benzer bir `EntityDataSource` denetimi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="3b521-257">This markup creates an `EntityDataSource` control that is similar to the one you created in *Students.aspx*, except it enables insertion.</span></span> <span data-ttu-id="3b521-258">`GridView` denetiminde olduğu gibi, `DetailsView` denetiminin bağlı alanları, varlık özelliklerine başvurmaları dışında, doğrudan bir veritabanına bağlanan bir veri denetimine yönelik olarak kodlanır.</span><span class="sxs-lookup"><span data-stu-id="3b521-258">As with the `GridView` control, the bound fields of the `DetailsView` control are coded exactly as they would be for a data control that connects directly to a database, except that they reference entity properties.</span></span> <span data-ttu-id="3b521-259">Bu durumda, `DetailsView` denetimi yalnızca satır eklemek için kullanılır, bu nedenle varsayılan modu `Insert`olarak ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="3b521-259">In this case, the `DetailsView` control is used only for inserting rows, so you have set the default mode to `Insert`.</span></span>

<span data-ttu-id="3b521-260">Sayfayı çalıştırın ve yeni bir öğrenci ekleyin.</span><span class="sxs-lookup"><span data-stu-id="3b521-260">Run the page and add a new student.</span></span>

<span data-ttu-id="3b521-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span></span>

<span data-ttu-id="3b521-262">Yeni bir öğrenci ekledikten sonra hiçbir şey gerçekleşmeyecektir, ancak artık *öğrenciler. aspx*çalıştırırsanız yeni öğrenci bilgilerini görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="3b521-262">Nothing will happen after you insert a new student, but if you now run *Students.aspx*, you'll see the new student information.</span></span>

## <a name="displaying-data-in-a-drop-down-list"></a><span data-ttu-id="3b521-263">Açılan listede verileri görüntüleme</span><span class="sxs-lookup"><span data-stu-id="3b521-263">Displaying Data in a Drop-Down List</span></span>

<span data-ttu-id="3b521-264">Aşağıdaki adımlarda, bir `DropDownList` denetimini bir `EntityDataSource` denetimini kullanarak bir varlık kümesine vereceksiniz.</span><span class="sxs-lookup"><span data-stu-id="3b521-264">In the following steps you'll databind a `DropDownList` control to an entity set using an `EntityDataSource` control.</span></span> <span data-ttu-id="3b521-265">Öğreticinin bu bölümünde, bu listede çok daha fazlasını yapamayacağız.</span><span class="sxs-lookup"><span data-stu-id="3b521-265">In this part of the tutorial, you won't do much with this list.</span></span> <span data-ttu-id="3b521-266">Daha sonraki bölümlerde, kullanıcıların departmanla ilişkili kursları görüntülemesi için bir departman seçmesini sağlamak üzere listeyi kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="3b521-266">In subsequent parts, though, you'll use the list to let users select a department to display courses associated with the department.</span></span>

<span data-ttu-id="3b521-267">*Kurslar. aspx*adlı yeni bir Web sayfası oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3b521-267">Create a new web page named *Courses.aspx*.</span></span> <span data-ttu-id="3b521-268">**Kaynak** görünümü ' nde, `Content2`adlı `Content` denetimine bir başlık ekleyin:</span><span class="sxs-lookup"><span data-stu-id="3b521-268">In **Source** view, add a heading to the `Content` control that's named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample9.aspx)]

<span data-ttu-id="3b521-269">**Tasarım** görünümü ' nde, daha önce yaptığınız gibi sayfaya bir `EntityDataSource` denetimi ekleyin, bu kez `DepartmentsEntityDataSource`adlandırın.</span><span class="sxs-lookup"><span data-stu-id="3b521-269">In **Design** view, add an `EntityDataSource` control to the page as you did before, except this time name it `DepartmentsEntityDataSource`.</span></span> <span data-ttu-id="3b521-270">**EntitySetName** değeri olarak **Departmanlar** ' ı seçin ve yalnızca **DepartmentID** ve **ad** özelliklerini seçin.</span><span class="sxs-lookup"><span data-stu-id="3b521-270">Select **Departments** as the **EntitySetName** value, and select only the **DepartmentID** and **Name** properties.</span></span>

<span data-ttu-id="3b521-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span></span>

<span data-ttu-id="3b521-272">**Araç kutusunun** **Standart** sekmesinden, sayfaya bir `DropDownList` denetimi sürükleyin, `DepartmentsDropDownList`adlandırın, akıllı etikete tıklayın ve **veri kaynağını seç** ' i seçerek **DataSource Yapılandırma Sihirbazı**'nı başlatın.</span><span class="sxs-lookup"><span data-stu-id="3b521-272">From the **Standard** tab of the **Toolbox**, drag a `DropDownList` control to the page, name it `DepartmentsDropDownList`, click the smart tag, and select **Choose Data Source** to start the **DataSource Configuration Wizard**.</span></span>

<span data-ttu-id="3b521-273">[![Image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-273">[![Image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span></span>

<span data-ttu-id="3b521-274">**Veri kaynağı seçin** adımında, veri kaynağı olarak **DepartmentsEntityDataSource** ' i seçin, **şemayı Yenile**' ye tıklayın ve ardından değer verisi alanı olarak görüntülenecek ve **DepartmentID** veri alanı olarak **ad** ' ı seçin.</span><span class="sxs-lookup"><span data-stu-id="3b521-274">In the **Choose a Data Source** step, select **DepartmentsEntityDataSource** as the data source, click **Refresh Schema**, and then select **Name** as the data field to display and **DepartmentID** as the value data field.</span></span> <span data-ttu-id="3b521-275">**Tamam**’a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3b521-275">Click **OK**.</span></span>

<span data-ttu-id="3b521-276">[![Image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-276">[![Image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span></span>

<span data-ttu-id="3b521-277">Entity Framework kullanarak denetimin kaynağını belirlemek için kullandığınız yöntem, varlıkları ve varlık özelliklerini belirtmediğimizden diğer ASP.NET veri kaynağı denetimleriyle aynıdır.</span><span class="sxs-lookup"><span data-stu-id="3b521-277">The method you use to databind the control using the Entity Framework is the same as with other ASP.NET data source controls except you're specifying entities and entity properties.</span></span>

<span data-ttu-id="3b521-278">**Kaynak** görünümüne geçin ve `DropDownList` denetiminden hemen önce "departmanı seçin:" ekleyin.</span><span class="sxs-lookup"><span data-stu-id="3b521-278">Switch to **Source** view and add "Select a department:" immediately before the `DropDownList` control.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample10.aspx)]

<span data-ttu-id="3b521-279">Bir anımsatıcı olarak, `ConnectionString` ve `DefaultContainerName` özniteliklerini bir `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` özniteliğiyle değiştirerek `EntityDataSource` denetimin işaretlemesini bu noktada değiştirin.</span><span class="sxs-lookup"><span data-stu-id="3b521-279">As a reminder, change the markup for the `EntityDataSource` control at this point by replacing the `ConnectionString` and `DefaultContainerName` attributes with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="3b521-280">`EntityDataSource` denetim işaretlemesini değiştirmeden önce veri kaynağı denetimine bağlı veriye bağlı denetim oluşturmanızın ardından, tasarımcı, veri bağlantılı denetimde bir **Şemayı yenileme** seçeneği sağlamadığı için genellikle en iyi seçenektir. Bu işlem, tasarımcı, verilere bağlı denetimde bir şema seçeneğini sunmayacak.</span><span class="sxs-lookup"><span data-stu-id="3b521-280">It's often best to wait until after you've created the data-bound control that is linked to the data source control before you change the `EntityDataSource` control markup, because after you make the change, the designer will not provide you with a **Refresh Schema** option in the data-bound control.</span></span>

<span data-ttu-id="3b521-281">Sayfayı çalıştırın ve açılan listeden bir departman seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3b521-281">Run the page and you can select a department from the drop-down list.</span></span>

<span data-ttu-id="3b521-282">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="3b521-282">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span></span>

<span data-ttu-id="3b521-283">Bu, `EntityDataSource` denetimini kullanmaya giriş işlemini tamamlar.</span><span class="sxs-lookup"><span data-stu-id="3b521-283">This completes the introduction to using the `EntityDataSource` control.</span></span> <span data-ttu-id="3b521-284">Bu denetimle çalışma, genellikle diğer ASP.NET veri kaynağı denetimleriyle çalışmaktan farklı değildir, ancak tablo ve sütun yerine varlıklara ve özelliklere başvurırsınız.</span><span class="sxs-lookup"><span data-stu-id="3b521-284">Working with this control is generally no different from working with other ASP.NET data source controls, except that you reference entities and properties instead of tables and columns.</span></span> <span data-ttu-id="3b521-285">Tek özel durum, gezinti özelliklerine erişmek istediğiniz durumdur.</span><span class="sxs-lookup"><span data-stu-id="3b521-285">The only exception is when you want to access navigation properties.</span></span> <span data-ttu-id="3b521-286">Sonraki öğreticide, `EntityDataSource` denetimi ile kullandığınız sözdiziminin, verileri filtreleyip, gruplandırdığınızda ve sipariş ettiğinizde diğer veri kaynağı denetimlerinden de farklı olabileceğini görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="3b521-286">In the next tutorial you'll see that the syntax you use with `EntityDataSource` control might also differ from other data source controls when you filter, group, and order data.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="3b521-287">[Önceki](the-entity-framework-and-aspnet-getting-started-part-1.md)
> [İleri](the-entity-framework-and-aspnet-getting-started-part-3.md)</span><span class="sxs-lookup"><span data-stu-id="3b521-287">[Previous](the-entity-framework-and-aspnet-getting-started-part-1.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-3.md)</span></span>
