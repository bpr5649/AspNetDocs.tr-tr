---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-3
title: Entity Framework 4,0 Database First ve ASP.NET 4 Web Forms-Bölüm 3 ' ü kullanmaya başlama | Microsoft Docs
author: tdykstra
description: Contoso Üniversitesi örnek Web uygulaması, Entity Framework kullanarak nasıl ASP.NET Web Forms uygulamalar oluşturacağınızı gösterir. Örnek uygulama...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: ccdc3f8c-2568-40a7-8f8b-3c23d2e05388
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-3
msc.type: authoredcontent
ms.openlocfilehash: 88debb11a9157dce9ff000b1cb459b876dbceaf3
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78643250"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-3"></a><span data-ttu-id="2c640-104">Entity Framework 4,0 Database First ve ASP.NET 4 Web Forms-Bölüm 3 ' ü kullanmaya başlama</span><span class="sxs-lookup"><span data-stu-id="2c640-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 3</span></span>

<span data-ttu-id="2c640-105">[Tom Dykstra](https://github.com/tdykstra) tarafından</span><span class="sxs-lookup"><span data-stu-id="2c640-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="2c640-106">Contoso Üniversitesi örnek Web uygulaması, 4,0 ve Visual Studio 2010 Entity Framework kullanarak nasıl ASP.NET Web Forms uygulamalar oluşturacağınızı gösterir.</span><span class="sxs-lookup"><span data-stu-id="2c640-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="2c640-107">Öğretici serisi hakkında daha fazla bilgi için, [serideki ilk öğreticiye](the-entity-framework-and-aspnet-getting-started-part-1.md) bakın</span><span class="sxs-lookup"><span data-stu-id="2c640-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="filtering-ordering-and-grouping-data"></a><span data-ttu-id="2c640-108">Verileri filtreleme, sıralama ve gruplama</span><span class="sxs-lookup"><span data-stu-id="2c640-108">Filtering, Ordering, and Grouping Data</span></span>

<span data-ttu-id="2c640-109">Önceki öğreticide, verileri göstermek ve düzenlemek için `EntityDataSource` denetimini kullandınız.</span><span class="sxs-lookup"><span data-stu-id="2c640-109">In the previous tutorial you used the `EntityDataSource` control to display and edit data.</span></span> <span data-ttu-id="2c640-110">Bu öğreticide, verileri filtreleyecek, sıralarız ve gruplarız.</span><span class="sxs-lookup"><span data-stu-id="2c640-110">In this tutorial you'll filter, order, and group data.</span></span> <span data-ttu-id="2c640-111">`EntityDataSource` denetiminin özelliklerini ayarlayarak bunu yaptığınızda söz dizimi diğer veri kaynağı denetimlerinden farklıdır.</span><span class="sxs-lookup"><span data-stu-id="2c640-111">When you do this by setting properties of the `EntityDataSource` control, the syntax is different from other data source controls.</span></span> <span data-ttu-id="2c640-112">Ancak gördüğünüz gibi, bu farklılıkları en aza indirmek için `QueryExtender` denetimini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2c640-112">As you'll see, however, you can use the `QueryExtender` control to minimize these differences.</span></span>

<span data-ttu-id="2c640-113">Öğrenciler için filtre uygulamak, ada göre sıralamak ve ad aramak için *öğrenciler. aspx* sayfasını değiştireceksiniz.</span><span class="sxs-lookup"><span data-stu-id="2c640-113">You'll change the *Students.aspx* page to filter for students, sort by name, and search on name.</span></span> <span data-ttu-id="2c640-114">Ayrıca, *Kurslar. aspx* sayfasını, seçilen departmanın kurslarını görüntüleyecek ve kurs adına göre arayacak şekilde değiştireceksiniz.</span><span class="sxs-lookup"><span data-stu-id="2c640-114">You'll also change the *Courses.aspx* page to display courses for the selected department and search for courses by name.</span></span> <span data-ttu-id="2c640-115">Son olarak, *About. aspx* sayfasına öğrenci istatistiklerini ekleyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="2c640-115">Finally, you'll add student statistics to the *About.aspx* page.</span></span>

<span data-ttu-id="2c640-116">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-116">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image1.png)</span></span>

<span data-ttu-id="2c640-117">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-117">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image3.png)</span></span>

<span data-ttu-id="2c640-118">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-118">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image5.png)</span></span>

<span data-ttu-id="2c640-119">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-119">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image7.png)</span></span>

## <a name="using-the-entitydatasource-where-property-to-filter-data"></a><span data-ttu-id="2c640-120">Verileri filtrelemek için EntityDataSource "Where" özelliğini kullanma</span><span class="sxs-lookup"><span data-stu-id="2c640-120">Using the EntityDataSource "Where" Property to Filter Data</span></span>

<span data-ttu-id="2c640-121">Önceki öğreticide oluşturduğunuz *öğrenciler. aspx* sayfasını açın.</span><span class="sxs-lookup"><span data-stu-id="2c640-121">Open the *Students.aspx* page that you created in the previous tutorial.</span></span> <span data-ttu-id="2c640-122">Şu anda yapılandırıldığı gibi, sayfadaki `GridView` denetim `People` varlık kümesindeki tüm adları görüntüler.</span><span class="sxs-lookup"><span data-stu-id="2c640-122">As currently configured, the `GridView` control in the page displays all the names from the `People` entity set.</span></span> <span data-ttu-id="2c640-123">Ancak, yalnızca, null olmayan kayıt tarihleri olan `Person` varlıkları seçerek bulabileceğiniz öğrencileri göstermek istersiniz.</span><span class="sxs-lookup"><span data-stu-id="2c640-123">However, you want to show only students, which you can find by selecting `Person` entities that have non-null enrollment dates.</span></span>

<span data-ttu-id="2c640-124">**Tasarım** görünümüne geçin ve `EntityDataSource` denetimi seçin.</span><span class="sxs-lookup"><span data-stu-id="2c640-124">Switch to **Design** view and select the `EntityDataSource` control.</span></span> <span data-ttu-id="2c640-125">**Özellikler** penceresinde `Where` özelliğini `it.EnrollmentDate is not null`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="2c640-125">In the **Properties** window, set the `Where` property to `it.EnrollmentDate is not null`.</span></span>

<span data-ttu-id="2c640-126">[![Image01](the-entity-framework-and-aspnet-getting-started-part-3/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-126">[![Image01](the-entity-framework-and-aspnet-getting-started-part-3/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image9.png)</span></span>

<span data-ttu-id="2c640-127">`EntityDataSource` denetiminin `Where` özelliğinde kullandığınız sözdizimi Entity SQL.</span><span class="sxs-lookup"><span data-stu-id="2c640-127">The syntax you use in the `Where` property of the `EntityDataSource` control is Entity SQL.</span></span> <span data-ttu-id="2c640-128">Entity SQL Transact-SQL ' e benzer, ancak veritabanı nesneleri yerine varlıklarla birlikte kullanılmak üzere özelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="2c640-128">Entity SQL is similar to Transact-SQL, but it's customized for use with entities rather than database objects.</span></span> <span data-ttu-id="2c640-129">İfade `it.EnrollmentDate is not null`, `it` sözcük, sorgu tarafından döndürülen varlığa bir başvuruyu temsil eder.</span><span class="sxs-lookup"><span data-stu-id="2c640-129">In the expression `it.EnrollmentDate is not null`, the word `it` represents a reference to the entity returned by the query.</span></span> <span data-ttu-id="2c640-130">Bu nedenle `it.EnrollmentDate`, `EntityDataSource` denetiminin döndürdüğü `Person` varlığının `EnrollmentDate` özelliğine başvurur.</span><span class="sxs-lookup"><span data-stu-id="2c640-130">Therefore, `it.EnrollmentDate` refers to the `EnrollmentDate` property of the `Person` entity that the `EntityDataSource` control returns.</span></span>

<span data-ttu-id="2c640-131">Sayfayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="2c640-131">Run the page.</span></span> <span data-ttu-id="2c640-132">Öğrenciler listesi artık yalnızca öğrenciler içeriyor.</span><span class="sxs-lookup"><span data-stu-id="2c640-132">The students list now contains only students.</span></span> <span data-ttu-id="2c640-133">(Kayıt tarihi olmayan bir satır görüntülenir.)</span><span class="sxs-lookup"><span data-stu-id="2c640-133">(There are no rows displayed where there's no enrollment date.)</span></span>

<span data-ttu-id="2c640-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image11.png)</span></span>

## <a name="using-the-entitydatasource-orderby-property-to-order-data"></a><span data-ttu-id="2c640-135">Verileri sıralamak için EntityDataSource "OrderBy" özelliğini kullanma</span><span class="sxs-lookup"><span data-stu-id="2c640-135">Using the EntityDataSource "OrderBy" Property to Order Data</span></span>

<span data-ttu-id="2c640-136">Bu listenin, ilk görüntülenmesiyle aynı sırada olmasını istersiniz.</span><span class="sxs-lookup"><span data-stu-id="2c640-136">You also want this list to be in name order when it's first displayed.</span></span> <span data-ttu-id="2c640-137">*Öğrenciler. aspx* sayfası **Tasarım** görünümünde hala açıkken ve `EntityDataSource` denetimi hala seçili durumdayken, **Özellikler** penceresinde **OrderBy** özelliğini `it.LastName`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="2c640-137">With the *Students.aspx* page still open in **Design** view, and with the `EntityDataSource` control still selected, in the **Properties** window set the **OrderBy** property to `it.LastName`.</span></span>

<span data-ttu-id="2c640-138">[![Image05](the-entity-framework-and-aspnet-getting-started-part-3/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-138">[![Image05](the-entity-framework-and-aspnet-getting-started-part-3/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image13.png)</span></span>

<span data-ttu-id="2c640-139">Sayfayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="2c640-139">Run the page.</span></span> <span data-ttu-id="2c640-140">Öğrenciler listesi artık son ada göre sırada.</span><span class="sxs-lookup"><span data-stu-id="2c640-140">The students list is now in order by last name.</span></span>

<span data-ttu-id="2c640-141">[![Image04](the-entity-framework-and-aspnet-getting-started-part-3/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-141">[![Image04](the-entity-framework-and-aspnet-getting-started-part-3/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image15.png)</span></span>

## <a name="using-a-control-parameter-to-set-the-where-property"></a><span data-ttu-id="2c640-142">"Where" özelliğini ayarlamak için bir denetim parametresi kullanma</span><span class="sxs-lookup"><span data-stu-id="2c640-142">Using a Control Parameter to Set the "Where" Property</span></span>

<span data-ttu-id="2c640-143">Diğer veri kaynağı denetimlerinde olduğu gibi, `Where` özelliğine parametre değerleri geçirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2c640-143">As with other data source controls, you can pass parameter values to the `Where` property.</span></span> <span data-ttu-id="2c640-144">Öğreticinin 2. bölümünde oluşturduğunuz *Kurslar. aspx* sayfasında, bir kullanıcının açılan listeden seçtiği departmanla ilişkili kursları göstermek için bu yöntemi kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2c640-144">On the *Courses.aspx* page that you created in part 2 of the tutorial, you can use this method to display courses that are associated with the department that a user selects from the drop-down list.</span></span>

<span data-ttu-id="2c640-145">*Kurslar. aspx* ' i açın ve **Tasarım** görünümüne geçin.</span><span class="sxs-lookup"><span data-stu-id="2c640-145">Open *Courses.aspx* and switch to **Design** view.</span></span> <span data-ttu-id="2c640-146">Sayfaya ikinci bir `EntityDataSource` denetimi ekleyin ve `CoursesEntityDataSource`olarak adlandırın.</span><span class="sxs-lookup"><span data-stu-id="2c640-146">Add a second `EntityDataSource` control to the page, and name it `CoursesEntityDataSource`.</span></span> <span data-ttu-id="2c640-147">`SchoolEntities` modeline bağlayın ve **entitySetName** değeri olarak `Courses` ' ı seçin.</span><span class="sxs-lookup"><span data-stu-id="2c640-147">Connect it to the `SchoolEntities` model, and select `Courses` as the **EntitySetName** value.</span></span>

<span data-ttu-id="2c640-148">**Özellikler** penceresinde, **WHERE** özellik kutusunda üç nokta simgesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2c640-148">In the **Properties** window, click the ellipsis in the **Where** property box.</span></span> <span data-ttu-id="2c640-149">( **Özellikler** penceresini kullanmadan önce `CoursesEntityDataSource` denetiminin hala seçili olduğundan emin olun.)</span><span class="sxs-lookup"><span data-stu-id="2c640-149">(Make sure the `CoursesEntityDataSource` control is still selected before using the **Properties** window.)</span></span>

<span data-ttu-id="2c640-150">[![Image06](the-entity-framework-and-aspnet-getting-started-part-3/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-150">[![Image06](the-entity-framework-and-aspnet-getting-started-part-3/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image17.png)</span></span>

<span data-ttu-id="2c640-151">**Ifade Düzenleyicisi** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="2c640-151">The **Expression Editor** dialog box is displayed.</span></span> <span data-ttu-id="2c640-152">Bu iletişim kutusunda, **belirtilen parametrelere göre WHERE Ifadesini otomatik olarak oluştur**' u seçin ve ardından **parametre Ekle**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2c640-152">In this dialog box, select **Automatically generate the Where expression based on the provided parameters**, and then click **Add Parameter**.</span></span> <span data-ttu-id="2c640-153">`DepartmentID`parametreyi adlandırın, **parametre kaynak** değeri olarak **Denetim** ' i seçin ve **ControlID** değeri olarak **DepartmentsDropDownList** ' ı seçin.</span><span class="sxs-lookup"><span data-stu-id="2c640-153">Name the parameter `DepartmentID`, select **Control** as the **Parameter source** value, and select **DepartmentsDropDownList** as the **ControlID** value.</span></span>

<span data-ttu-id="2c640-154">[![Image07](the-entity-framework-and-aspnet-getting-started-part-3/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-154">[![Image07](the-entity-framework-and-aspnet-getting-started-part-3/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image19.png)</span></span>

<span data-ttu-id="2c640-155">**Gelişmiş özellikleri göster**' e tıklayın ve **ifade Düzenleyicisi** iletişim kutusunun **Özellikler** penceresinde `Type` özelliğini `Int32`olarak değiştirin.</span><span class="sxs-lookup"><span data-stu-id="2c640-155">Click **Show advanced properties**, and in the **Properties** window of the **Expression Editor** dialog box, change the `Type` property to `Int32`.</span></span>

<span data-ttu-id="2c640-156">[![Image15](the-entity-framework-and-aspnet-getting-started-part-3/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-156">[![Image15](the-entity-framework-and-aspnet-getting-started-part-3/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image21.png)</span></span>

<span data-ttu-id="2c640-157">İşiniz bittiğinde, **Tamam**’a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2c640-157">When you're done, click **OK**.</span></span>

<span data-ttu-id="2c640-158">Aşağı açılan listenin altında, sayfaya bir `GridView` denetimi ekleyin ve `CoursesGridView`adlandırın.</span><span class="sxs-lookup"><span data-stu-id="2c640-158">Below the drop-down list, add a `GridView` control to the page and name it `CoursesGridView`.</span></span> <span data-ttu-id="2c640-159">`CoursesEntityDataSource` veri kaynağı denetimine bağlayın, **şemayı Yenile**' ye tıklayın, **Sütunları Düzenle**' ye tıklayın ve `DepartmentID` sütununu kaldırın.</span><span class="sxs-lookup"><span data-stu-id="2c640-159">Connect it to the `CoursesEntityDataSource` data source control, click **Refresh Schema**, click **Edit Columns**, and remove the `DepartmentID` column.</span></span> <span data-ttu-id="2c640-160">`GridView` denetim biçimlendirmesi aşağıdaki örneğe benzer.</span><span class="sxs-lookup"><span data-stu-id="2c640-160">The `GridView` control markup resembles the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample1.aspx)]

<span data-ttu-id="2c640-161">Kullanıcı aşağı açılan listede seçilen departmanı değiştirdiğinde, ilişkili kurslar listesinin otomatik olarak değiştirilmesini istiyorsunuz.</span><span class="sxs-lookup"><span data-stu-id="2c640-161">When the user changes the selected department in the drop-down list, you want the list of associated courses to change automatically.</span></span> <span data-ttu-id="2c640-162">Bunun gerçekleşmesini sağlamak için açılır listeyi seçin ve **Özellikler** penceresinde `AutoPostBack` özelliğini `True`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="2c640-162">To make this happen, select the drop-down list, and in the **Properties** window set the `AutoPostBack` property to `True`.</span></span>

<span data-ttu-id="2c640-163">[![Image08](the-entity-framework-and-aspnet-getting-started-part-3/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-163">[![Image08](the-entity-framework-and-aspnet-getting-started-part-3/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image23.png)</span></span>

<span data-ttu-id="2c640-164">Tasarımcı 'yı kullanmayı tamamladığınıza göre, **kaynak** görünümüne geçin ve `CoursesEntityDataSource` denetiminin `ConnectionString` ve `DefaultContainer` adı özelliklerini `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` özniteliğiyle değiştirin.</span><span class="sxs-lookup"><span data-stu-id="2c640-164">Now that you're finished using the designer, switch to **Source** view and replace the `ConnectionString` and `DefaultContainer` name properties of the `CoursesEntityDataSource` control with the `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="2c640-165">İşiniz bittiğinde, denetim biçimlendirmesi aşağıdaki örneğe benzer şekilde görünür.</span><span class="sxs-lookup"><span data-stu-id="2c640-165">When you're done, the markup for the control will look like the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample2.aspx)]

<span data-ttu-id="2c640-166">Sayfayı çalıştırın ve farklı departmanlar seçmek için açılan listeyi kullanın.</span><span class="sxs-lookup"><span data-stu-id="2c640-166">Run the page and use the drop-down list to select different departments.</span></span> <span data-ttu-id="2c640-167">Yalnızca seçilen departman tarafından sunulan kurslar `GridView` denetiminde görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="2c640-167">Only courses that are offered by the selected department are displayed in the `GridView` control.</span></span>

<span data-ttu-id="2c640-168">[![Image09](the-entity-framework-and-aspnet-getting-started-part-3/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-168">[![Image09](the-entity-framework-and-aspnet-getting-started-part-3/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image25.png)</span></span>

## <a name="using-the-entitydatasource-groupby-property-to-group-data"></a><span data-ttu-id="2c640-169">Verileri gruplamak için EntityDataSource "GroupBy" özelliğini kullanma</span><span class="sxs-lookup"><span data-stu-id="2c640-169">Using the EntityDataSource "GroupBy" Property to Group Data</span></span>

<span data-ttu-id="2c640-170">Contoso University 'in, hakkında daha fazla öğrenci-gövde istatistiklerini almak istediğini varsayalım.</span><span class="sxs-lookup"><span data-stu-id="2c640-170">Suppose Contoso University wants to put some student-body statistics on its About page.</span></span> <span data-ttu-id="2c640-171">Özellikle, kaydolduğu tarihe göre öğrencilerin numaralarının dökümünü göstermek istemektedir.</span><span class="sxs-lookup"><span data-stu-id="2c640-171">Specifically, it wants to show a breakdown of numbers of students by the date they enrolled.</span></span>

<span data-ttu-id="2c640-172">*. Aspx*' i açın ve **kaynak** görünümü ' nde, `BodyContent` denetiminin varolan içeriğini `h2` Etiketler arasında "öğrenci gövdesi istatistikleri" ile değiştirin:</span><span class="sxs-lookup"><span data-stu-id="2c640-172">Open *About.aspx*, and in **Source** view, replace the existing contents of the `BodyContent` control with "Student Body Statistics" between `h2` tags:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample3.aspx)]

<span data-ttu-id="2c640-173">Başlıktan sonra, `EntityDataSource` bir denetim ekleyin ve `StudentStatisticsEntityDataSource`adlandırın.</span><span class="sxs-lookup"><span data-stu-id="2c640-173">After the heading, add an `EntityDataSource` control and name it `StudentStatisticsEntityDataSource`.</span></span> <span data-ttu-id="2c640-174">`SchoolEntities`bağlayın, `People` varlık kümesini seçin ve sihirbazdaki **Seç** kutusunu değiştirmeden bırakın.</span><span class="sxs-lookup"><span data-stu-id="2c640-174">Connect it to `SchoolEntities`, select the `People` entity set, and leave the **Select** box in the wizard unchanged.</span></span> <span data-ttu-id="2c640-175">**Özellikler** penceresinde aşağıdaki özellikleri ayarlayın:</span><span class="sxs-lookup"><span data-stu-id="2c640-175">Set the following properties in the **Properties** window:</span></span>

- <span data-ttu-id="2c640-176">Yalnızca öğrencilerle filtrelemek için `Where` özelliğini `it.EnrollmentDate is not null`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="2c640-176">To filter for students only, set the `Where` property to `it.EnrollmentDate is not null`.</span></span>
- <span data-ttu-id="2c640-177">Sonuçları kayıt tarihine göre gruplandırmak için `GroupBy` özelliğini `it.EnrollmentDate`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="2c640-177">To group the results by the enrollment date, set the `GroupBy` property to `it.EnrollmentDate`.</span></span>
- <span data-ttu-id="2c640-178">Kayıt tarihini ve öğrenci sayısını seçmek için `Select` özelliğini `it.EnrollmentDate, Count(it.EnrollmentDate) AS NumberOfStudents`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="2c640-178">To select the enrollment date and the number of students, set the `Select` property to `it.EnrollmentDate, Count(it.EnrollmentDate) AS NumberOfStudents`.</span></span>
- <span data-ttu-id="2c640-179">Sonuçları kayıt tarihine göre sıralamak için `OrderBy` özelliğini `it.EnrollmentDate`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="2c640-179">To order the results by the enrollment date, set the `OrderBy` property to `it.EnrollmentDate`.</span></span>

<span data-ttu-id="2c640-180">**Kaynak** görünümü ' nde, `ConnectionString` ve `DefaultContainer` adı özelliklerini bir `ContextTypeName` özelliği ile değiştirin.</span><span class="sxs-lookup"><span data-stu-id="2c640-180">In **Source** view, replace the `ConnectionString` and `DefaultContainer` name properties with a `ContextTypeName` property.</span></span> <span data-ttu-id="2c640-181">`EntityDataSource` denetim biçimlendirmesi artık aşağıdaki örneğe benzer.</span><span class="sxs-lookup"><span data-stu-id="2c640-181">The `EntityDataSource` control markup now resembles the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample4.aspx)]

<span data-ttu-id="2c640-182">`Select`, `GroupBy`ve `Where` özelliklerinin sözdizimi, geçerli varlığı belirten `it` anahtar sözcüğü dışında Transact-SQL ' i benzerdir.</span><span class="sxs-lookup"><span data-stu-id="2c640-182">The syntax of the `Select`, `GroupBy`, and `Where` properties resembles Transact-SQL except for the `it` keyword that specifies the current entity.</span></span>

<span data-ttu-id="2c640-183">Verileri göstermek için bir `GridView` denetimi oluşturmak üzere aşağıdaki biçimlendirmeyi ekleyin.</span><span class="sxs-lookup"><span data-stu-id="2c640-183">Add the following markup to create a `GridView` control to display the data.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample5.aspx)]

<span data-ttu-id="2c640-184">Kayıt tarihine göre öğrenci sayısını gösteren bir liste görmek için sayfayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="2c640-184">Run the page to see a list showing the number of students by enrollment date.</span></span>

<span data-ttu-id="2c640-185">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-185">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image27.png)</span></span>

## <a name="using-the-queryextender-control-for-filtering-and-ordering"></a><span data-ttu-id="2c640-186">Filtreleme ve sıralama için Querygenişletici denetimini kullanma</span><span class="sxs-lookup"><span data-stu-id="2c640-186">Using the QueryExtender Control for Filtering and Ordering</span></span>

<span data-ttu-id="2c640-187">`QueryExtender` denetim, İşaretlemede filtreleme ve sıralamayı belirtmenin bir yolunu sağlar.</span><span class="sxs-lookup"><span data-stu-id="2c640-187">The `QueryExtender` control provides a way to specify filtering and sorting in markup.</span></span> <span data-ttu-id="2c640-188">Sözdizimi, kullanmakta olduğunuz veritabanı yönetim sistemi 'nden (DBMS) bağımsızdır.</span><span class="sxs-lookup"><span data-stu-id="2c640-188">The syntax is independent of the database management system (DBMS) you're using.</span></span> <span data-ttu-id="2c640-189">Ayrıca, gezinti özellikleri için kullandığınız söz dizimi Entity Framework benzersiz olan özel durum ile, genellikle Entity Framework bağımsızdır.</span><span class="sxs-lookup"><span data-stu-id="2c640-189">It's also generally independent of the Entity Framework, with the exception that syntax you use for navigation properties is unique to the Entity Framework.</span></span>

<span data-ttu-id="2c640-190">Öğreticinin bu bölümünde, verileri filtrelemek ve sıralamak için bir `QueryExtender` denetimi kullanacaksınız ve order by alanlarından biri bir gezinti özelliği olacaktır.</span><span class="sxs-lookup"><span data-stu-id="2c640-190">In this part of the tutorial you'll use a `QueryExtender` control to filter and order data, and one of the order-by fields will be a navigation property.</span></span>

<span data-ttu-id="2c640-191">(`EntityDataSource` denetimi tarafından otomatik olarak oluşturulan sorguları genişletmek için biçimlendirme yerine kodu kullanmayı tercih ediyorsanız, bunu `QueryCreated` olayını işleyerek yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2c640-191">(If you prefer to use code instead of markup to extend the queries that are automatically generated by the `EntityDataSource` control, you can do that by handling the `QueryCreated` event.</span></span> <span data-ttu-id="2c640-192">`QueryExtender` denetimi, `EntityDataSource` denetim sorgularını de genişletmektedir.)</span><span class="sxs-lookup"><span data-stu-id="2c640-192">This is how the `QueryExtender` control extends `EntityDataSource` control queries also.)</span></span>

<span data-ttu-id="2c640-193">*Kurslar. aspx* sayfasını açın ve daha önce eklediğiniz biçimlendirmenin altında, bir başlık oluşturmak için aşağıdaki biçimlendirmeyi, arama dizeleri girmeye yönelik bir metin kutusunu, bir arama düğmesini ve `Courses` varlık kümesine bağlanan `EntityDataSource` denetimini ekleyin.</span><span class="sxs-lookup"><span data-stu-id="2c640-193">Open the *Courses.aspx* page, and below the markup you added previously, insert the following markup to create a heading, a text box for entering search strings, a search button, and an `EntityDataSource` control that's bound to the `Courses` entity set.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample6.aspx)]

<span data-ttu-id="2c640-194">`EntityDataSource` denetiminin `Include` özelliğinin `Department`olarak ayarlandığını unutmayın.</span><span class="sxs-lookup"><span data-stu-id="2c640-194">Notice that the `EntityDataSource` control's `Include` property is set to `Department`.</span></span> <span data-ttu-id="2c640-195">Veritabanında, `Course` tablosu departman adını içermez; `DepartmentID` yabancı anahtar sütunu içerir.</span><span class="sxs-lookup"><span data-stu-id="2c640-195">In the database, the `Course` table does not contain the department name; it contains a `DepartmentID` foreign key column.</span></span> <span data-ttu-id="2c640-196">Veritabanını doğrudan sorguladığınız takdirde, Bölüm adını kurs verileriyle birlikte almak için `Course` ve `Department` tablolarına katılmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2c640-196">If you were querying the database directly, to get the department name along with course data, you would have to join the `Course` and `Department` tables.</span></span> <span data-ttu-id="2c640-197">`Include` özelliğini `Department`olarak ayarlayarak, Entity Framework bir `Course` varlığı aldığında ilgili `Department` varlığı alma işini yapması gerektiğini belirtirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2c640-197">By setting the `Include` property to `Department`, you specify that the Entity Framework should do the work of getting the related `Department` entity when it gets a `Course` entity.</span></span> <span data-ttu-id="2c640-198">`Department` varlık daha sonra `Course` varlığının `Department` gezinti özelliğinde depolanır.</span><span class="sxs-lookup"><span data-stu-id="2c640-198">The `Department` entity is then stored in the `Department` navigation property of the `Course` entity.</span></span> <span data-ttu-id="2c640-199">(Varsayılan olarak, veri modeli Tasarımcısı tarafından oluşturulan `SchoolEntities` sınıfı, gerektiğinde ilgili verileri alır ve veri kaynağı denetimini bu sınıfa bağlamışsanız, `Include` özelliğinin ayarlanması gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="2c640-199">(By default, the `SchoolEntities` class that was generated by the data model designer retrieves related data when it's needed, and you've bound the data source control to that class, so setting the `Include` property is not necessary.</span></span> <span data-ttu-id="2c640-200">Ancak, Entity Framework, bu sayfanın performansını artırır, aksi takdirde `Course` varlıklar ve ilgili `Department` varlıkları için verileri almak üzere veritabanına ayrı çağrılar yapacağından.)</span><span class="sxs-lookup"><span data-stu-id="2c640-200">However, setting it improves performance of the page, because otherwise the Entity Framework would make separate calls to the database to retrieve data for the `Course` entities and for the related `Department` entities.)</span></span>

<span data-ttu-id="2c640-201">Yeni oluşturduğunuz `EntityDataSource` denetiminden sonra, bu `EntityDataSource` denetimine bağlanan `QueryExtender` bir denetim oluşturmak için aşağıdaki biçimlendirmeyi ekleyin.</span><span class="sxs-lookup"><span data-stu-id="2c640-201">After the `EntityDataSource` control you just created, insert the following markup to create a `QueryExtender` control that's bound to that `EntityDataSource` control.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample7.aspx)]

<span data-ttu-id="2c640-202">`SearchExpression` öğesi, başlıkları metin kutusuna girilen değerle eşleşen kurslar seçmek istediğinizi belirtir.</span><span class="sxs-lookup"><span data-stu-id="2c640-202">The `SearchExpression` element specifies that you want to select courses whose titles match the value entered in the text box.</span></span> <span data-ttu-id="2c640-203">`SearchType` özelliği `StartsWith`belirttiğinden, yalnızca metin kutusuna girilen sayıda karakter karşılaştırılacaktır.</span><span class="sxs-lookup"><span data-stu-id="2c640-203">Only as many characters as are entered in the text box will be compared, because the `SearchType` property specifies `StartsWith`.</span></span>

<span data-ttu-id="2c640-204">`OrderByExpression` öğesi, sonuç kümesinin, Bölüm adı içindeki kurs başlığına göre sipariş olacağını belirtir.</span><span class="sxs-lookup"><span data-stu-id="2c640-204">The `OrderByExpression` element specifies that the result set will be ordered by course title within department name.</span></span> <span data-ttu-id="2c640-205">Bölüm adının nasıl belirtildiğine dikkat edin: `Department.Name`.</span><span class="sxs-lookup"><span data-stu-id="2c640-205">Notice how department name is specified: `Department.Name`.</span></span> <span data-ttu-id="2c640-206">`Course` varlık ve `Department` varlık arasındaki ilişki bire bir, `Department` gezinti özelliği bir `Department` varlığı içerir.</span><span class="sxs-lookup"><span data-stu-id="2c640-206">Because the association between the `Course` entity and the `Department` entity is one-to-one, the `Department` navigation property contains a `Department` entity.</span></span> <span data-ttu-id="2c640-207">(Bu bir-çok ilişkisi ise, özelliği bir koleksiyon içerir.) Bölüm adını almak için `Department` varlığının `Name` özelliğini belirtmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="2c640-207">(If this were a one-to-many relationship, the property would contain a collection.) To get the department name, you must specify the `Name` property of the `Department` entity.</span></span>

<span data-ttu-id="2c640-208">Son olarak, kurslar listesini göstermek için bir `GridView` denetimi ekleyin:</span><span class="sxs-lookup"><span data-stu-id="2c640-208">Finally, add a `GridView` control to display the list of courses:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample8.aspx)]

<span data-ttu-id="2c640-209">İlk sütun, Bölüm adını görüntüleyen bir şablon alanıdır.</span><span class="sxs-lookup"><span data-stu-id="2c640-209">The first column is a template field that displays the department name.</span></span> <span data-ttu-id="2c640-210">Veri bağlama ifadesi, tıpkı `QueryExtender` denetiminde gördüğünüz gibi `Department.Name`belirtir.</span><span class="sxs-lookup"><span data-stu-id="2c640-210">The databinding expression specifies `Department.Name`, just as you saw in the `QueryExtender` control.</span></span>

<span data-ttu-id="2c640-211">Sayfayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="2c640-211">Run the page.</span></span> <span data-ttu-id="2c640-212">İlk ekran, bölüm ve ardından kurs başlığına göre sırasıyla tüm kursların bir listesini gösterir.</span><span class="sxs-lookup"><span data-stu-id="2c640-212">The initial display shows a list of all courses in order by department and then by course title.</span></span>

<span data-ttu-id="2c640-213">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-213">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image29.png)</span></span>

<span data-ttu-id="2c640-214">Başlıkları "d" ile başlayan tüm kursları görmek için "d" girin ve **Ara** ' ya tıklayın (arama büyük/küçük harfe duyarlı değildir).</span><span class="sxs-lookup"><span data-stu-id="2c640-214">Enter an "m" and click **Search** to see all courses whose titles begin with "m" (the search is not case sensitive).</span></span>

<span data-ttu-id="2c640-215">[![Image12](the-entity-framework-and-aspnet-getting-started-part-3/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-215">[![Image12](the-entity-framework-and-aspnet-getting-started-part-3/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image31.png)</span></span>

## <a name="using-the-like-operator-to-filter-data"></a><span data-ttu-id="2c640-216">Verileri filtrelemek için "Like" Işlecini kullanma</span><span class="sxs-lookup"><span data-stu-id="2c640-216">Using the "Like" Operator to Filter Data</span></span>

<span data-ttu-id="2c640-217">`Like` denetiminin `EntityDataSource` özelliğinde bir `Where` işleci kullanarak `QueryExtender` denetiminin `StartsWith`, `Contains`ve `EndsWith` arama türlerine benzer bir efekt elde edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2c640-217">You can achieve an effect similar to the `QueryExtender` control's `StartsWith`, `Contains`, and `EndsWith` search types by using a `Like` operator in the `EntityDataSource` control's `Where` property.</span></span> <span data-ttu-id="2c640-218">Öğreticinin bu bölümünde, ada göre bir öğrenci aramak için `Like` işlecini nasıl kullanacağınızı göreceksiniz.</span><span class="sxs-lookup"><span data-stu-id="2c640-218">In this part of the tutorial, you'll see how to use the `Like` operator to search for a student by name.</span></span>

<span data-ttu-id="2c640-219">**Kaynak** görünümünde *öğrenciler. aspx* ' i açın.</span><span class="sxs-lookup"><span data-stu-id="2c640-219">Open *Students.aspx* in **Source** view.</span></span> <span data-ttu-id="2c640-220">`GridView` denetiminden sonra aşağıdaki biçimlendirmeyi ekleyin:</span><span class="sxs-lookup"><span data-stu-id="2c640-220">After the `GridView` control, add the following markup:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample9.aspx)]

<span data-ttu-id="2c640-221">Bu biçimlendirme, `Where` Özellik değeri dışında daha önce gördüğünüze benzerdir.</span><span class="sxs-lookup"><span data-stu-id="2c640-221">This markup is similar to what you've seen earlier except for the `Where` property value.</span></span> <span data-ttu-id="2c640-222">`Where` ifadesinin ikinci bölümü, metin kutusuna her şey için hem ilk hem de soyadlarını arayan bir alt dize aramasını (`LIKE %FirstMidName% or LIKE %LastName%`) tanımlar.</span><span class="sxs-lookup"><span data-stu-id="2c640-222">The second part of the `Where` expression defines a substring search (`LIKE %FirstMidName% or LIKE %LastName%`) that searches both the first and last names for whatever is entered in the text box.</span></span>

<span data-ttu-id="2c640-223">Sayfayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="2c640-223">Run the page.</span></span> <span data-ttu-id="2c640-224">Başlangıçta tüm öğrencileri görürsünüz çünkü `StudentName` parametresi için varsayılan değer "%".</span><span class="sxs-lookup"><span data-stu-id="2c640-224">Initially you see all of the students because the default value for the `StudentName` parameter is "%".</span></span>

<span data-ttu-id="2c640-225">[![Image13](the-entity-framework-and-aspnet-getting-started-part-3/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-225">[![Image13](the-entity-framework-and-aspnet-getting-started-part-3/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image33.png)</span></span>

<span data-ttu-id="2c640-226">Metin kutusuna "g" harfini girin ve **Ara**' ya tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2c640-226">Enter the letter "g" in the text box and click **Search**.</span></span> <span data-ttu-id="2c640-227">Adında "g" olan öğrencilerin bir listesini görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="2c640-227">You see a list of students that have a "g" in either the first or last name.</span></span>

<span data-ttu-id="2c640-228">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="2c640-228">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image35.png)</span></span>

<span data-ttu-id="2c640-229">Artık tek tek tablolardan, güncelleştirilmiş, filtrelenmiş, sıralanmış ve gruplandırılmış verileri görüntüdiniz.</span><span class="sxs-lookup"><span data-stu-id="2c640-229">You've now displayed, updated, filtered, ordered, and grouped data from individual tables.</span></span> <span data-ttu-id="2c640-230">Sonraki öğreticide ilgili verilerle (ana ayrıntı senaryolarında) çalışmaya başlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2c640-230">In the next tutorial you'll begin to work with related data (master-detail scenarios).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="2c640-231">[Önceki](the-entity-framework-and-aspnet-getting-started-part-2.md)
> [İleri](the-entity-framework-and-aspnet-getting-started-part-4.md)</span><span class="sxs-lookup"><span data-stu-id="2c640-231">[Previous](the-entity-framework-and-aspnet-getting-started-part-2.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-4.md)</span></span>
