---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-4
title: Entity Framework 4,0 Database First ve ASP.NET 4 Web Forms-Bölüm 4 ' ü kullanmaya başlama Microsoft Docs
author: tdykstra
description: Contoso Üniversitesi örnek Web uygulaması, Entity Framework kullanarak nasıl ASP.NET Web Forms uygulamalar oluşturacağınızı gösterir. Örnek uygulama...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: ceb9e60f-957c-4d25-9331-cc527de96a33
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-4
msc.type: authoredcontent
ms.openlocfilehash: eb75a76038466bf30738387ed4739687de1df944
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78638168"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-4"></a><span data-ttu-id="5bdb9-104">Entity Framework 4,0 Database First ve ASP.NET 4 Web Forms-Bölüm 4 ' ü kullanmaya başlama</span><span class="sxs-lookup"><span data-stu-id="5bdb9-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 4</span></span>

<span data-ttu-id="5bdb9-105">[Tom Dykstra](https://github.com/tdykstra) tarafından</span><span class="sxs-lookup"><span data-stu-id="5bdb9-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="5bdb9-106">Contoso Üniversitesi örnek Web uygulaması, 4,0 ve Visual Studio 2010 Entity Framework kullanarak nasıl ASP.NET Web Forms uygulamalar oluşturacağınızı gösterir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="5bdb9-107">Öğretici serisi hakkında daha fazla bilgi için, [serideki ilk öğreticiye](the-entity-framework-and-aspnet-getting-started-part-1.md) bakın</span><span class="sxs-lookup"><span data-stu-id="5bdb9-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="working-with-related-data"></a><span data-ttu-id="5bdb9-108">Ilgili verilerle çalışma</span><span class="sxs-lookup"><span data-stu-id="5bdb9-108">Working with Related Data</span></span>

<span data-ttu-id="5bdb9-109">Önceki öğreticide, verileri filtrelemek, sıralamak ve gruplandırmak için `EntityDataSource` denetimini kullandınız.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-109">In the previous tutorial you used the `EntityDataSource` control to filter, sort, and group data.</span></span> <span data-ttu-id="5bdb9-110">Bu öğreticide ilgili verileri görüntüleyip güncelleştireceksiniz.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-110">In this tutorial you'll display and update related data.</span></span>

<span data-ttu-id="5bdb9-111">Eğitmenler listesini gösteren eğitmenler sayfasını oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-111">You'll create the Instructors page that shows a list of instructors.</span></span> <span data-ttu-id="5bdb9-112">Bir eğitmen seçtiğinizde, bu eğitmenin bir kurs listesini görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-112">When you select an instructor, you see a list of courses taught by that instructor.</span></span> <span data-ttu-id="5bdb9-113">Bir kurs seçtiğinizde, kursa ve kursa kayıtlı öğrencilerin bir listesine ilişkin ayrıntıları görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-113">When you select a course, you see details for the course and a list of students enrolled in the course.</span></span> <span data-ttu-id="5bdb9-114">Eğitmen adını, işe alma tarihini ve Office atamasını düzenleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-114">You can edit the instructor name, hire date, and office assignment.</span></span> <span data-ttu-id="5bdb9-115">Office ataması, bir gezinti özelliği aracılığıyla erişebileceğiniz ayrı bir varlık kümesidir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-115">The office assignment is a separate entity set that you access through a navigation property.</span></span>

<span data-ttu-id="5bdb9-116">Ana verileri, biçimlendirme veya koddaki ayrıntı verilerine bağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-116">You can link master data to detail data in markup or in code.</span></span> <span data-ttu-id="5bdb9-117">Öğreticinin bu bölümünde her iki yöntemi de kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-117">In this part of the tutorial, you'll use both methods.</span></span>

<span data-ttu-id="5bdb9-118">[![Image01](the-entity-framework-and-aspnet-getting-started-part-4/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="5bdb9-118">[![Image01](the-entity-framework-and-aspnet-getting-started-part-4/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image1.png)</span></span>

## <a name="displaying-and-updating-related-entities-in-a-gridview-control"></a><span data-ttu-id="5bdb9-119">GridView denetimindeki Ilgili varlıkları görüntüleme ve güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="5bdb9-119">Displaying and Updating Related Entities in a GridView Control</span></span>

<span data-ttu-id="5bdb9-120">*Site. Master* ana sayfasını kullanan *eğitmenler. aspx* adlı yeni bir web sayfası oluşturun ve `Content2`adlı `Content` denetimine aşağıdaki biçimlendirmeyi ekleyin:</span><span class="sxs-lookup"><span data-stu-id="5bdb9-120">Create a new web page named *Instructors.aspx* that uses the *Site.Master* master page, and add the following markup to the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-4/samples/sample1.aspx)]

<span data-ttu-id="5bdb9-121">Bu biçimlendirme, Eğitmenler 'i seçen ve güncelleştirmeleri sağlayan bir `EntityDataSource` denetimi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-121">This markup creates an `EntityDataSource` control that selects instructors and enables updates.</span></span> <span data-ttu-id="5bdb9-122">`div` öğesi, daha sonra bir sütunu daha sonra ekleyebilmek için sola doğru işlenecek biçimlendirmeyi yapılandırır.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-122">The `div` element configures markup to render on the left so that you can add a column on the right later.</span></span>

<span data-ttu-id="5bdb9-123">`EntityDataSource` biçimlendirme ve kapanış `</div>` etiketi arasında, hata iletileri için kullanacağınız bir `GridView` denetimi ve bir `Label` denetimi oluşturan aşağıdaki biçimlendirmeyi ekleyin:</span><span class="sxs-lookup"><span data-stu-id="5bdb9-123">Between the `EntityDataSource` markup and the closing `</div>` tag, add the following markup that creates a `GridView` control and a `Label` control that you'll use for error messages:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-4/samples/sample2.aspx)]

<span data-ttu-id="5bdb9-124">Bu `GridView` denetimi satır seçimini, seçili satırı açık gri arka plan rengiyle vurgular ve `SelectedIndexChanged` ve `Updating` olayları için işleyicileri (daha sonra oluşturacağınız) belirtir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-124">This `GridView` control enables row selection, highlights the selected row with a light gray background color, and specifies handlers (which you'll create later) for the `SelectedIndexChanged` and `Updating` events.</span></span> <span data-ttu-id="5bdb9-125">Ayrıca, seçilen satırın anahtar değerinin daha sonra ekleyeceğiniz başka bir denetime geçirilebilmesi için `DataKeyNames` özelliği için `PersonID` belirtir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-125">It also specifies `PersonID` for the `DataKeyNames` property, so that the key value of the selected row can be passed to another control that you'll add later.</span></span>

<span data-ttu-id="5bdb9-126">Son sütun, ilişkili bir varlıktan geldiği için `Person` varlığın bir gezinti özelliğinde depolanan eğitmenin Office atamasını içerir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-126">The last column contains the instructor's office assignment, which is stored in a navigation property of the `Person` entity because it comes from an associated entity.</span></span> <span data-ttu-id="5bdb9-127">`GridView` denetimi onları güncelleştirmek için doğrudan gezinti özelliklerine bağlanamadığı için, `EditItemTemplate` öğesinin `Bind`yerine `Eval` belirttiğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-127">Notice that the `EditItemTemplate` element specifies `Eval` instead of `Bind`, because the `GridView` control cannot directly bind to navigation properties in order to update them.</span></span> <span data-ttu-id="5bdb9-128">Kodda Office atamasını güncelleştireceksiniz.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-128">You'll update the office assignment in code.</span></span> <span data-ttu-id="5bdb9-129">Bunu yapmak için `TextBox` denetimine bir başvuru gerekir ve bunu `TextBox` denetiminin `Init` olayında alır ve kaydedersiniz.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-129">To do that, you'll need a reference to the `TextBox` control, and you'll get and save that in the `TextBox` control's `Init` event.</span></span>

<span data-ttu-id="5bdb9-130">`GridView` denetimini takip etmek, hata iletileri için kullanılan bir `Label` denetimidir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-130">Following the `GridView` control is a `Label` control that's used for error messages.</span></span> <span data-ttu-id="5bdb9-131">Denetimin `Visible` özelliği `false`ve Görünüm durumu kapalı olur, böylece etiket yalnızca kod bir hataya yanıt olarak görünür hale geldiğinde görünür.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-131">The control's `Visible` property is `false`, and view state is turned off, so that the label will appear only when code makes it visible in response to an error.</span></span>

<span data-ttu-id="5bdb9-132">*Instructors.aspx.cs* dosyasını açın ve aşağıdaki `using` ifadesini ekleyin:</span><span class="sxs-lookup"><span data-stu-id="5bdb9-132">Open the *Instructors.aspx.cs* file and add the following `using` statement:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-4/samples/sample3.cs)]

<span data-ttu-id="5bdb9-133">Office atama metin kutusuna bir başvuru tutmak için kısmi sınıf adı bildiriminden hemen sonra bir özel sınıf alanı ekleyin.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-133">Add a private class field immediately after the partial-class name declaration to hold a reference to the office assignment text box.</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-4/samples/sample4.cs)]

<span data-ttu-id="5bdb9-134">Daha sonra kod ekleyeceğiniz `SelectedIndexChanged` olay işleyicisi için bir saplama ekleyin.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-134">Add a stub for the `SelectedIndexChanged` event handler that you'll add code for later.</span></span> <span data-ttu-id="5bdb9-135">Ayrıca, `TextBox` denetimine bir başvuru depolayabilmeniz için Office atama `TextBox` denetiminin `Init` olayı için bir işleyici ekleyin.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-135">Also add a handler for the office assignment `TextBox` control's `Init` event so that you can store a reference to the `TextBox` control.</span></span> <span data-ttu-id="5bdb9-136">Bu başvuruyu, kullanıcının gezinti özelliği ile ilişkili varlığı güncelleştirmek için girdiği değeri almak için kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-136">You'll use this reference to get the value the user entered in order to update the entity associated with the navigation property.</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-4/samples/sample5.cs)]

<span data-ttu-id="5bdb9-137">`GridView` denetimin `Updating` olayını, ilişkili `OfficeAssignment` varlığının `Location` özelliğini güncelleştirmek için kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-137">You'll use the `GridView` control's `Updating` event to update the `Location` property of the associated `OfficeAssignment` entity.</span></span> <span data-ttu-id="5bdb9-138">`Updating` olayı için aşağıdaki işleyiciyi ekleyin:</span><span class="sxs-lookup"><span data-stu-id="5bdb9-138">Add the following handler for the `Updating` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-4/samples/sample6.cs)]

<span data-ttu-id="5bdb9-139">Bu kod, Kullanıcı `GridView` satırında **Güncelleştir** ' i tıklattığında çalıştırılır.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-139">This code is run when the user clicks **Update** in a `GridView` row.</span></span> <span data-ttu-id="5bdb9-140">Kod, geçerli `Person` varlıkla ilişkili `OfficeAssignment` varlığını almak için LINQ to Entities kullanır. Bu, olay bağımsız değişkeninden seçilen satırın `PersonID` kullanılarak yapılır.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-140">The code uses LINQ to Entities to retrieve the `OfficeAssignment` entity that's associated with the current `Person` entity, using the `PersonID` of the selected row from the event argument.</span></span>

<span data-ttu-id="5bdb9-141">Daha sonra kod, `InstructorOfficeTextBox` denetimindeki değere bağlı olarak aşağıdaki eylemlerden birini alır:</span><span class="sxs-lookup"><span data-stu-id="5bdb9-141">The code then takes one of the following actions depending on the value in the `InstructorOfficeTextBox` control:</span></span>

- <span data-ttu-id="5bdb9-142">Metin kutusunda bir değer varsa ve güncelleştirilecek `OfficeAssignment` varlık yoksa, bir tane oluşturur.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-142">If the text box has a value and there's no `OfficeAssignment` entity to update, it creates one.</span></span>
- <span data-ttu-id="5bdb9-143">Metin kutusunda bir değer varsa ve bir `OfficeAssignment` varlığı varsa, `Location` özellik değerini güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-143">If the text box has a value and there's an `OfficeAssignment` entity, it updates the `Location` property value.</span></span>
- <span data-ttu-id="5bdb9-144">Metin kutusu boşsa ve bir `OfficeAssignment` varlığı varsa, varlığını siler.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-144">If the text box is empty and an `OfficeAssignment` entity exists, it deletes the entity.</span></span>

<span data-ttu-id="5bdb9-145">Bundan sonra değişiklikleri veritabanına kaydeder.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-145">After this, it saves the changes to the database.</span></span> <span data-ttu-id="5bdb9-146">Bir özel durum oluşursa, bir hata iletisi görüntüler.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-146">If an exception occurs, it displays an error message.</span></span>

<span data-ttu-id="5bdb9-147">Sayfayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-147">Run the page.</span></span>

<span data-ttu-id="5bdb9-148">[![Image02](the-entity-framework-and-aspnet-getting-started-part-4/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="5bdb9-148">[![Image02](the-entity-framework-and-aspnet-getting-started-part-4/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image3.png)</span></span>

<span data-ttu-id="5bdb9-149">**Düzenle** ' ye tıklayın ve tüm alanlar metin kutularına değişir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-149">Click **Edit** and all fields change to text boxes.</span></span>

<span data-ttu-id="5bdb9-150">[![Image03](the-entity-framework-and-aspnet-getting-started-part-4/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="5bdb9-150">[![Image03](the-entity-framework-and-aspnet-getting-started-part-4/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image5.png)</span></span>

<span data-ttu-id="5bdb9-151">**Office ataması**dahil olmak üzere bu değerlerden herhangi birini değiştirin.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-151">Change any of these values, including **Office Assignment**.</span></span> <span data-ttu-id="5bdb9-152">**Güncelleştir** ' e tıkladığınızda, listede yansıtılan değişiklikleri görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-152">Click **Update** and you'll see the changes reflected in the list.</span></span>

## <a name="displaying-related-entities-in-a-separate-control"></a><span data-ttu-id="5bdb9-153">Ilgili varlıkları ayrı bir denetimde görüntüleme</span><span class="sxs-lookup"><span data-stu-id="5bdb9-153">Displaying Related Entities in a Separate Control</span></span>

<span data-ttu-id="5bdb9-154">Her bir eğitmen bir veya daha fazla kurs öğretebilir. bu nedenle, Eğitmenler `GridView` denetiminde hangi eğitmenin seçildiğinden ilişkili kursları listelemek için bir `EntityDataSource` denetimi ve `GridView` denetimi ekleyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-154">Each instructor can teach one or more courses, so you'll add an `EntityDataSource` control and a `GridView` control to list the courses associated with whichever instructor is selected in the instructors `GridView` control.</span></span> <span data-ttu-id="5bdb9-155">Kurslar varlıkları için bir başlık ve `EntityDataSource` denetimi oluşturmak için aşağıdaki biçimlendirmeyi hata iletisi `Label` denetimi ve kapanış `</div>` etiketi arasına ekleyin:</span><span class="sxs-lookup"><span data-stu-id="5bdb9-155">To create a heading and the `EntityDataSource` control for courses entities, add the following markup between the error message `Label` control and the closing `</div>` tag:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-4/samples/sample7.aspx)]

<span data-ttu-id="5bdb9-156">`Where` parametresi, `InstructorsGridView` denetiminde satırı seçili olan eğitmenin `PersonID` değerini içerir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-156">The `Where` parameter contains the value of the `PersonID` of the instructor whose row is selected in the `InstructorsGridView` control.</span></span> <span data-ttu-id="5bdb9-157">`Where` özelliği, bir `Course` varlığının `People` gezinti özelliğinden tüm ilişkili `Person` varlıklarını alan ve yalnızca ilişkili `Course` varlıklarından biri seçili `Person` değerini içeriyorsa `PersonID` varlığını seçen bir seçmeden komutu içerir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-157">The `Where` property contains a subselect command that gets all associated `Person` entities from a `Course` entity's `People` navigation property and selects the `Course` entity only if one of the associated `Person` entities contains the selected `PersonID` value.</span></span>

<span data-ttu-id="5bdb9-158">`GridView` denetimini oluşturmak için, `CoursesEntityDataSource` denetiminin hemen ardından aşağıdaki biçimlendirmeyi ekleyin (kapatma `</div>` etiketinden önce):</span><span class="sxs-lookup"><span data-stu-id="5bdb9-158">To create the `GridView` control., add the following markup immediately following the `CoursesEntityDataSource` control (before the closing `</div>` tag):</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-4/samples/sample8.aspx)]

<span data-ttu-id="5bdb9-159">Hiçbir eğitmen seçilmezse hiçbir kurs gösterilmediğinden, bir `EmptyDataTemplate` öğesi dahil edilir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-159">Because no courses will be displayed if no instructor is selected, an `EmptyDataTemplate` element is included.</span></span>

<span data-ttu-id="5bdb9-160">Sayfayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-160">Run the page.</span></span>

<span data-ttu-id="5bdb9-161">[![Image04](the-entity-framework-and-aspnet-getting-started-part-4/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="5bdb9-161">[![Image04](the-entity-framework-and-aspnet-getting-started-part-4/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image7.png)</span></span>

<span data-ttu-id="5bdb9-162">Bir veya daha fazla kurs atanmış bir eğitmeni seçin ve kurs veya kurslar listede görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-162">Select an instructor who has one or more courses assigned, and the course or courses appear in the list.</span></span> <span data-ttu-id="5bdb9-163">(Note: veritabanı şeması birden çok kursa izin verse de, veritabanı ile sağlanan test verilerinde, hiçbir eğitmenin artık birden fazla kursu vardır.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-163">(Note: although the database schema allows multiple courses, in the test data supplied with the database no instructor actually has more than one course.</span></span> <span data-ttu-id="5bdb9-164">Daha sonraki bir öğreticide ekleyeceğiniz **Sunucu Gezgini** penceresini veya *CoursesAdd. aspx* sayfasını kullanarak veritabanına kurslar ekleyebilirsiniz.)</span><span class="sxs-lookup"><span data-stu-id="5bdb9-164">You can add courses to the database yourself using the **Server Explorer** window or the *CoursesAdd.aspx* page, which you'll add in a later tutorial.)</span></span>

<span data-ttu-id="5bdb9-165">[![Image05](the-entity-framework-and-aspnet-getting-started-part-4/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="5bdb9-165">[![Image05](the-entity-framework-and-aspnet-getting-started-part-4/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image9.png)</span></span>

<span data-ttu-id="5bdb9-166">`CoursesGridView` denetimi yalnızca birkaç kurs alanını gösterir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-166">The `CoursesGridView` control shows only a few course fields.</span></span> <span data-ttu-id="5bdb9-167">Bir kursun tüm ayrıntılarını göstermek için kullanıcının seçtiği kurs için `DetailsView` bir denetim kullanırsınız.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-167">To display all the details for a course, you'll use a `DetailsView` control for the course that the user selects.</span></span> <span data-ttu-id="5bdb9-168">*Eğitmenler. aspx*' te, kapatma `</div>` etiketinden sonra aşağıdaki biçimlendirmeyi ekleyin (Bu biçimlendirmeyi kapatmadan önce değil, kapanış div etiketinden **sonra** yerleştirdiğinizden emin olun):</span><span class="sxs-lookup"><span data-stu-id="5bdb9-168">In *Instructors.aspx*, add the following markup after the closing `</div>` tag (make sure you place this markup **after** the closing div tag, not before it):</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-4/samples/sample9.aspx)]

<span data-ttu-id="5bdb9-169">Bu biçimlendirme `Courses` varlık kümesine bağlanan bir `EntityDataSource` denetimi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-169">This markup creates an `EntityDataSource` control that's bound to the `Courses` entity set.</span></span> <span data-ttu-id="5bdb9-170">`Where` özelliği, kurslar `GridView` denetimindeki seçili satırın `CourseID` değerini kullanarak bir kurs seçer.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-170">The `Where` property selects a course using the `CourseID` value of the selected row in the courses `GridView` control.</span></span> <span data-ttu-id="5bdb9-171">Biçimlendirme, daha sonra hiyerarşide daha düşük bir düzey olan öğrenci çalışmalarını görüntülemek için kullanacağınız `Selected` olayı için bir işleyici belirtir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-171">The markup specifies a handler for the `Selected` event, which you'll use later for displaying student grades, which is another level lower in the hierarchy.</span></span>

<span data-ttu-id="5bdb9-172">*Instructors.aspx.cs*' de `CourseDetailsEntityDataSource_Selected` yöntemi için aşağıdaki saplaması oluşturun.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-172">In *Instructors.aspx.cs*, create the following stub for the `CourseDetailsEntityDataSource_Selected` method.</span></span> <span data-ttu-id="5bdb9-173">(Bu saplamaya daha sonra öğreticide dolduracağız; şimdilik, sayfanın derlenmesi ve çalışması için ihtiyacınız olur.)</span><span class="sxs-lookup"><span data-stu-id="5bdb9-173">(You'll fill this stub out later in the tutorial; for now, you need it so that the page will compile and run.)</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-4/samples/sample10.cs)]

<span data-ttu-id="5bdb9-174">Sayfayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-174">Run the page.</span></span>

<span data-ttu-id="5bdb9-175">[![Image06](the-entity-framework-and-aspnet-getting-started-part-4/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="5bdb9-175">[![Image06](the-entity-framework-and-aspnet-getting-started-part-4/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image11.png)</span></span>

<span data-ttu-id="5bdb9-176">Başlangıçta hiçbir kurs seçilmediğinden hiçbir kurs ayrıntısı yok.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-176">Initially there are no course details because no course is selected.</span></span> <span data-ttu-id="5bdb9-177">Bir kurs atanmış olan bir eğitmeni seçin ve ardından ayrıntıları görmek için bir kurs seçin.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-177">Select an instructor who has a course assigned, and then select a course to see the details.</span></span>

<span data-ttu-id="5bdb9-178">[![Image07](the-entity-framework-and-aspnet-getting-started-part-4/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="5bdb9-178">[![Image07](the-entity-framework-and-aspnet-getting-started-part-4/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image13.png)</span></span>

## <a name="using-the-entitydatasource-selected-event-to-display-related-data"></a><span data-ttu-id="5bdb9-179">Ilişkili verileri göstermek için EntityDataSource "Selected" olayını kullanma</span><span class="sxs-lookup"><span data-stu-id="5bdb9-179">Using the EntityDataSource "Selected" Event to Display Related Data</span></span>

<span data-ttu-id="5bdb9-180">Son olarak, tüm kayıtlı öğrencileri ve bunların seçili kursa ait notlarını göstermek istersiniz.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-180">Finally, you want to show all of the enrolled students and their grades for the selected course.</span></span> <span data-ttu-id="5bdb9-181">Bunu yapmak için kurs `DetailsView`'e göre `EntityDataSource` denetimin `Selected` olayını kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-181">To do this, you'll use the `Selected` event of the `EntityDataSource` control bound to the course `DetailsView`.</span></span>

<span data-ttu-id="5bdb9-182">*Eğitmenler. aspx*' te, `DetailsView` denetiminden sonra aşağıdaki biçimlendirmeyi ekleyin:</span><span class="sxs-lookup"><span data-stu-id="5bdb9-182">In *Instructors.aspx*, add the following markup after the `DetailsView` control:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-4/samples/sample11.aspx)]

<span data-ttu-id="5bdb9-183">Bu biçimlendirme, seçilen kurs için öğrencilerin listesini ve bunların notlarını görüntüleyen bir `ListView` denetimi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-183">This markup creates a `ListView` control that displays a list of students and their grades for the selected course.</span></span> <span data-ttu-id="5bdb9-184">Kodda denetimin kaynağını belirlediğiniz için veri kaynağı belirtilmedi.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-184">No data source is specified because you'll databind the control in code.</span></span> <span data-ttu-id="5bdb9-185">`EmptyDataTemplate` öğesi hiçbir kurs seçildiğinde görüntülenecek bir ileti sağlar; Bu durumda görüntülenecek öğrenci yok.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-185">The `EmptyDataTemplate` element provides a message to display when no course is selected—in that case, there are no students to display.</span></span> <span data-ttu-id="5bdb9-186">`LayoutTemplate` öğesi listeyi göstermek için bir HTML tablosu oluşturur ve `ItemTemplate` görüntülenecek sütunları belirtir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-186">The `LayoutTemplate` element creates an HTML table to display the list, and the `ItemTemplate` specifies the columns to display.</span></span> <span data-ttu-id="5bdb9-187">Öğrenci KIMLIĞI ve öğrenci derecesi `StudentGrade` varlıklardır ve öğrenci adı, Entity Framework `StudentGrade` varlığının `Person` gezinti özelliğinde kullanılabilir hale gelen `Person` varlıklarından oluşur.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-187">The student ID and the student grade are from the `StudentGrade` entity, and the student name is from the `Person` entity that the Entity Framework makes available in the `Person` navigation property of the `StudentGrade` entity.</span></span>

<span data-ttu-id="5bdb9-188">*Instructors.aspx.cs*' de, saplaması-Out `CourseDetailsEntityDataSource_Selected` yöntemini aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="5bdb9-188">In *Instructors.aspx.cs*, replace the stubbed-out `CourseDetailsEntityDataSource_Selected` method with the following code:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-4/samples/sample12.cs)]

<span data-ttu-id="5bdb9-189">Bu olay için olay bağımsız değişkeni seçili verileri bir koleksiyon biçiminde sağlar, bu da hiçbir şey seçili değilse sıfır öğe veya `Course` varlık seçildiyse bir öğe olur.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-189">The event argument for this event provides the selected data in the form of a collection, which will have zero items if nothing is selected or one item if a `Course` entity is selected.</span></span> <span data-ttu-id="5bdb9-190">`Course` bir varlık seçilirse, kod koleksiyonu tek bir nesneye dönüştürmek için `First` yöntemini kullanır.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-190">If a `Course` entity is selected, the code uses the `First` method to convert the collection to a single object.</span></span> <span data-ttu-id="5bdb9-191">Daha sonra gezinti özelliğinden `StudentGrade` varlıkları alır, bunları bir koleksiyona dönüştürür ve `GradesListView` denetimini koleksiyona bağlar.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-191">It then gets `StudentGrade` entities from the navigation property, converts them to a collection, and binds the `GradesListView` control to the collection.</span></span>

<span data-ttu-id="5bdb9-192">Bu, notlarınızı göstermek için yeterlidir, ancak sayfanın ilk görüntülenişinde ve bir kurs seçilmediğinde boş veri şablonundaki iletinin görüntülendiğinden emin olmak istiyorsunuz.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-192">This is sufficient to display grades, but you want to make sure that the message in the empty data template is displayed the first time the page is displayed and whenever a course is not selected.</span></span> <span data-ttu-id="5bdb9-193">Bunu yapmak için, iki konumdan çağrıcağımız aşağıdaki yöntemi oluşturun:</span><span class="sxs-lookup"><span data-stu-id="5bdb9-193">To do that, create the following method, which you'll call from two places:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-4/samples/sample13.cs)]

<span data-ttu-id="5bdb9-194">Sayfa ilk kez görüntülendiğinde boş veri şablonunu göstermek için `Page_Load` yönteminden bu yeni yöntemi çağırın.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-194">Call this new method from the `Page_Load` method to display the empty data template the first time the page is displayed.</span></span> <span data-ttu-id="5bdb9-195">Ve `InstructorsGridView_SelectedIndexChanged` yönteminden çağırın çünkü bu olay bir eğitmen seçildiğinde tetiklenir, bu da yeni kurslar kurs `GridView` denetimine yüklenir ve henüz hiçbiri seçili değildir.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-195">And call it from the `InstructorsGridView_SelectedIndexChanged` method because that event is raised when an instructor is selected, which means new courses are loaded into the courses `GridView` control and none is selected yet.</span></span> <span data-ttu-id="5bdb9-196">İki çağrı aşağıda verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="5bdb9-196">Here are the two calls:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-4/samples/sample14.cs)]

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-4/samples/sample15.cs)]

<span data-ttu-id="5bdb9-197">Sayfayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-197">Run the page.</span></span>

<span data-ttu-id="5bdb9-198">[![Image08](the-entity-framework-and-aspnet-getting-started-part-4/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="5bdb9-198">[![Image08](the-entity-framework-and-aspnet-getting-started-part-4/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image15.png)</span></span>

<span data-ttu-id="5bdb9-199">Bir kurs atanmış olan bir eğitmen seçin ve ardından kursu seçin.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-199">Select an instructor that has a course assigned, and then select the course.</span></span>

<span data-ttu-id="5bdb9-200">[![Image09](the-entity-framework-and-aspnet-getting-started-part-4/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="5bdb9-200">[![Image09](the-entity-framework-and-aspnet-getting-started-part-4/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-4/_static/image17.png)</span></span>

<span data-ttu-id="5bdb9-201">Artık ilgili verilerle çalışmanın birkaç yolunu gördünüz.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-201">You have now seen a few ways to work with related data.</span></span> <span data-ttu-id="5bdb9-202">Aşağıdaki öğreticide, mevcut varlıklar arasında ilişkiler eklemeyi, ilişkilerin nasıl kaldırılacağını ve var olan bir varlığa yönelik bir ilişkiye sahip olan yeni bir varlığın nasıl ekleneceğini öğreneceksiniz.</span><span class="sxs-lookup"><span data-stu-id="5bdb9-202">In the following tutorial, you'll learn how to add relationships between existing entities, how to remove relationships, and how to add a new entity that has a relationship to an existing entity.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5bdb9-203">[Önceki](the-entity-framework-and-aspnet-getting-started-part-3.md)
> [İleri](the-entity-framework-and-aspnet-getting-started-part-5.md)</span><span class="sxs-lookup"><span data-stu-id="5bdb9-203">[Previous](the-entity-framework-and-aspnet-getting-started-part-3.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-5.md)</span></span>
