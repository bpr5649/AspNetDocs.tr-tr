---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-7
title: Entity Framework 4,0 Database First ve ASP.NET 4 Web Forms-Bölüm 7 ' yi kullanmaya başlama | Microsoft Docs
author: tdykstra
description: Contoso Üniversitesi örnek Web uygulaması, Entity Framework kullanarak nasıl ASP.NET Web Forms uygulamalar oluşturacağınızı gösterir. Örnek uygulama...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: f8afb245-b705-419c-8790-0b295e90d5e2
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-7
msc.type: authoredcontent
ms.openlocfilehash: 18d4b44c5e23fd6942c3adf48a33a5602e6df6d0
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78603434"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-7"></a><span data-ttu-id="49647-104">Entity Framework 4,0 Database First ve ASP.NET 4 Web Forms-Bölüm 7 ' yi kullanmaya başlama</span><span class="sxs-lookup"><span data-stu-id="49647-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 7</span></span>

<span data-ttu-id="49647-105">[Tom Dykstra](https://github.com/tdykstra) tarafından</span><span class="sxs-lookup"><span data-stu-id="49647-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="49647-106">Contoso Üniversitesi örnek Web uygulaması, 4,0 ve Visual Studio 2010 Entity Framework kullanarak nasıl ASP.NET Web Forms uygulamalar oluşturacağınızı gösterir.</span><span class="sxs-lookup"><span data-stu-id="49647-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="49647-107">Öğretici serisi hakkında daha fazla bilgi için, [serideki ilk öğreticiye](the-entity-framework-and-aspnet-getting-started-part-1.md) bakın</span><span class="sxs-lookup"><span data-stu-id="49647-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="using-stored-procedures"></a><span data-ttu-id="49647-108">Saklı Yordamları Kullanma</span><span class="sxs-lookup"><span data-stu-id="49647-108">Using Stored Procedures</span></span>

<span data-ttu-id="49647-109">Önceki öğreticide, bir hiyerarşi başına devralma düzeni uygulamış olursunuz.</span><span class="sxs-lookup"><span data-stu-id="49647-109">In the previous tutorial you implemented a table-per-hierarchy inheritance pattern.</span></span> <span data-ttu-id="49647-110">Bu öğreticide, veritabanı erişimi üzerinde daha fazla denetim kazanmak için saklı yordamların nasıl kullanılacağı gösterilir.</span><span class="sxs-lookup"><span data-stu-id="49647-110">This tutorial will show you how to use stored procedures to gain more control over database access.</span></span>

<span data-ttu-id="49647-111">Entity Framework, veritabanı erişimi için saklı yordamları kullanması gerektiğini belirtmenize olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="49647-111">The Entity Framework lets you specify that it should use stored procedures for database access.</span></span> <span data-ttu-id="49647-112">Herhangi bir varlık türü için, bu türdeki varlıkları oluşturmak, güncelleştirmek veya silmek için kullanmak üzere bir saklı yordam belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="49647-112">For any entity type, you can specify a stored procedure to use for creating, updating, or deleting entities of that type.</span></span> <span data-ttu-id="49647-113">Ardından, veri modelinde varlık kümelerini alma gibi görevleri gerçekleştirmek için kullanabileceğiniz saklı yordamlara başvurular ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="49647-113">Then in the data model you can add references to stored procedures that you can use to perform tasks such as retrieving sets of entities.</span></span>

<span data-ttu-id="49647-114">Saklı yordamları kullanmak, veritabanı erişimi için yaygın bir gereksinimdir.</span><span class="sxs-lookup"><span data-stu-id="49647-114">Using stored procedures is a common requirement for database access.</span></span> <span data-ttu-id="49647-115">Bazı durumlarda, bir veritabanı yöneticisi tüm veritabanı erişiminin güvenlik nedenleriyle saklı yordamlar üzerinden gitmesini gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="49647-115">In some cases a database administrator may require that all database access go through stored procedures for security reasons.</span></span> <span data-ttu-id="49647-116">Diğer durumlarda, veritabanını güncelleştirdiğinde Entity Framework kullandığı işlemlerden bazılarına iş mantığı oluşturmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="49647-116">In other cases you may want to build business logic into some of the processes that the Entity Framework uses when it updates the database.</span></span> <span data-ttu-id="49647-117">Örneğin, bir varlık silindiğinde bir arşiv veritabanına kopyalamak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="49647-117">For example, whenever an entity is deleted you might want to copy it to an archive database.</span></span> <span data-ttu-id="49647-118">Ya da bir satır güncelleştirildiğinde değişikliği yapan bir günlüğe kaydetme tablosuna bir satır yazmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="49647-118">Or whenever a row is updated you might want to write a row to a logging table that records who made the change.</span></span> <span data-ttu-id="49647-119">Bu tür görevleri, Entity Framework bir varlığı sildiği veya bir varlığı güncelleştiren her seferinde çağrılan bir saklı yordamda gerçekleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="49647-119">You can perform these kinds of tasks in a stored procedure that's called whenever the Entity Framework deletes an entity or updates an entity.</span></span>

<span data-ttu-id="49647-120">Önceki öğreticide olduğu gibi, yeni sayfa oluşturabileceksiniz.</span><span class="sxs-lookup"><span data-stu-id="49647-120">As in the previous tutorial, you'll not create any new pages.</span></span> <span data-ttu-id="49647-121">Bunun yerine, Entity Framework zaten oluşturduğunuz bazı sayfalardan veritabanına erişim şeklini değiştirirsiniz.</span><span class="sxs-lookup"><span data-stu-id="49647-121">Instead, you'll change the way the Entity Framework accesses the database for some of the pages you already created.</span></span>

<span data-ttu-id="49647-122">Bu öğreticide, `Student` ve `Instructor` varlıkları eklemek için veritabanında saklı yordamlar oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="49647-122">In this tutorial you'll create stored procedures in the database for inserting `Student` and `Instructor` entities.</span></span> <span data-ttu-id="49647-123">Bunları veri modeline ekleyeceksiniz ve Entity Framework veritabanına `Student` ve `Instructor` varlıkları eklemek için onları kullanması gerektiğini belirtirsiniz.</span><span class="sxs-lookup"><span data-stu-id="49647-123">You'll add them to the data model, and you'll specify that the Entity Framework should use them for adding `Student` and `Instructor` entities to the database.</span></span> <span data-ttu-id="49647-124">Ayrıca, `Course` varlıkları almak için kullanabileceğiniz bir saklı yordam oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="49647-124">You'll also create a stored procedure that you can use to retrieve `Course` entities.</span></span>

## <a name="creating-stored-procedures-in-the-database"></a><span data-ttu-id="49647-125">Veritabanında saklı yordamlar oluşturma</span><span class="sxs-lookup"><span data-stu-id="49647-125">Creating Stored Procedures in the Database</span></span>

<span data-ttu-id="49647-126">(Bu öğreticide, projedeki *okul. mdf* dosyasını kullanıyorsanız, saklı yordamlar zaten mevcut olduğundan bu bölümü atlayabilirsiniz.)</span><span class="sxs-lookup"><span data-stu-id="49647-126">(If you're using the *School.mdf* file from the project available for download with this tutorial, you can skip this section because the stored procedures already exist.)</span></span>

<span data-ttu-id="49647-127">**Sunucu Gezgini**, *okul. mdf*' yi genişletin, **saklı yordamlar**' a sağ tıklayın ve **Yeni saklı yordam Ekle**' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="49647-127">In **Server Explorer**, expand *School.mdf*, right-click **Stored Procedures**, and select **Add New Stored Procedure**.</span></span>

<span data-ttu-id="49647-128">[![image15](the-entity-framework-and-aspnet-getting-started-part-7/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="49647-128">[![image15](the-entity-framework-and-aspnet-getting-started-part-7/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image1.png)</span></span>

<span data-ttu-id="49647-129">Aşağıdaki SQL deyimlerini kopyalayıp, çatı saklı yordamını değiştirerek saklı yordam penceresine yapıştırın.</span><span class="sxs-lookup"><span data-stu-id="49647-129">Copy the following SQL statements and paste them into the stored procedure window, replacing the skeleton stored procedure.</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample1.sql)]

<span data-ttu-id="49647-130">[![image14](the-entity-framework-and-aspnet-getting-started-part-7/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="49647-130">[![image14](the-entity-framework-and-aspnet-getting-started-part-7/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image3.png)</span></span>

<span data-ttu-id="49647-131">`Student` varlıkların dört özelliği vardır: `PersonID`, `LastName`, `FirstName`ve `EnrollmentDate`.</span><span class="sxs-lookup"><span data-stu-id="49647-131">`Student` entities have four properties: `PersonID`, `LastName`, `FirstName`, and `EnrollmentDate`.</span></span> <span data-ttu-id="49647-132">Veritabanı KIMLIK değerini otomatik olarak oluşturur ve saklı yordam diğer üç için parametreleri kabul eder.</span><span class="sxs-lookup"><span data-stu-id="49647-132">The database generates the ID value automatically, and the stored procedure accepts parameters for the other three.</span></span> <span data-ttu-id="49647-133">Saklı yordam, Entity Framework, yeni satırın kayıt anahtarı değerini döndürür, böylece, bellekte devam eden varlığın sürümünde bunu takip edebilir.</span><span class="sxs-lookup"><span data-stu-id="49647-133">The stored procedure returns the value of the new row's record key so that the Entity Framework can keep track of that in the version of the entity it keeps in memory.</span></span>

<span data-ttu-id="49647-134">Saklı yordam penceresini kaydedin ve kapatın.</span><span class="sxs-lookup"><span data-stu-id="49647-134">Save and close the stored procedure window.</span></span>

<span data-ttu-id="49647-135">Aşağıdaki SQL deyimlerini kullanarak `InsertInstructor` saklı yordamı aynı şekilde oluşturun:</span><span class="sxs-lookup"><span data-stu-id="49647-135">Create an `InsertInstructor` stored procedure in the same manner, using the following SQL statements:</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample2.sql)]

<span data-ttu-id="49647-136">`Student` ve `Instructor` varlıkları için de `Update` saklı yordamlar oluşturun.</span><span class="sxs-lookup"><span data-stu-id="49647-136">Create `Update` stored procedures for `Student` and `Instructor` entities also.</span></span> <span data-ttu-id="49647-137">(Veritabanı zaten `Instructor` ve `Student` varlıkları için çalışacak `DeletePerson` saklı bir yordama sahiptir.)</span><span class="sxs-lookup"><span data-stu-id="49647-137">(The database already has a `DeletePerson` stored procedure which will work for both `Instructor` and `Student` entities.)</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample3.sql)]

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample4.sql)]

<span data-ttu-id="49647-138">Bu öğreticide, her varlık türü için üç işlevi (INSERT, Update ve Delete--) eşlersiniz.</span><span class="sxs-lookup"><span data-stu-id="49647-138">In this tutorial you'll map all three functions -- insert, update, and delete -- for each entity type.</span></span> <span data-ttu-id="49647-139">Entity Framework sürüm 4, bu işlevlerden yalnızca birini veya ikisini, diğerlerini eşleştirmeden saklı yordamlara eşlemenizi sağlar, tek bir özel durum: güncelleştirme işlevini eşleştirmeniz ancak Delete işlevini belirtmezseniz, bu işlem yaptığınızda Entity Framework bir özel durum oluşturur bir varlığı silmeyi deneyin.</span><span class="sxs-lookup"><span data-stu-id="49647-139">The Entity Framework version 4 allows you to map just one or two of these functions to stored procedures without mapping the others, with one exception: if you map the update function but not the delete function, the Entity Framework will throw an exception when you attempt to delete an entity.</span></span> <span data-ttu-id="49647-140">Entity Framework sürüm 3,5 ' de, saklı yordamları eşleme konusunda bu çok esnekliğe sahip değilsiniz: bir işlevi eşleştirdiyseniz, üçünü eşlemek için gerekli olan</span><span class="sxs-lookup"><span data-stu-id="49647-140">In the Entity Framework version 3.5, you did not have this much flexibility in mapping stored procedures: if you mapped one function you were required to map all three.</span></span>

<span data-ttu-id="49647-141">Güncelleştirme verileri yerine okuyan bir saklı yordam oluşturmak için aşağıdaki SQL deyimlerini kullanarak tüm `Course` varlıklarını seçen bir tane oluşturun:</span><span class="sxs-lookup"><span data-stu-id="49647-141">To create a stored procedure that reads rather than updates data, create one that selects all `Course` entities, using the following SQL statements:</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample5.sql)]

## <a name="adding-the-stored-procedures-to-the-data-model"></a><span data-ttu-id="49647-142">Saklı yordamları veri modeline ekleme</span><span class="sxs-lookup"><span data-stu-id="49647-142">Adding the Stored Procedures to the Data Model</span></span>

<span data-ttu-id="49647-143">Saklı yordamlar artık veritabanında tanımlanmıştır, ancak Entity Framework için kullanılabilir hale getirmek üzere veri modeline eklenmelidir.</span><span class="sxs-lookup"><span data-stu-id="49647-143">The stored procedures are now defined in the database, but they must be added to the data model to make them available to the Entity Framework.</span></span> <span data-ttu-id="49647-144">*SchoolModel. edmx*' i açın, tasarım yüzeyine sağ tıklayın ve **modeli veritabanından Güncelleştir**' i seçin.</span><span class="sxs-lookup"><span data-stu-id="49647-144">Open *SchoolModel.edmx*, right-click the design surface, and select **Update Model from Database**.</span></span> <span data-ttu-id="49647-145">**Veritabanı nesnelerinizi seçin** Iletişim kutusundaki **Ekle** sekmesinde, **saklı yordamlar**' ı genişletin, yeni oluşturulan saklı yordamları ve `DeletePerson` saklı yordamını seçin ve ardından **son**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="49647-145">In the **Add** tab of the **Choose Your Database Objects** dialog box, expand **Stored Procedures**, select the newly created stored procedures and the `DeletePerson` stored procedure, and then click **Finish**.</span></span>

<span data-ttu-id="49647-146">[![image20](the-entity-framework-and-aspnet-getting-started-part-7/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="49647-146">[![image20](the-entity-framework-and-aspnet-getting-started-part-7/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image5.png)</span></span>

## <a name="mapping-the-stored-procedures"></a><span data-ttu-id="49647-147">Saklı yordamları eşleme</span><span class="sxs-lookup"><span data-stu-id="49647-147">Mapping the Stored Procedures</span></span>

<span data-ttu-id="49647-148">Veri modeli tasarımcısında `Student` varlığına sağ tıklayıp **saklı yordam eşlemesi**' ni seçin.</span><span class="sxs-lookup"><span data-stu-id="49647-148">In the data model designer, right-click the `Student` entity and select **Stored Procedure Mapping**.</span></span>

<span data-ttu-id="49647-149">[![image21](the-entity-framework-and-aspnet-getting-started-part-7/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="49647-149">[![image21](the-entity-framework-and-aspnet-getting-started-part-7/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image7.png)</span></span>

<span data-ttu-id="49647-150">**Eşleme ayrıntıları** penceresi görüntülenir, burada Entity Framework bu türden varlıkları eklemek, güncelleştirmek ve silmek için kullanması gereken saklı yordamları belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="49647-150">The **Mapping Details** window appears, in which you can specify stored procedures that the Entity Framework should use for inserting, updating, and deleting entities of this type.</span></span>

<span data-ttu-id="49647-151">[![image22](the-entity-framework-and-aspnet-getting-started-part-7/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="49647-151">[![image22](the-entity-framework-and-aspnet-getting-started-part-7/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image9.png)</span></span>

<span data-ttu-id="49647-152">**Insert** Işlevini **ınsertstudent**olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="49647-152">Set the **Insert** function to **InsertStudent**.</span></span> <span data-ttu-id="49647-153">Pencere, her birinin bir varlık özelliğine eşlenmesi gereken saklı yordam parametrelerinin bir listesini gösterir.</span><span class="sxs-lookup"><span data-stu-id="49647-153">The window shows a list of stored procedure parameters, each of which must be mapped to an entity property.</span></span> <span data-ttu-id="49647-154">Adların ikisi de aynı olduğundan, bunlar otomatik olarak eşlenir.</span><span class="sxs-lookup"><span data-stu-id="49647-154">Two of these are mapped automatically because the names are the same.</span></span> <span data-ttu-id="49647-155">`FirstName`adlı bir varlık özelliği yoktur, bu nedenle kullanılabilir varlık özelliklerini gösteren bir açılan listeden `FirstMidName` el ile seçmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="49647-155">There's no entity property named `FirstName`, so you must manually select `FirstMidName` from a drop-down list that shows available entity properties.</span></span> <span data-ttu-id="49647-156">(Bunun nedeni, `FirstName` özelliğinin adını ilk öğreticideki `FirstMidName` olarak değiştirdiniz.)</span><span class="sxs-lookup"><span data-stu-id="49647-156">(This is because you changed the name of the `FirstName` property to `FirstMidName` in the first tutorial.)</span></span>

<span data-ttu-id="49647-157">[![image23](the-entity-framework-and-aspnet-getting-started-part-7/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="49647-157">[![image23](the-entity-framework-and-aspnet-getting-started-part-7/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image11.png)</span></span>

<span data-ttu-id="49647-158">Aynı **eşleme ayrıntıları** penceresinde, `Update` işlevini `UpdateStudent` saklı yordamla eşleyin (`Insert` saklı yordamı için yaptığınız gibi `FirstName`parametre değeri olarak `FirstMidName` belirttiğinizden emin olun) ve `Delete` işlevi `DeletePerson` saklı yordamına.</span><span class="sxs-lookup"><span data-stu-id="49647-158">In the same **Mapping Details** window, map the `Update` function to the `UpdateStudent` stored procedure (make sure you specify `FirstMidName` as the parameter value for `FirstName`, as you did for the `Insert` stored procedure) and the `Delete` function to the `DeletePerson` stored procedure.</span></span>

<span data-ttu-id="49647-159">[![image01](the-entity-framework-and-aspnet-getting-started-part-7/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="49647-159">[![image01](the-entity-framework-and-aspnet-getting-started-part-7/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image13.png)</span></span>

<span data-ttu-id="49647-160">`Instructor` varlığı için Eğitmenler için INSERT, Update ve delete saklı yordamlarını eşlemek için aynı yordamı izleyin.</span><span class="sxs-lookup"><span data-stu-id="49647-160">Follow the same procedure to map the insert, update, and delete stored procedures for instructors to the `Instructor` entity.</span></span>

<span data-ttu-id="49647-161">[![image02](the-entity-framework-and-aspnet-getting-started-part-7/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="49647-161">[![image02](the-entity-framework-and-aspnet-getting-started-part-7/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image15.png)</span></span>

<span data-ttu-id="49647-162">Verileri güncelleştirmek yerine okunan saklı yordamlar için, saklı yordamı döndürdüğü varlık türüne eşlemek için **Model tarayıcı** penceresini kullanın.</span><span class="sxs-lookup"><span data-stu-id="49647-162">For stored procedures that read rather than update data, you use the **Model Browser** window to map the stored procedure to the entity type it returns.</span></span> <span data-ttu-id="49647-163">Veri modeli tasarımcısında, tasarım yüzeyine sağ tıklayıp **model tarayıcısı**' nı seçin.</span><span class="sxs-lookup"><span data-stu-id="49647-163">In the data model designer, right-click the design surface and select **Model Browser**.</span></span> <span data-ttu-id="49647-164">**SchoolModel. Store** düğümünü açın ve sonra **saklı yordamlar** düğümünü açın.</span><span class="sxs-lookup"><span data-stu-id="49647-164">Open the **SchoolModel.Store** node and then open the **Stored Procedures** node.</span></span> <span data-ttu-id="49647-165">Ardından `GetCourses` saklı yordamına sağ tıklayıp **Işlev Içeri aktarma Ekle**' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="49647-165">Then right-click the `GetCourses` stored procedure and select **Add Function Import**.</span></span>

<span data-ttu-id="49647-166">[![image24](the-entity-framework-and-aspnet-getting-started-part-7/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="49647-166">[![image24](the-entity-framework-and-aspnet-getting-started-part-7/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image17.png)</span></span>

<span data-ttu-id="49647-167">**Işlev Içeri aktarma Ekle** iletişim kutusunda, bir SELECT **varlıklarının** **koleksiyonunu döndürür** ve döndürülen varlık türü olarak `Course` öğesini seçin.</span><span class="sxs-lookup"><span data-stu-id="49647-167">In the **Add Function Import** dialog box, under **Returns a Collection Of** select **Entities**, and then select `Course` as the entity type returned.</span></span> <span data-ttu-id="49647-168">İşiniz bittiğinde, **Tamam**’a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="49647-168">When you're done, click **OK**.</span></span> <span data-ttu-id="49647-169">*. Edmx* dosyasını kaydedin ve kapatın.</span><span class="sxs-lookup"><span data-stu-id="49647-169">Save and close the *.edmx* file.</span></span>

<span data-ttu-id="49647-170">[![image25](the-entity-framework-and-aspnet-getting-started-part-7/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="49647-170">[![image25](the-entity-framework-and-aspnet-getting-started-part-7/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image19.png)</span></span>

## <a name="using-insert-update-and-delete-stored-procedures"></a><span data-ttu-id="49647-171">INSERT, Update ve delete saklı yordamlarını kullanma</span><span class="sxs-lookup"><span data-stu-id="49647-171">Using Insert, Update, and Delete Stored Procedures</span></span>

<span data-ttu-id="49647-172">Verileri ekleme, güncelleştirme ve silmeye yönelik saklı yordamlar, veri modeline eklendikten ve bunları uygun varlıklarla eşleştirdikten sonra otomatik olarak Entity Framework tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="49647-172">Stored procedures to insert, update, and delete data are used by the Entity Framework automatically after you've added them to the data model and mapped them to the appropriate entities.</span></span> <span data-ttu-id="49647-173">Artık *StudentsAdd. aspx* sayfasını çalıştırabilirsiniz ve yeni bir öğrenci oluşturduğunuzda Entity Framework, yeni bir satırı `Student` tablosuna eklemek için `InsertStudent` saklı yordamını kullanır.</span><span class="sxs-lookup"><span data-stu-id="49647-173">You can now run the *StudentsAdd.aspx* page, and every time you create a new student, the Entity Framework will use the `InsertStudent` stored procedure to add the new row to the `Student` table.</span></span>

<span data-ttu-id="49647-174">[![image03](the-entity-framework-and-aspnet-getting-started-part-7/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="49647-174">[![image03](the-entity-framework-and-aspnet-getting-started-part-7/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image21.png)</span></span>

<span data-ttu-id="49647-175">*Öğrenciler. aspx* sayfasını çalıştırın ve listede yeni öğrenci görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="49647-175">Run the *Students.aspx* page and the new student appears in the list.</span></span>

<span data-ttu-id="49647-176">[![image04](the-entity-framework-and-aspnet-getting-started-part-7/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="49647-176">[![image04](the-entity-framework-and-aspnet-getting-started-part-7/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image23.png)</span></span>

<span data-ttu-id="49647-177">Update işlevinin çalıştığını doğrulamak için adı değiştirin ve ardından DELETE işlevinin çalıştığını doğrulamak için öğrenci 'yi silin.</span><span class="sxs-lookup"><span data-stu-id="49647-177">Change the name to verify that the update function works, and then delete the student to verify that the delete function works.</span></span>

<span data-ttu-id="49647-178">[![image05](the-entity-framework-and-aspnet-getting-started-part-7/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="49647-178">[![image05](the-entity-framework-and-aspnet-getting-started-part-7/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image25.png)</span></span>

## <a name="using-select-stored-procedures"></a><span data-ttu-id="49647-179">SELECT saklı yordamlarını kullanma</span><span class="sxs-lookup"><span data-stu-id="49647-179">Using Select Stored Procedures</span></span>

<span data-ttu-id="49647-180">Entity Framework, `GetCourses`gibi saklı yordamları otomatik olarak çalıştırmaz ve bunları `EntityDataSource` denetimiyle kullanamazsınız.</span><span class="sxs-lookup"><span data-stu-id="49647-180">The Entity Framework does not automatically run stored procedures such as `GetCourses`, and you cannot use them with the `EntityDataSource` control.</span></span> <span data-ttu-id="49647-181">Bunları kullanmak için, bunları koddan çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="49647-181">To use them, you call them from code.</span></span>

<span data-ttu-id="49647-182">*InstructorsCourses.aspx.cs* dosyasını açın.</span><span class="sxs-lookup"><span data-stu-id="49647-182">Open the *InstructorsCourses.aspx.cs* file.</span></span> <span data-ttu-id="49647-183">`PopulateDropDownLists` yöntemi, tüm kurs varlıklarını almak için bir LINQ-Entities sorgusu kullanır ve bu sayede bir eğitmenin ne olduğunu ve hangilerinin atanmamış olduğunu belirleyebilir:</span><span class="sxs-lookup"><span data-stu-id="49647-183">The `PopulateDropDownLists` method uses a LINQ-to-Entities query to retrieve all course entities so that it can loop through the list and determine which ones an instructor is assigned to and which ones are unassigned:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample6.cs)]

<span data-ttu-id="49647-184">Bunu şu kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="49647-184">Replace this with the following code:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample7.cs)]

<span data-ttu-id="49647-185">Sayfa artık tüm kursların listesini almak için `GetCourses` saklı yordamını kullanır.</span><span class="sxs-lookup"><span data-stu-id="49647-185">The page now uses the `GetCourses` stored procedure to retrieve the list of all courses.</span></span> <span data-ttu-id="49647-186">Daha önce olduğu gibi çalıştığını doğrulamak için sayfayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="49647-186">Run the page to verify that it works as it did before.</span></span>

<span data-ttu-id="49647-187">(Saklı yordam tarafından alınan varlıkların gezinti özellikleri, `ObjectContext` varsayılan ayarlarına bağlı olarak bu varlıklarla ilgili verilerle otomatik olarak doldurulmayabilir.</span><span class="sxs-lookup"><span data-stu-id="49647-187">(Navigation properties of entities retrieved by a stored procedure might not be automatically populated with the data related to those entities, depending on `ObjectContext` default settings.</span></span> <span data-ttu-id="49647-188">Daha fazla bilgi için, MSDN Kitaplığı 'nda [Ilgili nesneleri yükleme](https://msdn.microsoft.com/library/bb896272.aspx) bölümüne bakın.)</span><span class="sxs-lookup"><span data-stu-id="49647-188">For more information, see [Loading Related Objects](https://msdn.microsoft.com/library/bb896272.aspx) in the MSDN Library.)</span></span>

<span data-ttu-id="49647-189">Sonraki öğreticide, veri biçimlendirmeyi ve doğrulama kurallarını programlamayı ve test yapmayı kolaylaştırmak için dinamik veri işlevselliğini nasıl kullanacağınızı öğreneceksiniz.</span><span class="sxs-lookup"><span data-stu-id="49647-189">In the next tutorial, you'll learn how to use Dynamic Data functionality to make it easier to program and test data formatting and validation rules.</span></span> <span data-ttu-id="49647-190">Veri biçimi dizeleri ve bir alanın gerekli olup olmadığı gibi her bir Web sayfası kuralı için belirtmek yerine, veri modeli meta verilerinde bu tür kuralları belirtebilirsiniz ve bunlar her sayfada otomatik olarak uygulanır.</span><span class="sxs-lookup"><span data-stu-id="49647-190">Instead of specifying on each web page rules such as data format strings and whether or not a field is required, you can specify such rules in data model metadata and they're automatically applied on every page.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="49647-191">[Önceki](the-entity-framework-and-aspnet-getting-started-part-6.md)
> [İleri](the-entity-framework-and-aspnet-getting-started-part-8.md)</span><span class="sxs-lookup"><span data-stu-id="49647-191">[Previous](the-entity-framework-and-aspnet-getting-started-part-6.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-8.md)</span></span>
