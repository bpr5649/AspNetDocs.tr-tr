---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-a-website-that-uses-application-services-cs
title: Uygulama Hizmetleri (C#) kullanan bir Web sitesini yapılandırma | Microsoft Docs
author: rick-anderson
description: ASP.NET sürüm 2,0, .NET Framework bir parçası olan ve yo... için bir yapı blok Hizmetleri paketi olarak hizmet veren bir dizi uygulama hizmeti sunmuştur.
ms.author: riande
ms.date: 04/23/2009
ms.assetid: 1e33d1c6-3f9f-4c26-81e2-2a8f8907bb05
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-a-website-that-uses-application-services-cs
msc.type: authoredcontent
ms.openlocfilehash: 72aaca84b8c8d6e558d4c946faa57fa999d48bf8
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78630580"
---
# <a name="configuring-a-website-that-uses-application-services-c"></a><span data-ttu-id="abb2d-103">Uygulama Hizmetleri Kullanan Bir Web Sitesi Yapılandırma (C#)</span><span class="sxs-lookup"><span data-stu-id="abb2d-103">Configuring a Website that Uses Application Services (C#)</span></span>

<span data-ttu-id="abb2d-104">[Scott Mitchell](https://twitter.com/ScottOnWriting) tarafından</span><span class="sxs-lookup"><span data-stu-id="abb2d-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="abb2d-105">[Kodu indirin](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_09_CS.zip) veya [PDF 'yi indirin](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial09_AppServicesConfig_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="abb2d-105">[Download Code](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_09_CS.zip) or [Download PDF](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial09_AppServicesConfig_cs.pdf)</span></span>

> <span data-ttu-id="abb2d-106">ASP.NET sürüm 2,0, .NET Framework bir parçası olan ve Web uygulamanıza zengin işlevsellik eklemek için kullanabileceğiniz bir yapı blok Hizmetleri paketi olarak hizmet veren bir dizi uygulama hizmeti sunmuştur.</span><span class="sxs-lookup"><span data-stu-id="abb2d-106">ASP.NET version 2.0 introduced a series of application services, which are part of the .NET Framework and serve as a suite of building block services that you can use to add rich functionality to your web application.</span></span> <span data-ttu-id="abb2d-107">Bu öğreticide, üretim ortamında uygulama hizmetlerini kullanmak için bir Web sitesinin nasıl yapılandırılacağı ve üretim ortamındaki Kullanıcı hesaplarını ve rolleri yönetme ile ilgili yaygın sorunları ele alınmaktadır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-107">This tutorial explores how to configure a website in the production environment to use application services and addresses common issues with managing user accounts and roles on the production environment.</span></span>

## <a name="introduction"></a><span data-ttu-id="abb2d-108">Giriş</span><span class="sxs-lookup"><span data-stu-id="abb2d-108">Introduction</span></span>

<span data-ttu-id="abb2d-109">ASP.NET sürüm 2,0, .NET Framework bir parçası olan ve Web uygulamanıza zengin işlevsellik eklemek için kullanabileceğiniz bir yapı blok Hizmetleri paketi olarak hizmet veren bir dizi *uygulama hizmeti*sunmuştur.</span><span class="sxs-lookup"><span data-stu-id="abb2d-109">ASP.NET version 2.0 introduced a series of *application services*, which are part of the .NET Framework and serve as a suite of building block services that you can use to add rich functionality to your web application.</span></span> <span data-ttu-id="abb2d-110">Uygulama Hizmetleri şunları içerir:</span><span class="sxs-lookup"><span data-stu-id="abb2d-110">The application services include:</span></span>

- <span data-ttu-id="abb2d-111">**Üyelik** -Kullanıcı hesapları oluşturmak ve yönetmek IÇIN bir API.</span><span class="sxs-lookup"><span data-stu-id="abb2d-111">**Membership** - an API for creating and managing user accounts.</span></span>
- <span data-ttu-id="abb2d-112">**Roller** -kullanıcıları gruplar halinde kategorilere ayırmak IÇIN bir API.</span><span class="sxs-lookup"><span data-stu-id="abb2d-112">**Roles** - an API for categorizing users into groups.</span></span>
- <span data-ttu-id="abb2d-113">**Profile** -özel, kullanıcıya özgü içerik depolamaya YÖNELIK bir API.</span><span class="sxs-lookup"><span data-stu-id="abb2d-113">**Profile** - an API for storing custom, user-specific content.</span></span>
- <span data-ttu-id="abb2d-114">**Site haritası** -daha sonra menüler ve içerik haritaları gibi gezinme denetimleriyle görüntülenebilecek bir hiyerarşi biçiminde bir site s mantıksal yapısını tanımlamaya YÖNELIK bir API.</span><span class="sxs-lookup"><span data-stu-id="abb2d-114">**Site Map** - an API for defining a site s logical structure in the form of a hierarchy, which can then be displayed via navigation controls, such as menus and breadcrumbs.</span></span>
- <span data-ttu-id="abb2d-115">**Kişiselleştirme** -genellikle [*Web*](https://msdn.microsoft.com/library/e0s9t4ck.aspx)siteleriyle kullanılan özelleştirme TERCIHLERINI korumak için bir API.</span><span class="sxs-lookup"><span data-stu-id="abb2d-115">**Personalization** - an API for maintaining customization preferences, most often used with [*WebParts*](https://msdn.microsoft.com/library/e0s9t4ck.aspx).</span></span>
- <span data-ttu-id="abb2d-116">**Sistem durumu izleme** -çalışan bir Web uygulaması için performansı, güvenliği, hataları ve diğer sistem durumu ölçümlerini izlemeye YÖNELIK bir API.</span><span class="sxs-lookup"><span data-stu-id="abb2d-116">**Health Monitoring** - an API for monitoring performance, security, errors, and other system health metrics for a running web application.</span></span>

<span data-ttu-id="abb2d-117">Uygulama Hizmetleri API 'Leri belirli bir uygulamaya bağlı değildir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-117">The application services APIs are not tied to a specific implementation.</span></span> <span data-ttu-id="abb2d-118">Bunun yerine, uygulama hizmetlerinin belirli bir *sağlayıcıyı*kullanmasını ve bu sağlayıcının belirli bir teknolojiyi kullanarak hizmeti uyguladığını söyleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="abb2d-118">Instead, you instruct the application services to use a particular *provider*, and that provider implements the service using a particular technology.</span></span> <span data-ttu-id="abb2d-119">Bir Web barındırma şirketinde barındırılan Internet tabanlı Web uygulamaları için en yaygın olarak kullanılan sağlayıcılar, SQL Server veritabanı uygulaması kullanan sağlayıcılardır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-119">The most commonly used providers for Internet-based web applications hosted at a web hosting company are those providers that use a SQL Server database implementation.</span></span> <span data-ttu-id="abb2d-120">Örneğin `SqlMembershipProvider`, Kullanıcı hesabı bilgilerini bir Microsoft SQL Server veritabanında depolayan üyelik API 'SI için bir sağlayıcıdır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-120">For example, the `SqlMembershipProvider` is a provider for the Membership API that stores user account information in a Microsoft SQL Server database.</span></span>

<span data-ttu-id="abb2d-121">Uygulama hizmetleri ve SQL Server sağlayıcılarının kullanılması, uygulamayı dağıtma sırasında bazı güçlükleri ekler.</span><span class="sxs-lookup"><span data-stu-id="abb2d-121">Using the application services and SQL Server providers adds some challenges when deploying the application.</span></span> <span data-ttu-id="abb2d-122">Başlangıçlara yönelik olarak, uygulama Hizmetleri veritabanı nesnelerinin hem geliştirme hem de üretim veritabanlarında doğru şekilde oluşturulması ve uygun şekilde başlatılmış olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-122">For starters, the application services database objects must be properly created on both the development and production databases and appropriately initialized.</span></span> <span data-ttu-id="abb2d-123">Ayrıca, yapılması gereken önemli yapılandırma ayarları vardır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-123">There are also important configuration settings that need to be made.</span></span>

> [!NOTE]
> <span data-ttu-id="abb2d-124">Uygulama Hizmetleri API 'Leri, çalışma zamanında API s uygulama ayrıntılarının sağlanmasını sağlayan bir tasarım [*modeli olan sağlayıcı modeli*](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx)kullanılarak tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-124">The application services APIs were designed using the [*provider model*](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), a design pattern that allows for an API s implementation details to be provided at runtime.</span></span> <span data-ttu-id="abb2d-125">.NET Framework, bir SQL Server veritabanı uygulaması kullanan üyelik ve rol API 'Leri için sağlayıcılar olan `SqlMembershipProvider` ve `SqlRoleProvider`gibi kullanılabilecek bir dizi uygulama hizmeti sağlayıcısıyla birlikte gelir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-125">The .NET Framework ships with a number of application service providers that can be used, such as the `SqlMembershipProvider` and `SqlRoleProvider`, which are providers for the Membership and Roles APIs that use a SQL Server database implementation.</span></span> <span data-ttu-id="abb2d-126">Ayrıca özel bir sağlayıcı oluşturup eklenti ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="abb2d-126">You can also create and plug-in a custom provider.</span></span> <span data-ttu-id="abb2d-127">Aslında, Book Incelemeleri Web uygulaması, site haritası API 'SI (`ReviewSiteMapProvider`) için bir özel sağlayıcı içerir. Bu, site haritasını, `Genres` ve veritabanındaki `Books` tablolardaki verileri oluşturur.</span><span class="sxs-lookup"><span data-stu-id="abb2d-127">In fact, the Book Reviews web application already contains a custom provider for the Site Map API (`ReviewSiteMapProvider`), which constructs the site map from the data in the `Genres` and `Books` tables in the database.</span></span>

<span data-ttu-id="abb2d-128">Bu öğreticide, üyelik ve rol API 'Lerini kullanmak için kitap Incelemelerinin Web uygulamasını nasıl genişlettiğiyle ilgili bir bakış açıklanır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-128">This tutorial starts with a look at how I extended the Book Reviews web application to use the Membership and Roles APIs.</span></span> <span data-ttu-id="abb2d-129">Daha sonra, SQL Server veritabanı uygulamasıyla uygulama hizmetleri 'ni kullanan bir Web uygulamasını dağıtmaya ve üretim ortamındaki Kullanıcı hesaplarını ve rolleri yönetme ile ilgili yaygın sorunları gidermeye geçer.</span><span class="sxs-lookup"><span data-stu-id="abb2d-129">It then walks through deploying a web application that uses application services with a SQL Server database implementation, and concludes by addressing common issues with managing user accounts and roles on the production environment.</span></span>

## <a name="updates-to-the-book-reviews-application"></a><span data-ttu-id="abb2d-130">Kitap Inceleme uygulamasındaki güncelleştirmeler</span><span class="sxs-lookup"><span data-stu-id="abb2d-130">Updates to the Book Reviews Application</span></span>

<span data-ttu-id="abb2d-131">Son iki öğreticilerde, kitap Incelemelerinin Web uygulaması statik bir Web sitesinden dinamik, veri odaklı bir Web uygulamasına, tarzları ve incelemeleri yönetmeye yönelik bir dizi yönetim sayfası ile tamamlanan bir şekilde güncelleştirildi.</span><span class="sxs-lookup"><span data-stu-id="abb2d-131">Over the past couple tutorials the Book Reviews web application was updated from a static website to a dynamic, data-driven web application complete with a set of administration pages for managing genres and reviews.</span></span> <span data-ttu-id="abb2d-132">Ancak, bu yönetim bölümü şu anda korunmuyor. yönetim sayfası URL 'sini bilen (veya tahmin eden) herhangi bir Kullanıcı, sitemizdeki incelemeleri oluşturma, düzenleme veya silme işlemi yapabilir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-132">However, this administration section is currently not protected - any user who knows (or guesses) the administration page URL can waltz in and create, edit, or delete reviews on our site.</span></span> <span data-ttu-id="abb2d-133">Bir Web sitesinin belirli kısımlarını korumanın yaygın bir yolu, Kullanıcı hesaplarını uygulamak ve ardından belirli kullanıcılara veya rollere erişimi kısıtlamak için URL yetkilendirme kurallarını kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-133">A common way to protect certain portions of a website is to implement user accounts and then use URL authorization rules to restrict access to certain users or roles.</span></span> <span data-ttu-id="abb2d-134">Bu öğreticiyle indirilebilir olan kitap Incelemeleri Web uygulaması, Kullanıcı hesaplarını ve rolleri destekler.</span><span class="sxs-lookup"><span data-stu-id="abb2d-134">The Book Reviews web application available for download with this tutorial supports user accounts and roles.</span></span> <span data-ttu-id="abb2d-135">Yönetici adlı tek bir role sahiptir ve yalnızca bu roldeki kullanıcılar yönetim sayfalarına erişebilir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-135">It has a single role defined named Admin and only users in this role can access the administration pages.</span></span>

> [!NOTE]
> <span data-ttu-id="abb2d-136">Kitap Incelemelerinin Web uygulamasında üç Kullanıcı hesabı oluşturduğdum: Scott, Jisun ve gamze.</span><span class="sxs-lookup"><span data-stu-id="abb2d-136">I ve created three user accounts in the Book Reviews web application: Scott, Jisun, and Alice.</span></span> <span data-ttu-id="abb2d-137">Üç kullanıcının tümü aynı parolaya sahiptir: **parola!**</span><span class="sxs-lookup"><span data-stu-id="abb2d-137">All three users have the same password: **password!**</span></span> <span data-ttu-id="abb2d-138">Scott ve Jisun yönetici rolünde, Çiğdem değil.</span><span class="sxs-lookup"><span data-stu-id="abb2d-138">Scott and Jisun are in the Admin role, Alice is not.</span></span> <span data-ttu-id="abb2d-139">Yönetim dışı site sayfalarına hala anonim kullanıcılar erişebilir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-139">The site s non-administration pages are still accessible to anonymous users.</span></span> <span data-ttu-id="abb2d-140">Diğer bir deyişle, yönetmek istemediğiniz sürece siteyi ziyaret etmek için oturum açmanız gerekmez, bu durumda yönetici rolünde bir kullanıcı olarak oturum açmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-140">That is, you do not need to sign in to visit the site, unless you want to administer it, in which case you must sign in as a user in the Admin role.</span></span>

<span data-ttu-id="abb2d-141">Kitap Inceleme uygulaması ana sayfası, kimliği doğrulanmış ve anonim kullanıcılar için farklı bir kullanıcı arabirimi içerecek şekilde güncelleştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-141">The Book Reviews application s master page has been updated to include a different user interface for authenticated and anonymous users.</span></span> <span data-ttu-id="abb2d-142">Anonim bir Kullanıcı, sağ üst köşedeki bir oturum açma bağlantısı gördüğü siteyi ziyaret ederse.</span><span class="sxs-lookup"><span data-stu-id="abb2d-142">If an anonymous user visits the site she sees a Login link in the upper right corner.</span></span> <span data-ttu-id="abb2d-143">Kimliği doğrulanmış bir Kullanıcı "hoş geldiniz geri, *Kullanıcı adı*!" iletisini görür</span><span class="sxs-lookup"><span data-stu-id="abb2d-143">An authenticated user sees the message, "Welcome back, *username*!"</span></span> <span data-ttu-id="abb2d-144">ve oturumu kapatmak için bir bağlantı. Ayrıca, bir ziyaretçi kimlik doğrulaması için Kullanıcı arabirimi ve mantığını sağlayan bir oturum açma Web denetimi içeren bir oturum açma sayfası (`~/Login.aspx`) vardır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-144">and a link to log out. There s also a login page (`~/Login.aspx`), which contains a Login Web control that provides the user interface and logic for authenticating a visitor.</span></span> <span data-ttu-id="abb2d-145">Yalnızca Yöneticiler yeni hesaplar oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-145">Only administrators can create new accounts.</span></span> <span data-ttu-id="abb2d-146">(`~/Admin` klasöründe Kullanıcı hesapları oluşturmak ve yönetmek için sayfalar vardır.)</span><span class="sxs-lookup"><span data-stu-id="abb2d-146">(There are pages for creating and managing user accounts in the `~/Admin` folder.)</span></span>

### <a name="configuring-the-membership-and-roles-apis"></a><span data-ttu-id="abb2d-147">Üyelik ve rol API 'Lerini yapılandırma</span><span class="sxs-lookup"><span data-stu-id="abb2d-147">Configuring the Membership and Roles APIs</span></span>

<span data-ttu-id="abb2d-148">Kitap Incelemeleri Web uygulaması, Kullanıcı hesaplarını desteklemek ve bu kullanıcıları rollere (yani, yönetici rolü) gruplamak için üyelik ve rol API 'Lerini kullanır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-148">The Book Reviews web application uses the Membership and Roles APIs to support user accounts and to group those users into roles (namely, the Admin role).</span></span> <span data-ttu-id="abb2d-149">`SqlMembershipProvider` ve `SqlRoleProvider` sağlayıcı sınıfları, hesap ve rol bilgilerini bir SQL Server veritabanında depolamak istediğimiz için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-149">The `SqlMembershipProvider` and `SqlRoleProvider` provider classes are used because we want to store account and role information in a SQL Server database.</span></span>

> [!NOTE]
> <span data-ttu-id="abb2d-150">Bu öğreticide, üyelik ve rol API 'Lerini destekleyecek bir Web uygulamasını yapılandırma konusunda ayrıntılı bir inceleme olması amaçlanmamıştır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-150">This tutorial is not intended to be a detailed examination at configuring a web application to support the Membership and Roles APIs.</span></span> <span data-ttu-id="abb2d-151">Bu API 'Lere tam bakış ve bu Web sitesini kullanmak üzere yapılandırmak için gerçekleştirmeniz gereken adımlar için lütfen [*Web sitesi güvenlik öğreticilerimi*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md)okuyun.</span><span class="sxs-lookup"><span data-stu-id="abb2d-151">For a thorough look at these APIs and the steps you need to take to configure a website to use them, please read my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>

<span data-ttu-id="abb2d-152">Uygulama hizmetlerini bir SQL Server veritabanıyla kullanmak için, önce bu sağlayıcılar tarafından kullanılan veritabanı nesnelerini Kullanıcı hesabı ve rol bilgilerinin depolanmasını istediğiniz veritabanına eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-152">To use the application services with a SQL Server database you must first add the database objects used by these providers to the database where you want the user account and role information stored.</span></span> <span data-ttu-id="abb2d-153">Bu önkoşul veritabanı nesneleri çeşitli tablolar, görünümler ve saklı yordamlar içerir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-153">These requisite database objects include a variety of tables, views, and stored procedures.</span></span> <span data-ttu-id="abb2d-154">Aksi belirtilmedikçe, `SqlMembershipProvider` ve `SqlRoleProvider` sağlayıcı sınıfları uygulama s `App_Data` klasöründe bulunan `ASPNETDB` adlı bir SQL Server Express sürümü veritabanı kullanır; Böyle bir veritabanı yoksa, çalışma zamanında bu sağlayıcılar tarafından gerekli veritabanı nesneleriyle otomatik olarak oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="abb2d-154">Unless specified otherwise, the `SqlMembershipProvider` and `SqlRoleProvider` provider classes use a SQL Server Express Edition database named `ASPNETDB` located in the application s `App_Data` folder; if such a database does not exist, it is automatically created with the necessary database objects by these providers at runtime.</span></span>

<span data-ttu-id="abb2d-155">Uygulama Hizmetleri veritabanı nesnelerini Web sitesinin uygulamaya özgü verilerin depolandığı veritabanında oluşturmak için bu mümkün ve genellikle idealdir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-155">It is possible, and usually ideal, to create the application services database objects in the same database where the website s application-specific data is stored.</span></span> <span data-ttu-id="abb2d-156">.NET Framework, veritabanı nesnelerini belirtilen bir veritabanına yükleyen `aspnet_regsql.exe` adlı bir araçla birlikte gönderilir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-156">The .NET Framework ships with a tool named `aspnet_regsql.exe` that installs the database objects on a specified database.</span></span> <span data-ttu-id="abb2d-157">Bu aracı daha sonra bu nesneleri `App_Data` klasöründeki (geliştirme veritabanı) `Reviews.mdf` veritabanına eklemek için kullandınız.</span><span class="sxs-lookup"><span data-stu-id="abb2d-157">I have gone ahead and used this tool to add these objects to the `Reviews.mdf` database in the `App_Data` folder (the development database).</span></span> <span data-ttu-id="abb2d-158">Bu nesneleri üretim veritabanına eklerken Bu öğreticinin ilerleyen kısımlarında bu aracı nasıl kullanacağınızı inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="abb2d-158">We'll see how to use this tool later in this tutorial when we add these objects to the production database.</span></span>

<span data-ttu-id="abb2d-159">Uygulama Hizmetleri veritabanı nesnelerini `ASPNETDB` dışında bir veritabanına eklerseniz, `SqlMembershipProvider` ve `SqlRoleProvider` sağlayıcı sınıfları yapılandırmalarının uygun veritabanını kullanmaları için özelleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-159">If you add the application services database objects to a database other than `ASPNETDB` you will need to customize the `SqlMembershipProvider` and `SqlRoleProvider` provider classes configurations so that they use the appropriate database.</span></span> <span data-ttu-id="abb2d-160">Üyelik sağlayıcısını özelleştirmek için `Web.config``<system.web>` bölümünde [ *&lt;üyelik&gt; öğesi*](https://msdn.microsoft.com/library/1b9hw62f.aspx) ekleyin. Rol sağlayıcısını yapılandırmak için [ *&lt;roleManager&gt; öğesini*](https://msdn.microsoft.com/library/ms164660.aspx) kullanın.</span><span class="sxs-lookup"><span data-stu-id="abb2d-160">To customize the Membership provider add a [*&lt;membership&gt; element*](https://msdn.microsoft.com/library/1b9hw62f.aspx) within the `<system.web>` section in `Web.config`; use the [*&lt;roleManager&gt; element*](https://msdn.microsoft.com/library/ms164660.aspx) to configure the Roles provider.</span></span> <span data-ttu-id="abb2d-161">Aşağıdaki kod parçacığı, uygulama `Web.config` Inceler ve üyelik ve roller API 'Leri için yapılandırma ayarlarını gösterir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-161">The following snippet is taken from the Book Reviews application s `Web.config` and shows the configure settings for the Membership and Roles APIs.</span></span> <span data-ttu-id="abb2d-162">Her ikisinin de, sırasıyla `SqlMembershipProvider` ve `SqlRoleProvider` sağlayıcılarını kullanan yeni bir sağlayıcıyı `ReviewMembership` ve `ReviewRole` kaydedeceğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="abb2d-162">Note that both register a new provider - `ReviewMembership` and `ReviewRole` - that use the `SqlMembershipProvider` and `SqlRoleProvider` providers, respectively.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample1.xml)]

<span data-ttu-id="abb2d-163">`Web.config` File s `<authentication>` öğesi form tabanlı kimlik doğrulamasını destekleyecek şekilde yapılandırılmıştır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-163">The `Web.config` file s `<authentication>` element has also been configured to support forms-based authentication.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample2.xml)]

### <a name="limiting-access-to-the-administration-pages"></a><span data-ttu-id="abb2d-164">Yönetim sayfalarına erişimi sınırlandırma</span><span class="sxs-lookup"><span data-stu-id="abb2d-164">Limiting Access to the Administration Pages</span></span>

<span data-ttu-id="abb2d-165">ASP.NET, belirli bir dosya veya klasöre Kullanıcı veya rol tarafından *URL yetkilendirmesi* özelliği aracılığıyla erişim izni vermenizi ya da reddetmeyi kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-165">ASP.NET makes it easy to grant or deny access to a particular file or folder by user or by role via its *URL authorization* feature.</span></span> <span data-ttu-id="abb2d-166">( *IIS ile ASP.NET geliştirme sunucusu öğreticisi arasındaki temel farklılıklara* ilişkin URL yetkilendirmesi kısaca ele ALıNMıŞTıR ve ııs Ile ASP.net GELIŞTIRME sunucusunun URL yetkilendirme kurallarını statik ve dinamik içerik için farklı şekilde nasıl uygulayacağınızı gösterdi.) Yönetici rolündeki kullanıcılar hariç `~/Admin` klasörüne erişimi yasakladığımızda, URL yetkilendirme kurallarını bu klasöre eklememiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-166">(We briefly discussed URL authorization in the *Core Differences Between IIS and the ASP.NET Development Server* tutorial and showed how IIS and the ASP.NET Development Server apply URL authorization rules differently for static versus dynamic content.) Because we want to prohibit access to the `~/Admin` folder except for those users in the Admin role, we need to add URL authorization rules to this folder.</span></span> <span data-ttu-id="abb2d-167">Özellikle, URL yetkilendirme kurallarının yönetici rolünde kullanıcılara izin vermemesi ve diğer tüm kullanıcıları reddetmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-167">Specifically, the URL authorization rules need to allow users in the Admin role and deny all other users.</span></span> <span data-ttu-id="abb2d-168">Bu, `~/Admin` klasörüne aşağıdaki içeriklerle bir `Web.config` dosyası eklenerek gerçekleştirilir:</span><span class="sxs-lookup"><span data-stu-id="abb2d-168">This is accomplished by adding a `Web.config` file to the `~/Admin` folder with the following contents:</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample3.xml)]

<span data-ttu-id="abb2d-169">ASP.NET s URL yetkilendirme özelliği hakkında daha fazla bilgi edinmek ve kullanıcıların ve rollerinin yetkilendirme kurallarını öğrenmek için nasıl kullanılacağı hakkında daha fazla bilgi için, [*Web sitemin güvenlik öğreticilerimin*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) [*Kullanıcı tabanlı yetkilendirme*](../../older-versions-security/membership/user-based-authorization-cs.md) ve [*rol tabanlı yetkilendirme*](../../older-versions-security/roles/role-based-authorization-cs.md) öğreticilerini okuduğunuzdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="abb2d-169">For more information on ASP.NET s URL authorization feature and how to use it to spell out authorization rules for users and for roles, be sure to read the [*User-Based Authorization*](../../older-versions-security/membership/user-based-authorization-cs.md) and [*Role-Based Authorization*](../../older-versions-security/roles/role-based-authorization-cs.md) tutorials from my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>

## <a name="deploying-a-web-application-that-uses-application-services"></a><span data-ttu-id="abb2d-170">Uygulama Hizmetleri kullanan bir Web uygulamasını dağıtma</span><span class="sxs-lookup"><span data-stu-id="abb2d-170">Deploying a Web Application That Uses Application Services</span></span>

<span data-ttu-id="abb2d-171">Uygulama hizmetleri ve bir veritabanında uygulama hizmetleri bilgilerini depolayan bir sağlayıcı kullanan bir Web sitesi dağıtıldığında, uygulama hizmetleri için gereken veritabanı nesnelerinin üretim veritabanında oluşturulması zorunludur.</span><span class="sxs-lookup"><span data-stu-id="abb2d-171">When deploying a website that uses application services and a provider that stores the application services information in a database, it is imperative that the database objects needed by the application services be created on the production database.</span></span> <span data-ttu-id="abb2d-172">Başlangıçta üretim veritabanı bu nesneleri içermez, bu nedenle uygulama ilk kez dağıtıldığında (veya uygulama hizmetleri eklendikten sonra ilk kez dağıtıldığında), bu önkoşul veritabanı nesnelerini almak için ek adımlar gerçekleştirmeniz gerekir üretim veritabanı.</span><span class="sxs-lookup"><span data-stu-id="abb2d-172">Initially the production database does not contain these objects, so when the application is first deployed (or when it is deployed for the first time after application services have been added), you must take extra steps to get these requisite database objects on the production database.</span></span>

<span data-ttu-id="abb2d-173">Geliştirme ortamında oluşturulan kullanıcı hesaplarını üretim ortamına çoğaltmak istiyorsanız, uygulama hizmetleri 'ni kullanan bir Web sitesi dağıtımında başka bir zorluk ortaya çıkabilir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-173">Another challenge can arise when deploying a website that uses application services if you intend to replicate the user accounts created in the development environment to the production environment.</span></span> <span data-ttu-id="abb2d-174">Üyelik ve roller yapılandırmasına bağlı olarak, geliştirme ortamında oluşturulan kullanıcı hesaplarını üretim veritabanına başarıyla kopyalayasanız bile, bu kullanıcılar üretimde Web uygulamasında oturum açamasa da olasıdır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-174">Depending on the Membership and Roles configuration, it is possible that even if you successfully copy the user accounts that were created in the development environment to the production database, these users cannot sign into the web application in production.</span></span> <span data-ttu-id="abb2d-175">Bu sorunun nedenine bakacağız ve bunun oluşmasını nasıl önleyebiliriz.</span><span class="sxs-lookup"><span data-stu-id="abb2d-175">We'll look at the cause of this issue and discuss how to prevent it from happening.</span></span>

<span data-ttu-id="abb2d-176">ASP.NET, Visual Studio 'dan başlatılabilen iyi bir [*Web sitesi yönetim aracı (WSAT)* ](https://msdn.microsoft.com/library/yy40ytx0.aspx) ile birlikte gelir ve Kullanıcı hesabı, roller ve yetkilendirme kurallarının Web tabanlı bir arabirim aracılığıyla yönetilmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="abb2d-176">ASP.NET ships with a nice [*Web Site Administration Tool (WSAT)*](https://msdn.microsoft.com/library/yy40ytx0.aspx) that can be launched from Visual Studio and allows the user account, roles, and authorization rules to be managed through a web-based interface.</span></span> <span data-ttu-id="abb2d-177">Ne yazık ki, WSAT yalnızca yerel Web siteleri için geçerlidir; Yani, üretim ortamındaki Web uygulaması için Kullanıcı hesaplarını, rolleri ve yetkilendirme kurallarını uzaktan yönetmek için kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="abb2d-177">Unfortunately, the WSAT only works for local websites, meaning that it cannot be used to remotely manage user accounts, roles, and authorization rules for the web application in the production environment.</span></span> <span data-ttu-id="abb2d-178">Üretim Web sitenizdeki WSAT benzeri davranışları uygulamak için farklı yöntemlere bakacağız.</span><span class="sxs-lookup"><span data-stu-id="abb2d-178">We'll look at different ways to implement WSAT-like behavior from your production website.</span></span>

### <a name="adding-the-database-objects-using-aspnet_regsqlexe"></a><span data-ttu-id="abb2d-179">ASPNET\_regsql. exe ' yi kullanarak veritabanı nesneleri ekleme</span><span class="sxs-lookup"><span data-stu-id="abb2d-179">Adding the Database Objects Using aspnet\_regsql.exe</span></span>

<span data-ttu-id="abb2d-180">*Veritabanı dağıtma* öğreticisi, verileri geliştirme veritabanından üretim veritabanına kopyalamayı ve bu tekniklerin uygulama Hizmetleri veritabanı nesnelerini üretim veritabanına kopyalamak için kesinlikle kullanılabileceğini gösterdi.</span><span class="sxs-lookup"><span data-stu-id="abb2d-180">The *Deploying a Database* tutorial showed how to copy the tables and data from the development database to the production database, and these techniques can certainly be used to copy the application services database objects to the production database.</span></span> <span data-ttu-id="abb2d-181">Başka bir seçenek de, uygulama Hizmetleri veritabanı nesnelerini bir veritabanından ekleyen veya kaldıran `aspnet_regsql.exe` aracıdır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-181">Another option is the `aspnet_regsql.exe` tool, which adds or removes the application services database objects from a database.</span></span>

> [!NOTE]
> <span data-ttu-id="abb2d-182">`aspnet_regsql.exe` Aracı, belirtilen veritabanında veritabanı nesnelerini oluşturur.</span><span class="sxs-lookup"><span data-stu-id="abb2d-182">The `aspnet_regsql.exe` tool creates the database objects on a specified database.</span></span> <span data-ttu-id="abb2d-183">Bu veritabanı nesnelerindeki verileri geliştirme veritabanından üretim veritabanına geçirmez.</span><span class="sxs-lookup"><span data-stu-id="abb2d-183">It does not migrate data in those database objects from the development database to the production database.</span></span> <span data-ttu-id="abb2d-184">Geliştirme veritabanındaki kullanıcı hesabı ve rol bilgilerini üretim veritabanına kopyalamak için *bir veritabanı dağıtma* Öğreticisi ' nde ele alınan teknikleri kullanın.</span><span class="sxs-lookup"><span data-stu-id="abb2d-184">If you mean to copy the user account and role information in the development database to the production database use the techniques covered in the *Deploying a Database* tutorial.</span></span>

<span data-ttu-id="abb2d-185">`aspnet_regsql.exe` aracını kullanarak veritabanı nesnelerinin üretim veritabanına nasıl ekleneceğini inceleyelim.</span><span class="sxs-lookup"><span data-stu-id="abb2d-185">Let s look at how to add the database objects to the production database using the `aspnet_regsql.exe` tool.</span></span> <span data-ttu-id="abb2d-186">Windows Gezgini 'ni açarak ve bilgisayarınızdaki .NET Framework sürüm 2,0 dizinine giderek başlayın,% WINDIR% \ Microsoft. NET\Framework\v2.0.50727.</span><span class="sxs-lookup"><span data-stu-id="abb2d-186">Start by opening Windows Explorer and navigating to the .NET Framework version 2.0 directory on your computer, %WINDIR%\ Microsoft.NET\Framework\v2.0.50727.</span></span> <span data-ttu-id="abb2d-187">`aspnet_regsql.exe` aracını bulmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-187">There you should find the `aspnet_regsql.exe` tool.</span></span> <span data-ttu-id="abb2d-188">Bu araç, komut satırından kullanılabilir, ancak aynı zamanda bir grafik kullanıcı arabirimi de içerir; grafik bileşenini başlatmak için `aspnet_regsql.exe` dosyasına çift tıklayın.</span><span class="sxs-lookup"><span data-stu-id="abb2d-188">This tool can be used from the command-line, but it also includes a graphical user interface; double-click the `aspnet_regsql.exe` file to launch its graphical component.</span></span>

<span data-ttu-id="abb2d-189">Aracı, amacını açıklayan bir giriş ekranı görüntüleyerek başlar.</span><span class="sxs-lookup"><span data-stu-id="abb2d-189">The tool starts by displaying a splash screen explaining its purpose.</span></span> <span data-ttu-id="abb2d-190">Şekil 1 ' de gösterilen "Kurulum seçeneği seçin" ekranına ilerlemek için Ileri ' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="abb2d-190">Click Next to advance to the "Select a Setup Option" screen, which is shown in Figure 1.</span></span> <span data-ttu-id="abb2d-191">Buradan, uygulama Hizmetleri veritabanı nesnelerini eklemeyi veya bir veritabanından kaldırmayı seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="abb2d-191">From here you can choose to add the application services database objects or remove them from a database.</span></span> <span data-ttu-id="abb2d-192">Bu nesneleri üretim veritabanına eklemek istiyoruz, "uygulama hizmetleri için SQL Server Yapılandır" seçeneğini belirleyin ve Ileri ' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="abb2d-192">Because we want to add these objects to the production database, select the "Configure SQL Server for application services" option and click Next.</span></span>

<span data-ttu-id="abb2d-193">[Uygulama Hizmetleri için SQL Server yapılandırmayı ![seçin](configuring-a-website-that-uses-application-services-cs/_static/image2.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="abb2d-193">[![Choose to Configure SQL Server for Application Services](configuring-a-website-that-uses-application-services-cs/_static/image2.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image1.jpg)</span></span>

<span data-ttu-id="abb2d-194">**Şekil 1**: Uygulama Hizmetleri Için SQL Server yapılandırmayı seçin ([tam boyutlu görüntüyü görüntülemek için tıklayın](configuring-a-website-that-uses-application-services-cs/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="abb2d-194">**Figure 1**: Choose to Configure SQL Server for Application Services ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image3.jpg))</span></span>

<span data-ttu-id="abb2d-195">"Sunucu ve veritabanını seçin" ekranında, veritabanına bağlanmak için bilgi ister.</span><span class="sxs-lookup"><span data-stu-id="abb2d-195">In "Select the Server and Database" screen prompts for information to connect to the database.</span></span> <span data-ttu-id="abb2d-196">Web barındırma şirketiniz tarafından sağlanan veritabanı sunucusunu, güvenlik kimlik bilgilerini ve veritabanı adını girin ve Ileri ' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="abb2d-196">Enter the database server, the security credentials, and the database name supplied to you by your web hosting company and click Next.</span></span>

> [!NOTE]
> <span data-ttu-id="abb2d-197">Veritabanı sunucunuzu ve kimlik bilgilerinizi girdikten sonra, veritabanı açılan listesini genişletirken bir hata alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="abb2d-197">After entering your database server and credentials you may get an error when expanding the database drop-down list.</span></span> <span data-ttu-id="abb2d-198">`aspnet_regsql.exe` Aracı, sunucudaki veritabanlarının listesini almak için `sysdatabases` sistem tablosunu sorgular, ancak bazı Web barındırma şirketleri bu bilgilerin genel kullanıma açık olmaması için veritabanı sunucularını kilitler.</span><span class="sxs-lookup"><span data-stu-id="abb2d-198">The `aspnet_regsql.exe` tool queries the `sysdatabases` system table to retrieve a list of databases on the server, but some web hosting companies lock down their database servers so that this information is not publicly available.</span></span> <span data-ttu-id="abb2d-199">Bu hatayı alırsanız, doğrudan açılan listeye veritabanı adını yazabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="abb2d-199">If you get this error you can type the database name directly into the drop-down list.</span></span>

<span data-ttu-id="abb2d-200">[![, veritabanı bağlantı bilgilerinizi Içeren Aracı sağlayın](configuring-a-website-that-uses-application-services-cs/_static/image5.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="abb2d-200">[![Supply the Tool With Your Database s Connection Information](configuring-a-website-that-uses-application-services-cs/_static/image5.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image4.jpg)</span></span>

<span data-ttu-id="abb2d-201">**Şekil 2**: veritabanını veritabanınızın bağlantı bilgileriyle sağlama ([tam boyutlu görüntüyü görüntülemek için tıklayın](configuring-a-website-that-uses-application-services-cs/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="abb2d-201">**Figure 2**: Supply the Tool With Your Database s Connection Information ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image6.jpg))</span></span>

<span data-ttu-id="abb2d-202">Sonraki ekranda, uygulama Hizmetleri veritabanı nesneleri belirtilen veritabanına ekleneceklerinde, gerçekleşecek şekilde olan eylemler özetlenmektedir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-202">The subsequent screen summarizes the actions that are about to take place, namely that the application services database objects are going to be added to the specified database.</span></span> <span data-ttu-id="abb2d-203">Bu eylemi gerçekleştirmek için Ileri ' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="abb2d-203">Click Next to complete this action.</span></span> <span data-ttu-id="abb2d-204">Birkaç dakika sonra, veritabanı nesnelerinin eklendiğini belirten son ekran görüntülenir (bkz. Şekil 3).</span><span class="sxs-lookup"><span data-stu-id="abb2d-204">After a few moments, the final screen is displayed, noting that the database objects have been added (see Figure 3).</span></span>

<span data-ttu-id="abb2d-205">[Başarılı ![! Uygulama Hizmetleri veritabanı nesneleri üretim veritabanına eklendi](configuring-a-website-that-uses-application-services-cs/_static/image8.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="abb2d-205">[![Success! The Application Services Database Objects Were Added to the Production Database](configuring-a-website-that-uses-application-services-cs/_static/image8.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image7.jpg)</span></span>

<span data-ttu-id="abb2d-206">**Şekil 3**: başarılı!</span><span class="sxs-lookup"><span data-stu-id="abb2d-206">**Figure 3**: Success!</span></span> <span data-ttu-id="abb2d-207">Uygulama Hizmetleri veritabanı nesneleri üretim veritabanına eklendi ([tam boyutlu görüntüyü görüntülemek Için tıklayın](configuring-a-website-that-uses-application-services-cs/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="abb2d-207">The Application Services Database Objects Were Added to the Production Database ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image9.jpg))</span></span>

<span data-ttu-id="abb2d-208">Uygulama Hizmetleri veritabanı nesnelerinin üretim veritabanına başarıyla eklendiğini doğrulamak için SQL Server Management Studio açın ve üretim veritabanınıza bağlanın.</span><span class="sxs-lookup"><span data-stu-id="abb2d-208">To verify that the application services database objects were successfully added to the production database, open SQL Server Management Studio and connect to your production database.</span></span> <span data-ttu-id="abb2d-209">Şekil 4 ' te gösterildiği gibi, artık veritabanınızda uygulama Hizmetleri veritabanı tablolarını, `aspnet_Applications`, `aspnet_Membership``aspnet_Users`ve benzerlerini görmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-209">As Figure 4 shows, you should now see the application services database tables in your database, `aspnet_Applications`, `aspnet_Membership`, `aspnet_Users`, and so forth.</span></span>

<span data-ttu-id="abb2d-210">[![veritabanı nesnelerinin üretim veritabanına eklendiğini onaylayın](configuring-a-website-that-uses-application-services-cs/_static/image11.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="abb2d-210">[![Confirm That the Database Objects Were Added to the Production Database](configuring-a-website-that-uses-application-services-cs/_static/image11.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image10.jpg)</span></span>

<span data-ttu-id="abb2d-211">**Şekil 4**: veritabanı nesnelerinin üretim veritabanına eklendiğini onaylayın ([tam boyutlu görüntüyü görüntülemek için tıklayın](configuring-a-website-that-uses-application-services-cs/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="abb2d-211">**Figure 4**: Confirm That the Database Objects Were Added to the Production Database ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image12.jpg))</span></span>

<span data-ttu-id="abb2d-212">Yalnızca, uygulama hizmetlerini kullanmaya başladıktan sonra Web uygulamanızı ilk kez veya ilk kez dağıttığınızda `aspnet_regsql.exe` aracını kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-212">You will only need to use the `aspnet_regsql.exe` tool when deploying your web application for the first time or for the first time after you have started using the application services.</span></span> <span data-ttu-id="abb2d-213">Bu veritabanı nesneleri üretim veritabanından olduktan sonra, yeniden eklenmesi veya değiştirilmesi gerekmez.</span><span class="sxs-lookup"><span data-stu-id="abb2d-213">Once these database objects are on the production database they won't need to be re-added or modified.</span></span>

### <a name="copying-user-accounts-from-development-to-production"></a><span data-ttu-id="abb2d-214">Kullanıcı hesaplarını geliştirmeden üretime kopyalama</span><span class="sxs-lookup"><span data-stu-id="abb2d-214">Copying User Accounts from Development to Production</span></span>

<span data-ttu-id="abb2d-215">Uygulama hizmetleri bilgilerini bir SQL Server veritabanına depolamak için `SqlMembershipProvider` ve `SqlRoleProvider` sağlayıcı sınıflarını kullanırken, Kullanıcı hesabı ve rol bilgileri, `aspnet_Users`, `aspnet_Membership`, `aspnet_Roles`ve `aspnet_UsersInRoles`dahil olmak üzere çeşitli veritabanı tablolarında depolanır (diğerleri arasında).</span><span class="sxs-lookup"><span data-stu-id="abb2d-215">When using the `SqlMembershipProvider` and `SqlRoleProvider` provider classes to store the application services information in a SQL Server database, the user account and role information is stored in a variety of database tables, including `aspnet_Users`, `aspnet_Membership`, `aspnet_Roles`, and `aspnet_UsersInRoles`, among others.</span></span> <span data-ttu-id="abb2d-216">Geliştirme sırasında geliştirme ortamında Kullanıcı hesapları oluşturursanız, ilgili kayıtları geçerli veritabanı tablolarından kopyalayarak, bu kullanıcı hesaplarını üretimde çoğaltabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="abb2d-216">If during development you create user accounts in the development environment you can replicate those user accounts in production by copying the corresponding records from the applicable database tables.</span></span> <span data-ttu-id="abb2d-217">Uygulama Hizmetleri veritabanı nesnelerini dağıtmak için veritabanı Yayımlama Sihirbazı 'Nı kullandıysanız kayıtları kopyalamak için de seçmiş olabilirsiniz; Bu, geliştirmede oluşturulan kullanıcı hesaplarının de üretimde olması ile sonuçlanacaktır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-217">If you used the Database Publishing Wizard to deploy the application services database objects you may have also elected to copy the records, which would result in the user accounts created in development to also be on production.</span></span> <span data-ttu-id="abb2d-218">Ancak, yapılandırma ayarlarınıza bağlı olarak, hesaplarını geliştirmede oluşturulan ve üretime kopyalanan kullanıcıların üretim Web sitesinden oturum açmadığını fark edebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="abb2d-218">But, depending on your configuration settings, you may find that those users whose accounts were created in development and copied to production are unable to login from the production website.</span></span> <span data-ttu-id="abb2d-219">Ne sağlar?</span><span class="sxs-lookup"><span data-stu-id="abb2d-219">What gives?</span></span>

<span data-ttu-id="abb2d-220">`SqlMembershipProvider` ve `SqlRoleProvider` sağlayıcı sınıfları, tek bir veritabanının birden çok uygulama için kullanıcı deposu olarak kullanılabileceği şekilde tasarlanmıştı. bu şekilde, her uygulamanın teorik olarak, kullanıcıların aynı ada sahip olan ve çakışan Kullanıcı adları ve rolleri vardır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-220">The `SqlMembershipProvider` and `SqlRoleProvider` provider classes were designed such that a single database could serve as a user store for multiple applications, where each application could, in theory, have users with overlapping usernames and roles with the same name.</span></span> <span data-ttu-id="abb2d-221">Bu esnekliğe izin vermek için, veritabanı `aspnet_Applications` tablosundaki uygulamaların bir listesini tutar ve her Kullanıcı bu uygulamalardan biriyle ilişkilendirilir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-221">To allow for this flexibility, the database maintains a list of applications in the `aspnet_Applications` table, and each user is associated with one of these applications.</span></span> <span data-ttu-id="abb2d-222">Özellikle `aspnet_Users` tablo, her kullanıcıyı `aspnet_Applications` tablosundaki bir kayda bağlayan bir `ApplicationId` sütununa sahiptir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-222">Specifically, the `aspnet_Users` table has an `ApplicationId` column that ties each user to a record in the `aspnet_Applications` table.</span></span>

<span data-ttu-id="abb2d-223">`ApplicationId` sütununa ek olarak, `aspnet_Applications` tablo, uygulama için daha fazla insan dostu bir ad sağlayan bir `ApplicationName` sütunu da içerir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-223">In addition to the `ApplicationId` column, the `aspnet_Applications` table also includes an `ApplicationName` column, which provides a more human-friendly name for the application.</span></span> <span data-ttu-id="abb2d-224">Bir Web sitesi, oturum açma sayfasından bir kullanıcı kimlik bilgilerini doğrulama gibi bir kullanıcı hesabıyla çalışmayı denediğinde `SqlMembershipProvider` sınıfa hangi uygulamanın birlikte çalıştığını söylemelidir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-224">When a website attempts to work with a user account, such as validating a user s credentials from the login page, it must tell the `SqlMembershipProvider` class what application to work with.</span></span> <span data-ttu-id="abb2d-225">Genellikle bunu uygulama adı sağlayarak yapar ve bu değer, `Web.config`-özel olarak `applicationName` özniteliği aracılığıyla sağlayıcının s yapılandırmasından gelir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-225">It usually does this by supplying the application name, and the this value comes from the provider s configuration in `Web.config` - specifically via the `applicationName` attribute.</span></span>

<span data-ttu-id="abb2d-226">Ancak `applicationName` özniteliği `Web.config`belirtilmemişse ne olur?</span><span class="sxs-lookup"><span data-stu-id="abb2d-226">But what happens if the `applicationName` attribute is not specified in `Web.config`?</span></span> <span data-ttu-id="abb2d-227">Böyle bir durumda, üyelik sistemi `applicationName` değer olarak uygulama kök yolunu kullanır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-227">In such a case the Membership system uses the application root path as the `applicationName` value.</span></span> <span data-ttu-id="abb2d-228">`applicationName` özniteliği `Web.config`açıkça ayarlanmamışsa, geliştirme ortamının ve üretim ortamının farklı bir uygulama kökü kullanmasına ve bu nedenle uygulama hizmetlerindeki farklı uygulama adlarıyla ilişkilendirilecektir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-228">If the `applicationName` attribute is not explicitly set in `Web.config`, then, there is the possibility that the development environment and production environment use a different application root and therefore will be associated with different application names in the application services.</span></span> <span data-ttu-id="abb2d-229">Bu tür bir uyuşmazlık oluşursa, geliştirme ortamında oluşturulan kullanıcıların, üretim ortamı için `ApplicationId` değeriyle eşleşmeyen bir `ApplicationId` değeri olacaktır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-229">If such a mismatch occurs then those users created in the development environment will have an `ApplicationId` value that does not match with the `ApplicationId` value for the production environment.</span></span> <span data-ttu-id="abb2d-230">Net sonuç, bu kullanıcıların oturum açabilmeyeceği bir sonuçlardır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-230">The net result is that those users won't be able to login.</span></span>

> [!NOTE]
> <span data-ttu-id="abb2d-231">Bu durumda kendinizi bulursanız, Kullanıcı hesapları, eşleşmeyen bir `ApplicationId` değeri ile üretime kopyalanmışsa, bu hatalı `ApplicationId` değerlerini üretimde kullanılan `ApplicationId` için güncelleştirmek üzere bir sorgu yazabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="abb2d-231">If you find yourself in this situation - with user accounts copied to production with a mismatched `ApplicationId` value - you could write a query to update these incorrect `ApplicationId` values to the `ApplicationId` used on production.</span></span> <span data-ttu-id="abb2d-232">Güncelleştirildikten sonra, hesapları geliştirme ortamında oluşturulan kullanıcılar artık üretimde Web uygulamasında oturum açabiliyor.</span><span class="sxs-lookup"><span data-stu-id="abb2d-232">Once updated, the users whose accounts were created on the development environment would now be able to sign into the web application on production.</span></span>

<span data-ttu-id="abb2d-233">İyi haberler, iki ortamın aynı `ApplicationId` kullandığından emin olmak için uygulayabileceğiniz basit bir adımdır. tüm uygulama hizmetleri sağlayıcılarınız için `Web.config` `applicationName` özniteliğini açıkça ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="abb2d-233">The good news is that there is a simple step you can take to ensure that the two environments use the same `ApplicationId` - explicitly set the `applicationName` attribute in `Web.config` for all of your application services providers.</span></span> <span data-ttu-id="abb2d-234">`applicationName` özniteliğini, `<membership>` ve `<roleManager>` öğelerinde "Bookincelemeleri" olarak, `Web.config` tarafından gösterilen kod parçacığı olarak ayarlar.</span><span class="sxs-lookup"><span data-stu-id="abb2d-234">I explicitly set the `applicationName` attribute to "BookReviews" in the `<membership>` and `<roleManager>` elements as this snippet from `Web.config` shows.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample4.xml)]

<span data-ttu-id="abb2d-235">`applicationName` özniteliğini ve bunun arkasındaki ktionale ayarlama hakkında daha fazla bilgi için [*Scott Guthrie*](https://weblogs.asp.net/scottgu/) s blog gönderisine bakın, [*ASP.NET üyeliğini ve diğer sağlayıcıları yapılandırırken her zaman ApplicationName özelliğini ayarlayın*](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="abb2d-235">For more discussion on setting the `applicationName` attribute and the rationale behind it, refer to [*Scott Guthrie*](https://weblogs.asp.net/scottgu/) s blog post, [*Always set the applicationName property when configuring ASP.NET Membership and other Providers*](https://weblogs.asp.net/scottgu/443634).</span></span>

### <a name="managing-user-accounts-in-the-production-environment"></a><span data-ttu-id="abb2d-236">Üretim ortamında kullanıcı hesaplarını yönetme</span><span class="sxs-lookup"><span data-stu-id="abb2d-236">Managing User Accounts in the Production Environment</span></span>

<span data-ttu-id="abb2d-237">ASP.NET Web sitesi yönetim aracı (WSAT) Kullanıcı hesapları oluşturmayı ve yönetmeyi, rolleri tanımlamanızı ve uygulamayı ve Kullanıcı ve rol tabanlı yetkilendirme kurallarını yazımı kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-237">The ASP.NET Web Site Administration Tool (WSAT) makes it easy to create and manage user accounts, define and apply roles, and spell out user- and role-based authorization rules.</span></span> <span data-ttu-id="abb2d-238">Çözüm Gezgini gidip ASP.NET yapılandırma simgesine tıklayarak veya Web sitesine veya proje menülerine gidip ASP.NET yapılandırma menü öğesini seçerek, Visual Studio 'dan WSAT 'ı başlatabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="abb2d-238">You can launch the WSAT from Visual Studio by going to the Solution Explorer and clicking the ASP.NET Configuration icon or by going to the Website or Project menus and selecting the ASP.NET Configuration menu item.</span></span> <span data-ttu-id="abb2d-239">Ne yazık ki, WSAT yalnızca yerel Web siteleriyle çalışabilir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-239">Unfortunately, the WSAT can only work with local websites.</span></span> <span data-ttu-id="abb2d-240">Bu nedenle, üretim ortamındaki Web sitesini yönetmek için iş istasyonunuzdan WSAT 'ı kullanamazsınız.</span><span class="sxs-lookup"><span data-stu-id="abb2d-240">Therefore, you cannot use the WSAT from your workstation to manage the website in the production environment.</span></span>

<span data-ttu-id="abb2d-241">İyi haberler, WSAT tarafından sağlanan tüm işlevlerin üyelik ve roller API 'Leri aracılığıyla programlı bir şekilde kullanılabilmesini sağlamadır; Ayrıca, WSAT ekranlarından birçoğu standart ASP.NET login ile ilgili denetimleri kullanır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-241">The good news is that all of the functionality exposed provided by the WSAT is available programmatically through the Membership and Roles APIs; furthermore, many of the WSAT screens use the standard ASP.NET Login-related controls.</span></span> <span data-ttu-id="abb2d-242">Kısaca, Web sitenize gerekli yönetim özelliklerini sunan ASP.NET sayfaları ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="abb2d-242">In short, you can add ASP.NET pages to your website that offer the necessary management capabilities.</span></span>

<span data-ttu-id="abb2d-243">Daha önceki bir öğreticinin, kitap Incelemeleri Web uygulamasını bir `~/Admin` klasörü içerecek şekilde güncelleştirdiklerini ve bu klasörün yalnızca yönetici rolündeki kullanıcılara izin verecek şekilde yapılandırıldığını unutmayın.</span><span class="sxs-lookup"><span data-stu-id="abb2d-243">Recall that an earlier tutorial updated the Book Reviews web application to include an `~/Admin` folder, and this folder has been configured to only allow users in the Admin role.</span></span> <span data-ttu-id="abb2d-244">`CreateAccount.aspx` adlı klasöre, yöneticinin yeni bir kullanıcı hesabı oluşturanan bir sayfa ekledim.</span><span class="sxs-lookup"><span data-stu-id="abb2d-244">I added a page to that folder named `CreateAccount.aspx` from which an administrator can create a new user account.</span></span> <span data-ttu-id="abb2d-245">Bu sayfa, yeni bir kullanıcı hesabı oluşturmak için Kullanıcı arabirimi ve arka uç mantığını göstermek üzere CreateUserWizard denetimini kullanır.</span><span class="sxs-lookup"><span data-stu-id="abb2d-245">This page uses the CreateUserWizard control to display the user interface and backend logic for creating a new user account.</span></span> <span data-ttu-id="abb2d-246">Ne kadar çok, denetimi yeni kullanıcının da yönetici rolüne eklenip eklenmeyeceğini belirten bir onay kutusu içerecek şekilde özelleştirdim (bkz. Şekil 5).</span><span class="sxs-lookup"><span data-stu-id="abb2d-246">What s more, I customized the control to include a CheckBox that prompts whether the new user should also be added to the Admin role (see Figure 5).</span></span> <span data-ttu-id="abb2d-247">Biraz iş sayesinde, başka bir şekilde WSAT tarafından sağlanabilecek Kullanıcı ve rol yönetimiyle ilgili görevleri uygulayan özel bir sayfa kümesi oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="abb2d-247">With a little bit of work you can build a custom set of pages that implements the user and role management-related tasks that would otherwise be provided by the WSAT.</span></span>

> [!NOTE]
> <span data-ttu-id="abb2d-248">Üyelik ve rol API 'Lerini kullanma hakkında daha fazla bilgi için, oturum açma ile ilgili ASP.NET Web denetimleriyle birlikte, [*Web sitesi güvenlik öğreticilerimi*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md)okuduğunuzdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="abb2d-248">For more information on using the Membership and Roles APIs along with the Login-related ASP.NET Web controls, be sure to read my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span> <span data-ttu-id="abb2d-249">CreateUserWizard denetimini özelleştirme hakkında daha fazla bilgi için [*Kullanıcı hesapları oluşturma*](../../older-versions-security/membership/creating-user-accounts-cs.md) ve [*ek kullanıcı bilgileri*](../../older-versions-security/membership/storing-additional-user-information-cs.md) öğreticilerini depolama ya da [*CreateUserWizard denetimini özelleştiren*](http://aspnet.4guysfromrolla.com/articles/070506-1.aspx) [*Erich Peterson*](http://www.erichpeterson.com/) s makalesini inceleyin.</span><span class="sxs-lookup"><span data-stu-id="abb2d-249">For more on customizing the CreateUserWizard control refer to the [*Creating User Accounts*](../../older-versions-security/membership/creating-user-accounts-cs.md) and [*Storing Additional User Information*](../../older-versions-security/membership/storing-additional-user-information-cs.md) tutorials, or check out [*Erich Peterson*](http://www.erichpeterson.com/) s article, [*Customizing the CreateUserWizard Control*](http://aspnet.4guysfromrolla.com/articles/070506-1.aspx).</span></span>

<span data-ttu-id="abb2d-250">[![yöneticileri yeni kullanıcı hesapları oluşturabilir](configuring-a-website-that-uses-application-services-cs/_static/image14.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image13.jpg)</span><span class="sxs-lookup"><span data-stu-id="abb2d-250">[![Administrators Can Create New User Accounts](configuring-a-website-that-uses-application-services-cs/_static/image14.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image13.jpg)</span></span>

<span data-ttu-id="abb2d-251">**Şekil 5**: Yöneticiler yeni kullanıcı hesapları oluşturabilir ([tam boyutlu görüntüyü görüntülemek için tıklatın](configuring-a-website-that-uses-application-services-cs/_static/image15.jpg))</span><span class="sxs-lookup"><span data-stu-id="abb2d-251">**Figure 5**: Administrators Can Create New User Accounts ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image15.jpg))</span></span>

<span data-ttu-id="abb2d-252">WSAT 'ın tüm işlevlerine ihtiyacınız varsa, [*kendi web sitesi yönetim aracınızı*](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)(yazarın can) özel bır WSAT benzeri araç oluşturma sürecinde izlenecek bir şekilde gözden geçirin.</span><span class="sxs-lookup"><span data-stu-id="abb2d-252">If you need the full functionality of the WSAT check out [*Rolling Your Own Web Site Administration Tool*](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx), in which author Dan Clem walks through the process of building a custom WSAT-like tool.</span></span> <span data-ttu-id="abb2d-253">Dan uygulama kaynak kodunu paylaşır (içinde C#) ve barındırılan Web sitenize eklemek için adım adım yönergeler sağlar.</span><span class="sxs-lookup"><span data-stu-id="abb2d-253">Dan shares his application s source code (in C#) and provides step-by-step instructions for adding it to your hosted website.</span></span>

## <a name="summary"></a><span data-ttu-id="abb2d-254">Özet</span><span class="sxs-lookup"><span data-stu-id="abb2d-254">Summary</span></span>

<span data-ttu-id="abb2d-255">Uygulama Hizmetleri veritabanı uygulamasını kullanan bir Web uygulaması dağıtıldığında, önce üretim veritabanının gerekli veritabanı nesnelerine sahip olduğundan emin olmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="abb2d-255">When deploying a web application that uses the application services database implementation you must first ensure that the production database has the requisite database objects.</span></span> <span data-ttu-id="abb2d-256">Bu nesneler, *veritabanı dağıtma* öğreticisinde açıklanan teknikler kullanılarak eklenebilir. Alternatif olarak, bu öğreticide gördüğünüz gibi `aspnet_regsql.exe` aracını kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="abb2d-256">These objects can be added using the techniques discussed in the *Deploying a Database* tutorial; alternatively, you can use the `aspnet_regsql.exe` tool, as we saw in this tutorial.</span></span> <span data-ttu-id="abb2d-257">Geliştirme ve üretim ortamlarında kullanılan uygulama adının (geliştirme ortamında oluşturulan kullanıcı ve rollerin üretimde geçerli olmasını istiyorsanız önemli olan) ve teknikleri ile ilgili diğer sorunlar üretim ortamındaki kullanıcıları ve rolleri yönetme.</span><span class="sxs-lookup"><span data-stu-id="abb2d-257">Other challenges we touched on center around synchronizing the application name used in the development and production environments (which is important if you want users and roles created in the development environment to be valid on production) and techniques for managing the users and roles in the production environment.</span></span>

<span data-ttu-id="abb2d-258">Programlamanın kutlu olsun!</span><span class="sxs-lookup"><span data-stu-id="abb2d-258">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="abb2d-259">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="abb2d-259">Further Reading</span></span>

<span data-ttu-id="abb2d-260">Bu öğreticide ele alınan konular hakkında daha fazla bilgi için aşağıdaki kaynaklara bakın:</span><span class="sxs-lookup"><span data-stu-id="abb2d-260">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="abb2d-261">*ASP.NET SQL Server kayıt aracı (aspnet_regsql. exe)* </span><span class="sxs-lookup"><span data-stu-id="abb2d-261">*ASP.NET SQL Server Registration Tool (aspnet_regsql.exe)*</span></span>](https://msdn.microsoft.com/library/ms229862.aspx)
- [<span data-ttu-id="abb2d-262">*SQL Server için Uygulama Hizmetleri veritabanı oluşturuluyor*</span><span class="sxs-lookup"><span data-stu-id="abb2d-262">*Creating the Application Services Database for SQL Server*</span></span>](https://msdn.microsoft.com/library/x28wfk74.aspx)
- [<span data-ttu-id="abb2d-263">*SQL Server üyelik şeması oluşturma*</span><span class="sxs-lookup"><span data-stu-id="abb2d-263">*Creating the Membership Schema in SQL Server*</span></span>](../../older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs.md)
- [<span data-ttu-id="abb2d-264">*ASP.NET s üyeliğini, rolleri ve profilini İnceleme*</span><span class="sxs-lookup"><span data-stu-id="abb2d-264">*Examining ASP.NET s Membership, Roles, and Profile*</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="abb2d-265">*Kendi web sitesi yönetim aracınızı toplama*</span><span class="sxs-lookup"><span data-stu-id="abb2d-265">*Rolling Your Own Web Site Administration Tool*</span></span>](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)
- [<span data-ttu-id="abb2d-266">*Web sitesi güvenlik öğreticileri*</span><span class="sxs-lookup"><span data-stu-id="abb2d-266">*Website Security Tutorials*</span></span>](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md)
- [<span data-ttu-id="abb2d-267">*Web sitesi yönetim aracına genel bakış*</span><span class="sxs-lookup"><span data-stu-id="abb2d-267">*Web Site Administration Tool Overview*</span></span>](https://msdn.microsoft.com/library/yy40ytx0.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="abb2d-268">[Önceki](configuring-the-production-web-application-to-use-the-production-database-cs.md)
> [İleri](strategies-for-database-development-and-deployment-cs.md)</span><span class="sxs-lookup"><span data-stu-id="abb2d-268">[Previous](configuring-the-production-web-application-to-use-the-production-database-cs.md)
[Next](strategies-for-database-development-and-deployment-cs.md)</span></span>
