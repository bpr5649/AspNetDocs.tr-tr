---
uid: web-forms/overview/performance-and-caching/using-asynchronous-methods-in-aspnet-45
title: ASP.NET 4,5 'de zaman uyumsuz yöntemler kullanma | Microsoft Docs
author: Rick-Anderson
description: Bu öğreticide, ücretsiz olarak bulunan Web için Visual Studio Express 2012 kullanarak zaman uyumsuz bir ASP.NET Web Forms uygulaması oluşturma hakkında temel bilgiler verilir...
ms.author: riande
ms.date: 01/02/2019
ms.assetid: a585c9a2-7c8e-478b-9706-90f3739c50d1
msc.legacyurl: /web-forms/overview/performance-and-caching/using-asynchronous-methods-in-aspnet-45
msc.type: authoredcontent
ms.openlocfilehash: 7abc3d7acc60d7d868958f2a313bc408f96c95a4
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78625197"
---
# <a name="using-asynchronous-methods-in-aspnet-45"></a><span data-ttu-id="f7d20-103">ASP.NET 4.5 Sürümünde Zaman Uyumsuz Metotlar Kullanma</span><span class="sxs-lookup"><span data-stu-id="f7d20-103">Using Asynchronous Methods in ASP.NET 4.5</span></span>

<span data-ttu-id="f7d20-104">[Rick Anderson](https://twitter.com/RickAndMSFT) tarafından</span><span class="sxs-lookup"><span data-stu-id="f7d20-104">by [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

> <span data-ttu-id="f7d20-105">Bu öğreticide, ücretsiz bir Microsoft Visual Studio sürümü olan [Web için Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11)' i kullanarak zaman uyumsuz bir ASP.NET Web Forms uygulaması oluşturma hakkında temel bilgiler verilir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-105">This tutorial will teach you the basics of building an asynchronous ASP.NET Web Forms application using [Visual Studio Express 2012 for Web](https://www.microsoft.com/visualstudio/11), which is a free version of Microsoft Visual Studio.</span></span> <span data-ttu-id="f7d20-106">[Visual Studio 2012](https://www.microsoft.com/visualstudio/11)' i de kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f7d20-106">You can also use [Visual Studio 2012](https://www.microsoft.com/visualstudio/11).</span></span> <span data-ttu-id="f7d20-107">Aşağıdaki bölümler Bu öğreticiye dahil edilmiştir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-107">The following sections are included in this tutorial.</span></span>
> 
> - [<span data-ttu-id="f7d20-108">Isteklerin Iş parçacığı havuzu tarafından nasıl Işlendiği</span><span class="sxs-lookup"><span data-stu-id="f7d20-108">How Requests Are Processed by the Thread Pool</span></span>](#HowRequestsProcessedByTP)
> - [<span data-ttu-id="f7d20-109">Zaman uyumlu veya zaman uyumsuz yöntemler seçme</span><span class="sxs-lookup"><span data-stu-id="f7d20-109">Choosing Synchronous or Asynchronous Methods</span></span>](#ChoosingSyncVasync)
> - [<span data-ttu-id="f7d20-110">Örnek uygulama</span><span class="sxs-lookup"><span data-stu-id="f7d20-110">The Sample Application</span></span>](#SampleApp)
> - [<span data-ttu-id="f7d20-111">Şeyler zaman uyumlu sayfası</span><span class="sxs-lookup"><span data-stu-id="f7d20-111">The Gizmos Synchronous Page</span></span>](#GizmosSynch)
> - [<span data-ttu-id="f7d20-112">Zaman uyumsuz şeyler sayfası oluşturma</span><span class="sxs-lookup"><span data-stu-id="f7d20-112">Creating an Asynchronous Gizmos Page</span></span>](#CreatingAsynchGizmos)
> - [<span data-ttu-id="f7d20-113">Paralel olarak birden çok Işlem gerçekleştirme</span><span class="sxs-lookup"><span data-stu-id="f7d20-113">Performing Multiple Operations in Parallel</span></span>](#Parallel)
> - [<span data-ttu-id="f7d20-114">Iptal belirteci kullanma</span><span class="sxs-lookup"><span data-stu-id="f7d20-114">Using a Cancellation Token</span></span>](#CancelToken)
> - [<span data-ttu-id="f7d20-115">Yüksek eşzamanlılık/yüksek gecikmeli Web hizmeti çağrıları için sunucu yapılandırması</span><span class="sxs-lookup"><span data-stu-id="f7d20-115">Server Configuration for High Concurrency/High Latency Web Service Calls</span></span>](#ServerConfig)
> 
> <span data-ttu-id="f7d20-116">Bu öğretici için bir örnek aşağıda verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="f7d20-116">A complete sample is provided for this tutorial at</span></span>  
> <span data-ttu-id="f7d20-117">[GitHub](https://github.com/) sitesinde [https://github.com/RickAndMSFT/Async-ASP.NET/](https://github.com/RickAndMSFT/Async-ASP.NET/) .</span><span class="sxs-lookup"><span data-stu-id="f7d20-117">[https://github.com/RickAndMSFT/Async-ASP.NET/](https://github.com/RickAndMSFT/Async-ASP.NET/) on the [GitHub](https://github.com/) site.</span></span>

<span data-ttu-id="f7d20-118">ASP.NET 4,5 Web sayfaları, [.net 4,5](https://msdn.microsoft.com/library/w0x726c2(VS.110).aspx) ' de, [görev](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx)türünde bir nesne döndüren zaman uyumsuz yöntemleri kaydetmenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="f7d20-118">ASP.NET 4.5 Web Pages in combination [.NET 4.5](https://msdn.microsoft.com/library/w0x726c2(VS.110).aspx) enables you to register asynchronous methods that return an object of type [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx).</span></span> <span data-ttu-id="f7d20-119">.NET Framework 4, [görev](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) olarak adlandırılan bir zaman uyumsuz programlama kavramı sunmuştur ve ASP.NET 4,5 [görevi](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx)destekler.</span><span class="sxs-lookup"><span data-stu-id="f7d20-119">The .NET Framework 4 introduced an asynchronous programming concept referred to as a [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) and ASP.NET 4.5 supports [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx).</span></span> <span data-ttu-id="f7d20-120">Görevler, **görev** türü ve [System. Threading. Tasks](https://msdn.microsoft.com/library/system.threading.tasks.aspx) ad alanındaki ilgili türler tarafından temsil edilir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-120">Tasks are represented by the **Task** type and related types in the [System.Threading.Tasks](https://msdn.microsoft.com/library/system.threading.tasks.aspx) namespace.</span></span> <span data-ttu-id="f7d20-121">.NET Framework 4,5, [görev](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) nesneleriyle çalışmayı önceki zaman uyumsuz yaklaşımlardan çok daha az karmaşık olan [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) ve [Async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) anahtar sözcükleriyle bu zaman uyumsuz destek üzerinde oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="f7d20-121">The .NET Framework 4.5 builds on this asynchronous support with the [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) and [async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) keywords that make working with [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) objects much less complex than previous asynchronous approaches.</span></span> <span data-ttu-id="f7d20-122">[Await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) anahtar sözcüğü, kod parçasının zaman uyumsuz olarak başka bir kod parçasına beklemesi gerektiğini belirten sözdizimsel bir toplu özelliktir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-122">The [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) keyword is syntactical shorthand for indicating that a piece of code should asynchronously wait on some other piece of code.</span></span> <span data-ttu-id="f7d20-123">[Async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) anahtar sözcüğü, yöntemleri görev tabanlı zaman uyumsuz yöntemler olarak işaretlemek için kullanabileceğiniz bir ipucunu temsil eder.</span><span class="sxs-lookup"><span data-stu-id="f7d20-123">The [async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) keyword represents a hint that you can use to mark methods as task-based asynchronous methods.</span></span> <span data-ttu-id="f7d20-124">**Await**, **Async**ve **Task** nesnesinin birleşimi, .NET 4,5 'e zaman uyumsuz kod yazmanızı çok daha kolay hale getirir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-124">The combination of **await**, **async**, and the **Task** object makes it much easier for you to write asynchronous code in .NET 4.5.</span></span> <span data-ttu-id="f7d20-125">Zaman uyumsuz yöntemlere yönelik yeni model *görev tabanlı zaman uyumsuz* model (**tap**) olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-125">The new model for asynchronous methods is called the *Task-based Asynchronous Pattern* (**TAP**).</span></span> <span data-ttu-id="f7d20-126">Bu öğreticide, [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) ve [Async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) anahtar sözcüklerini ve [görev](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) ad alanını kullanarak zaman uyumsuz programlama hakkında bazı benzerlik olduğunu varsaymaktadır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-126">This tutorial assumes you have some familiarity with asynchronous programing using [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) and [async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) keywords and the [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) namespace.</span></span>

<span data-ttu-id="f7d20-127">[Await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) ve [Async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) anahtar sözcüklerini ve [görev](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) ad alanını kullanma hakkında daha fazla bilgi için aşağıdaki başvurulara bakın.</span><span class="sxs-lookup"><span data-stu-id="f7d20-127">For more information on the using [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) and [async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) keywords and the [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) namespace, see the following references.</span></span>

- [<span data-ttu-id="f7d20-128">Teknik İnceleme: .NET 'te asynchrony</span><span class="sxs-lookup"><span data-stu-id="f7d20-128">Whitepaper: Asynchrony in .NET</span></span>](https://go.microsoft.com/fwlink/?LinkId=204844)
- [<span data-ttu-id="f7d20-129">Zaman uyumsuz/await SSS</span><span class="sxs-lookup"><span data-stu-id="f7d20-129">Async/Await FAQ</span></span>](https://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)
- [<span data-ttu-id="f7d20-130">Visual Studio zaman uyumsuz programlama</span><span class="sxs-lookup"><span data-stu-id="f7d20-130">Visual Studio Asynchronous Programming</span></span>](https://msdn.microsoft.com/vstudio/gg316360)

## <a id="HowRequestsProcessedByTP"></a><span data-ttu-id="f7d20-131">Isteklerin Iş parçacığı havuzu tarafından nasıl Işlendiği</span><span class="sxs-lookup"><span data-stu-id="f7d20-131">How Requests Are Processed by the Thread Pool</span></span>

<span data-ttu-id="f7d20-132">Web sunucusunda .NET Framework, ASP.NET isteklerine hizmet vermek için kullanılan iş parçacıklarının havuzunu tutar.</span><span class="sxs-lookup"><span data-stu-id="f7d20-132">On the web server, the .NET Framework maintains a pool of threads that are used to service ASP.NET requests.</span></span> <span data-ttu-id="f7d20-133">Bir istek geldiğinde, bu isteği işlemek için havuzdan bir iş parçacığı gönderilir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-133">When a request arrives, a thread from the pool is dispatched to process that request.</span></span> <span data-ttu-id="f7d20-134">İstek zaman uyumlu olarak işleniyorsa, istek işlenirken isteği işleyen iş parçacığı meşgul olur ve bu iş parçacığı başka bir isteğe hizmet edemez.</span><span class="sxs-lookup"><span data-stu-id="f7d20-134">If the request is processed synchronously, the thread that processes the request is busy while the request is being processed, and that thread cannot service another request.</span></span>   
  
<span data-ttu-id="f7d20-135">İş parçacığı havuzu çok sayıda meşgul iş parçacığına uyum sağlayacak kadar büyük hale getirilbildiğinden bu bir sorun olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-135">This might not be a problem, because the thread pool can be made large enough to accommodate many busy threads.</span></span> <span data-ttu-id="f7d20-136">Ancak, iş parçacığı havuzundaki iş parçacıklarının sayısı sınırlıdır (.NET 4,5 için varsayılan en yüksek 5.000 ' dir).</span><span class="sxs-lookup"><span data-stu-id="f7d20-136">However, the number of threads in the thread pool is limited (the default maximum for .NET 4.5 is 5,000).</span></span> <span data-ttu-id="f7d20-137">Uzun süreli çok sayıda istek olan büyük uygulamalarda, kullanılabilir tüm iş parçacıkları meşgul olabilir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-137">In large applications with high concurrency of long-running requests, all available threads might be busy.</span></span> <span data-ttu-id="f7d20-138">Bu koşul, iş parçacığı başlangıçadı olarak bilinir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-138">This condition is known as thread starvation.</span></span> <span data-ttu-id="f7d20-139">Bu koşula ulaşıldığında, Web sunucusu istekleri sıralar.</span><span class="sxs-lookup"><span data-stu-id="f7d20-139">When this condition is reached, the web server queues requests.</span></span> <span data-ttu-id="f7d20-140">İstek sırası dolarsa, Web sunucusu istekleri HTTP 503 durumu (sunucu çok meşgul) ile reddeder.</span><span class="sxs-lookup"><span data-stu-id="f7d20-140">If the request queue becomes full, the web server rejects requests with an HTTP 503 status (Server Too Busy).</span></span> <span data-ttu-id="f7d20-141">CLR iş parçacığı havuzunda yeni iş parçacığı kısıtlamalarıyla ilgili sınırlamalar vardır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-141">The CLR thread pool has limitations on new thread injections.</span></span> <span data-ttu-id="f7d20-142">Eşzamanlılık burstise (yani, Web siteniz çok fazla sayıda istek alabilir) ve yüksek gecikme süresine sahip arka uç çağrıları nedeniyle tüm kullanılabilir istek iş parçacıkları meşgul olur, sınırlı iş parçacığı ekleme oranı uygulamanızın yanıt vermesini çok kötü hale getirir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-142">If concurrency is bursty (that is, your web site can suddenly get a large number of requests) and all available request threads are busy because of backend calls with high latency, the limited thread injection rate can make your application respond very poorly.</span></span> <span data-ttu-id="f7d20-143">Ayrıca, iş parçacığı havuzuna eklenen her yeni iş parçacığının ek yükü vardır (1 MB yığın bellek gibi).</span><span class="sxs-lookup"><span data-stu-id="f7d20-143">Additionally, each new thread added to the thread pool has overhead (such as 1 MB of stack memory).</span></span> <span data-ttu-id="f7d20-144">Zaman uyumlu yöntemler kullanan bir Web uygulaması iş parçacığı havuzunun .NET 4,5 varsayılan en yüksek değeri olan 5 ' e kadar büyüdüğü yüksek gecikme süreli çağrılara hizmet verebilir zaman uyumsuz yöntemler ve yalnızca 50 iş parçacığı.</span><span class="sxs-lookup"><span data-stu-id="f7d20-144">A web application using synchronous methods to service high latency calls where the thread pool grows to the .NET 4.5 default maximum of 5, 000 threads would consume approximately 5 GB more memory than an application able the service the same requests using asynchronous methods and only 50 threads.</span></span> <span data-ttu-id="f7d20-145">Zaman uyumsuz iş yaparken her zaman bir iş parçacığı kullanmıyoruz.</span><span class="sxs-lookup"><span data-stu-id="f7d20-145">When you're doing asynchronous work, you're not always using a thread.</span></span> <span data-ttu-id="f7d20-146">Örneğin, zaman uyumsuz bir Web hizmeti isteği yaptığınızda, ASP.NET **zaman uyumsuz** Yöntem çağrısı ve **await**arasında herhangi bir iş parçacığı kullanmaz.</span><span class="sxs-lookup"><span data-stu-id="f7d20-146">For example, when you make an asynchronous web service request, ASP.NET will not be using any threads between the **async** method call and the **await**.</span></span> <span data-ttu-id="f7d20-147">İş parçacığı havuzunun yüksek gecikme süresine sahip isteklere kullanımı, büyük bir bellek parmak izine ve sunucu donanımının kötü kullanımına neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-147">Using the thread pool to service requests with high latency can lead to a large memory footprint and poor utilization of the server hardware.</span></span>

## <a name="processing-asynchronous-requests"></a><span data-ttu-id="f7d20-148">Zaman uyumsuz Istekleri işleme</span><span class="sxs-lookup"><span data-stu-id="f7d20-148">Processing Asynchronous Requests</span></span>

<span data-ttu-id="f7d20-149">Başlangıçta çok sayıda eşzamanlı istek olduğunu veya bir bursty yüküne sahip olan Web uygulamalarında (eşzamanlılık aniden ani artışlar), Web hizmeti zaman uyumsuz olarak çağrılar uygulamanızın yanıt hızını artırır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-149">In web applications that see a large number of concurrent requests at start-up or has a bursty load (where concurrency increases suddenly), making web service calls asynchronous will increase the responsiveness of your application.</span></span> <span data-ttu-id="f7d20-150">Zaman uyumsuz bir istek, zaman uyumlu bir istek olarak işlemek için aynı süreyi alır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-150">An asynchronous request takes the same amount of time to process as a synchronous request.</span></span> <span data-ttu-id="f7d20-151">Örneğin, bir istek iki saniyelik bir Web hizmeti çağrısı yapıyorsa, istek zaman uyumlu veya zaman uyumsuz olarak yapılıp yapılmadıklarında iki saniye sürer.</span><span class="sxs-lookup"><span data-stu-id="f7d20-151">For example, if a request makes a web service call that requires two seconds to complete, the request takes two seconds whether it is performed synchronously or asynchronously.</span></span> <span data-ttu-id="f7d20-152">Ancak, zaman uyumsuz bir çağrı sırasında, bir iş parçacığının, ilk isteğin tamamlanmasını beklediği sırada diğer isteklere yanıt vermemesi engellenmez.</span><span class="sxs-lookup"><span data-stu-id="f7d20-152">However, during an asynchronous call, a thread is not blocked from responding to other requests while it waits for the first request to complete.</span></span> <span data-ttu-id="f7d20-153">Bu nedenle, uzun süre çalışan işlemleri çağıran çok sayıda eşzamanlı istek olduğunda zaman uyumsuz istekler istek sıraya alma ve iş parçacığı havuzunun büyümesini önler.</span><span class="sxs-lookup"><span data-stu-id="f7d20-153">Therefore, asynchronous requests prevent request queuing and thread pool growth when there are many concurrent requests that invoke long-running operations.</span></span>

## <a id="ChoosingSyncVasync"></a><span data-ttu-id="f7d20-154">Zaman uyumlu veya zaman uyumsuz yöntemler seçme</span><span class="sxs-lookup"><span data-stu-id="f7d20-154">Choosing Synchronous or Asynchronous Methods</span></span>

<span data-ttu-id="f7d20-155">Bu bölümde, zaman uyumlu veya zaman uyumsuz yöntemlerin ne zaman kullanılacağı hakkında yönergeler listelenir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-155">This section lists guidelines for when to use synchronous or asynchronous Methods.</span></span> <span data-ttu-id="f7d20-156">Bunlar yalnızca kılavuzlardır; zaman uyumsuz yöntemlerin performansla yardım edilip edilmeyeceğini öğrenmek için her uygulamayı ayrı ayrı inceleyin.</span><span class="sxs-lookup"><span data-stu-id="f7d20-156">These are just guidelines; examine each application individually to determine whether asynchronous methods help with performance.</span></span>

<span data-ttu-id="f7d20-157">Genel olarak, aşağıdaki koşullar için zaman uyumlu yöntemleri kullanın:</span><span class="sxs-lookup"><span data-stu-id="f7d20-157">In general, use synchronous methods for the following conditions:</span></span>

- <span data-ttu-id="f7d20-158">İşlemler basit veya kısa çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="f7d20-158">The operations are simple or short-running.</span></span>
- <span data-ttu-id="f7d20-159">Basitlik, verimlilik açısından daha önemlidir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-159">Simplicity is more important than efficiency.</span></span>
- <span data-ttu-id="f7d20-160">İşlemler, yoğun disk veya ağ yükü içeren işlemler yerine öncelikle CPU operasyonlardır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-160">The operations are primarily CPU operations instead of operations that involve extensive disk or network overhead.</span></span> <span data-ttu-id="f7d20-161">CPU 'ya bağlı işlemlerde zaman uyumsuz yöntemlerin kullanılması, hiçbir avantaj sağlamaz ve daha fazla yüke neden olur.</span><span class="sxs-lookup"><span data-stu-id="f7d20-161">Using asynchronous methods on CPU-bound operations provides no benefits and results in more overhead.</span></span>

<span data-ttu-id="f7d20-162">Genel olarak, aşağıdaki koşullar için zaman uyumsuz yöntemleri kullanın:</span><span class="sxs-lookup"><span data-stu-id="f7d20-162">In general, use asynchronous methods for the following conditions:</span></span>

- <span data-ttu-id="f7d20-163">Zaman uyumsuz yöntemler aracılığıyla tüketilen hizmetleri arıyorsanız ve .NET 4,5 veya üzeri bir sürümü kullanıyorsunuz.</span><span class="sxs-lookup"><span data-stu-id="f7d20-163">You're calling services that can be consumed through asynchronous methods, and you're using .NET 4.5 or higher.</span></span>
- <span data-ttu-id="f7d20-164">İşlemler, CPU ile bağlantılı olarak ağ bağlantılı veya g/ç-bağlantılı.</span><span class="sxs-lookup"><span data-stu-id="f7d20-164">The operations are network-bound or I/O-bound instead of CPU-bound.</span></span>
- <span data-ttu-id="f7d20-165">Paralellik, kod basitliği dışında daha önemlidir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-165">Parallelism is more important than simplicity of code.</span></span>
- <span data-ttu-id="f7d20-166">Kullanıcıların uzun süre çalışan bir isteği iptal etmelerini sağlayan bir mekanizma sağlamak istiyorsunuz.</span><span class="sxs-lookup"><span data-stu-id="f7d20-166">You want to provide a mechanism that lets users cancel a long-running request.</span></span>
- <span data-ttu-id="f7d20-167">İş parçacıklarını anahtarlama avantajı, bağlam anahtarı maliyetini ortaya çıktı.</span><span class="sxs-lookup"><span data-stu-id="f7d20-167">When the benefit of switching threads outweighs the cost of the context switch.</span></span> <span data-ttu-id="f7d20-168">Genel olarak, zaman uyumlu yöntemi ASP.NET istek iş parçacığını engelliyorsa zaman uyumsuz olarak bir yöntem yapmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-168">In general, you should make a method asynchronous if the synchronous method blocks the ASP.NET request thread while doing no work.</span></span> <span data-ttu-id="f7d20-169">Çağrıyı zaman uyumsuz yaparak, ASP.NET istek iş parçacığı, Web hizmeti isteğinin tamamlanmasını beklerken hiçbir iş yapmamasını engellenmemiş.</span><span class="sxs-lookup"><span data-stu-id="f7d20-169">By making the call asynchronous, the ASP.NET request thread is not blocked doing no work while it waits for the web service request to complete.</span></span>
- <span data-ttu-id="f7d20-170">Test, engelleme işlemlerinin site performansı açısından bir performans sorunu olduğunu ve IIS 'nin bu engelleme çağrıları için zaman uyumsuz yöntemleri kullanarak daha fazla istek hizmet verebilir olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-170">Testing shows that the blocking operations are a bottleneck in site performance and that IIS can service more requests by using asynchronous methods for these blocking calls.</span></span>

  <span data-ttu-id="f7d20-171">İndirilebilir örnek, zaman uyumsuz yöntemlerin etkin bir şekilde nasıl kullanılacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-171">The downloadable sample shows how to use asynchronous methods effectively.</span></span> <span data-ttu-id="f7d20-172">Belirtilen örnek, ASP.NET 4,5 ' de zaman uyumsuz programlama için basit bir gösteri sağlamak üzere tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-172">The sample provided was designed to provide a simple demonstration of asynchronous programming in ASP.NET 4.5.</span></span> <span data-ttu-id="f7d20-173">Örnek, ASP.NET içinde zaman uyumsuz programlama için bir başvuru mimarisi olmak üzere tasarlanmamıştır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-173">The sample is not intended to be a reference architecture for asynchronous programming in ASP.NET.</span></span> <span data-ttu-id="f7d20-174">Örnek program, görevi çağıran [ASP.NET Web API](../../../web-api/index.md) yöntemlerini çağırır. uzun süre çalışan Web hizmeti çağrılarına benzetim yapmak için [gecikme](https://msdn.microsoft.com/library/hh139096(VS.110).aspx) .</span><span class="sxs-lookup"><span data-stu-id="f7d20-174">The sample program calls [ASP.NET Web API](../../../web-api/index.md) methods which in turn call [Task.Delay](https://msdn.microsoft.com/library/hh139096(VS.110).aspx) to simulate long-running web service calls.</span></span> <span data-ttu-id="f7d20-175">Çoğu üretim uygulaması, zaman uyumsuz yöntemlerin kullanımı için bu tür açık avantajları göstermez.</span><span class="sxs-lookup"><span data-stu-id="f7d20-175">Most production applications will not show such obvious benefits to using asynchronous Methods.</span></span>   
  
<span data-ttu-id="f7d20-176">Birkaç uygulama tüm yöntemlerin zaman uyumsuz olmasını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-176">Few applications require all methods to be asynchronous.</span></span> <span data-ttu-id="f7d20-177">Genellikle, birkaç zaman uyumlu yöntemi zaman uyumsuz yöntemlere dönüştürmek, gereken iş miktarı için en iyi verimlilik artışı sağlar.</span><span class="sxs-lookup"><span data-stu-id="f7d20-177">Often, converting a few synchronous methods to asynchronous methods provides the best efficiency increase for the amount of work required.</span></span>

## <a id="SampleApp"></a><span data-ttu-id="f7d20-178">Örnek uygulama</span><span class="sxs-lookup"><span data-stu-id="f7d20-178">The Sample Application</span></span>

<span data-ttu-id="f7d20-179">Örnek uygulamayı [GitHub](https://github.com/) sitesindeki [https://github.com/RickAndMSFT/Async-ASP.NET](https://github.com/RickAndMSFT/Async-ASP.NET) indirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f7d20-179">You can download the sample application from [https://github.com/RickAndMSFT/Async-ASP.NET](https://github.com/RickAndMSFT/Async-ASP.NET) on the [GitHub](https://github.com/) site.</span></span> <span data-ttu-id="f7d20-180">Depo üç projeden oluşur:</span><span class="sxs-lookup"><span data-stu-id="f7d20-180">The repository consists of three projects:</span></span>

- <span data-ttu-id="f7d20-181">*WebAppAsync*: Web API **WebAPIpwg** hizmetini tüketen ASP.NET Web Forms projesi.</span><span class="sxs-lookup"><span data-stu-id="f7d20-181">*WebAppAsync*: The ASP.NET Web Forms project that consumes the Web API **WebAPIpwg** service.</span></span> <span data-ttu-id="f7d20-182">Bu öğreticinin çoğu kodu bu projeden oluşur.</span><span class="sxs-lookup"><span data-stu-id="f7d20-182">Most of the code for this tutorial is from the this project.</span></span>
- <span data-ttu-id="f7d20-183">*WebAPIpgw*: `Products, Gizmos and Widgets` denetleyicilerini uygulayan ASP.NET MVC 4 Web API projesi.</span><span class="sxs-lookup"><span data-stu-id="f7d20-183">*WebAPIpgw*: The ASP.NET MVC 4 Web API project that implements the `Products, Gizmos and Widgets` controllers.</span></span> <span data-ttu-id="f7d20-184">*WebAppAsync* projesi ve *Mvc4Async* projesi için verileri sağlar.</span><span class="sxs-lookup"><span data-stu-id="f7d20-184">It provides the data for the *WebAppAsync* project and the *Mvc4Async* project.</span></span>
- <span data-ttu-id="f7d20-185">*Mvc4Async*: başka bir öğreticide kullanılan kodu IÇEREN ASP.NET MVC 4 projesi.</span><span class="sxs-lookup"><span data-stu-id="f7d20-185">*Mvc4Async*: The ASP.NET MVC 4 project that contains the code used in another tutorial.</span></span> <span data-ttu-id="f7d20-186">**WebAPIpwg** HIZMETINE Web API çağrıları yapar.</span><span class="sxs-lookup"><span data-stu-id="f7d20-186">It makes Web API calls to the **WebAPIpwg** service.</span></span>

## <a id="GizmosSynch"></a><span data-ttu-id="f7d20-187">Şeyler zaman uyumlu sayfası</span><span class="sxs-lookup"><span data-stu-id="f7d20-187">The Gizmos Synchronous Page</span></span>

 <span data-ttu-id="f7d20-188">Aşağıdaki kod, bir şeyler listesini göstermek için kullanılan `Page_Load` zaman uyumlu yöntemini gösterir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-188">The following code shows the `Page_Load` synchronous method that is used to display a list of gizmos.</span></span> <span data-ttu-id="f7d20-189">(Bu makale için, Gizmo kurgusal bir makine aygıtıdır.)</span><span class="sxs-lookup"><span data-stu-id="f7d20-189">(For this article, a gizmo is a fictional mechanical device.)</span></span> 

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample1.cs)]

<span data-ttu-id="f7d20-190">Aşağıdaki kod, Gizmo hizmetinin `GetGizmos` yöntemini gösterir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-190">The following code shows the `GetGizmos` method of the gizmo service.</span></span>

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample2.cs)]

<span data-ttu-id="f7d20-191">`GizmoService GetGizmos` yöntemi bir URI 'yi bir ASP.NET Web API HTTP hizmetine geçirir ve bu, şeyler verilerinin bir listesini döndürür.</span><span class="sxs-lookup"><span data-stu-id="f7d20-191">The `GizmoService GetGizmos` method passes a URI to an ASP.NET Web API HTTP service which returns a list of gizmos data.</span></span> <span data-ttu-id="f7d20-192">*WebAPIpgw* projesi, Web API `gizmos, widget` ve `product` denetleyicilerinin uygulamasını içerir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-192">The *WebAPIpgw* project contains the implementation of the Web API `gizmos, widget` and `product` controllers.</span></span>  
<span data-ttu-id="f7d20-193">Aşağıdaki görüntüde örnek projeden şeyler sayfası gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-193">The following image shows the gizmos page from the sample project.</span></span>

![Şeyler](using-asynchronous-methods-in-aspnet-45/_static/image1.png)

## <a id="CreatingAsynchGizmos"></a><span data-ttu-id="f7d20-195">Zaman uyumsuz şeyler sayfası oluşturma</span><span class="sxs-lookup"><span data-stu-id="f7d20-195">Creating an Asynchronous Gizmos Page</span></span>

<span data-ttu-id="f7d20-196">Örnek, zaman uyumsuz programlama için gereken karmaşık dönüştürmeleri sürdürmekten önce derleyicinin sorumlu olmasını sağlamak için yeni [Async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) ve [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) anahtar sözcüklerini (.NET 4,5 ve Visual Studio 2012 ' de kullanılabilir) kullanır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-196">The sample uses the new [async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) and [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) keywords (available in .NET 4.5 and Visual Studio 2012) to let the compiler be responsible for maintaining the complicated transformations necessary for asynchronous programming.</span></span> <span data-ttu-id="f7d20-197">Derleyici, zaman uyumlu denetim akış yapılarını kullanarak C#kod yazmanızı sağlar ve derleyici, iş parçacıklarını engellemeyi önlemek için geri çağırmaları kullanmak için gereken dönüştürmeleri otomatik olarak uygular.</span><span class="sxs-lookup"><span data-stu-id="f7d20-197">The compiler lets you write code using the C#'s synchronous control flow constructs and the compiler automatically applies the transformations necessary to use callbacks in order to avoid blocking threads.</span></span>

<span data-ttu-id="f7d20-198">ASP.NET zaman uyumsuz sayfaları, `Async` özniteliği "true" olarak ayarlanmış [sayfa](https://msdn.microsoft.com/library/ydy4x04a.aspx) yönergesini içermelidir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-198">ASP.NET asynchronous pages must include the [Page](https://msdn.microsoft.com/library/ydy4x04a.aspx) directive with the `Async` attribute set to "true".</span></span> <span data-ttu-id="f7d20-199">Aşağıdaki kod, *GizmosAsync. aspx* sayfası için `Async` özniteliği "true" olarak ayarlanan [Page](https://msdn.microsoft.com/library/ydy4x04a.aspx) yönergesini gösterir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-199">The following code shows the [Page](https://msdn.microsoft.com/library/ydy4x04a.aspx) directive with the `Async` attribute set to "true" for the *GizmosAsync.aspx* page.</span></span>

[!code-aspx[Main](using-asynchronous-methods-in-aspnet-45/samples/sample3.aspx?highlight=1)]

<span data-ttu-id="f7d20-200">Aşağıdaki kod `Gizmos` zaman uyumlu `Page_Load` yöntemini ve `GizmosAsync` zaman uyumsuz sayfasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-200">The following code shows the `Gizmos` synchronous `Page_Load` method and the `GizmosAsync` asynchronous page.</span></span> <span data-ttu-id="f7d20-201">Tarayıcınız [HTML 5 &lt;mark&gt; öğesini](http://www.w3.org/wiki/HTML/Elements/mark)destekliyorsa, `GizmosAsync` değişiklikleri sarı vurgulamada görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="f7d20-201">If your browser supports the [HTML 5 &lt;mark&gt; element](http://www.w3.org/wiki/HTML/Elements/mark), you'll see the changes in `GizmosAsync` in yellow highlight.</span></span>

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample4.cs)]

<span data-ttu-id="f7d20-202">Zaman uyumsuz sürüm:</span><span class="sxs-lookup"><span data-stu-id="f7d20-202">The asynchronous version:</span></span>

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample5.cs?highlight=3,6-7,9,11)]

 <span data-ttu-id="f7d20-203">`GizmosAsync` sayfanın zaman uyumsuz olmasını sağlamak için aşağıdaki değişiklikler uygulandı.</span><span class="sxs-lookup"><span data-stu-id="f7d20-203">The following changes were applied to allow the `GizmosAsync` page be asynchronous.</span></span>

- <span data-ttu-id="f7d20-204">[Page](https://msdn.microsoft.com/library/ydy4x04a.aspx) yönergesinin `Async` özniteliği "true" olarak ayarlanmış olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-204">The [Page](https://msdn.microsoft.com/library/ydy4x04a.aspx) directive must have the `Async` attribute set to "true".</span></span>
- <span data-ttu-id="f7d20-205">`RegisterAsyncTask` yöntemi, zaman uyumsuz olarak çalışan kodu içeren zaman uyumsuz bir görevi kaydetmek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-205">The `RegisterAsyncTask` method is used to register an asynchronous task containing the code which runs asynchronously.</span></span>
- <span data-ttu-id="f7d20-206">Yeni `GetGizmosSvcAsync` yöntemi [Async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) anahtar sözcüğüyle işaretlenir, bu da derleyiciye gövdenin parçaları için geri çağrılar oluşturmasını ve döndürülen bir `Task` otomatik olarak oluşturmasını söyler.</span><span class="sxs-lookup"><span data-stu-id="f7d20-206">The new `GetGizmosSvcAsync` method is marked with the [async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) keyword, which tells the compiler to generate callbacks for parts of the body and to automatically create a `Task` that is returned.</span></span>
- <span data-ttu-id="f7d20-207">&quot;zaman uyumsuz&quot; zaman uyumsuz metot adına eklendi.</span><span class="sxs-lookup"><span data-stu-id="f7d20-207">&quot;Async&quot; was appended to the asynchronous method name.</span></span> <span data-ttu-id="f7d20-208">"Async" eklenmesi gerekli değildir, ancak zaman uyumsuz yöntemler yazılırken kuralıdır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-208">Appending "Async" is not required but is the convention when writing asynchronous methods.</span></span>
- <span data-ttu-id="f7d20-209">Yeni `GetGizmosSvcAsync` yönteminin dönüş türü `Task`.</span><span class="sxs-lookup"><span data-stu-id="f7d20-209">The return type of the new `GetGizmosSvcAsync` method is `Task`.</span></span> <span data-ttu-id="f7d20-210">`Task` dönüş türü, devam eden çalışmayı temsil eder ve zaman uyumsuz işlemin tamamlanmasını beklemek için bir tanıtıcı ile metodun çağıranlarını sağlar.</span><span class="sxs-lookup"><span data-stu-id="f7d20-210">The return type of `Task` represents ongoing work and provides callers of the method with a handle through which to wait for the asynchronous operation's completion.</span></span>
- <span data-ttu-id="f7d20-211">[Await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) anahtar sözcüğü Web hizmeti çağrısına uygulandı.</span><span class="sxs-lookup"><span data-stu-id="f7d20-211">The [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) keyword was applied to the web service call.</span></span>
- <span data-ttu-id="f7d20-212">Zaman uyumsuz Web hizmeti API 'SI çağrıldı (`GetGizmosAsync`).</span><span class="sxs-lookup"><span data-stu-id="f7d20-212">The asynchronous web service API was called (`GetGizmosAsync`).</span></span>

<span data-ttu-id="f7d20-213">`GetGizmosSvcAsync` yönteminin içinde başka bir zaman uyumsuz yöntem `GetGizmosAsync` çağırılır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-213">Inside of the `GetGizmosSvcAsync` method body another asynchronous method, `GetGizmosAsync` is called.</span></span> <span data-ttu-id="f7d20-214">`GetGizmosAsync` hemen, veriler kullanılabilir olduğunda sonunda tamamlanacak bir `Task<List<Gizmo>>` döndürür.</span><span class="sxs-lookup"><span data-stu-id="f7d20-214">`GetGizmosAsync` immediately returns a `Task<List<Gizmo>>` that will eventually complete when the data is available.</span></span> <span data-ttu-id="f7d20-215">Gizmo verilerine sahip olana kadar başka bir şey yapmak istemediğiniz için, kod görevi bekler ( **await** anahtar sözcüğünü kullanarak).</span><span class="sxs-lookup"><span data-stu-id="f7d20-215">Because you don't want to do anything else until you have the gizmo data, the code awaits the task (using the **await** keyword).</span></span> <span data-ttu-id="f7d20-216">**Await** anahtar sözcüğünü yalnızca **Async** anahtar sözcüğüyle açıklama eklenen yöntemlerde kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f7d20-216">You can use the **await** keyword only in methods annotated with the **async** keyword.</span></span>

<span data-ttu-id="f7d20-217">**Await** anahtar sözcüğü, görev tamamlanana kadar iş parçacığını engellemez.</span><span class="sxs-lookup"><span data-stu-id="f7d20-217">The **await** keyword does not block the thread until the task is complete.</span></span> <span data-ttu-id="f7d20-218">Görevin geri kalanını görevde geri çağırma olarak imzalar ve hemen döndürür.</span><span class="sxs-lookup"><span data-stu-id="f7d20-218">It signs up the rest of the method as a callback on the task, and immediately returns.</span></span> <span data-ttu-id="f7d20-219">Beklenen görev sonunda tamamlandığında, bu geri aramayı çağırır ve bu nedenle, yöntemin hemen kapandığı yerde yürütmeye devam eder.</span><span class="sxs-lookup"><span data-stu-id="f7d20-219">When the awaited task eventually completes, it will invoke that callback and thus resume the execution of the method right where it left off.</span></span> <span data-ttu-id="f7d20-220">[Await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) ve [Async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) anahtar sözcüklerini ve [görev](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) ad alanını kullanma hakkında daha fazla bilgi için bkz. [Async References](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/async).</span><span class="sxs-lookup"><span data-stu-id="f7d20-220">For more information on using the [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) and [async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) keywords and the [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) namespace, see the [async references](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/async).</span></span>

<span data-ttu-id="f7d20-221">Aşağıdaki kod, `GetGizmos` ve `GetGizmosAsync` yöntemlerini göstermektedir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-221">The following code shows the `GetGizmos` and `GetGizmosAsync` methods.</span></span>

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample6.cs)]

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample7.cs?highlight=1,4-8)]

 <span data-ttu-id="f7d20-222">Zaman uyumsuz değişiklikler, yukarıdaki **GizmosAsync** yapılan değişikliklerle benzerdir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-222">The asynchronous changes are similar to those made to the **GizmosAsync** above.</span></span> 

- <span data-ttu-id="f7d20-223">Yöntem imzasına [zaman uyumsuz](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) anahtar sözcüğüyle açıklama eklendi, dönüş türü `Task<List<Gizmo>>`olarak değiştirildi ve *zaman uyumsuz* Yöntem adına eklenmiş.</span><span class="sxs-lookup"><span data-stu-id="f7d20-223">The method signature was annotated with the [async](https://msdn.microsoft.com/library/hh156513(VS.110).aspx) keyword, the return type was changed to `Task<List<Gizmo>>`, and *Async* was appended to the method name.</span></span>
- <span data-ttu-id="f7d20-224">Zaman uyumsuz [HttpClient](https://msdn.microsoft.com/library/system.net.http.httpclient(VS.110).aspx) sınıfı, zaman uyumlu [WebClient](https://msdn.microsoft.com/library/system.net.webclient.aspx) sınıfı yerine kullanılır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-224">The asynchronous [HttpClient](https://msdn.microsoft.com/library/system.net.http.httpclient(VS.110).aspx) class is used instead of the synchronous [WebClient](https://msdn.microsoft.com/library/system.net.webclient.aspx) class.</span></span>
- <span data-ttu-id="f7d20-225">[Await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) anahtar sözcüğü [HttpClient](https://msdn.microsoft.com/library/system.net.http.httpclient(VS.110).aspx)[GetAsync](https://msdn.microsoft.com/library/hh158944(VS.110).aspx) zaman uyumsuz metoduna uygulandı.</span><span class="sxs-lookup"><span data-stu-id="f7d20-225">The [await](https://msdn.microsoft.com/library/hh156528(VS.110).aspx) keyword was applied to the [HttpClient](https://msdn.microsoft.com/library/system.net.http.httpclient(VS.110).aspx)[GetAsync](https://msdn.microsoft.com/library/hh158944(VS.110).aspx) asynchronous method.</span></span>

<span data-ttu-id="f7d20-226">Aşağıdaki görüntüde zaman uyumsuz Gizmo görünümü gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-226">The following image shows the asynchronous gizmo view.</span></span>

![async](using-asynchronous-methods-in-aspnet-45/_static/image2.png)

<span data-ttu-id="f7d20-228">Şeyler verilerinin tarayıcılar sunumu, zaman uyumlu çağrı tarafından oluşturulan görünümle aynıdır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-228">The browsers presentation of the gizmos data is identical to the view created by the synchronous call.</span></span> <span data-ttu-id="f7d20-229">Tek fark, zaman uyumsuz sürümdür ağır yüklerin altında daha performanslı olabilir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-229">The only difference is the asynchronous version may be more performant under heavy loads.</span></span>

## <a name="registerasynctask-notes"></a><span data-ttu-id="f7d20-230">RegisterAsyncTask notları</span><span class="sxs-lookup"><span data-stu-id="f7d20-230">RegisterAsyncTask Notes</span></span>

<span data-ttu-id="f7d20-231">`RegisterAsyncTask` ile kullanıma alınan Yöntemler, [PreRender](https://msdn.microsoft.com/library/ms178472.aspx)'dan hemen sonra çalışacaktır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-231">Methods hooked up with `RegisterAsyncTask` will run immediately after [PreRender](https://msdn.microsoft.com/library/ms178472.aspx).</span></span> <span data-ttu-id="f7d20-232">Ayrıca, aşağıdaki kodda gösterildiği gibi, zaman uyumsuz void sayfa olaylarını doğrudan de kullanabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="f7d20-232">You can also use async void page events directly, as shown in the following code:</span></span>

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample8.cs)]

<span data-ttu-id="f7d20-233">Zaman uyumsuz void olaylardaki downsıde, geliştiricilerin artık olaylar yürütülürken tam denetime sahip olmayacaktır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-233">The downside to async void events is that developers no longer has full control over when events execute.</span></span> <span data-ttu-id="f7d20-234">Örneğin, hem. aspx hem de bir. Ana `Page_Load` olaylarını tanımlar ve bunlardan biri veya her ikisi zaman uyumsuzdur, yürütme sırası garanti edilemez.</span><span class="sxs-lookup"><span data-stu-id="f7d20-234">For example, if both an .aspx and a .Master define `Page_Load` events and one or both of them are asynchronous, the order of execution can't be guaranteed.</span></span> <span data-ttu-id="f7d20-235">Olay işleyicileri (örneğin `async void Button_Click`) için aynı ındeary sırası geçerli değildir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-235">The same indeterminiate order for non event handlers (such as `async void Button_Click` ) applies.</span></span> <span data-ttu-id="f7d20-236">Çoğu geliştirici için kabul edilebilir olması gerekir, ancak yürütme sırası üzerinde tam denetim gerektiren, yalnızca bir görev nesnesi döndüren yöntemleri kullanan `RegisterAsyncTask` gibi API 'Leri kullanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-236">For most developers this should be acceptable, but those who require full control over the order of execution should only use APIs like `RegisterAsyncTask` that consume methods which return a Task object.</span></span>

## <a id="Parallel"></a><span data-ttu-id="f7d20-237">Paralel olarak birden çok Işlem gerçekleştirme</span><span class="sxs-lookup"><span data-stu-id="f7d20-237">Performing Multiple Operations in Parallel</span></span>

<span data-ttu-id="f7d20-238">Zaman uyumsuz yöntemlerin bazı bağımsız işlemler gerçekleştirmesi gerektiğinde zaman uyumlu yöntemler üzerinde önemli bir avantajı vardır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-238">Asynchronous Methods have a significant advantage over synchronous methods when an action must perform several independent operations.</span></span> <span data-ttu-id="f7d20-239">Belirtilen örnekteki zaman uyumlu sayfa *PWG. aspx*(ürünler, pencere öğeleri ve şeyler için), ürünlerin, pencere öğelerinin ve şeyler 'in bir listesini almak için üç Web hizmeti çağrısının sonuçlarını görüntüler.</span><span class="sxs-lookup"><span data-stu-id="f7d20-239">In the sample provided, the synchronous page *PWG.aspx*(for Products, Widgets and Gizmos) displays the results of three web service calls to get a list of products, widgets, and gizmos.</span></span> <span data-ttu-id="f7d20-240">Bu hizmetleri sağlayan [ASP.NET Web API](../../../web-api/index.md) projesi, görevi kullanır [.](https://msdn.microsoft.com/library/hh139096(VS.110).aspx) gecikme veya yavaş ağ çağrılarının benzetimini yapmak için gecikme.</span><span class="sxs-lookup"><span data-stu-id="f7d20-240">The [ASP.NET Web API](../../../web-api/index.md) project that provides these services uses [Task.Delay](https://msdn.microsoft.com/library/hh139096(VS.110).aspx) to simulate latency or slow network calls.</span></span> <span data-ttu-id="f7d20-241">Gecikme 500 milisaniyeye ayarlandığında, zaman uyumsuz *Pwgasync. aspx* sayfasında, zaman uyumlu `PWG` sürümü 1.500 milisaniyeye göre daha fazla 500 milisaniyelik sürer.</span><span class="sxs-lookup"><span data-stu-id="f7d20-241">When the delay is set to 500 milliseconds, the asynchronous *PWGasync.aspx* page takes a little over 500 milliseconds to complete while the synchronous `PWG` version takes over 1,500 milliseconds.</span></span> <span data-ttu-id="f7d20-242">Zaman uyumlu *PWG. aspx* sayfası aşağıdaki kodda gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-242">The synchronous *PWG.aspx* page is shown in the following code.</span></span>

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample9.cs)]

<span data-ttu-id="f7d20-243">Arka plandaki zaman uyumsuz `PWGasync` kodu aşağıda gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-243">The asynchronous `PWGasync` code behind is shown below.</span></span>

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample10.cs?highlight=5,11,21)]

<span data-ttu-id="f7d20-244">Aşağıdaki görüntüde, zaman uyumsuz *Pwgasync. aspx* sayfasından döndürülen görünüm gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-244">The following image shows the view returned from the asynchronous *PWGasync.aspx* page.</span></span>

![](using-asynchronous-methods-in-aspnet-45/_static/image3.png)

## <a id="CancelToken"></a><span data-ttu-id="f7d20-245">Iptal belirteci kullanma</span><span class="sxs-lookup"><span data-stu-id="f7d20-245">Using a Cancellation Token</span></span>

<span data-ttu-id="f7d20-246">`Task`döndüren zaman uyumsuz yöntemler, [sayfa](https://msdn.microsoft.com/library/ydy4x04a.aspx) yönergesinin `AsyncTimeout` özniteliğiyle birlikte sağlandığında bir [CancellationToken](https://msdn.microsoft.com/library/system.threading.cancellationtoken(VS.110).aspx) parametresi alırlar.</span><span class="sxs-lookup"><span data-stu-id="f7d20-246">Asynchronous Methods returning `Task`are cancelable, that is they take a [CancellationToken](https://msdn.microsoft.com/library/system.threading.cancellationtoken(VS.110).aspx) parameter when one is provided with the `AsyncTimeout` attribute of the [Page](https://msdn.microsoft.com/library/ydy4x04a.aspx) directive.</span></span> <span data-ttu-id="f7d20-247">Aşağıdaki kod, saniye olarak zaman aşımı olan *GizmosCancelAsync. aspx* sayfasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-247">The following code shows the *GizmosCancelAsync.aspx* page with a timeout of on second.</span></span>

[!code-aspx[Main](using-asynchronous-methods-in-aspnet-45/samples/sample11.aspx?highlight=1)]

<span data-ttu-id="f7d20-248">Aşağıdaki kod *GizmosCancelAsync.aspx.cs* dosyasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-248">The following code shows the *GizmosCancelAsync.aspx.cs* file.</span></span>

[!code-csharp[Main](using-asynchronous-methods-in-aspnet-45/samples/sample12.cs?highlight=6,9)]

<span data-ttu-id="f7d20-249">Belirtilen örnek uygulamada, *GizmosCancelAsync* bağlantısının seçilmesi, *GizmosCancelAsync. aspx* sayfasını çağırır ve zaman uyumsuz çağrının iptalini (zaman aşımına göre) gösterir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-249">In the sample application provided, selecting the *GizmosCancelAsync* link calls the *GizmosCancelAsync.aspx* page and demonstrates the cancellation (by timing out) of the asynchronous call.</span></span> <span data-ttu-id="f7d20-250">Gecikme süresi rastgele bir aralık dahilinde olduğundan, zaman aşımı hata iletisini almak için sayfayı birkaç kez yenilemeniz gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-250">Because the delay time is within a random range, you might need to refresh the page a couple times to get the time out error message.</span></span>

## <a id="ServerConfig"></a><span data-ttu-id="f7d20-251">Yüksek eşzamanlılık/yüksek gecikmeli Web hizmeti çağrıları için sunucu yapılandırması</span><span class="sxs-lookup"><span data-stu-id="f7d20-251">Server Configuration for High Concurrency/High Latency Web Service Calls</span></span>

<span data-ttu-id="f7d20-252">Zaman uyumsuz bir Web uygulamasının avantajlarını gerçekleştirmek için, varsayılan sunucu yapılandırmasında bazı değişiklikler yapmanız gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-252">To realize the benefits of an asynchronous web application, you might need to make some changes to the default server configuration.</span></span> <span data-ttu-id="f7d20-253">Zaman uyumsuz Web uygulamanızı yapılandırırken ve stres testi yaparken aşağıdakileri aklınızda bulundurun.</span><span class="sxs-lookup"><span data-stu-id="f7d20-253">Keep the following in mind when configuring and stress testing your asynchronous web application.</span></span>

- <span data-ttu-id="f7d20-254">Windows 7, Windows Vista, Windows 8 ve tüm Windows istemci işletim sistemlerinde en fazla 10 eşzamanlı istek vardır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-254">Windows 7, Windows Vista, Window 8, and all Windows client operating systems have a maximum of 10 concurrent requests.</span></span> <span data-ttu-id="f7d20-255">Yüksek yük altında zaman uyumsuz yöntemlerin avantajlarını görmek için bir Windows Server işletim sistemi gerekir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-255">You'll need a Windows Server operating system to see the benefits of asynchronous methods under high load.</span></span>
- <span data-ttu-id="f7d20-256">Aşağıdaki komutu kullanarak, yükseltilmiş bir komut isteminden .NET 4,5 'yi IIS ile kaydedin:</span><span class="sxs-lookup"><span data-stu-id="f7d20-256">Register .NET 4.5 with IIS from an elevated command prompt using the following command:</span></span>  
  <span data-ttu-id="f7d20-257">%windir%\Microsoft.NET\Framework64 \v4.0.30319\aspnet\_regııs-ı</span><span class="sxs-lookup"><span data-stu-id="f7d20-257">%windir%\Microsoft.NET\Framework64 \v4.0.30319\aspnet\_regiis -i</span></span>  
  <span data-ttu-id="f7d20-258">Bkz [. asp.NET IIS Kayıt Aracı (Aspnet\_regııs. exe)](https://msdn.microsoft.com/library/k6h9cz8h.aspx)</span><span class="sxs-lookup"><span data-stu-id="f7d20-258">See    [ASP.NET IIS Registration Tool (Aspnet\_regiis.exe)](https://msdn.microsoft.com/library/k6h9cz8h.aspx)</span></span>
- <span data-ttu-id="f7d20-259">[Http. sys](https://www.iis.net/learn/get-started/introduction-to-iis/introduction-to-iis-architecture) kuyruk sınırını 1.000 varsayılan değerinden 5.000 ' e artırmanız gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-259">You might need to increase the [HTTP.sys](https://www.iis.net/learn/get-started/introduction-to-iis/introduction-to-iis-architecture) queue limit from the default value of 1,000 to 5,000.</span></span> <span data-ttu-id="f7d20-260">Ayar çok düşükse, http 503 durumu ile [http. sys](https://www.iis.net/learn/get-started/introduction-to-iis/introduction-to-iis-architecture) Red isteklerini görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f7d20-260">If the setting is too low, you may see [HTTP.sys](https://www.iis.net/learn/get-started/introduction-to-iis/introduction-to-iis-architecture) reject requests with a HTTP 503 status.</span></span> <span data-ttu-id="f7d20-261">HTTP. sys kuyruk sınırını değiştirmek için:</span><span class="sxs-lookup"><span data-stu-id="f7d20-261">To change the HTTP.sys queue limit:</span></span>

    - <span data-ttu-id="f7d20-262">IIS Yöneticisi 'ni açın ve uygulama havuzları bölmesine gidin.</span><span class="sxs-lookup"><span data-stu-id="f7d20-262">Open IIS manager and navigate to the Application Pools pane.</span></span>
    - <span data-ttu-id="f7d20-263">Hedef uygulama havuzuna sağ tıklayın ve **Gelişmiş ayarlar**' ı seçin.</span><span class="sxs-lookup"><span data-stu-id="f7d20-263">Right click on the target application pool and select **Advanced Settings**.</span></span>  
        <span data-ttu-id="f7d20-264">![gelişmiş](using-asynchronous-methods-in-aspnet-45/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="f7d20-264">![advanced](using-asynchronous-methods-in-aspnet-45/_static/image4.png)</span></span>
    - <span data-ttu-id="f7d20-265">**Gelişmiş ayarlar** Iletişim kutusunda *sıra uzunluğu değerini* 1.000 5.000 olarak değiştirin.</span><span class="sxs-lookup"><span data-stu-id="f7d20-265">In the **Advanced Settings** dialog box, change *Queue Length* from 1,000 to 5,000.</span></span>  
        <span data-ttu-id="f7d20-266">![kuyruğu uzunluğu](using-asynchronous-methods-in-aspnet-45/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="f7d20-266">![Queue length](using-asynchronous-methods-in-aspnet-45/_static/image5.png)</span></span>  
  
  <span data-ttu-id="f7d20-267">Yukarıdaki görüntülerde, uygulama havuzu .NET 4,5 kullanıyor olsa da, .NET Framework 'ün v 4.0 olarak listelendiğini göz önünde bulunur.</span><span class="sxs-lookup"><span data-stu-id="f7d20-267">Note in the images above, the .NET framework is listed as v4.0, even though the application pool is using .NET 4.5.</span></span> <span data-ttu-id="f7d20-268">Bu tutarsızlığı anlamak için aşağıdakilere bakın:</span><span class="sxs-lookup"><span data-stu-id="f7d20-268">To understand this discrepancy, see the following:</span></span>

- [<span data-ttu-id="f7d20-269">.NET sürüm oluşturma ve Çoklu hedefleme-.NET 4,5, .NET 4,0 için yerinde bir yükseltmektedir</span><span class="sxs-lookup"><span data-stu-id="f7d20-269">.NET Versioning and Multi-Targeting - .NET 4.5 is an in-place upgrade to .NET 4.0</span></span>](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx)
- [<span data-ttu-id="f7d20-270">IIS uygulamasını veya AppPool 'ı 2,0 yerine ASP.NET 3,5 kullanacak şekilde ayarlama</span><span class="sxs-lookup"><span data-stu-id="f7d20-270">How to set an IIS Application or AppPool to use ASP.NET 3.5 rather than 2.0</span></span>](http://www.hanselman.com/blog/HowToSetAnIISApplicationOrAppPoolToUseASPNET35RatherThan20.aspx)
- <span data-ttu-id="f7d20-271">[.NET Framework Sürümleri ve Bağımlılıkları](https://msdn.microsoft.com/library/bb822049(VS.110).aspx)</span><span class="sxs-lookup"><span data-stu-id="f7d20-271">[.NET Framework Versions and Dependencies](https://msdn.microsoft.com/library/bb822049(VS.110).aspx)</span></span>

- <span data-ttu-id="f7d20-272">Uygulamanız HTTP üzerinden bir arka uçta iletişim kurmak için Web Hizmetleri veya System.NET kullanıyorsa, [connectionManagement/maxconnection](https://msdn.microsoft.com/library/fb6y0fyc(VS.110).aspx) öğesini artırmanız gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-272">If your application is using web services or System.NET to communicate with a backend over HTTP you may need to increase the [connectionManagement/maxconnection](https://msdn.microsoft.com/library/fb6y0fyc(VS.110).aspx) element.</span></span> <span data-ttu-id="f7d20-273">ASP.NET uygulamaları için bu, otomatik yapılandırma özelliği tarafından CPU sayısının 12 katı ile sınırlıdır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-273">For ASP.NET applications, this is limited by the autoConfig feature to 12 times the number of CPUs.</span></span> <span data-ttu-id="f7d20-274">Yani, bir dört proc üzerinde en fazla 12 \* 4 = 48 bir IP uç noktasına eşzamanlı bağlantı sağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f7d20-274">That means that on a quad-proc, you can have at most 12 \* 4 = 48 concurrent connections to an IP end point.</span></span> <span data-ttu-id="f7d20-275">Bu, [Otomatik](https://msdn.microsoft.com/library/7w2sway1(VS.110).aspx)olarak bağlı olduğundan, bir ASP.NET uygulamasında `maxconnection` artırmanın en kolay yolu, [System .net. ServicePointManager. DefaultConnectionLimit](https://msdn.microsoft.com/library/system.net.servicepointmanager.defaultconnectionlimit(VS.110).aspx) ' i *global. asax* dosyasındaki from `Application_Start` yönteminde Program aracılığıyla ayarlamaya yönelik bir yöntemdir.</span><span class="sxs-lookup"><span data-stu-id="f7d20-275">Because this is tied to [autoConfig](https://msdn.microsoft.com/library/7w2sway1(VS.110).aspx), the easiest way to increase `maxconnection` in an ASP.NET application is to set [System.Net.ServicePointManager.DefaultConnectionLimit](https://msdn.microsoft.com/library/system.net.servicepointmanager.defaultconnectionlimit(VS.110).aspx) programmatically in the from `Application_Start` method in the *global.asax* file.</span></span> <span data-ttu-id="f7d20-276">Örnek için bkz. örnek indirme.</span><span class="sxs-lookup"><span data-stu-id="f7d20-276">See the sample download for an example.</span></span>
- <span data-ttu-id="f7d20-277">.NET 4,5 ' de, [maxConcurrentRequestsPerCPU](https://blogs.msdn.com/tmarq/archive/2007/07/21/asp-net-thread-usage-on-iis-7-0-and-6-0.aspx) için 5000 varsayılan değer iyi olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f7d20-277">In .NET 4.5, the default of 5000 for [MaxConcurrentRequestsPerCPU](https://blogs.msdn.com/tmarq/archive/2007/07/21/asp-net-thread-usage-on-iis-7-0-and-6-0.aspx) should be fine.</span></span>

## <a name="contributors"></a><span data-ttu-id="f7d20-278">Katkıda Bulunanlar</span><span class="sxs-lookup"><span data-stu-id="f7d20-278">Contributors</span></span>

- [<span data-ttu-id="f7d20-279">Levi Broick</span><span class="sxs-lookup"><span data-stu-id="f7d20-279">Levi Broderick</span></span>](http://stackoverflow.com/users/59641/levi)
- [<span data-ttu-id="f7d20-280">Tom Dykstra</span><span class="sxs-lookup"><span data-stu-id="f7d20-280">Tom Dykstra</span></span>](http://www.bing.com/search?q=site%3Aasp.net+%22Tom+Dykstra%22+-forums.asp.net&amp;qs=n&amp;form=QBRE&amp;pq=site%3Aasp.net+%22tom+dykstra%22+-forums.asp.net&amp;sc=8-42&amp;sp=-1&amp;sk=)
- [<span data-ttu-id="f7d20-281">Atacan Solson</span><span class="sxs-lookup"><span data-stu-id="f7d20-281">Brad Wilson</span></span>](http://bradwilson.typepad.com/)
- [<span data-ttu-id="f7d20-282">HongMei Ge</span><span class="sxs-lookup"><span data-stu-id="f7d20-282">HongMei Ge</span></span>](https://blogs.msdn.com/b/hongmeig/)
