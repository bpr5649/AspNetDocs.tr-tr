---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
title: Alışveriş sepeti | Microsoft Docs
author: Erikre
description: Bu öğretici serisi, ASP.NET 4,5 ve Microsoft Visual Studio Express 2013 ' i kullanarak bir ASP.NET Web Forms uygulaması oluşturma hakkında temel bilgileri öğretir...
ms.author: riande
ms.date: 09/08/2014
ms.assetid: 6898c601-6c31-432f-8388-e6843f8a17cb
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
msc.type: authoredcontent
ms.openlocfilehash: d3b619ebd9448d30857ffbaf17fd245b1d54a662
ms.sourcegitcommit: 88fc80e3f65aebdf61ec9414810ddbc31c543f04
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/22/2020
ms.locfileid: "76519303"
---
# <a name="shopping-cart"></a><span data-ttu-id="c1628-103">Alışveriş Sepeti</span><span class="sxs-lookup"><span data-stu-id="c1628-103">Shopping Cart</span></span>

<span data-ttu-id="c1628-104">by [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="c1628-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="c1628-105">[Wingtip Toys örnek projesini indirin (C#)](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) veya [indirme E-kitabı (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="c1628-105">[Download Wingtip Toys Sample Project (C#)](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="c1628-106">Bu öğretici serisi, ASP.NET 4,5 ve Web için Microsoft Visual Studio Express 2013 kullanarak bir ASP.NET Web Forms uygulaması oluşturma hakkında temel bilgileri öğretir.</span><span class="sxs-lookup"><span data-stu-id="c1628-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="c1628-107">[Kaynak koduna sahip C# ](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) Visual Studio 2013 bir proje, bu öğretici serisine eşlik etmek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="c1628-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>

<span data-ttu-id="c1628-108">Bu öğretici, Wingtip Toys örnek ASP.NET Web Forms uygulamasına bir alışveriş sepeti eklemek için gereken iş mantığını açıklamaktadır.</span><span class="sxs-lookup"><span data-stu-id="c1628-108">This tutorial describes the business logic required to add a shopping cart to the Wingtip Toys sample ASP.NET Web Forms application.</span></span> <span data-ttu-id="c1628-109">Bu öğretici, önceki öğreticide "veri öğelerini ve ayrıntılarını görüntüleme" ve Wingtip oyuncak mağaza öğreticisi serisinin bir parçası olarak oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="c1628-109">This tutorial builds on the previous tutorial "Display Data Items and Details" and is part of the Wingtip Toy Store tutorial series.</span></span> <span data-ttu-id="c1628-110">Bu öğreticiyi tamamladığınızda, örnek uygulamanızın kullanıcıları alışveriş sepetindeki ürünleri ekleyebilir, kaldırabilir ve değiştirebilir.</span><span class="sxs-lookup"><span data-stu-id="c1628-110">When you've completed this tutorial, the users of your sample app will be able to add, remove, and modify the products in their shopping cart.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="c1628-111">Öğrenecekleriniz:</span><span class="sxs-lookup"><span data-stu-id="c1628-111">What you'll learn:</span></span>

1. <span data-ttu-id="c1628-112">Web uygulaması için bir alışveriş sepeti oluşturma.</span><span class="sxs-lookup"><span data-stu-id="c1628-112">How to create a shopping cart for the web application.</span></span>
2. <span data-ttu-id="c1628-113">Kullanıcıların alışveriş sepetine öğe eklemesini sağlama.</span><span class="sxs-lookup"><span data-stu-id="c1628-113">How to enable users to add items to the shopping cart.</span></span>
3. <span data-ttu-id="c1628-114">Alışveriş sepeti ayrıntılarını göstermek için bir [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) denetimi ekleme.</span><span class="sxs-lookup"><span data-stu-id="c1628-114">How to add a [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) control to display shopping cart details.</span></span>
4. <span data-ttu-id="c1628-115">Sipariş toplamını hesaplama ve görüntüleme.</span><span class="sxs-lookup"><span data-stu-id="c1628-115">How to calculate and display the order total.</span></span>
5. <span data-ttu-id="c1628-116">Alışveriş sepetindeki öğeleri kaldırma ve güncelleştirme.</span><span class="sxs-lookup"><span data-stu-id="c1628-116">How to remove and update items in the shopping cart.</span></span>
6. <span data-ttu-id="c1628-117">Bir alışveriş sepeti sayacı ekleme.</span><span class="sxs-lookup"><span data-stu-id="c1628-117">How to include a shopping cart counter.</span></span>

## <a name="code-features-in-this-tutorial"></a><span data-ttu-id="c1628-118">Bu öğreticideki kod özellikleri:</span><span class="sxs-lookup"><span data-stu-id="c1628-118">Code features in this tutorial:</span></span>

1. <span data-ttu-id="c1628-119">Entity Framework Code First</span><span class="sxs-lookup"><span data-stu-id="c1628-119">Entity Framework Code First</span></span>
2. <span data-ttu-id="c1628-120">Veri Açıklamaları</span><span class="sxs-lookup"><span data-stu-id="c1628-120">Data Annotations</span></span>
3. <span data-ttu-id="c1628-121">Kesin tür belirtilmiş veri denetimleri</span><span class="sxs-lookup"><span data-stu-id="c1628-121">Strongly typed data controls</span></span>
4. <span data-ttu-id="c1628-122">Model bağlama</span><span class="sxs-lookup"><span data-stu-id="c1628-122">Model binding</span></span>

## <a name="creating-a-shopping-cart"></a><span data-ttu-id="c1628-123">Alışveriş sepeti oluşturma</span><span class="sxs-lookup"><span data-stu-id="c1628-123">Creating a Shopping Cart</span></span>

<span data-ttu-id="c1628-124">Bu öğretici serisinde daha önce, bir veritabanından ürün verilerini görüntülemek için sayfa ve kod eklediniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-124">Earlier in this tutorial series, you added pages and code to view product data from a database.</span></span> <span data-ttu-id="c1628-125">Bu öğreticide, kullanıcıların satın alma ile ilgilenen ürünleri yönetmek için bir alışveriş sepeti oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="c1628-125">In this tutorial, you'll create a shopping cart to manage the products that users are interested in buying.</span></span> <span data-ttu-id="c1628-126">Kullanıcılar kayıtlı veya oturum açmış olmasalar bile alışveriş sepetine gözatabilecek ve bunlara öğe ekleyebilecektir.</span><span class="sxs-lookup"><span data-stu-id="c1628-126">Users will be able to browse and add items to the shopping cart even if they are not registered or logged in.</span></span> <span data-ttu-id="c1628-127">Alışveriş sepetini erişimini yönetmek için, Kullanıcı ilk kez alışveriş sepetine eriştiğinde bir genel benzersiz tanımlayıcı (GUID) kullanarak kullanıcılara benzersiz bir `ID` atayacaksınız.</span><span class="sxs-lookup"><span data-stu-id="c1628-127">To manage shopping cart access, you will assign users a unique `ID` using a globally unique identifier (GUID) when the user accesses the shopping cart for the first time.</span></span> <span data-ttu-id="c1628-128">Bu `ID` ASP.NET oturum durumunu kullanarak depolayacaksınız.</span><span class="sxs-lookup"><span data-stu-id="c1628-128">You'll store this `ID` using the ASP.NET Session state.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="c1628-129">ASP.NET oturum durumu, Kullanıcı siteden ayrıldıktan sonra sona erecektir kullanıcıya özgü bilgileri depolamak için uygun bir yerdir.</span><span class="sxs-lookup"><span data-stu-id="c1628-129">The ASP.NET Session state is a convenient place to store user-specific information which will expire after the user leaves the site.</span></span> <span data-ttu-id="c1628-130">Oturum durumunun kötüye kullanımı daha büyük sitelerde performans etkilerine sahip olsa da, oturum durumunun hafif kullanımı, tanıtım amacıyla iyi bir şekilde çalışacaktır.</span><span class="sxs-lookup"><span data-stu-id="c1628-130">While misuse of session state can have performance implications on larger sites, light use of session state works well for demonstration purposes.</span></span> <span data-ttu-id="c1628-131">Wingtip Toys örnek projesi, oturum durumunun, siteyi barındıran Web sunucusunda işlem içinde depolandığı bir dış sağlayıcı olmadan nasıl kullanılacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="c1628-131">The Wingtip Toys sample project shows how to use session state without an external provider, where session state is stored in-process on the web server hosting the site.</span></span> <span data-ttu-id="c1628-132">Bir uygulamanın birden çok örneğini veya farklı sunuculardaki bir uygulamanın birden çok örneğini çalıştıran siteleri sağlayan daha büyük siteler için, **Windows Azure önbellek hizmeti**'ni kullanmayı düşünün.</span><span class="sxs-lookup"><span data-stu-id="c1628-132">For larger sites that provide multiple instances of an application or for sites that run multiple instances of an application on different servers, consider using **Windows Azure Cache Service**.</span></span> <span data-ttu-id="c1628-133">Bu önbellek hizmeti, Web sitesi dışında bir dağıtılmış önbelleğe alma hizmeti sağlar ve işlem içi oturum durumunu kullanma sorununu çözer.</span><span class="sxs-lookup"><span data-stu-id="c1628-133">This Cache Service provides a distributed caching service that is external to the web site and solves the problem of using in-process session state.</span></span> <span data-ttu-id="c1628-134">Daha fazla bilgi için bkz. [Windows Azure Web siteleri ile ASP.NET oturum durumunu kullanma](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span><span class="sxs-lookup"><span data-stu-id="c1628-134">For more information see, [How to Use ASP.NET Session State with Windows Azure Web Sites](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span></span>

### <a name="add-cartitem-as-a-model-class"></a><span data-ttu-id="c1628-135">Bir model sınıfı olarak Cartıtem ekleme</span><span class="sxs-lookup"><span data-stu-id="c1628-135">Add CartItem as a Model Class</span></span>

<span data-ttu-id="c1628-136">Bu öğretici serisinde daha önce, *modeller* klasöründe `Category` ve `Product` sınıfları oluşturarak kategori ve ürün verilerinin şemasını tanımlamış olursunuz.</span><span class="sxs-lookup"><span data-stu-id="c1628-136">Earlier in this tutorial series, you defined the schema for the category and product data by creating the `Category` and `Product` classes in the *Models* folder.</span></span> <span data-ttu-id="c1628-137">Şimdi, alışveriş sepeti için şemayı tanımlamak üzere yeni bir sınıf ekleyin.</span><span class="sxs-lookup"><span data-stu-id="c1628-137">Now, add a new class to define the schema for the shopping cart.</span></span> <span data-ttu-id="c1628-138">Bu öğreticide daha sonra, `CartItem` tablosuna veri erişimini işlemek için bir sınıf ekleyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-138">Later in this tutorial, you will add a class to handle data access to the `CartItem` table.</span></span> <span data-ttu-id="c1628-139">Bu sınıf, alışveriş sepetindeki öğeleri eklemek, kaldırmak ve güncelleştirmek için iş mantığı sağlar.</span><span class="sxs-lookup"><span data-stu-id="c1628-139">This class will provide the business logic to add, remove, and update items in the shopping cart.</span></span>

1. <span data-ttu-id="c1628-140">*Modeller* klasörüne sağ tıklayın ve **yeni öğe**&gt; -**Ekle** ' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="c1628-140">Right-click the *Models* folder and select **Add** -&gt; **New Item**.</span></span> 

    ![Alışveriş sepeti-yeni öğe](shopping-cart/_static/image1.png)
2. <span data-ttu-id="c1628-142">**Yeni Öğe Ekle** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-142">The **Add New Item** dialog box is displayed.</span></span> <span data-ttu-id="c1628-143">**Kodu**seçin ve ardından **sınıf**' ı seçin.</span><span class="sxs-lookup"><span data-stu-id="c1628-143">Select **Code**, and then select **Class**.</span></span> 

    ![Alışveriş sepeti-yeni öğe Ekle Iletişim kutusu](shopping-cart/_static/image2.png)
3. <span data-ttu-id="c1628-145">Bu yeni sınıfı *CartItem.cs*olarak adlandırın.</span><span class="sxs-lookup"><span data-stu-id="c1628-145">Name this new class *CartItem.cs*.</span></span>
4. <span data-ttu-id="c1628-146">**Ekle**'yi tıklatın.</span><span class="sxs-lookup"><span data-stu-id="c1628-146">Click **Add**.</span></span>  
   <span data-ttu-id="c1628-147">Yeni sınıf dosyası düzenleyicide görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-147">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="c1628-148">Varsayılan kodu şu kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="c1628-148">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample1.cs)]

<span data-ttu-id="c1628-149">`CartItem` sınıfı, bir kullanıcının alışveriş sepetine eklediği her bir ürünü tanımlayan şemayı içerir.</span><span class="sxs-lookup"><span data-stu-id="c1628-149">The `CartItem` class contains the schema that will define each product a user adds to the shopping cart.</span></span> <span data-ttu-id="c1628-150">Bu sınıf, bu öğretici serisinde daha önce oluşturduğunuz diğer şema sınıflarına benzer.</span><span class="sxs-lookup"><span data-stu-id="c1628-150">This class is similar to the other schema classes you created earlier in this tutorial series.</span></span> <span data-ttu-id="c1628-151">Kurala göre Entity Framework Code First, `CartItem` tablosunun birincil anahtarının `CartItemId` veya `ID`olacağını bekler.</span><span class="sxs-lookup"><span data-stu-id="c1628-151">By convention, Entity Framework Code First expects that the primary key for the `CartItem` table will be either `CartItemId` or `ID`.</span></span> <span data-ttu-id="c1628-152">Ancak, kod, Data Annotation `[Key]` özniteliğini kullanarak varsayılan davranışı geçersiz kılar.</span><span class="sxs-lookup"><span data-stu-id="c1628-152">However, the code overrides the default behavior by using the data annotation `[Key]` attribute.</span></span> <span data-ttu-id="c1628-153">ItemId özelliğinin `Key` özniteliği, `ItemID` özelliğinin birincil anahtar olduğunu belirtir.</span><span class="sxs-lookup"><span data-stu-id="c1628-153">The `Key` attribute of the ItemId property specifies that the `ItemID` property is the primary key.</span></span>

<span data-ttu-id="c1628-154">`CartId` özelliği, satın alınacak öğeyle ilişkili kullanıcının `ID` belirtir.</span><span class="sxs-lookup"><span data-stu-id="c1628-154">The `CartId` property specifies the `ID` of the user that is associated with the item to purchase.</span></span> <span data-ttu-id="c1628-155">Kullanıcı alışveriş sepetine eriştiğinde bu kullanıcı `ID` oluşturmak için kod ekleyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-155">You'll add code to create this user `ID` when the user accesses the shopping cart.</span></span> <span data-ttu-id="c1628-156">Bu `ID`, bir ASP.NET oturum değişkeni olarak da depolanacak.</span><span class="sxs-lookup"><span data-stu-id="c1628-156">This `ID` will also be stored as an ASP.NET Session variable.</span></span>

### <a name="update-the-product-context"></a><span data-ttu-id="c1628-157">Ürün bağlamını güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="c1628-157">Update the Product Context</span></span>

<span data-ttu-id="c1628-158">`CartItem` sınıfı eklemenin yanı sıra, varlık sınıflarını yöneten ve veritabanına veri erişimi sağlayan veritabanı bağlamı sınıfını güncelleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="c1628-158">In addition to adding the `CartItem` class, you will need to update the database context class that manages the entity classes and that provides data access to the database.</span></span> <span data-ttu-id="c1628-159">Bunu yapmak için, yeni oluşturulan `CartItem` modeli sınıfını `ProductContext` sınıfına ekleyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-159">To do this, you will add the newly created `CartItem` model class to the `ProductContext` class.</span></span>

1. <span data-ttu-id="c1628-160">**Çözüm Gezgini**, *modeller* klasöründe *ProductContext.cs* dosyasını bulup açın.</span><span class="sxs-lookup"><span data-stu-id="c1628-160">In **Solution Explorer**, find and open the *ProductContext.cs* file in the *Models* folder.</span></span>
2. <span data-ttu-id="c1628-161">Vurgulanan kodu *ProductContext.cs* dosyasına aşağıdaki şekilde ekleyin:</span><span class="sxs-lookup"><span data-stu-id="c1628-161">Add the highlighted code to the *ProductContext.cs* file as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample2.cs?highlight=14)]

<span data-ttu-id="c1628-162">Bu öğretici serisinde daha önce bahsedildiği gibi, *ProductContext.cs* dosyasındaki kod `System.Data.Entity` ad alanını ekleyerek Entity Framework tüm çekirdek işlevlerine erişebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-162">As mentioned previously in this tutorial series, the code in the *ProductContext.cs* file adds the `System.Data.Entity` namespace so that you have access to all the core functionality of the Entity Framework.</span></span> <span data-ttu-id="c1628-163">Bu işlevsellik, türü kesin belirlenmiş nesnelerle çalışarak verileri sorgulama, ekleme, güncelleştirme ve silme özelliğini içerir.</span><span class="sxs-lookup"><span data-stu-id="c1628-163">This functionality includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span> <span data-ttu-id="c1628-164">`ProductContext` sınıfı, yeni eklenen `CartItem` model sınıfına erişim ekler.</span><span class="sxs-lookup"><span data-stu-id="c1628-164">The `ProductContext` class adds access to the newly added `CartItem` model class.</span></span>

### <a name="managing-the-shopping-cart-business-logic"></a><span data-ttu-id="c1628-165">Alışveriş sepetini Iş mantığını yönetme</span><span class="sxs-lookup"><span data-stu-id="c1628-165">Managing the Shopping Cart Business Logic</span></span>

<span data-ttu-id="c1628-166">Sonra, `ShoppingCart` sınıfını yeni bir *mantıksal* klasörde oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="c1628-166">Next, you'll create the `ShoppingCart` class in a new *Logic* folder.</span></span> <span data-ttu-id="c1628-167">`ShoppingCart` sınıfı `CartItem` tabloya veri erişimini işler.</span><span class="sxs-lookup"><span data-stu-id="c1628-167">The `ShoppingCart` class handles data access to the `CartItem` table.</span></span> <span data-ttu-id="c1628-168">Bu sınıf, alışveriş sepetindeki öğeleri eklemek, kaldırmak ve güncelleştirmek için iş mantığını da içerir.</span><span class="sxs-lookup"><span data-stu-id="c1628-168">The class will also include the business logic to add, remove, and update items in the shopping cart.</span></span>

<span data-ttu-id="c1628-169">Ekleyeceğiniz alışveriş sepeti mantığı aşağıdaki eylemleri yönetmek için gereken işlevselliği içerir:</span><span class="sxs-lookup"><span data-stu-id="c1628-169">The shopping cart logic that you will add will contain the functionality to manage the following actions:</span></span>

1. <span data-ttu-id="c1628-170">Alışveriş sepetine öğe ekleme</span><span class="sxs-lookup"><span data-stu-id="c1628-170">Adding items to the shopping cart</span></span>
2. <span data-ttu-id="c1628-171">Alışveriş sepetinden öğeleri kaldırma</span><span class="sxs-lookup"><span data-stu-id="c1628-171">Removing items from the shopping cart</span></span>
3. <span data-ttu-id="c1628-172">Alışveriş sepeti KIMLIĞINI alma</span><span class="sxs-lookup"><span data-stu-id="c1628-172">Getting the shopping cart ID</span></span>
4. <span data-ttu-id="c1628-173">Alışveriş sepetinden öğe alma</span><span class="sxs-lookup"><span data-stu-id="c1628-173">Retrieving items from the shopping cart</span></span>
5. <span data-ttu-id="c1628-174">Tüm alışveriş sepeti öğelerinin miktarını Toplam olarak alma</span><span class="sxs-lookup"><span data-stu-id="c1628-174">Totaling the amount of all the shopping cart items</span></span>
6. <span data-ttu-id="c1628-175">Alışveriş sepeti verilerini güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="c1628-175">Updating the shopping cart data</span></span>

<span data-ttu-id="c1628-176">Alışveriş sepeti verilerine erişmek için bir alışveriş sepeti sayfası (*ShoppingCart. aspx*) ve alışveriş sepeti sınıfı birlikte kullanılacaktır.</span><span class="sxs-lookup"><span data-stu-id="c1628-176">A shopping cart page (*ShoppingCart.aspx*) and the shopping cart class will be used together to access shopping cart data.</span></span> <span data-ttu-id="c1628-177">Alışveriş sepeti sayfası, kullanıcının alışveriş sepetine eklediği tüm öğeleri görüntüler.</span><span class="sxs-lookup"><span data-stu-id="c1628-177">The shopping cart page will display all the items the user adds to the shopping cart.</span></span> <span data-ttu-id="c1628-178">Alışveriş sepeti sayfasının ve sınıfının yanı sıra, alışveriş sepetine ürün eklemek için bir sayfa (*AddToCart. aspx*) oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="c1628-178">Besides the shopping cart page and class, you'll create a page (*AddToCart.aspx*) to add products to the shopping cart.</span></span> <span data-ttu-id="c1628-179">Ayrıca, *ProductList. aspx* sayfasına ve *AddToCart. aspx* sayfasına bir bağlantı sağlayacak olan *ProductDetails. aspx* sayfasına kod ekleyeceksiniz. böylece, kullanıcının alışveriş sepetine ürün ekleyebilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="c1628-179">You will also add code to the *ProductList.aspx* page and the *ProductDetails.aspx* page that will provide a link to the *AddToCart.aspx* page, so that the user can add products to the shopping cart.</span></span>

<span data-ttu-id="c1628-180">Aşağıdaki diyagramda, Kullanıcı alışveriş sepetine bir ürün eklediğinde oluşan temel işlem gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="c1628-180">The following diagram shows the basic process that occurs when the user adds a product to the shopping cart.</span></span>

![Alışveriş sepeti-alışveriş sepetine ekleme](shopping-cart/_static/image3.png)

<span data-ttu-id="c1628-182">Kullanıcı *ProductList. aspx* sayfasında veya *ProductDetails. aspx* sayfasında **sepet Ekle** bağlantısına tıkladığında, uygulama *AddToCart. aspx* sayfasına ve ardından otomatik olarak *ShoppingCart. aspx* sayfasına gider.</span><span class="sxs-lookup"><span data-stu-id="c1628-182">When the user clicks the **Add To Cart** link on either the *ProductList.aspx* page or the *ProductDetails.aspx* page, the application will navigate to the *AddToCart.aspx* page and then automatically to the *ShoppingCart.aspx* page.</span></span> <span data-ttu-id="c1628-183">*AddToCart. aspx* sayfası, ShoppingCart sınıfında bir yöntemi çağırarak, select ürünü alışveriş sepetine ekler.</span><span class="sxs-lookup"><span data-stu-id="c1628-183">The *AddToCart.aspx* page will add the select product to the shopping cart by calling a method in the ShoppingCart class.</span></span> <span data-ttu-id="c1628-184">*ShoppingCart. aspx* sayfasında, alışveriş sepetine eklenmiş ürünler görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-184">The *ShoppingCart.aspx* page will display the products that have been added to the shopping cart.</span></span>

#### <a name="creating-the-shopping-cart-class"></a><span data-ttu-id="c1628-185">Alışveriş sepeti sınıfı oluşturma</span><span class="sxs-lookup"><span data-stu-id="c1628-185">Creating the Shopping Cart Class</span></span>

<span data-ttu-id="c1628-186">`ShoppingCart` sınıfı uygulamadaki ayrı bir klasöre eklenir, böylece model (modeller klasörü), sayfalar (kök klasörü) ve Logic (Logic Folder) arasında net bir ayrım olur.</span><span class="sxs-lookup"><span data-stu-id="c1628-186">The `ShoppingCart` class will be added to a separate folder in the application so that there will be a clear distinction between the model (Models folder), the pages (root folder) and the logic (Logic folder).</span></span>

1. <span data-ttu-id="c1628-187">**Çözüm Gezgini**, **wingtiptoys**projesine sağ tıklayın ve **Yeni klasör**&gt;-**Ekle** ' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="c1628-187">In **Solution Explorer**, right-click the **WingtipToys**project and select **Add**-&gt;**New Folder**.</span></span> <span data-ttu-id="c1628-188">Yeni klasör *mantığını*adlandırın.</span><span class="sxs-lookup"><span data-stu-id="c1628-188">Name the new folder *Logic*.</span></span>
2. <span data-ttu-id="c1628-189">*Logic* klasörüne sağ tıklayın ve ardından **yeni öğe**&gt; -**Ekle** ' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="c1628-189">Right-click the *Logic* folder and then select **Add** -&gt; **New Item**.</span></span>
3. <span data-ttu-id="c1628-190">*ShoppingCartActions.cs*adlı yeni bir sınıf dosyası ekleyin.</span><span class="sxs-lookup"><span data-stu-id="c1628-190">Add a new class file named *ShoppingCartActions.cs*.</span></span>
4. <span data-ttu-id="c1628-191">Varsayılan kodu şu kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="c1628-191">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample3.cs)]

<span data-ttu-id="c1628-192">`AddToCart` yöntemi, bireysel ürünlerin ürün `ID`göre alışveriş sepetine dahil edilmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="c1628-192">The `AddToCart` method enables individual products to be included in the shopping cart based on the product `ID`.</span></span> <span data-ttu-id="c1628-193">Ürün sepete eklenir veya sepet zaten bu ürün için bir öğe içeriyorsa, miktar artırılır.</span><span class="sxs-lookup"><span data-stu-id="c1628-193">The product is added to the cart, or if the cart already contains an item for that product, the quantity is incremented.</span></span>

<span data-ttu-id="c1628-194">`GetCartId` yöntemi kullanıcı için sepet `ID` döndürür.</span><span class="sxs-lookup"><span data-stu-id="c1628-194">The `GetCartId` method returns the cart `ID` for the user.</span></span> <span data-ttu-id="c1628-195">Sepet `ID`, bir kullanıcının alışveriş sepetindeki öğeleri izlemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="c1628-195">The cart `ID` is used to track the items that a user has in their shopping cart.</span></span> <span data-ttu-id="c1628-196">Kullanıcının mevcut bir sepet `ID`yoksa, bu `ID` yeni bir sepet oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="c1628-196">If the user does not have an existing cart `ID`, a new cart `ID` is created for them.</span></span> <span data-ttu-id="c1628-197">Kullanıcı kayıtlı bir kullanıcı olarak oturum açmışsa, sepet `ID` Kullanıcı adına ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="c1628-197">If the user is signed in as a registered user, the cart `ID` is set to their user name.</span></span> <span data-ttu-id="c1628-198">Ancak, Kullanıcı oturum açmamışsa, sepet `ID` benzersiz bir değer (bir GUID) olarak ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="c1628-198">However, if the user is not signed in, the cart `ID` is set to a unique value (a GUID).</span></span> <span data-ttu-id="c1628-199">Bir GUID, oturum temelinde her bir kullanıcı için yalnızca bir sepet oluşturulmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="c1628-199">A GUID ensures that only one cart is created for each user, based on session.</span></span>

<span data-ttu-id="c1628-200">`GetCartItems` yöntemi, Kullanıcı için alışveriş sepeti öğelerinin bir listesini döndürür.</span><span class="sxs-lookup"><span data-stu-id="c1628-200">The `GetCartItems` method returns a list of shopping cart items for the user.</span></span> <span data-ttu-id="c1628-201">Bu öğreticide daha sonra, `GetCartItems` yöntemi kullanılarak alışveriş sepetindeki sepet öğelerini görüntülemek için model bağlamanın kullanıldığını görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="c1628-201">Later in this tutorial, you will see that model binding is used to display the cart items in the shopping cart using the `GetCartItems` method.</span></span>

### <a name="creating-the-add-to-cart-functionality"></a><span data-ttu-id="c1628-202">Sepetin ekleme Işlevini oluşturma</span><span class="sxs-lookup"><span data-stu-id="c1628-202">Creating the Add-To-Cart Functionality</span></span>

<span data-ttu-id="c1628-203">Daha önce belirtildiği gibi, kullanıcının alışveriş sepetine yeni ürünler eklemek için kullanılacak *AddToCart. aspx* adlı bir işleme sayfası oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="c1628-203">As mentioned earlier, you will create a processing page named *AddToCart.aspx* that will be used to add new products to the shopping cart of the user.</span></span> <span data-ttu-id="c1628-204">Bu sayfa, yeni oluşturduğunuz `ShoppingCart` sınıfında `AddToCart` yöntemini çağırır.</span><span class="sxs-lookup"><span data-stu-id="c1628-204">This page will call the `AddToCart` method in the `ShoppingCart` class that you just created.</span></span> <span data-ttu-id="c1628-205">*AddToCart. aspx* sayfası bir ürün `ID` geçtiğini bekler.</span><span class="sxs-lookup"><span data-stu-id="c1628-205">The *AddToCart.aspx* page will expect that a product `ID` is passed to it.</span></span> <span data-ttu-id="c1628-206">Bu ürün `ID`, `ShoppingCart` sınıfında `AddToCart` yöntemi çağrılırken kullanılacaktır.</span><span class="sxs-lookup"><span data-stu-id="c1628-206">This product `ID` will be used when calling the `AddToCart` method in the `ShoppingCart` class.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="c1628-207">Sayfa Kullanıcı arabirimi (*AddToCart. aspx*) değil, Bu sayfa için arka plan kodunu (*AddToCart.aspx.cs*) değiştiriyorsunuz.</span><span class="sxs-lookup"><span data-stu-id="c1628-207">You will be modifying the code-behind (*AddToCart.aspx.cs*) for this page, not the page UI (*AddToCart.aspx*).</span></span>

#### <a name="to-create-the-add-to-cart-functionality"></a><span data-ttu-id="c1628-208">Add-cart işlevini oluşturmak için:</span><span class="sxs-lookup"><span data-stu-id="c1628-208">To create the Add-To-Cart functionality:</span></span>

1. <span data-ttu-id="c1628-209">**Çözüm Gezgini**, **wingtiptoys**projesine sağ tıklayın, **Yeni öğe**&gt; -**Ekle** ' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="c1628-209">In **Solution Explorer**, right-click the **WingtipToys**project, click **Add** -&gt; **New Item**.</span></span>  
   <span data-ttu-id="c1628-210">**Yeni Öğe Ekle** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-210">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="c1628-211">*AddToCart. aspx*adlı uygulamaya standart yeni bir sayfa (Web formu) ekleyin.</span><span class="sxs-lookup"><span data-stu-id="c1628-211">Add a standard new page (Web Form) to the application named *AddToCart.aspx*.</span></span> 

    ![Alışveriş sepeti-Web formu ekleme](shopping-cart/_static/image4.png)
3. <span data-ttu-id="c1628-213">**Çözüm Gezgini**, *AddToCart. aspx* sayfasına sağ tıklayıp **kodu görüntüle**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="c1628-213">In **Solution Explorer**, right-click the *AddToCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="c1628-214">*AddToCart.aspx.cs* arka plan kod dosyası düzenleyicide açılır.</span><span class="sxs-lookup"><span data-stu-id="c1628-214">The *AddToCart.aspx.cs* code-behind file is opened in the editor.</span></span>
4. <span data-ttu-id="c1628-215">*AddToCart.aspx.cs* kodundaki mevcut kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="c1628-215">Replace the existing code in the *AddToCart.aspx.cs* code-behind with the following:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample4.cs)]

<span data-ttu-id="c1628-216">*AddToCart. aspx* sayfası yüklendiğinde, ürün `ID` sorgu dizesinden alınır.</span><span class="sxs-lookup"><span data-stu-id="c1628-216">When the *AddToCart.aspx* page is loaded, the product `ID` is retrieved from the query string.</span></span> <span data-ttu-id="c1628-217">Ardından, alışveriş sepeti sınıfının bir örneği oluşturulur ve bu öğreticide daha önce eklediğiniz `AddToCart` yöntemini çağırmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="c1628-217">Next, an instance of the shopping cart class is created and used to call the `AddToCart` method that you added earlier in this tutorial.</span></span> <span data-ttu-id="c1628-218">*ShoppingCartActions.cs* dosyasında bulunan `AddToCart` yöntemi, seçili ürünü alışveriş sepetine ekleme veya seçili ürünün ürün miktarını artırma mantığını içerir.</span><span class="sxs-lookup"><span data-stu-id="c1628-218">The `AddToCart` method, contained in the *ShoppingCartActions.cs* file, includes the logic to add the selected product to the shopping cart or increment the product quantity of the selected product.</span></span> <span data-ttu-id="c1628-219">Ürün, alışveriş sepetine eklenmemişse, ürün veritabanının `CartItem` tablosuna eklenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-219">If the product hasn't been added to the shopping cart, the product is added to the `CartItem` table of the database.</span></span> <span data-ttu-id="c1628-220">Ürün, alışveriş sepetine zaten eklendiyse ve Kullanıcı aynı ürüne ek bir öğe eklerse, `CartItem` tablosunda ürün miktarı artırılır.</span><span class="sxs-lookup"><span data-stu-id="c1628-220">If the product has already been added to the shopping cart and the user adds an additional item of the same product, the product quantity is incremented in the `CartItem` table.</span></span> <span data-ttu-id="c1628-221">Son olarak, sayfa, kullanıcının sepetteki öğelerin güncelleştirilmiş bir listesini gördüğü bir sonraki adımda ekleyeceğiniz *ShoppingCart. aspx* sayfasına yeniden yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="c1628-221">Finally, the page redirects back to the *ShoppingCart.aspx* page that you'll add in the next step, where the user sees an updated list of items in the cart.</span></span>

<span data-ttu-id="c1628-222">Daha önce belirtildiği gibi, bir Kullanıcı `ID`, belirli bir kullanıcıyla ilişkili ürünleri belirlemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="c1628-222">As previously mentioned, a user `ID` is used to identify the products that are associated with a specific user.</span></span> <span data-ttu-id="c1628-223">Bu `ID`, Kullanıcı alışveriş sepetine her ürün eklediğinde `CartItem` tablosundaki bir satıra eklenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-223">This `ID` is added to a row in the `CartItem` table each time the user adds a product to the shopping cart.</span></span>

### <a name="creating-the-shopping-cart-ui"></a><span data-ttu-id="c1628-224">Alışveriş sepeti Kullanıcı arabirimi oluşturma</span><span class="sxs-lookup"><span data-stu-id="c1628-224">Creating the Shopping Cart UI</span></span>

<span data-ttu-id="c1628-225">*ShoppingCart. aspx* sayfası, kullanıcının kendi alışveriş sepetine eklediği ürünleri görüntüler.</span><span class="sxs-lookup"><span data-stu-id="c1628-225">The *ShoppingCart.aspx* page will display the products that the user has added to their shopping cart.</span></span> <span data-ttu-id="c1628-226">Ayrıca, alışveriş sepetindeki öğeleri ekleme, kaldırma ve güncelleştirme olanağı da sağlar.</span><span class="sxs-lookup"><span data-stu-id="c1628-226">It will also provide the ability to add, remove and update items in the shopping cart.</span></span>

1. <span data-ttu-id="c1628-227">**Çözüm Gezgini**, **wingtiptoys**' a sağ tıklayın, **Yeni öğe**&gt; -**Ekle** ' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="c1628-227">In **Solution Explorer**, right-click **WingtipToys**, click **Add** -&gt; **New Item**.</span></span>  
   <span data-ttu-id="c1628-228">**Yeni Öğe Ekle** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-228">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="c1628-229">Ana sayfa **kullanarak Web formu**' nu seçerek ana sayfa içeren yeni bir sayfa (Web formu) ekleyin.</span><span class="sxs-lookup"><span data-stu-id="c1628-229">Add a new page (Web Form) that includes a master page by selecting **Web Form using Master Page**.</span></span> <span data-ttu-id="c1628-230">Yeni sayfayı *ShoppingCart. aspx*olarak adlandırın.</span><span class="sxs-lookup"><span data-stu-id="c1628-230">Name the new page *ShoppingCart.aspx*.</span></span>
3. <span data-ttu-id="c1628-231">Ana sayfayı yeni oluşturulan *. aspx* sayfasına eklemek için **site. Master** ' u seçin.</span><span class="sxs-lookup"><span data-stu-id="c1628-231">Select **Site.Master** to attach the master page to the newly created *.aspx* page.</span></span>
4. <span data-ttu-id="c1628-232">*ShoppingCart. aspx* sayfasında, varolan biçimlendirmeyi aşağıdaki biçimlendirme ile değiştirin:</span><span class="sxs-lookup"><span data-stu-id="c1628-232">In the *ShoppingCart.aspx* page, replace the existing markup with the following markup:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample5.aspx)]

<span data-ttu-id="c1628-233">*ShoppingCart. aspx* sayfası, `CartList`adlı bir **GridView** denetimi içerir.</span><span class="sxs-lookup"><span data-stu-id="c1628-233">The *ShoppingCart.aspx* page includes a **GridView** control named `CartList`.</span></span> <span data-ttu-id="c1628-234">Bu denetim, alışveriş sepeti verilerini veritabanından **GridView** denetimine bağlamak için model bağlamayı kullanır.</span><span class="sxs-lookup"><span data-stu-id="c1628-234">This control uses model binding to bind the shopping cart data from the database to the **GridView** control.</span></span> <span data-ttu-id="c1628-235">**GridView** denetiminin `ItemType` özelliğini ayarladığınızda, `Item` veri bağlama ifadesi denetimin biçimlendirmesinde kullanılabilir ve denetim kesin bir şekilde türdedir.</span><span class="sxs-lookup"><span data-stu-id="c1628-235">When you set the `ItemType` property of the **GridView** control, the data-binding expression `Item` is available in the markup of the control and the control becomes strongly typed.</span></span> <span data-ttu-id="c1628-236">Bu öğretici serisinde daha önce bahsedildiği gibi, IntelliSense kullanarak `Item` nesnesinin ayrıntılarını seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-236">As mentioned earlier in this tutorial series, you can select details of the `Item` object using IntelliSense.</span></span> <span data-ttu-id="c1628-237">Veri seçmek üzere model bağlamayı kullanmak üzere bir veri denetimi yapılandırmak için denetimin `SelectMethod` özelliğini ayarlarsınız.</span><span class="sxs-lookup"><span data-stu-id="c1628-237">To configure a data control to use model binding to select data, you set the `SelectMethod` property of the control.</span></span> <span data-ttu-id="c1628-238">Yukarıdaki biçimlendirmede `SelectMethod`, bir `CartItem` nesnelerinin listesini döndüren Getshoppingcartıtems metodunu kullanacak şekilde ayarlarsınız.</span><span class="sxs-lookup"><span data-stu-id="c1628-238">In the markup above, you set the `SelectMethod` to use the GetShoppingCartItems method which returns a list of `CartItem` objects.</span></span> <span data-ttu-id="c1628-239">**GridView** veri denetimi, yöntemi sayfa yaşam döngüsünde uygun zamanda çağırır ve döndürülen verileri otomatik olarak bağlar.</span><span class="sxs-lookup"><span data-stu-id="c1628-239">The **GridView** data control calls the method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="c1628-240">`GetShoppingCartItems` yöntemi yine de eklenmelidir.</span><span class="sxs-lookup"><span data-stu-id="c1628-240">The `GetShoppingCartItems` method must still be added.</span></span>

#### <a name="retrieving-the-shopping-cart-items"></a><span data-ttu-id="c1628-241">Alışveriş sepeti öğelerini alma</span><span class="sxs-lookup"><span data-stu-id="c1628-241">Retrieving the Shopping Cart Items</span></span>

<span data-ttu-id="c1628-242">Ardından, alışveriş sepeti Kullanıcı arabirimini almak ve doldurmak için *ShoppingCart.aspx.cs* arka planda kod eklersiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-242">Next, you add code to the *ShoppingCart.aspx.cs* code-behind to retrieve and populate the Shopping Cart UI.</span></span>

1. <span data-ttu-id="c1628-243">**Çözüm Gezgini**, *ShoppingCart. aspx* sayfasına sağ tıklayın ve sonra **kodu görüntüle**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="c1628-243">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="c1628-244">*ShoppingCart.aspx.cs* arka plan kod dosyası düzenleyicide açılır.</span><span class="sxs-lookup"><span data-stu-id="c1628-244">The *ShoppingCart.aspx.cs* code-behind file is opened in the editor.</span></span>
2. <span data-ttu-id="c1628-245">Mevcut kodu şu kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="c1628-245">Replace the existing code with the following:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample6.cs)]

<span data-ttu-id="c1628-246">Yukarıda belirtildiği gibi, `GridView` Data Control, `GetShoppingCartItems` yöntemini sayfa yaşam döngüsünde uygun zamanda çağırır ve döndürülen verileri otomatik olarak bağlar.</span><span class="sxs-lookup"><span data-stu-id="c1628-246">As mentioned above, the `GridView` data control calls the `GetShoppingCartItems` method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="c1628-247">`GetShoppingCartItems` yöntemi `ShoppingCartActions` nesnesinin bir örneğini oluşturur.</span><span class="sxs-lookup"><span data-stu-id="c1628-247">The `GetShoppingCartItems` method creates an instance of the `ShoppingCartActions` object.</span></span> <span data-ttu-id="c1628-248">Daha sonra kod, `GetCartItems` yöntemini çağırarak sepetteki öğeleri döndürmek için bu örneği kullanır.</span><span class="sxs-lookup"><span data-stu-id="c1628-248">Then, the code uses that instance to return the items in the cart by calling the `GetCartItems` method.</span></span>

### <a name="adding-products-to-the-shopping-cart"></a><span data-ttu-id="c1628-249">Alışveriş sepetine ürün ekleme</span><span class="sxs-lookup"><span data-stu-id="c1628-249">Adding Products to the Shopping Cart</span></span>

<span data-ttu-id="c1628-250">*ProductList. aspx* veya *ProductDetails. aspx* sayfası görüntülendiğinde, Kullanıcı bir bağlantı kullanarak ürünü alışveriş sepetine ekleyebilecektir.</span><span class="sxs-lookup"><span data-stu-id="c1628-250">When either the *ProductList.aspx* or the *ProductDetails.aspx* page is displayed, the user will be able to add the product to the shopping cart using a link.</span></span> <span data-ttu-id="c1628-251">Bağlantıyı tıkladıklarında, uygulama *AddToCart. aspx*adlı işleme sayfasına gider.</span><span class="sxs-lookup"><span data-stu-id="c1628-251">When they click the link, the application navigates to the processing page named *AddToCart.aspx*.</span></span> <span data-ttu-id="c1628-252">*AddToCart. aspx* sayfası, bu öğreticide daha önce eklediğiniz `ShoppingCart` sınıfında `AddToCart` yöntemini çağırır.</span><span class="sxs-lookup"><span data-stu-id="c1628-252">The *AddToCart.aspx* page will call the `AddToCart` method in the `ShoppingCart` class that you added earlier in this tutorial.</span></span>

<span data-ttu-id="c1628-253">Şimdi, *ProductList. aspx* sayfasına ve *ProductDetails. aspx* sayfasına bir **sepet Ekle** bağlantısı ekleyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-253">Now, you'll add an **Add to Cart** link to both the *ProductList.aspx* page and the *ProductDetails.aspx* page.</span></span> <span data-ttu-id="c1628-254">Bu bağlantı, veritabanından alınan ürün `ID` içerecektir.</span><span class="sxs-lookup"><span data-stu-id="c1628-254">This link will include the product `ID` that is retrieved from the database.</span></span>

1. <span data-ttu-id="c1628-255">**Çözüm Gezgini**, *ProductList. aspx*adlı sayfayı bulup açın.</span><span class="sxs-lookup"><span data-stu-id="c1628-255">In **Solution Explorer**, find and open the page named *ProductList.aspx*.</span></span>
2. <span data-ttu-id="c1628-256">Tüm sayfanın aşağıdaki gibi görünmesi için, sarıya vurgulanan biçimlendirmeyi *ProductList. aspx* sayfasına ekleyin:</span><span class="sxs-lookup"><span data-stu-id="c1628-256">Add the markup highlighted in yellow to the *ProductList.aspx* page so that the entire page appears as follows:</span></span>  

    [!code-aspx[Main](shopping-cart/samples/sample7.aspx?highlight=50-54)]

### <a name="testing-the-shopping-cart"></a><span data-ttu-id="c1628-257">Alışveriş sepetini test etme</span><span class="sxs-lookup"><span data-stu-id="c1628-257">Testing the Shopping Cart</span></span>

<span data-ttu-id="c1628-258">Satın alma sepetini ürün eklemeyi öğrenmek için uygulamayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="c1628-258">Run the application to see how you add products to the shopping cart.</span></span>

1. <span data-ttu-id="c1628-259">Uygulamayı çalıştırmak için **F5**'e basın.</span><span class="sxs-lookup"><span data-stu-id="c1628-259">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="c1628-260">Proje veritabanını yeniden oluşturduktan sonra, tarayıcı açılır ve *varsayılan. aspx* sayfasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="c1628-260">After the project recreates the database, the browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="c1628-261">Kategori gezinti menüsünde **otomobiller** ' i seçin.</span><span class="sxs-lookup"><span data-stu-id="c1628-261">Select **Cars** from the category navigation menu.</span></span>  
 <span data-ttu-id="c1628-262">*ProductList. aspx* sayfası yalnızca "otomobiller" kategorisinde bulunan ürünlerin gösterildiği görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-262">The *ProductList.aspx* page is displayed showing only products included in the "Cars" category.</span></span> 

    ![Alışveriş sepeti-otomobiller](shopping-cart/_static/image5.png)
3. <span data-ttu-id="c1628-264">Listelenen ilk ürünün yanındaki **sepet Ekle** bağlantısına tıklayın (dönüştürülebilir otomobil).</span><span class="sxs-lookup"><span data-stu-id="c1628-264">Click the **Add to Cart** link next to the first product listed (the convertible car).</span></span>   
 <span data-ttu-id="c1628-265">Alışveriş sepetinizdeki seçimi gösteren *ShoppingCart. aspx* sayfası görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-265">The *ShoppingCart.aspx* page is displayed, showing the selection in your shopping cart.</span></span> 

    ![Alışveriş sepeti-sepet](shopping-cart/_static/image6.png)
4. <span data-ttu-id="c1628-267">Kategori gezinti menüsünden **düzlemler** ' i seçerek ek ürünleri görüntüleyin.</span><span class="sxs-lookup"><span data-stu-id="c1628-267">View additional products by selecting **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="c1628-268">Listelenen ilk ürünün yanındaki **sepet Ekle** bağlantısına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="c1628-268">Click the **Add to Cart** link next to the first product listed.</span></span>  
 <span data-ttu-id="c1628-269">*ShoppingCart. aspx* sayfası ek öğeyle birlikte görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-269">The *ShoppingCart.aspx* page is displayed with the additional item.</span></span>
6. <span data-ttu-id="c1628-270">Tarayıcıyı kapatın.</span><span class="sxs-lookup"><span data-stu-id="c1628-270">Close the browser.</span></span>

### <a name="calculating-and-displaying-the-order-total"></a><span data-ttu-id="c1628-271">Sipariş toplamını hesaplama ve görüntüleme</span><span class="sxs-lookup"><span data-stu-id="c1628-271">Calculating and Displaying the Order Total</span></span>

<span data-ttu-id="c1628-272">Alışveriş sepetine ürün eklemeye ek olarak, `ShoppingCart` sınıfına bir `GetTotal` yöntemi ekleyecek ve alışveriş sepeti sayfasında toplam sipariş miktarını görüntüleyecek olursunuz.</span><span class="sxs-lookup"><span data-stu-id="c1628-272">In addition to adding products to the shopping cart, you will add a `GetTotal` method to the `ShoppingCart` class and display the total order amount in the shopping cart page.</span></span>

1. <span data-ttu-id="c1628-273">**Çözüm Gezgini**' de, *ShoppingCartActions.cs* dosyasını *Logic* klasöründe açın.</span><span class="sxs-lookup"><span data-stu-id="c1628-273">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="c1628-274">Aşağıdaki `GetTotal` yöntemini sarı olarak vurgulanmış şekilde `ShoppingCart` sınıfına ekleyin:</span><span class="sxs-lookup"><span data-stu-id="c1628-274">Add the following `GetTotal` method highlighted in yellow to the `ShoppingCart` class, so that the class appears as follows:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample8.cs?highlight=85-97)]

<span data-ttu-id="c1628-275">İlk olarak, `GetTotal` yöntemi kullanıcı için alışveriş sepetinin KIMLIĞINI alır.</span><span class="sxs-lookup"><span data-stu-id="c1628-275">First, the `GetTotal` method gets the ID of the shopping cart for the user.</span></span> <span data-ttu-id="c1628-276">Daha sonra yöntemi, sepette listelenen her ürün için ürün fiyatını ürün miktarına göre çarparak sepet toplamı alır.</span><span class="sxs-lookup"><span data-stu-id="c1628-276">Then the method gets the cart total by multiplying the product price by the product quantity for each product listed in the cart.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="c1628-277">Yukarıdaki kod null yapılabilir "`int?`" türünü kullanır.</span><span class="sxs-lookup"><span data-stu-id="c1628-277">The above code uses the nullable type "`int?`".</span></span> <span data-ttu-id="c1628-278">Null yapılabilir türler, temel alınan bir türün tüm değerlerini ve aynı zamanda null değer olarak temsil edebilir.</span><span class="sxs-lookup"><span data-stu-id="c1628-278">Nullable types can represent all the values of an underlying type, and also as a null value.</span></span> <span data-ttu-id="c1628-279">Daha fazla bilgi için bkz. [Nullable türler kullanma](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="c1628-279">For more information see, [Using Nullable Types](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span></span>

### <a name="modify-the-shopping-cart-display"></a><span data-ttu-id="c1628-280">Alışveriş sepeti görüntüsünü değiştirme</span><span class="sxs-lookup"><span data-stu-id="c1628-280">Modify the Shopping Cart Display</span></span>

<span data-ttu-id="c1628-281">Daha sonra, `GetTotal` yöntemini çağırmak üzere *ShoppingCart. aspx* sayfasının kodunu değiştireceksiniz ve sayfa yüklendiğinde bu toplamı *ShoppingCart. aspx* sayfasında görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-281">Next you'll modify the code for the *ShoppingCart.aspx* page to call the `GetTotal` method and display that total on the *ShoppingCart.aspx* page when the page loads.</span></span>

1. <span data-ttu-id="c1628-282">**Çözüm Gezgini**, *ShoppingCart. aspx* sayfasına sağ tıklayın ve **kodu görüntüle**' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="c1628-282">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and select **View Code**.</span></span>
2. <span data-ttu-id="c1628-283">*ShoppingCart.aspx.cs* dosyasında, aşağıdaki kodu sarı renkle ekleyerek `Page_Load` işleyicisini güncelleştirin:</span><span class="sxs-lookup"><span data-stu-id="c1628-283">In the *ShoppingCart.aspx.cs* file, update the `Page_Load` handler by adding the following code highlighted in yellow:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample9.cs?highlight=16-31)]

<span data-ttu-id="c1628-284">*ShoppingCart. aspx* sayfası yüklendiğinde, alışveriş sepeti nesnesini yükler ve ardından `ShoppingCart` sınıfının `GetTotal` yöntemini çağırarak alışveriş sepeti toplamı alınır.</span><span class="sxs-lookup"><span data-stu-id="c1628-284">When the *ShoppingCart.aspx* page loads, it loads the shopping cart object and then retrieves the shopping cart total by calling the `GetTotal` method of the `ShoppingCart` class.</span></span> <span data-ttu-id="c1628-285">Alışveriş sepeti boşsa, bu etkiye yönelik bir ileti görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-285">If the shopping cart is empty, a message to that effect is displayed.</span></span>

### <a name="testing-the-shopping-cart-total"></a><span data-ttu-id="c1628-286">Alışveriş sepetini toplam test etme</span><span class="sxs-lookup"><span data-stu-id="c1628-286">Testing the Shopping Cart Total</span></span>

<span data-ttu-id="c1628-287">Yalnızca bir ürünü alışveriş sepetine nasıl ekleyekullanabileceğinizi görmek için uygulamayı şimdi çalıştırın, ancak alışveriş sepetini toplam ' u görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-287">Run the application now to see how you can not only add a product to the shopping cart, but you can see the shopping cart total.</span></span>

1. <span data-ttu-id="c1628-288">Uygulamayı çalıştırmak için **F5**'e basın.</span><span class="sxs-lookup"><span data-stu-id="c1628-288">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="c1628-289">Tarayıcı açılır ve *default. aspx* sayfasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="c1628-289">The browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="c1628-290">Kategori gezinti menüsünde **otomobiller** ' i seçin.</span><span class="sxs-lookup"><span data-stu-id="c1628-290">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="c1628-291">İlk ürünün yanındaki **sepet Ekle** bağlantısına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="c1628-291">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="c1628-292">*ShoppingCart. aspx* sayfası, sipariş toplamla birlikte görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-292">The *ShoppingCart.aspx* page is displayed with the order total.</span></span> 

    ![Alışveriş sepeti-sepet toplamı](shopping-cart/_static/image7.png)
4. <span data-ttu-id="c1628-294">Sepetin bazı ürünlerini (örneğin, bir düzlemi) ekleyin.</span><span class="sxs-lookup"><span data-stu-id="c1628-294">Add some other products (for example, a plane) to the cart.</span></span>
5. <span data-ttu-id="c1628-295">*ShoppingCart. aspx* sayfası, eklediğiniz tüm ürünlerin güncelleştirilmiş toplamı ile görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-295">The *ShoppingCart.aspx* page is displayed with an updated total for all the products you've added.</span></span> 

    ![Alışveriş sepeti-birden çok ürün](shopping-cart/_static/image8.png)
6. <span data-ttu-id="c1628-297">Tarayıcı penceresini kapatarak çalışan uygulamayı durdurun.</span><span class="sxs-lookup"><span data-stu-id="c1628-297">Stop the running app by closing the browser window.</span></span>

### <a name="adding-update-and-checkout-buttons-to-the-shopping-cart"></a><span data-ttu-id="c1628-298">Alışveriş sepetine güncelleştirme ve kullanıma alma düğmeleri ekleme</span><span class="sxs-lookup"><span data-stu-id="c1628-298">Adding Update and Checkout Buttons to the Shopping Cart</span></span>

<span data-ttu-id="c1628-299">Kullanıcıların alışveriş sepetini değiştirmesine izin vermek için, alışveriş sepeti sayfasına bir **güncelleştirme** düğmesi ve bir **kullanıma alma** düğmesi ekleyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-299">To allow the users to modify the shopping cart, you'll add an **Update** button and a **Checkout** button to the shopping cart page.</span></span> <span data-ttu-id="c1628-300">Bu öğretici serisinde daha sonra **kullanıma alma** düğmesi kullanılmaz.</span><span class="sxs-lookup"><span data-stu-id="c1628-300">The **Checkout** button is not used until later in this tutorial series.</span></span>

1. <span data-ttu-id="c1628-301">**Çözüm Gezgini**' de, Web uygulaması projesinin kökündeki *ShoppingCart. aspx* sayfasını açın.</span><span class="sxs-lookup"><span data-stu-id="c1628-301">In **Solution Explorer**, open the *ShoppingCart.aspx* page in the root of the web application project.</span></span>
2. <span data-ttu-id="c1628-302">**Güncelleştirme** düğmesini ve **kullanıma al** düğmesini *ShoppingCart. aspx* sayfasına eklemek için, aşağıdaki kodda gösterildiği gibi, sarı renkle vurgulanmış biçimlendirmeyi varolan biçimlendirmeye ekleyin:</span><span class="sxs-lookup"><span data-stu-id="c1628-302">To add the **Update** button and the **Checkout** button to the *ShoppingCart.aspx* page, add the markup highlighted in yellow to the existing markup, as shown in the following code:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample10.aspx?highlight=36-45)]

<span data-ttu-id="c1628-303">Kullanıcı **Update** düğmesine tıkladığında `UpdateBtn_Click` olay işleyicisi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="c1628-303">When the user clicks the **Update** button, the `UpdateBtn_Click` event handler will be called.</span></span> <span data-ttu-id="c1628-304">Bu olay işleyicisi, bir sonraki adımda ekleyeceğiniz kodu çağırır.</span><span class="sxs-lookup"><span data-stu-id="c1628-304">This event handler will call the code that you'll add in the next step.</span></span>

<span data-ttu-id="c1628-305">Daha sonra, *ShoppingCart.aspx.cs* dosyasında yer alan kodu, sepet öğeleri aracılığıyla döngü yapmak ve `RemoveItem` ve `UpdateItem` yöntemlerini çağırmak için güncelleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-305">Next, you can update the code contained in the *ShoppingCart.aspx.cs* file to loop through the cart items and call the `RemoveItem` and `UpdateItem` methods.</span></span>

1. <span data-ttu-id="c1628-306">**Çözüm Gezgini**, Web uygulaması projesinin kökündeki *ShoppingCart.aspx.cs* dosyasını açın.</span><span class="sxs-lookup"><span data-stu-id="c1628-306">In **Solution Explorer**, open the *ShoppingCart.aspx.cs* file in the root of the web application project.</span></span>
2. <span data-ttu-id="c1628-307">Sarı ' de vurgulanan aşağıdaki kod bölümlerini *ShoppingCart.aspx.cs* dosyasına ekleyin:</span><span class="sxs-lookup"><span data-stu-id="c1628-307">Add the following code sections highlighted in yellow to the *ShoppingCart.aspx.cs* file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample11.cs?highlight=9-11,33,44-89)]

<span data-ttu-id="c1628-308">Kullanıcı, *ShoppingCart. aspx* sayfasındaki **Güncelleştir** düğmesine tıkladığında updatecartıtems yöntemi çağırılır.</span><span class="sxs-lookup"><span data-stu-id="c1628-308">When the user clicks the **Update** button on the *ShoppingCart.aspx* page, the UpdateCartItems method is called.</span></span> <span data-ttu-id="c1628-309">Updatecartıtems yöntemi, alışveriş sepetindeki her öğe için güncelleştirilmiş değerleri alır.</span><span class="sxs-lookup"><span data-stu-id="c1628-309">The UpdateCartItems method gets the updated values for each item in the shopping cart.</span></span> <span data-ttu-id="c1628-310">Ardından, Updatecartıtems yöntemi, alışveriş sepetinden öğe eklemek veya kaldırmak için `UpdateShoppingCartDatabase` yöntemini (sonraki adımda eklenen ve açıklanacak) çağırır.</span><span class="sxs-lookup"><span data-stu-id="c1628-310">Then, the UpdateCartItems method calls the `UpdateShoppingCartDatabase` method (added and explained in the next step) to either add or remove items from the shopping cart.</span></span> <span data-ttu-id="c1628-311">Veritabanı, alışveriş sepetindeki güncelleştirmeleri yansıtacak şekilde güncelleştirildikten sonra **, GridView için**`DataBind` yöntemi çağırarak, alışveriş sepeti sayfasında **GridView** denetimi güncellenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-311">Once the database has been updated to reflect the updates to the shopping cart, the **GridView** control is updated on the shopping cart page by calling the `DataBind` method for the **GridView**.</span></span> <span data-ttu-id="c1628-312">Ayrıca, alışveriş sepeti sayfasındaki toplam sipariş miktarı, güncelleştirilmiş öğe listesini yansıtacak şekilde güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="c1628-312">Also, the total order amount on the shopping cart page is updated to reflect the updated list of items.</span></span>

### <a name="updating-and-removing-shopping-cart-items"></a><span data-ttu-id="c1628-313">Alışveriş sepeti öğelerini güncelleştirme ve kaldırma</span><span class="sxs-lookup"><span data-stu-id="c1628-313">Updating and Removing Shopping Cart Items</span></span>

<span data-ttu-id="c1628-314">*ShoppingCart. aspx* sayfasında, bir öğenin miktarını güncelleştirmek ve bir öğeyi kaldırmak için denetimlerin eklendiğini görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-314">On the *ShoppingCart.aspx* page, you can see controls have been added for updating the quantity of an item and removing an item.</span></span> <span data-ttu-id="c1628-315">Şimdi bu denetimlerin çalışmasını sağlayacak kodu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="c1628-315">Now, add the code that will make these controls work.</span></span>

1. <span data-ttu-id="c1628-316">**Çözüm Gezgini**' de, *ShoppingCartActions.cs* dosyasını *Logic* klasöründe açın.</span><span class="sxs-lookup"><span data-stu-id="c1628-316">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="c1628-317">Sarı ' de vurgulanan aşağıdaki kodu *ShoppingCartActions.cs* sınıf dosyasına ekleyin:</span><span class="sxs-lookup"><span data-stu-id="c1628-317">Add the following code highlighted in yellow to the *ShoppingCartActions.cs* class file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample12.cs?highlight=99-213)]

<span data-ttu-id="c1628-318">*ShoppingCart.aspx.cs* sayfasındaki `UpdateCartItems` yönteminden çağrılan `UpdateShoppingCartDatabase` yöntemi, alışveriş sepetinden öğe güncelleştirme ya da kaldırma mantığını içerir.</span><span class="sxs-lookup"><span data-stu-id="c1628-318">The `UpdateShoppingCartDatabase` method, called from the `UpdateCartItems` method on the *ShoppingCart.aspx.cs* page, contains the logic to either update or remove items from the shopping cart.</span></span> <span data-ttu-id="c1628-319">`UpdateShoppingCartDatabase` yöntemi, alışveriş sepeti listesinin içindeki tüm satırlarda yinelenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-319">The `UpdateShoppingCartDatabase` method iterates through all the rows within the shopping cart list.</span></span> <span data-ttu-id="c1628-320">Bir alışveriş sepeti öğesi kaldırılmak üzere işaretlenmişse veya miktar bir değerden küçükse `RemoveItem` yöntemi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="c1628-320">If a shopping cart item has been marked to be removed, or the quantity is less than one, the `RemoveItem` method is called.</span></span> <span data-ttu-id="c1628-321">Aksi halde, `UpdateItem` yöntemi çağrıldığında, alışveriş sepeti öğesi güncelleştirmeler için denetlenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-321">Otherwise, the shopping cart item is checked for updates when the `UpdateItem` method is called.</span></span> <span data-ttu-id="c1628-322">Alışveriş sepeti öğesi kaldırıldıktan veya güncelleştirildikten sonra, veritabanı değişiklikleri kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="c1628-322">After the shopping cart item has been removed or updated, the database changes are saved.</span></span>

<span data-ttu-id="c1628-323">`ShoppingCartUpdates` yapısı, tüm alışveriş sepeti öğelerini tutmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="c1628-323">The `ShoppingCartUpdates` structure is used to hold all the shopping cart items.</span></span> <span data-ttu-id="c1628-324">`UpdateShoppingCartDatabase` yöntemi, herhangi bir öğenin güncelleştirilmesini veya kaldırılmasını öğrenmek için `ShoppingCartUpdates` yapısını kullanır.</span><span class="sxs-lookup"><span data-stu-id="c1628-324">The `UpdateShoppingCartDatabase` method uses the `ShoppingCartUpdates` structure to determine if any of the items need to be updated or removed.</span></span>

<span data-ttu-id="c1628-325">Sonraki öğreticide, ürünleri satın aldıktan sonra alışveriş sepetini temizlemek için `EmptyCart` yöntemini kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="c1628-325">In the next tutorial, you will use the `EmptyCart` method to clear the shopping cart after purchasing products.</span></span> <span data-ttu-id="c1628-326">Ancak şimdilik, alışveriş sepetindeki öğelerin sayısını öğrenmek için *ShoppingCartActions.cs* dosyasına eklediğiniz `GetCount` yöntemini kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="c1628-326">But for now, you will use the `GetCount` method that you just added to the *ShoppingCartActions.cs* file to determine how many items are in the shopping cart.</span></span>

### <a name="adding-a-shopping-cart-counter"></a><span data-ttu-id="c1628-327">Alışveriş sepeti sayacı ekleme</span><span class="sxs-lookup"><span data-stu-id="c1628-327">Adding a Shopping Cart Counter</span></span>

<span data-ttu-id="c1628-328">Kullanıcının alışveriş sepetindeki toplam öğe sayısını görüntülemesine izin vermek için, *site. Master* sayfasına bir sayaç ekleyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-328">To allow the user to view the total number of items in the shopping cart, you will add a counter to the *Site.Master* page.</span></span> <span data-ttu-id="c1628-329">Bu sayaç, alışveriş sepetine bir bağlantı görevi görür.</span><span class="sxs-lookup"><span data-stu-id="c1628-329">This counter will also act as a link to the shopping cart.</span></span>

1. <span data-ttu-id="c1628-330">**Çözüm Gezgini**, *site. Master* sayfasını açın.</span><span class="sxs-lookup"><span data-stu-id="c1628-330">In **Solution Explorer**, open the *Site.Master* page.</span></span>
2. <span data-ttu-id="c1628-331">Aşağıdaki gibi görünmesi için, kılavuz ' de gösterildiği gibi alışveriş sepeti sayacı bağlantısını, gezinti bölümüne ekleyerek biçimlendirmeyi değiştirin:</span><span class="sxs-lookup"><span data-stu-id="c1628-331">Modify the markup by adding the shopping cart counter link as shown in yellow to the navigation section so it appears as follows:</span></span>  

    [!code-html[Main](shopping-cart/samples/sample13.html?highlight=6)]
3. <span data-ttu-id="c1628-332">Daha sonra, *site.Master.cs* dosyasının arka plan kodunu, sarıya vurgulanmış kodu aşağıdaki gibi ekleyerek güncelleştirin:</span><span class="sxs-lookup"><span data-stu-id="c1628-332">Next, update the code-behind of the *Site.Master.cs* file by adding the code highlighted in yellow as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample14.cs?highlight=11,77-84)]

<span data-ttu-id="c1628-333">Sayfa HTML olarak işlenmeden önce `Page_PreRender` olayı tetiklenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-333">Before the page is rendered as HTML, the `Page_PreRender` event is raised.</span></span> <span data-ttu-id="c1628-334">`Page_PreRender` işleyicisinde, alışveriş sepetinin toplam sayısı `GetCount` yöntemi çağırarak belirlenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-334">In the `Page_PreRender` handler, the total count of the shopping cart is determined by calling the `GetCount` method.</span></span> <span data-ttu-id="c1628-335">Döndürülen değer, *site. Master* sayfasının biçimlendirmesine dahil edilen `cartCount` aralığına eklenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-335">The returned value is added to the `cartCount` span included in the markup of the *Site.Master* page.</span></span> <span data-ttu-id="c1628-336">`<span>` Etiketler, iç öğelerin düzgün şekilde işlenmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="c1628-336">The `<span>` tags enables the inner elements to be properly rendered.</span></span> <span data-ttu-id="c1628-337">Sitenin herhangi bir sayfası görüntülendiğinde, alışveriş sepeti toplamı görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-337">When any page of the site is displayed, the shopping cart total will be displayed.</span></span> <span data-ttu-id="c1628-338">Kullanıcı alışveriş sepetini göstermek için satın alma sepet toplamı ' na de tıklayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-338">The user can also click the shopping cart total to display the shopping cart.</span></span>

## <a name="testing-the-completed-shopping-cart"></a><span data-ttu-id="c1628-339">Tamamlanmış alışveriş sepetini test etme</span><span class="sxs-lookup"><span data-stu-id="c1628-339">Testing the Completed Shopping Cart</span></span>

<span data-ttu-id="c1628-340">Alışveriş sepetindeki öğeleri nasıl ekleyebileceğiniz, silebildiğini ve güncelleştirecağınızı görmek için uygulamayı şimdi çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-340">You can run the application now to see how you can add, delete, and update items in the shopping cart.</span></span> <span data-ttu-id="c1628-341">Alışveriş sepeti toplamı, alışveriş sepetindeki tüm öğelerin toplam maliyetini yansıtır.</span><span class="sxs-lookup"><span data-stu-id="c1628-341">The shopping cart total will reflect the total cost of all items in the shopping cart.</span></span>

1. <span data-ttu-id="c1628-342">Uygulamayı çalıştırmak için **F5**'e basın.</span><span class="sxs-lookup"><span data-stu-id="c1628-342">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="c1628-343">Tarayıcı açılır ve *default. aspx* sayfasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="c1628-343">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="c1628-344">Kategori gezinti menüsünde **otomobiller** ' i seçin.</span><span class="sxs-lookup"><span data-stu-id="c1628-344">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="c1628-345">İlk ürünün yanındaki **sepet Ekle** bağlantısına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="c1628-345">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="c1628-346">*ShoppingCart. aspx* sayfası, sipariş toplamla birlikte görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="c1628-346">The *ShoppingCart.aspx* page is displayed with the order total.</span></span>
4. <span data-ttu-id="c1628-347">Kategori gezinti menüsünden **düzlemler** ' i seçin.</span><span class="sxs-lookup"><span data-stu-id="c1628-347">Select **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="c1628-348">İlk ürünün yanındaki **sepet Ekle** bağlantısına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="c1628-348">Click the **Add To Cart** link next to the first product.</span></span>
6. <span data-ttu-id="c1628-349">Alışveriş sepetindeki ilk öğenin miktarını 3 ' e ayarlayın ve ikinci öğenin **öğesini kaldır** onay kutusunu seçin.<a id="a"></a></span><span class="sxs-lookup"><span data-stu-id="c1628-349">Set the quantity of the first item in the shopping cart to 3 and select the **Remove Item** check box of the second item.<a id="a"></a></span></span>
7. <span data-ttu-id="c1628-350">Alışveriş sepeti sayfasını güncelleştirmek ve yeni sipariş toplamını göstermek için **Güncelleştir** düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="c1628-350">Click the **Update** button to update the shopping cart page and display the new order total.</span></span> 

    ![Alışveriş sepeti-sepet güncelleştirmesi](shopping-cart/_static/image9.png)

## <a name="summary"></a><span data-ttu-id="c1628-352">Özet</span><span class="sxs-lookup"><span data-stu-id="c1628-352">Summary</span></span>

<span data-ttu-id="c1628-353">Bu öğreticide, Wingtip Toys Web Forms örnek uygulaması için bir alışveriş sepeti oluşturdunuz.</span><span class="sxs-lookup"><span data-stu-id="c1628-353">In this tutorial, you have created a shopping cart for the Wingtip Toys Web Forms sample application.</span></span> <span data-ttu-id="c1628-354">Bu öğreticide, Entity Framework Code First, veri ek açıklamaları, türü kesin belirlenmiş veri denetimleri ve model bağlamayı kullandınız.</span><span class="sxs-lookup"><span data-stu-id="c1628-354">During this tutorial you have used Entity Framework Code First, data annotations, strongly typed data controls, and model binding.</span></span>

<span data-ttu-id="c1628-355">Alışveriş sepeti, kullanıcının satın alma için seçtiği öğelerin eklenmesini, silinmesini ve güncelleştirilmesini destekler.</span><span class="sxs-lookup"><span data-stu-id="c1628-355">The shopping cart supports adding, deleting, and updating items that the user has selected for purchase.</span></span> <span data-ttu-id="c1628-356">Alışveriş sepeti işlevinin uygulanmasının yanı sıra, bir **GridView** denetimindeki alışveriş sepeti öğelerini görüntülemeyi ve sipariş toplamını hesaplamayı öğrenmiş olursunuz.</span><span class="sxs-lookup"><span data-stu-id="c1628-356">In addition to implementing the shopping cart functionality, you have learned how to display shopping cart items in a **GridView** control and calculate the order total.</span></span>

<span data-ttu-id="c1628-357">Açıklanan işlevselliğin gerçek bir iş uygulamasında nasıl çalıştığını anlamak için, [nopCommerce](https://github.com/nopSolutions/nopCommerce) -ASP.NET tabanlı açık kaynaklı eCommerce alışveriş sepetinin örneğini görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="c1628-357">In order to understand how the described functionality works in a real business application, you can view the example of [nopCommerce](https://github.com/nopSolutions/nopCommerce) - ASP.NET based open source eCommerce shopping cart.</span></span> <span data-ttu-id="c1628-358">İlk olarak, Web Forms oluşturulmuştur ve bu yıllar üzerinde, MVC 'ye taşındığını ve şimdi ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="c1628-358">Originally, it was built on Web Forms and over the years it moved to MVC and now to ASP.NET Core.</span></span>

## <a name="addition-information"></a><span data-ttu-id="c1628-359">Ek bilgi</span><span class="sxs-lookup"><span data-stu-id="c1628-359">Addition Information</span></span>

[<span data-ttu-id="c1628-360">ASP.NET Oturum Durumuna Genel Bakış</span><span class="sxs-lookup"><span data-stu-id="c1628-360">ASP.NET Session State Overview</span></span>](https://msdn.microsoft.com/library/ms178581.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="c1628-361">[Önceki](display_data_items_and_details.md)
> [İleri](checkout-and-payment-with-paypal.md)</span><span class="sxs-lookup"><span data-stu-id="c1628-361">[Previous](display_data_items_and_details.md)
[Next](checkout-and-payment-with-paypal.md)</span></span>
