---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/create_the_data_access_layer
title: Veri erişim katmanını oluşturma | Microsoft Docs
author: Erikre
description: Bu öğretici serisi, ASP.NET 4,5 ve Microsoft Visual Studio Express 2013 ' i kullanarak bir ASP.NET Web Forms uygulaması oluşturma hakkında temel bilgileri öğretir...
ms.author: riande
ms.date: 09/08/2014
ms.assetid: 0bbf7a6e-d7eb-4091-91e4-fff892777f32
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/create_the_data_access_layer
msc.type: authoredcontent
ms.openlocfilehash: 0fcf050474a57be9ed53ec0783a6d6b7dde2bf4c
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74575744"
---
# <a name="create-the-data-access-layer"></a><span data-ttu-id="5723a-103">Veri Erişim Katmanını Oluşturma</span><span class="sxs-lookup"><span data-stu-id="5723a-103">Create the Data Access Layer</span></span>

<span data-ttu-id="5723a-104">by [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="5723a-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="5723a-105">[Wingtip Toys örnek projesini indirin (C#)](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) veya [indirme E-kitabı (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="5723a-105">[Download Wingtip Toys Sample Project (C#)](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="5723a-106">Bu öğretici serisi, ASP.NET 4,5 ve Web için Microsoft Visual Studio Express 2013 kullanarak bir ASP.NET Web Forms uygulaması oluşturma hakkında temel bilgileri öğretir.</span><span class="sxs-lookup"><span data-stu-id="5723a-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="5723a-107">[Kaynak koduna sahip C# ](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) Visual Studio 2013 bir proje, bu öğretici serisine eşlik etmek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="5723a-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>

<span data-ttu-id="5723a-108">Bu öğreticide, ASP.NET Web Forms ve Code First Entity Framework kullanarak bir veritabanında veri oluşturma, erişme ve gözden geçirme açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="5723a-108">This tutorial describes how to create, access, and review data from a database using ASP.NET Web Forms and Entity Framework Code First.</span></span> <span data-ttu-id="5723a-109">Bu öğretici, önceki öğreticide "Projeyi oluşturma" ve Wingtip oyuncak mağaza öğreticisi serisinin bir parçası olarak oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="5723a-109">This tutorial builds on the previous tutorial "Create the Project" and is part of the Wingtip Toy Store tutorial series.</span></span> <span data-ttu-id="5723a-110">Bu öğreticiyi tamamladığınızda, projenin *modeller* klasöründe olan bir veri erişim sınıfları grubu oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="5723a-110">When you've completed this tutorial, you will have built a group of data-access classes that are in the *Models* folder of the project.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="5723a-111">Şunları öğreneceksiniz:</span><span class="sxs-lookup"><span data-stu-id="5723a-111">What you'll learn:</span></span>

- <span data-ttu-id="5723a-112">Veri modellerini oluşturma.</span><span class="sxs-lookup"><span data-stu-id="5723a-112">How to create the data models.</span></span>
- <span data-ttu-id="5723a-113">Veritabanını başlatma ve çekirdek oluşturma.</span><span class="sxs-lookup"><span data-stu-id="5723a-113">How to initialize and seed the database.</span></span>
- <span data-ttu-id="5723a-114">Veritabanını desteklemek için uygulamayı güncelleştirme ve yapılandırma.</span><span class="sxs-lookup"><span data-stu-id="5723a-114">How to update and configure the application to support the database.</span></span>

### <a name="these-are-the-features-introduced-in-the-tutorial"></a><span data-ttu-id="5723a-115">Öğreticide sunulan özellikler şunlardır:</span><span class="sxs-lookup"><span data-stu-id="5723a-115">These are the features introduced in the tutorial:</span></span>

- <span data-ttu-id="5723a-116">Entity Framework Code First</span><span class="sxs-lookup"><span data-stu-id="5723a-116">Entity Framework Code First</span></span>
- <span data-ttu-id="5723a-117">Yerel Veritabanı</span><span class="sxs-lookup"><span data-stu-id="5723a-117">LocalDB</span></span>
- <span data-ttu-id="5723a-118">Veri Açıklamaları</span><span class="sxs-lookup"><span data-stu-id="5723a-118">Data Annotations</span></span>

## <a name="creating-the-data-models"></a><span data-ttu-id="5723a-119">Veri modellerini oluşturma</span><span class="sxs-lookup"><span data-stu-id="5723a-119">Creating the Data Models</span></span>

<span data-ttu-id="5723a-120">[Entity Framework](https://msdn.microsoft.com/data/aa937723) , nesne ilişkisel eşleme (ORM) çerçevesidir.</span><span class="sxs-lookup"><span data-stu-id="5723a-120">[Entity Framework](https://msdn.microsoft.com/data/aa937723) is an object-relational mapping (ORM) framework.</span></span> <span data-ttu-id="5723a-121">Genellikle yazmanız gereken veri erişimi kodunun çoğunu ortadan kaldırarak, ilişkisel verilerle nesne olarak çalışmanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="5723a-121">It lets you work with relational data as objects, eliminating most of the data-access code that you'd usually need to write.</span></span> <span data-ttu-id="5723a-122">Entity Framework kullanarak, [LINQ](https://msdn.microsoft.com/library/bb397926.aspx)kullanarak sorgular verebilir, ardından verileri kesin olarak belirlenmiş nesneler olarak alabilir ve işleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5723a-122">Using Entity Framework, you can issue queries using [LINQ](https://msdn.microsoft.com/library/bb397926.aspx), then retrieve and manipulate data as strongly typed objects.</span></span> <span data-ttu-id="5723a-123">LINQ, verileri sorgulamak ve güncelleştirmek için desenler sağlar.</span><span class="sxs-lookup"><span data-stu-id="5723a-123">LINQ provides patterns for querying and updating data.</span></span> <span data-ttu-id="5723a-124">Entity Framework kullanmak, veri erişim temelleri üzerine odaklanmak yerine uygulamanızın geri kalanını oluşturmaya odaklanabilmenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="5723a-124">Using Entity Framework allows you to focus on creating the rest of your application, rather than focusing on the data access fundamentals.</span></span> <span data-ttu-id="5723a-125">Bu öğretici serisinde daha sonra, verileri nasıl kullanacağınızı, gezinti ve ürün sorgularını doldurmak için göstereceğiz.</span><span class="sxs-lookup"><span data-stu-id="5723a-125">Later in this tutorial series, we'll show you how to use the data to populate navigation and product queries.</span></span>

<span data-ttu-id="5723a-126">Entity Framework, *Code First*adlı bir geliştirme paradigmasını destekler.</span><span class="sxs-lookup"><span data-stu-id="5723a-126">Entity Framework supports a development paradigm called *Code First*.</span></span> <span data-ttu-id="5723a-127">Code First, sınıfları kullanarak veri modellerinizi tanımlamanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="5723a-127">Code First lets you define your data models using classes.</span></span> <span data-ttu-id="5723a-128">Sınıf, diğer türlerin, yöntemlerin ve olayların değişkenlerini birlikte gruplandırarak kendi özel türlerinizi oluşturmanızı sağlayan bir yapıdır.</span><span class="sxs-lookup"><span data-stu-id="5723a-128">A class is a construct that enables you to create your own custom types by grouping together variables of other types, methods and events.</span></span> <span data-ttu-id="5723a-129">Sınıfları varolan bir veritabanıyla eşleyebilir veya bir veritabanı oluşturmak için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5723a-129">You can map classes to an existing database or use them to generate a database.</span></span> <span data-ttu-id="5723a-130">Bu öğreticide, veri modeli sınıfları yazarak veri modellerini oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="5723a-130">In this tutorial, you'll create the data models by writing data model classes.</span></span> <span data-ttu-id="5723a-131">Daha sonra, bu yeni sınıflardan anında veritabanını Entity Framework oluşturmaya izin vereceksiniz.</span><span class="sxs-lookup"><span data-stu-id="5723a-131">Then, you'll let Entity Framework create the database on the fly from these new classes.</span></span>

<span data-ttu-id="5723a-132">Web Forms uygulaması için veri modellerini tanımlayan varlık sınıfları oluşturarak başlarsınız.</span><span class="sxs-lookup"><span data-stu-id="5723a-132">You will begin by creating the entity classes that define the data models for the Web Forms application.</span></span> <span data-ttu-id="5723a-133">Daha sonra varlık sınıflarını yöneten ve veritabanına veri erişimi sağlayan bir bağlam sınıfı oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="5723a-133">Then you will create a context class that manages the entity classes and provides data access to the database.</span></span> <span data-ttu-id="5723a-134">Ayrıca, veritabanını doldurmak için kullanacağınız bir başlatıcı sınıfı oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="5723a-134">You will also create an initializer class that you will use to populate the database.</span></span>

### <a name="entity-framework-and-references"></a><span data-ttu-id="5723a-135">Entity Framework ve başvurular</span><span class="sxs-lookup"><span data-stu-id="5723a-135">Entity Framework and References</span></span>

<span data-ttu-id="5723a-136">Varsayılan olarak, **Web Forms** şablonunu kullanarak yeni bir **ASP.NET Web uygulaması** oluşturduğunuzda Entity Framework dahil edilir.</span><span class="sxs-lookup"><span data-stu-id="5723a-136">By default, Entity Framework is included when you create a new **ASP.NET Web Application** using the **Web Forms** template.</span></span> <span data-ttu-id="5723a-137">Entity Framework, bir NuGet paketi olarak yüklenebilir, kaldırılabilir ve güncelleştirilebilen olabilir.</span><span class="sxs-lookup"><span data-stu-id="5723a-137">Entity Framework can be installed, uninstalled, and updated as a NuGet package.</span></span>

<span data-ttu-id="5723a-138">Bu NuGet paketi, projenizde aşağıdaki **çalışma zamanı** derlemelerini içerir:</span><span class="sxs-lookup"><span data-stu-id="5723a-138">This NuGet package includes the following **runtime** assemblies within your project:</span></span>

- <span data-ttu-id="5723a-139">EntityFramework. dll – Entity Framework tarafından kullanılan tüm ortak çalışma zamanı kodları</span><span class="sxs-lookup"><span data-stu-id="5723a-139">EntityFramework.dll – All the common runtime code used by Entity Framework</span></span>
- <span data-ttu-id="5723a-140">EntityFramework. SqlServer. dll – Entity Framework için Microsoft SQL Server sağlayıcısı</span><span class="sxs-lookup"><span data-stu-id="5723a-140">EntityFramework.SqlServer.dll – The Microsoft SQL Server provider for Entity Framework</span></span>

### <a name="entity-classes"></a><span data-ttu-id="5723a-141">Varlık sınıfları</span><span class="sxs-lookup"><span data-stu-id="5723a-141">Entity Classes</span></span>

<span data-ttu-id="5723a-142">Verilerin şemasını tanımlamak için oluşturduğunuz sınıflar varlık sınıfları olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="5723a-142">The classes you create to define the schema of the data are called entity classes.</span></span> <span data-ttu-id="5723a-143">Veritabanı tasarımına yeni başladıysanız varlık sınıflarını bir veritabanının tablo tanımları olarak düşünün.</span><span class="sxs-lookup"><span data-stu-id="5723a-143">If you're new to database design, think of the entity classes as table definitions of a database.</span></span> <span data-ttu-id="5723a-144">Sınıftaki her bir özellik, veritabanının tablosundaki bir sütunu belirtir.</span><span class="sxs-lookup"><span data-stu-id="5723a-144">Each property in the class specifies a column in the table of the database.</span></span> <span data-ttu-id="5723a-145">Bu sınıflar, nesne odaklı kod ve veritabanının ilişkisel tablo yapısı arasında basit, nesne ilişkisel bir arabirim sağlar.</span><span class="sxs-lookup"><span data-stu-id="5723a-145">These classes provide a lightweight, object-relational interface between object-oriented code and the relational table structure of the database.</span></span>

<span data-ttu-id="5723a-146">Bu öğreticide, ürünler ve kategoriler için şemaları temsil eden basit varlık sınıfları ekleyerek başlayacaksınız.</span><span class="sxs-lookup"><span data-stu-id="5723a-146">In this tutorial, you'll start out by adding simple entity classes representing the schemas for products and categories.</span></span> <span data-ttu-id="5723a-147">Products sınıfı her ürün için tanımlar içerir.</span><span class="sxs-lookup"><span data-stu-id="5723a-147">The products class will contain definitions for each product.</span></span> <span data-ttu-id="5723a-148">Ürün sınıfının her üyesinin adı `ProductID`, `ProductName`, `Description`, `ImagePath`, `UnitPrice`, `CategoryID`ve `Category`olacaktır.</span><span class="sxs-lookup"><span data-stu-id="5723a-148">The name of each of the members of the product class will be `ProductID`, `ProductName`, `Description`, `ImagePath`, `UnitPrice`, `CategoryID`, and `Category`.</span></span> <span data-ttu-id="5723a-149">Kategori sınıfı, bir ürünün ait olduğu her bir kategorinin, otomobil, bot veya düzlem gibi tanımlar içerir.</span><span class="sxs-lookup"><span data-stu-id="5723a-149">The category class will contain definitions for each category that a product can belong to, such as Car, Boat, or Plane.</span></span> <span data-ttu-id="5723a-150">Kategori sınıfının her üyesinin adı `CategoryID`, `CategoryName`, `Description`ve `Products`olacaktır.</span><span class="sxs-lookup"><span data-stu-id="5723a-150">The name of each of the members of the category class will be `CategoryID`, `CategoryName`, `Description`, and `Products`.</span></span> <span data-ttu-id="5723a-151">Her ürün kategorilerden birine ait olacaktır.</span><span class="sxs-lookup"><span data-stu-id="5723a-151">Each product will belong to one of the categories.</span></span> <span data-ttu-id="5723a-152">Bu varlık sınıfları projenin mevcut *modeller* klasörüne eklenecektir.</span><span class="sxs-lookup"><span data-stu-id="5723a-152">These entity classes will be added to the project's existing *Models* folder.</span></span>

1. <span data-ttu-id="5723a-153">**Çözüm Gezgini**, *modeller* klasörüne sağ tıklayın ve ardından **Yeni öğe**&gt; -**Ekle** ' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="5723a-153">In **Solution Explorer**, right-click the *Models* folder and then select **Add** -&gt; **New Item**.</span></span> 

    ![Veri erişim katmanını oluşturma-yeni öğe menüsü](create_the_data_access_layer/_static/image1.png)

   <span data-ttu-id="5723a-155">**Yeni öğe Ekle** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="5723a-155">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="5723a-156">Soldaki **yüklü** bölmeden **görsel C#**  ' ün altında **kod**' u seçin.</span><span class="sxs-lookup"><span data-stu-id="5723a-156">Under **Visual C#** from the **Installed** pane on the left, select **Code**.</span></span> 

    ![Veri erişim katmanını oluşturma-yeni öğe menüsü](create_the_data_access_layer/_static/image2.png)
3. <span data-ttu-id="5723a-158">Orta bölmeden **sınıf** ' ı seçin ve bu yeni sınıfı *Product.cs*olarak adlandırın.</span><span class="sxs-lookup"><span data-stu-id="5723a-158">Select **Class** from the middle pane and name this new class *Product.cs*.</span></span>
4. <span data-ttu-id="5723a-159">**Ekle**'yi tıklatın.</span><span class="sxs-lookup"><span data-stu-id="5723a-159">Click **Add**.</span></span>  
   <span data-ttu-id="5723a-160">Yeni sınıf dosyası düzenleyicide görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="5723a-160">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="5723a-161">Varsayılan kodu şu kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="5723a-161">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](create_the_data_access_layer/samples/sample1.cs)]
6. <span data-ttu-id="5723a-162">1 ile 4 arasındaki adımları tekrarlayarak başka bir sınıf oluşturun, yeni sınıfı *category.cs* olarak adlandırın ve varsayılan kodu şu kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="5723a-162">Create another class by repeating steps 1 through 4, however, name the new class *Category.cs* and replace the default code with the following code:</span></span>  

    [!code-csharp[Main](create_the_data_access_layer/samples/sample2.cs)]

<span data-ttu-id="5723a-163">Daha önce belirtildiği gibi, `Category` sınıfı uygulamanın satış için tasarlandığı ürün türünü temsil eder ( <a id="a"></a>&quot;otomobiller&quot;, &quot;Boats&quot;, &quot;Rockets&quot;vb.) ve `Product` sınıfı veritabanındaki bireysel ürünleri (Toys) temsil eder.</span><span class="sxs-lookup"><span data-stu-id="5723a-163">As previously mentioned, the `Category` class represents the type of product that the application is designed to sell (such as <a id="a"></a>&quot;Cars&quot;, &quot;Boats&quot;, &quot;Rockets&quot;, and so on), and the `Product` class represents the individual products (toys) in the database.</span></span> <span data-ttu-id="5723a-164">Bir `Product` nesnesinin her örneği, ilişkisel veritabanı tablosundaki bir satıra karşılık gelir ve ürün sınıfının her özelliği ilişkisel veritabanı tablosundaki bir sütunla eşlenir.</span><span class="sxs-lookup"><span data-stu-id="5723a-164">Each instance of a `Product` object will correspond to a row within a relational database table, and each property of the Product class will map to a column in the relational database table.</span></span> <span data-ttu-id="5723a-165">Bu öğreticide daha sonra veritabanında bulunan ürün verilerini gözden geçireceğiz.</span><span class="sxs-lookup"><span data-stu-id="5723a-165">Later in this tutorial, you'll review the product data contained in the database.</span></span>

### <a name="data-annotations"></a><span data-ttu-id="5723a-166">Veri Açıklamaları</span><span class="sxs-lookup"><span data-stu-id="5723a-166">Data Annotations</span></span>

<span data-ttu-id="5723a-167">Sınıfların belirli üyelerinin, `[ScaffoldColumn(false)]`gibi, üyeyle ilgili ayrıntıları belirten özniteliklere sahip olduğunu fark etmiş olabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5723a-167">You may have noticed that certain members of the classes have attributes specifying details about the member, such as `[ScaffoldColumn(false)]`.</span></span> <span data-ttu-id="5723a-168">Bunlar *veri ek açıklamalardır*.</span><span class="sxs-lookup"><span data-stu-id="5723a-168">These are *data annotations*.</span></span> <span data-ttu-id="5723a-169">Veri ek açıklaması öznitelikleri, bu üye için Kullanıcı girişinin nasıl doğrulandığını tanımlayabilir, bu üyeye yönelik biçimlendirmeyi belirtebilir ve veritabanı oluşturulduğunda nasıl modellendirildiğini belirtebilir.</span><span class="sxs-lookup"><span data-stu-id="5723a-169">The data annotation attributes can describe how to validate user input for that member, to specify formatting for it, and to specify how it is modeled when the database is created.</span></span>

### <a name="context-class"></a><span data-ttu-id="5723a-170">Bağlam Sınıfı</span><span class="sxs-lookup"><span data-stu-id="5723a-170">Context Class</span></span>

<span data-ttu-id="5723a-171">Veri erişimi için sınıfları kullanmaya başlamak için bir bağlam sınıfı tanımlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="5723a-171">To start using the classes for data access, you must define a context class.</span></span> <span data-ttu-id="5723a-172">Daha önce belirtildiği gibi, bağlam sınıfı varlık sınıflarını (`Product` sınıfı ve `Category` sınıfı) yönetir ve veritabanına veri erişimi sağlar.</span><span class="sxs-lookup"><span data-stu-id="5723a-172">As mentioned previously, the context class manages the entity classes (such as the `Product` class and the `Category` class) and provides data access to the database.</span></span>

<span data-ttu-id="5723a-173">Bu yordam modeller klasörüne yeni C# bir bağlam sınıfı ekler .</span><span class="sxs-lookup"><span data-stu-id="5723a-173">This procedure adds a new C# context class to the *Models* folder.</span></span>

1. <span data-ttu-id="5723a-174">*Modeller* klasörüne sağ tıklayın ve ardından **yeni öğe**&gt; -**Ekle** ' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="5723a-174">Right-click the *Models* folder and then select **Add** -&gt; **New Item**.</span></span>   
   <span data-ttu-id="5723a-175">**Yeni öğe Ekle** iletişim kutusu görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="5723a-175">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="5723a-176">Orta bölmeden **sınıf** ' ı seçin, *ProductContext.cs* olarak adlandırın ve **Ekle**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="5723a-176">Select **Class** from the middle pane, name it *ProductContext.cs* and click **Add**.</span></span>
3. <span data-ttu-id="5723a-177">Sınıfında bulunan varsayılan kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="5723a-177">Replace the default code contained in the class with the following code:</span></span>   

    [!code-csharp[Main](create_the_data_access_layer/samples/sample3.cs)]

<span data-ttu-id="5723a-178">Bu kod, kesin olarak belirlenmiş nesnelerle çalışarak verileri sorgulama, ekleme, güncelleştirme ve silme özelliğini içeren Entity Framework tüm çekirdek işlevlerine erişebilmeniz için `System.Data.Entity` ad alanını ekler.</span><span class="sxs-lookup"><span data-stu-id="5723a-178">This code adds the `System.Data.Entity` namespace so that you have access to all the core functionality of Entity Framework, which includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span>

<span data-ttu-id="5723a-179">`ProductContext` sınıfı, veritabanında `Product` sınıf örneklerinin getirmeyi, depolanmasını ve güncelleştirilmesini işleyen Entity Framework ürün veritabanı bağlamını temsil eder.</span><span class="sxs-lookup"><span data-stu-id="5723a-179">The `ProductContext` class represents Entity Framework product database context, which handles fetching, storing, and updating `Product` class instances in the database.</span></span> <span data-ttu-id="5723a-180">`ProductContext` sınıfı Entity Framework tarafından sunulan `DbContext` taban sınıftan türetilir.</span><span class="sxs-lookup"><span data-stu-id="5723a-180">The `ProductContext` class derives from the `DbContext` base class provided by Entity Framework.</span></span>

### <a name="initializer-class"></a><span data-ttu-id="5723a-181">Başlatıcı sınıfı</span><span class="sxs-lookup"><span data-stu-id="5723a-181">Initializer Class</span></span>

<span data-ttu-id="5723a-182">Bağlam ilk kez kullanıldığında veritabanını başlatmak için bazı özel mantık çalıştırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="5723a-182">You will need to run some custom logic to initialize the database the first time the context is used.</span></span> <span data-ttu-id="5723a-183">Bu, ürünleri ve kategorileri hemen görüntüleyebilmeniz için çekirdek verilerin veritabanına eklenmesine izin verir.</span><span class="sxs-lookup"><span data-stu-id="5723a-183">This will allow seed data to be added to the database so that you can immediately display products and categories.</span></span>

<span data-ttu-id="5723a-184">Bu yordam modeller klasörüne yeni C# bir başlatıcı sınıfı ekler .</span><span class="sxs-lookup"><span data-stu-id="5723a-184">This procedure adds a new C# initializer class to the *Models* folder.</span></span>

1. <span data-ttu-id="5723a-185">*Modeller* klasöründe başka bir `Class` oluşturun ve *ProductDatabaseInitializer.cs*olarak adlandırın.</span><span class="sxs-lookup"><span data-stu-id="5723a-185">Create another `Class` in the *Models* folder and name it *ProductDatabaseInitializer.cs*.</span></span>
2. <span data-ttu-id="5723a-186">Sınıfında bulunan varsayılan kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="5723a-186">Replace the default code contained in the class with the following code:</span></span>   

    [!code-csharp[Main](create_the_data_access_layer/samples/sample4.cs)]

<span data-ttu-id="5723a-187">Yukarıdaki koddan görebileceğiniz gibi, veritabanı oluşturulup başlatıldığında `Seed` özelliği geçersiz kılınır ve ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="5723a-187">As you can see from the above code, when the database is created and initialized, the `Seed` property is overridden and set.</span></span> <span data-ttu-id="5723a-188">`Seed` özelliği ayarlandığında, Kategoriler ve ürünlerdeki değerler veritabanını doldurmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="5723a-188">When the `Seed` property is set, the values from the categories and products are used to populate the database.</span></span> <span data-ttu-id="5723a-189">Veritabanı oluşturulduktan sonra yukarıdaki kodu değiştirerek çekirdek verileri güncelleştirmeye çalışırsanız, Web uygulamasını çalıştırdığınızda hiçbir güncelleştirme görmezsiniz.</span><span class="sxs-lookup"><span data-stu-id="5723a-189">If you attempt to update the seed data by modifying the above code after the database has been created, you won't see any updates when you run the Web application.</span></span> <span data-ttu-id="5723a-190">Bu nedenle, yukarıdaki kod, çekirdek verileri sıfırlamadan önce modelin (şema) değişip değişmediğini tanımak için `DropCreateDatabaseIfModelChanges` sınıfının bir uygulamasını kullanır.</span><span class="sxs-lookup"><span data-stu-id="5723a-190">The reason is the above code uses an implementation of the `DropCreateDatabaseIfModelChanges` class to recognize if the model (schema) has changed before resetting the seed data.</span></span> <span data-ttu-id="5723a-191">`Category` ve `Product` varlık sınıflarında hiçbir değişiklik yapılmadığından, veritabanı çekirdek verilerle yeniden başlatılır.</span><span class="sxs-lookup"><span data-stu-id="5723a-191">If no changes are made to the `Category` and `Product` entity classes, the database will not be reinitialized with the seed data.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="5723a-192">Uygulamayı her çalıştırışınızda veritabanının yeniden oluşturulmasını istediyseniz, `DropCreateDatabaseIfModelChanges` sınıfı yerine `DropCreateDatabaseAlways` sınıfını kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5723a-192">If you wanted the database to be recreated every time you ran the application, you could use the `DropCreateDatabaseAlways` class instead of the `DropCreateDatabaseIfModelChanges` class.</span></span> <span data-ttu-id="5723a-193">Bununla birlikte, bu öğretici serisi için `DropCreateDatabaseIfModelChanges` sınıfını kullanın.</span><span class="sxs-lookup"><span data-stu-id="5723a-193">However for this tutorial series, use the `DropCreateDatabaseIfModelChanges` class.</span></span>

<span data-ttu-id="5723a-194">Bu öğreticide, dört yeni sınıfa ve bir varsayılan sınıfa sahip bir *modeller* klasörünüze sahip olursunuz:</span><span class="sxs-lookup"><span data-stu-id="5723a-194">At this point in this tutorial, you will have a *Models* folder with four new classes and one default class:</span></span>

![Veri erişim katmanı-modeller klasörünü oluşturma](create_the_data_access_layer/_static/image3.png)

### <a name="configuring-the-application-to-use-the-data-model"></a><span data-ttu-id="5723a-196">Uygulamayı veri modelini kullanacak şekilde yapılandırma</span><span class="sxs-lookup"><span data-stu-id="5723a-196">Configuring the Application to Use the Data Model</span></span>

<span data-ttu-id="5723a-197">Artık verileri temsil eden sınıfları oluşturduğunuza göre, uygulamayı sınıfları kullanacak şekilde yapılandırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="5723a-197">Now that you've created the classes that represent the data, you must configure the application to use the classes.</span></span> <span data-ttu-id="5723a-198">*Global. asax* dosyasında, modeli başlatan kodu eklersiniz.</span><span class="sxs-lookup"><span data-stu-id="5723a-198">In the *Global.asax* file, you add code that initializes the model.</span></span> <span data-ttu-id="5723a-199">*Web. config* dosyasında, uygulamanın yeni veri sınıfları tarafından temsil edilen verileri depolamak için hangi veritabanına kullanacağınızı belirten bilgileri eklersiniz.</span><span class="sxs-lookup"><span data-stu-id="5723a-199">In the *Web.config* file you add information that tells the application what database you'll use to store the data that's represented by the new data classes.</span></span> <span data-ttu-id="5723a-200">*Global. asax* dosyası, uygulama olaylarını veya yöntemlerini işlemek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="5723a-200">The *Global.asax* file can be used to handle application events or methods.</span></span> <span data-ttu-id="5723a-201">*Web. config* dosyası, ASP.NET Web uygulamanızın yapılandırmasını denetlemenize olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="5723a-201">The *Web.config* file allows you to control the configuration of your ASP.NET web application.</span></span>

#### <a name="updating-the-globalasax-file"></a><span data-ttu-id="5723a-202">Global. asax dosyası güncelleştiriliyor</span><span class="sxs-lookup"><span data-stu-id="5723a-202">Updating the Global.asax file</span></span>

<span data-ttu-id="5723a-203">Uygulama başlatıldığında veri modellerini başlatmak için, *Global.asax.cs* dosyasında `Application_Start` işleyicisini güncelleşolursunuz.</span><span class="sxs-lookup"><span data-stu-id="5723a-203">To initialize the data models when the application starts, you will update the `Application_Start` handler in the *Global.asax.cs* file.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="5723a-204">Çözüm Gezgini, *Global.asax.cs* dosyasını düzenlemek için *Global. asax* dosyasını veya *Global.asax.cs* dosyasını seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5723a-204">In Solution Explorer, you can select either the *Global.asax* file or the *Global.asax.cs* file to edit the *Global.asax.cs* file.</span></span>

1. <span data-ttu-id="5723a-205">*Global.asax.cs* dosyasındaki `Application_Start` yöntemine sarıya vurgulanan aşağıdaki kodu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="5723a-205">Add the following code highlighted in yellow to the `Application_Start` method in the *Global.asax.cs* file.</span></span>   

    [!code-csharp[Main](create_the_data_access_layer/samples/sample5.cs?highlight=9-10,22-23)]

> [!NOTE] 
> 
> <span data-ttu-id="5723a-206">Tarayıcınız, bu öğretici serisini bir tarayıcıda görüntülerken sarı renkle vurgulanmış kodu görüntülemek için HTML5 'yi desteklemelidir.</span><span class="sxs-lookup"><span data-stu-id="5723a-206">Your browser must support HTML5 to view the code highlighted in yellow when viewing this tutorial series in a browser.</span></span>

<span data-ttu-id="5723a-207">Yukarıdaki kodda gösterildiği gibi, uygulama başladığında, uygulama ilk kez veriye erişildiğinde çalıştırılacak başlatıcıyı belirtir.</span><span class="sxs-lookup"><span data-stu-id="5723a-207">As shown in the above code, when the application starts, the application specifies the initializer that will run during the first time the data is accessed.</span></span> <span data-ttu-id="5723a-208">`Database` nesnesine ve `ProductDatabaseInitializer` nesnesine erişmek için iki ek ad alanı gerekir.</span><span class="sxs-lookup"><span data-stu-id="5723a-208">The two additional namespaces are required to access the `Database` object and the `ProductDatabaseInitializer` object.</span></span>

 <span data-ttu-id="5723a-209">Web. config dosyasını değiştirme</span><span class="sxs-lookup"><span data-stu-id="5723a-209">Modifying the Web.Config File</span></span> 

<span data-ttu-id="5723a-210">Entity Framework Code First veritabanı çekirdek verilerle doldurulduğu zaman varsayılan bir konumda sizin için bir veritabanı oluşturacak olsa da, uygulamanıza kendi bağlantı bilgilerinizi eklemek, veritabanı konumunu denetlemenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="5723a-210">Although Entity Framework Code First will generate a database for you in a default location when the database is populated with seed data, adding your own connection information to your application gives you control of the database location.</span></span> <span data-ttu-id="5723a-211">Bu veritabanı bağlantısını, projenin kökündeki uygulamanın *Web. config* dosyasında bir bağlantı dizesi kullanarak belirtirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5723a-211">You specify this database connection using a connection string in the application's *Web.config* file at the root of the project.</span></span> <span data-ttu-id="5723a-212">Yeni bir bağlantı dizesi ekleyerek veritabanının konumunu (*wingtiptoys. mdf*) varsayılan konumu yerine uygulamanın veri dizininde (*App\_verileri*) oluşturulacak şekilde yönlendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="5723a-212">By adding a new connection string, you can direct the location of the database (*wingtiptoys.mdf*) to be built in the application's data directory (*App\_Data*), rather than its default location.</span></span> <span data-ttu-id="5723a-213">Bu değişikliğin yapılması, bu öğreticide daha sonra veritabanı dosyasını bulmanıza ve incelemenize olanak sağlayacak.</span><span class="sxs-lookup"><span data-stu-id="5723a-213">Making this change will allow you to find and inspect the database file later in this tutorial.</span></span>

1. <span data-ttu-id="5723a-214">**Çözüm Gezgini**, *Web. config* dosyasını bulun ve açın.</span><span class="sxs-lookup"><span data-stu-id="5723a-214">In **Solution Explorer**, find and open the *Web.config* file.</span></span>
2. <span data-ttu-id="5723a-215">Sarı olarak vurgulanan bağlantı dizesini *Web. config* dosyasının `<connectionStrings>` bölümüne aşağıdaki gibi ekleyin:</span><span class="sxs-lookup"><span data-stu-id="5723a-215">Add the connection string highlighted in yellow to the `<connectionStrings>` section of the *Web.config* file as follows:</span></span>  

    [!code-xml[Main](create_the_data_access_layer/samples/sample6.xml?highlight=4-7)]

<span data-ttu-id="5723a-216">Uygulama ilk kez çalıştırıldığında, veritabanı bağlantı dizesi tarafından belirtilen konumda oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="5723a-216">When the application is run for the first time, it will build the database at the location specified by the connection string.</span></span> <span data-ttu-id="5723a-217">Ancak uygulamayı çalıştırmadan önce, önce oluşturalım.</span><span class="sxs-lookup"><span data-stu-id="5723a-217">But before running the application, let's build it first.</span></span>

## <a name="building-the-application"></a><span data-ttu-id="5723a-218">Uygulama Oluşturma</span><span class="sxs-lookup"><span data-stu-id="5723a-218">Building the Application</span></span>

<span data-ttu-id="5723a-219">Web uygulamanızdaki tüm sınıfların ve değişikliklerin çalıştığından emin olmak için uygulamayı derlemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="5723a-219">To make sure that all the classes and changes to your Web application work, you should build the application.</span></span>

1. <span data-ttu-id="5723a-220">**Hata Ayıkla** menüsünde, **Build wingtiptoys**' u seçin.</span><span class="sxs-lookup"><span data-stu-id="5723a-220">From the **Debug** menu, select **Build WingtipToys**.</span></span>  
 <span data-ttu-id="5723a-221">**Çıkış** penceresi görüntülenir ve hepsi de varsa, *başarılı* bir ileti görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="5723a-221">The **Output** window is displayed, and if all went well, you see a *succeeded* message.</span></span>  

    ![Veri erişim katmanı çıkış pencerelerini oluşturma](create_the_data_access_layer/_static/image4.png)

<span data-ttu-id="5723a-223">Bir hata halinde çalıştırırsanız yukarıdaki adımları yeniden denetleyin.</span><span class="sxs-lookup"><span data-stu-id="5723a-223">If you run into an error, re-check the above steps.</span></span> <span data-ttu-id="5723a-224">**Çıkış** penceresindeki bilgiler, hangi dosyanın bir sorun olduğunu ve dosyada bir değişikliğin gerekli olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="5723a-224">The information in the **Output** window will indicate which file has a problem and where in the file a change is required.</span></span> <span data-ttu-id="5723a-225">Bu bilgiler, yukarıdaki adımların projenizde neleri gözden geçirilmesi ve düzeltilmesi gerektiğini belirlemenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="5723a-225">This information will enable you to determine what part of the above steps need to be reviewed and fixed in your project.</span></span>

## <a name="summary"></a><span data-ttu-id="5723a-226">Özet</span><span class="sxs-lookup"><span data-stu-id="5723a-226">Summary</span></span>

<span data-ttu-id="5723a-227">Serinin Bu öğreticide, veri modeli oluşturdunuz ve ayrıca veritabanını başlatmak ve temel almak için kullanılacak kodu eklediniz.</span><span class="sxs-lookup"><span data-stu-id="5723a-227">In this tutorial of the series you have created the data model, as well as, added the code that will be used to initialize and seed the database.</span></span> <span data-ttu-id="5723a-228">Uygulamayı, uygulama çalıştırıldığında veri modellerini kullanmak için de yapılandırdınız.</span><span class="sxs-lookup"><span data-stu-id="5723a-228">You have also configured the application to use the data models when the application is run.</span></span>

<span data-ttu-id="5723a-229">Sonraki öğreticide, Kullanıcı arabirimini güncelleştireceğiz, gezinti ekleyecek ve veritabanından veri alacaksınız.</span><span class="sxs-lookup"><span data-stu-id="5723a-229">In the next tutorial, you'll update the UI, add navigation, and retrieve data from the database.</span></span> <span data-ttu-id="5723a-230">Bu, veritabanının bu öğreticide oluşturduğunuz varlık sınıflarına göre otomatik olarak oluşturulmasını sağlayacaktır.</span><span class="sxs-lookup"><span data-stu-id="5723a-230">This will result in the database being automatically created based on the entity classes that you created in this tutorial.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="5723a-231">Ek Kaynaklar</span><span class="sxs-lookup"><span data-stu-id="5723a-231">Additional Resources</span></span>

<span data-ttu-id="5723a-232">[Entity Framework genel bakış](https://msdn.microsoft.com/library/bb399567.aspx) </span><span class="sxs-lookup"><span data-stu-id="5723a-232">[Entity Framework Overview](https://msdn.microsoft.com/library/bb399567.aspx) </span></span>  
<span data-ttu-id="5723a-233">[Başlangıç Kılavuzu, ADO.NET Entity Framework](https://msdn.microsoft.com/data/ee712907) </span><span class="sxs-lookup"><span data-stu-id="5723a-233">[Beginner's Guide to the ADO.NET Entity Framework](https://msdn.microsoft.com/data/ee712907) </span></span>  
<span data-ttu-id="5723a-234">[Entity Framework Ile geliştirme Code First](http://www.msteched.com/2010/Europe/DEV212) (video)</span><span class="sxs-lookup"><span data-stu-id="5723a-234">[Code First Development with Entity Framework](http://www.msteched.com/2010/Europe/DEV212) (video)</span></span>   
<span data-ttu-id="5723a-235">[Code First Ilişkiler AKıCı apı](https://msdn.microsoft.com/data/hh134698) </span><span class="sxs-lookup"><span data-stu-id="5723a-235">[Code First Relationships Fluent API](https://msdn.microsoft.com/data/hh134698) </span></span>  
[<span data-ttu-id="5723a-236">Code First veri açıklamaları</span><span class="sxs-lookup"><span data-stu-id="5723a-236">Code First Data Annotations</span></span>](https://msdn.microsoft.com/data/gg193958)  
[<span data-ttu-id="5723a-237">Entity Framework için üretkenlik Iyileştirmeleri</span><span class="sxs-lookup"><span data-stu-id="5723a-237">Productivity Improvements for the Entity Framework</span></span>](https://blogs.msdn.com/b/efdesign/archive/2010/06/21/productivity-improvements-for-the-entity-framework.aspx?wa=wsignin1.0)

> [!div class="step-by-step"]
> <span data-ttu-id="5723a-238">[Önceki](create-the-project.md)
> [İleri](ui_and_navigation.md)</span><span class="sxs-lookup"><span data-stu-id="5723a-238">[Previous](create-the-project.md)
[Next](ui_and_navigation.md)</span></span>
