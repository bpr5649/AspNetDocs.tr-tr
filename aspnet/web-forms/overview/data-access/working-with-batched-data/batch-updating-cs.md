---
uid: web-forms/overview/data-access/working-with-batched-data/batch-updating-cs
title: Toplu güncelleştirme (C#) | Microsoft Docs
author: rick-anderson
description: Tek bir işlemde birden çok veritabanı kaydını güncelleştirmeyi öğrenin. Kullanıcı arabirimi katmanında her bir satırın düzenlenebildiği bir GridView oluşturacağız. Veride...
ms.author: riande
ms.date: 06/26/2007
ms.assetid: 4e849bcc-c557-4bc3-937e-f7453ee87265
msc.legacyurl: /web-forms/overview/data-access/working-with-batched-data/batch-updating-cs
msc.type: authoredcontent
ms.openlocfilehash: baaaf37c47cc57d90ea579a5c20949bf8cfc7a3c
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74583353"
---
# <a name="batch-updating-c"></a><span data-ttu-id="2858c-105">Toplu Güncelleştirme (C#)</span><span class="sxs-lookup"><span data-stu-id="2858c-105">Batch Updating (C#)</span></span>

<span data-ttu-id="2858c-106">[Scott Mitchell](https://twitter.com/ScottOnWriting) tarafından</span><span class="sxs-lookup"><span data-stu-id="2858c-106">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="2858c-107">[Kodu indirin](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_64_CS.zip) veya [PDF 'yi indirin](batch-updating-cs/_static/datatutorial64cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="2858c-107">[Download Code](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_64_CS.zip) or [Download PDF](batch-updating-cs/_static/datatutorial64cs1.pdf)</span></span>

> <span data-ttu-id="2858c-108">Tek bir işlemde birden çok veritabanı kaydını güncelleştirmeyi öğrenin.</span><span class="sxs-lookup"><span data-stu-id="2858c-108">Learn how to update multiple database records in a single operation.</span></span> <span data-ttu-id="2858c-109">Kullanıcı arabirimi katmanında her bir satırın düzenlenebildiği bir GridView oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="2858c-109">In the User Interface Layer we build a GridView where each row is editable.</span></span> <span data-ttu-id="2858c-110">Veri erişim katmanında, tüm güncelleştirmelerin başarılı veya tüm güncelleştirmelerin geri alındığından emin olmak için bir işlem içindeki birden çok güncelleştirme işlemini sardık.</span><span class="sxs-lookup"><span data-stu-id="2858c-110">In the Data Access Layer we wrap the multiple Update operations within a transaction to ensure that all updates succeed or all updates are rolled back.</span></span>

## <a name="introduction"></a><span data-ttu-id="2858c-111">Giriş</span><span class="sxs-lookup"><span data-stu-id="2858c-111">Introduction</span></span>

<span data-ttu-id="2858c-112">[Önceki öğreticide](wrapping-database-modifications-within-a-transaction-cs.md) , veritabanı işlemleri için destek eklemek üzere veri erişim katmanını genişletmeyi gördük.</span><span class="sxs-lookup"><span data-stu-id="2858c-112">In the [preceding tutorial](wrapping-database-modifications-within-a-transaction-cs.md) we saw how to extend the Data Access Layer to add support for database transactions.</span></span> <span data-ttu-id="2858c-113">Veritabanı işlemleri, bir dizi veri değiştirme deyimlerinin tek bir atomik işlem olarak değerlendirilip tüm değişikliklerin başarısız olacağını veya tümünün başarılı olacağını güvence altına alır.</span><span class="sxs-lookup"><span data-stu-id="2858c-113">Database transactions guarantee that a series of data modification statements will be treated as one atomic operation, which ensures that all modifications will fail or all will succeed.</span></span> <span data-ttu-id="2858c-114">Bu alt düzey DAL işlevselliği sayesinde, toplu veri değiştirme arabirimlerini oluşturmak için ilgilenmeniz bizim için hazır hale gelmiştir.</span><span class="sxs-lookup"><span data-stu-id="2858c-114">With this low-level DAL functionality out of the way, we re ready to turn our attention to creating batch data modification interfaces.</span></span>

<span data-ttu-id="2858c-115">Bu öğreticide her bir satırın düzenlenebildiği bir GridView oluşturacağız (bkz. Şekil 1).</span><span class="sxs-lookup"><span data-stu-id="2858c-115">In this tutorial we'll build a GridView where each row is editable (see Figure 1).</span></span> <span data-ttu-id="2858c-116">Her satır düzenleme arabiriminde işlendiği için, Düzenle, Güncelleştir ve Iptal düğmeleri sütunu için gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="2858c-116">Since each row is rendered in its editing interface, there s no need for a column of Edit, Update, and Cancel buttons.</span></span> <span data-ttu-id="2858c-117">Bunun yerine sayfada iki güncelleştirme ürünü düğmesi bulunur, tıklandığı zaman GridView satırlarını numaralandırın ve veritabanını güncelleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2858c-117">Instead, there are two Update Products buttons on the page that, when clicked, enumerate the GridView rows and update the database.</span></span>

<span data-ttu-id="2858c-118">[GridView 'daki her satır ![düzenlenebilir](batch-updating-cs/_static/image1.gif)](batch-updating-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="2858c-118">[![Each Row in the GridView is Editable](batch-updating-cs/_static/image1.gif)](batch-updating-cs/_static/image1.png)</span></span>

<span data-ttu-id="2858c-119">**Şekil 1**: GridView 'Daki her satır düzenlenebilir ([tam boyutlu görüntüyü görüntülemek için tıklayın](batch-updating-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="2858c-119">**Figure 1**: Each Row in the GridView is Editable ([Click to view full-size image](batch-updating-cs/_static/image2.png))</span></span>

<span data-ttu-id="2858c-120">Haydi başlayın!</span><span class="sxs-lookup"><span data-stu-id="2858c-120">Let s get started!</span></span>

> [!NOTE]
> <span data-ttu-id="2858c-121">[Toplu güncelleştirmeler gerçekleştirme](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) öğreticisinde, DataList denetimini kullanarak bir toplu iş düzenlemesi arabirimi oluşturduk.</span><span class="sxs-lookup"><span data-stu-id="2858c-121">In the [Performing Batch Updates](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) tutorial we created a batch editing interface using the DataList control.</span></span> <span data-ttu-id="2858c-122">Bu öğretici, ' deki bir GridView kullanan ve toplu güncelleştirme bir işlemin kapsamı içinde gerçekleştirilen bir öncekinden farklıdır.</span><span class="sxs-lookup"><span data-stu-id="2858c-122">This tutorial differs from the previous one in that is uses a GridView and the batch update is performed within the scope of a transaction.</span></span> <span data-ttu-id="2858c-123">Bu Öğreticiyi tamamladıktan sonra, önceki öğreticiye geri dönmeli ve önceki öğreticide eklenen veritabanı işlemi ile ilgili işlevselliği kullanmak için onu güncelleştirmeniz önerilir.</span><span class="sxs-lookup"><span data-stu-id="2858c-123">After completing this tutorial I encourage you to return to the earlier tutorial and update it to use the database transaction-related functionality added in the preceding tutorial.</span></span>

## <a name="examining-the-steps-for-making-all-gridview-rows-editable"></a><span data-ttu-id="2858c-124">Tüm GridView satırlarını düzenlenebilir yapma adımları inceleniyor</span><span class="sxs-lookup"><span data-stu-id="2858c-124">Examining the Steps for Making All GridView Rows Editable</span></span>

<span data-ttu-id="2858c-125">Veri öğreticisini [ekleme, güncelleştirme ve silmeye genel bakış](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) konusunda açıklandığı gibi, GridView, temel alınan verilerinin satır başına düzenlenmesine yönelik yerleşik destek sunar.</span><span class="sxs-lookup"><span data-stu-id="2858c-125">As discussed in the [An Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, the GridView offers built-in support for editing its underlying data on a per-row basis.</span></span> <span data-ttu-id="2858c-126">Dahili olarak, GridView, [`EditIndex` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.editindex(VS.80).aspx)aracılığıyla hangi satırın düzenlenebilir olduğunu not edin.</span><span class="sxs-lookup"><span data-stu-id="2858c-126">Internally, the GridView notes what row is editable through its [`EditIndex` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.editindex(VS.80).aspx).</span></span> <span data-ttu-id="2858c-127">GridView kendi veri kaynağına bağladığından, satırın dizininin `EditIndex`değerine eşit olup olmadığını görmek için her bir satırı kontrol eder.</span><span class="sxs-lookup"><span data-stu-id="2858c-127">As the GridView is being bound to its data source, it checks each row to see if the index of the row equals the value of `EditIndex`.</span></span> <span data-ttu-id="2858c-128">Bu durumda, satır s alanları kendi düzen arabirimleri kullanılarak işlenir.</span><span class="sxs-lookup"><span data-stu-id="2858c-128">If so, that row s fields are rendered using their editing interfaces.</span></span> <span data-ttu-id="2858c-129">BoundFields için, düzen arabirimi, `Text` özelliğine, BoundField s `DataField` özelliği tarafından belirtilen veri alanının değeri atanmış olan bir TextBox.</span><span class="sxs-lookup"><span data-stu-id="2858c-129">For BoundFields, the editing interface is a TextBox whose `Text` property is assigned the value of the data field specified by the BoundField s `DataField` property.</span></span> <span data-ttu-id="2858c-130">TemplateFields için, `EditItemTemplate` `ItemTemplate`yerine kullanılır.</span><span class="sxs-lookup"><span data-stu-id="2858c-130">For TemplateFields, the `EditItemTemplate` is used in place of the `ItemTemplate`.</span></span>

<span data-ttu-id="2858c-131">Kullanıcı bir satır Düzenle düğmesine tıkladığında düzenleme iş akışının başlayacağını geri çekin.</span><span class="sxs-lookup"><span data-stu-id="2858c-131">Recall that the editing workflow starts when a user clicks a row s Edit button.</span></span> <span data-ttu-id="2858c-132">Bu, bir geri göndermeye neden olur, GridView s `EditIndex` özelliğini tıklanmış satır s dizinine ayarlar ve verileri kılavuza yeniden bağlar.</span><span class="sxs-lookup"><span data-stu-id="2858c-132">This causes a postback, sets the GridView s `EditIndex` property to the clicked row s index, and rebinds the data to the grid.</span></span> <span data-ttu-id="2858c-133">Bir satır s Iptal düğmesine tıklandığında, geri göndermede `EditIndex`, verileri kılavuza yeniden bağlanmadan önce `-1` bir değere ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="2858c-133">When a row s Cancel button is clicked, on postback the `EditIndex` is set to a value of `-1` before rebinding the data to the grid.</span></span> <span data-ttu-id="2858c-134">GridView s satırları dizin oluşturmaya başladıktan sonra, `EditIndex` `-1` ayarı GridView 'un salt okuma modunda görüntülenmesine etkisi vardır.</span><span class="sxs-lookup"><span data-stu-id="2858c-134">Since the GridView s rows start indexing at zero, setting `EditIndex` to `-1` has the effect of displaying the GridView in read-only mode.</span></span>

<span data-ttu-id="2858c-135">`EditIndex` özelliği satır başına düzenlemede iyi işlem yapıyor, ancak toplu düzenlemeyle ilgili tasarlanmamıştır.</span><span class="sxs-lookup"><span data-stu-id="2858c-135">The `EditIndex` property works well for per-row editing, but is not designed for batch editing.</span></span> <span data-ttu-id="2858c-136">GridView 'un tamamını düzenlenebilir hale getirmek için, her satırı düzenleme arabirimini kullanarak işlememiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="2858c-136">To make the entire GridView editable, we need to have each row render using its editing interface.</span></span> <span data-ttu-id="2858c-137">Bunu yapmanın en kolay yolu, her düzenlenebilir alanın, `ItemTemplate`tanımlı düzenleme arabirimiyle birlikte TemplateField olarak uygulandığını oluşturmaktır.</span><span class="sxs-lookup"><span data-stu-id="2858c-137">The easiest way to accomplish this is to create where each editable field is implemented as a TemplateField with its editing interface defined in the `ItemTemplate`.</span></span>

<span data-ttu-id="2858c-138">Sonraki birkaç adımda tamamen düzenlenebilir bir GridView oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="2858c-138">Over the next several steps we'll create a completely editable GridView.</span></span> <span data-ttu-id="2858c-139">Adım 1 ' de, GridView ve ObjectDataSource oluşturup BoundFields ve CheckBoxField 'ı TemplateFields 'e dönüştürerek başlayacağız.</span><span class="sxs-lookup"><span data-stu-id="2858c-139">In Step 1 we'll start by creating the GridView and its ObjectDataSource and convert its BoundFields and CheckBoxField into TemplateFields.</span></span> <span data-ttu-id="2858c-140">Adım 2 ve 3 ' te, TemplateFields `EditItemTemplate` öğeleri `ItemTemplate` s ' ye taşıyacağız.</span><span class="sxs-lookup"><span data-stu-id="2858c-140">In Steps 2 and 3 we'll move the editing interfaces from the TemplateFields `EditItemTemplate` s to their `ItemTemplate` s.</span></span>

## <a name="step-1-displaying-product-information"></a><span data-ttu-id="2858c-141">1\. Adım: ürün bilgilerini görüntüleme</span><span class="sxs-lookup"><span data-stu-id="2858c-141">Step 1: Displaying Product Information</span></span>

<span data-ttu-id="2858c-142">Satırların düzenlenebildiği bir GridView oluşturma konusunda endişelenmemiz için öncelikle ürün bilgilerini görüntüleyerek başlayın.</span><span class="sxs-lookup"><span data-stu-id="2858c-142">Before we worry about creating a GridView where are rows are editable, let s start by simply displaying the product information.</span></span> <span data-ttu-id="2858c-143">`BatchData` klasöründeki `BatchUpdate.aspx` sayfasını açın ve araç kutusundan Tasarımcı üzerine bir GridView sürükleyin.</span><span class="sxs-lookup"><span data-stu-id="2858c-143">Open the `BatchUpdate.aspx` page in the `BatchData` folder and drag a GridView from the Toolbox onto the Designer.</span></span> <span data-ttu-id="2858c-144">GridView s `ID` `ProductsGrid` ve akıllı etiketinden `ProductsDataSource`adlı yeni bir ObjectDataSource 'a bağlamayı seçin.</span><span class="sxs-lookup"><span data-stu-id="2858c-144">Set the GridView s `ID` to `ProductsGrid` and, from its smart tag, choose to bind it to a new ObjectDataSource named `ProductsDataSource`.</span></span> <span data-ttu-id="2858c-145">`ProductsBLL` sınıf s `GetProducts` yönteminden verileri almak için ObjectDataSource 'ı yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="2858c-145">Configure the ObjectDataSource to retrieve its data from the `ProductsBLL` class s `GetProducts` method.</span></span>

<span data-ttu-id="2858c-146">[![, ObjectDataSource 'ı ProductsBLL sınıfını kullanacak şekilde yapılandırma](batch-updating-cs/_static/image2.gif)](batch-updating-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="2858c-146">[![Configure the ObjectDataSource to Use the ProductsBLL Class](batch-updating-cs/_static/image2.gif)](batch-updating-cs/_static/image3.png)</span></span>

<span data-ttu-id="2858c-147">**Şekil 2**: `ProductsBLL` sınıfını kullanmak için ObjectDataSource 'ı yapılandırma ([tam boyutlu görüntüyü görüntülemek için tıklayın](batch-updating-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="2858c-147">**Figure 2**: Configure the ObjectDataSource to Use the `ProductsBLL` Class ([Click to view full-size image](batch-updating-cs/_static/image4.png))</span></span>

<span data-ttu-id="2858c-148">[GetProducts metodunu kullanarak ürün verilerini alma ![](batch-updating-cs/_static/image3.gif)](batch-updating-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="2858c-148">[![Retrieve the Product Data Using the GetProducts Method](batch-updating-cs/_static/image3.gif)](batch-updating-cs/_static/image5.png)</span></span>

<span data-ttu-id="2858c-149">**Şekil 3**: `GetProducts` yöntemi kullanarak ürün verilerini alma ([tam boyutlu görüntüyü görüntülemek için tıklayın](batch-updating-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="2858c-149">**Figure 3**: Retrieve the Product Data Using the `GetProducts` Method ([Click to view full-size image](batch-updating-cs/_static/image6.png))</span></span>

<span data-ttu-id="2858c-150">GridView gibi, ObjectDataSource 'un değişiklik özellikleri satır başına olarak çalışacak şekilde tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="2858c-150">Like the GridView, the ObjectDataSource s modification features are designed to work on a per-row basis.</span></span> <span data-ttu-id="2858c-151">Bir kayıt kümesini güncelleştirmek için, verileri toplu olarak izleyen ve BLL 'e ileten ASP.NET Page for Code arka plan sınıfında bir kod yazmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2858c-151">In order to update a set of records, we'll need to write a bit of code in the ASP.NET page s code-behind class that batches the data and passes it to the BLL.</span></span> <span data-ttu-id="2858c-152">Bu nedenle, ObjectDataSource 'un GÜNCELLEŞTIRME, ekleme ve SILME sekmelerinden açılan listeleri (hiçbiri) ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="2858c-152">Therefore, set the drop-down lists in the ObjectDataSource s UPDATE, INSERT, and DELETE tabs to (None).</span></span> <span data-ttu-id="2858c-153">Sihirbazı tamamladığınızda son ' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2858c-153">Click Finish to complete the wizard.</span></span>

<span data-ttu-id="2858c-154">[GÜNCELLEŞTIRME, ekleme ve SILME sekmelerindeki açılan listeleri (hiçbiri) ![ayarla](batch-updating-cs/_static/image4.gif)](batch-updating-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="2858c-154">[![Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE Tabs to (None)](batch-updating-cs/_static/image4.gif)](batch-updating-cs/_static/image7.png)</span></span>

<span data-ttu-id="2858c-155">**Şekil 4**: GÜNCELLEŞTIRME, ekleme ve silme sekmelerinden açılan listeleri (yok) ayarlayın ([tam boyutlu görüntüyü görüntülemek için tıklayın](batch-updating-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="2858c-155">**Figure 4**: Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE Tabs to (None) ([Click to view full-size image](batch-updating-cs/_static/image8.png))</span></span>

<span data-ttu-id="2858c-156">Veri kaynağı Yapılandırma Sihirbazı 'nı tamamladıktan sonra, ObjectDataSource tarafından bildirim temelli biçimlendirme aşağıdaki gibi görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="2858c-156">After completing the Configure Data Source wizard, the ObjectDataSource s declarative markup should look like the following:</span></span>

[!code-aspx[Main](batch-updating-cs/samples/sample1.aspx)]

<span data-ttu-id="2858c-157">Veri kaynağı Yapılandırma Sihirbazı 'nı tamamlamak, Visual Studio 'Nun, GridView 'daki ürün verileri alanları için BoundFields ve CheckBoxField oluşturmasına neden olur.</span><span class="sxs-lookup"><span data-stu-id="2858c-157">Completing the Configure Data Source wizard also causes Visual Studio to create BoundFields and a CheckBoxField for the product data fields in the GridView.</span></span> <span data-ttu-id="2858c-158">Bu öğreticide, s yalnızca kullanıcının ürün adını, kategorisini, fiyatını ve Discontinued durumunu görüntülemesine ve düzenlemesine izin verir.</span><span class="sxs-lookup"><span data-stu-id="2858c-158">For this tutorial, let s only allow the user to view and edit the product s name, category, price, and discontinued status.</span></span> <span data-ttu-id="2858c-159">`ProductName`, `CategoryName`, `UnitPrice`ve `Discontinued` alanları hariç tümünü kaldırın ve ilk üç alanın `HeaderText` özelliklerini sırasıyla ürün, kategori ve fiyat olarak yeniden adlandırın.</span><span class="sxs-lookup"><span data-stu-id="2858c-159">Remove all but the `ProductName`, `CategoryName`, `UnitPrice`, and `Discontinued` fields and rename the `HeaderText` properties of the first three fields to Product, Category, and Price, respectively.</span></span> <span data-ttu-id="2858c-160">Son olarak, GridView s akıllı etiketinde Sayfalamayı Etkinleştir ve sıralamayı etkinleştir onay kutularını işaretleyin.</span><span class="sxs-lookup"><span data-stu-id="2858c-160">Lastly, check the Enable Paging and Enable Sorting checkboxes in the GridView s smart tag.</span></span>

<span data-ttu-id="2858c-161">Bu noktada GridView üç BoundFields (`ProductName`, `CategoryName`ve `UnitPrice`) ve bir CheckBoxField (`Discontinued`) içerir.</span><span class="sxs-lookup"><span data-stu-id="2858c-161">At this point the GridView has three BoundFields (`ProductName`, `CategoryName`, and `UnitPrice`) and a CheckBoxField (`Discontinued`).</span></span> <span data-ttu-id="2858c-162">Bu dört alanı TemplateFields 'e dönüştürmemiz ve daha sonra TemplateField `EditItemTemplate` düzen arabirimini `ItemTemplate`olarak taşımanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2858c-162">We need to convert these four fields into TemplateFields and then move the editing interface from the TemplateField s `EditItemTemplate` to its `ItemTemplate`.</span></span>

> [!NOTE]
> <span data-ttu-id="2858c-163">[Veri değişikliği arabirimini özelleştirme](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) öğreticisinde templatefields oluşturmayı ve özelleştirmeyi araştırıyoruz.</span><span class="sxs-lookup"><span data-stu-id="2858c-163">We explored creating and customizing TemplateFields in the [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorial.</span></span> <span data-ttu-id="2858c-164">BoundFields ve CheckBoxField değerlerini TemplateFields 'e dönüştürme ve `ItemTemplate` s 'de kendi düzen arabirimlerini tanımlama adımlarını inceleyeceğiz, ancak takıldıysanız veya bir yenileyici gerekiyorsa, bu önceki öğreticiye geri başvurmaktan çekinmeyin.</span><span class="sxs-lookup"><span data-stu-id="2858c-164">We'll walk through the steps of converting the BoundFields and CheckBoxField into TemplateFields and defining their editing interfaces in their `ItemTemplate` s, but if you get stuck or need a refresher, don t hesitate to refer back to this earlier tutorial.</span></span>

<span data-ttu-id="2858c-165">GridView s akıllı etiketinden sütunları düzenle bağlantısına tıklayarak alanlar iletişim kutusunu açın.</span><span class="sxs-lookup"><span data-stu-id="2858c-165">From the GridView s smart tag, click the Edit Columns link to open the Fields dialog box.</span></span> <span data-ttu-id="2858c-166">Ardından, her bir alanı seçin ve bu alanı bir TemplateField öğesine Dönüştür bağlantısına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2858c-166">Next, select each field and click the Convert this field into a TemplateField link.</span></span>

![Mevcut BoundFields ve CheckBoxField 'ı TemplateField 'A Dönüştür](batch-updating-cs/_static/image5.gif)

<span data-ttu-id="2858c-168">**Şekil 5**: mevcut boundfields ve CheckBoxField 'ı TemplateField 'a Dönüştür</span><span class="sxs-lookup"><span data-stu-id="2858c-168">**Figure 5**: Convert the Existing BoundFields and CheckBoxField Into TemplateField</span></span>

<span data-ttu-id="2858c-169">Artık her bir alan bir TemplateField olduğuna göre, `EditItemTemplate` s ' den `ItemTemplate` s öğesine kadar olan geçiş arabirimini taşımaya hazır hale gelmiştir.</span><span class="sxs-lookup"><span data-stu-id="2858c-169">Now that each field is a TemplateField, we re ready to move the editing interface from the `EditItemTemplate` s to the `ItemTemplate` s.</span></span>

## <a name="step-2-creating-theproductnameunitprice-anddiscontinuedediting-interfaces"></a><span data-ttu-id="2858c-170">2\. Adım:`ProductName`,`UnitPrice`ve`Discontinued`düzen arabirimlerini oluşturma</span><span class="sxs-lookup"><span data-stu-id="2858c-170">Step 2: Creating the`ProductName`,`UnitPrice`, and`Discontinued`Editing Interfaces</span></span>

<span data-ttu-id="2858c-171">`ProductName`, `UnitPrice`ve `Discontinued` düzen arabirimlerinin oluşturulması, bu adımın konusu olduğunu ve her bir arabirim TemplateField s `EditItemTemplate`zaten tanımlandığından oldukça basittir.</span><span class="sxs-lookup"><span data-stu-id="2858c-171">Creating the `ProductName`, `UnitPrice`, and `Discontinued` editing interfaces are the topic of this step and are pretty straightforward, as each interface is already defined in the TemplateField s `EditItemTemplate`.</span></span> <span data-ttu-id="2858c-172">`CategoryName` düzen arabirimini oluşturmak, uygulanabilir kategorilerin bir DropDownList 'i oluşturmamız gerektiğinden biraz daha karmaşıktır.</span><span class="sxs-lookup"><span data-stu-id="2858c-172">Creating the `CategoryName` editing interface is a bit more involved since we need to create a DropDownList of the applicable categories.</span></span> <span data-ttu-id="2858c-173">Bu `CategoryName` düzen arabirimi adım 3 ' te bir grup değildir.</span><span class="sxs-lookup"><span data-stu-id="2858c-173">This `CategoryName` editing interface is tackled in Step 3.</span></span>

<span data-ttu-id="2858c-174">S `ProductName` TemplateField ile başlayalım.</span><span class="sxs-lookup"><span data-stu-id="2858c-174">Let s start with the `ProductName` TemplateField.</span></span> <span data-ttu-id="2858c-175">GridView s akıllı etiketinden Şablonları Düzenle bağlantısına tıklayın ve `ProductName` TemplateField `EditItemTemplate`' a gidin.</span><span class="sxs-lookup"><span data-stu-id="2858c-175">Click on the Edit Templates link from the GridView s smart tag and drill down to the `ProductName` TemplateField s `EditItemTemplate`.</span></span> <span data-ttu-id="2858c-176">Metin kutusunu seçin, panoya kopyalayın ve sonra `ProductName` TemplateField s `ItemTemplate`yapıştırın.</span><span class="sxs-lookup"><span data-stu-id="2858c-176">Select the TextBox, copy it to the clipboard, and then paste it to the `ProductName` TemplateField s `ItemTemplate`.</span></span> <span data-ttu-id="2858c-177">TextBox s `ID` özelliğini `ProductName`olacak şekilde değiştirin.</span><span class="sxs-lookup"><span data-stu-id="2858c-177">Change the TextBox s `ID` property to `ProductName`.</span></span>

<span data-ttu-id="2858c-178">Sonra, kullanıcının her bir ürün adı için bir değer sağladığından emin olmak için `ItemTemplate` bir RequiredFieldValidator ekleyin.</span><span class="sxs-lookup"><span data-stu-id="2858c-178">Next, add a RequiredFieldValidator to the `ItemTemplate` to ensure that the user provides a value for each product s name.</span></span> <span data-ttu-id="2858c-179">`ControlToValidate` özelliğini ProductName olarak ayarlayın, `ErrorMessage` özelliği ürünün adını sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2858c-179">Set the `ControlToValidate` property to ProductName, the `ErrorMessage` property to You must provide the product's name.</span></span> <span data-ttu-id="2858c-180">ve \*`Text` özelliği.</span><span class="sxs-lookup"><span data-stu-id="2858c-180">and the `Text` property to \*.</span></span> <span data-ttu-id="2858c-181">Bu `ItemTemplate`eklemeler yapıldıktan sonra, ekranınızın Şekil 6 ' ya benzer olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="2858c-181">After making these additions to the `ItemTemplate`, your screen should look similar to Figure 6.</span></span>

<span data-ttu-id="2858c-182">[![ProductName TemplateField artık bir TextBox ve bir RequiredFieldValidator Içeriyor](batch-updating-cs/_static/image6.gif)](batch-updating-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="2858c-182">[![The ProductName TemplateField Now Includes a TextBox and a RequiredFieldValidator](batch-updating-cs/_static/image6.gif)](batch-updating-cs/_static/image9.png)</span></span>

<span data-ttu-id="2858c-183">**Şekil 6**: `ProductName` TemplateField artık bir TextBox ve bir RequiredFieldValidator içerir ([tam boyutlu görüntüyü görüntülemek için tıklayın](batch-updating-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="2858c-183">**Figure 6**: The `ProductName` TemplateField Now Includes a TextBox and a RequiredFieldValidator ([Click to view full-size image](batch-updating-cs/_static/image10.png))</span></span>

<span data-ttu-id="2858c-184">`UnitPrice` Editing arabirimi için, metin kutusunu `EditItemTemplate` `ItemTemplate`kopyalayarak başlayın.</span><span class="sxs-lookup"><span data-stu-id="2858c-184">For the `UnitPrice` editing interface, start by copying the TextBox from the `EditItemTemplate` to the `ItemTemplate`.</span></span> <span data-ttu-id="2858c-185">Sonra, TextBox ' ın önüne bir $ yerleştirip, `ID` özelliğini BirimFiyat ve `Columns` özelliğini 8 olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="2858c-185">Next, place a $ in front of the TextBox and set its `ID` property to UnitPrice and its `Columns` property to 8 .</span></span>

<span data-ttu-id="2858c-186">Ayrıca, Kullanıcı tarafından girilen değerin $0,00 ' den büyük veya buna eşit geçerli bir para birimi değeri olduğundan emin olmak için `UnitPrice` s `ItemTemplate` bir CompareValidator ekleyin.</span><span class="sxs-lookup"><span data-stu-id="2858c-186">Also add a CompareValidator to the `UnitPrice` s `ItemTemplate` to ensure that the value entered by the user is a valid currency value greater than or equal to $0.00.</span></span> <span data-ttu-id="2858c-187">Validator `ControlToValidate` özelliğini UnitPrice olarak ayarlayın, `ErrorMessage` özelliği için geçerli bir para birimi değeri girmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="2858c-187">Set the validator s `ControlToValidate` property to UnitPrice, its `ErrorMessage` property to You must enter a valid currency value.</span></span> <span data-ttu-id="2858c-188">Lütfen herhangi bir para birimi simgesini \*, `Type` özelliğini `Currency``Text`, `Operator` özelliğini `GreaterThanEqual``ValueToCompare` ve özelliğini 0 olarak atlayın.</span><span class="sxs-lookup"><span data-stu-id="2858c-188">Please omit any currency symbols., its `Text` property to \*, its `Type` property to `Currency`, its `Operator` property to `GreaterThanEqual`, and its `ValueToCompare` property to 0 .</span></span>

<span data-ttu-id="2858c-189">[![, girilen fiyatın negatif olmayan bir para birimi değeri olduğundan emin olmak için bir CompareValidator ekleyin](batch-updating-cs/_static/image7.gif)](batch-updating-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="2858c-189">[![Add a CompareValidator to Ensure the Price Entered is a Non-Negative Currency Value](batch-updating-cs/_static/image7.gif)](batch-updating-cs/_static/image11.png)</span></span>

<span data-ttu-id="2858c-190">**Şekil 7**: girilen fiyatın negatif olmayan bir para birimi değeri olduğundan emin olmak Için bir CompareValidator ekleyin ([tam boyutlu görüntüyü görüntülemek için tıklayın](batch-updating-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="2858c-190">**Figure 7**: Add a CompareValidator to Ensure the Price Entered is a Non-Negative Currency Value ([Click to view full-size image](batch-updating-cs/_static/image12.png))</span></span>

<span data-ttu-id="2858c-191">`Discontinued` TemplateField alanı için `ItemTemplate`önceden tanımlanmış onay kutusunu kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2858c-191">For the `Discontinued` TemplateField you can use the CheckBox already defined in the `ItemTemplate`.</span></span> <span data-ttu-id="2858c-192">`ID`, `true`olarak `Enabled` özelliğini Discontinued olarak ayarlamanız yeterlidir.</span><span class="sxs-lookup"><span data-stu-id="2858c-192">Simply set its `ID` to Discontinued and its `Enabled` property to `true`.</span></span>

## <a name="step-3-creating-thecategorynameediting-interface"></a><span data-ttu-id="2858c-193">3\. Adım:`CategoryName`Editing arabirimini oluşturma</span><span class="sxs-lookup"><span data-stu-id="2858c-193">Step 3: Creating the`CategoryName`Editing Interface</span></span>

<span data-ttu-id="2858c-194">`CategoryName` TemplateField s `EditItemTemplate` içindeki Düzenle arabirimi `CategoryName` veri alanının değerini gösteren bir TextBox içerir.</span><span class="sxs-lookup"><span data-stu-id="2858c-194">The editing interface in the `CategoryName` TemplateField s `EditItemTemplate` contains a TextBox that displays the value of the `CategoryName` data field.</span></span> <span data-ttu-id="2858c-195">Bunu olası kategorileri listeleyen bir DropDownList ile değiştirdiğinizden ihtiyacımız var.</span><span class="sxs-lookup"><span data-stu-id="2858c-195">We need to replace this with a DropDownList that lists the possible categories.</span></span>

> [!NOTE]
> <span data-ttu-id="2858c-196">[Veri değişikliği arabirimini özelleştirme](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) öğreticisini özelleştirmek, bir şablonu özelleştirme hakkında daha kapsamlı ve eksiksiz bir tartışma Içerir ve metin kutusu yerine bir DropDownList içerir.</span><span class="sxs-lookup"><span data-stu-id="2858c-196">The [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorial contains a more thorough and complete discussion on customizing a template to include a DropDownList as opposed to a TextBox.</span></span> <span data-ttu-id="2858c-197">Buradaki adımlar tamamlandıktan sonra, bu işlemler özellikle bir şekilde sunulur.</span><span class="sxs-lookup"><span data-stu-id="2858c-197">While the steps here are complete, they are presented tersely.</span></span> <span data-ttu-id="2858c-198">DropDownList kategorilerini oluşturma ve yapılandırma hakkında daha ayrıntılı bir bakış için [veri değişikliği arabirimini özelleştirme](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) öğreticisine bakın.</span><span class="sxs-lookup"><span data-stu-id="2858c-198">For a more in-depth look at creating and configuring the categories DropDownList, refer back to the [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorial.</span></span>

<span data-ttu-id="2858c-199">Araç kutusundan bir DropDownList öğesini `CategoryName` TemplateField s `ItemTemplate`üzerine sürükleyin, `ID` `Categories`olarak ayarlar.</span><span class="sxs-lookup"><span data-stu-id="2858c-199">Drag a DropDownList from the Toolbox onto the `CategoryName` TemplateField s `ItemTemplate`, setting its `ID` to `Categories`.</span></span> <span data-ttu-id="2858c-200">Bu noktada, genellikle yeni bir ObjectDataSource oluşturarak DropDownLists veri kaynağını akıllı etiketiyle tanımlayacağız.</span><span class="sxs-lookup"><span data-stu-id="2858c-200">At this point we would usually define the DropDownLists s data source through its smart tag, creating a new ObjectDataSource.</span></span> <span data-ttu-id="2858c-201">Bununla birlikte, bu, her GridView satırı için oluşturulan ObjectDataSource örneği ile sonuçlanacaktır `ItemTemplate`içindeki ObjectDataSource 'ı ekler.</span><span class="sxs-lookup"><span data-stu-id="2858c-201">However, this will add the ObjectDataSource within the `ItemTemplate`, which will result in an ObjectDataSource instance created for each GridView row.</span></span> <span data-ttu-id="2858c-202">Bunun yerine, ObjectDataSource 'yi GridView s TemplateFields dışındaki oluşturmalarına izin verin.</span><span class="sxs-lookup"><span data-stu-id="2858c-202">Instead, let s create the ObjectDataSource outside of the GridView s TemplateFields.</span></span> <span data-ttu-id="2858c-203">Şablon düzenlemesini sonlandırın ve araç kutusundan bir ObjectDataSource 'ı `ProductsDataSource` ObjectDataSource 'un altında tasarımcı üzerine sürükleyin.</span><span class="sxs-lookup"><span data-stu-id="2858c-203">End the template editing and drag an ObjectDataSource from the Toolbox onto the Designer beneath the `ProductsDataSource` ObjectDataSource.</span></span> <span data-ttu-id="2858c-204">Yeni ObjectDataSource `CategoriesDataSource` adlandırın ve `CategoriesBLL` Class s `GetCategories` metodunu kullanacak şekilde yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="2858c-204">Name the new ObjectDataSource `CategoriesDataSource` and configure it to use the `CategoriesBLL` class s `GetCategories` method.</span></span>

<span data-ttu-id="2858c-205">[![, ObjectDataSource 'un CategoriesBLL sınıfını kullanacak şekilde yapılandırılması](batch-updating-cs/_static/image8.gif)](batch-updating-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="2858c-205">[![Configure the ObjectDataSource to Use the CategoriesBLL Class](batch-updating-cs/_static/image8.gif)](batch-updating-cs/_static/image13.png)</span></span>

<span data-ttu-id="2858c-206">**Şekil 8**: ObjectDataSource 'ı `CategoriesBLL` sınıfını kullanacak şekilde yapılandırma ([tam boyutlu görüntüyü görüntülemek için tıklayın](batch-updating-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="2858c-206">**Figure 8**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class ([Click to view full-size image](batch-updating-cs/_static/image14.png))</span></span>

<span data-ttu-id="2858c-207">[GetCategories metodunu kullanarak kategori verilerini alma ![](batch-updating-cs/_static/image9.gif)](batch-updating-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="2858c-207">[![Retrieve the Category Data Using the GetCategories Method](batch-updating-cs/_static/image9.gif)](batch-updating-cs/_static/image15.png)</span></span>

<span data-ttu-id="2858c-208">**Şekil 9**: `GetCategories` yöntemi kullanarak kategori verilerini alma ([tam boyutlu görüntüyü görüntülemek için tıklayın](batch-updating-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="2858c-208">**Figure 9**: Retrieve the Category Data Using the `GetCategories` Method ([Click to view full-size image](batch-updating-cs/_static/image16.png))</span></span>

<span data-ttu-id="2858c-209">Bu ObjectDataSource yalnızca verileri almak için kullanıldığından, GÜNCELLEŞTIR ve SIL sekmelerinde açılan listeleri (None) olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="2858c-209">Since this ObjectDataSource is used merely to retrieve data, set the drop-down lists in the UPDATE and DELETE tabs to (None).</span></span> <span data-ttu-id="2858c-210">Sihirbazı tamamladığınızda son ' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2858c-210">Click Finish to complete the wizard.</span></span>

<span data-ttu-id="2858c-211">[GÜNCELLEŞTIRME ve SILME sekmelerindeki açılan listeleri (hiçbiri) ![ayarla](batch-updating-cs/_static/image10.gif)](batch-updating-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="2858c-211">[![Set the Drop-Down Lists in the UPDATE and DELETE Tabs to (None)](batch-updating-cs/_static/image10.gif)](batch-updating-cs/_static/image17.png)</span></span>

<span data-ttu-id="2858c-212">**Şekil 10**: GÜNCELLEŞTIR ve Sil sekmelerinde açılan listeleri (yok) ayarlayın ([tam boyutlu görüntüyü görüntülemek için tıklayın](batch-updating-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="2858c-212">**Figure 10**: Set the Drop-Down Lists in the UPDATE and DELETE Tabs to (None) ([Click to view full-size image](batch-updating-cs/_static/image18.png))</span></span>

<span data-ttu-id="2858c-213">Sihirbazı tamamladıktan sonra, `CategoriesDataSource` s bildirime dayalı biçimlendirme aşağıdaki gibi görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="2858c-213">After completing the wizard, the `CategoriesDataSource` s declarative markup should look like the following:</span></span>

[!code-aspx[Main](batch-updating-cs/samples/sample2.aspx)]

<span data-ttu-id="2858c-214">Oluşturulan ve yapılandırılan `CategoriesDataSource` `CategoryName` TemplateField s `ItemTemplate` ve DropDownList s akıllı etiketinde veri kaynağı Seç bağlantısına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2858c-214">With the `CategoriesDataSource` created and configured, return to the `CategoryName` TemplateField s `ItemTemplate` and, from the DropDownList s smart tag, click on the Choose Data Source link.</span></span> <span data-ttu-id="2858c-215">Veri kaynağı Yapılandırma sihirbazında, ilk açılan listeden `CategoriesDataSource` seçeneğini belirleyin ve ekran için `CategoryName` ve değer olarak `CategoryID` ' yı seçin.</span><span class="sxs-lookup"><span data-stu-id="2858c-215">In the Data Source Configuration wizard, select the `CategoriesDataSource` option from the first drop-down list and choose to have `CategoryName` used for the display and `CategoryID` as the value.</span></span>

<span data-ttu-id="2858c-216">[DropDownList 'i CategoriesDataSource 'a bağlama ![](batch-updating-cs/_static/image11.gif)](batch-updating-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="2858c-216">[![Bind the DropDownList to the CategoriesDataSource](batch-updating-cs/_static/image11.gif)](batch-updating-cs/_static/image19.png)</span></span>

<span data-ttu-id="2858c-217">**Şekil 11**: DropDownList 'i `CategoriesDataSource` bağlama ([tam boyutlu görüntüyü görüntülemek için tıklayın](batch-updating-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="2858c-217">**Figure 11**: Bind the DropDownList to the `CategoriesDataSource` ([Click to view full-size image](batch-updating-cs/_static/image20.png))</span></span>

<span data-ttu-id="2858c-218">Bu noktada `Categories` DropDownList tüm kategorileri listeler, ancak GridView satırına bağlantılı ürün için uygun kategoriyi henüz otomatik olarak seçmeyin.</span><span class="sxs-lookup"><span data-stu-id="2858c-218">At this point the `Categories` DropDownList lists all of the categories, but it does not yet automatically select the appropriate category for the product bound to the GridView row.</span></span> <span data-ttu-id="2858c-219">Bunu gerçekleştirmek için `Categories` DropDownList s `SelectedValue` ürün s `CategoryID` değerine ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2858c-219">To accomplish this we need to set the `Categories` DropDownList s `SelectedValue` to the product s `CategoryID` value.</span></span> <span data-ttu-id="2858c-220">DropDownList s akıllı etiketinden DataBindings 'i düzenle bağlantısına tıklayın ve `SelectedValue` özelliğini Şekil 12 ' de gösterildiği gibi `CategoryID` Data alanı ile ilişkilendirin.</span><span class="sxs-lookup"><span data-stu-id="2858c-220">Click on the Edit DataBindings link from the DropDownList s smart tag and associate the `SelectedValue` property with the `CategoryID` data field as shown in Figure 12.</span></span>

![Product s CategoryID değerini DropDownList s SelectedValue özelliğine bağlayın](batch-updating-cs/_static/image12.gif)

<span data-ttu-id="2858c-222">**Şekil 12**: ürün s `CategoryID` değerini DropDownList s `SelectedValue` özelliğine bağlama</span><span class="sxs-lookup"><span data-stu-id="2858c-222">**Figure 12**: Bind the Product s `CategoryID` Value to the DropDownList s `SelectedValue` Property</span></span>

<span data-ttu-id="2858c-223">Son bir sorun kalır: ürünün `CategoryID` bir değeri belirtilmemişse, `SelectedValue` veri bağlama deyimlerinin bir özel durumla sonuçlanacaktır.</span><span class="sxs-lookup"><span data-stu-id="2858c-223">One last problem remains: if the product doesn t have a `CategoryID` value specified then the databinding statement on `SelectedValue` will result in an exception.</span></span> <span data-ttu-id="2858c-224">Bunun nedeni, DropDownList 'in yalnızca kategoriler için öğeler içermesi ve `CategoryID`için `NULL` veritabanı değeri olan ürünler için bir seçenek sunmamaktadır.</span><span class="sxs-lookup"><span data-stu-id="2858c-224">This is because the DropDownList contains only items for the categories and does not offer an option for those products that have a `NULL` database value for `CategoryID`.</span></span> <span data-ttu-id="2858c-225">Bu sorunu gidermek için, DropDownList s `AppendDataBoundItems` özelliğini `true` olarak ayarlayın ve DropDownList 'e yeni bir öğe ekleyerek bildirime dayalı sözdiziminden `Value` özelliğini atlayarak.</span><span class="sxs-lookup"><span data-stu-id="2858c-225">To remedy this, set the DropDownList s `AppendDataBoundItems` property to `true` and add a new item to the DropDownList, omitting the `Value` property from the declarative syntax.</span></span> <span data-ttu-id="2858c-226">Diğer bir deyişle, `Categories` DropDownList s bildirime dayalı sözdiziminin aşağıdaki gibi göründüğünden emin olun:</span><span class="sxs-lookup"><span data-stu-id="2858c-226">That is, make sure that the `Categories` DropDownList s declarative syntax looks like the following:</span></span>

[!code-aspx[Main](batch-updating-cs/samples/sample3.aspx)]

<span data-ttu-id="2858c-227">`<asp:ListItem Value="">`--Select One--`Value` özniteliğini açık bir şekilde boş bir dizeye nasıl ayarlayabileceğinizi aklınızda edin.</span><span class="sxs-lookup"><span data-stu-id="2858c-227">Note how the `<asp:ListItem Value="">` -- Select One -- has its `Value` attribute explicitly set to an empty string.</span></span> <span data-ttu-id="2858c-228">`NULL` durumunu işlemek için bu ek DropDownList öğesinin neden gerekli olduğu ve `Value` özelliğinin boş bir dizeye atanmasının ne kadar önemli olduğunu hakkında daha ayrıntılı bir tartışma için [veri değişikliği arabirimini özelleştirme](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) öğreticisine geri bakın.</span><span class="sxs-lookup"><span data-stu-id="2858c-228">Refer back to the [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorial for a more thorough discussion on why this additional DropDownList item is needed to handle the `NULL` case and why assignment of the `Value` property to an empty string is essential.</span></span>

> [!NOTE]
> <span data-ttu-id="2858c-229">Burada, gereken olası bir performans ve ölçeklenebilirlik sorunu vardır.</span><span class="sxs-lookup"><span data-stu-id="2858c-229">There is a potential performance and scalability issue here that is worth mentioning.</span></span> <span data-ttu-id="2858c-230">Her satırda, veri kaynağı olarak `CategoriesDataSource` kullanan bir DropDownList bulunduğundan, `CategoriesBLL` sınıf s `GetCategories` yöntemi sayfa ziyaret başına *n* kez adlandırılır; burada *n* , GridView 'daki satır sayısıdır.</span><span class="sxs-lookup"><span data-stu-id="2858c-230">Since each row has a DropDownList that uses the `CategoriesDataSource` as its data source, the `CategoriesBLL` class s `GetCategories` method will be called *n* times per page visit, where *n* is the number of rows in the GridView.</span></span> <span data-ttu-id="2858c-231">Bu *n* `GetCategories` çağrısı, veritabanına *n* sorgu ile sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="2858c-231">These *n* calls to `GetCategories` result in *n* queries to the database.</span></span> <span data-ttu-id="2858c-232">Veritabanı üzerindeki bu etki, döndürülen kategorilerin istek başına önbellekte ya da SQL önbellek bağımlılığı veya çok kısa bir süre tabanlı süre sonu kullanılarak önbelleğe alma katmanında önbelleğe alınarak azaltılabilir.</span><span class="sxs-lookup"><span data-stu-id="2858c-232">This impact on the database could be lessened by caching the returned categories either in a per-request cache or through the Caching Layer using a SQL caching dependency or a very short time-based expiry.</span></span> <span data-ttu-id="2858c-233">İstek başına önbelleğe alma seçeneği hakkında daha fazla bilgi için, bkz. [Istek başına önbellek deposu`HttpContext.Items`](http://aspnet.4guysfromrolla.com/articles/060904-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="2858c-233">For more information on the per-request caching option, see [`HttpContext.Items` a Per-Request Cache Store](http://aspnet.4guysfromrolla.com/articles/060904-1.aspx).</span></span>

## <a name="step-4-completing-the-editing-interface"></a><span data-ttu-id="2858c-234">4\. Adım: düzen arabirimini tamamlama</span><span class="sxs-lookup"><span data-stu-id="2858c-234">Step 4: Completing the Editing Interface</span></span>

<span data-ttu-id="2858c-235">İlerleme durumunu görüntülemek için, ' i duraklatmadan GridView s şablonlarında birkaç değişiklik yaptık.</span><span class="sxs-lookup"><span data-stu-id="2858c-235">We ve made a number of changes to the GridView s templates without pausing to view our progress.</span></span> <span data-ttu-id="2858c-236">Bir tarayıcıdan ilerleme durumunu görüntülemek için bir dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="2858c-236">Take a moment to view our progress through a browser.</span></span> <span data-ttu-id="2858c-237">Şekil 13 ' te gösterildiği gibi, her satır, onun `ItemTemplate`kullanılarak işlenir ve bu da hücre s Editing arabirimini içerir.</span><span class="sxs-lookup"><span data-stu-id="2858c-237">As Figure 13 shows, each row is rendered using its `ItemTemplate`, which contains the cell s editing interface.</span></span>

<span data-ttu-id="2858c-238">[Her GridView satırı ![düzenlenebilir](batch-updating-cs/_static/image13.gif)](batch-updating-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="2858c-238">[![Each GridView Row is Editable](batch-updating-cs/_static/image13.gif)](batch-updating-cs/_static/image21.png)</span></span>

<span data-ttu-id="2858c-239">**Şekil 13**: her GridView satırı düzenlenebilir ([tam boyutlu görüntüyü görüntülemek için tıklayın](batch-updating-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="2858c-239">**Figure 13**: Each GridView Row is Editable ([Click to view full-size image](batch-updating-cs/_static/image22.png))</span></span>

<span data-ttu-id="2858c-240">Bu noktada ilgilenmemiz gereken birkaç küçük biçimlendirme sorunu vardır.</span><span class="sxs-lookup"><span data-stu-id="2858c-240">There are a few minor formatting issues that we should take care of at this point.</span></span> <span data-ttu-id="2858c-241">İlk olarak, `UnitPrice` değerinin dört ondalık noktası içerdiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="2858c-241">First, note that the `UnitPrice` value contains four decimal points.</span></span> <span data-ttu-id="2858c-242">Bunu yapmak için, `UnitPrice` TemplateField s `ItemTemplate` geri dönüp metin kutusu s akıllı etiketinden, DataBindings 'i düzenle bağlantısına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2858c-242">To fix this, return to the `UnitPrice` TemplateField s `ItemTemplate` and, from the TextBox s smart tag, click on the Edit DataBindings link.</span></span> <span data-ttu-id="2858c-243">Sonra, `Text` özelliğinin bir sayı olarak biçimlendirilmesi gerektiğini belirtin.</span><span class="sxs-lookup"><span data-stu-id="2858c-243">Next, specify that the `Text` property should be formatted as a number.</span></span>

![Metin özelliğini bir sayı olarak biçimlendirin](batch-updating-cs/_static/image14.gif)

<span data-ttu-id="2858c-245">**Şekil 14**: `Text` özelliğini sayı olarak biçimlendirme</span><span class="sxs-lookup"><span data-stu-id="2858c-245">**Figure 14**: Format the `Text` Property as a Number</span></span>

<span data-ttu-id="2858c-246">İkincisi, `Discontinued` sütunundaki onay kutusunu ortalamasına izin ver (sola hizalı olmasını yerine).</span><span class="sxs-lookup"><span data-stu-id="2858c-246">Second, let s center the checkbox in the `Discontinued` column (rather than having it left-aligned).</span></span> <span data-ttu-id="2858c-247">GridView s akıllı etiketinden sütunları Düzenle ' ye tıklayın ve sol alt köşedeki alanlar listesinden `Discontinued` TemplateField ' ı seçin.</span><span class="sxs-lookup"><span data-stu-id="2858c-247">Click on Edit Columns from the GridView s smart tag and select the `Discontinued` TemplateField from the list of fields in the bottom left corner.</span></span> <span data-ttu-id="2858c-248">`ItemStyle` detaya gidin ve şekil 15 ' te gösterildiği gibi `HorizontalAlign` özelliğini Center olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="2858c-248">Drill down into `ItemStyle` and set the `HorizontalAlign` property to Center as shown in Figure 15.</span></span>

![Discontinued onay kutusunu Ortala](batch-updating-cs/_static/image15.gif)

<span data-ttu-id="2858c-250">**Şekil 15**: `Discontinued` onay kutusunu ortalayın</span><span class="sxs-lookup"><span data-stu-id="2858c-250">**Figure 15**: Center the `Discontinued` CheckBox</span></span>

<span data-ttu-id="2858c-251">Sonra, sayfaya bir ValidationSummary denetimi ekleyin ve `ShowMessageBox` özelliğini `true` ve `ShowSummary` özelliğini `false`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="2858c-251">Next, add a ValidationSummary control to the page and set its `ShowMessageBox` property to `true` and its `ShowSummary` property to `false`.</span></span> <span data-ttu-id="2858c-252">Ayrıca, tıklandığında Kullanıcı değişikliklerinin güncelleştirilmesini sağlayacak olan düğme Web denetimlerini de ekleyin.</span><span class="sxs-lookup"><span data-stu-id="2858c-252">Also add the Button Web controls that, when clicked, will update the user s changes.</span></span> <span data-ttu-id="2858c-253">Özellikle, GridView 'un üzerinde bir tane olmak üzere iki düğme web denetimi ekleyin, her iki denetimi de ürünleri güncelleştirmek için `Text` özellikleri.</span><span class="sxs-lookup"><span data-stu-id="2858c-253">Specifically, add two Button Web controls, one above the GridView and one below it, setting both controls `Text` properties to Update Products .</span></span>

<span data-ttu-id="2858c-254">GridView s Düzenle arabirimi TemplateFields `ItemTemplate` s içinde tanımlandığından, `EditItemTemplate` s gereksiz olduğundan silinebilir.</span><span class="sxs-lookup"><span data-stu-id="2858c-254">Since the GridView s editing interface is defined in its TemplateFields `ItemTemplate` s, the `EditItemTemplate` s are superfluous and may be deleted.</span></span>

<span data-ttu-id="2858c-255">Yukarıda bahsedilen biçimlendirme değişikliklerini yaptıktan sonra, düğme denetimlerini ekleyerek ve gereksiz `EditItemTemplate` s 'yi kaldırarak, sayfa oluşturma sözdiziminizin aşağıdaki gibi görünmesi gerekir:</span><span class="sxs-lookup"><span data-stu-id="2858c-255">After making the above mentioned formatting changes, adding the Button controls, and removing the unnecessary `EditItemTemplate` s, your page s declarative syntax should look like the following:</span></span>

[!code-aspx[Main](batch-updating-cs/samples/sample4.aspx)]

<span data-ttu-id="2858c-256">Şekil 16, düğme Web denetimleri eklendikten ve biçimlendirme değişiklikleri yapıldıktan sonra bir tarayıcı aracılığıyla görüntülendiğinde bu sayfayı gösterir.</span><span class="sxs-lookup"><span data-stu-id="2858c-256">Figure 16 shows this page when viewed through a browser after the Button Web controls have been added and the formatting changes made.</span></span>

<span data-ttu-id="2858c-257">[Sayfa ![artık Iki güncelleştirme ürünü düğmesi Içerir](batch-updating-cs/_static/image16.gif)](batch-updating-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="2858c-257">[![The Page Now Includes Two Update Products Buttons](batch-updating-cs/_static/image16.gif)](batch-updating-cs/_static/image23.png)</span></span>

<span data-ttu-id="2858c-258">**Şekil 16**: sayfa artık Iki güncelleştirme ürünü düğmesi içerir ([tam boyutlu görüntüyü görüntülemek için tıklayın](batch-updating-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="2858c-258">**Figure 16**: The Page Now Includes Two Update Products Buttons ([Click to view full-size image](batch-updating-cs/_static/image24.png))</span></span>

## <a name="step-5-updating-the-products"></a><span data-ttu-id="2858c-259">5\. Adım: ürünleri güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="2858c-259">Step 5: Updating the Products</span></span>

<span data-ttu-id="2858c-260">Bir Kullanıcı bu sayfayı ziyaret ettiğinde, değişiklikleri yapar ve ardından iki güncelleştirme ürünü düğmesinden birine tıklamaları gerekir.</span><span class="sxs-lookup"><span data-stu-id="2858c-260">When a user visits this page they will make their modifications and then click one of the two Update Products buttons.</span></span> <span data-ttu-id="2858c-261">Bu noktada, her satır için Kullanıcı tarafından girilen değerleri bir `ProductsDataTable` örneğine kaydetmeniz ve sonra bu `ProductsDataTable` örneğini DAL s `UpdateWithTransaction` yöntemine geçirecek bir BLL yöntemine iletmemiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="2858c-261">At that point we need to somehow save the user-entered values for each row into a `ProductsDataTable` instance and then pass that to a BLL method that will then pass that `ProductsDataTable` instance to the DAL s `UpdateWithTransaction` method.</span></span> <span data-ttu-id="2858c-262">[Önceki öğreticide](wrapping-database-modifications-within-a-transaction-cs.md)oluşturduğumuz `UpdateWithTransaction` yöntemi, değişiklik toplu işinin atomik bir işlem olarak güncelleştirilmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="2858c-262">The `UpdateWithTransaction` method, which we created in the [preceding tutorial](wrapping-database-modifications-within-a-transaction-cs.md), ensures that the batch of changes will be updated as an atomic operation.</span></span>

<span data-ttu-id="2858c-263">`BatchUpdate.aspx.cs` `BatchUpdate` adlı bir yöntem oluşturun ve aşağıdaki kodu ekleyin:</span><span class="sxs-lookup"><span data-stu-id="2858c-263">Create a method named `BatchUpdate` in `BatchUpdate.aspx.cs` and add the following code:</span></span>

[!code-csharp[Main](batch-updating-cs/samples/sample5.cs)]

<span data-ttu-id="2858c-264">Bu yöntem, BLL s `GetProducts` yöntemine yapılan bir çağrı aracılığıyla `ProductsDataTable` tüm ürünleri geri alarak başlatılır.</span><span class="sxs-lookup"><span data-stu-id="2858c-264">This method starts out by getting all of the products back in a `ProductsDataTable` via a call to the BLL s `GetProducts` method.</span></span> <span data-ttu-id="2858c-265">Ardından `ProductGrid` GridView s [`Rows` koleksiyonunu](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rows(VS.80).aspx)numaralandırır.</span><span class="sxs-lookup"><span data-stu-id="2858c-265">It then enumerates the `ProductGrid` GridView s [`Rows` collection](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rows(VS.80).aspx).</span></span> <span data-ttu-id="2858c-266">`Rows` koleksiyonu, GridView 'da görünen her satır için bir [`GridViewRow` örneği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridviewrow.aspx) içerir.</span><span class="sxs-lookup"><span data-stu-id="2858c-266">The `Rows` collection contains a [`GridViewRow` instance](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridviewrow.aspx) for each row displayed in the GridView.</span></span> <span data-ttu-id="2858c-267">Sayfa başına en fazla on satır gösterdiğimiz için, GridView s `Rows` koleksiyonda on öğeden fazla öğe olmayacaktır.</span><span class="sxs-lookup"><span data-stu-id="2858c-267">Since we are showing at most ten rows per page, the GridView s `Rows` collection will have no more than ten items.</span></span>

<span data-ttu-id="2858c-268">Her satır için `ProductID` `DataKeys` koleksiyonundan bir şekilde belirlenir ve `ProductsDataTable`uygun `ProductsRow` seçilir.</span><span class="sxs-lookup"><span data-stu-id="2858c-268">For each row the `ProductID` is grabbed from the `DataKeys` collection and the appropriate `ProductsRow` is selected from the `ProductsDataTable`.</span></span> <span data-ttu-id="2858c-269">Program aracılığıyla dört adet TemplateField giriş denetimine başvurulur ve bunların değerleri `ProductsRow` örnek s özelliklerine atanır.</span><span class="sxs-lookup"><span data-stu-id="2858c-269">The four TemplateField input controls are programmatically referenced and their values assigned to the `ProductsRow` instance s properties.</span></span> <span data-ttu-id="2858c-270">Her bir GridView satır s değeri `ProductsDataTable`güncelleştirmek için kullanıldıktan sonra, bu, önceki öğretic`UpdateWithTransaction` ide gördüğünüz gibi BLL s `UpdateWithTransaction` yöntemine geçirilir.</span><span class="sxs-lookup"><span data-stu-id="2858c-270">After each GridView row s values have been used to update the `ProductsDataTable`, it s passed to the BLL s `UpdateWithTransaction` method which, as we saw in the preceding tutorial, simply calls down into the DAL s `UpdateWithTransaction` method.</span></span>

<span data-ttu-id="2858c-271">Bu öğretici için kullanılan Batch güncelleştirme algoritması, ürün bilgilerinin değiştirilip değiştirilmediğine bakılmaksızın GridView 'daki bir satıra karşılık gelen `ProductsDataTable` her satırı güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="2858c-271">The batch update algorithm used for this tutorial updates each row in the `ProductsDataTable` that corresponds to a row in the GridView, regardless of whether the product s information has been changed.</span></span> <span data-ttu-id="2858c-272">Bu görünmeyen güncelleştirmeler genellikle bir performans sorunu olsa da, veritabanı tablosunda yapılan değişiklikleri yeniden denetlebiliyorsanız, bu değişiklikler gereksiz kayıtlara yol açabilir.</span><span class="sxs-lookup"><span data-stu-id="2858c-272">While such blind updates aren't usually a performance issue, they can lead to superfluous records if you re auditing changes to the database table.</span></span> <span data-ttu-id="2858c-273">[Toplu güncelleştirmeler gerçekleştirme](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) öğreticisine geri döndüğünüzde, DataList ve yalnızca Kullanıcı tarafından değiştirilen kayıtları güncelleştirecek kod içeren bir toplu güncelleştirme arabirimi araştırdık.</span><span class="sxs-lookup"><span data-stu-id="2858c-273">Back in the [Performing Batch Updates](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) tutorial we explored a batch updating interface with the DataList and added code that would only update those records that were actually modified by the user.</span></span> <span data-ttu-id="2858c-274">İsterseniz bu öğreticide kodu güncelleştirmek için [toplu güncelleştirmeler gerçekleştirmekten](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) yararlanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2858c-274">Feel free to use the techniques from [Performing Batch Updates](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) to update the code in this tutorial, if desired.</span></span>

> [!NOTE]
> <span data-ttu-id="2858c-275">Veri kaynağı GridView 'a akıllı etiketi aracılığıyla bağlarken, Visual Studio veri kaynağı s birincil anahtar değerlerini otomatik olarak GridView s `DataKeyNames` özelliğine atar.</span><span class="sxs-lookup"><span data-stu-id="2858c-275">When binding the data source to the GridView through its smart tag, Visual Studio automatically assigns the data source s primary key value(s) to the GridView s `DataKeyNames` property.</span></span> <span data-ttu-id="2858c-276">Adım 1 ' de özetlenen GridView 'un akıllı etiketi aracılığıyla ObjectDataSource 'u GridView 'a bağladıysanız, her bir satır için `ProductID` değerine `DataKeys` koleksiyonu aracılığıyla erişmek için GridView s `DataKeyNames` özelliğini el ile ProductID olarak ayarlamanız gerekecektir.</span><span class="sxs-lookup"><span data-stu-id="2858c-276">If you did not bind the ObjectDataSource to the GridView through the GridView s smart tag as outlined in Step 1, then you will need to manually set the GridView s `DataKeyNames` property to ProductID in order to access the `ProductID` value for each row through the `DataKeys` collection.</span></span>

<span data-ttu-id="2858c-277">`BatchUpdate` kullanılan kod BLL s `UpdateProduct` yöntemlerinde kullanılanlara benzerdir; `UpdateProduct` yöntemlerinde yalnızca tek bir `ProductRow` örneği, mimariden alınan asıl farktır.</span><span class="sxs-lookup"><span data-stu-id="2858c-277">The code used in `BatchUpdate` is similar to that used in the BLL s `UpdateProduct` methods, the main difference being that in the `UpdateProduct` methods only a single `ProductRow` instance is retrieved from the architecture.</span></span> <span data-ttu-id="2858c-278">`ProductRow` özelliklerini atayan kod, genel bir düzende olduğu gibi, `BatchUpdate`içindeki `foreach` döngüsünde bulunan `UpdateProducts` yöntemleri ve kodla aynıdır.</span><span class="sxs-lookup"><span data-stu-id="2858c-278">The code that assigns the properties of the `ProductRow` is the same between the `UpdateProducts` methods and the code within the `foreach` loop in `BatchUpdate`, as is the overall pattern.</span></span>

<span data-ttu-id="2858c-279">Bu öğreticiyi tamamlayabilmeniz için, güncelleştirme ürünleri düğmelerinden herhangi biri tıklandığında `BatchUpdate` yönteminin çağrılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="2858c-279">To complete this tutorial, we need to have the `BatchUpdate` method invoked when either of the Update Products buttons is clicked.</span></span> <span data-ttu-id="2858c-280">Bu iki düğme denetiminin `Click` olayları için olay işleyicileri oluşturun ve olay işleyicilerinde aşağıdaki kodu ekleyin:</span><span class="sxs-lookup"><span data-stu-id="2858c-280">Create event handlers for the `Click` events of these two Button controls and add the following code in the event handlers:</span></span>

[!code-csharp[Main](batch-updating-cs/samples/sample6.cs)]

<span data-ttu-id="2858c-281">`BatchUpdate`için ilk çağrı yapılır.</span><span class="sxs-lookup"><span data-stu-id="2858c-281">First a call is made to `BatchUpdate`.</span></span> <span data-ttu-id="2858c-282">Ardından `ClientScript property`, güncelleştirilmiş ürünleri okuyan bir MessageBox görüntüleyen JavaScript eklemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="2858c-282">Next, the `ClientScript property` is used to inject JavaScript that will display a messagebox that reads The products have been updated.</span></span>

<span data-ttu-id="2858c-283">Bu kodu sınamak için bir dakikanızı alın.</span><span class="sxs-lookup"><span data-stu-id="2858c-283">Take a minute to test out this code.</span></span> <span data-ttu-id="2858c-284">Tarayıcı aracılığıyla `BatchUpdate.aspx` ziyaret edin, bir dizi satırı düzenleyin ve güncelleştirme ürünleri düğmelerinden birine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2858c-284">Visit `BatchUpdate.aspx` through a browser, edit a number of rows, and click one of the Update Products buttons.</span></span> <span data-ttu-id="2858c-285">Hiç giriş doğrulama hatası olmadığı varsayılarak, güncelleştirilmiş ürünleri okuyan bir MessageBox görmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="2858c-285">Assuming there are no input validation errors, you should see a messagebox that reads The products have been updated.</span></span> <span data-ttu-id="2858c-286">Güncelleştirmenin kararlılığını doğrulamak için, `UnitPrice` 1234,56 değerine izin vermeyen bir rastgele `CHECK` kısıtlaması eklemeyi göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="2858c-286">To verify the atomicity of the update, consider adding a random `CHECK` constraint, like one that disallows `UnitPrice` values of 1234.56.</span></span> <span data-ttu-id="2858c-287">`BatchUpdate.aspx`, bir dizi kaydı düzenleyin ve ürün `UnitPrice` değerinden birini yasak değere (1234,56) ayarladığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="2858c-287">Then from `BatchUpdate.aspx`, edit a number of records, making sure to set one of the product s `UnitPrice` value to the forbidden value ( 1234.56 ).</span></span> <span data-ttu-id="2858c-288">Bu, toplu işlem sırasında orijinal değerlerine geri alındığında diğer değişikliklerle ürünleri Güncelleştir ' e tıkladığınızda bir hatayla sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="2858c-288">This should result in an error when clicking Update Products with the other changes during that batch operation rolled back to their original values.</span></span>

## <a name="an-alternativebatchupdatemethod"></a><span data-ttu-id="2858c-289">Alternatif bir`BatchUpdate`yöntemi</span><span class="sxs-lookup"><span data-stu-id="2858c-289">An Alternative`BatchUpdate`Method</span></span>

<span data-ttu-id="2858c-290">Az önce incelediğimiz `BatchUpdate` yöntemi BLL s `GetProducts` yönteminden *Tüm* ürünleri alır ve ardından GridView içinde görünen kayıtları güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="2858c-290">The `BatchUpdate` method we just examined retrieves *all* of the products from the BLL s `GetProducts` method and then updates just those records that appear in the GridView.</span></span> <span data-ttu-id="2858c-291">GridView, sayfalama kullanmıyorsa bu yaklaşım idealdir, ancak varsa yüzlerce, binlerce veya onlarca binlerce ürün, ancak GridView içinde yalnızca on satır olabilir.</span><span class="sxs-lookup"><span data-stu-id="2858c-291">This approach is ideal if the GridView does not use paging, but if it does, there may be hundreds, thousands, or tens of thousands of products, but only ten rows in the GridView.</span></span> <span data-ttu-id="2858c-292">Böyle bir durumda, veritabanındaki tüm ürünlerin yalnızca 10 ' u değiştirmek ideal olandan düşüktür.</span><span class="sxs-lookup"><span data-stu-id="2858c-292">In such a case, getting all of the products from the database only to modify 10 of them is less than ideal.</span></span>

<span data-ttu-id="2858c-293">Bu tür durumlar için, bunun yerine aşağıdaki `BatchUpdateAlternate` yöntemini kullanmayı göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="2858c-293">For those types of situations, consider using the following `BatchUpdateAlternate` method instead:</span></span>

[!code-csharp[Main](batch-updating-cs/samples/sample7.cs)]

<span data-ttu-id="2858c-294">`BatchMethodAlternate`, `products`adlı yeni bir boş `ProductsDataTable` oluşturarak başlar.</span><span class="sxs-lookup"><span data-stu-id="2858c-294">`BatchMethodAlternate` starts by creating a new empty `ProductsDataTable` named `products`.</span></span> <span data-ttu-id="2858c-295">Ardından, GridView s `Rows` koleksiyonu ve her satır için BLL s `GetProductByProductID(productID)` yöntemini kullanarak belirli ürün bilgilerini alır.</span><span class="sxs-lookup"><span data-stu-id="2858c-295">It then steps through the GridView s `Rows` collection and for each row gets the particular product information using the BLL s `GetProductByProductID(productID)` method.</span></span> <span data-ttu-id="2858c-296">Alınan `ProductsRow` örneğinin özellikleri `BatchUpdate`aynı şekilde güncelleştirilir, ancak satırı güncelleştirdikten sonra DataTable s [`ImportRow(DataRow)` yöntemi](https://msdn.microsoft.com/library/system.data.datatable.importrow(VS.80).aspx)aracılığıyla `products``ProductsDataTable` içeri aktarılır.</span><span class="sxs-lookup"><span data-stu-id="2858c-296">The retrieved `ProductsRow` instance has its properties updated in the same fashion as `BatchUpdate`, but after updating the row it is imported into the `products``ProductsDataTable` via the DataTable s [`ImportRow(DataRow)` method](https://msdn.microsoft.com/library/system.data.datatable.importrow(VS.80).aspx).</span></span>

<span data-ttu-id="2858c-297">`foreach` döngüsü tamamlandıktan sonra, `products` GridView 'daki her satır için bir `ProductsRow` örneği içerir.</span><span class="sxs-lookup"><span data-stu-id="2858c-297">After the `foreach` loop completes, `products` contains one `ProductsRow` instance for each row in the GridView.</span></span> <span data-ttu-id="2858c-298">`ProductsRow` örneklerinin her biri `products` eklenmiş olduğundan (güncelleştirilmiş yerine), `UpdateWithTransaction` yöntemine bir şekilde geçirirseniz, `ProductsTableAdapter` kayıtların her birini veritabanına eklemeye çalışacaktır.</span><span class="sxs-lookup"><span data-stu-id="2858c-298">Since each of the `ProductsRow` instances have been added to the `products` (instead of updated), if we blindly pass it to the `UpdateWithTransaction` method the `ProductsTableAdapter` will try to insert each of the records into the database.</span></span> <span data-ttu-id="2858c-299">Bunun yerine, bu satırların her birinin değiştirildiğini (eklenmemiş) belirtmemiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="2858c-299">Instead, we need to specify that each of these rows has been modified (not added).</span></span>

<span data-ttu-id="2858c-300">Bu, BLL adlı `UpdateProductsWithTransaction`yeni bir yöntem eklenerek gerçekleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="2858c-300">This can be accomplished by adding a new method to the BLL named `UpdateProductsWithTransaction`.</span></span> <span data-ttu-id="2858c-301">Aşağıda gösterilen `UpdateProductsWithTransaction`, `ProductsDataTable` `ProductsRow` örneklerinin her birinin `RowState` `Modified` ve ardından `ProductsDataTable` DAL s `UpdateWithTransaction` yöntemine geçirir.</span><span class="sxs-lookup"><span data-stu-id="2858c-301">`UpdateProductsWithTransaction`, shown below, sets the `RowState` of each of the `ProductsRow` instances in the `ProductsDataTable` to `Modified` and then passes the `ProductsDataTable` to the DAL s `UpdateWithTransaction` method.</span></span>

[!code-csharp[Main](batch-updating-cs/samples/sample8.cs)]

## <a name="summary"></a><span data-ttu-id="2858c-302">Özet</span><span class="sxs-lookup"><span data-stu-id="2858c-302">Summary</span></span>

<span data-ttu-id="2858c-303">GridView, yerleşik satır başına düzenleme özellikleri sağlar, ancak tamamen düzenlenebilir arabirimler oluşturma desteği yoktur.</span><span class="sxs-lookup"><span data-stu-id="2858c-303">The GridView provides built-in per-row editing capabilities, but lacks support for creating fully editable interfaces.</span></span> <span data-ttu-id="2858c-304">Bu öğreticide gördüğünüz gibi, bu tür arabirimler mümkündür ancak biraz iş gerektirir.</span><span class="sxs-lookup"><span data-stu-id="2858c-304">As we saw in this tutorial, such interfaces are possible, but require a bit of work.</span></span> <span data-ttu-id="2858c-305">Her satırın düzenlenebildiği bir GridView oluşturmak için, GridView s alanlarını TemplateFields 'e dönüştürmemiz ve `ItemTemplate` s içinde düzenleme arabirimini tanımlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2858c-305">To create a GridView where every row is editable, we need to convert the GridView s fields into TemplateFields and define the editing interface within the `ItemTemplate` s.</span></span> <span data-ttu-id="2858c-306">Ayrıca, Update All-Type düğme Web denetimlerini, GridView 'dan ayrı olarak sayfaya eklenmelidir.</span><span class="sxs-lookup"><span data-stu-id="2858c-306">Additionally, Update All -type Button Web controls must be added to the page, separate from the GridView.</span></span> <span data-ttu-id="2858c-307">Bu düğmeler `Click` olay işleyicilerinin GridView s `Rows` koleksiyonunu numaralandırması, değişiklikleri bir `ProductsDataTable`depolaması ve güncelleştirilmiş bilgileri uygun BLL yöntemine geçirmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="2858c-307">These Buttons `Click` event handlers need to enumerate the GridView s `Rows` collection, store the changes in a `ProductsDataTable`, and pass the updated information into the appropriate BLL method.</span></span>

<span data-ttu-id="2858c-308">Sonraki öğreticide toplu silme için bir arabirim oluşturma hakkında bilgi edineceksiniz.</span><span class="sxs-lookup"><span data-stu-id="2858c-308">In the next tutorial we'll see how to create an interface for batch deleting.</span></span> <span data-ttu-id="2858c-309">Özellikle, her GridView satırı bir onay kutusu içerir ve tüm tür düğmelerini güncelleştirmek yerine seçili satırları sil düğmelerini kullanacağız.</span><span class="sxs-lookup"><span data-stu-id="2858c-309">In particular, each GridView row will include a checkbox and instead of Update All -type buttons, we'll have Delete Selected Rows buttons.</span></span>

<span data-ttu-id="2858c-310">Programlamanın kutlu olsun!</span><span class="sxs-lookup"><span data-stu-id="2858c-310">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="2858c-311">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="2858c-311">About the Author</span></span>

<span data-ttu-id="2858c-312">4GuysFromRolla.com 'in, [Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), yedi ASP/ASP. net books ve [](http://www.4guysfromrolla.com)'in yazarı, 1998 sürümünden bu yana Microsoft Web teknolojileriyle çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="2858c-312">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="2858c-313">Scott bağımsız danışman, Trainer ve yazıcı olarak çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="2858c-313">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="2858c-314">En son kitabı, [*24 saat içinde ASP.NET 2,0 kendi kendinize eğitim*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)ister.</span><span class="sxs-lookup"><span data-stu-id="2858c-314">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="2858c-315">mitchell@4GuysFromRolla.comadresinden erişilebilir [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="2858c-315">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="2858c-316">ya da blog aracılığıyla [http://ScottOnWriting.NET](http://ScottOnWriting.NET)bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2858c-316">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="2858c-317">Özel olarak teşekkürler</span><span class="sxs-lookup"><span data-stu-id="2858c-317">Special Thanks To</span></span>

<span data-ttu-id="2858c-318">Bu öğretici serisi birçok yararlı gözden geçirenler tarafından incelendi.</span><span class="sxs-lookup"><span data-stu-id="2858c-318">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="2858c-319">Bu öğreticide lider gözden geçirenler, bir Murphy ve David suru olarak eklenmiştir.</span><span class="sxs-lookup"><span data-stu-id="2858c-319">Lead reviewers for this tutorial were Teresa Murphy and David Suru.</span></span> <span data-ttu-id="2858c-320">Yaklaşan MSDN makalelerimi gözden geçiriyor musunuz?</span><span class="sxs-lookup"><span data-stu-id="2858c-320">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="2858c-321">Öyleyse, benimitchell@4GuysFromRolla.combir satır bırakın [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="2858c-321">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="2858c-322">[Önceki](wrapping-database-modifications-within-a-transaction-cs.md)
> [İleri](batch-deleting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="2858c-322">[Previous](wrapping-database-modifications-within-a-transaction-cs.md)
[Next](batch-deleting-cs.md)</span></span>
