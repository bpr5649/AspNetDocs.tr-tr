---
uid: web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs
title: Toplu güncelleştirmeler (C#) gerçekleştirme | Microsoft Docs
author: rick-anderson
description: Bir tam olarak düzenlenebilir oluşturmayı öğrenin DataList tüm öğeleri nerede içinde düzenleme modu ve değerleri, bir 'Tümünü Güncelleştir' düğmesini tıklatarak kaydedilebilir...
ms.author: riande
ms.date: 10/30/2006
ms.assetid: 57743ca7-5695-4e07-aed1-44b297f245a9
msc.legacyurl: /web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs
msc.type: authoredcontent
ms.openlocfilehash: 388637d67594d6431a134673cf85b3b18098136e
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59402758"
---
# <a name="performing-batch-updates-c"></a><span data-ttu-id="74b0c-103">Toplu Güncelleştirmeler Gerçekleştirme (C#)</span><span class="sxs-lookup"><span data-stu-id="74b0c-103">Performing Batch Updates (C#)</span></span>

<span data-ttu-id="74b0c-104">tarafından [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="74b0c-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="74b0c-105">[Örnek uygulamayı indirin](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_37_CS.exe) veya [PDF olarak indirin](performing-batch-updates-cs/_static/datatutorial37cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="74b0c-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_37_CS.exe) or [Download PDF](performing-batch-updates-cs/_static/datatutorial37cs1.pdf)</span></span>

> <span data-ttu-id="74b0c-106">Bir tam olarak düzenlenebilir oluşturmayı öğrenin DataList tüm öğeleri nerede içinde düzenleme modu ve değerleri, sayfada bir "Tümünü Güncelleştir" düğmesine tıklayarak kaydedilebilir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-106">Learn how to create a fully-editable DataList where all of its items are in edit mode and whose values can be saved by clicking an "Update All" button on the page.</span></span>


## <a name="introduction"></a><span data-ttu-id="74b0c-107">Giriş</span><span class="sxs-lookup"><span data-stu-id="74b0c-107">Introduction</span></span>

<span data-ttu-id="74b0c-108">İçinde [önceki öğretici](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md) biz bir öğe düzeyinde DataList oluşturma incelenir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-108">In the [preceding tutorial](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md) we examined how to create an item-level DataList.</span></span> <span data-ttu-id="74b0c-109">Standart düzenlenebilir GridView her öğe DataList'te dahil gibi bir düzenleme düğmesi, tıklanan, öğesi düzenlenebilir hale getirir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-109">Like the standard editable GridView, each item in the DataList included an Edit button that, when clicked, would make the item editable.</span></span> <span data-ttu-id="74b0c-110">Bu öğe düzeyinde de yalnızca zaman zaman güncelleştirilir veri için düzenleme çalışır, ancak belirli bir kullanım örneği senaryolarını birçok kaydını düzenlemek kullanıcının gerektirir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-110">While this item-level editing works well for data that is only updated occasionally, certain use case scenarios require the user to edit many records.</span></span> <span data-ttu-id="74b0c-111">Bir kullanıcı, kayıt onlarca düzenlemek gereken ve Düzenle'ye tıklayın, yaptıkları değişiklikleri yapın ve her biri için Güncelleştir'e tıklayın zorlanır tıklayarak miktarını kendi üretkenlik engel olabilir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-111">If a user needs to edit dozens of records and is forced to click Edit, make their changes, and click Update for each one, the amount of clicking can hamper her productivity.</span></span> <span data-ttu-id="74b0c-112">Bu gibi durumlarda, tam olarak düzenlenebilir bir DataList sağlamak için daha iyi bir seçenek olan bir *tüm* öğelerinden olan düzenleme modu ve değerleri, bir sayfa Tümünü Güncelleştir düğmesine tıklayarak düzenlenebilir (bkz. Şekil 1).</span><span class="sxs-lookup"><span data-stu-id="74b0c-112">In such situations, a better option is to provide a fully-editable DataList, one where *all* of its items are in edit mode and whose values can be edited by clicking an Update All button on the page (see Figure 1).</span></span>


<span data-ttu-id="74b0c-113">[![Her bir tam olarak düzenlenebilir DataList öğesi değiştirilebilir](performing-batch-updates-cs/_static/image2.png)](performing-batch-updates-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="74b0c-113">[![Each Item in a Fully Editable DataList can be Modified](performing-batch-updates-cs/_static/image2.png)](performing-batch-updates-cs/_static/image1.png)</span></span>

<span data-ttu-id="74b0c-114">**Şekil 1**: Her bir tam olarak düzenlenebilir DataList öğesi değiştirilebilir ([tam boyutlu görüntüyü görmek için tıklatın](performing-batch-updates-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="74b0c-114">**Figure 1**: Each Item in a Fully Editable DataList can be Modified ([Click to view full-size image](performing-batch-updates-cs/_static/image3.png))</span></span>


<span data-ttu-id="74b0c-115">Bu öğreticide kullanıcıların tam olarak düzenlenebilir bir DataList kullanarak tedarikçileri adres bilgilerini güncelleştirmesine olanak tanımak nasıl inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="74b0c-115">In this tutorial we'll examine how to enable users to update suppliers address information using a fully editable DataList.</span></span>

## <a name="step-1-create-the-editable-user-interface-in-the-datalist-s-itemtemplate"></a><span data-ttu-id="74b0c-116">1. Adım: DataList s ItemTemplate düzenlenebilir kullanıcı arabirimi oluşturma</span><span class="sxs-lookup"><span data-stu-id="74b0c-116">Step 1: Create the Editable User Interface in the DataList s ItemTemplate</span></span>

<span data-ttu-id="74b0c-117">Burada standart, öğe düzeyinde düzenlenebilir DataList oluşturma, şu iki şablon kullandık önceki öğreticide:</span><span class="sxs-lookup"><span data-stu-id="74b0c-117">In the preceding tutorial, where we creating a standard, item-level editable DataList, we used two templates:</span></span>

- <span data-ttu-id="74b0c-118">`ItemTemplate` salt okunur kullanıcı arabirimi (her bir ürün adı ve fiyat görüntülemek için etiket Web denetimleri) içeriyor.</span><span class="sxs-lookup"><span data-stu-id="74b0c-118">`ItemTemplate` contained the read-only user interface (the Label Web controls for displaying each product s name and price).</span></span>
- <span data-ttu-id="74b0c-119">`EditItemTemplate` düzenleme modu kullanıcı arabirimi (iki metin kutusuna Web denetimleri) içeriyor.</span><span class="sxs-lookup"><span data-stu-id="74b0c-119">`EditItemTemplate` contained the edit mode user interface (the two TextBox Web controls).</span></span>

<span data-ttu-id="74b0c-120">DataList s `EditItemIndex` özelliği belirleyen ne `DataListItem` (varsa) kullanılarak işlenir `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="74b0c-120">The DataList s `EditItemIndex` property dictates what `DataListItem` (if any) is rendered using the `EditItemTemplate`.</span></span> <span data-ttu-id="74b0c-121">Özellikle, `DataListItem` olan `ItemIndex` değerle s DataList `EditItemIndex` özelliği kullanılarak işlenir `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="74b0c-121">In particular, the `DataListItem` whose `ItemIndex` value matches the DataList s `EditItemIndex` property is rendered using the `EditItemTemplate`.</span></span> <span data-ttu-id="74b0c-122">Bu model, iyi yalnızca bir öğe bir zaman ancak uzaklıkta yer alan tam olarak düzenlenebilir bir DataList oluştururken düzenlenebilir olduğunda çalışır.</span><span class="sxs-lookup"><span data-stu-id="74b0c-122">This model works well when only one item can be edited at a time, but falls apart when creating a fully-editable DataList.</span></span>

<span data-ttu-id="74b0c-123">İçin tam olarak düzenlenebilir bir DataList, istediğimiz *tüm* , `DataListItem` düzenlenebilir arabirimini kullanarak işlemek için s.</span><span class="sxs-lookup"><span data-stu-id="74b0c-123">For a fully editable DataList, we want *all* of the `DataListItem` s to render using the editable interface.</span></span> <span data-ttu-id="74b0c-124">Bunu yapmanın en kolay yolu düzenlenebilir arabiriminde tanımlamaktır `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="74b0c-124">The simplest way to accomplish this is to define the editable interface in the `ItemTemplate`.</span></span> <span data-ttu-id="74b0c-125">Tedarikçileri adres bilgilerini değiştirmek için adres, şehir ve ülke değerleri için sağlayıcı adı olarak metin ve metin kutuları düzenlenebilir arabirimi içerir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-125">For modifying the suppliers address information, the editable interface contains the supplier name as text and then TextBoxes for the address, city, and country values.</span></span>

<span data-ttu-id="74b0c-126">Başlangıç açarak `BatchUpdate.aspx` sayfasında bir DataList denetimi ekleyin ve ayarlayın, `ID` özelliğini `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="74b0c-126">Start by opening the `BatchUpdate.aspx` page, add a DataList control, and set its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="74b0c-127">DataList s akıllı etiketten adlı yeni bir ObjectDataSource denetimi eklemek için iyileştirilmiş `SuppliersDataSource`.</span><span class="sxs-lookup"><span data-stu-id="74b0c-127">From the DataList s smart tag, opt to add a new ObjectDataSource control named `SuppliersDataSource`.</span></span>


<span data-ttu-id="74b0c-128">[![SuppliersDataSource adlı yeni bir ObjectDataSource oluşturma](performing-batch-updates-cs/_static/image5.png)](performing-batch-updates-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="74b0c-128">[![Create a New ObjectDataSource Named SuppliersDataSource](performing-batch-updates-cs/_static/image5.png)](performing-batch-updates-cs/_static/image4.png)</span></span>

<span data-ttu-id="74b0c-129">**Şekil 2**: Adlı yeni bir ObjectDataSource oluşturma `SuppliersDataSource` ([tam boyutlu görüntüyü görmek için tıklatın](performing-batch-updates-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="74b0c-129">**Figure 2**: Create a New ObjectDataSource Named `SuppliersDataSource` ([Click to view full-size image](performing-batch-updates-cs/_static/image6.png))</span></span>


<span data-ttu-id="74b0c-130">ObjectDataSource ile veri almak için yapılandırma `SuppliersBLL` s sınıfı `GetSuppliers()` metodu (bkz: Şekil 3).</span><span class="sxs-lookup"><span data-stu-id="74b0c-130">Configure the ObjectDataSource to retrieve data using the `SuppliersBLL` class s `GetSuppliers()` method (see Figure 3).</span></span> <span data-ttu-id="74b0c-131">Önceki öğreticide, yerine gibi ObjectDataSource sağlayıcı bilgileri güncelleştiriliyor, doğrudan iş mantığı katmanı ile çalışırsınız.</span><span class="sxs-lookup"><span data-stu-id="74b0c-131">As with the preceding tutorial, rather than updating the supplier information through the ObjectDataSource, we'll work directly with the Business Logic Layer.</span></span> <span data-ttu-id="74b0c-132">Bu nedenle, güncelleştirme sekmesinde aşağı açılan listesine (hiçbiri) ayarlayın (bkz: Şekil 4).</span><span class="sxs-lookup"><span data-stu-id="74b0c-132">Therefore, set the drop-down list to (None) in the UPDATE tab (see Figure 4).</span></span>


<span data-ttu-id="74b0c-133">[![GetSuppliers() yöntemiyle sağlayıcı bilgileri alınamıyor](performing-batch-updates-cs/_static/image8.png)](performing-batch-updates-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="74b0c-133">[![Retrieve Supplier Information Using the GetSuppliers() Method](performing-batch-updates-cs/_static/image8.png)](performing-batch-updates-cs/_static/image7.png)</span></span>

<span data-ttu-id="74b0c-134">**Şekil 3**: Sağlayıcı bilgileri kullanarak almak `GetSuppliers()` yöntemi ([tam boyutlu görüntüyü görmek için tıklatın](performing-batch-updates-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="74b0c-134">**Figure 3**: Retrieve Supplier Information Using the `GetSuppliers()` Method ([Click to view full-size image](performing-batch-updates-cs/_static/image9.png))</span></span>


<span data-ttu-id="74b0c-135">[![Güncelleştirme sekmesinde aşağı açılan listesine (hiçbiri) ayarlayın](performing-batch-updates-cs/_static/image11.png)](performing-batch-updates-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="74b0c-135">[![Set the Drop-Down List to (None) in the UPDATE Tab](performing-batch-updates-cs/_static/image11.png)](performing-batch-updates-cs/_static/image10.png)</span></span>

<span data-ttu-id="74b0c-136">**Şekil 4**: Güncelleştirme sekmesinde aşağı açılan listesine (hiçbiri) ayarlayın ([tam boyutlu görüntüyü görmek için tıklatın](performing-batch-updates-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="74b0c-136">**Figure 4**: Set the Drop-Down List to (None) in the UPDATE Tab ([Click to view full-size image](performing-batch-updates-cs/_static/image12.png))</span></span>


<span data-ttu-id="74b0c-137">Sihirbazı tamamladıktan sonra Visual Studio otomatik olarak s DataList oluşturur `ItemTemplate` etiket Web denetiminde veri kaynağı tarafından döndürülen her veri alanı görüntülenecek.</span><span class="sxs-lookup"><span data-stu-id="74b0c-137">After completing the wizard, Visual Studio automatically generates the DataList s `ItemTemplate` to display each data field returned by the data source in a Label Web control.</span></span> <span data-ttu-id="74b0c-138">Bunun yerine düzenleme arabirimi sağlar, böylece bu şablonu değiştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-138">We need to modify this template so that it provides the editing interface instead.</span></span> <span data-ttu-id="74b0c-139">`ItemTemplate` Tasarımcısı DataList s akıllı etiket Şablonları Düzenle seçeneğini kullanarak veya doğrudan bildirim temelli söz dizimi aracılığıyla özelleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-139">The `ItemTemplate` can be customized through the Designer using the Edit Templates option from the DataList s smart tag or directly through the declarative syntax.</span></span>

<span data-ttu-id="74b0c-140">Sağlayıcı adı metin olarak görüntüler, ancak tedarikçi s Adres, şehir ve ülke değerleri için metin kutuları içeren bir düzenleme arabirim oluşturmak için bir dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="74b0c-140">Take a moment to create an editing interface that displays the supplier s name as text, but includes TextBoxes for the supplier s address, city, and country values.</span></span> <span data-ttu-id="74b0c-141">Bu değişiklikleri yaptıktan sonra sayfa s bildirim temelli sözdizimi aşağıdakine benzer görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="74b0c-141">After making these changes, your page s declarative syntax should look similar to the following:</span></span>


[!code-aspx[Main](performing-batch-updates-cs/samples/sample1.aspx)]

> [!NOTE]
> <span data-ttu-id="74b0c-142">Önceki öğreticide olarak bu öğreticideki DataList görünüm durumunu etkin olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="74b0c-142">As with the preceding tutorial, the DataList in this tutorial must have its view state enabled.</span></span>


<span data-ttu-id="74b0c-143">İçinde `ItemTemplate` miyim iki yeni CSS sınıfları kullanarak m `SupplierPropertyLabel` ve `SupplierPropertyValue`, hangi eklenmiştir `Styles.css` sınıfı ve aynı stili ayarları kullanacak şekilde yapılandırılmış `ProductPropertyLabel` ve `ProductPropertyValue` CSS sınıfları.</span><span class="sxs-lookup"><span data-stu-id="74b0c-143">In the `ItemTemplate` I m using two new CSS classes, `SupplierPropertyLabel` and `SupplierPropertyValue`, which have been added to the `Styles.css` class and configured to use the same style settings as the `ProductPropertyLabel` and `ProductPropertyValue` CSS classes.</span></span>


[!code-css[Main](performing-batch-updates-cs/samples/sample2.css)]

<span data-ttu-id="74b0c-144">Bu değişiklikleri yaptıktan sonra bir tarayıcı aracılığıyla bu sayfasını ziyaret edin.</span><span class="sxs-lookup"><span data-stu-id="74b0c-144">After making these changes, visit this page through a browser.</span></span> <span data-ttu-id="74b0c-145">Şekil 5 gösterildiği gibi her DataList öğesi üretici adı metin olarak görüntüler ve adres, şehir ve ülke görüntülenecek metin kutuları kullanır.</span><span class="sxs-lookup"><span data-stu-id="74b0c-145">As Figure 5 shows, each DataList item displays the supplier name as text and uses TextBoxes to display the address, city, and country.</span></span>


<span data-ttu-id="74b0c-146">[![DataList'te her tedarikçi düzenlenebilir olduğunu](performing-batch-updates-cs/_static/image14.png)](performing-batch-updates-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="74b0c-146">[![Each Supplier in the DataList is Editable](performing-batch-updates-cs/_static/image14.png)](performing-batch-updates-cs/_static/image13.png)</span></span>

<span data-ttu-id="74b0c-147">**Şekil 5**: DataList'te her tedarikçi düzenlenebilir olduğunu ([tam boyutlu görüntüyü görmek için tıklatın](performing-batch-updates-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="74b0c-147">**Figure 5**: Each Supplier in the DataList is Editable ([Click to view full-size image](performing-batch-updates-cs/_static/image15.png))</span></span>


## <a name="step-2-adding-an-update-all-button"></a><span data-ttu-id="74b0c-148">2. Adım: Bir güncelleştirme tüm düğme ekleme</span><span class="sxs-lookup"><span data-stu-id="74b0c-148">Step 2: Adding an Update All Button</span></span>

<span data-ttu-id="74b0c-149">Şekil 5'te her tedarikçi, adres, şehir ve ülke alanları bir metin kutusunda görüntülenen olsa da şu anda hiçbir güncelleştirme düğmesi mevcut değildir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-149">While each supplier in Figure 5 has its address, city, and country fields displayed in a TextBox, there currently is no Update button available.</span></span> <span data-ttu-id="74b0c-150">Öğe başına bir güncelleştir düğmesine bozmanın yerine ile tam olarak düzenlenebilir belirleyebilen genellikle bir tek güncelleştirme tüm düğme vardır sayfada, tıklandığında, güncelleştirmeleri *tüm* DataList'te kayıtlar.</span><span class="sxs-lookup"><span data-stu-id="74b0c-150">Rather than having an Update button per item, with fully editable DataLists there is typically a single Update All button on the page that, when clicked, updates *all* of the records in the DataList.</span></span> <span data-ttu-id="74b0c-151">Bu öğreticide, s (ya da düğmesi aynı etkinin olacağı rağmen) iki Tümünü Güncelleştir düğmesi - bir sayfanın üst ve alt bir ekleme olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="74b0c-151">For this tutorial, let s add two Update All buttons - one at the top of the page and one at the bottom (although clicking either button will have the same effect).</span></span>

<span data-ttu-id="74b0c-152">DataList ve kümesi üzerinde bir düğme Web denetimi ekleyerek başlangıç kendi `ID` özelliğini `UpdateAll1`.</span><span class="sxs-lookup"><span data-stu-id="74b0c-152">Start by adding a Button Web control above the DataList and set its `ID` property to `UpdateAll1`.</span></span> <span data-ttu-id="74b0c-153">Ardından, DataList altındaki ikinci düğme Web denetim ekleme ayarı kendi `ID` için `UpdateAll2`.</span><span class="sxs-lookup"><span data-stu-id="74b0c-153">Next, add the second Button Web control beneath the DataList, setting its `ID` to `UpdateAll2`.</span></span> <span data-ttu-id="74b0c-154">Ayarlama `Text` iki düğme için güncelleştirme tüm özellikleri.</span><span class="sxs-lookup"><span data-stu-id="74b0c-154">Set the `Text` properties for the two Buttons to Update All.</span></span> <span data-ttu-id="74b0c-155">Son olarak, her iki düğme için olay işleyicileri oluşturma `Click` olayları.</span><span class="sxs-lookup"><span data-stu-id="74b0c-155">Lastly, create event handlers for both Buttons `Click` events.</span></span> <span data-ttu-id="74b0c-156">Let s yeniden düzenleme her olay işleyicileri güncelleştirme mantığı yinelemek yerine bu mantığı üçüncü bir yönteme `UpdateAllSupplierAddresses`, yalnızca bu üçüncü yöntem çağırma olay işleyicilerine sahip.</span><span class="sxs-lookup"><span data-stu-id="74b0c-156">Rather than duplicating the update logic in each of the event handlers, let s refactor that logic to a third method, `UpdateAllSupplierAddresses`, having the event handlers simply invoking this third method.</span></span>


[!code-csharp[Main](performing-batch-updates-cs/samples/sample3.cs)]

<span data-ttu-id="74b0c-157">Şekil 6, güncelleştirme tüm düğmeler eklendikten sonra sayfada gösterilir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-157">Figure 6 shows the page after the Update All buttons have been added.</span></span>


<span data-ttu-id="74b0c-158">[![İki güncelleştirme tüm düğme sayfaya eklenmiştir](performing-batch-updates-cs/_static/image17.png)](performing-batch-updates-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="74b0c-158">[![Two Update All Buttons have been Added to the Page](performing-batch-updates-cs/_static/image17.png)](performing-batch-updates-cs/_static/image16.png)</span></span>

<span data-ttu-id="74b0c-159">**Şekil 6**: İki güncelleştirme tüm düğmeler sayfaya eklenmiştir ([tam boyutlu görüntüyü görmek için tıklatın](performing-batch-updates-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="74b0c-159">**Figure 6**: Two Update All Buttons have been Added to the Page ([Click to view full-size image](performing-batch-updates-cs/_static/image18.png))</span></span>


## <a name="step-3-updating-all-of-the-suppliers-address-information"></a><span data-ttu-id="74b0c-160">3. Adım: Tüm Üreticiler adresi bilgileri güncelleştiriliyor</span><span class="sxs-lookup"><span data-stu-id="74b0c-160">Step 3: Updating All of the Suppliers Address Information</span></span>

<span data-ttu-id="74b0c-161">Tüm düzenleme arabirimi görüntüleme DataList s öğelerinin ve Tümünü Güncelleştir düğmesi ile birlikte tüm kalan yazıyor toplu güncelleştirme gerçekleştirmek için kod.</span><span class="sxs-lookup"><span data-stu-id="74b0c-161">With all of the DataList s items displaying the editing interface and with the addition of the Update All buttons, all that remains is writing the code to perform the batch update.</span></span> <span data-ttu-id="74b0c-162">Özellikle, arama ve DataList s öğeleri döngü ihtiyacımız `SuppliersBLL` s sınıfı `UpdateSupplierAddress` her biri için yöntemi.</span><span class="sxs-lookup"><span data-stu-id="74b0c-162">Specifically, we need to loop through the DataList s items and call the `SuppliersBLL` class s `UpdateSupplierAddress` method for each one.</span></span>

<span data-ttu-id="74b0c-163">Koleksiyonu `DataListItem` DataList s DataList erişilebilir, düzenini örnekler [ `Items` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.items.aspx).</span><span class="sxs-lookup"><span data-stu-id="74b0c-163">The collection of `DataListItem` instances that makeup the DataList can be accessed via the DataList s [`Items` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.items.aspx).</span></span> <span data-ttu-id="74b0c-164">Bir başvurusu olan bir `DataListItem`, biz buna karşılık gelen tutabileceğinizi `SupplierID` gelen `DataKeys` toplama ve program aracılığıyla metin Web denetimleri içinde başvuru `ItemTemplate` aşağıdaki kodda gösterildiği gibi:</span><span class="sxs-lookup"><span data-stu-id="74b0c-164">With a reference to a `DataListItem`, we can grab the corresponding `SupplierID` from the `DataKeys` collection and programmatically reference the TextBox Web controls within the `ItemTemplate` as the following code illustrates:</span></span>


[!code-csharp[Main](performing-batch-updates-cs/samples/sample4.cs)]

<span data-ttu-id="74b0c-165">Tümünü Güncelleştir düğmelerden birine kullanıcı tıkladığında `UpdateAllSupplierAddresses` yöntemi her yinelenir `DataListItem` içinde `Suppliers` DataList ve çağrıları `SuppliersBLL` s sınıfı `UpdateSupplierAddress` yöntemi, karşılık gelen değerler geçirerek.</span><span class="sxs-lookup"><span data-stu-id="74b0c-165">When the user clicks one of the Update All buttons, the `UpdateAllSupplierAddresses` method iterates through each `DataListItem` in the `Suppliers` DataList and calls the `SuppliersBLL` class s `UpdateSupplierAddress` method, passing in the corresponding values.</span></span> <span data-ttu-id="74b0c-166">Bir adres, şehir veya ülkede geçişleri için girilen olmayan bir değer değeridir `Nothing` için `UpdateSupplierAddress` (boş bir dize yerine), bir veritabanında sonuçlanır `NULL` temel alınan kayıt s alanları.</span><span class="sxs-lookup"><span data-stu-id="74b0c-166">A non-entered value for address, city, or country passes is a value of `Nothing` to `UpdateSupplierAddress` (rather than a blank string), which results in a database `NULL` for the underlying record s fields.</span></span>

> [!NOTE]
> <span data-ttu-id="74b0c-167">Bir geliştirme olarak, toplu güncelleştirme işlemi gerçekleştirildikten sonra bazı onay iletisi sağlayan sayfaya bir durum etiketi Web denetimi eklemek isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="74b0c-167">As an enhancement, you may want to add a status Label Web control to the page that provides some confirmation message after the batch update is performed.</span></span>


## <a name="updating-only-those-addresses-that-have-been-modified"></a><span data-ttu-id="74b0c-168">Değiştirilmiş adresleri güncelleştiriliyor</span><span class="sxs-lookup"><span data-stu-id="74b0c-168">Updating Only Those Addresses That Have Been Modified</span></span>

<span data-ttu-id="74b0c-169">Bu öğretici çağrıları için kullanılan toplu güncelleştirme algoritması `UpdateSupplierAddress` yöntemi *her* sağlayıcı adresi bilgilerine mi değişti bakılmaksızın DataList'te.</span><span class="sxs-lookup"><span data-stu-id="74b0c-169">The batch update algorithm used for this tutorial calls the `UpdateSupplierAddress` method for *every* supplier in the DataList, regardless of whether their address information has been changed.</span></span> <span data-ttu-id="74b0c-170">Böyle görme güncelleştirmeleri genellikle bir performans sorunu değildir, ancak denetim yapıldığı veritabanı tablosuna değişirse, gereksiz kayıtları neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-170">While such blind updates aren't usually a performance issue, they can lead to superfluous records if you re auditing changes to the database table.</span></span> <span data-ttu-id="74b0c-171">Örneğin, tüm kaydetmek için Tetikleyiciler kullanma `UPDATE` s `Suppliers` denetim tablosuna bir kullanıcı yeni bir denetim kaydı olup kullanıcı hiçbir değişiklik bağımsız olarak sisteminizdeki her üretici için oluşturulacak Tümünü Güncelleştir düğmesini her tıklayışında tablo değiştirir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-171">For example, if you use triggers to record all `UPDATE` s to the `Suppliers` table to an auditing table, every time a user clicks the Update All button a new audit record will be created for each supplier in the system, regardless of whether the user made any changes.</span></span>

<span data-ttu-id="74b0c-172">ADO.NET veri tablosu ve DataAdapter sınıfları, burada yalnızca değiştirilmiş, silinmiş ve yeni kayıtları sonuçları herhangi bir veritabanı iletişimde toplu güncelleştirmeleri destekleyecek şekilde tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="74b0c-172">The ADO.NET DataTable and DataAdapter classes are designed to support batch updates where only modified, deleted, and new records results in any database communication.</span></span> <span data-ttu-id="74b0c-173">Her satırda bir DataTable sahip bir [ `RowState` özelliği](https://msdn.microsoft.com/library/system.data.datarow.rowstate.aspx) satır kendisinden değiştirilmiş, silinmiş bir DataTable eklendi veya değişmeden kalır gösterir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-173">Each row in the DataTable has a [`RowState` property](https://msdn.microsoft.com/library/system.data.datarow.rowstate.aspx) that indicates whether the row has been added to the DataTable, deleted from it, modified, or remains unchanged.</span></span> <span data-ttu-id="74b0c-174">Bir DataTable başlangıçta doldurulduğunda tüm satırları değişmemiş olarak işaretlenir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-174">When a DataTable is initially populated, all rows are marked unchanged.</span></span> <span data-ttu-id="74b0c-175">Satır s sütunlara değerinin değiştirilmesi satır değiştirilmiş olarak işaretlenir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-175">Changing the value of any of the row s columns marks the row as modified.</span></span>

<span data-ttu-id="74b0c-176">İçinde `SuppliersBLL` ilk okuyarak tek tedarikçi kayıtta belirtilen üretici s adresi bilgilerini güncelleştiriyoruz sınıfı bir `SuppliersDataTable` ve ardından `Address`, `City`, ve `Country` sütun değerleri aşağıdaki kodu kullanarak:</span><span class="sxs-lookup"><span data-stu-id="74b0c-176">In the `SuppliersBLL` class we update the specified supplier s address information by first reading in the single supplier record into a `SuppliersDataTable` and then set the `Address`, `City`, and `Country` column values using the following code:</span></span>


[!code-csharp[Main](performing-batch-updates-cs/samples/sample5.cs)]

<span data-ttu-id="74b0c-177">Bu kod naively geçilen adres, şehir ve ülke değerleri atar `SuppliersRow` içinde `SuppliersDataTable` değerleri değişip değişmediğini ne olursa olsun.</span><span class="sxs-lookup"><span data-stu-id="74b0c-177">This code naively assigns the passed-in address, city, and country values to the `SuppliersRow` in the `SuppliersDataTable` regardless of whether or not the values have changed.</span></span> <span data-ttu-id="74b0c-178">Bu değişiklikleri neden `SuppliersRow` s `RowState` özelliği değiştirilmiş olarak işaretlenecek.</span><span class="sxs-lookup"><span data-stu-id="74b0c-178">These modifications cause the `SuppliersRow` s `RowState` property to be marked as modified.</span></span> <span data-ttu-id="74b0c-179">Veri erişim katmanı s `Update` yöntemi çağrıldığında, bu gördüğünde `SupplierRow` değiştirilmiş ve bu nedenle gönderir bir `UPDATE` veritabanına komutu.</span><span class="sxs-lookup"><span data-stu-id="74b0c-179">When the Data Access Layer s `Update` method is called, it sees that the `SupplierRow` has been modified and therefore sends an `UPDATE` command to the database.</span></span>

<span data-ttu-id="74b0c-180">Ancak biz yalnızca gelen farklıysa geçilen adres, şehir ve ülke değerleri atamak için bu yöntem için kod eklenen Imagine `SuppliersRow` s mevcut değerleri.</span><span class="sxs-lookup"><span data-stu-id="74b0c-180">Imagine, however, that we added code to this method to only assign the passed-in address, city, and country values if they differ from the `SuppliersRow` s existing values.</span></span> <span data-ttu-id="74b0c-181">Adres, şehir ve ülke olduğu mevcut verilerle aynı durumda hiçbir değişiklik yapılmaz ve `SupplierRow` s `RowState` olarak işaretlenmiş sol değişmez.</span><span class="sxs-lookup"><span data-stu-id="74b0c-181">In the case where the address, city, and country are the same as the existing data, no changes will be made and the `SupplierRow` s `RowState` will be left marked as unchanged.</span></span> <span data-ttu-id="74b0c-182">Net sonuç, DAL s `Update` yöntemi çağrıldığında, hiçbir veritabanı çağrısı yapılacak `SuppliersRow` değişiklik yapılmadı.</span><span class="sxs-lookup"><span data-stu-id="74b0c-182">The net result is that when the DAL s `Update` method is called, no database call will be made because the `SuppliersRow` has not been modified.</span></span>

<span data-ttu-id="74b0c-183">Bu değişikliği kabul etmek için geçilen adres, şehir ve ülke değerleri aşağıdaki kod ile doğrudan atama deyimleri değiştirin:</span><span class="sxs-lookup"><span data-stu-id="74b0c-183">To enact this change, replace the statements that blindly assign the passed-in address, city, and country values with the following code:</span></span>


[!code-csharp[Main](performing-batch-updates-cs/samples/sample6.cs)]

<span data-ttu-id="74b0c-184">Bu kod, DAL s eklenen `Update` yöntemi gönderen bir `UPDATE` deyimi yalnızca adresi ile ilgili değerleri değiştirilmiş kayıtlar için veritabanı.</span><span class="sxs-lookup"><span data-stu-id="74b0c-184">With this added code, the DAL s `Update` method sends an `UPDATE` statement to the database for only those records whose address-related values have changed.</span></span>

<span data-ttu-id="74b0c-185">Alternatif olarak, biz geçilen adres alanlarını ve veritabanı verilerinin arasındaki farklılıkları olup olmadığını izler ve, varsa yok, yalnızca DAL s çağrısı atlama `Update` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="74b0c-185">Alternatively, we could keep track of whether there are any differences between the passed-in address fields and the database data and, if there are none, simply bypass the call to the DAL s `Update` method.</span></span> <span data-ttu-id="74b0c-186">Bu yaklaşım da DB kullanarak yapıldığı dolaysız yöntem, DB doğrudan yöntem birincile t geçirilen beri çalışır bir `SuppliersRow` ayarlanmış örnek `RowState` bir veritabanı çağrısı gerçekten gerekli olup olmadığını belirlemek için denetlenebilir.</span><span class="sxs-lookup"><span data-stu-id="74b0c-186">This approach works well if you re using the DB direct method, since the DB direct method isn t passed a `SuppliersRow` instance whose `RowState` can be checked to determine whether a database call is actually needed.</span></span>

> [!NOTE]
> <span data-ttu-id="74b0c-187">Her zaman `UpdateSupplierAddress` yöntemi çağrıldığında, güncelleştirilen kaydı hakkında bilgi almak için veritabanına bir çağrı yapılır.</span><span class="sxs-lookup"><span data-stu-id="74b0c-187">Each time the `UpdateSupplierAddress` method is invoked, a call is made to the database to retrieve information about the updated record.</span></span> <span data-ttu-id="74b0c-188">Ardından, verileri herhangi bir değişiklik varsa, tablo satırı güncelleştirmek için veritabanı başka bir çağrı yapılır.</span><span class="sxs-lookup"><span data-stu-id="74b0c-188">Then, if there are any changes in data, another call to the database is made to update the table row.</span></span> <span data-ttu-id="74b0c-189">Oluşturarak bu iş akışı iyileştirilmiş bir `UpdateSupplierAddress` kabul eden bir yöntemi aşırı yüklemesini bir `EmployeesDataTable` olan örneği *tüm* değişikliklerden birini `BatchUpdate.aspx` sayfası.</span><span class="sxs-lookup"><span data-stu-id="74b0c-189">This workflow could be optimized by creating an `UpdateSupplierAddress` method overload that accepts an `EmployeesDataTable` instance that has *all* of the changes from the `BatchUpdate.aspx` page.</span></span> <span data-ttu-id="74b0c-190">Ardından, tüm kayıtları almak için veritabanına bir çağrı yapabilirsiniz `Suppliers` tablo.</span><span class="sxs-lookup"><span data-stu-id="74b0c-190">Then, it could make one call to the database to get all of the records from the `Suppliers` table.</span></span> <span data-ttu-id="74b0c-191">İki sonuç kümeleri sonra sabit listesi oluşturulamadı ve burada değişiklikler kayıtları güncelleştirilemedi.</span><span class="sxs-lookup"><span data-stu-id="74b0c-191">The two resultsets could then be enumerated and only those records where changes have occurred could be updated.</span></span>


## <a name="summary"></a><span data-ttu-id="74b0c-192">Özet</span><span class="sxs-lookup"><span data-stu-id="74b0c-192">Summary</span></span>

<span data-ttu-id="74b0c-193">Bu öğreticide bir kullanıcının birden çok satıcılara ait adres bilgilerini hızlı bir şekilde değiştirmek bir tam olarak düzenlenebilir DataList oluşturma gördük.</span><span class="sxs-lookup"><span data-stu-id="74b0c-193">In this tutorial we saw how to create a fully editable DataList, allowing a user to quickly modify the address information for multiple suppliers.</span></span> <span data-ttu-id="74b0c-194">DataList s içinde düzenleme arabirimi tedarikçi s Adres, şehir ve ülke değerleri için bir TextBox Web denetimi tanımlayarak Başladık `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="74b0c-194">We started by defining the editing interface a TextBox Web control for the supplier s address, city, and country values in the DataList s `ItemTemplate`.</span></span> <span data-ttu-id="74b0c-195">Ardından, üstteki ve alttaki DataList güncelleştirme tüm düğmeler ekledik.</span><span class="sxs-lookup"><span data-stu-id="74b0c-195">Next, we added Update All buttons above and below the DataList.</span></span> <span data-ttu-id="74b0c-196">Bir kullanıcı kendi değişiklikler ve güncelleştirme tüm düğmelerden birine tıklandığında sonra `DataListItem` s numaralandırılan ve çağrı `SuppliersBLL` s sınıfı `UpdateSupplierAddress` yöntemi yapılır.</span><span class="sxs-lookup"><span data-stu-id="74b0c-196">After a user has made his changes and clicked one of the Update All buttons, the `DataListItem` s are enumerated and a call to the `SuppliersBLL` class s `UpdateSupplierAddress` method is made.</span></span>

<span data-ttu-id="74b0c-197">Mutlu programlama!</span><span class="sxs-lookup"><span data-stu-id="74b0c-197">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="74b0c-198">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="74b0c-198">About the Author</span></span>

<span data-ttu-id="74b0c-199">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), yazar yedi ASP/ASP.NET kitaplardan ve poshbeauty.com sitesinin [4GuysFromRolla.com](http://www.4guysfromrolla.com), Microsoft Web teknolojileriyle beri 1998'de çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="74b0c-199">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="74b0c-200">Scott, bağımsız Danışman, Eğitimci ve yazıcı çalışır.</span><span class="sxs-lookup"><span data-stu-id="74b0c-200">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="74b0c-201">En son nitelemiştir olan [ *Unleashed'i öğretin kendiniz ASP.NET 2.0 24 saat içindeki*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="74b0c-201">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="74b0c-202">He adresinden ulaşılabilir [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="74b0c-202">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="74b0c-203">veya kendi blog hangi bulunabilir [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="74b0c-203">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="74b0c-204">Özel teşekkürler</span><span class="sxs-lookup"><span data-stu-id="74b0c-204">Special Thanks To</span></span>

<span data-ttu-id="74b0c-205">Bu öğretici serisinde, birçok yararlı Gözden Geçiren tarafından gözden geçirildi.</span><span class="sxs-lookup"><span data-stu-id="74b0c-205">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="74b0c-206">Bu öğretici için müşteri adayı gözden geçirenler Zack Jones ve Ken Pespisa yoktu.</span><span class="sxs-lookup"><span data-stu-id="74b0c-206">Lead reviewers for this tutorial were Zack Jones and Ken Pespisa.</span></span> <span data-ttu-id="74b0c-207">Yaklaşan My MSDN makaleleri gözden geçirme ilgileniyor musunuz?</span><span class="sxs-lookup"><span data-stu-id="74b0c-207">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="74b0c-208">Bu durumda, bir satır bana bırak [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="74b0c-208">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="74b0c-209">[Önceki](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md)
> [İleri](handling-bll-and-dal-level-exceptions-cs.md)</span><span class="sxs-lookup"><span data-stu-id="74b0c-209">[Previous](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md)
[Next](handling-bll-and-dal-level-exceptions-cs.md)</span></span>
