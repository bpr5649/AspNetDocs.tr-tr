---
uid: web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs
title: Toplu güncelleştirmeler gerçekleştiriliyor (C#) | Microsoft Docs
author: rick-anderson
description: Tüm öğeleri düzenleme modunda olduğu ve içindeki ' Tümünü Güncelleştir ' düğmesine tıklayarak değerlerinin kaydedilebileceği tam düzenlenebilir bir DataList oluşturmayı öğrenin...
ms.author: riande
ms.date: 10/30/2006
ms.assetid: 57743ca7-5695-4e07-aed1-44b297f245a9
msc.legacyurl: /web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs
msc.type: authoredcontent
ms.openlocfilehash: cde12a4d24555216adc49dd02818901278932eaa
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78593543"
---
# <a name="performing-batch-updates-c"></a><span data-ttu-id="41505-103">Toplu Güncelleştirmeler Gerçekleştirme (C#)</span><span class="sxs-lookup"><span data-stu-id="41505-103">Performing Batch Updates (C#)</span></span>

<span data-ttu-id="41505-104">[Scott Mitchell](https://twitter.com/ScottOnWriting) tarafından</span><span class="sxs-lookup"><span data-stu-id="41505-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="41505-105">[Örnek uygulamayı indirin](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_37_CS.exe) veya [PDF 'yi indirin](performing-batch-updates-cs/_static/datatutorial37cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="41505-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_37_CS.exe) or [Download PDF](performing-batch-updates-cs/_static/datatutorial37cs1.pdf)</span></span>

> <span data-ttu-id="41505-106">Tüm öğeleri düzenleme modunda olduğu ve sayfadaki "Tümünü Güncelleştir" düğmesine tıklanarak değerlerinin kaydedilebileceği tam düzenlenebilir bir DataList oluşturmayı öğrenin.</span><span class="sxs-lookup"><span data-stu-id="41505-106">Learn how to create a fully-editable DataList where all of its items are in edit mode and whose values can be saved by clicking an "Update All" button on the page.</span></span>

## <a name="introduction"></a><span data-ttu-id="41505-107">Giriş</span><span class="sxs-lookup"><span data-stu-id="41505-107">Introduction</span></span>

<span data-ttu-id="41505-108">[Önceki öğreticide](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md) , öğe düzeyi DataList oluşturmayı inceledik.</span><span class="sxs-lookup"><span data-stu-id="41505-108">In the [preceding tutorial](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md) we examined how to create an item-level DataList.</span></span> <span data-ttu-id="41505-109">Standart düzenlenebilir GridView gibi, DataList 'teki her öğe tıklandığı zaman öğeyi düzenlenebilir hale getirmek için bir Düzenle düğmesi içeriyordu.</span><span class="sxs-lookup"><span data-stu-id="41505-109">Like the standard editable GridView, each item in the DataList included an Edit button that, when clicked, would make the item editable.</span></span> <span data-ttu-id="41505-110">Bu öğe düzeyi düzenleme yalnızca zaman zaman güncellenen veriler için uygun olsa da, bazı kullanım örneği senaryoları kullanıcının birçok kaydı düzenlemesini gerektirir.</span><span class="sxs-lookup"><span data-stu-id="41505-110">While this item-level editing works well for data that is only updated occasionally, certain use case scenarios require the user to edit many records.</span></span> <span data-ttu-id="41505-111">Bir kullanıcının onlarca kayıt düzenlemesi gerekiyorsa ve Düzenle ' ye tıkladıktan sonra değişiklikleri yapıp, her biri için Güncelleştir ' e tıkladığınızda, tıklama miktarı üretkenliği görebilir.</span><span class="sxs-lookup"><span data-stu-id="41505-111">If a user needs to edit dozens of records and is forced to click Edit, make their changes, and click Update for each one, the amount of clicking can hamper her productivity.</span></span> <span data-ttu-id="41505-112">Bu tür durumlarda daha iyi bir seçenek, *Tüm* öğelerinin düzenleme modunda olduğu ve içindeki tüm öğeleri bir Update Tümünü Güncelleştir düğmesine tıklanarak düzenlenebildiği bir tam düzenlenebilir DataList sağlamaktır (bkz. Şekil 1).</span><span class="sxs-lookup"><span data-stu-id="41505-112">In such situations, a better option is to provide a fully-editable DataList, one where *all* of its items are in edit mode and whose values can be edited by clicking an Update All button on the page (see Figure 1).</span></span>

<span data-ttu-id="41505-113">[Tamamen düzenlenebilir bir DataList 'teki her öğe ![değiştirilebilir](performing-batch-updates-cs/_static/image2.png)](performing-batch-updates-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="41505-113">[![Each Item in a Fully Editable DataList can be Modified](performing-batch-updates-cs/_static/image2.png)](performing-batch-updates-cs/_static/image1.png)</span></span>

<span data-ttu-id="41505-114">**Şekil 1**: tamamen düzenlenebilir bir DataList 'Teki her öğe değiştirilebilir ([tam boyutlu görüntüyü görüntülemek için tıklayın](performing-batch-updates-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="41505-114">**Figure 1**: Each Item in a Fully Editable DataList can be Modified ([Click to view full-size image](performing-batch-updates-cs/_static/image3.png))</span></span>

<span data-ttu-id="41505-115">Bu öğreticide, kullanıcıların tamamen düzenlenebilir bir DataList kullanarak tedarikçi adres bilgilerini güncelleştirmesine nasıl olanak sağlayacağız.</span><span class="sxs-lookup"><span data-stu-id="41505-115">In this tutorial we'll examine how to enable users to update suppliers address information using a fully editable DataList.</span></span>

## <a name="step-1-create-the-editable-user-interface-in-the-datalist-s-itemtemplate"></a><span data-ttu-id="41505-116">1\. Adım: DataList 'te Düzenlenek Kullanıcı arabirimini oluşturma</span><span class="sxs-lookup"><span data-stu-id="41505-116">Step 1: Create the Editable User Interface in the DataList s ItemTemplate</span></span>

<span data-ttu-id="41505-117">Yukarıdaki öğreticide, standart, öğe düzeyi düzenlenebilir bir DataList oluşturduğumuz iki şablon kullandık:</span><span class="sxs-lookup"><span data-stu-id="41505-117">In the preceding tutorial, where we creating a standard, item-level editable DataList, we used two templates:</span></span>

- <span data-ttu-id="41505-118">`ItemTemplate` salt okunurdur Kullanıcı arabirimini içeriyordu (her bir ürün adı ve fiyatını görüntülemek için Web denetimleri etiketi).</span><span class="sxs-lookup"><span data-stu-id="41505-118">`ItemTemplate` contained the read-only user interface (the Label Web controls for displaying each product s name and price).</span></span>
- <span data-ttu-id="41505-119">`EditItemTemplate`, düzenleme modu kullanıcı arabirimini içeriyordu (iki metin kutusu Web denetimi).</span><span class="sxs-lookup"><span data-stu-id="41505-119">`EditItemTemplate` contained the edit mode user interface (the two TextBox Web controls).</span></span>

<span data-ttu-id="41505-120">DataList `EditItemIndex` özelliği, `EditItemTemplate`kullanılarak `DataListItem` (varsa) işleneceğini belirler.</span><span class="sxs-lookup"><span data-stu-id="41505-120">The DataList s `EditItemIndex` property dictates what `DataListItem` (if any) is rendered using the `EditItemTemplate`.</span></span> <span data-ttu-id="41505-121">Özellikle, `ItemIndex` değeri DataList s `EditItemIndex` özelliği ile eşleşen `DataListItem` `EditItemTemplate`kullanılarak işlenir.</span><span class="sxs-lookup"><span data-stu-id="41505-121">In particular, the `DataListItem` whose `ItemIndex` value matches the DataList s `EditItemIndex` property is rendered using the `EditItemTemplate`.</span></span> <span data-ttu-id="41505-122">Tek seferde yalnızca bir öğe düzenlenebilir olduğunda, ancak tamamen düzenlenebilir bir DataList oluşturulurken bu model iyi bir şekilde geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="41505-122">This model works well when only one item can be edited at a time, but falls apart when creating a fully-editable DataList.</span></span>

<span data-ttu-id="41505-123">Tamamen düzenlenebilir bir DataList için, *tüm* `DataListItem` öğeleri düzenlenebilir arabirim kullanarak işlemesini istiyoruz.</span><span class="sxs-lookup"><span data-stu-id="41505-123">For a fully editable DataList, we want *all* of the `DataListItem` s to render using the editable interface.</span></span> <span data-ttu-id="41505-124">Bunu gerçekleştirmenin en kolay yolu `ItemTemplate`düzenlenebilir arabirimini tanımlamaktır.</span><span class="sxs-lookup"><span data-stu-id="41505-124">The simplest way to accomplish this is to define the editable interface in the `ItemTemplate`.</span></span> <span data-ttu-id="41505-125">Tedarikçiler adres bilgilerini değiştirmek için, düzenlenebilir arabirim, satıcı adını metin olarak ve ardından Adres, şehir ve ülke değerleri için metin kutuları içerir.</span><span class="sxs-lookup"><span data-stu-id="41505-125">For modifying the suppliers address information, the editable interface contains the supplier name as text and then TextBoxes for the address, city, and country values.</span></span>

<span data-ttu-id="41505-126">`BatchUpdate.aspx` sayfasını açıp bir DataList denetimi ekleyin ve `ID` özelliğini `Suppliers`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="41505-126">Start by opening the `BatchUpdate.aspx` page, add a DataList control, and set its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="41505-127">DataList s akıllı etiketinden `SuppliersDataSource`adlı yeni bir ObjectDataSource denetimi eklemeyi tercih edin.</span><span class="sxs-lookup"><span data-stu-id="41505-127">From the DataList s smart tag, opt to add a new ObjectDataSource control named `SuppliersDataSource`.</span></span>

<span data-ttu-id="41505-128">[SuppliersDataSource adlı yeni bir ObjectDataSource oluşturma ![](performing-batch-updates-cs/_static/image5.png)](performing-batch-updates-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="41505-128">[![Create a New ObjectDataSource Named SuppliersDataSource](performing-batch-updates-cs/_static/image5.png)](performing-batch-updates-cs/_static/image4.png)</span></span>

<span data-ttu-id="41505-129">**Şekil 2**: `SuppliersDataSource` adlı yeni bir ObjectDataSource oluşturun ([tam boyutlu görüntüyü görüntülemek için tıklayın](performing-batch-updates-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="41505-129">**Figure 2**: Create a New ObjectDataSource Named `SuppliersDataSource` ([Click to view full-size image](performing-batch-updates-cs/_static/image6.png))</span></span>

<span data-ttu-id="41505-130">`SuppliersBLL` sınıf s `GetSuppliers()` metodunu kullanarak verileri almak için ObjectDataSource 'ı yapılandırın (bkz. Şekil 3).</span><span class="sxs-lookup"><span data-stu-id="41505-130">Configure the ObjectDataSource to retrieve data using the `SuppliersBLL` class s `GetSuppliers()` method (see Figure 3).</span></span> <span data-ttu-id="41505-131">Önceki öğreticide olduğu gibi, ObjectDataSource aracılığıyla Tedarikçi bilgilerini güncelleştirmek yerine doğrudan Iş mantığı katmanı ile çalışacağız.</span><span class="sxs-lookup"><span data-stu-id="41505-131">As with the preceding tutorial, rather than updating the supplier information through the ObjectDataSource, we'll work directly with the Business Logic Layer.</span></span> <span data-ttu-id="41505-132">Bu nedenle, GÜNCELLEŞTIRME sekmesinde açılan listeyi (yok) olarak ayarlayın (bkz. Şekil 4).</span><span class="sxs-lookup"><span data-stu-id="41505-132">Therefore, set the drop-down list to (None) in the UPDATE tab (see Figure 4).</span></span>

<span data-ttu-id="41505-133">[GetSuppliers () yöntemini kullanarak Tedarikçi bilgilerini alma ![](performing-batch-updates-cs/_static/image8.png)](performing-batch-updates-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="41505-133">[![Retrieve Supplier Information Using the GetSuppliers() Method](performing-batch-updates-cs/_static/image8.png)](performing-batch-updates-cs/_static/image7.png)</span></span>

<span data-ttu-id="41505-134">**Şekil 3**: `GetSuppliers()` yöntemi kullanarak Tedarikçi bilgilerini alma ([tam boyutlu görüntüyü görüntülemek için tıklayın](performing-batch-updates-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="41505-134">**Figure 3**: Retrieve Supplier Information Using the `GetSuppliers()` Method ([Click to view full-size image](performing-batch-updates-cs/_static/image9.png))</span></span>

<span data-ttu-id="41505-135">[![GÜNCELLEŞTIRME sekmesinde açılan listeyi (yok) olarak ayarlayın](performing-batch-updates-cs/_static/image11.png)](performing-batch-updates-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="41505-135">[![Set the Drop-Down List to (None) in the UPDATE Tab](performing-batch-updates-cs/_static/image11.png)](performing-batch-updates-cs/_static/image10.png)</span></span>

<span data-ttu-id="41505-136">**Şekil 4**: güncelleştirme sekmesinde açılan listeyi (yok) olarak ayarlayın ([tam boyutlu görüntüyü görüntülemek için tıklayın](performing-batch-updates-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="41505-136">**Figure 4**: Set the Drop-Down List to (None) in the UPDATE Tab ([Click to view full-size image](performing-batch-updates-cs/_static/image12.png))</span></span>

<span data-ttu-id="41505-137">Sihirbaz tamamlandıktan sonra Visual Studio, bir etiket Web denetimindeki veri kaynağı tarafından döndürülen her bir veri alanını göstermek için otomatik olarak `ItemTemplate` DataList 'i oluşturur.</span><span class="sxs-lookup"><span data-stu-id="41505-137">After completing the wizard, Visual Studio automatically generates the DataList s `ItemTemplate` to display each data field returned by the data source in a Label Web control.</span></span> <span data-ttu-id="41505-138">Bunun yerine, düzen arabirimini sağlamak için bu şablonu değiştirmemiz gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="41505-138">We need to modify this template so that it provides the editing interface instead.</span></span> <span data-ttu-id="41505-139">`ItemTemplate`, DataList ' akıllı etiketindeki veya doğrudan bildirim temelli söz dizimi aracılığıyla Şablonları Düzenle seçeneği kullanılarak tasarımcı aracılığıyla özelleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="41505-139">The `ItemTemplate` can be customized through the Designer using the Edit Templates option from the DataList s smart tag or directly through the declarative syntax.</span></span>

<span data-ttu-id="41505-140">Tedarikçinin adını metin olarak görüntüleyen bir düzen arabirimi oluşturmak için bir dakikanızı ayırın, ancak Tedarikçi s adresi, şehir ve ülke değerleri için metin kutuları içerir.</span><span class="sxs-lookup"><span data-stu-id="41505-140">Take a moment to create an editing interface that displays the supplier s name as text, but includes TextBoxes for the supplier s address, city, and country values.</span></span> <span data-ttu-id="41505-141">Bu değişiklikleri yaptıktan sonra, sayfa bildirimli sözdizimi aşağıdaki gibi görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="41505-141">After making these changes, your page s declarative syntax should look similar to the following:</span></span>

[!code-aspx[Main](performing-batch-updates-cs/samples/sample1.aspx)]

> [!NOTE]
> <span data-ttu-id="41505-142">Önceki öğreticide olduğu gibi, bu öğreticideki DataList 'in görünüm durumunun etkin olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="41505-142">As with the preceding tutorial, the DataList in this tutorial must have its view state enabled.</span></span>

<span data-ttu-id="41505-143">`ItemTemplate`, `Styles.css` sınıfına eklenen ve `ProductPropertyLabel` ve `ProductPropertyValue` CSS sınıflarıyla aynı stil ayarlarını kullanacak şekilde yapılandırılan `SupplierPropertyLabel` ve `SupplierPropertyValue`iki yeni CSS sınıfı kullandım.</span><span class="sxs-lookup"><span data-stu-id="41505-143">In the `ItemTemplate` I m using two new CSS classes, `SupplierPropertyLabel` and `SupplierPropertyValue`, which have been added to the `Styles.css` class and configured to use the same style settings as the `ProductPropertyLabel` and `ProductPropertyValue` CSS classes.</span></span>

[!code-css[Main](performing-batch-updates-cs/samples/sample2.css)]

<span data-ttu-id="41505-144">Bu değişiklikleri yaptıktan sonra bu sayfayı bir tarayıcı aracılığıyla ziyaret edin.</span><span class="sxs-lookup"><span data-stu-id="41505-144">After making these changes, visit this page through a browser.</span></span> <span data-ttu-id="41505-145">Şekil 5 ' i gösterdiği gibi, her bir DataList öğesi tedarikçi adını metin olarak görüntüler ve adres, şehir ve ülkeyi göstermek için metin kutuları kullanır.</span><span class="sxs-lookup"><span data-stu-id="41505-145">As Figure 5 shows, each DataList item displays the supplier name as text and uses TextBoxes to display the address, city, and country.</span></span>

<span data-ttu-id="41505-146">[DataList 'teki her tedarikçi ![düzenlenebilir](performing-batch-updates-cs/_static/image14.png)](performing-batch-updates-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="41505-146">[![Each Supplier in the DataList is Editable](performing-batch-updates-cs/_static/image14.png)](performing-batch-updates-cs/_static/image13.png)</span></span>

<span data-ttu-id="41505-147">**Şekil 5**: DataList 'teki her bir tedarikçi düzenlenebilir ([tam boyutlu görüntüyü görüntülemek için tıklayın](performing-batch-updates-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="41505-147">**Figure 5**: Each Supplier in the DataList is Editable ([Click to view full-size image](performing-batch-updates-cs/_static/image15.png))</span></span>

## <a name="step-2-adding-an-update-all-button"></a><span data-ttu-id="41505-148">2\. Adım: Tümünü Güncelleştir düğmesi ekleme</span><span class="sxs-lookup"><span data-stu-id="41505-148">Step 2: Adding an Update All Button</span></span>

<span data-ttu-id="41505-149">Şekil 5 ' teki her tedarikçinin adres, şehir ve ülke alanları bir metin kutusunda görüntülenirken, şu anda bir güncelleştirme düğmesi yok demektir.</span><span class="sxs-lookup"><span data-stu-id="41505-149">While each supplier in Figure 5 has its address, city, and country fields displayed in a TextBox, there currently is no Update button available.</span></span> <span data-ttu-id="41505-150">Tamamen düzenlenebilir veri bilgileriyle her öğe için bir güncelleştirme düğmesine sahip olmak yerine, bir sayfada genellikle tek bir güncelleştir düğmesi vardır ve tıklandığı zaman DataList 'teki *Tüm* kayıtları günceller.</span><span class="sxs-lookup"><span data-stu-id="41505-150">Rather than having an Update button per item, with fully editable DataLists there is typically a single Update All button on the page that, when clicked, updates *all* of the records in the DataList.</span></span> <span data-ttu-id="41505-151">Bu öğretici için, her biri sayfanın üst kısmına ve diğeri alta doğru bir şekilde iki güncelleştirme ekleyelim (iki düğmeyi de aynı etkiye sahip olur).</span><span class="sxs-lookup"><span data-stu-id="41505-151">For this tutorial, let s add two Update All buttons - one at the top of the page and one at the bottom (although clicking either button will have the same effect).</span></span>

<span data-ttu-id="41505-152">DataList 'in üzerine bir düğme web denetimi ekleyerek başlayın ve `ID` özelliğini `UpdateAll1`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="41505-152">Start by adding a Button Web control above the DataList and set its `ID` property to `UpdateAll1`.</span></span> <span data-ttu-id="41505-153">Sonra, DataList 'in altına ikinci düğme web denetimini ekleyin, `ID` `UpdateAll2`olarak ayarlar.</span><span class="sxs-lookup"><span data-stu-id="41505-153">Next, add the second Button Web control beneath the DataList, setting its `ID` to `UpdateAll2`.</span></span> <span data-ttu-id="41505-154">Tümünü güncelleştirmek için iki düğme için `Text` özelliklerini ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="41505-154">Set the `Text` properties for the two Buttons to Update All.</span></span> <span data-ttu-id="41505-155">Son olarak, olaylar `Click` her iki düğme için de olay işleyicileri oluşturun.</span><span class="sxs-lookup"><span data-stu-id="41505-155">Lastly, create event handlers for both Buttons `Click` events.</span></span> <span data-ttu-id="41505-156">Her olay işleyicilerindeki güncelleştirme mantığını çoğaltmak yerine, bu mantığı üçüncü bir yöntemle yeniden düzenleme, `UpdateAllSupplierAddresses`, olay işleyicilerinin bu üçüncü yöntemi çağırma.</span><span class="sxs-lookup"><span data-stu-id="41505-156">Rather than duplicating the update logic in each of the event handlers, let s refactor that logic to a third method, `UpdateAllSupplierAddresses`, having the event handlers simply invoking this third method.</span></span>

[!code-csharp[Main](performing-batch-updates-cs/samples/sample3.cs)]

<span data-ttu-id="41505-157">Şekil 6, Tümünü Güncelleştir düğmeleri eklendikten sonra sayfayı gösterir.</span><span class="sxs-lookup"><span data-stu-id="41505-157">Figure 6 shows the page after the Update All buttons have been added.</span></span>

<span data-ttu-id="41505-158">[Sayfaya Iki güncelleştirme ![tüm düğmeler eklendi](performing-batch-updates-cs/_static/image17.png)](performing-batch-updates-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="41505-158">[![Two Update All Buttons have been Added to the Page](performing-batch-updates-cs/_static/image17.png)](performing-batch-updates-cs/_static/image16.png)</span></span>

<span data-ttu-id="41505-159">**Şekil 6**: sayfaya Iki güncelleştirme tüm düğmeler eklenmiş ([tam boyutlu görüntüyü görüntülemek için tıklatın](performing-batch-updates-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="41505-159">**Figure 6**: Two Update All Buttons have been Added to the Page ([Click to view full-size image](performing-batch-updates-cs/_static/image18.png))</span></span>

## <a name="step-3-updating-all-of-the-suppliers-address-information"></a><span data-ttu-id="41505-160">3\. Adım: tüm tedarikçiler adres bilgilerini güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="41505-160">Step 3: Updating All of the Suppliers Address Information</span></span>

<span data-ttu-id="41505-161">Tüm DataList öğeleri, düzen arabirimini görüntüleyen ve Tümünü Güncelleştir düğmelerinin eklenmesiyle birlikte, her durumda kalan, toplu güncelleştirmeyi gerçekleştirmek için kod yazıyor.</span><span class="sxs-lookup"><span data-stu-id="41505-161">With all of the DataList s items displaying the editing interface and with the addition of the Update All buttons, all that remains is writing the code to perform the batch update.</span></span> <span data-ttu-id="41505-162">Özellikle, DataList öğeleri arasında döngü yapmanız ve her biri için `SuppliersBLL` sınıf s `UpdateSupplierAddress` metodunu çağırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="41505-162">Specifically, we need to loop through the DataList s items and call the `SuppliersBLL` class s `UpdateSupplierAddress` method for each one.</span></span>

<span data-ttu-id="41505-163">DataList 'i oluşturan `DataListItem` örneklerinin koleksiyonuna DataList s [`Items` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.items.aspx)aracılığıyla erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="41505-163">The collection of `DataListItem` instances that makeup the DataList can be accessed via the DataList s [`Items` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.items.aspx).</span></span> <span data-ttu-id="41505-164">Bir `DataListItem`başvurusu ile `DataKeys` koleksiyonundan ilgili `SupplierID` alabilir ve aşağıdaki kodun gösterildiği gibi `ItemTemplate` içindeki TextBox Web denetimlerine programlı bir şekilde başvurabilir:</span><span class="sxs-lookup"><span data-stu-id="41505-164">With a reference to a `DataListItem`, we can grab the corresponding `SupplierID` from the `DataKeys` collection and programmatically reference the TextBox Web controls within the `ItemTemplate` as the following code illustrates:</span></span>

[!code-csharp[Main](performing-batch-updates-cs/samples/sample4.cs)]

<span data-ttu-id="41505-165">Kullanıcı Update All düğmelerinden birine tıkladığında `UpdateAllSupplierAddresses` yöntemi `Suppliers` DataList 'teki her bir `DataListItem` üzerinden yinelenir ve ilgili değerleri geçirerek `SuppliersBLL` sınıf s `UpdateSupplierAddress` yöntemini çağırır.</span><span class="sxs-lookup"><span data-stu-id="41505-165">When the user clicks one of the Update All buttons, the `UpdateAllSupplierAddresses` method iterates through each `DataListItem` in the `Suppliers` DataList and calls the `SuppliersBLL` class s `UpdateSupplierAddress` method, passing in the corresponding values.</span></span> <span data-ttu-id="41505-166">Adres, şehir veya ülke geçişleri için girilen olmayan bir değer, `UpdateSupplierAddress` (boş bir dize yerine) `Nothing` bir değerdir ve bu, temel kayıt alanları için bir veritabanı `NULL` sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="41505-166">A non-entered value for address, city, or country passes is a value of `Nothing` to `UpdateSupplierAddress` (rather than a blank string), which results in a database `NULL` for the underlying record s fields.</span></span>

> [!NOTE]
> <span data-ttu-id="41505-167">Geliştirme olarak, toplu güncelleştirme gerçekleştirildikten sonra bazı onay iletisi sağlayan sayfaya bir durum etiketi Web denetimi eklemek isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="41505-167">As an enhancement, you may want to add a status Label Web control to the page that provides some confirmation message after the batch update is performed.</span></span>

## <a name="updating-only-those-addresses-that-have-been-modified"></a><span data-ttu-id="41505-168">Yalnızca değiştirilen adresler güncelleştiriliyor</span><span class="sxs-lookup"><span data-stu-id="41505-168">Updating Only Those Addresses That Have Been Modified</span></span>

<span data-ttu-id="41505-169">Bu öğretici için kullanılan Batch güncelleştirme algoritması, kendi adres bilgilerinin değiştirilip değiştirilmediğini bağımsız olarak DataList 'teki *her* tedarikçide `UpdateSupplierAddress` yöntemini çağırır.</span><span class="sxs-lookup"><span data-stu-id="41505-169">The batch update algorithm used for this tutorial calls the `UpdateSupplierAddress` method for *every* supplier in the DataList, regardless of whether their address information has been changed.</span></span> <span data-ttu-id="41505-170">Bu görünmeyen güncelleştirmeler genellikle bir performans sorunu olsa da, veritabanı tablosunda yapılan değişiklikleri yeniden denetlebiliyorsanız, bu değişiklikler gereksiz kayıtlara yol açabilir.</span><span class="sxs-lookup"><span data-stu-id="41505-170">While such blind updates aren't usually a performance issue, they can lead to superfluous records if you re auditing changes to the database table.</span></span> <span data-ttu-id="41505-171">Örneğin, tüm `UPDATE` `Suppliers` öğeleri bir denetim tablosuna kaydetmek için Tetikleyiciler kullanırsanız, Kullanıcı tüm değişiklikleri Güncelleştir düğmesine her tıkladığında, kullanıcının herhangi bir değişiklik yapıp yapmadığına bakılmaksızın, sistemdeki her bir sağlayıcı için yeni bir denetim kaydı oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="41505-171">For example, if you use triggers to record all `UPDATE` s to the `Suppliers` table to an auditing table, every time a user clicks the Update All button a new audit record will be created for each supplier in the system, regardless of whether the user made any changes.</span></span>

<span data-ttu-id="41505-172">ADO.NET DataTable ve DataAdapter sınıfları, yalnızca değiştirilen, silinen ve yeni kayıtların herhangi bir veritabanı iletişimine neden olduğu durumlarda toplu güncelleştirmeleri destekleyecek şekilde tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="41505-172">The ADO.NET DataTable and DataAdapter classes are designed to support batch updates where only modified, deleted, and new records results in any database communication.</span></span> <span data-ttu-id="41505-173">DataTable 'daki her satır, satırın DataTable 'a eklenip eklenmeyeceğini, onun içinden silindiğini veya değiştirildiğini belirten bir [`RowState` özelliğine](https://msdn.microsoft.com/library/system.data.datarow.rowstate.aspx) sahiptir.</span><span class="sxs-lookup"><span data-stu-id="41505-173">Each row in the DataTable has a [`RowState` property](https://msdn.microsoft.com/library/system.data.datarow.rowstate.aspx) that indicates whether the row has been added to the DataTable, deleted from it, modified, or remains unchanged.</span></span> <span data-ttu-id="41505-174">Bir DataTable başlangıçta doldurulduktan sonra tüm satırlar değiştirilmeden işaretlenir.</span><span class="sxs-lookup"><span data-stu-id="41505-174">When a DataTable is initially populated, all rows are marked unchanged.</span></span> <span data-ttu-id="41505-175">Satır s sütunlarının herhangi birinin değerini değiştirmek satırı değiştirilmiş olarak işaretler.</span><span class="sxs-lookup"><span data-stu-id="41505-175">Changing the value of any of the row s columns marks the row as modified.</span></span>

<span data-ttu-id="41505-176">`SuppliersBLL` sınıfında, ilk olarak tek tedarikçide bir `SuppliersDataTable` ve ardından aşağıdaki kodu kullanarak `Address`, `City`ve `Country` sütun değerlerini ayarlayarak belirtilen tedarikçinin s adres bilgilerini güncelleştirdik:</span><span class="sxs-lookup"><span data-stu-id="41505-176">In the `SuppliersBLL` class we update the specified supplier s address information by first reading in the single supplier record into a `SuppliersDataTable` and then set the `Address`, `City`, and `Country` column values using the following code:</span></span>

[!code-csharp[Main](performing-batch-updates-cs/samples/sample5.cs)]

<span data-ttu-id="41505-177">Bu kod, geçirilen adres, şehir ve ülke değerlerini, değerlerin değiştirilip değiştirilmediğini bakılmaksızın `SuppliersDataTable` `SuppliersRow` atar.</span><span class="sxs-lookup"><span data-stu-id="41505-177">This code naively assigns the passed-in address, city, and country values to the `SuppliersRow` in the `SuppliersDataTable` regardless of whether or not the values have changed.</span></span> <span data-ttu-id="41505-178">Bu değişiklikler `SuppliersRow` s `RowState` özelliğinin değiştirilmiş olarak işaretlenmesine neden olur.</span><span class="sxs-lookup"><span data-stu-id="41505-178">These modifications cause the `SuppliersRow` s `RowState` property to be marked as modified.</span></span> <span data-ttu-id="41505-179">Veri erişim katmanı s `Update` yöntemi çağrıldığında, `SupplierRow` değiştirildiğini görür ve bu nedenle veritabanına bir `UPDATE` komutu gönderir.</span><span class="sxs-lookup"><span data-stu-id="41505-179">When the Data Access Layer s `Update` method is called, it sees that the `SupplierRow` has been modified and therefore sends an `UPDATE` command to the database.</span></span>

<span data-ttu-id="41505-180">Bununla birlikte, yalnızca `SuppliersRow` s mevcut değerlerinden farklıysa, yalnızca geçirilen adres, şehir ve ülke değerlerini atamak için bu yönteme kod ekledik.</span><span class="sxs-lookup"><span data-stu-id="41505-180">Imagine, however, that we added code to this method to only assign the passed-in address, city, and country values if they differ from the `SuppliersRow` s existing values.</span></span> <span data-ttu-id="41505-181">Adres, şehir ve ülkenin mevcut verilerle aynı olduğu durumlarda, hiçbir değişiklik yapılmaz ve `SupplierRow` s `RowState` değiştirilmemiş olarak işaretlenir.</span><span class="sxs-lookup"><span data-stu-id="41505-181">In the case where the address, city, and country are the same as the existing data, no changes will be made and the `SupplierRow` s `RowState` will be left marked as unchanged.</span></span> <span data-ttu-id="41505-182">Ağ sonucu, DAL s `Update` yöntemi çağrıldığında, `SuppliersRow` değiştirilmediği için hiçbir veritabanı çağrısının yapılmaması durumunda olur.</span><span class="sxs-lookup"><span data-stu-id="41505-182">The net result is that when the DAL s `Update` method is called, no database call will be made because the `SuppliersRow` has not been modified.</span></span>

<span data-ttu-id="41505-183">Bu değişikliği yapmak için, şu kodla, geçen adres, şehir ve ülke değerlerini etkileyen deyimleri değiştirin:</span><span class="sxs-lookup"><span data-stu-id="41505-183">To enact this change, replace the statements that blindly assign the passed-in address, city, and country values with the following code:</span></span>

[!code-csharp[Main](performing-batch-updates-cs/samples/sample6.cs)]

<span data-ttu-id="41505-184">Bu eklenen kodla, DAL s `Update` yöntemi veritabanına yalnızca adresle ilgili değerler değiştirilen kayıtlar için bir `UPDATE` ifade gönderir.</span><span class="sxs-lookup"><span data-stu-id="41505-184">With this added code, the DAL s `Update` method sends an `UPDATE` statement to the database for only those records whose address-related values have changed.</span></span>

<span data-ttu-id="41505-185">Alternatif olarak, geçilen adres alanları ve veritabanı verileri arasında herhangi bir farklılık olup olmadığını ve yoksa yalnızca DAL s `Update` metoduna olan çağrıyı atlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="41505-185">Alternatively, we could keep track of whether there are any differences between the passed-in address fields and the database data and, if there are none, simply bypass the call to the DAL s `Update` method.</span></span> <span data-ttu-id="41505-186">Bu yaklaşım, veritabanı doğrudan yöntemi bir veritabanı çağrısının gerçekten gerekli olup olmadığını tespit etmek üzere `RowState` denetlenebileceği bir `SuppliersRow` örneği geçirdiğinden, DB Direct yöntemini yeniden kullandığınızda iyi bir şekilde çalışabilir.</span><span class="sxs-lookup"><span data-stu-id="41505-186">This approach works well if you re using the DB direct method, since the DB direct method isn t passed a `SuppliersRow` instance whose `RowState` can be checked to determine whether a database call is actually needed.</span></span>

> [!NOTE]
> <span data-ttu-id="41505-187">`UpdateSupplierAddress` yöntemi her çağrıldığında, güncelleştirilmiş kayıt hakkında bilgi almak için veritabanına bir çağrı yapılır.</span><span class="sxs-lookup"><span data-stu-id="41505-187">Each time the `UpdateSupplierAddress` method is invoked, a call is made to the database to retrieve information about the updated record.</span></span> <span data-ttu-id="41505-188">Daha sonra verilerde değişiklik olursa tablo satırını güncelleştirmek için başka bir veritabanına yapılan çağrı yapılır.</span><span class="sxs-lookup"><span data-stu-id="41505-188">Then, if there are any changes in data, another call to the database is made to update the table row.</span></span> <span data-ttu-id="41505-189">Bu iş akışı, `BatchUpdate.aspx` sayfasındaki *Tüm* değişikliklere sahip bir `EmployeesDataTable` örneğini kabul eden bir `UpdateSupplierAddress` yöntemi aşırı yüklemesi oluşturularak iyileştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="41505-189">This workflow could be optimized by creating an `UpdateSupplierAddress` method overload that accepts an `EmployeesDataTable` instance that has *all* of the changes from the `BatchUpdate.aspx` page.</span></span> <span data-ttu-id="41505-190">Daha sonra, `Suppliers` tablodaki tüm kayıtları almak için veritabanına bir çağrı yapabilir.</span><span class="sxs-lookup"><span data-stu-id="41505-190">Then, it could make one call to the database to get all of the records from the `Suppliers` table.</span></span> <span data-ttu-id="41505-191">Bu durumda, iki sonuç kümeleri numaralandırılır ve yalnızca değişikliklerin gerçekleştiği kayıtlar güncelleştirilemeyebilir.</span><span class="sxs-lookup"><span data-stu-id="41505-191">The two resultsets could then be enumerated and only those records where changes have occurred could be updated.</span></span>

## <a name="summary"></a><span data-ttu-id="41505-192">Özet</span><span class="sxs-lookup"><span data-stu-id="41505-192">Summary</span></span>

<span data-ttu-id="41505-193">Bu öğreticide, tam olarak düzenlenebilir bir DataList oluşturmayı, kullanıcının birden çok tedarikçi için adres bilgilerini hızlı bir şekilde değiştirmesine izin vermeyi gördük.</span><span class="sxs-lookup"><span data-stu-id="41505-193">In this tutorial we saw how to create a fully editable DataList, allowing a user to quickly modify the address information for multiple suppliers.</span></span> <span data-ttu-id="41505-194">Bir metin kutusu Web denetimi oluşturma arabirimini, DataList s `ItemTemplate`içindeki Tedarikçi adresi, şehir ve ülke değerleri için tanımlayarak başladık.</span><span class="sxs-lookup"><span data-stu-id="41505-194">We started by defining the editing interface a TextBox Web control for the supplier s address, city, and country values in the DataList s `ItemTemplate`.</span></span> <span data-ttu-id="41505-195">Daha sonra, DataList 'in üzerinde ve altındaki tüm düğmeleri güncelleştirme ekledik.</span><span class="sxs-lookup"><span data-stu-id="41505-195">Next, we added Update All buttons above and below the DataList.</span></span> <span data-ttu-id="41505-196">Bir Kullanıcı değişiklikleri yaptıktan ve Tümünü Güncelleştir düğmelerinden birine tıkladıktan sonra, `DataListItem` s numaralandırılır ve `SuppliersBLL` sınıfı s `UpdateSupplierAddress` yöntemine bir çağrı yapılır.</span><span class="sxs-lookup"><span data-stu-id="41505-196">After a user has made his changes and clicked one of the Update All buttons, the `DataListItem` s are enumerated and a call to the `SuppliersBLL` class s `UpdateSupplierAddress` method is made.</span></span>

<span data-ttu-id="41505-197">Programlamanın kutlu olsun!</span><span class="sxs-lookup"><span data-stu-id="41505-197">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="41505-198">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="41505-198">About the Author</span></span>

<span data-ttu-id="41505-199">4GuysFromRolla.com 'in, [Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), yedi ASP/ASP. net books ve [](http://www.4guysfromrolla.com)'in yazarı, 1998 sürümünden bu yana Microsoft Web teknolojileriyle çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="41505-199">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="41505-200">Scott bağımsız danışman, Trainer ve yazıcı olarak çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="41505-200">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="41505-201">En son kitabı, [*24 saat içinde ASP.NET 2,0 kendi kendinize eğitim*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)ister.</span><span class="sxs-lookup"><span data-stu-id="41505-201">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="41505-202">mitchell@4GuysFromRolla.comadresinden erişilebilir [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="41505-202">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="41505-203">ya da blog aracılığıyla [http://ScottOnWriting.NET](http://ScottOnWriting.NET)bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="41505-203">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="41505-204">Özel olarak teşekkürler</span><span class="sxs-lookup"><span data-stu-id="41505-204">Special Thanks To</span></span>

<span data-ttu-id="41505-205">Bu öğretici serisi birçok yararlı gözden geçirenler tarafından incelendi.</span><span class="sxs-lookup"><span data-stu-id="41505-205">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="41505-206">Bu öğreticiye ilişkin müşteri adayı gözden geçirenler Zack Jones ve Ken ön PISA ' dir.</span><span class="sxs-lookup"><span data-stu-id="41505-206">Lead reviewers for this tutorial were Zack Jones and Ken Pespisa.</span></span> <span data-ttu-id="41505-207">Yaklaşan MSDN makalelerimi gözden geçiriyor musunuz?</span><span class="sxs-lookup"><span data-stu-id="41505-207">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="41505-208">Öyleyse, benimitchell@4GuysFromRolla.combir satır bırakın [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="41505-208">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="41505-209">[Önceki](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md)
> [İleri](handling-bll-and-dal-level-exceptions-cs.md)</span><span class="sxs-lookup"><span data-stu-id="41505-209">[Previous](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md)
[Next](handling-bll-and-dal-level-exceptions-cs.md)</span></span>
