---
uid: web-forms/overview/data-access/custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs
title: GridView 'a ekleme ve düğmelere yanıt verme (C#) | Microsoft Docs
author: rick-anderson
description: Bu öğreticide, hem bir şablon hem de bir GridView veya DetailsView denetiminin alanları için özel düğmeler ekleme bölümüne bakacağız. Özellikle de biz...
ms.author: riande
ms.date: 09/13/2006
ms.assetid: 128fdb5f-4c5e-42b5-b485-f3aee90a8e38
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs
msc.type: authoredcontent
ms.openlocfilehash: 5c87386e4fe2c53b39162071689f2522dcc6c7ac
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78549646"
---
# <a name="adding-and-responding-to-buttons-to-a-gridview-c"></a><span data-ttu-id="a0a4b-104">GridView’a Düğme Ekleme ve Bunları Yanıtlama (C#)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-104">Adding and Responding to Buttons to a GridView (C#)</span></span>

<span data-ttu-id="a0a4b-105">[Scott Mitchell](https://twitter.com/ScottOnWriting) tarafından</span><span class="sxs-lookup"><span data-stu-id="a0a4b-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a0a4b-106">[Örnek uygulamayı indirin](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_28_CS.exe) veya [PDF 'yi indirin](adding-and-responding-to-buttons-to-a-gridview-cs/_static/datatutorial28cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-106">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_28_CS.exe) or [Download PDF](adding-and-responding-to-buttons-to-a-gridview-cs/_static/datatutorial28cs1.pdf)</span></span>

> <span data-ttu-id="a0a4b-107">Bu öğreticide, hem bir şablon hem de bir GridView veya DetailsView denetiminin alanları için özel düğmeler ekleme bölümüne bakacağız.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-107">In this tutorial we'll look at how to add custom buttons, both to a template and to the fields of a GridView or DetailsView control.</span></span> <span data-ttu-id="a0a4b-108">Özellikle, kullanıcının tedarikçilerle sayfa oluşturmasını sağlayan bir FormView içeren bir arabirim oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-108">In particular, we'll build an interface that has a FormView that allows the user to page through the suppliers.</span></span>

## <a name="introduction"></a><span data-ttu-id="a0a4b-109">Giriş</span><span class="sxs-lookup"><span data-stu-id="a0a4b-109">Introduction</span></span>

<span data-ttu-id="a0a4b-110">Birçok raporlama senaryosu rapor verilerine salt okuma erişimi içerirken, raporların, görüntülenecek verilere göre eylemleri gerçekleştirme yeteneğini içermesi çok seyrek değildir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-110">While many reporting scenarios involve read-only access to the report data, it's not uncommon for reports to include the ability to perform actions based upon the data displayed.</span></span> <span data-ttu-id="a0a4b-111">Genellikle bu, tıklatıldığında raporda görüntülenen her kayıtla birlikte bir Button, LinkButton veya ImageButton Web denetimi eklemeyi, tıklandığı zaman geri göndermeye neden olur ve bazı sunucu tarafı kodları çağırır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-111">Typically this involved adding a Button, LinkButton, or ImageButton Web control with each record displayed in the report that, when clicked, causes a postback and invokes some server-side code.</span></span> <span data-ttu-id="a0a4b-112">Kayda göre kayıt temelinde verileri düzenlemenin ve silmenin en yaygın örneği vardır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-112">Editing and deleting the data on a record-by-record basis is the most common example.</span></span> <span data-ttu-id="a0a4b-113">Aslında, veri öğreticisini [ekleme, güncelleştirme ve silmeye Ilişkin genel bakışın](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) yanı sıra, düzenlemenin ve silmenin yanı sıra GridView, DetailsView ve FormView denetimlerinin tek bir kod satırı yazmak zorunda kalmadan bu işlevselliği destekleyebilmesi yaygın bir çalışmadır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-113">In fact, as we saw starting with the [Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, editing and deleting is so common that the GridView, DetailsView, and FormView controls can support such functionality without the need for writing a single line of code.</span></span>

<span data-ttu-id="a0a4b-114">Düzenle ve Sil düğmelerine ek olarak, GridView, DetailsView ve FormView denetimleri, tıklandığı sırada bazı özel sunucu tarafı mantığlarını, LinkButtons 'ı veya görüntü düğmelerini de içerebilir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-114">In addition to Edit and Delete buttons, the GridView, DetailsView, and FormView controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="a0a4b-115">Bu öğreticide, hem bir şablon hem de bir GridView veya DetailsView denetiminin alanları için özel düğmeler ekleme bölümüne bakacağız.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-115">In this tutorial we'll look at how to add custom buttons, both to a template and to the fields of a GridView or DetailsView control.</span></span> <span data-ttu-id="a0a4b-116">Özellikle, kullanıcının tedarikçilerle sayfa oluşturmasını sağlayan bir FormView içeren bir arabirim oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-116">In particular, we'll build an interface that has a FormView that allows the user to page through the suppliers.</span></span> <span data-ttu-id="a0a4b-117">Belirli bir tedarikçi için, FormView, bir düğme web denetimiyle birlikte tedarikçi hakkındaki bilgileri gösterir ve tıklandıklarında ilişkili tüm ürünlerini kullanımdan kaldırıldı olarak işaretleyebilir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-117">For a given supplier, the FormView will show information about the supplier along with a Button Web control that, if clicked, will mark all of their associated products as discontinued.</span></span> <span data-ttu-id="a0a4b-118">Ek olarak, bir GridView, seçili tedarikçi tarafından sunulan bu ürünleri, tıklanmış olması durumunda ürünün `UnitPrice` %10 ' u (bkz. Şekil 1) yükseltir veya azalttığını gösteren fiyat ve Indirimli Fiyat düğmelerini içeren her bir satırla listeler.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-118">Additionally, a GridView lists those products provided by the selected supplier, with each row containing Increase Price and Discount Price Buttons that, if clicked, raise or reduce the product's `UnitPrice` by 10% (see Figure 1).</span></span>

<span data-ttu-id="a0a4b-119">[FormView ve GridView 'un her Ikisi de ![özel eylemleri gerçekleştiren düğmeler Içerir](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image2.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-119">[![Both the FormView and GridView Contain Buttons That Perform Custom Actions](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image2.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image1.png)</span></span>

<span data-ttu-id="a0a4b-120">**Şekil 1**: hem FormView hem de GridView özel eylemleri gerçekleştiren düğmeler içerir ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-120">**Figure 1**: Both the FormView and GridView Contain Buttons That Perform Custom Actions ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image3.png))</span></span>

## <a name="step-1-adding-the-button-tutorial-web-pages"></a><span data-ttu-id="a0a4b-121">1\. Adım: düğme öğreticisi Web sayfalarını ekleme</span><span class="sxs-lookup"><span data-stu-id="a0a4b-121">Step 1: Adding the Button Tutorial Web Pages</span></span>

<span data-ttu-id="a0a4b-122">Özel düğmeler eklemeye bakmadan önce, Web sitesi projemizdeki Bu öğreticide gereken ASP.NET sayfalarını oluşturmak için bir dakikanızı atalım.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-122">Before we look at how to add a custom buttons, let's first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="a0a4b-123">`CustomButtons`adlı yeni bir klasör ekleyerek başlayın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-123">Start by adding a new folder named `CustomButtons`.</span></span> <span data-ttu-id="a0a4b-124">Sonra, her bir sayfayı `Site.master` ana sayfayla ilişkilendirdiğinizden emin olmak için, aşağıdaki iki ASP.NET sayfasını bu klasöre ekleyin:</span><span class="sxs-lookup"><span data-stu-id="a0a4b-124">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`

![Özel düğmelerle Ilgili öğreticiler için ASP.NET sayfaları ekleyin](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image4.png)

<span data-ttu-id="a0a4b-126">**Şekil 2**: özel düğmelerle ilgili öğreticiler Için ASP.NET sayfaları ekleme</span><span class="sxs-lookup"><span data-stu-id="a0a4b-126">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>

<span data-ttu-id="a0a4b-127">Diğer klasörlerde olduğu gibi, `CustomButtons` klasöründeki `Default.aspx` öğreticileri bölümündeki öğreticilerin listelecektir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-127">Like in the other folders, `Default.aspx` in the `CustomButtons` folder will list the tutorials in its section.</span></span> <span data-ttu-id="a0a4b-128">`SectionLevelTutorialListing.ascx` Kullanıcı denetiminin bu işlevselliği sağladığını hatırlayın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-128">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="a0a4b-129">Bu nedenle, bu kullanıcı denetimini Çözüm Gezgini sayfanın Tasarım görünümü üzerine sürükleyerek `Default.aspx` ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-129">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page's Design view.</span></span>

<span data-ttu-id="a0a4b-130">[SectionLevelTutorialListing. ascx Kullanıcı denetimini default. aspx öğesine eklemek ![](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image6.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-130">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image6.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image5.png)</span></span>

<span data-ttu-id="a0a4b-131">**Şekil 3**: `Default.aspx` `SectionLevelTutorialListing.ascx` Kullanıcı denetimini ekleme ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-131">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image7.png))</span></span>

<span data-ttu-id="a0a4b-132">Son olarak, sayfaları `Web.sitemap` dosyasına girdi olarak ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-132">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="a0a4b-133">Özellikle, sayfalama ve sıralama `<siteMapNode>`sonrasında aşağıdaki biçimlendirmeyi ekleyin:</span><span class="sxs-lookup"><span data-stu-id="a0a4b-133">Specifically, add the following markup after the Paging and Sorting `<siteMapNode>`:</span></span>

[!code-xml[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample1.xml)]

<span data-ttu-id="a0a4b-134">`Web.sitemap`güncelleştirildikten sonra Öğreticiler Web sitesini bir tarayıcıdan görüntülemek için bir dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-134">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="a0a4b-135">Sol taraftaki menü artık öğreticilerin düzenlenmesine, eklemeye ve silinmesine yönelik öğeler içerir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-135">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>

![Site Haritası artık özel düğmeler öğreticisi için girişi Içerir](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image8.png)

<span data-ttu-id="a0a4b-137">**Şekil 4**: site haritası artık özel düğmeler öğreticisi Için girişi içerir</span><span class="sxs-lookup"><span data-stu-id="a0a4b-137">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>

## <a name="step-2-adding-a-formview-that-lists-the-suppliers"></a><span data-ttu-id="a0a4b-138">2\. Adım: tedarikçileri listeleyen bir FormView ekleme</span><span class="sxs-lookup"><span data-stu-id="a0a4b-138">Step 2: Adding a FormView that Lists the Suppliers</span></span>

<span data-ttu-id="a0a4b-139">Tedarikçilerini listeleyen FormView 'ı ekleyerek Bu öğreticiye başlaalım.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-139">Let's get started with this tutorial by adding the FormView that lists the suppliers.</span></span> <span data-ttu-id="a0a4b-140">Bu FormView, giriş bölümünde anlatıldığı gibi, bir GridView 'da tedarikçi tarafından sunulan ürünleri göstererek kullanıcının tedarikçilerle sayfa eklemesine izin verir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-140">As discussed in the Introduction, this FormView will allow the user to page through the suppliers, showing the products provided by the supplier in a GridView.</span></span> <span data-ttu-id="a0a4b-141">Ayrıca, bu FormView, tıklandığında tedarikçinin ürünlerinin tümünü kullanımdan kaldırıldı olarak işaretleyecek bir düğme içerir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-141">Additionally, this FormView will include a Button that, when clicked, will mark all of the supplier's products as discontinued.</span></span> <span data-ttu-id="a0a4b-142">Kendimize 'e özel düğme ekleme konusunda sorun yapmadan önce, ilk olarak, tedarikçi bilgilerini görüntüleyecek şekilde FormView 'u oluşturalım.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-142">Before we concern ourselves with adding the custom button to the FormView, let's first just create the FormView so that it displays the supplier information.</span></span>

<span data-ttu-id="a0a4b-143">`CustomButtons` klasöründeki `CustomButtons.aspx` sayfasını açarak başlayın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-143">Start by opening the `CustomButtons.aspx` page in the `CustomButtons` folder.</span></span> <span data-ttu-id="a0a4b-144">Araç kutusundan Tasarımcı üzerine sürükleyerek sayfaya bir FormView ekleyin ve `ID` özelliğini `Suppliers`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-144">Add a FormView to the page by dragging it from the Toolbox onto the Designer and set its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="a0a4b-145">FormView 'un akıllı etiketiyle `SuppliersDataSource`adlı yeni bir ObjectDataSource oluşturmayı tercih edin.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-145">From the FormView's smart tag, opt to create a new ObjectDataSource named `SuppliersDataSource`.</span></span>

<span data-ttu-id="a0a4b-146">[SuppliersDataSource adlı yeni bir ObjectDataSource oluşturma ![](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image10.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-146">[![Create a New ObjectDataSource Named SuppliersDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image10.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image9.png)</span></span>

<span data-ttu-id="a0a4b-147">**Şekil 5**: `SuppliersDataSource` adlı yeni bir ObjectDataSource oluşturun ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-147">**Figure 5**: Create a New ObjectDataSource Named `SuppliersDataSource` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image11.png))</span></span>

<span data-ttu-id="a0a4b-148">`SuppliersBLL` sınıfının `GetSuppliers()` yönteminden (bkz. Şekil 6) sorgulamalarını sağlayan bu yeni ObjectDataSource 'ı yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-148">Configure this new ObjectDataSource such that it queries from the `SuppliersBLL` class's `GetSuppliers()` method (see Figure 6).</span></span> <span data-ttu-id="a0a4b-149">Bu FormView, tedarikçi bilgilerini güncelleştirmek için bir arabirim sağlamadığından, GÜNCELLEŞTIR sekmesindeki aşağı açılan listeden (hiçbiri) seçeneğini belirleyin.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-149">Since this FormView does not provide an interface for updating the supplier information, select the (None) option from the drop-down list in the UPDATE tab.</span></span>

<span data-ttu-id="a0a4b-150">[Veri kaynağını SuppliersBLL Class s GetSuppliers () metodunu kullanacak şekilde yapılandırmak ![](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image13.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-150">[![Configure the Data Source to use the SuppliersBLL Class s GetSuppliers() Method](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image13.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image12.png)</span></span>

<span data-ttu-id="a0a4b-151">**Şekil 6**: veri kaynağını `SuppliersBLL` sınıfının `GetSuppliers()` metodunu kullanacak şekilde yapılandırın ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-151">**Figure 6**: Configure the Data Source to use the `SuppliersBLL` Class's `GetSuppliers()` Method ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image14.png))</span></span>

<span data-ttu-id="a0a4b-152">ObjectDataSource yapılandırıldıktan sonra, Visual Studio FormView için bir `InsertItemTemplate`, `EditItemTemplate`ve `ItemTemplate` oluşturur.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-152">After configuring the ObjectDataSource, Visual Studio will generate an `InsertItemTemplate`, `EditItemTemplate`, and `ItemTemplate` for the FormView.</span></span> <span data-ttu-id="a0a4b-153">`InsertItemTemplate` ve `EditItemTemplate` kaldırın ve `ItemTemplate` yalnızca tedarikçinin şirket adını ve telefon numarasını görüntüleyecek şekilde değiştirin.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-153">Remove the `InsertItemTemplate` and `EditItemTemplate` and modify the `ItemTemplate` so that it displays just the supplier's company name and phone number.</span></span> <span data-ttu-id="a0a4b-154">Son olarak, akıllı etiketinden sayfalama etkinleştir onay kutusunu işaretleyerek (veya `AllowPaging` özelliğini `True`olarak ayarlayarak FormView için sayfalama desteğini açın).</span><span class="sxs-lookup"><span data-stu-id="a0a4b-154">Finally, turn on paging support for the FormView by checking the Enable Paging checkbox from its smart tag (or by setting its `AllowPaging` property to `True`).</span></span> <span data-ttu-id="a0a4b-155">Bu değişikliklerden sonra sayfanızın bildirime dayalı biçimlendirmesi aşağıdakine benzer görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="a0a4b-155">After these changes your page's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample2.aspx)]

<span data-ttu-id="a0a4b-156">Şekil 7 ' de bir tarayıcıdan görüntülendiklerinde CustomButtons. aspx sayfası gösterilir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-156">Figure 7 shows the CustomButtons.aspx page when viewed through a browser.</span></span>

<span data-ttu-id="a0a4b-157">[FormView ![Şu anda seçili olan tedarikçiden CompanyName ve telefon alanlarını listeler](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image16.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-157">[![The FormView Lists the CompanyName and Phone Fields from the Currently Selected Supplier](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image16.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image15.png)</span></span>

<span data-ttu-id="a0a4b-158">**Şekil 7**: FormView, şu anda seçili olan tedarikçiden `CompanyName` ve `Phone` alanlarını listeler ([tam boyutlu görüntüyü görüntülemek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-158">**Figure 7**: The FormView Lists the `CompanyName` and `Phone` Fields from the Currently Selected Supplier ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image17.png))</span></span>

## <a name="step-3-adding-a-gridview-that-lists-the-selected-suppliers-products"></a><span data-ttu-id="a0a4b-159">3\. Adım: seçili tedarikçinin ürünlerini listeleyen bir GridView ekleme</span><span class="sxs-lookup"><span data-stu-id="a0a4b-159">Step 3: Adding a GridView that Lists the Selected Supplier's Products</span></span>

<span data-ttu-id="a0a4b-160">Tüm ürünleri Durdur düğmesini FormView 'un şablonuna eklemeden önce, önce seçili tedarikçi tarafından sunulan ürünleri listeleyen FormView 'un altına bir GridView ekleyelim.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-160">Before we add the Discontinue All Products Button to the FormView's template, let's first add a GridView beneath the FormView that lists the products provided by the selected supplier.</span></span> <span data-ttu-id="a0a4b-161">Bunu gerçekleştirmek için, sayfaya bir GridView ekleyin, `ID` özelliğini `SuppliersProducts`olarak ayarlayın ve `SuppliersProductsDataSource`adlı yeni bir ObjectDataSource ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-161">To accomplish this, add a GridView to the page, set its `ID` property to `SuppliersProducts`, and add a new ObjectDataSource named `SuppliersProductsDataSource`.</span></span>

<span data-ttu-id="a0a4b-162">[SuppliersProductsDataSource adlı yeni bir ObjectDataSource oluşturma ![](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image19.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-162">[![Create a New ObjectDataSource Named SuppliersProductsDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image19.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image18.png)</span></span>

<span data-ttu-id="a0a4b-163">**Şekil 8**: `SuppliersProductsDataSource` adlı yeni bir ObjectDataSource oluşturun ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-163">**Figure 8**: Create a New ObjectDataSource Named `SuppliersProductsDataSource` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image20.png))</span></span>

<span data-ttu-id="a0a4b-164">Bu ObjectDataSource 'ı ProductsBLL sınıfının `GetProductsBySupplierID(supplierID)` yöntemini kullanacak şekilde yapılandırın (bkz. Şekil 9).</span><span class="sxs-lookup"><span data-stu-id="a0a4b-164">Configure this ObjectDataSource to use the ProductsBLL class's `GetProductsBySupplierID(supplierID)` method (see Figure 9).</span></span> <span data-ttu-id="a0a4b-165">Bu GridView bir ürünün fiyatının ayarlanmasına izin vermekle kalmaz, GridView 'daki yerleşik düzenlemeyle veya silmeden özellikleri kullanmayacaktır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-165">While this GridView will allow for a product's price to be adjusted, it won't be using the built-in editing or deleting features from the GridView.</span></span> <span data-ttu-id="a0a4b-166">Bu nedenle, ObjectDataSource 'un GÜNCELLEŞTIRME, ekleme ve SILME sekmeleri için açılan listeyi (yok) olarak ayarlayabiliriz.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-166">Therefore, we can set the drop-down list to (None) for the ObjectDataSource's UPDATE, INSERT, and DELETE tabs.</span></span>

<span data-ttu-id="a0a4b-167">[![veri kaynağını ProductsBLL sınıfı s Getproductsbysupplierıd (SupplierID) metodunu kullanacak şekilde yapılandırın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image22.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-167">[![Configure the Data Source to use the ProductsBLL Class s GetProductsBySupplierID(supplierID) Method](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image22.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image21.png)</span></span>

<span data-ttu-id="a0a4b-168">**Şekil 9**: veri kaynağını `ProductsBLL` sınıfının `GetProductsBySupplierID(supplierID)` metodunu kullanacak şekilde yapılandırın ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-168">**Figure 9**: Configure the Data Source to use the `ProductsBLL` Class's `GetProductsBySupplierID(supplierID)` Method ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image23.png))</span></span>

<span data-ttu-id="a0a4b-169">`GetProductsBySupplierID(supplierID)` yöntemi bir giriş parametresini kabul ettiğinden, ObjectDataSource Sihirbazı bize bu parametre değerinin kaynağını sorar.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-169">Since the `GetProductsBySupplierID(supplierID)` method accepts an input parameter, the ObjectDataSource wizard prompts us for the source of this parameter value.</span></span> <span data-ttu-id="a0a4b-170">FormView 'dan `SupplierID` değerini geçirmek için, parametre kaynağı açılır listesini kontrol ve ControlID açılan listesini `Suppliers` (adım 2 ' de oluşturulan FormView 'un KIMLIĞI) olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-170">To pass in the `SupplierID` value from the FormView, set the Parameter source drop-down list to Control and the ControlID drop-down list to `Suppliers` (the ID of the FormView created in Step 2).</span></span>

<span data-ttu-id="a0a4b-171">[![SupplierID parametresinin Suppliers FormView denetiminden gelmesi gerektiğini belirtir](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image25.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-171">[![Indicate that the supplierID Parameter Should Come from the Suppliers FormView Control](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image25.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image24.png)</span></span>

<span data-ttu-id="a0a4b-172">**Şekil 10**: *`supplierID`* parametresinin `Suppliers` FormView denetiminden gelmesi gerektiğini belirtin ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-172">**Figure 10**: Indicate that the *`supplierID`* Parameter Should Come from the `Suppliers` FormView Control ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image26.png))</span></span>

<span data-ttu-id="a0a4b-173">ObjectDataSource sihirbazını tamamladıktan sonra GridView, her bir ürünün veri alanı için bir BoundField veya CheckBoxField içerecektir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-173">After completing the ObjectDataSource wizard, the GridView will contain a BoundField or CheckBoxField for each of the product's data fields.</span></span> <span data-ttu-id="a0a4b-174">Yalnızca `ProductName` ve `UnitPrice` BoundFields alanlarını `Discontinued` CheckBoxField ile birlikte göstermek için bunu kırpalım; Ayrıca, metnin bir para birimi olarak biçimlendirilmesi için `UnitPrice` BoundField olarak biçimlendirelim.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-174">Let's trim this down to show just the `ProductName` and `UnitPrice` BoundFields along with the `Discontinued` CheckBoxField; furthermore, let's format the `UnitPrice` BoundField such that its text is formatted as a currency.</span></span> <span data-ttu-id="a0a4b-175">GridView ve `SuppliersProductsDataSource` ObjectDataSource 'un bildirim temelli biçimlendirmesi aşağıdaki biçimlendirmeye benzer olmalıdır:</span><span class="sxs-lookup"><span data-stu-id="a0a4b-175">Your GridView and `SuppliersProductsDataSource` ObjectDataSource's declarative markup should look similar to the following markup:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample3.aspx)]

<span data-ttu-id="a0a4b-176">Bu noktada, öğreticimiz ana/ayrıntı raporunu görüntüleyerek kullanıcının en üstteki FormView 'dan bir tedarikçi seçmesini ve alttaki GridView aracılığıyla söz konusu tedarikçi tarafından sunulan ürünleri görüntülemesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-176">At this point our tutorial displays a master/details report, allowing the user to pick a supplier from the FormView at the top and to view the products provided by that supplier through the GridView at the bottom.</span></span> <span data-ttu-id="a0a4b-177">Şekil 11 ' den bu sayfanın bir ekran görüntüsünü, FormView 'dan Tokyo Traders tedarikçisine seçerken gösterir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-177">Figure 11 shows a screen shot of this page when selecting the Tokyo Traders supplier from the FormView.</span></span>

<span data-ttu-id="a0a4b-178">[![seçili tedarikçinin ürünleri GridView 'da görüntülenir](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image28.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-178">[![The Selected Supplier s Products are Displayed in the GridView](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image28.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image27.png)</span></span>

<span data-ttu-id="a0a4b-179">**Şekil 11**: seçili tedarikçinin ürünleri GridView 'da görüntülenir ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image29.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-179">**Figure 11**: The Selected Supplier's Products are Displayed in the GridView ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image29.png))</span></span>

## <a name="step-4-creating-dal-and-bll-methods-to-discontinue-all-products-for-a-supplier"></a><span data-ttu-id="a0a4b-180">4\. Adım: bir tedarikçiye yönelik tüm ürünleri sona erdirmek için DAL ve BLL yöntemleri oluşturma</span><span class="sxs-lookup"><span data-stu-id="a0a4b-180">Step 4: Creating DAL and BLL Methods to Discontinue All Products for a Supplier</span></span>

<span data-ttu-id="a0a4b-181">FormView 'a bir düğme ekleyebilmemiz için, tıkladıklarında tedarikçinin tüm ürünlerini tamamen devam ettirir, bu eylemi gerçekleştiren DAL ve BLL 'ye bir yöntem eklememiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-181">Before we can add a Button to the FormView that, when clicked, discontinues all of the supplier's products, we first need to add a method to both the DAL and BLL that performs this action.</span></span> <span data-ttu-id="a0a4b-182">Özellikle, bu yöntem `DiscontinueAllProductsForSupplier(supplierID)`olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-182">In particular, this method will be named `DiscontinueAllProductsForSupplier(supplierID)`.</span></span> <span data-ttu-id="a0a4b-183">FormView 'un düğmesine tıklandığında, bu yöntemi Iş mantığı katmanında, seçilen tedarikçinin `SupplierID`geçirerek çağıracağız; BLL daha sonra karşılık gelen veri erişim katmanı yöntemine çağrı yapılır, bu, veritabanında belirtilen tedarikçinin ürünlerini sürekli olarak devam eden `UPDATE` bir bildirim sağlar.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-183">When the FormView's Button is clicked, we'll invoke this method in the Business Logic Layer, passing in the selected supplier's `SupplierID`; the BLL will then call down to the corresponding Data Access Layer method, which will issue an `UPDATE` statement to the database that discontinues the specified supplier's products.</span></span>

<span data-ttu-id="a0a4b-184">Önceki öğreticilerimizde yaptığımız gibi, DAL yöntemi oluşturmaya, sonra BLL yöntemine ve son olarak ASP.NET sayfasındaki işlevselliği uygulamaya göre aşağıdan yukarıya bir yaklaşım kullanacağız.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-184">As we have done in our previous tutorials, we'll use a bottom-up approach, starting with creating the DAL method, then the BLL method, and finally implementing the functionality in the ASP.NET page.</span></span> <span data-ttu-id="a0a4b-185">`App_Code/DAL` klasöründe `Northwind.xsd` türü belirtilmiş veri kümesini açın ve `ProductsTableAdapter` yeni bir yöntem ekleyin (`ProductsTableAdapter` sağ tıklayın ve sorgu Ekle ' yi seçin).</span><span class="sxs-lookup"><span data-stu-id="a0a4b-185">Open the `Northwind.xsd` Typed DataSet in the `App_Code/DAL` folder and add a new method to the `ProductsTableAdapter` (right-click on the `ProductsTableAdapter` and choose Add Query).</span></span> <span data-ttu-id="a0a4b-186">Bunun yapılması, yeni yöntemi ekleme sürecinde bize yol gösteren TableAdapter sorgu Yapılandırma Sihirbazı 'nı getirir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-186">Doing so will bring up the TableAdapter Query Configuration wizard, which walks us through the process of adding the new method.</span></span> <span data-ttu-id="a0a4b-187">DAL yönteminizin bir geçici SQL ifadesini kullandığını belirterek başlayın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-187">Start by indicating that our DAL method will use an ad-hoc SQL statement.</span></span>

<span data-ttu-id="a0a4b-188">[![geçici bir SQL Ifadesini kullanarak DAL yöntemi oluşturma](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image31.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image30.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-188">[![Create the DAL Method Using an Ad-Hoc SQL Statement](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image31.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image30.png)</span></span>

<span data-ttu-id="a0a4b-189">**Şekil 12**: GEÇICI bir SQL IFADESINI kullanarak dal yöntemi oluşturma ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image32.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-189">**Figure 12**: Create the DAL Method Using an Ad-Hoc SQL Statement ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image32.png))</span></span>

<span data-ttu-id="a0a4b-190">Daha sonra sihirbaz, oluşturulacak sorgu türünü bizimle uyarır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-190">Next, the wizard prompts us as to what type of query to create.</span></span> <span data-ttu-id="a0a4b-191">`DiscontinueAllProductsForSupplier(supplierID)` yönteminin `Products` veritabanı tablosunu güncelleştirmesi gerekir, çünkü `Discontinued` alanı belirtilen *`supplierID`* tarafından sunulan tüm ürünler için 1 olarak ayarlandığında, verileri güncelleştiren bir sorgu oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-191">Since the `DiscontinueAllProductsForSupplier(supplierID)` method will need to update the `Products` database table, setting the `Discontinued` field to 1 for all products provided by the specified *`supplierID`*, we need to create a query that updates data.</span></span>

<span data-ttu-id="a0a4b-192">[![GÜNCELLEŞTIRME sorgu türünü seçin](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image34.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-192">[![Choose the UPDATE Query Type](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image34.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image33.png)</span></span>

<span data-ttu-id="a0a4b-193">**Şekil 13**: güncelleştirme sorgu türünü seçin ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image35.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-193">**Figure 13**: Choose the UPDATE Query Type ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image35.png))</span></span>

<span data-ttu-id="a0a4b-194">Sonraki sihirbaz ekranı, TableAdapter 'ın `Products` DataTable içinde tanımlanan her bir alanı güncelleştiren mevcut `UPDATE` ifadesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-194">The next wizard screen provides the TableAdapter's existing `UPDATE` statement, which updates each of the fields defined in the `Products` DataTable.</span></span> <span data-ttu-id="a0a4b-195">Bu sorgu metnini aşağıdaki ifadeyle değiştirin:</span><span class="sxs-lookup"><span data-stu-id="a0a4b-195">Replace this query text with the following statement:</span></span>

[!code-sql[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample4.sql)]

<span data-ttu-id="a0a4b-196">Bu sorguyu girdikten ve Ileri 'ye tıkladıktan sonra, son sihirbaz ekranı yeni yöntemin adının `DiscontinueAllProductsForSupplier`kullanımını ister.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-196">After entering this query and clicking Next, the last wizard screen asks for the new method's name use `DiscontinueAllProductsForSupplier`.</span></span> <span data-ttu-id="a0a4b-197">Son düğmesine tıklayarak Sihirbazı doldurun.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-197">Complete the wizard by clicking the Finish button.</span></span> <span data-ttu-id="a0a4b-198">Veri kümesi tasarımcısına döndükten sonra, `ProductsTableAdapter` adlı `DiscontinueAllProductsForSupplier(@SupplierID)`yeni bir yöntem görmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-198">Upon returning to the DataSet Designer you should see a new method in the `ProductsTableAdapter` named `DiscontinueAllProductsForSupplier(@SupplierID)`.</span></span>

<span data-ttu-id="a0a4b-199">[yeni dal yönteminin adını ![adı allproductsfortedarikç](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image37.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image36.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-199">[![Name the New DAL Method DiscontinueAllProductsForSupplier](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image37.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image36.png)</span></span>

<span data-ttu-id="a0a4b-200">**Şekil 14**: yeni dal yöntemini adlandırın `DiscontinueAllProductsForSupplier` ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image38.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-200">**Figure 14**: Name the New DAL Method `DiscontinueAllProductsForSupplier` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image38.png))</span></span>

<span data-ttu-id="a0a4b-201">Veri erişim katmanında oluşturulan `DiscontinueAllProductsForSupplier(supplierID)` yöntemi ile, sonraki göreviniz Iş mantığı katmanında `DiscontinueAllProductsForSupplier(supplierID)` yöntemini oluşturmaktır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-201">With the `DiscontinueAllProductsForSupplier(supplierID)` method created in the Data Access Layer, our next task is to create the `DiscontinueAllProductsForSupplier(supplierID)` method in the Business Logic Layer.</span></span> <span data-ttu-id="a0a4b-202">Bunu gerçekleştirmek için `ProductsBLL` sınıf dosyasını açın ve aşağıdakileri ekleyin:</span><span class="sxs-lookup"><span data-stu-id="a0a4b-202">To accomplish this, open the `ProductsBLL` class file and add the following:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample5.cs)]

<span data-ttu-id="a0a4b-203">Bu yöntem, yalnızca DAL içindeki `DiscontinueAllProductsForSupplier(supplierID)` yöntemine çağrı yaparak, belirtilen *`supplierID`* parametre değerini geçirerek.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-203">This method simply calls down to the `DiscontinueAllProductsForSupplier(supplierID)` method in the DAL, passing along the provided *`supplierID`* parameter value.</span></span> <span data-ttu-id="a0a4b-204">Yalnızca bir tedarikçinin ürünlerinin belirli koşullarda kullanımdan yapılmasına izin verilen iş kuralları varsa, bu kuralların BLL 'de burada uygulanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-204">If there were any business rules that only allowed a supplier's products to be discontinued under certain circumstances, those rules should be implemented here, in the BLL.</span></span>

> [!NOTE]
> <span data-ttu-id="a0a4b-205">`ProductsBLL` sınıfındaki `UpdateProduct` aşırı yüklemelerin aksine `DiscontinueAllProductsForSupplier(supplierID)` Yöntem imzası `DataObjectMethodAttribute` özniteliğini (`<System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, Boolean)>`) içermez.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-205">Unlike the `UpdateProduct` overloads in the `ProductsBLL` class, the `DiscontinueAllProductsForSupplier(supplierID)` method signature does not include the `DataObjectMethodAttribute` attribute (`<System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, Boolean)>`).</span></span> <span data-ttu-id="a0a4b-206">Bu, ObjectDataSource 'un, GÜNCELLEŞTIRME sekmesindeki veri kaynağı Yapılandırma Sihirbazı 'nın açılan listesinden `DiscontinueAllProductsForSupplier(supplierID)` yöntemini yavaşlatır. Bu özniteliği, ASP.NET sayfamızda doğrudan bir olay işleyicisinden `DiscontinueAllProductsForSupplier(supplierID)` yöntemi çağırmak yaptığımız için atlıyorum.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-206">This precludes the `DiscontinueAllProductsForSupplier(supplierID)` method from the ObjectDataSource's Configure Data Source wizard's drop-down list in the UPDATE tab. I ve omitted this attribute because we'll be calling the `DiscontinueAllProductsForSupplier(supplierID)` method directly from an event handler in our ASP.NET page.</span></span>

## <a name="step-5-adding-a-discontinue-all-products-button-to-the-formview"></a><span data-ttu-id="a0a4b-207">5\. Adım: FormView 'a tüm ürünleri durdur düğmesi ekleme</span><span class="sxs-lookup"><span data-stu-id="a0a4b-207">Step 5: Adding a Discontinue All Products Button to the FormView</span></span>

<span data-ttu-id="a0a4b-208">BLL ve DAL içindeki `DiscontinueAllProductsForSupplier(supplierID)` yöntemi tamamlandıktan sonra, seçili tedarikçiye yönelik tüm ürünleri sona erdirme özelliği eklemek için son adım, FormView 'un `ItemTemplate`bir düğme web denetimi eklemektir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-208">With the `DiscontinueAllProductsForSupplier(supplierID)` method in the BLL and DAL complete, the final step for adding the ability to discontinue all products for the selected supplier is to add a Button Web control to the FormView's `ItemTemplate`.</span></span> <span data-ttu-id="a0a4b-209">Bu tür bir düğmeyi, düğme metniyle tedarikçinin telefon numarasının altına ekleyelim, tüm ürünleri ve `DiscontinueAllProductsForSupplier``ID` özellik değerini sona erdirin.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-209">Let's add such a Button below the supplier's phone number with the button text, Discontinue All Products and an `ID` property value of `DiscontinueAllProductsForSupplier`.</span></span> <span data-ttu-id="a0a4b-210">Bu düğme web denetimini, FormView 'un akıllı etiketindeki Şablonları Düzenle bağlantısına tıklayarak (Şekil 15 ' i görüntüleyin) veya doğrudan bildirime dayalı sözdizimi aracılığıyla ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-210">You can add this Button Web control through the Designer by clicking on the Edit Templates link in the FormView's smart tag (see Figure 15), or directly through the declarative syntax.</span></span>

<span data-ttu-id="a0a4b-211">[![tüm ürünleri Durdur düğme web denetimi ile FormView 'e](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image40.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-211">[![Add a Discontinue All Products Button Web Control to the FormView s ItemTemplate](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image40.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image39.png)</span></span>

<span data-ttu-id="a0a4b-212">**Şekil 15**: FormView 'un `ItemTemplate` tüm ürünleri Durdur düğme web denetimi ekleme ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image41.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-212">**Figure 15**: Add a Discontinue All Products Button Web Control to the FormView's `ItemTemplate` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image41.png))</span></span>

<span data-ttu-id="a0a4b-213">Düğmeye sayfayı ziyaret eden bir kullanıcı tarafından tıklandığında, geri gönderme ve FormView 'un [`ItemCommand` olayı](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.itemcommand.aspx) ateşlenir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-213">When the Button is clicked by a user visiting the page, a postback ensues and the FormView's [`ItemCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.itemcommand.aspx) fires.</span></span> <span data-ttu-id="a0a4b-214">Bu düğmeye tıklanmakta olan bu düğmeye yanıt olarak özel kod yürütmek için, bu olay için bir olay işleyicisi oluşturarız.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-214">To execute custom code in response to this Button being clicked, we can create an event handler for this event.</span></span> <span data-ttu-id="a0a4b-215">Bu durumda, *her* düğme, LinkButton veya ImageButton Web denetimine FormView içinde tıklandığında `ItemCommand` olayının tetiklendiğine anlayın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-215">Understand, though, that the `ItemCommand` event fires whenever *any* Button, LinkButton, or ImageButton Web control is clicked within the FormView.</span></span> <span data-ttu-id="a0a4b-216">Diğer bir deyişle, Kullanıcı FormView 'da bir sayfadan diğerine taşınırsa, `ItemCommand` olayı ateşlenir; Kullanıcı ekleme, güncelleştirme veya silmeyi destekleyen bir FormView 'da yeni, Düzenle veya Sil ' i tıklattığında aynı şey.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-216">That means that when the user moves from one page to another in the FormView, the `ItemCommand` event fires; same thing when the user clicks New, Edit, or Delete in a FormView that supports inserting, updating, or deleting.</span></span>

<span data-ttu-id="a0a4b-217">`ItemCommand` düğmenin tıklanmasından bağımsız olarak tetiklendiği için, olay işleyicisinde tüm ürünleri Durdur düğmesinin tıklandığını veya başka bir düğme olup olmadığını belirlemek için bir yol gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-217">Since the `ItemCommand` fires regardless of what button is clicked, in the event handler we need a way to determine if the Discontinue All Products Button was clicked or if it was some other button.</span></span> <span data-ttu-id="a0a4b-218">Bunu gerçekleştirmek için, düğme Web denetiminin `CommandName` özelliğini tanımlayıcı bir değere ayarlayabiliriz.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-218">To accomplish this, we can set the Button Web control's `CommandName` property to some identifying value.</span></span> <span data-ttu-id="a0a4b-219">Düğmeye tıklandığında, bu `CommandName` değeri `ItemCommand` olay işleyicisine geçirilir ve tüm ürünleri Durdur düğmesinin tıklanmadığını belirlememize olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-219">When the Button is clicked, this `CommandName` value is passed into the `ItemCommand` event handler, enabling us to determine whether the Discontinue All Products Button was the button clicked.</span></span> <span data-ttu-id="a0a4b-220">Tüm ürünleri Durdur düğmesinin `CommandName` özelliğini, ürünleri kaldır olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-220">Set the Discontinue All Products Button's `CommandName` property to DiscontinueProducts .</span></span>

<span data-ttu-id="a0a4b-221">Son olarak, kullanıcının gerçekten seçili tedarikçinin ürünlerini kesmek istediğinizden emin olmak için bir istemci tarafı onaylama iletişim kutusu kullanalım.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-221">Finally, let's use a client-side confirm dialog box to ensure that the user really wants to discontinue the selected supplier's products.</span></span> <span data-ttu-id="a0a4b-222">Öğreticiyi [silerken Istemci tarafı onaylama ekleme](../editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs.md) konusunda gördüğünüz gibi, bu, JavaScript bir bit ile gerçekleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-222">As we saw in the [Adding Client-Side Confirmation When Deleting](../editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs.md) tutorial, this can be accomplished with a bit of JavaScript.</span></span> <span data-ttu-id="a0a4b-223">Özellikle, düğme Web denetiminin OnClientClick özelliğini `return confirm('This will mark _all_ of this supplier\'s products as discontinued. Are you certain you want to do this?');` olarak ayarlayın</span><span class="sxs-lookup"><span data-stu-id="a0a4b-223">In particular, set the Button Web control's OnClientClick property to `return confirm('This will mark _all_ of this supplier\'s products as discontinued. Are you certain you want to do this?');`</span></span>

<span data-ttu-id="a0a4b-224">Bu değişiklikleri yaptıktan sonra FormView 'un bildirime dayalı sözdizimi aşağıdaki gibi görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="a0a4b-224">After making these changes, the FormView's declarative syntax should look like the following:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample6.aspx)]

<span data-ttu-id="a0a4b-225">Ardından, FormView 'un `ItemCommand` olayı için bir olay işleyicisi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-225">Next, create an event handler for the FormView's `ItemCommand` event.</span></span> <span data-ttu-id="a0a4b-226">Bu olay işleyicisinde, önce tüm ürünleri Durdur düğmesine tıklanmadığını belirlememiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-226">In this event handler we need to first determine whether the Discontinue All Products Button was clicked.</span></span> <span data-ttu-id="a0a4b-227">Bu durumda, `ProductsBLL` sınıfının bir örneğini oluşturmak ve `DiscontinueAllProductsForSupplier(supplierID)` metodunu, seçili FormView 'un `SupplierID` geçirerek çağırmak istiyoruz:</span><span class="sxs-lookup"><span data-stu-id="a0a4b-227">If so, we want to create an instance of the `ProductsBLL` class and invoke its `DiscontinueAllProductsForSupplier(supplierID)` method, passing in the `SupplierID` of the selected FormView:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample7.cs)]

<span data-ttu-id="a0a4b-228">FormView 'daki geçerli seçili tedarikçinin `SupplierID` FormView 'un [`SelectedValue` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.selectedvalue.aspx)kullanılarak erişilebilir olduğunu unutmayın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-228">Note that the `SupplierID` of the current selected supplier in the FormView can be accessed using the FormView's [`SelectedValue` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.selectedvalue.aspx).</span></span> <span data-ttu-id="a0a4b-229">`SelectedValue` özelliği, FormView 'da görüntülenmekte olan kaydın ilk veri anahtarı değerini döndürür.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-229">The `SelectedValue` property returns the first data key value for the record being displayed in the FormView.</span></span> <span data-ttu-id="a0a4b-230">FormView 'un, veri anahtarı değerlerinin alındığı veri alanlarını belirten [`DataKeyNames` özelliği](https://msdn.microsoft.com/system.web.ui.webcontrols.formview.datakeynames.aspx), ObjectDataSource 'un adım 2 ' deki FormView 'a geri bağlanması sırasında otomatik olarak Visual Studio tarafından `SupplierID` olarak ayarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-230">The FormView's [`DataKeyNames` property](https://msdn.microsoft.com/system.web.ui.webcontrols.formview.datakeynames.aspx), which indicates the data fields from which the data key values are pulled from, was automatically set to `SupplierID` by Visual Studio when binding the ObjectDataSource to the FormView back in Step 2.</span></span>

<span data-ttu-id="a0a4b-231">`ItemCommand` olay işleyicisi oluşturulduktan sonra, sayfayı sınamak için bir dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-231">With the `ItemCommand` event handler created, take a moment to test out the page.</span></span> <span data-ttu-id="a0a4b-232">Cogutıva ve Sorgtada ' Las Cabras ' tedarikçisine gidin (benim için FormView 'daki beşinci tedarikçi).</span><span class="sxs-lookup"><span data-stu-id="a0a4b-232">Browse to the Cooperativa de Quesos 'Las Cabras' supplier (it's the fifth supplier in the FormView for me).</span></span> <span data-ttu-id="a0a4b-233">Bu Tedarikçi, her ikisi de *artık Discontinued olan* Sorgo Cabrales ve Sorgo Manchego La Pastora olmak üzere iki ürün sunmaktadır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-233">This supplier provides two products, Queso Cabrales and Queso Manchego La Pastora, both of which are *not* discontinued.</span></span>

<span data-ttu-id="a0a4b-234">COOPERATIVA ve Sorgun ' Las Cabras ' öğesinin iş dışı olduğunu ve bu nedenle ürünlerinin sonlandırılmamakta olduğunu düşünün.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-234">Imagine that Cooperativa de Quesos 'Las Cabras' has gone out of business and therefore its products are to be discontinued.</span></span> <span data-ttu-id="a0a4b-235">Tüm ürünleri Durdur düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-235">Click the Discontinue All Products Button.</span></span> <span data-ttu-id="a0a4b-236">Bu, istemci tarafı onaylama iletişim kutusunu görüntüler (bkz. Şekil 16).</span><span class="sxs-lookup"><span data-stu-id="a0a4b-236">This will display the client-side confirm dialog box (see Figure 16).</span></span>

<span data-ttu-id="a0a4b-237">[![Cooperativa de Sorgtada Las Cabras Iki etkin ürün sağlar](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image43.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-237">[![Cooperativa de Quesos Las Cabras Supplies Two Active Products](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image43.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image42.png)</span></span>

<span data-ttu-id="a0a4b-238">**Şekil 16**: Cooperativa de Sorgtada Las Cabras Iki etkin ürün sağlar ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-238">**Figure 16**: Cooperativa de Quesos Las Cabras Supplies Two Active Products ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image44.png))</span></span>

<span data-ttu-id="a0a4b-239">İstemci tarafı onaylama iletişim kutusunda Tamam ' a tıklarsanız, form gönderimi devam eder ve bu da FormView 'un `ItemCommand` olayının tetikleneceği geri göndermeye neden olur.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-239">If you click OK in the client-side confirm dialog box, the form submission will proceed, causing a postback in which the FormView's `ItemCommand` event will fire.</span></span> <span data-ttu-id="a0a4b-240">Oluşturduğumuz olay işleyicisi yürütülecektir, `DiscontinueAllProductsForSupplier(supplierID)` yöntemini çağırır ve hem Sorgo Cabrales hem de Sorgo Manchego La Pastora ürünlerinin her ikisi de devam eder.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-240">The event handler we created will then execute, invoking the `DiscontinueAllProductsForSupplier(supplierID)` method and discontinuing both the Queso Cabrales and Queso Manchego La Pastora products.</span></span>

<span data-ttu-id="a0a4b-241">GridView 'un görünüm durumunu devre dışı bırakırsanız, GridView her geri göndermede temel alınan veri deposuna yeniden bağlanır ve bu nedenle hemen bu iki ürünün artık devre dışı bırakıldığını yansıtacak şekilde güncelleştirilir (bkz. Şekil 17).</span><span class="sxs-lookup"><span data-stu-id="a0a4b-241">If you have disabled the GridView's view state, the GridView is being rebound to the underlying data store on every postback, and therefore will immediately be updated to reflect that these two products are now discontinued (see Figure 17).</span></span> <span data-ttu-id="a0a4b-242">Ancak, GridView 'da görünüm durumunu devre dışı bırakıldıysanız, bu değişikliği yaptıktan sonra verileri GridView 'a el ile yeniden bağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-242">If, however, you have not disabled view state in the GridView, you will need to manually rebind the data to the GridView after making this change.</span></span> <span data-ttu-id="a0a4b-243">Bunu gerçekleştirmek için, `DiscontinueAllProductsForSupplier(supplierID)` yöntemini çağırdıktan hemen sonra GridView 'un `DataBind()` yöntemine bir çağrı yapmanız yeterlidir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-243">To accomplish this, simply make a call to the GridView's `DataBind()` method immediately after invoking the `DiscontinueAllProductsForSupplier(supplierID)` method.</span></span>

<span data-ttu-id="a0a4b-244">[Tüm ürünleri Durdur düğmesine tıkladıktan sonra, tedarikçinin s ürünleri buna göre güncelleştirilir ![](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image46.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-244">[![After Clicking the Discontinue All Products Button, the Supplier s Products are Updated Accordingly](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image46.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image45.png)</span></span>

<span data-ttu-id="a0a4b-245">**Şekil 17**: tüm ürünleri Durdur düğmesine tıkladıktan sonra tedarikçinin ürünleri buna uygun şekilde güncelleştirilir ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image47.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-245">**Figure 17**: After Clicking the Discontinue All Products Button, the Supplier's Products are Updated Accordingly ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image47.png))</span></span>

## <a name="step-6-creating-an-updateproduct-overload-in-the-business-logic-layer-for-adjusting-a-products-price"></a><span data-ttu-id="a0a4b-246">6\. Adım: bir ürünün fiyatını ayarlamak için Iş mantığı katmanında UpdateProduct Overload oluşturma</span><span class="sxs-lookup"><span data-stu-id="a0a4b-246">Step 6: Creating an UpdateProduct Overload in the Business Logic Layer for Adjusting a Product's Price</span></span>

<span data-ttu-id="a0a4b-247">FormView 'daki tüm ürünleri Durdur düğmesinin yanı sıra, GridView 'da bir ürünün fiyatını artırmak ve azaltmak için düğmeler eklemek üzere öncelikle uygun veri erişim katmanını ve Iş mantığı katman yöntemlerini eklememiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-247">Like with the Discontinue All Products Button in the FormView, in order to add buttons for increasing and decreasing the price for a product in the GridView we need to first add the appropriate Data Access Layer and Business Logic Layer methods.</span></span> <span data-ttu-id="a0a4b-248">DAL içinde tek bir ürün satırını güncelleştiren bir metoda zaten sahip olduğumuz için BLL 'deki `UpdateProduct` yöntemi için yeni bir aşırı yükleme oluşturarak bu işlevselliği sağlayabiliriz.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-248">Since we already have a method that updates a single product row in the DAL, we can provide such functionality by creating a new overload for the `UpdateProduct` method in the BLL.</span></span>

<span data-ttu-id="a0a4b-249">Son `UpdateProduct` aşırı yüklemeleri, ürün alanlarının bazı kombinasyonda skaler giriş değerleri olarak alınmıştır ve daha sonra yalnızca belirtilen ürüne ait bu alanları güncelleştirdi.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-249">Our past `UpdateProduct` overloads have taken in some combination of product fields as scalar input values and have then updated just those fields for the specified product.</span></span> <span data-ttu-id="a0a4b-250">Bu aşırı yüklemede, bu standarda göre biraz farklılık gösterir ve bunun yerine ürünün `ProductID` ve `UnitPrice` ayarlanacak yüzdeyi (yeni, ayarlanmış `UnitPrice` içine geçirmeye karşılık olarak) ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-250">For this overload we'll vary slightly from this standard and instead pass in the product's `ProductID` and the percentage by which to adjust the `UnitPrice` (as opposed to passing in the new, adjusted `UnitPrice` itself).</span></span> <span data-ttu-id="a0a4b-251">Bu yaklaşım, geçerli ürünün `UnitPrice`belirlemekten endişelenmenize gerek olmadığı için ASP.NET sayfa arka plan kodu sınıfına yazdığımız kodu basitleştirir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-251">This approach will simplify the code we need to write in the ASP.NET page code-behind class, since we don't have to bother with determining the current product's `UnitPrice`.</span></span>

<span data-ttu-id="a0a4b-252">Bu öğretici için `UpdateProduct` aşırı yüklemesi aşağıda gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="a0a4b-252">The `UpdateProduct` overload for this tutorial is shown below:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample8.cs)]

<span data-ttu-id="a0a4b-253">Bu aşırı yükleme, DAL `GetProductByProductID(productID)` yöntemi aracılığıyla belirtilen ürünle ilgili bilgileri alır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-253">This overload retrieves information about the specified product through the DAL's `GetProductByProductID(productID)` method.</span></span> <span data-ttu-id="a0a4b-254">Daha sonra ürünün `UnitPrice` bir veritabanı `NULL` değeri atanıp atanmadığını görmek için kontrol eder.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-254">It then checks to see whether the product's `UnitPrice` is assigned a database `NULL` value.</span></span> <span data-ttu-id="a0a4b-255">Bu değer ise, Fiyat değiştirilmemiş olarak kalır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-255">If it is, the price is left unaltered.</span></span> <span data-ttu-id="a0a4b-256">Ancak,`NULL` olmayan bir `UnitPrice` değeri varsa, yöntem ürünün `UnitPrice` belirtilen yüzdeye (`unitPriceAdjustmentPercent`) göre güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-256">If, however, there is a non-`NULL` `UnitPrice` value, the method updates the product's `UnitPrice` by the specified percent (`unitPriceAdjustmentPercent`).</span></span>

## <a name="step-7-adding-the-increase-and-decrease-buttons-to-the-gridview"></a><span data-ttu-id="a0a4b-257">7\. Adım: GridView 'a artış ve küçültme düğmelerini ekleme</span><span class="sxs-lookup"><span data-stu-id="a0a4b-257">Step 7: Adding the Increase and Decrease Buttons to the GridView</span></span>

<span data-ttu-id="a0a4b-258">GridView (ve DetailsView), her ikisi de bir alan koleksiyonundan oluşur.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-258">The GridView (and DetailsView) are both made up of a collection of fields.</span></span> <span data-ttu-id="a0a4b-259">BoundFields, CheckBoxFields ve TemplateFields 'e ek olarak, ASP.NET, adından da anlaşılacağı gibi, her satır için bir Button, LinkButton veya ImageButton içeren bir sütun olarak işleyen ButtonField 'ı içerir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-259">In addition to BoundFields, CheckBoxFields, and TemplateFields, ASP.NET includes the ButtonField, which, as its name implies, renders as a column with a Button, LinkButton, or ImageButton for each row.</span></span> <span data-ttu-id="a0a4b-260">FormView 'a benzer şekilde, GridView sayfalama düğmeleri içindeki *herhangi bir* düğmeye tıklamak, düğmeleri düzenleme veya silme, düğmeleri sıralama ve benzeri bir geri gönderme işlemine neden olur ve GridView 'un [`RowCommand` olayını](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)oluşturur.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-260">Similar to the FormView, clicking *any* button within the GridView paging buttons, Edit or Delete buttons, sorting buttons, and so on causes a postback and raises the GridView's [`RowCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rowcommand.aspx).</span></span>

<span data-ttu-id="a0a4b-261">ButtonField, her düğme `CommandName` için belirtilen değeri atayan bir `CommandName` özelliğine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-261">The ButtonField has a `CommandName` property that assigns the specified value to each of its Buttons `CommandName` properties.</span></span> <span data-ttu-id="a0a4b-262">FormView ile benzer şekilde, hangi düğmenin tıklandığını belirleyen `CommandName` değeri `RowCommand` olay işleyicisi tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-262">Like with the FormView, the `CommandName` value is used by the `RowCommand` event handler to determine which button was clicked.</span></span>

<span data-ttu-id="a0a4b-263">GridView 'a, biri düğme metin fiyatı + %10 ve diğeri fiyat-%10 olan iki yeni ButtonField ekleyelim.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-263">Let's add two new ButtonFields to the GridView, one with a button text Price +10% and the other with the text Price -10%.</span></span> <span data-ttu-id="a0a4b-264">Bu ButtonFields alanlarını eklemek için GridView 'un akıllı etiketindeki sütunları düzenle bağlantısına tıklayın, sol üstteki listeden ButtonField alan türünü seçin ve Ekle düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-264">To add these ButtonFields, click on the Edit Columns link from the GridView's smart tag, select the ButtonField field type from the list in the upper left and click the Add button.</span></span>

![GridView 'a Iki ButtonField ekleyin](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image48.png)

<span data-ttu-id="a0a4b-266">**Şekil 18**: GridView 'A Iki buttonalanı ekleme</span><span class="sxs-lookup"><span data-stu-id="a0a4b-266">**Figure 18**: Add Two ButtonFields to the GridView</span></span>

<span data-ttu-id="a0a4b-267">İki ButtonField öğesini ilk iki GridView alanı olarak görünecek şekilde taşıyın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-267">Move the two ButtonFields so that they appear as the first two GridView fields.</span></span> <span data-ttu-id="a0a4b-268">Ardından, bu iki ButtonFields `Text` özelliklerini Price + %10 ve Price-10 ' a ve `CommandName` özelliklerini sırasıyla ıncreaseprice ve DecreasePrice olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-268">Next, set the `Text` properties of these two ButtonFields to Price +10% and Price -10% and the `CommandName` properties to IncreasePrice and DecreasePrice, respectively.</span></span> <span data-ttu-id="a0a4b-269">Varsayılan olarak, bir ButtonField, düğme sütununu LinkButtons olarak işler.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-269">By default, a ButtonField renders its column of buttons as LinkButtons.</span></span> <span data-ttu-id="a0a4b-270">Ancak, ButtonField 'ın [`ButtonType` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx)aracılığıyla bu değiştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-270">This can be changed, however, through the ButtonField's [`ButtonType` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx).</span></span> <span data-ttu-id="a0a4b-271">Bu iki ButtonField 'ın düzenli basma düğmeleri olarak işlenmiş olmasına izin verlim; Bu nedenle, `ButtonType` özelliğini `Button`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-271">Let's have these two ButtonFields rendered as regular push buttons; therefore, set the `ButtonType` property to `Button`.</span></span> <span data-ttu-id="a0a4b-272">Şekil 19, bu değişiklikler yapıldıktan sonra alanlar iletişim kutusunu gösterir; Aşağıda, GridView 'un bildirime dayalı biçimlendirmesi verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-272">Figure 19 shows the Fields dialog box after these changes have been made; following that is the GridView's declarative markup.</span></span>

![ButtonFields metin, CommandName ve ButtonType özelliklerini yapılandırın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image49.png)

<span data-ttu-id="a0a4b-274">**Şekil 19**: buttonfields `Text`, `CommandName`ve `ButtonType` özelliklerini yapılandırma</span><span class="sxs-lookup"><span data-stu-id="a0a4b-274">**Figure 19**: Configure the ButtonFields `Text`, `CommandName`, and `ButtonType` Properties</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample9.aspx)]

<span data-ttu-id="a0a4b-275">Bu ButtonFields ile oluşturulan son adım, GridView 'un `RowCommand` olayı için bir olay işleyicisi oluşturmaktır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-275">With these ButtonFields created, the final step is to create an event handler for the GridView's `RowCommand` event.</span></span> <span data-ttu-id="a0a4b-276">Bu olay işleyicisi, Fiyat + %10 veya fiyat-10% düğmelerine tıklandığı için tetiklense, düğme tıklandığı satırın `ProductID` belirlenmesi ve sonra `ProductsBLL` sınıfının `UpdateProduct` yöntemini çağırarak `ProductID`birlikte uygun `UnitPrice` yüzde ayarlamasını geçirmeleri gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-276">This event handler, if fired because either the Price +10% or Price -10% buttons were clicked, needs to determine the `ProductID` for the row whose button was clicked and then invoke the `ProductsBLL` class's `UpdateProduct` method, passing in the appropriate `UnitPrice` percentage adjustment along with the `ProductID`.</span></span> <span data-ttu-id="a0a4b-277">Aşağıdaki kod bu görevleri gerçekleştirir:</span><span class="sxs-lookup"><span data-stu-id="a0a4b-277">The following code performs these tasks:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample10.cs)]

<span data-ttu-id="a0a4b-278">Fiyatı + %10 veya fiyat-10% düğmesine tıklanmış olan satırın `ProductID` belirleyebilmek için, GridView 'un `DataKeys` koleksiyonuna başvurmalısınız.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-278">In order to determine the `ProductID` for the row whose Price +10% or Price -10% button was clicked, we need to consult the GridView's `DataKeys` collection.</span></span> <span data-ttu-id="a0a4b-279">Bu koleksiyon, her GridView satırı için `DataKeyNames` özelliğinde belirtilen alanların değerlerini barındırır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-279">This collection holds the values of the fields specified in the `DataKeyNames` property for each GridView row.</span></span> <span data-ttu-id="a0a4b-280">GridView 'un `DataKeyNames` özelliği, ObjectDataSource 'u GridView 'a bağladığından Visual Studio tarafından ProductID olarak ayarlandığı için, `DataKeys(rowIndex).Value` belirtilen *RowIndex*için `ProductID` sağlar.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-280">Since the GridView's `DataKeyNames` property was set to ProductID by Visual Studio when binding the ObjectDataSource to the GridView, `DataKeys(rowIndex).Value` provides the `ProductID` for the specified *rowIndex*.</span></span>

<span data-ttu-id="a0a4b-281">ButtonField, düğme `e.CommandArgument` parametresi aracılığıyla tıklandığı olan satırın *RowIndex* öğesinde otomatik olarak geçer.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-281">The ButtonField automatically passes in the *rowIndex* of the row whose button was clicked through the `e.CommandArgument` parameter.</span></span> <span data-ttu-id="a0a4b-282">Bu nedenle, fiyatı + %10 veya fiyat-10% düğmesine tıklandığı satırın `ProductID` belirlenmesi için şunu kullanırız: `Convert.ToInt32(SuppliersProducts.DataKeys(Convert.ToInt32(e.CommandArgument)).Value)`.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-282">Therefore, to determine the `ProductID` for the row whose Price +10% or Price -10% button was clicked, we use: `Convert.ToInt32(SuppliersProducts.DataKeys(Convert.ToInt32(e.CommandArgument)).Value)`.</span></span>

<span data-ttu-id="a0a4b-283">Tüm ürünleri Durdur düğmesinin bulunduğu gibi, GridView 'un görünüm durumunu devre dışı bırakırsanız, GridView her geri göndermede temel alınan veri deposuna yeniden bağlanır ve bu nedenle, tıklanarak oluşan bir fiyat değişikliğini yansıtacak şekilde hemen güncelleştirilir. düğmelerden birini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-283">As with the Discontinue All Products button, if you have disabled the GridView's view state, the GridView is being rebound to the underlying data store on every postback, and therefore will immediately be updated to reflect a price change that occurs from clicking either of the buttons.</span></span> <span data-ttu-id="a0a4b-284">Ancak, GridView 'da görünüm durumunu devre dışı bırakıldıysanız, bu değişikliği yaptıktan sonra verileri GridView 'a el ile yeniden bağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-284">If, however, you have not disabled view state in the GridView, you will need to manually rebind the data to the GridView after making this change.</span></span> <span data-ttu-id="a0a4b-285">Bunu gerçekleştirmek için, `UpdateProduct` yöntemini çağırdıktan hemen sonra GridView 'un `DataBind()` yöntemine bir çağrı yapmanız yeterlidir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-285">To accomplish this, simply make a call to the GridView's `DataBind()` method immediately after invoking the `UpdateProduct` method.</span></span>

<span data-ttu-id="a0a4b-286">Şekil 20, Grandma Kelly 'in Homestead tarafından sunulan ürünleri görüntülerken sayfayı gösterir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-286">Figure 20 shows the page when viewing the products provided by Grandma Kelly's Homestead.</span></span> <span data-ttu-id="a0a4b-287">Şekil 21, Grandma 'nın boyuna yayıldığı ve Kuzey Woods Cranbraz Sauce için fiyat-10% düğmesi bir kez tıklandıktan sonra, Fiyat + %10 ' dan sonra sonuçları gösterir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-287">Figure 21 shows the results after the Price +10% button has been clicked twice for Grandma's Boysenberry Spread and the Price -10% button once for Northwoods Cranberry Sauce.</span></span>

<span data-ttu-id="a0a4b-288">[GridView ![Price + %10 ve Price-10% düğmelerini Içerir](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image51.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-288">[![The GridView Includes Price +10% and Price -10% Buttons](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image51.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image50.png)</span></span>

<span data-ttu-id="a0a4b-289">**Şekil 20**: GridView, Price + %10 ve Price-10% düğmelerini içerir ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image52.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-289">**Figure 20**: The GridView Includes Price +10% and Price -10% Buttons ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image52.png))</span></span>

<span data-ttu-id="a0a4b-290">[![birinci ve üçüncü ürün için fiyatlar, Fiyat + %10 ve fiyat-10% düğmeleri aracılığıyla güncelleştirilmiştir](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image54.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image53.png)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-290">[![The Prices for the First and Third Product Have Been Updated via the Price +10% and Price -10% Buttons](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image54.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image53.png)</span></span>

<span data-ttu-id="a0a4b-291">**Şekil 21**: birinci ve üçüncü ürünün fiyatları, Fiyat + %10 ve fiyat-10% düğmeleriyle güncelleştirilmiştir ([tam boyutlu görüntüyü görüntülemek için tıklayın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image55.png))</span><span class="sxs-lookup"><span data-stu-id="a0a4b-291">**Figure 21**: The Prices for the First and Third Product Have Been Updated via the Price +10% and Price -10% Buttons ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image55.png))</span></span>

> [!NOTE]
> <span data-ttu-id="a0a4b-292">GridView (ve DetailsView), TemplateFields öğesine eklenen düğmeler, LinkButtons veya ımagebuttons da içerebilir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-292">The GridView (and DetailsView) can also have Buttons, LinkButtons, or ImageButtons added to their TemplateFields.</span></span> <span data-ttu-id="a0a4b-293">BoundField 'da olduğu gibi, tıklandığı sırada bu düğmeler, GridView 'un `RowCommand` olayını oluşturacak şekilde bir geri gönderim kullanacaktır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-293">As with the BoundField, these Buttons, when clicked, will induce a postback, raising the GridView's `RowCommand` event.</span></span> <span data-ttu-id="a0a4b-294">Ancak, bir TemplateField öğesine düğme eklenirken düğme `CommandArgument`, ButtonFields kullanılırken olduğu gibi otomatik olarak satır dizinine ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-294">When adding buttons in a TemplateField, however, the Button's `CommandArgument` is not automatically set to the index of the row as it is when using ButtonFields.</span></span> <span data-ttu-id="a0a4b-295">`RowCommand` olay işleyicisi içinde tıklanan düğmenin satır dizinini belirlemeniz gerekiyorsa, aşağıdaki kodu kullanarak düğmenin `CommandArgument` özelliğini TemplateField içindeki bildirime dayalı sözdiziminde el ile ayarlamanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="a0a4b-295">If you need to determine the row index of the button that was clicked within the `RowCommand` event handler, you'll need to manually set the Button's `CommandArgument` property in its declarative syntax within the TemplateField, using code like:</span></span>  
> <span data-ttu-id="a0a4b-296">`<asp:Button runat="server" ... CommandArgument='<%# ((GridViewRow) Container).RowIndex %>'`.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-296">`<asp:Button runat="server" ... CommandArgument='<%# ((GridViewRow) Container).RowIndex %>'`.</span></span>

## <a name="summary"></a><span data-ttu-id="a0a4b-297">Özet</span><span class="sxs-lookup"><span data-stu-id="a0a4b-297">Summary</span></span>

<span data-ttu-id="a0a4b-298">GridView, DetailsView ve FormView denetimleri hepsi, düğme, LinkButtons veya ımagebuttons içerebilir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-298">The GridView, DetailsView, and FormView controls all can include Buttons, LinkButtons, or ImageButtons.</span></span> <span data-ttu-id="a0a4b-299">Bu tür düğmeler tıklandığında, geri göndermeye neden olur ve FormView ve DetailsView denetimlerinde `ItemCommand` olayı ve GridView 'daki `RowCommand` olayını yükseltir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-299">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event in the FormView and DetailsView controls and the `RowCommand` event in the GridView.</span></span> <span data-ttu-id="a0a4b-300">Bu veri Web denetimlerinde, kayıtları silme veya düzenlemeyle ilgili yaygın komutla ilgili eylemleri işlemek için yerleşik işlevlere sahiptir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-300">These data Web controls have built-in functionality to handle common command-related actions, such as deleting or editing records.</span></span> <span data-ttu-id="a0a4b-301">Ancak, tıklandığı zaman kendi özel kodumuzu yürütme ile yanıt veren düğmeleri de kullanabiliriz.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-301">However, we can also use buttons that, when clicked, respond with executing our own custom code.</span></span>

<span data-ttu-id="a0a4b-302">Bunu gerçekleştirmek için `ItemCommand` veya `RowCommand` olayı için bir olay işleyicisi oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-302">To accomplish this, we need to create an event handler for the `ItemCommand` or `RowCommand` event.</span></span> <span data-ttu-id="a0a4b-303">Bu olay işleyicisinde, hangi düğmenin tıklandığını belirleyip ardından uygun özel eylemi ele almak için ilk olarak gelen `CommandName` değerini denetliyoruz.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-303">In this event handler we first check the incoming `CommandName` value to determine which button was clicked and then take appropriate custom action.</span></span> <span data-ttu-id="a0a4b-304">Bu öğreticide, belirli bir tedarikçiye yönelik tüm ürünleri sona erdirmek veya belirli bir ürünün fiyatını %10 oranında artırmak veya azaltmak için düğmeler ve Buttonalanlarını nasıl kullanacağınızı gördünüz.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-304">In this tutorial we saw how to use buttons and ButtonFields to discontinue all products for a specified supplier or to increase or decrease the price of a particular product by 10%.</span></span>

<span data-ttu-id="a0a4b-305">Programlamanın kutlu olsun!</span><span class="sxs-lookup"><span data-stu-id="a0a4b-305">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="a0a4b-306">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="a0a4b-306">About the Author</span></span>

<span data-ttu-id="a0a4b-307">4GuysFromRolla.com 'in, [Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), yedi ASP/ASP. net books ve [](http://www.4guysfromrolla.com)'in yazarı, 1998 sürümünden bu yana Microsoft Web teknolojileriyle çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a0a4b-308">Scott bağımsız danışman, Trainer ve yazıcı olarak çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-308">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a0a4b-309">En son kitabı, [*24 saat içinde ASP.NET 2,0 kendi kendinize eğitim*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)ister.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-309">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a0a4b-310">mitchell@4GuysFromRolla.comadresinden erişilebilir [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a0a4b-310">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="a0a4b-311">ya da blog aracılığıyla [http://ScottOnWriting.NET](http://ScottOnWriting.NET)bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0a4b-311">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="a0a4b-312">Next</span><span class="sxs-lookup"><span data-stu-id="a0a4b-312">Next</span></span>](adding-and-responding-to-buttons-to-a-gridview-vb.md)
