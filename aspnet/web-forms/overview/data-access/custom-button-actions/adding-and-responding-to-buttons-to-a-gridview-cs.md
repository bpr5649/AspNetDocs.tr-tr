---
uid: web-forms/overview/data-access/custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs
title: Ekleme ve bunları yanıtlama (C#) GridView'a düğme | Microsoft Docs
author: rick-anderson
description: Bu öğreticide bir şablona ve alanları GridView veya DetailsView denetimi için özel düğmeler, ekleme şu konuları inceleyeceğiz. Özellikle, satırını gerekir...
ms.author: riande
ms.date: 09/13/2006
ms.assetid: 128fdb5f-4c5e-42b5-b485-f3aee90a8e38
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs
msc.type: authoredcontent
ms.openlocfilehash: fd646dede766dd91156f8cd2763dd1989f090f1f
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 05/06/2019
ms.locfileid: "65131747"
---
# <a name="adding-and-responding-to-buttons-to-a-gridview-c"></a><span data-ttu-id="7c758-104">GridView’a Düğme Ekleme ve Bunları Yanıtlama (C#)</span><span class="sxs-lookup"><span data-stu-id="7c758-104">Adding and Responding to Buttons to a GridView (C#)</span></span>

<span data-ttu-id="7c758-105">tarafından [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="7c758-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="7c758-106">[Örnek uygulamayı indirin](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_28_CS.exe) veya [PDF olarak indirin](adding-and-responding-to-buttons-to-a-gridview-cs/_static/datatutorial28cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="7c758-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_28_CS.exe) or [Download PDF](adding-and-responding-to-buttons-to-a-gridview-cs/_static/datatutorial28cs1.pdf)</span></span>

> <span data-ttu-id="7c758-107">Bu öğreticide bir şablona ve alanları GridView veya DetailsView denetimi için özel düğmeler, ekleme şu konuları inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="7c758-107">In this tutorial we'll look at how to add custom buttons, both to a template and to the fields of a GridView or DetailsView control.</span></span> <span data-ttu-id="7c758-108">Özellikle, tedarikçileri sayfasında kullanıcıya izin veren bir FormView'da arabirimdeki oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="7c758-108">In particular, we'll build an interface that has a FormView that allows the user to page through the suppliers.</span></span>

## <a name="introduction"></a><span data-ttu-id="7c758-109">Giriş</span><span class="sxs-lookup"><span data-stu-id="7c758-109">Introduction</span></span>

<span data-ttu-id="7c758-110">Rapor verilerine salt okunur erişim raporlama birçok senaryo içerir, ancak raporları görüntülenen verileri temel alan eylemleri gerçekleştirme olanağı dahil etmek için sık karşılaşılan bir durum değil.</span><span class="sxs-lookup"><span data-stu-id="7c758-110">While many reporting scenarios involve read-only access to the report data, it's not uncommon for reports to include the ability to perform actions based upon the data displayed.</span></span> <span data-ttu-id="7c758-111">Genellikle Bu raporda görüntülenen her bir kayıt ile düğme, LinkButton veya ImageButton Web denetim ekleme dahil, tıklandığında geri göndermeye neden olur ve bazı sunucu tarafı kodu çağırır.</span><span class="sxs-lookup"><span data-stu-id="7c758-111">Typically this involved adding a Button, LinkButton, or ImageButton Web control with each record displayed in the report that, when clicked, causes a postback and invokes some server-side code.</span></span> <span data-ttu-id="7c758-112">Kayıt kayıt temelinde verileri düzenleme ve silmeye en yaygın örnektir.</span><span class="sxs-lookup"><span data-stu-id="7c758-112">Editing and deleting the data on a record-by-record basis is the most common example.</span></span> <span data-ttu-id="7c758-113">Aslında, başlayarak gördüğümüz gibi [genel bakış, ekleme, güncelleştirme ve silme veri](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) FormView GridView ve DetailsView denetimlerini olmadan bu işlevselliğin destekleyebilir kadar sık Öğreticisi, düzenleme ve silme tek satırlık bir kod yazmak için gerekir.</span><span class="sxs-lookup"><span data-stu-id="7c758-113">In fact, as we saw starting with the [Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, editing and deleting is so common that the GridView, DetailsView, and FormView controls can support such functionality without the need for writing a single line of code.</span></span>

<span data-ttu-id="7c758-114">Buna ek olarak düzenlemek ve düğmeler, GridView, DetailsView ve FormView silmek için denetimleri de düğmeler, LinkButtons veya ImageButtons içerebilir, tıklandığında, özel sunucu tarafı mantık gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="7c758-114">In addition to Edit and Delete buttons, the GridView, DetailsView, and FormView controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="7c758-115">Bu öğreticide bir şablona ve alanları GridView veya DetailsView denetimi için özel düğmeler, ekleme şu konuları inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="7c758-115">In this tutorial we'll look at how to add custom buttons, both to a template and to the fields of a GridView or DetailsView control.</span></span> <span data-ttu-id="7c758-116">Özellikle, tedarikçileri sayfasında kullanıcıya izin veren bir FormView'da arabirimdeki oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="7c758-116">In particular, we'll build an interface that has a FormView that allows the user to page through the suppliers.</span></span> <span data-ttu-id="7c758-117">İçin belirli bir tedarikçi, FormView tedarikçi seçeneğine tıkladıysanız, tüm bunların ilişkili ürünleri kullanımdan olarak işaretler, bir düğme Web denetimi hakkında bilgi gösterir.</span><span class="sxs-lookup"><span data-stu-id="7c758-117">For a given supplier, the FormView will show information about the supplier along with a Button Web control that, if clicked, will mark all of their associated products as discontinued.</span></span> <span data-ttu-id="7c758-118">Ayrıca, GridView artırmak fiyat ve indirimli fiyat, seçeneğine tıkladıysanız, yükseltmek veya ürün azaltmak düğmeler içeren her satır seçili sağlayıcı tarafından sağlanan bu ürünlerin listeler `UnitPrice` 10 oranında (bkz. Şekil 1).</span><span class="sxs-lookup"><span data-stu-id="7c758-118">Additionally, a GridView lists those products provided by the selected supplier, with each row containing Increase Price and Discount Price Buttons that, if clicked, raise or reduce the product's `UnitPrice` by 10% (see Figure 1).</span></span>

<span data-ttu-id="7c758-119">[![FormView ve GridView özel eylemleri gerçekleştiren düğmeleri içerir](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image2.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-119">[![Both the FormView and GridView Contain Buttons That Perform Custom Actions](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image2.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image1.png)</span></span>

<span data-ttu-id="7c758-120">**Şekil 1**: FormView ve GridView içeren düğmeler, özel eylemleri ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-120">**Figure 1**: Both the FormView and GridView Contain Buttons That Perform Custom Actions ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image3.png))</span></span>

## <a name="step-1-adding-the-button-tutorial-web-pages"></a><span data-ttu-id="7c758-121">1. Adım: Düğme Eğitmen Web sayfaları ekleme</span><span class="sxs-lookup"><span data-stu-id="7c758-121">Step 1: Adding the Button Tutorial Web Pages</span></span>

<span data-ttu-id="7c758-122">Özel bir düğme eklemek nasıl tümleştirildiği incelenmektedir önce öncelikle Bu öğretici için yapmamız gereken Web sitesi Projemizin ASP.NET sayfaları oluşturmak için bir zaman ayırabiliriz.</span><span class="sxs-lookup"><span data-stu-id="7c758-122">Before we look at how to add a custom buttons, let's first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="7c758-123">Başlangıç adlı yeni bir klasör ekleyerek `CustomButtons`.</span><span class="sxs-lookup"><span data-stu-id="7c758-123">Start by adding a new folder named `CustomButtons`.</span></span> <span data-ttu-id="7c758-124">Ardından, o klasördeki her bir sayfayla ilişkilendirilecek emin olmak için aşağıdaki iki ASP.NET sayfaları ekleyin `Site.master` ana sayfa:</span><span class="sxs-lookup"><span data-stu-id="7c758-124">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`

![Özel düğmeler ilgili öğreticiler için ASP.NET sayfaları ekleme](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image4.png)

<span data-ttu-id="7c758-126">**Şekil 2**: Özel düğmeler ilgili öğreticiler için ASP.NET sayfaları ekleme</span><span class="sxs-lookup"><span data-stu-id="7c758-126">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>

<span data-ttu-id="7c758-127">Diğer klasörler gibi `Default.aspx` içinde `CustomButtons` klasörü kendi bölümünde öğreticileri listeler.</span><span class="sxs-lookup"><span data-stu-id="7c758-127">Like in the other folders, `Default.aspx` in the `CustomButtons` folder will list the tutorials in its section.</span></span> <span data-ttu-id="7c758-128">Bu geri çağırma `SectionLevelTutorialListing.ascx` kullanıcı denetimi bu işlevselliği sağlar.</span><span class="sxs-lookup"><span data-stu-id="7c758-128">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="7c758-129">Bu nedenle, bu kullanıcı denetimine ekleme `Default.aspx` sayfanın Tasarım görünümü Çözüm Gezgini'nden sürükleyerek.</span><span class="sxs-lookup"><span data-stu-id="7c758-129">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page's Design view.</span></span>

<span data-ttu-id="7c758-130">[![İçin Default.aspx SectionLevelTutorialListing.ascx kullanıcı denetimi Ekle](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image6.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-130">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image6.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image5.png)</span></span>

<span data-ttu-id="7c758-131">**Şekil 3**: Ekleme `SectionLevelTutorialListing.ascx` kullanıcı denetimine `Default.aspx` ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-131">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image7.png))</span></span>

<span data-ttu-id="7c758-132">Son olarak, girişleri olarak istediğiniz sayfaları eklemek `Web.sitemap` dosya.</span><span class="sxs-lookup"><span data-stu-id="7c758-132">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="7c758-133">Özellikle, aşağıdaki biçimlendirme sayfalama ve sıralama sonra eklemeniz `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="7c758-133">Specifically, add the following markup after the Paging and Sorting `<siteMapNode>`:</span></span>

[!code-xml[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample1.xml)]

<span data-ttu-id="7c758-134">Güncelleştirdikten sonra `Web.sitemap`, bir tarayıcı aracılığıyla öğreticiler Web sitesini görüntülemek için bir dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="7c758-134">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="7c758-135">Sol taraftaki menüden, artık düzenleme, ekleme ve silme öğreticiler için öğeleri içerir.</span><span class="sxs-lookup"><span data-stu-id="7c758-135">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>

![Site Haritası, giriş artık özel düğmeler öğretici içerir.](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image8.png)

<span data-ttu-id="7c758-137">**Şekil 4**: Site Haritası, giriş artık özel düğmeler öğretici içerir.</span><span class="sxs-lookup"><span data-stu-id="7c758-137">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>

## <a name="step-2-adding-a-formview-that-lists-the-suppliers"></a><span data-ttu-id="7c758-138">2. Adım: Tedarikçileri listeleyen bir FormView'da ekleme</span><span class="sxs-lookup"><span data-stu-id="7c758-138">Step 2: Adding a FormView that Lists the Suppliers</span></span>

<span data-ttu-id="7c758-139">Bu öğreticiyle tedarikçileri listeler FormView ekleyerek başlayalım.</span><span class="sxs-lookup"><span data-stu-id="7c758-139">Let's get started with this tutorial by adding the FormView that lists the suppliers.</span></span> <span data-ttu-id="7c758-140">Giriş açıklandığı gibi bu FormView sayfası aracılığıyla gösteren GridView tedarikçi sağladığı ürünler Tedarikçiler, kullanıcıya izin verir.</span><span class="sxs-lookup"><span data-stu-id="7c758-140">As discussed in the Introduction, this FormView will allow the user to page through the suppliers, showing the products provided by the supplier in a GridView.</span></span> <span data-ttu-id="7c758-141">Ayrıca, bu FormView bir düğme içerir, tıklandığında, tüm tedarikçi ürünleri kullanımdan olarak işaretler.</span><span class="sxs-lookup"><span data-stu-id="7c758-141">Additionally, this FormView will include a Button that, when clicked, will mark all of the supplier's products as discontinued.</span></span> <span data-ttu-id="7c758-142">Biz kendimize FormView için özel bir düğme ekleme ile ilgili önce böylece üretici bilgilerini görüntüler ilk yalnızca FormView oluşturalım.</span><span class="sxs-lookup"><span data-stu-id="7c758-142">Before we concern ourselves with adding the custom button to the FormView, let's first just create the FormView so that it displays the supplier information.</span></span>

<span data-ttu-id="7c758-143">Başlangıç açarak `CustomButtons.aspx` sayfasını `CustomButtons` klasör.</span><span class="sxs-lookup"><span data-stu-id="7c758-143">Start by opening the `CustomButtons.aspx` page in the `CustomButtons` folder.</span></span> <span data-ttu-id="7c758-144">Bir FormView'da kümesi ve Tasarımcısı araç kutusundan sürükleyerek sayfaya ekleyin, `ID` özelliğini `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="7c758-144">Add a FormView to the page by dragging it from the Toolbox onto the Designer and set its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="7c758-145">FormView akıllı etiketten adlı yeni bir ObjectDataSource oluşturmak için iyileştirilmiş `SuppliersDataSource`.</span><span class="sxs-lookup"><span data-stu-id="7c758-145">From the FormView's smart tag, opt to create a new ObjectDataSource named `SuppliersDataSource`.</span></span>

<span data-ttu-id="7c758-146">[![SuppliersDataSource adlı yeni bir ObjectDataSource oluşturma](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image10.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-146">[![Create a New ObjectDataSource Named SuppliersDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image10.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image9.png)</span></span>

<span data-ttu-id="7c758-147">**Şekil 5**: Adlı yeni bir ObjectDataSource oluşturma `SuppliersDataSource` ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-147">**Figure 5**: Create a New ObjectDataSource Named `SuppliersDataSource` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image11.png))</span></span>

<span data-ttu-id="7c758-148">Bu yeni ObjectDataSource gelen sorgular gibi yapılandırma `SuppliersBLL` sınıfın `GetSuppliers()` metodu (bkz. Şekil 6).</span><span class="sxs-lookup"><span data-stu-id="7c758-148">Configure this new ObjectDataSource such that it queries from the `SuppliersBLL` class's `GetSuppliers()` method (see Figure 6).</span></span> <span data-ttu-id="7c758-149">Bu FormView (hiçbiri) güncelleştirme sekmeyi aşağı açılan listeden seçeneğini tedarikçi bilgi, select güncelleştirmek için bir arabirimi sağlamadığından.</span><span class="sxs-lookup"><span data-stu-id="7c758-149">Since this FormView does not provide an interface for updating the supplier information, select the (None) option from the drop-down list in the UPDATE tab.</span></span>

<span data-ttu-id="7c758-150">[![S GetSuppliers() yöntemi SuppliersBLL sınıfını kullanmak için bu veri kaynağını yapılandırma](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image13.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-150">[![Configure the Data Source to use the SuppliersBLL Class s GetSuppliers() Method](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image13.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image12.png)</span></span>

<span data-ttu-id="7c758-151">**Şekil 6**: Kullanılacak veri kaynağını yapılandırma `SuppliersBLL` sınıfın `GetSuppliers()` yöntemi ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-151">**Figure 6**: Configure the Data Source to use the `SuppliersBLL` Class's `GetSuppliers()` Method ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image14.png))</span></span>

<span data-ttu-id="7c758-152">ObjectDataSource yapılandırdıktan sonra Visual Studio oluşturacak bir `InsertItemTemplate`, `EditItemTemplate`, ve `ItemTemplate` FormView için.</span><span class="sxs-lookup"><span data-stu-id="7c758-152">After configuring the ObjectDataSource, Visual Studio will generate an `InsertItemTemplate`, `EditItemTemplate`, and `ItemTemplate` for the FormView.</span></span> <span data-ttu-id="7c758-153">Kaldırma `InsertItemTemplate` ve `EditItemTemplate` ve değiştirme `ItemTemplate` yalnızca tedarikçi şirket adını ve telefon numarasını görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7c758-153">Remove the `InsertItemTemplate` and `EditItemTemplate` and modify the `ItemTemplate` so that it displays just the supplier's company name and phone number.</span></span> <span data-ttu-id="7c758-154">Son olarak, disk belleği desteği FormView akıllı etiketinde sayfalama etkinleştir onay kutusunu işaretleyerek etkinleştirmek (veya ayarlayarak onun `AllowPaging` özelliğini `True`).</span><span class="sxs-lookup"><span data-stu-id="7c758-154">Finally, turn on paging support for the FormView by checking the Enable Paging checkbox from its smart tag (or by setting its `AllowPaging` property to `True`).</span></span> <span data-ttu-id="7c758-155">Bu değişikliklerden sonra bildirim temelli işaretleme, sayfanın aşağıdakine benzer görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="7c758-155">After these changes your page's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample2.aspx)]

<span data-ttu-id="7c758-156">Şekil 7 bir tarayıcıdan görüntülendiğinde CustomButtons.aspx sayfada gösterilir.</span><span class="sxs-lookup"><span data-stu-id="7c758-156">Figure 7 shows the CustomButtons.aspx page when viewed through a browser.</span></span>

<span data-ttu-id="7c758-157">[![FormView CompanyName ve şu anda seçili tedarikçiden telefon alanlarını listeler.](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image16.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-157">[![The FormView Lists the CompanyName and Phone Fields from the Currently Selected Supplier](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image16.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image15.png)</span></span>

<span data-ttu-id="7c758-158">**Şekil 7**: FormView listeler `CompanyName` ve `Phone` şu anda seçili sağlayıcı alanlardan ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-158">**Figure 7**: The FormView Lists the `CompanyName` and `Phone` Fields from the Currently Selected Supplier ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image17.png))</span></span>

## <a name="step-3-adding-a-gridview-that-lists-the-selected-suppliers-products"></a><span data-ttu-id="7c758-159">3. Adım: Seçili tedarikçi ürünleri listeleyen GridView ekleme</span><span class="sxs-lookup"><span data-stu-id="7c758-159">Step 3: Adding a GridView that Lists the Selected Supplier's Products</span></span>

<span data-ttu-id="7c758-160">Tüm ürünler Durdur düğmesini FormView şablona ekleyebilmek ilk seçilen sağlayıcısı tarafından sağlanan olduğu ürünleri listeler FormView altındaki GridView ekleyelim.</span><span class="sxs-lookup"><span data-stu-id="7c758-160">Before we add the Discontinue All Products Button to the FormView's template, let's first add a GridView beneath the FormView that lists the products provided by the selected supplier.</span></span> <span data-ttu-id="7c758-161">Bunu başarmak eklemek için GridView sayfasına ayarlayın, `ID` özelliğini `SuppliersProducts`, adlı yeni bir ObjectDataSource ekleyin `SuppliersProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="7c758-161">To accomplish this, add a GridView to the page, set its `ID` property to `SuppliersProducts`, and add a new ObjectDataSource named `SuppliersProductsDataSource`.</span></span>

<span data-ttu-id="7c758-162">[![SuppliersProductsDataSource adlı yeni bir ObjectDataSource oluşturma](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image19.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-162">[![Create a New ObjectDataSource Named SuppliersProductsDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image19.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image18.png)</span></span>

<span data-ttu-id="7c758-163">**Şekil 8**: Adlı yeni bir ObjectDataSource oluşturma `SuppliersProductsDataSource` ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-163">**Figure 8**: Create a New ObjectDataSource Named `SuppliersProductsDataSource` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image20.png))</span></span>

<span data-ttu-id="7c758-164">Bu ObjectDataSource ProductsBLL sınıfın kullanmak için yapılandırma `GetProductsBySupplierID(supplierID)` metodu (bkz. Şekil 9).</span><span class="sxs-lookup"><span data-stu-id="7c758-164">Configure this ObjectDataSource to use the ProductsBLL class's `GetProductsBySupplierID(supplierID)` method (see Figure 9).</span></span> <span data-ttu-id="7c758-165">Bu GridView ürünün fiyatını ayarlanacak izin verir ancak düzenleme veya GridView ' özellikleri silme yerleşik kullanarak olmaz.</span><span class="sxs-lookup"><span data-stu-id="7c758-165">While this GridView will allow for a product's price to be adjusted, it won't be using the built-in editing or deleting features from the GridView.</span></span> <span data-ttu-id="7c758-166">Bu nedenle, biz ObjectDataSource kullanıcının INSERT, UPDATE ve sekmeleri silmek için aşağı açılan listesine (hiçbiri) ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7c758-166">Therefore, we can set the drop-down list to (None) for the ObjectDataSource's UPDATE, INSERT, and DELETE tabs.</span></span>

<span data-ttu-id="7c758-167">[![S GetProductsBySupplierID(supplierID) yöntemi ProductsBLL sınıfını kullanmak için bu veri kaynağını yapılandırma](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image22.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-167">[![Configure the Data Source to use the ProductsBLL Class s GetProductsBySupplierID(supplierID) Method](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image22.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image21.png)</span></span>

<span data-ttu-id="7c758-168">**Şekil 9**: Kullanılacak veri kaynağını yapılandırma `ProductsBLL` sınıfın `GetProductsBySupplierID(supplierID)` yöntemi ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-168">**Figure 9**: Configure the Data Source to use the `ProductsBLL` Class's `GetProductsBySupplierID(supplierID)` Method ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image23.png))</span></span>

<span data-ttu-id="7c758-169">Bu yana `GetProductsBySupplierID(supplierID)` yöntemi kabul giriş parametresi, bize Bu parametre değerinin kaynağı ObjectDataSource Sihirbazı'nı ister.</span><span class="sxs-lookup"><span data-stu-id="7c758-169">Since the `GetProductsBySupplierID(supplierID)` method accepts an input parameter, the ObjectDataSource wizard prompts us for the source of this parameter value.</span></span> <span data-ttu-id="7c758-170">İçinde geçirilecek `SupplierID` değer FormView seçin için parametre kaynak aşağı açılan liste denetimi ve ControlId aşağı açılan listeye ayarlayın `Suppliers` (FormView kimliği 2. adımda oluşturmuştunuz).</span><span class="sxs-lookup"><span data-stu-id="7c758-170">To pass in the `SupplierID` value from the FormView, set the Parameter source drop-down list to Control and the ControlID drop-down list to `Suppliers` (the ID of the FormView created in Step 2).</span></span>

<span data-ttu-id="7c758-171">[![SatýrýnSupplierID tedarikçileri FormView denetiminden parametresi gelmesi gerektiğini belirtmek](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image25.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-171">[![Indicate that the supplierID Parameter Should Come from the Suppliers FormView Control](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image25.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image24.png)</span></span>

<span data-ttu-id="7c758-172">**Şekil 10**: Belirtmek *`supplierID`* gereken parametre gelen `Suppliers` FormView denetimi ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-172">**Figure 10**: Indicate that the *`supplierID`* Parameter Should Come from the `Suppliers` FormView Control ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image26.png))</span></span>

<span data-ttu-id="7c758-173">ObjectDataSource sihirbazını tamamladıktan sonra GridView BoundField veya CheckBoxField her ürünün veri alanlarını içerir.</span><span class="sxs-lookup"><span data-stu-id="7c758-173">After completing the ObjectDataSource wizard, the GridView will contain a BoundField or CheckBoxField for each of the product's data fields.</span></span> <span data-ttu-id="7c758-174">Şimdi bu aşağı göstermek için kesim yalnızca `ProductName` ve `UnitPrice` BoundFields ile birlikte `Discontinued` CheckBoxField; Ayrıca, şimdi biçimlendirme `UnitPrice` BoundField sağlayacak şekilde metni bir para birimi olarak biçimlendirilir.</span><span class="sxs-lookup"><span data-stu-id="7c758-174">Let's trim this down to show just the `ProductName` and `UnitPrice` BoundFields along with the `Discontinued` CheckBoxField; furthermore, let's format the `UnitPrice` BoundField such that its text is formatted as a currency.</span></span> <span data-ttu-id="7c758-175">GridView ve `SuppliersProductsDataSource` ObjectDataSource bildirim temelli biçimlendirme, aşağıdaki işaretlemede benzer görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="7c758-175">Your GridView and `SuppliersProductsDataSource` ObjectDataSource's declarative markup should look similar to the following markup:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample3.aspx)]

<span data-ttu-id="7c758-176">Bu noktada öğreticimize FormView üst öğesinden bir sağlayıcı seçin ve altındaki GridView aracılığıyla üretici tarafından sağlanan ürünleri görüntülemek için kullanıcının bir ana/ayrıntılar raporu görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7c758-176">At this point our tutorial displays a master/details report, allowing the user to pick a supplier from the FormView at the top and to view the products provided by that supplier through the GridView at the bottom.</span></span> <span data-ttu-id="7c758-177">Şekil 11 Tokyo Traders tedarikçi FormView seçerken bu sayfanın ekran görüntüsü gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="7c758-177">Figure 11 shows a screen shot of this page when selecting the Tokyo Traders supplier from the FormView.</span></span>

<span data-ttu-id="7c758-178">[![Seçili sağlayıcı s ürünleri GridView içinde görüntülenir.](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image28.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-178">[![The Selected Supplier s Products are Displayed in the GridView](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image28.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image27.png)</span></span>

<span data-ttu-id="7c758-179">**Şekil 11**: Seçili tedarikçi ürünleri GridView görüntülenir ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image29.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-179">**Figure 11**: The Selected Supplier's Products are Displayed in the GridView ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image29.png))</span></span>

## <a name="step-4-creating-dal-and-bll-methods-to-discontinue-all-products-for-a-supplier"></a><span data-ttu-id="7c758-180">4. Adım: Tüm ürünler için bir sağlayıcı kesmek için DAL ve BLL yöntemler oluşturma</span><span class="sxs-lookup"><span data-stu-id="7c758-180">Step 4: Creating DAL and BLL Methods to Discontinue All Products for a Supplier</span></span>

<span data-ttu-id="7c758-181">Bir düğme için FormView eklemeden önce tıklandığında, tüm sona erdirir tedarikçi ürünlerin, ilk DAL ve bu eylem gerçekleştiren BLL için bir yöntem eklemek ihtiyacımız.</span><span class="sxs-lookup"><span data-stu-id="7c758-181">Before we can add a Button to the FormView that, when clicked, discontinues all of the supplier's products, we first need to add a method to both the DAL and BLL that performs this action.</span></span> <span data-ttu-id="7c758-182">Özellikle, bu yöntem adlandırılacağını `DiscontinueAllProductsForSupplier(supplierID)`.</span><span class="sxs-lookup"><span data-stu-id="7c758-182">In particular, this method will be named `DiscontinueAllProductsForSupplier(supplierID)`.</span></span> <span data-ttu-id="7c758-183">FormView düğmesine tıklandığında, biz bu yöntemi, iş mantığı katmanı geçirme seçili tedarikçi çağırma `SupplierID`; BLL verecek karşılık gelen veri erişim katmanı yönteme sonra çağıran bir `UPDATE` deyimi veritabanında, belirtilen tedarikçi ürünleri sona erdirir.</span><span class="sxs-lookup"><span data-stu-id="7c758-183">When the FormView's Button is clicked, we'll invoke this method in the Business Logic Layer, passing in the selected supplier's `SupplierID`; the BLL will then call down to the corresponding Data Access Layer method, which will issue an `UPDATE` statement to the database that discontinues the specified supplier's products.</span></span>

<span data-ttu-id="7c758-184">Önceki öğreticilerimizden uyguladığımız gibi bir aşağıdan yukarıya yaklaşım DAL yöntemi, ardından BLL yöntemi oluşturma ve son olarak ASP.NET sayfasında işlevlerini uygulama ile başlayan kullanacağız.</span><span class="sxs-lookup"><span data-stu-id="7c758-184">As we have done in our previous tutorials, we'll use a bottom-up approach, starting with creating the DAL method, then the BLL method, and finally implementing the functionality in the ASP.NET page.</span></span> <span data-ttu-id="7c758-185">Açık `Northwind.xsd` türü belirtilmiş veri kümesi `App_Code/DAL` klasör ve bir yeni yöntem ekleyin `ProductsTableAdapter` (sağ `ProductsTableAdapter` ve Sorgu Ekle seçin).</span><span class="sxs-lookup"><span data-stu-id="7c758-185">Open the `Northwind.xsd` Typed DataSet in the `App_Code/DAL` folder and add a new method to the `ProductsTableAdapter` (right-click on the `ProductsTableAdapter` and choose Add Query).</span></span> <span data-ttu-id="7c758-186">Bunun yapılması bize yeni yöntem ekleme işleminde size kılavuzluk eder TableAdapter sorgu Yapılandırma Sihirbazı çıkarır.</span><span class="sxs-lookup"><span data-stu-id="7c758-186">Doing so will bring up the TableAdapter Query Configuration wizard, which walks us through the process of adding the new method.</span></span> <span data-ttu-id="7c758-187">Bizim DAL yöntemi geçici SQL deyimi kullandığınızı belirterek başlayın.</span><span class="sxs-lookup"><span data-stu-id="7c758-187">Start by indicating that our DAL method will use an ad-hoc SQL statement.</span></span>

<span data-ttu-id="7c758-188">[![Geçici SQL deyimi kullanarak DAL yöntemi oluşturma](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image31.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image30.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-188">[![Create the DAL Method Using an Ad-Hoc SQL Statement](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image31.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image30.png)</span></span>

<span data-ttu-id="7c758-189">**Şekil 12**: DAL yöntemini kullanarak bir geçici SQL ifadesi oluşturma ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image32.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-189">**Figure 12**: Create the DAL Method Using an Ad-Hoc SQL Statement ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image32.png))</span></span>

<span data-ttu-id="7c758-190">Ardından, sihirbaz bize ne tür bir sorgu oluşturmak için farklı ister.</span><span class="sxs-lookup"><span data-stu-id="7c758-190">Next, the wizard prompts us as to what type of query to create.</span></span> <span data-ttu-id="7c758-191">Olduğundan `DiscontinueAllProductsForSupplier(supplierID)` yöntemi güncelleştirmeniz gerekir `Products` ayarlama, veritabanı tablosu `Discontinued` alanında belirtilen tarafından sağlanan tüm ürünler için 1 *`supplierID`*, verileri güncelleştiren bir sorgu için oluşturmamız gerekir.</span><span class="sxs-lookup"><span data-stu-id="7c758-191">Since the `DiscontinueAllProductsForSupplier(supplierID)` method will need to update the `Products` database table, setting the `Discontinued` field to 1 for all products provided by the specified *`supplierID`*, we need to create a query that updates data.</span></span>

<span data-ttu-id="7c758-192">[![Güncelleştirme sorgu türünü seçin](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image34.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-192">[![Choose the UPDATE Query Type](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image34.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image33.png)</span></span>

<span data-ttu-id="7c758-193">**Şekil 13**: Güncelleştirme sorgu türünü seçin ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image35.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-193">**Figure 13**: Choose the UPDATE Query Type ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image35.png))</span></span>

<span data-ttu-id="7c758-194">TableAdapter mevcut sonraki sihirbaz ekranında sağlar `UPDATE` tanımlanan alanların her biri güncelleştiren deyimi `Products` DataTable.</span><span class="sxs-lookup"><span data-stu-id="7c758-194">The next wizard screen provides the TableAdapter's existing `UPDATE` statement, which updates each of the fields defined in the `Products` DataTable.</span></span> <span data-ttu-id="7c758-195">Bu sorgu metni, aşağıdaki ifade ile değiştirin:</span><span class="sxs-lookup"><span data-stu-id="7c758-195">Replace this query text with the following statement:</span></span>

[!code-sql[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample4.sql)]

<span data-ttu-id="7c758-196">Bu sorgu girme ve İleri'yi tıklatmadan sonra yeni yöntemin adı kullanmak için son Sihirbazı ekran ister `DiscontinueAllProductsForSupplier`.</span><span class="sxs-lookup"><span data-stu-id="7c758-196">After entering this query and clicking Next, the last wizard screen asks for the new method's name use `DiscontinueAllProductsForSupplier`.</span></span> <span data-ttu-id="7c758-197">Son düğmesini tıklatarak Sihirbazı tamamlayın.</span><span class="sxs-lookup"><span data-stu-id="7c758-197">Complete the wizard by clicking the Finish button.</span></span> <span data-ttu-id="7c758-198">Veri kümesini tasarımcıya döndüren bağlı yeni bir yöntemde görmelisiniz `ProductsTableAdapter` adlı `DiscontinueAllProductsForSupplier(@SupplierID)`.</span><span class="sxs-lookup"><span data-stu-id="7c758-198">Upon returning to the DataSet Designer you should see a new method in the `ProductsTableAdapter` named `DiscontinueAllProductsForSupplier(@SupplierID)`.</span></span>

<span data-ttu-id="7c758-199">[![Yeni DAL yöntemi DiscontinueAllProductsForSupplier adı](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image37.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image36.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-199">[![Name the New DAL Method DiscontinueAllProductsForSupplier](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image37.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image36.png)</span></span>

<span data-ttu-id="7c758-200">**Şekil 14**: Yeni DAL yöntem adı `DiscontinueAllProductsForSupplier` ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image38.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-200">**Figure 14**: Name the New DAL Method `DiscontinueAllProductsForSupplier` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image38.png))</span></span>

<span data-ttu-id="7c758-201">İle `DiscontinueAllProductsForSupplier(supplierID)` bizim sonraki görev veri erişim katmanında oluşturulan yöntemi olduğundan oluşturmak için `DiscontinueAllProductsForSupplier(supplierID)` iş mantığı katmanı yöntemi.</span><span class="sxs-lookup"><span data-stu-id="7c758-201">With the `DiscontinueAllProductsForSupplier(supplierID)` method created in the Data Access Layer, our next task is to create the `DiscontinueAllProductsForSupplier(supplierID)` method in the Business Logic Layer.</span></span> <span data-ttu-id="7c758-202">Bunu gerçekleştirmek için açık `ProductsBLL` sınıf dosyası ve aşağıdakileri ekleyin:</span><span class="sxs-lookup"><span data-stu-id="7c758-202">To accomplish this, open the `ProductsBLL` class file and add the following:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample5.cs)]

<span data-ttu-id="7c758-203">Bu yöntem yalnızca aşağı çağırır `DiscontinueAllProductsForSupplier(supplierID)` sağlanan geçirme DAL yönteminde *`supplierID`* parametre değeri.</span><span class="sxs-lookup"><span data-stu-id="7c758-203">This method simply calls down to the `DiscontinueAllProductsForSupplier(supplierID)` method in the DAL, passing along the provided *`supplierID`* parameter value.</span></span> <span data-ttu-id="7c758-204">Yalnızca belirli koşullar altında sona erecek şekilde bir tedarikçi ürünleri izin verilen herhangi bir iş kuralları varsa, bu kuralları burada BLL uygulanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="7c758-204">If there were any business rules that only allowed a supplier's products to be discontinued under certain circumstances, those rules should be implemented here, in the BLL.</span></span>

> [!NOTE]
> <span data-ttu-id="7c758-205">Farklı `UpdateProduct` de aşırı `ProductsBLL` sınıfı `DiscontinueAllProductsForSupplier(supplierID)` yöntem imzası içermez `DataObjectMethodAttribute` özniteliği (`<System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, Boolean)>`).</span><span class="sxs-lookup"><span data-stu-id="7c758-205">Unlike the `UpdateProduct` overloads in the `ProductsBLL` class, the `DiscontinueAllProductsForSupplier(supplierID)` method signature does not include the `DataObjectMethodAttribute` attribute (`<System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, Boolean)>`).</span></span> <span data-ttu-id="7c758-206">Bu ışığının `DiscontinueAllProductsForSupplier(supplierID)` güncelleştirme sekmesinde ObjectDataSource veri kaynağı Yapılandırma Sihirbazı'nın aşağı açılan listeden yöntemi. Ben ve biz çağırma çünkü bu öznitelik atlanmış `DiscontinueAllProductsForSupplier(supplierID)` doğrudan ASP.NET sayfamızı bir olay işleyicisi yöntemi.</span><span class="sxs-lookup"><span data-stu-id="7c758-206">This precludes the `DiscontinueAllProductsForSupplier(supplierID)` method from the ObjectDataSource's Configure Data Source wizard's drop-down list in the UPDATE tab. I ve omitted this attribute because we'll be calling the `DiscontinueAllProductsForSupplier(supplierID)` method directly from an event handler in our ASP.NET page.</span></span>

## <a name="step-5-adding-a-discontinue-all-products-button-to-the-formview"></a><span data-ttu-id="7c758-207">5. Adım: Ekleme bir FormView tüm ürünleri düğmeye Durdur</span><span class="sxs-lookup"><span data-stu-id="7c758-207">Step 5: Adding a Discontinue All Products Button to the FormView</span></span>

<span data-ttu-id="7c758-208">İle `DiscontinueAllProductsForSupplier(supplierID)` BLL ve DAL tam yönteminde, tüm ürünler için seçilen tedarikçi bulunmayarak özelliği eklemek için son adımdır FormView düğmesi Web denetimi eklemek için `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="7c758-208">With the `DiscontinueAllProductsForSupplier(supplierID)` method in the BLL and DAL complete, the final step for adding the ability to discontinue all products for the selected supplier is to add a Button Web control to the FormView's `ItemTemplate`.</span></span> <span data-ttu-id="7c758-209">Böyle bir düğme Tedarikçi telefon numarası ile düğme metni, kesmek tüm ürünleri aşağıda ekleyelim ve bir `ID` özelliği değerinin `DiscontinueAllProductsForSupplier`.</span><span class="sxs-lookup"><span data-stu-id="7c758-209">Let's add such a Button below the supplier's phone number with the button text, Discontinue All Products and an `ID` property value of `DiscontinueAllProductsForSupplier`.</span></span> <span data-ttu-id="7c758-210">Akıllı etiket FormView Şablonları Düzenle bağlantısına tıklayarak bu düğme Web denetimi Tasarımcısı aracılığıyla ekleyebilirsiniz (bkz. Şekil 15), veya doğrudan bildirim temelli söz dizimi.</span><span class="sxs-lookup"><span data-stu-id="7c758-210">You can add this Button Web control through the Designer by clicking on the Edit Templates link in the FormView's smart tag (see Figure 15), or directly through the declarative syntax.</span></span>

<span data-ttu-id="7c758-211">[![Ekleme bir FormView s ItemTemplate için tüm ürünleri düğme Web Denetimi Durdur](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image40.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-211">[![Add a Discontinue All Products Button Web Control to the FormView s ItemTemplate](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image40.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image39.png)</span></span>

<span data-ttu-id="7c758-212">**Şekil 15**: FormView kesmek tüm ürünleri düğme Web denetimi ekleme `ItemTemplate` ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image41.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-212">**Figure 15**: Add a Discontinue All Products Button Web Control to the FormView's `ItemTemplate` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image41.png))</span></span>

<span data-ttu-id="7c758-213">Ne zaman düğmesine tıklandığında bir kullanıcı ziyaret edin sayfasında, bir geri gönderme ensues ve FormView ile [ `ItemCommand` olay](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.itemcommand.aspx) ateşlenir.</span><span class="sxs-lookup"><span data-stu-id="7c758-213">When the Button is clicked by a user visiting the page, a postback ensues and the FormView's [`ItemCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.itemcommand.aspx) fires.</span></span> <span data-ttu-id="7c758-214">Bu düğmeye tıkladı yanıt özel kod yürütmek için bu olay için bir olay işleyicisi oluşturabiliriz.</span><span class="sxs-lookup"><span data-stu-id="7c758-214">To execute custom code in response to this Button being clicked, we can create an event handler for this event.</span></span> <span data-ttu-id="7c758-215">, Yine de anlamak `ItemCommand` olay ateşlenir *herhangi* düğmesi, LinkButton veya ImageButton Web denetimi FormView içinde tıkladı.</span><span class="sxs-lookup"><span data-stu-id="7c758-215">Understand, though, that the `ItemCommand` event fires whenever *any* Button, LinkButton, or ImageButton Web control is clicked within the FormView.</span></span> <span data-ttu-id="7c758-216">Diğer bir deyişle, kullanıcı bir sayfadan diğerine FormView getirdiğinde `ItemCommand` olay harekete geçirilir; kullanıcı yeni, düzenleme, tıklar veya ekleme, güncelleme veya silme destekleyen bir FormView'da Sil aynı şey.</span><span class="sxs-lookup"><span data-stu-id="7c758-216">That means that when the user moves from one page to another in the FormView, the `ItemCommand` event fires; same thing when the user clicks New, Edit, or Delete in a FormView that supports inserting, updating, or deleting.</span></span>

<span data-ttu-id="7c758-217">Bu yana `ItemCommand` bakılmaksızın olay işleyicisi ihtiyacımız tüm ürünleri Durdur düğmesine tıklandığını belirleme için bir yol veya başka bir düğme ise hangi düğmeye tıklandığında harekete geçirilir.</span><span class="sxs-lookup"><span data-stu-id="7c758-217">Since the `ItemCommand` fires regardless of what button is clicked, in the event handler we need a way to determine if the Discontinue All Products Button was clicked or if it was some other button.</span></span> <span data-ttu-id="7c758-218">Bunu yapmak için biz düğmesi Web denetimin ayarlayabilirsiniz `CommandName` özelliğini bazı tanımlayan bir değer.</span><span class="sxs-lookup"><span data-stu-id="7c758-218">To accomplish this, we can set the Button Web control's `CommandName` property to some identifying value.</span></span> <span data-ttu-id="7c758-219">Ne zaman düğmesine tıklandığında, bu `CommandName` içine geçirilen değer `ItemCommand` olay işleyicisi, tüm ürünleri Durdur düğmesini tıklanan düğme olup olmadığını belirlemek için bize etkinleştirme.</span><span class="sxs-lookup"><span data-stu-id="7c758-219">When the Button is clicked, this `CommandName` value is passed into the `ItemCommand` event handler, enabling us to determine whether the Discontinue All Products Button was the button clicked.</span></span> <span data-ttu-id="7c758-220">Kesmek tüm ürünleri düğmenin ayarlamak `CommandName` DiscontinueProducts özelliği.</span><span class="sxs-lookup"><span data-stu-id="7c758-220">Set the Discontinue All Products Button's `CommandName` property to DiscontinueProducts .</span></span>

<span data-ttu-id="7c758-221">Son olarak, kullanıcının gerçekten seçili tedarikçi ürünleri devam etmek istediğini emin olmak için şimdi bir istemci-tarafı Onayla iletişim kutusunu kullanın.</span><span class="sxs-lookup"><span data-stu-id="7c758-221">Finally, let's use a client-side confirm dialog box to ensure that the user really wants to discontinue the selected supplier's products.</span></span> <span data-ttu-id="7c758-222">İçinde gördüğümüz gibi [ekleme istemci tarafı doğrulama zaman silme](../editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs.md) öğretici, bu gerçekleştirilebilir JavaScript bir bit.</span><span class="sxs-lookup"><span data-stu-id="7c758-222">As we saw in the [Adding Client-Side Confirmation When Deleting](../editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs.md) tutorial, this can be accomplished with a bit of JavaScript.</span></span> <span data-ttu-id="7c758-223">Özellikle, düğme Web denetimin OnClientClick özelliğini ayarlayın `return confirm('This will mark _all_ of this supplier\'s products as discontinued. Are you certain you want to do this?');`</span><span class="sxs-lookup"><span data-stu-id="7c758-223">In particular, set the Button Web control's OnClientClick property to `return confirm('This will mark _all_ of this supplier\'s products as discontinued. Are you certain you want to do this?');`</span></span>

<span data-ttu-id="7c758-224">Bu değişiklikleri yaptıktan sonra FormView bildirim temelli söz dizimi aşağıdaki gibi görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="7c758-224">After making these changes, the FormView's declarative syntax should look like the following:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample6.aspx)]

<span data-ttu-id="7c758-225">Ardından, FormView için bir olay işleyicisi oluşturun `ItemCommand` olay.</span><span class="sxs-lookup"><span data-stu-id="7c758-225">Next, create an event handler for the FormView's `ItemCommand` event.</span></span> <span data-ttu-id="7c758-226">Bu olay işleyicisinde biz önce tüm ürünleri Durdur düğmesine tıklandığını olup olmadığını belirlemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="7c758-226">In this event handler we need to first determine whether the Discontinue All Products Button was clicked.</span></span> <span data-ttu-id="7c758-227">Bu nedenle, biz bir örneğini oluşturmak istiyorsanız `ProductsBLL` sınıfı ve çağırma kendi `DiscontinueAllProductsForSupplier(supplierID)` tümleştirilmesidir yöntemi `SupplierID` , seçili FormView:</span><span class="sxs-lookup"><span data-stu-id="7c758-227">If so, we want to create an instance of the `ProductsBLL` class and invoke its `DiscontinueAllProductsForSupplier(supplierID)` method, passing in the `SupplierID` of the selected FormView:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample7.cs)]

<span data-ttu-id="7c758-228">Unutmayın `SupplierID` FormView'da geçerli seçili sağlayıcısının FormView kullanılarak erişilebilir [ `SelectedValue` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.selectedvalue.aspx).</span><span class="sxs-lookup"><span data-stu-id="7c758-228">Note that the `SupplierID` of the current selected supplier in the FormView can be accessed using the FormView's [`SelectedValue` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.selectedvalue.aspx).</span></span> <span data-ttu-id="7c758-229">`SelectedValue` Özelliği ilk veri anahtar FormView'da görüntülenmesini kaydın değerini döndürür.</span><span class="sxs-lookup"><span data-stu-id="7c758-229">The `SelectedValue` property returns the first data key value for the record being displayed in the FormView.</span></span> <span data-ttu-id="7c758-230">FormView [ `DataKeyNames` özelliği](https://msdn.microsoft.com/system.web.ui.webcontrols.formview.datakeynames.aspx), verilerin anahtar değerlerini alanları çekilen, verileri gösteren otomatik olarak ayarlandığı `SupplierID` ObjectDataSource FormView için bağlama sırasında Visual Studio tarafından Adım 2'de geri.</span><span class="sxs-lookup"><span data-stu-id="7c758-230">The FormView's [`DataKeyNames` property](https://msdn.microsoft.com/system.web.ui.webcontrols.formview.datakeynames.aspx), which indicates the data fields from which the data key values are pulled from, was automatically set to `SupplierID` by Visual Studio when binding the ObjectDataSource to the FormView back in Step 2.</span></span>

<span data-ttu-id="7c758-231">İle `ItemCommand` oluşturulan olay işleyicisi sayfayı test etmek için biraz yararlanın.</span><span class="sxs-lookup"><span data-stu-id="7c758-231">With the `ItemCommand` event handler created, take a moment to test out the page.</span></span> <span data-ttu-id="7c758-232">Cooperativa de Quesos için Gözat 'Las Cabras' tedarikçi (benim için FormView'da beşinci tedarikçi olmadığı).</span><span class="sxs-lookup"><span data-stu-id="7c758-232">Browse to the Cooperativa de Quesos 'Las Cabras' supplier (it's the fifth supplier in the FormView for me).</span></span> <span data-ttu-id="7c758-233">İkisi de olan iki ürünler, Queso Cabrales ve Queso Manchego La Pastora, bu sağlayıcı sağlar *değil* kullanımdan kaldırıldı.</span><span class="sxs-lookup"><span data-stu-id="7c758-233">This supplier provides two products, Queso Cabrales and Queso Manchego La Pastora, both of which are *not* discontinued.</span></span>

<span data-ttu-id="7c758-234">Cooperativa de Quesos 'Las Cabras' faaliyet geçti ve bu nedenle sona erecek şekilde ürünlerinden olduğunu hayal edin.</span><span class="sxs-lookup"><span data-stu-id="7c758-234">Imagine that Cooperativa de Quesos 'Las Cabras' has gone out of business and therefore its products are to be discontinued.</span></span> <span data-ttu-id="7c758-235">' E tıklayın tüm ürünleri düğmesi bırakmaktır.</span><span class="sxs-lookup"><span data-stu-id="7c758-235">Click the Discontinue All Products Button.</span></span> <span data-ttu-id="7c758-236">Bu istemci-tarafı Onayla iletişim kutusu görüntüler (bkz. Şekil 16) kutusunda.</span><span class="sxs-lookup"><span data-stu-id="7c758-236">This will display the client-side confirm dialog box (see Figure 16).</span></span>

<span data-ttu-id="7c758-237">[![Cooperativa de Quesos Las Cabras kaynakları iki etkin ürünler](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image43.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-237">[![Cooperativa de Quesos Las Cabras Supplies Two Active Products](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image43.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image42.png)</span></span>

<span data-ttu-id="7c758-238">**Şekil 16**: Cooperativa de Quesos Las Cabras kaynakları iki etkin ürünler ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-238">**Figure 16**: Cooperativa de Quesos Las Cabras Supplies Two Active Products ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image44.png))</span></span>

<span data-ttu-id="7c758-239">İstemci tarafı Onayla iletişim kutusunda Tamam'ı, form gönderme, geri göndermeye neden devam FormView `ItemCommand` olayını ateşle.</span><span class="sxs-lookup"><span data-stu-id="7c758-239">If you click OK in the client-side confirm dialog box, the form submission will proceed, causing a postback in which the FormView's `ItemCommand` event will fire.</span></span> <span data-ttu-id="7c758-240">Çağrılırken, oluşturduğumuz olay işleyicisi sonra yürütülür `DiscontinueAllProductsForSupplier(supplierID)` yöntemi ve Queso Cabrales hem Queso Manchego La Pastora ürünleri durduruluyor.</span><span class="sxs-lookup"><span data-stu-id="7c758-240">The event handler we created will then execute, invoking the `DiscontinueAllProductsForSupplier(supplierID)` method and discontinuing both the Queso Cabrales and Queso Manchego La Pastora products.</span></span>

<span data-ttu-id="7c758-241">GridView'ın görünüm durumu devre dışı bıraktıysanız, GridView'temel alınan veri deposuna her geri göndermede DataSet'e ve bu nedenle hemen (bkz. Şekil 17), bu iki ürün artık üretilmeyen yansıtacak şekilde güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="7c758-241">If you have disabled the GridView's view state, the GridView is being rebound to the underlying data store on every postback, and therefore will immediately be updated to reflect that these two products are now discontinued (see Figure 17).</span></span> <span data-ttu-id="7c758-242">Ancak, GridView Görünüm durumuna devre dışı bıraktığınız değil, veri GridView'ın bu değişikliği yaptıktan sonra el ile yeniden bağlamanız gerekecektir.</span><span class="sxs-lookup"><span data-stu-id="7c758-242">If, however, you have not disabled view state in the GridView, you will need to manually rebind the data to the GridView after making this change.</span></span> <span data-ttu-id="7c758-243">Bunu yapmak için basitçe GridView'ın çağrı yapmak `DataBind()` yöntemi çağırma hemen sonra `DiscontinueAllProductsForSupplier(supplierID)` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="7c758-243">To accomplish this, simply make a call to the GridView's `DataBind()` method immediately after invoking the `DiscontinueAllProductsForSupplier(supplierID)` method.</span></span>

<span data-ttu-id="7c758-244">[![Tüm ürünler Durdur düğmesine Tıklandıktan sonra tedarikçi s ürün uygun şekilde güncelleştirilmiş değil](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image46.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-244">[![After Clicking the Discontinue All Products Button, the Supplier s Products are Updated Accordingly](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image46.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image45.png)</span></span>

<span data-ttu-id="7c758-245">**Şekil 17**: Tüm ürünler Durdur düğmesine Tıklandıktan sonra tedarikçi ürünleri uygun şekilde güncelleştirilmiş olan ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image47.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-245">**Figure 17**: After Clicking the Discontinue All Products Button, the Supplier's Products are Updated Accordingly ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image47.png))</span></span>

## <a name="step-6-creating-an-updateproduct-overload-in-the-business-logic-layer-for-adjusting-a-products-price"></a><span data-ttu-id="7c758-246">6. Adım: UpdateProduct aşırı ürünün fiyatını ayarlamak için iş mantığı katmanı oluşturma</span><span class="sxs-lookup"><span data-stu-id="7c758-246">Step 6: Creating an UpdateProduct Overload in the Business Logic Layer for Adjusting a Product's Price</span></span>

<span data-ttu-id="7c758-247">Gibi tüm ürünleri Durdur düğmesini FormView'da, artan ve azalan GridView bir ürün için fiyat için düğmeler eklemek için ilk olarak uygun veri erişim katmanı ve iş mantığı katmanı yöntemleri eklemek ihtiyacımız var.</span><span class="sxs-lookup"><span data-stu-id="7c758-247">Like with the Discontinue All Products Button in the FormView, in order to add buttons for increasing and decreasing the price for a product in the GridView we need to first add the appropriate Data Access Layer and Business Logic Layer methods.</span></span> <span data-ttu-id="7c758-248">Biz zaten bir DAL tek ürün satır güncelleştiren bir yöntem olduğundan, biz için yeni bir aşırı yükleme oluşturarak bu işlevselliği sağlayabilen `UpdateProduct` BLL yöntemi.</span><span class="sxs-lookup"><span data-stu-id="7c758-248">Since we already have a method that updates a single product row in the DAL, we can provide such functionality by creating a new overload for the `UpdateProduct` method in the BLL.</span></span>

<span data-ttu-id="7c758-249">Bizim geçmiş `UpdateProduct` aşırı ürün alanları bileşimi skaler giriş değerleri olarak yaptıktan ve ardından belirtilen ürün için yalnızca bu alanları güncelleştirdik.</span><span class="sxs-lookup"><span data-stu-id="7c758-249">Our past `UpdateProduct` overloads have taken in some combination of product fields as scalar input values and have then updated just those fields for the specified product.</span></span> <span data-ttu-id="7c758-250">Bu aşırı yükleme için Biz bu standart biraz farklı ve bunun yerine ürünün içinde geçirin `ProductID` ve yüzde olarak ayarlamak `UnitPrice` (yeni geçirme aksine ayarlanmış `UnitPrice` kendisini).</span><span class="sxs-lookup"><span data-stu-id="7c758-250">For this overload we'll vary slightly from this standard and instead pass in the product's `ProductID` and the percentage by which to adjust the `UnitPrice` (as opposed to passing in the new, adjusted `UnitPrice` itself).</span></span> <span data-ttu-id="7c758-251">Bu yaklaşım ihtiyacımız geçerli ürün uygulamasının belirleme ile rahatsız etmeyi yoksa ASP.NET sayfası arka plan kod sınıfında yazma kodunu basitleştirir `UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="7c758-251">This approach will simplify the code we need to write in the ASP.NET page code-behind class, since we don't have to bother with determining the current product's `UnitPrice`.</span></span>

<span data-ttu-id="7c758-252">`UpdateProduct` Bu öğretici, aşağıda gösterilen için aşırı yükleme:</span><span class="sxs-lookup"><span data-stu-id="7c758-252">The `UpdateProduct` overload for this tutorial is shown below:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample8.cs)]

<span data-ttu-id="7c758-253">Bu aşırı yükleme DAL'ın aracılığıyla belirtilen ürün hakkındaki bilgileri alır `GetProductByProductID(productID)` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="7c758-253">This overload retrieves information about the specified product through the DAL's `GetProductByProductID(productID)` method.</span></span> <span data-ttu-id="7c758-254">Ardından bakar olup olmadığını ürünün `UnitPrice` veritabanı atanmış `NULL` değeri.</span><span class="sxs-lookup"><span data-stu-id="7c758-254">It then checks to see whether the product's `UnitPrice` is assigned a database `NULL` value.</span></span> <span data-ttu-id="7c758-255">Bu durumda, fiyat bırakılır değiştirilmemiş.</span><span class="sxs-lookup"><span data-stu-id="7c758-255">If it is, the price is left unaltered.</span></span> <span data-ttu-id="7c758-256">Ancak, varsa, olmayan bir`NULL` `UnitPrice` değeri, yöntem güncelleştirmeleri ürünün `UnitPrice` belirtilen yüzde (`unitPriceAdjustmentPercent`).</span><span class="sxs-lookup"><span data-stu-id="7c758-256">If, however, there is a non-`NULL` `UnitPrice` value, the method updates the product's `UnitPrice` by the specified percent (`unitPriceAdjustmentPercent`).</span></span>

## <a name="step-7-adding-the-increase-and-decrease-buttons-to-the-gridview"></a><span data-ttu-id="7c758-257">7. Adım: GridView'a artırma ve azaltma düğmeleri ekleme</span><span class="sxs-lookup"><span data-stu-id="7c758-257">Step 7: Adding the Increase and Decrease Buttons to the GridView</span></span>

<span data-ttu-id="7c758-258">GridView (ve DetailsView) hem de alanlarının bir koleksiyonu oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="7c758-258">The GridView (and DetailsView) are both made up of a collection of fields.</span></span> <span data-ttu-id="7c758-259">BoundFields CheckBoxFields ve TemplateField ek olarak, ASP.NET adından da anlaşılacağı gibi her satır için bir düğme, LinkButton veya ImageButton sahip bir sütun olarak işler ButtonField içerir.</span><span class="sxs-lookup"><span data-stu-id="7c758-259">In addition to BoundFields, CheckBoxFields, and TemplateFields, ASP.NET includes the ButtonField, which, as its name implies, renders as a column with a Button, LinkButton, or ImageButton for each row.</span></span> <span data-ttu-id="7c758-260">Benzer şekilde tıklayarak FormView *herhangi* düğmesi GridView sayfalama düğmeleri, düzenleme veya silme düğmeler, sıralama düğmeler ve benzeri içindeki geri göndermeye neden olur ve GridView'ın başlatır [ `RowCommand` olay](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rowcommand.aspx).</span><span class="sxs-lookup"><span data-stu-id="7c758-260">Similar to the FormView, clicking *any* button within the GridView paging buttons, Edit or Delete buttons, sorting buttons, and so on causes a postback and raises the GridView's [`RowCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rowcommand.aspx).</span></span>

<span data-ttu-id="7c758-261">ButtonField sahip bir `CommandName` her düğmeleri için belirtilen değer atayan özelliği `CommandName` özellikleri.</span><span class="sxs-lookup"><span data-stu-id="7c758-261">The ButtonField has a `CommandName` property that assigns the specified value to each of its Buttons `CommandName` properties.</span></span> <span data-ttu-id="7c758-262">FormView ile gibi `CommandName` değeri tarafından kullanılan `RowCommand` hangi düğmesine tıklandığını belirleme için olay işleyicisi.</span><span class="sxs-lookup"><span data-stu-id="7c758-262">Like with the FormView, the `CommandName` value is used by the `RowCommand` event handler to determine which button was clicked.</span></span>

<span data-ttu-id="7c758-263">GridView ile düğme metni fiyatı + 10 için iki yeni ButtonFields ekleyelim % ve diğer metin fiyat -10 ile %.</span><span class="sxs-lookup"><span data-stu-id="7c758-263">Let's add two new ButtonFields to the GridView, one with a button text Price +10% and the other with the text Price -10%.</span></span> <span data-ttu-id="7c758-264">Bu ButtonFields eklemek, GridView'ın akıllı etiketinde sütunları Düzenle bağlantısına tıklayın, sol üstteki listede ButtonField alan türünü seçin ve Ekle düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="7c758-264">To add these ButtonFields, click on the Edit Columns link from the GridView's smart tag, select the ButtonField field type from the list in the upper left and click the Add button.</span></span>

![GridView'a iki ButtonFields Ekle](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image48.png)

<span data-ttu-id="7c758-266">**Şekil 18**: GridView'a iki ButtonFields Ekle</span><span class="sxs-lookup"><span data-stu-id="7c758-266">**Figure 18**: Add Two ButtonFields to the GridView</span></span>

<span data-ttu-id="7c758-267">İki ButtonFields ilk iki GridView alanları olarak görünecek şekilde taşıyın.</span><span class="sxs-lookup"><span data-stu-id="7c758-267">Move the two ButtonFields so that they appear as the first two GridView fields.</span></span> <span data-ttu-id="7c758-268">Ardından, ayarlama `Text` + %10 fiyat için bu iki ButtonFields ve fiyat -10 özelliklerini % ve `CommandName` IncreasePrice ve DecreasePrice, özellikleri sırasıyla.</span><span class="sxs-lookup"><span data-stu-id="7c758-268">Next, set the `Text` properties of these two ButtonFields to Price +10% and Price -10% and the `CommandName` properties to IncreasePrice and DecreasePrice, respectively.</span></span> <span data-ttu-id="7c758-269">Varsayılan olarak, bir ButtonField düğme, sütunu LinkButtons işler.</span><span class="sxs-lookup"><span data-stu-id="7c758-269">By default, a ButtonField renders its column of buttons as LinkButtons.</span></span> <span data-ttu-id="7c758-270">Bu, ancak ButtonField kişinin değiştirilebilir [ `ButtonType` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx).</span><span class="sxs-lookup"><span data-stu-id="7c758-270">This can be changed, however, through the ButtonField's [`ButtonType` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx).</span></span> <span data-ttu-id="7c758-271">Şimdi bu iki ButtonFields normal düğmeler işlenen sahip; Bu nedenle `ButtonType` özelliğini `Button`.</span><span class="sxs-lookup"><span data-stu-id="7c758-271">Let's have these two ButtonFields rendered as regular push buttons; therefore, set the `ButtonType` property to `Button`.</span></span> <span data-ttu-id="7c758-272">Şekil 19, bu değişiklikleri yaptıktan sonra alanları iletişim kutusu gösterir; Aşağıdaki bildirim temelli GridView'ın işaretleme olur.</span><span class="sxs-lookup"><span data-stu-id="7c758-272">Figure 19 shows the Fields dialog box after these changes have been made; following that is the GridView's declarative markup.</span></span>

![ButtonFields metin, CommandName ve ButtonType özelliklerini yapılandırma](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image49.png)

<span data-ttu-id="7c758-274">**Şekil 19**: ButtonFields yapılandırma `Text`, `CommandName`, ve `ButtonType` özellikleri</span><span class="sxs-lookup"><span data-stu-id="7c758-274">**Figure 19**: Configure the ButtonFields `Text`, `CommandName`, and `ButtonType` Properties</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample9.aspx)]

<span data-ttu-id="7c758-275">Oluşturulan bu ButtonFields ile GridView için ait bir olay işleyicisi oluşturmak için son adım olan `RowCommand` olay.</span><span class="sxs-lookup"><span data-stu-id="7c758-275">With these ButtonFields created, the final step is to create an event handler for the GridView's `RowCommand` event.</span></span> <span data-ttu-id="7c758-276">Çünkü harekete varsa bu olay işleyicisi ya da fiyatı + %10 veya % düğmeleri fiyat -10 tıklattığında, gereksinimlerini belirlemek için `ProductID` satır, düğmesine tıklandığını ve ardından çağırmak için `ProductsBLL` sınıfın `UpdateProduct` uygun geçirme yöntemi `UnitPrice` yüzde ayarlama ile birlikte `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="7c758-276">This event handler, if fired because either the Price +10% or Price -10% buttons were clicked, needs to determine the `ProductID` for the row whose button was clicked and then invoke the `ProductsBLL` class's `UpdateProduct` method, passing in the appropriate `UnitPrice` percentage adjustment along with the `ProductID`.</span></span> <span data-ttu-id="7c758-277">Aşağıdaki kod, bu görevleri gerçekleştirir:</span><span class="sxs-lookup"><span data-stu-id="7c758-277">The following code performs these tasks:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample10.cs)]

<span data-ttu-id="7c758-278">Belirleyebilmesi `ProductID` satır için fiyatı + 10 % veya fiyat -10% düğmesine tıkladı, GridView'ın başvurmanız ihtiyacımız `DataKeys` koleksiyonu.</span><span class="sxs-lookup"><span data-stu-id="7c758-278">In order to determine the `ProductID` for the row whose Price +10% or Price -10% button was clicked, we need to consult the GridView's `DataKeys` collection.</span></span> <span data-ttu-id="7c758-279">Bu koleksiyon, belirtilen alanların değerlerini tutan `DataKeyNames` her GridView satırında özelliği.</span><span class="sxs-lookup"><span data-stu-id="7c758-279">This collection holds the values of the fields specified in the `DataKeyNames` property for each GridView row.</span></span> <span data-ttu-id="7c758-280">GridView'ın bu yana `DataKeyNames` özelliğinin ayarlandığı ProductID için Visual Studio tarafından ObjectDataSource GridView'a bağlanırken `DataKeys(rowIndex).Value` sağlar `ProductID` için belirtilen *rowIndex*.</span><span class="sxs-lookup"><span data-stu-id="7c758-280">Since the GridView's `DataKeyNames` property was set to ProductID by Visual Studio when binding the ObjectDataSource to the GridView, `DataKeys(rowIndex).Value` provides the `ProductID` for the specified *rowIndex*.</span></span>

<span data-ttu-id="7c758-281">ButtonField içinde otomatik olarak geçirir. *rowIndex* , düğmeye tıkladı aracılığıyla satırın `e.CommandArgument` parametresi.</span><span class="sxs-lookup"><span data-stu-id="7c758-281">The ButtonField automatically passes in the *rowIndex* of the row whose button was clicked through the `e.CommandArgument` parameter.</span></span> <span data-ttu-id="7c758-282">Bu nedenle, belirlemek için `ProductID` satır için fiyatı + 10 % veya fiyat -10% düğmesine tıkladı, kullanıyoruz: `Convert.ToInt32(SuppliersProducts.DataKeys(Convert.ToInt32(e.CommandArgument)).Value)`.</span><span class="sxs-lookup"><span data-stu-id="7c758-282">Therefore, to determine the `ProductID` for the row whose Price +10% or Price -10% button was clicked, we use: `Convert.ToInt32(SuppliersProducts.DataKeys(Convert.ToInt32(e.CommandArgument)).Value)`.</span></span>

<span data-ttu-id="7c758-283">Olarak tüm ürünleri Bulunmayarak düğmesiyle GridView'ın görünüm durumu, devre dışı bıraktıysanız GridView temel alınan veri deposuna her geri göndermede DataSet'e ve bu nedenle hemen tıklama ile oluşan bir fiyat değişikliği yansıtacak şekilde güncelleştirilir düğme ya da.</span><span class="sxs-lookup"><span data-stu-id="7c758-283">As with the Discontinue All Products button, if you have disabled the GridView's view state, the GridView is being rebound to the underlying data store on every postback, and therefore will immediately be updated to reflect a price change that occurs from clicking either of the buttons.</span></span> <span data-ttu-id="7c758-284">Ancak, GridView Görünüm durumuna devre dışı bıraktığınız değil, veri GridView'ın bu değişikliği yaptıktan sonra el ile yeniden bağlamanız gerekecektir.</span><span class="sxs-lookup"><span data-stu-id="7c758-284">If, however, you have not disabled view state in the GridView, you will need to manually rebind the data to the GridView after making this change.</span></span> <span data-ttu-id="7c758-285">Bunu yapmak için basitçe GridView'ın çağrı yapmak `DataBind()` yöntemi çağırma hemen sonra `UpdateProduct` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="7c758-285">To accomplish this, simply make a call to the GridView's `DataBind()` method immediately after invoking the `UpdateProduct` method.</span></span>

<span data-ttu-id="7c758-286">Şekil 20 büyükanne Kelly'nın yerimizle göre sağlanan ürünlerin görüntülerken sayfada gösterilir.</span><span class="sxs-lookup"><span data-stu-id="7c758-286">Figure 20 shows the page when viewing the products provided by Grandma Kelly's Homestead.</span></span> <span data-ttu-id="7c758-287">Şekil 21, % düğmesini iki kez büyükanne'nın Böğürtlen dağıtabilir ve fiyat -10% düğme için bir kez için Northwoods Cranberry Sauce tıklatıldıktan + 10 fiyat sonra sonuçları gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="7c758-287">Figure 21 shows the results after the Price +10% button has been clicked twice for Grandma's Boysenberry Spread and the Price -10% button once for Northwoods Cranberry Sauce.</span></span>

<span data-ttu-id="7c758-288">[![GridView fiyatı + 10 içerir % ve % düğmeleri -10 fiyat](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image51.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-288">[![The GridView Includes Price +10% and Price -10% Buttons](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image51.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image50.png)</span></span>

<span data-ttu-id="7c758-289">**Şekil 20**: GridView içeren fiyatı + %10 ve % düğmeleri -10 Fiyat ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image52.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-289">**Figure 20**: The GridView Includes Price +10% and Price -10% Buttons ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image52.png))</span></span>

<span data-ttu-id="7c758-290">[![Birinci ve üçüncü ürünün fiyatı + 10 fiyat güncelleştirilip güncelleştirilmediğini % ve % düğmeleri -10 fiyat](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image54.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image53.png)</span><span class="sxs-lookup"><span data-stu-id="7c758-290">[![The Prices for the First and Third Product Have Been Updated via the Price +10% and Price -10% Buttons](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image54.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image53.png)</span></span>

<span data-ttu-id="7c758-291">**Şekil 21**: Fiyatlar ilk ve üçüncü ürün güncelleştirildi + 10 fiyat üzerinden % ve % düğmeleri -10 Fiyat ([tam boyutlu görüntüyü görmek için tıklatın](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image55.png))</span><span class="sxs-lookup"><span data-stu-id="7c758-291">**Figure 21**: The Prices for the First and Third Product Have Been Updated via the Price +10% and Price -10% Buttons ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image55.png))</span></span>

> [!NOTE]
> <span data-ttu-id="7c758-292">GridView (ve DetailsView) de düğmeler, LinkButtons veya kendi TemplateField için eklenen ImageButtons olabilir.</span><span class="sxs-lookup"><span data-stu-id="7c758-292">The GridView (and DetailsView) can also have Buttons, LinkButtons, or ImageButtons added to their TemplateFields.</span></span> <span data-ttu-id="7c758-293">GridView'ın BoundField ile tıklandığında bu düğmeler, bir geri gönderme anlamına şekilde yükseltme `RowCommand` olay.</span><span class="sxs-lookup"><span data-stu-id="7c758-293">As with the BoundField, these Buttons, when clicked, will induce a postback, raising the GridView's `RowCommand` event.</span></span> <span data-ttu-id="7c758-294">Ne zaman ekleme düğmeleri bir TemplateField içinde ancak düğmenin `CommandArgument` ButtonFields kullanırken olduğu gibi satır dizini otomatik olarak ayarlanmadı.</span><span class="sxs-lookup"><span data-stu-id="7c758-294">When adding buttons in a TemplateField, however, the Button's `CommandArgument` is not automatically set to the index of the row as it is when using ButtonFields.</span></span> <span data-ttu-id="7c758-295">Satır dizini içinde tıklandığını düğmenin belirlemeniz gerekiyorsa `RowCommand` olay işleyicisi, düğmenin el ile ayarlamanız gerekir `CommandArgument` bildirim temelli söz dizimini kullanarak kod gibi TemplateField içinde bir özellik:</span><span class="sxs-lookup"><span data-stu-id="7c758-295">If you need to determine the row index of the button that was clicked within the `RowCommand` event handler, you'll need to manually set the Button's `CommandArgument` property in its declarative syntax within the TemplateField, using code like:</span></span>  
> <span data-ttu-id="7c758-296">`<asp:Button runat="server" ... CommandArgument='<%# ((GridViewRow) Container).RowIndex %>'`.</span><span class="sxs-lookup"><span data-stu-id="7c758-296">`<asp:Button runat="server" ... CommandArgument='<%# ((GridViewRow) Container).RowIndex %>'`.</span></span>

## <a name="summary"></a><span data-ttu-id="7c758-297">Özet</span><span class="sxs-lookup"><span data-stu-id="7c758-297">Summary</span></span>

<span data-ttu-id="7c758-298">FormView GridView ve DetailsView denetimlerini tüm düğmeler, LinkButtons veya ImageButtons içerebilir.</span><span class="sxs-lookup"><span data-stu-id="7c758-298">The GridView, DetailsView, and FormView controls all can include Buttons, LinkButtons, or ImageButtons.</span></span> <span data-ttu-id="7c758-299">Böyle düğme tıklandığında, bir geri göndermeye neden olur ve yükseltmek `ItemCommand` FormView ve DetailsView denetimlerini olayı ve `RowCommand` GridView olayı.</span><span class="sxs-lookup"><span data-stu-id="7c758-299">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event in the FormView and DetailsView controls and the `RowCommand` event in the GridView.</span></span> <span data-ttu-id="7c758-300">Bu veri Web denetimleri kayıtlarını düzenleme veya silme gibi yaygın komut ile ilgili eylemler işlemek için yerleşik işlevselliğe sahiptir.</span><span class="sxs-lookup"><span data-stu-id="7c758-300">These data Web controls have built-in functionality to handle common command-related actions, such as deleting or editing records.</span></span> <span data-ttu-id="7c758-301">Ancak, aynı zamanda çözmeye çalışacağız kullanım düğmeler, tıklandığında, kendi özel kod yürütme ile yanıt.</span><span class="sxs-lookup"><span data-stu-id="7c758-301">However, we can also use buttons that, when clicked, respond with executing our own custom code.</span></span>

<span data-ttu-id="7c758-302">Bunu gerçekleştirmek için bir olay işleyicisi oluşturmak ihtiyacımız `ItemCommand` veya `RowCommand` olay.</span><span class="sxs-lookup"><span data-stu-id="7c758-302">To accomplish this, we need to create an event handler for the `ItemCommand` or `RowCommand` event.</span></span> <span data-ttu-id="7c758-303">Bu olay işleyicisinde biz öncelikle gelen denetleme `CommandName` hangi düğmesine tıklandığını belirleme ve uygun özel eylem için değer.</span><span class="sxs-lookup"><span data-stu-id="7c758-303">In this event handler we first check the incoming `CommandName` value to determine which button was clicked and then take appropriate custom action.</span></span> <span data-ttu-id="7c758-304">Bu öğreticide düğmeler ve ButtonFields tüm ürünler için belirtilen bir tedarikçi kesmek veya artırmak veya belirli bir ürünün fiyatı 10 oranında azaltmak için nasıl kullanılacağını gördük.</span><span class="sxs-lookup"><span data-stu-id="7c758-304">In this tutorial we saw how to use buttons and ButtonFields to discontinue all products for a specified supplier or to increase or decrease the price of a particular product by 10%.</span></span>

<span data-ttu-id="7c758-305">Mutlu programlama!</span><span class="sxs-lookup"><span data-stu-id="7c758-305">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="7c758-306">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="7c758-306">About the Author</span></span>

<span data-ttu-id="7c758-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), yazar yedi ASP/ASP.NET kitaplardan ve poshbeauty.com sitesinin [4GuysFromRolla.com](http://www.4guysfromrolla.com), Microsoft Web teknolojileriyle beri 1998'de çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="7c758-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="7c758-308">Scott, bağımsız Danışman, Eğitimci ve yazıcı çalışır.</span><span class="sxs-lookup"><span data-stu-id="7c758-308">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="7c758-309">En son nitelemiştir olan [ *Unleashed'i öğretin kendiniz ASP.NET 2.0 24 saat içindeki*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="7c758-309">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="7c758-310">He adresinden ulaşılabilir [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="7c758-310">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="7c758-311">veya kendi blog hangi bulunabilir [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="7c758-311">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="7c758-312">Next</span><span class="sxs-lookup"><span data-stu-id="7c758-312">Next</span></span>](adding-and-responding-to-buttons-to-a-gridview-vb.md)
