---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs
title: Ayrıntılar DataList (C#) Ile madde Işaretli ana kayıt listesi kullanan ana/ayrıntı | Microsoft Docs
author: rick-anderson
description: Bu öğreticide, önceki öğreticinin iki sayfalı ana/ayrıntı raporunu tek bir sayfa halinde sıkıştıracağız. Bu, t üzerinde kategori adlarının madde işaretli bir listesini gösterir...
ms.author: riande
ms.date: 10/17/2006
ms.assetid: c727bb73-7b59-41a1-8dc3-623c6d69e7c2
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs
msc.type: authoredcontent
ms.openlocfilehash: 4549ab8e64599b09c300c158bedfd5d85efafc4d
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74591869"
---
# <a name="masterdetail-using-a-bulleted-list-of-master-records-with-a-details-datalist-c"></a><span data-ttu-id="89d97-103">Bir Ayrıntılar DataList’i ile Madde İşaretli Ana Kayıt Listesi Kullanan Ana/Ayrıntı (C#)</span><span class="sxs-lookup"><span data-stu-id="89d97-103">Master/Detail Using a Bulleted List of Master Records with a Details DataList (C#)</span></span>

<span data-ttu-id="89d97-104">[Scott Mitchell](https://twitter.com/ScottOnWriting) tarafından</span><span class="sxs-lookup"><span data-stu-id="89d97-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="89d97-105">[Örnek uygulamayı indirin](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_35_CS.exe) veya [PDF 'yi indirin](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/datatutorial35cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="89d97-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_35_CS.exe) or [Download PDF](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/datatutorial35cs1.pdf)</span></span>

> <span data-ttu-id="89d97-106">Bu öğreticide, önceki öğreticinin iki sayfalı ana/ayrıntı raporunu, ekranın sol tarafındaki kategori adlarının madde işaretli bir listesini ve ekranın sağ tarafında seçilen kategorinin ürünlerini gösteren tek bir sayfada sıkıştıracağız.</span><span class="sxs-lookup"><span data-stu-id="89d97-106">In this tutorial we'll compress the two-page master/detail report of the previous tutorial into a single page, showing a bulleted list of category names on the left side of the screen and the selected category's products on the right of the screen.</span></span>

## <a name="introduction"></a><span data-ttu-id="89d97-107">Giriş</span><span class="sxs-lookup"><span data-stu-id="89d97-107">Introduction</span></span>

<span data-ttu-id="89d97-108">[Yukarıdaki öğreticide](master-detail-filtering-acess-two-pages-datalist-cs.md) , ana/ayrıntı raporunu iki sayfada nasıl ayıracağız.</span><span class="sxs-lookup"><span data-stu-id="89d97-108">In the [preceding tutorial](master-detail-filtering-acess-two-pages-datalist-cs.md) we looked at how to separate a master/detail report across two pages.</span></span> <span data-ttu-id="89d97-109">Ana sayfada, madde işaretli kategori listesini işlemek için bir yineleyici denetimi kullandık.</span><span class="sxs-lookup"><span data-stu-id="89d97-109">In the master page we used a Repeater control to render a bulleted list of categories.</span></span> <span data-ttu-id="89d97-110">Her kategori adı, tıklandığı zaman, kullanıcıyı, iki sütunlu bir DataList 'in seçili kategoriye ait bu ürünleri gösteren ayrıntılar sayfasına götürebileceği bir köprüdür.</span><span class="sxs-lookup"><span data-stu-id="89d97-110">Each category name was a hyperlink that, when clicked, would take the user to the details page, where a two-column DataList showed those products belonging to the selected category.</span></span>

<span data-ttu-id="89d97-111">Bu öğreticide, iki sayfalı öğreticiyi tek bir sayfada sıkıştıracağız ve her kategori adı bir LinkButton olarak işlenilerek ekranın sol tarafındaki kategori adlarından oluşan bir liste listesi gösteriliyor.</span><span class="sxs-lookup"><span data-stu-id="89d97-111">In this tutorial we'll compress the two-page tutorial into a single page, showing a bulleted list of category names on the left side of the screen with each category name rendered as a LinkButton.</span></span> <span data-ttu-id="89d97-112">Bir geri gönderinin bulunduğu kategori adı bağlantı düğmelerinden birine tıkladığınızda seçili kategori ürünlerini ekranın sağ tarafında iki sütunlu bir DataList 'e bağlar.</span><span class="sxs-lookup"><span data-stu-id="89d97-112">Clicking one of the category name LinkButtons induces a postback and binds the selected category s products to a two-column DataList on the right of the screen.</span></span> <span data-ttu-id="89d97-113">Her bir kategorinin adını görüntülemenin yanı sıra, soldaki Yineleyici belirli bir kategori için kaç tane toplam ürünün olduğunu gösterir (bkz. Şekil 1).</span><span class="sxs-lookup"><span data-stu-id="89d97-113">In addition to displaying each category s name, the Repeater on the left shows how many total products there are for a given category (see Figure 1).</span></span>

<span data-ttu-id="89d97-114">[![kategori adı ve toplam ürün sayısı solda görüntülenir](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image2.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="89d97-114">[![The Category s Name and Total Number of Products are Displayed on the Left](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image2.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image1.png)</span></span>

<span data-ttu-id="89d97-115">**Şekil 1**: Kategori s adı ve toplam ürün sayısı solda görüntülenir ([tam boyutlu görüntüyü görüntülemek için tıklayın](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="89d97-115">**Figure 1**: The Category s Name and Total Number of Products are Displayed on the Left ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image3.png))</span></span>

## <a name="step-1-displaying-a-repeater-in-the-left-portion-of-the-screen"></a><span data-ttu-id="89d97-116">1\. Adım: bir yineleyici ekranın sol bölümünde görüntüleme</span><span class="sxs-lookup"><span data-stu-id="89d97-116">Step 1: Displaying a Repeater in the Left Portion of the Screen</span></span>

<span data-ttu-id="89d97-117">Bu öğreticide, seçili kategori ürünlerinin solunda sol tarafta yer alan kategori listesi bulunması gerekir.</span><span class="sxs-lookup"><span data-stu-id="89d97-117">For this tutorial we need to have the bulleted list of categories appear to the left of the selected category s products.</span></span> <span data-ttu-id="89d97-118">Bir Web sayfasındaki içerikler standart HTML öğeleri paragraf etiketleri, bölünemez boşluklar, `<table>` s, vb. veya basamaklı stil sayfası (CSS) teknikleri kullanılarak konumlandırılmış olabilir.</span><span class="sxs-lookup"><span data-stu-id="89d97-118">Content within a web page can be positioned using standard HTML elements paragraph tags, non-breaking spaces, `<table>` s, and so on or through cascading stylesheet (CSS) techniques.</span></span> <span data-ttu-id="89d97-119">Bu nedenle tüm öğreticilerimiz, konumlandırma için CSS tekniklerini kullandı.</span><span class="sxs-lookup"><span data-stu-id="89d97-119">All of our tutorials thus far have used CSS techniques for positioning.</span></span> <span data-ttu-id="89d97-120">Ana [sayfalarda ve site gezinti](../introduction/master-pages-and-site-navigation-cs.md) öğreticisindeki ana sayfamızda Gezinti Kullanıcı arabirimini oluşturduğumuzda, gezinti listesi ve ana içerik için tam piksel sapmasını belirten *mutlak konumlandırmayı*kullandık.</span><span class="sxs-lookup"><span data-stu-id="89d97-120">When we built the navigation user interface in our master page in the [Master Pages and Site Navigation](../introduction/master-pages-and-site-navigation-cs.md) tutorial we used *absolute positioning*, indicating the precise pixel offset for the navigation list and the main content.</span></span> <span data-ttu-id="89d97-121">Alternatif olarak, CSS, bir öğeyi diğerinin sağına veya soluna *kayan*bir şekilde konumlandırmak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="89d97-121">Alternatively, CSS can be used to position one element to the right or left of another through *floating*.</span></span> <span data-ttu-id="89d97-122">Seçilen kategorinin sol tarafında, DataList 'in sol tarafında bulunan Repeater ' ın solunda görünmesini sağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="89d97-122">We can have the bulleted list of categories appear to the left of the selected category s products by floating the Repeater to the left of the DataList</span></span>

<span data-ttu-id="89d97-123">`DataListRepeaterFiltering` klasöründen `CategoriesAndProducts.aspx` sayfasını açın ve bir yineleyici ve DataList sayfasına ekleyin.</span><span class="sxs-lookup"><span data-stu-id="89d97-123">Open the `CategoriesAndProducts.aspx` page from the `DataListRepeaterFiltering` folder and add to the page a Repeater and a DataList.</span></span> <span data-ttu-id="89d97-124">Yineleyicisi `ID`, `CategoryProducts`için `Categories` ve DataList 'leri olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="89d97-124">Set the Repeater s `ID` to `Categories` and the DataList s to `CategoryProducts`.</span></span> <span data-ttu-id="89d97-125">Kaynak görünümüne gidin ve yineleyici ve DataList denetimlerini kendi `<div>` öğelerine yerleştirin.</span><span class="sxs-lookup"><span data-stu-id="89d97-125">Go to the Source view and put the Repeater and DataList controls within their own `<div>` elements.</span></span> <span data-ttu-id="89d97-126">Diğer bir deyişle, Repeater öğesini önce bir `<div>` öğesi ve sonra DataList ' i doğrudan Repeater ' dan sonra kendi `<div>` öğesi içine alın.</span><span class="sxs-lookup"><span data-stu-id="89d97-126">That is, enclose the Repeater within a `<div>` element first and then the DataList in its own `<div>` element directly after the Repeater.</span></span> <span data-ttu-id="89d97-127">Bu noktadaki biçimlerinizin aşağıdakine benzer şekilde görünmesi gerekir:</span><span class="sxs-lookup"><span data-stu-id="89d97-127">Your markup at this point should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample1.aspx)]

<span data-ttu-id="89d97-128">Yineleyicisi 'nin DataList 'in soluna kayan olması için `float` CSS style özniteliğini kullanmanız gerekir, örneğin:</span><span class="sxs-lookup"><span data-stu-id="89d97-128">To float the Repeater to the left of the DataList, we need to use the `float` CSS style attribute, like so:</span></span>

[!code-html[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample2.html)]

<span data-ttu-id="89d97-129">`float: left;` ikinci öğenin solundaki ilk `<div>` öğeyi float.</span><span class="sxs-lookup"><span data-stu-id="89d97-129">The `float: left;` floats the first `<div>` element to the left of the second one.</span></span> <span data-ttu-id="89d97-130">`width` ve `padding-right` ayarları, ilk `<div>` s `width` ve `<div>` öğesi içeriği ve sağ kenar boşluğu arasına ne kadar doldurma ekleneceğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="89d97-130">The `width` and `padding-right` settings indicate the first `<div>` s `width` and how much padding is added between the `<div>` element s content and its right margin.</span></span> <span data-ttu-id="89d97-131">CSS 'deki kayan öğeler hakkında daha fazla bilgi için [Floatutorial](http://css.maxdesign.com.au/floatutorial/)bakın.</span><span class="sxs-lookup"><span data-stu-id="89d97-131">For more information on floating elements in CSS check out the [Floatutorial](http://css.maxdesign.com.au/floatutorial/).</span></span>

<span data-ttu-id="89d97-132">Stil ayarını doğrudan ilk `<p>` öğesi `style` özniteliğiyle belirtmek yerine, bunun yerine `FloatLeft`adlı `Styles.css` yeni bir CSS sınıfı oluşturun:</span><span class="sxs-lookup"><span data-stu-id="89d97-132">Rather than specify the style setting directly through the first `<p>` element s `style` attribute, let s instead create a new CSS class in `Styles.css` named `FloatLeft`:</span></span>

[!code-css[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample3.css)]

<span data-ttu-id="89d97-133">Ardından `<div>` `<div class="FloatLeft">`ile değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="89d97-133">Then we can replace the `<div>` with `<div class="FloatLeft">`.</span></span>

<span data-ttu-id="89d97-134">CSS sınıfını ekledikten ve `CategoriesAndProducts.aspx` sayfasında işaretlemeyi yapılandırdıktan sonra tasarımcıya gidin.</span><span class="sxs-lookup"><span data-stu-id="89d97-134">After adding the CSS class and configuring the markup in the `CategoriesAndProducts.aspx` page, go to the Designer.</span></span> <span data-ttu-id="89d97-135">DataList 'in sol tarafında kayan olan yineleyicisi görmeniz gerekir (Şu anda, henüz veri kaynaklarını veya şablonlarını yapılandırmamız daha sonra yalnızca gri kutular olarak görünür olsa da).</span><span class="sxs-lookup"><span data-stu-id="89d97-135">You should see the Repeater floating to the left of the DataList (although right now both just appear as gray boxes since we ve yet to configure their data sources or templates).</span></span>

<span data-ttu-id="89d97-136">[Yineleyicisi 'nin DataList 'in soluna doğru ![](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image5.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="89d97-136">[![The Repeater is Floated to the Left of the DataList](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image5.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image4.png)</span></span>

<span data-ttu-id="89d97-137">**Şekil 2**: Repeater, DataList 'in soluna eklenir ([tam boyutlu görüntüyü görüntülemek için tıklayın](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="89d97-137">**Figure 2**: The Repeater is Floated to the Left of the DataList ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image6.png))</span></span>

## <a name="step-2-determining-the-number-of-products-for-each-category"></a><span data-ttu-id="89d97-138">2\. Adım: her bir kategorinin ürün sayısını belirleme</span><span class="sxs-lookup"><span data-stu-id="89d97-138">Step 2: Determining the Number of Products for Each Category</span></span>

<span data-ttu-id="89d97-139">Yineleyicileri ve DataList 'i çevreleyen biçimlendirme tamamlandıktan sonra, kategori verilerini Yineleyici denetimine bağlamaya hazırız.</span><span class="sxs-lookup"><span data-stu-id="89d97-139">With the Repeater and DataList s surrounding markup complete, we re ready to bind the category data to the Repeater control.</span></span> <span data-ttu-id="89d97-140">Ancak, Şekil 1 ' deki kategori madde listesi, her bir kategorinin adına ek olarak kategori ile ilişkili ürünlerin sayısını da görüntülemesi gereken her bir kategori için de görünür.</span><span class="sxs-lookup"><span data-stu-id="89d97-140">However, as the bulleted list of categories in Figure 1 shows, in addition to each category s name we also need to display the number of products associated with the category.</span></span> <span data-ttu-id="89d97-141">Bu bilgilere erişmek için şunlardan birini yapabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="89d97-141">To access this information we can either:</span></span>

- <span data-ttu-id="89d97-142">**Bu bilgileri ASP.NET Page s arka plan kod sınıfından öğrenin.**</span><span class="sxs-lookup"><span data-stu-id="89d97-142">**Determine this information from the ASP.NET page s code-behind class.**</span></span> <span data-ttu-id="89d97-143">Belirli bir *`categoryID`* verildiğinde, `ProductsBLL` sınıf s `GetProductsByCategoryID(categoryID)` metodunu çağırarak ilişkili ürünlerin sayısını belirleyebiliriz.</span><span class="sxs-lookup"><span data-stu-id="89d97-143">Given a particular *`categoryID`* we can determine the number of associated products by calling the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="89d97-144">Bu yöntem, `Count` özelliği, belirtilen *`categoryID`* ürünlerin sayısı olan `ProductsRow` kaç tane olduğunu belirten `ProductsDataTable` nesnesini döndürür.</span><span class="sxs-lookup"><span data-stu-id="89d97-144">This method returns a `ProductsDataTable` object whose `Count` property indicates how many `ProductsRow` s exists, which is the number of products for the specified *`categoryID`*.</span></span> <span data-ttu-id="89d97-145">Yineleyici için, Repeater ile bağlantılı her bir kategori için `ProductsBLL` sınıf s `GetProductsByCategoryID(categoryID)` yöntemini çağıran ve çıktıda sayısını içeren bir `ItemDataBound` olay işleyicisi oluşturarız.</span><span class="sxs-lookup"><span data-stu-id="89d97-145">We can create an `ItemDataBound` event handler for the Repeater that, for each category bound to the Repeater, calls the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method and includes its count in the output.</span></span>
- <span data-ttu-id="89d97-146">**Türü belirtilmiş veri kümesindeki `CategoriesDataTable` bir `NumberOfProducts` sütunu içerecek şekilde güncelleştirin.**</span><span class="sxs-lookup"><span data-stu-id="89d97-146">**Update the `CategoriesDataTable` in the Typed DataSet to include a `NumberOfProducts` column.**</span></span> <span data-ttu-id="89d97-147">Daha sonra bu bilgileri eklemek için `CategoriesDataTable` `GetCategories()` yöntemini güncelleştirebilir veya `GetCategories()` olduğu gibi bırakabilir ve `GetCategoriesAndNumberOfProducts()`adlı yeni bir `CategoriesDataTable` yöntemi oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="89d97-147">We can then update the `GetCategories()` method in the `CategoriesDataTable` to include this information or, alternatively, leave `GetCategories()` as-is and create a new `CategoriesDataTable` method called `GetCategoriesAndNumberOfProducts()`.</span></span>

<span data-ttu-id="89d97-148">Bu tekniklerin her ikisini de keşfedelim.</span><span class="sxs-lookup"><span data-stu-id="89d97-148">Let s explore both of these techniques.</span></span> <span data-ttu-id="89d97-149">Veri erişim katmanını güncelleştirmek zorunda olduğumuz için ilk yaklaşım uygulamanız daha basittir; Bununla birlikte, veritabanıyla daha fazla iletişim gerektirir.</span><span class="sxs-lookup"><span data-stu-id="89d97-149">The first approach is simpler to implement since we don t need to update the Data Access Layer; however, it requires more communications with the database.</span></span> <span data-ttu-id="89d97-150">`ItemDataBound` olay işleyicisindeki `ProductsBLL` Class s `GetProductsByCategoryID(categoryID)` yöntemine yapılan çağrı, Repeater ' da görünen her bir kategori için ek bir veritabanı çağrısı ekler.</span><span class="sxs-lookup"><span data-stu-id="89d97-150">The call to the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method in the `ItemDataBound` event handler adds an extra database call for each category displayed in the Repeater.</span></span> <span data-ttu-id="89d97-151">Bu teknikle, n *+ 1 veritabanı çağrısı vardır;* burada *n* , yineleyici içinde görüntülenen kategorilerin sayısıdır.</span><span class="sxs-lookup"><span data-stu-id="89d97-151">With this technique there are *N* + 1 database calls, where *N* is the number of categories displayed in the Repeater.</span></span> <span data-ttu-id="89d97-152">İkinci yaklaşımla, ürün sayısı `CategoriesBLL` sınıf s `GetCategories()` (veya `GetCategoriesAndNumberOfProducts()`) yönteminden her bir kategori hakkında bilgi ile döndürülür ve bu sayede veritabanına bir yolculuğa neden olur.</span><span class="sxs-lookup"><span data-stu-id="89d97-152">With the second approach, the product count is returned with information about each category from the `CategoriesBLL` class s `GetCategories()` (or `GetCategoriesAndNumberOfProducts()`) method, thereby resulting in just one trip to the database.</span></span>

## <a name="determining-the-number-of-products-in-the-itemdatabound-event-handler"></a><span data-ttu-id="89d97-153">Itemveriye bağlı olay Işleyicisindeki ürünlerin sayısını belirleme</span><span class="sxs-lookup"><span data-stu-id="89d97-153">Determining the Number of Products in the ItemDataBound Event Handler</span></span>

<span data-ttu-id="89d97-154">Yineleyici s `ItemDataBound` olay işleyicisindeki her bir kategorinin ürün sayısını belirlemek, var olan veri erişim katmanımız üzerinde herhangi bir değişiklik yapılmasını gerektirmez.</span><span class="sxs-lookup"><span data-stu-id="89d97-154">Determining the number of products for each category in the Repeater s `ItemDataBound` event handler does not require any modifications to our existing Data Access Layer.</span></span> <span data-ttu-id="89d97-155">Tüm değişiklikler doğrudan `CategoriesAndProducts.aspx` sayfası içinde yapılabilir.</span><span class="sxs-lookup"><span data-stu-id="89d97-155">All modifications can be made directly within the `CategoriesAndProducts.aspx` page.</span></span> <span data-ttu-id="89d97-156">Yineleyici s akıllı etiketi aracılığıyla `CategoriesDataSource` adlı yeni bir ObjectDataSource ekleyerek başlayın.</span><span class="sxs-lookup"><span data-stu-id="89d97-156">Start by adding a new ObjectDataSource named `CategoriesDataSource` via the Repeater s smart tag.</span></span> <span data-ttu-id="89d97-157">Sonra, `CategoriesBLL` sınıf s `GetCategories()` yönteminden verilerini alması için `CategoriesDataSource` ObjectDataSource 'u yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="89d97-157">Next, configure the `CategoriesDataSource` ObjectDataSource so that it retrieves its data from the `CategoriesBLL` class s `GetCategories()` method.</span></span>

<span data-ttu-id="89d97-158">[![, CategoriesBLL sınıfı s GetCategories () yöntemini kullanmak için ObjectDataSource 'ı yapılandırma](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image8.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="89d97-158">[![Configure the ObjectDataSource to Use the CategoriesBLL class s GetCategories() Method](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image8.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image7.png)</span></span>

<span data-ttu-id="89d97-159">**Şekil 3**: `CategoriesBLL` sınıf s `GetCategories()` metodunu ([tam boyutlu görüntüyü görüntülemek Için tıklayın](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image9.png)) kullanmak üzere ObjectDataSource 'ı yapılandırın</span><span class="sxs-lookup"><span data-stu-id="89d97-159">**Figure 3**: Configure the ObjectDataSource to Use the `CategoriesBLL` class s `GetCategories()` Method ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image9.png))</span></span>

<span data-ttu-id="89d97-160">`Categories` Yineleyici içindeki her öğenin tıklatılabilir olması gerekir ve tıklandığında, `CategoryProducts` DataList 'in seçili kategori için bu ürünleri görüntülemesine neden olur.</span><span class="sxs-lookup"><span data-stu-id="89d97-160">Each item in the `Categories` Repeater needs to be clickable and, when clicked, cause the `CategoryProducts` DataList to display those products for the selected category.</span></span> <span data-ttu-id="89d97-161">Bu, her kategoriye bir köprü yapılarak, aynı sayfaya (`CategoriesAndProducts.aspx`) bağlanarak ve önceki öğreticide gördüğdiğimiz gibi QueryString aracılığıyla `CategoryID` geçirerek gerçekleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="89d97-161">This can be accomplished by making each category a hyperlink, linking back to this same page (`CategoriesAndProducts.aspx`), but passing the `CategoryID` through the querystring, much like we saw in the previous tutorial.</span></span> <span data-ttu-id="89d97-162">Bu yaklaşımın avantajı, belirli bir kategorinin ürünlerini görüntüleyen bir sayfanın, bir arama altyapısı tarafından yer işareti eklenmiş ve dizine alınmış olması olabilir.</span><span class="sxs-lookup"><span data-stu-id="89d97-162">The advantage of this approach is that a page displaying a particular category s products can be bookmarked and indexed by a search engine.</span></span>

<span data-ttu-id="89d97-163">Alternatif olarak, her bir kategoriyi Bu öğreticide kullanacağımız yaklaşım olan bir LinkButton yapabiliriz.</span><span class="sxs-lookup"><span data-stu-id="89d97-163">Alternatively, we can make each category a LinkButton, which is the approach we'll use for this tutorial.</span></span> <span data-ttu-id="89d97-164">LinkButton Kullanıcı tarayıcısında köprü olarak işlenir, ancak tıklandığı zaman geri gönderme yapılır; geri gönderme sırasında, DataList s ObjectDataSource 'un seçili kategoriye ait ürünleri görüntülemesi için yenilenmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="89d97-164">The LinkButton renders in the user s browser as a hyperlink but, when clicked, induces a postback; on postback, the DataList s ObjectDataSource needs to be refreshed to display those products belonging to the selected category.</span></span> <span data-ttu-id="89d97-165">Bu öğreticide, bir köprü kullanmak LinkButton kullanmaktan daha mantıklı olur; Ancak, LinkButton kullanmanın daha avantajlı olduğu başka senaryolar da olabilir.</span><span class="sxs-lookup"><span data-stu-id="89d97-165">For this tutorial, using a hyperlink makes more sense than using a LinkButton; however, there may be other scenarios where using a LinkButton is more advantageous.</span></span> <span data-ttu-id="89d97-166">Köprü yaklaşımı Bu örnek için ideal olacaktır, bunun yerine LinkButton öğesini kullanmayı göz atalım.</span><span class="sxs-lookup"><span data-stu-id="89d97-166">While the hyperlink approach would be ideal for this example, let s instead explore using the LinkButton.</span></span> <span data-ttu-id="89d97-167">Göreceğiniz gibi, LinkButton 'ın kullanılması, bir köprüyle sonuçlanmayacak bazı güçlükleri ortaya koymaktadır.</span><span class="sxs-lookup"><span data-stu-id="89d97-167">As we'll see, using a LinkButton introduces some challenges that would not otherwise arise with a hyperlink.</span></span> <span data-ttu-id="89d97-168">Bu nedenle, bu öğreticide bir LinkButton kullanılması bu zorlukları vurgulayacak ve köprü yerine LinkButton kullanmak isteyebileceğiniz senaryolar için çözüm sağlamaya yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="89d97-168">Therefore, using a LinkButton in this tutorial will highlight these challenges and help provide solutions for those scenarios where we may want to use a LinkButton instead of a hyperlink.</span></span>

> [!NOTE]
> <span data-ttu-id="89d97-169">Bu öğreticiyi, LinkButton yerine bir HyperLink denetimi veya `<a>` öğesi kullanarak tekrarlamanız önerilir.</span><span class="sxs-lookup"><span data-stu-id="89d97-169">You are encouraged to repeat this tutorial using a HyperLink control or `<a>` element in lieu of the LinkButton.</span></span>

<span data-ttu-id="89d97-170">Aşağıdaki biçimlendirme yineleyici ve ObjectDataSource için bildirime dayalı sözdizimini gösterir.</span><span class="sxs-lookup"><span data-stu-id="89d97-170">The following markup shows the declarative syntax for the Repeater and the ObjectDataSource.</span></span> <span data-ttu-id="89d97-171">Yineleyicisi 'nin şablonlarının her öğe için LinkButton olarak bir madde işaretli liste işlemesini unutmayın:</span><span class="sxs-lookup"><span data-stu-id="89d97-171">Note that the Repeater s templates render a bulleted list with each item as a LinkButton:</span></span>

[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample4.aspx)]

> [!NOTE]
> <span data-ttu-id="89d97-172">Bu öğreticide, Repeater 'ın görünüm durumunun etkin olması gerekir (`EnableViewState="False"` yineleyicisi 'nin bildirime dayalı sözdiziminden atlandığını aklınızda).</span><span class="sxs-lookup"><span data-stu-id="89d97-172">For this tutorial the Repeater must have its view state enabled (note the omission of the `EnableViewState="False"` from the Repeater s declarative syntax).</span></span> <span data-ttu-id="89d97-173">3\. adımda, DataList s ObjectDataSource s `SelectParameters` koleksiyonunu güncelleştirilebilmemiz için Yineleyici s `ItemCommand` olayı için bir olay işleyicisi oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="89d97-173">In step 3 we'll be creating an event handler for the Repeater s `ItemCommand` event in which we'll be updating the DataList s ObjectDataSource s `SelectParameters` collection.</span></span> <span data-ttu-id="89d97-174">Yineleyiciye `ItemCommand`, ancak görünüm durumu devre dışıysa tetiklenmeyecektir.</span><span class="sxs-lookup"><span data-stu-id="89d97-174">The Repeater s `ItemCommand`, however, won't fire if view state is disabled.</span></span> <span data-ttu-id="89d97-175">Bir yineleyici s `ItemCommand` olayının tetiklenmesi için neden görünüm durumunun etkin olması gerektiğini öğrenmek için ASP.NET sorusunun ve [çözümünün](http://scottonwriting.net/sowBlog/posts/1268.aspx) [bir bölümünü](http://scottonwriting.net/sowblog/posts/1263.aspx) inceleyin.</span><span class="sxs-lookup"><span data-stu-id="89d97-175">See [A Stumper of an ASP.NET Question](http://scottonwriting.net/sowblog/posts/1263.aspx) and [its solution](http://scottonwriting.net/sowBlog/posts/1268.aspx) for more information on why view state must be enabled for a Repeater s `ItemCommand` event to fire.</span></span>

<span data-ttu-id="89d97-176">`ViewCategory` `ID` özellik değerine sahip LinkButton, `Text` özellik kümesine sahip değil.</span><span class="sxs-lookup"><span data-stu-id="89d97-176">The LinkButton with the `ID` property value of `ViewCategory` does not have its `Text` property set.</span></span> <span data-ttu-id="89d97-177">Kategori adını yalnızca göstermek istiyorduk, metin özelliğini bildirimli olarak, veri bağlama söz dizimi ile şöyle ayarlayacağız:</span><span class="sxs-lookup"><span data-stu-id="89d97-177">If we had just wanted to display the category name, we would have set the Text property declaratively, through databinding syntax, like so:</span></span>

[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample5.aspx)]

<span data-ttu-id="89d97-178">Ancak, hem *kategori adını hem de söz* konusu kategoriye ait ürünlerin sayısını göstermek istiyoruz.</span><span class="sxs-lookup"><span data-stu-id="89d97-178">However, we want to show both the category s name *and* the number of products belonging to that category.</span></span> <span data-ttu-id="89d97-179">Bu bilgiler, aşağıdaki kodda gösterildiği gibi, `ProductBLL` sınıf s `GetCategoriesByProductID(categoryID)` yöntemine çağrı yaparak ve sonuçta elde edilen `ProductsDataTable`kaç kayıt döndürüldüğünü belirleyerek Yineleyici s `ItemDataBound` olay işleyicisinden elde edilebilir:</span><span class="sxs-lookup"><span data-stu-id="89d97-179">This information can be retrieved from the Repeater s `ItemDataBound` event handler by making a call to the `ProductBLL` class s `GetCategoriesByProductID(categoryID)` method and determining how many records are returned in the resulting `ProductsDataTable`, as the following code illustrates:</span></span>

[!code-csharp[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample6.cs)]

<span data-ttu-id="89d97-180">Bir veri öğesiyle (`ItemType` `Item` veya `AlternatingItem`) çalıştık ve sonra geçerli `RepeaterItem`zaten bağlanan `CategoriesRow` örneğine başvuru yaptığımız olduğundan emin olarak başladık.</span><span class="sxs-lookup"><span data-stu-id="89d97-180">We start out by ensuring that we re working with a data item (one whose `ItemType` is `Item` or `AlternatingItem`) and then reference the `CategoriesRow` instance that has just been bound to the current `RepeaterItem`.</span></span> <span data-ttu-id="89d97-181">Daha sonra, `ProductsBLL` sınıfının bir örneğini oluşturarak, `GetCategoriesByProductID(categoryID)` metodunu çağırarak ve `Count` özelliği kullanılarak döndürülen kayıt sayısını belirleyerek bu kategoriye yönelik ürünlerin sayısını belirliyoruz.</span><span class="sxs-lookup"><span data-stu-id="89d97-181">Next, we determine the number of products for this category by creating an instance of the `ProductsBLL` class, calling its `GetCategoriesByProductID(categoryID)` method, and determining the number of records returned using the `Count` property.</span></span> <span data-ttu-id="89d97-182">Son olarak, ItemTemplate 'teki `ViewCategory` LinkButton, `Text` özelliği *CategoryName* (*numberofproductsincategory*) olarak ayarlanır ve burada *numberofproductsincategory* sıfır ondalık basamakla bir sayı olarak biçimlendirilir.</span><span class="sxs-lookup"><span data-stu-id="89d97-182">Finally, the `ViewCategory` LinkButton in the ItemTemplate is references and its `Text` property is set to *CategoryName* (*NumberOfProductsInCategory*), where *NumberOfProductsInCategory* is formatted as a number with zero decimal places.</span></span>

> [!NOTE]
> <span data-ttu-id="89d97-183">Alternatif olarak, kategori s `CategoryName` ve `CategoryID` değerlerini kabul eden ve kategori içindeki ürünlerin sayısıyla birleştirilmiş `CategoryName` döndüren (`GetCategoriesByProductID(categoryID)` yöntemi çağırarak belirlendiği şekilde) bir *biçimlendirme işlevi* ekledik.</span><span class="sxs-lookup"><span data-stu-id="89d97-183">Alternatively, we could have added a *formatting function* to the ASP.NET page s code-behind class that accepts a category s `CategoryName` and `CategoryID` values and returns the `CategoryName` concatenated with the number of products in the category (as determined by calling the `GetCategoriesByProductID(categoryID)` method).</span></span> <span data-ttu-id="89d97-184">Bu tür biçimlendirme işlevinin sonuçları, `ItemDataBound` olay işleyicisi gereksinimini değiştiren LinkButton s Text özelliğine bildirimli olarak atanabilir.</span><span class="sxs-lookup"><span data-stu-id="89d97-184">The results of such a formatting function could be declaratively assigned to the LinkButton s Text property replacing the need for the `ItemDataBound` event handler.</span></span> <span data-ttu-id="89d97-185">Biçimlendirme işlevlerini kullanma hakkında daha fazla bilgi için [, GridView denetimindeki TemplateFields kullanma](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) veya veri öğreticilerine [göre DataList ve Repeater 'ı biçimlendirme](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="89d97-185">Refer to the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) or [Formatting the DataList and Repeater Based Upon Data](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md) tutorials for more information on using formatting functions.</span></span>

<span data-ttu-id="89d97-186">Bu olay işleyicisini ekledikten sonra sayfayı bir tarayıcı ile test etmek için bir dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="89d97-186">After adding this event handler, take a moment to test the page through a browser.</span></span> <span data-ttu-id="89d97-187">Her kategorinin bir madde işaretli listede nasıl listelendiğine, kategori adı ve kategori ile ilişkili ürün sayısının görüntülenmesine bakın (bkz. Şekil 4).</span><span class="sxs-lookup"><span data-stu-id="89d97-187">Note how each category is listed in a bulleted list, displaying the category s name and the number of products associated with the category (see Figure 4).</span></span>

<span data-ttu-id="89d97-188">[Her kategorinin adı ve ürün sayısı ![görüntülenir](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image11.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="89d97-188">[![Each Category s Name and Number of Products are Displayed](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image11.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image10.png)</span></span>

<span data-ttu-id="89d97-189">**Şekil 4**: her kategori adı ve ürün sayısı görüntülenir ([tam boyutlu görüntüyü görüntülemek için tıklayın](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="89d97-189">**Figure 4**: Each Category s Name and Number of Products are Displayed ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image12.png))</span></span>

## <a name="updating-thecategoriesdatatableandcategoriestableadapterto-include-the-number-of-products-for-each-category"></a><span data-ttu-id="89d97-190">`CategoriesDataTable`ve`CategoriesTableAdapter`her bir kategorinin ürün sayısını Içerecek şekilde güncelleştiriliyor</span><span class="sxs-lookup"><span data-stu-id="89d97-190">Updating the`CategoriesDataTable`and`CategoriesTableAdapter`to Include the Number of Products for Each Category</span></span>

<span data-ttu-id="89d97-191">Yineleyicisi 'ne bağladığından her bir kategorinin ürün sayısını belirlemek yerine, bu bilgileri yerel olarak dahil etmek üzere veri erişim katmanındaki `CategoriesDataTable` ve `CategoriesTableAdapter` ayarlayarak bu işlemi kolaylaştırabilir.</span><span class="sxs-lookup"><span data-stu-id="89d97-191">Rather than determining the number of products for each category as it s bound to the Repeater, we can streamline this process by adjusting the `CategoriesDataTable` and `CategoriesTableAdapter` in the Data Access Layer to include this information natively.</span></span> <span data-ttu-id="89d97-192">Bunu başarmak için, ilişkili ürünlerin sayısını tutmak üzere `CategoriesDataTable` yeni bir sütun eklememiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="89d97-192">To achieve this, we must add a new column to `CategoriesDataTable` to hold the number of associated products.</span></span> <span data-ttu-id="89d97-193">DataTable 'a yeni bir sütun eklemek için, yazılan veri kümesini (`App_Code\DAL\Northwind.xsd`) açın, değiştirilecek DataTable öğesine sağ tıklayın ve Ekle/sütun ' u seçin.</span><span class="sxs-lookup"><span data-stu-id="89d97-193">To add a new column to a DataTable, open the Typed DataSet (`App_Code\DAL\Northwind.xsd`), right-click on the DataTable to modify, and choose Add / Column.</span></span> <span data-ttu-id="89d97-194">`CategoriesDataTable` yeni bir sütun ekleyin (bkz. Şekil 5).</span><span class="sxs-lookup"><span data-stu-id="89d97-194">Add a new column to the `CategoriesDataTable` (see Figure 5).</span></span>

<span data-ttu-id="89d97-195">[Kategorilerverikaynağına yeni bir sütun eklemek ![](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image14.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="89d97-195">[![Add a New Column to the CategoriesDataSource](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image14.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image13.png)</span></span>

<span data-ttu-id="89d97-196">**Şekil 5**: `CategoriesDataSource` yeni bir sütun ekleyin ([tam boyutlu görüntüyü görüntülemek için tıklayın](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="89d97-196">**Figure 5**: Add a New Column to the `CategoriesDataSource` ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image15.png))</span></span>

<span data-ttu-id="89d97-197">Bu, yalnızca farklı bir ada yazarak değiştirebileceğiniz `Column1`adlı yeni bir sütun ekler.</span><span class="sxs-lookup"><span data-stu-id="89d97-197">This will add a new column named `Column1`, which you can change by simply typing in a different name.</span></span> <span data-ttu-id="89d97-198">Bu yeni sütunu `NumberOfProducts`olarak yeniden adlandırın.</span><span class="sxs-lookup"><span data-stu-id="89d97-198">Rename this new column to `NumberOfProducts`.</span></span> <span data-ttu-id="89d97-199">Daha sonra, bu sütun özelliklerini yapılandırmamız gerekir.</span><span class="sxs-lookup"><span data-stu-id="89d97-199">Next, we need to configure this column s properties.</span></span> <span data-ttu-id="89d97-200">Yeni sütununa tıklayın ve Özellikler penceresi gidin.</span><span class="sxs-lookup"><span data-stu-id="89d97-200">Click on the new column and go to the Properties window.</span></span> <span data-ttu-id="89d97-201">Şekil 6 ' da gösterildiği gibi, sütun s `DataType` özelliğini `System.String` `System.Int32` olarak değiştirin ve `ReadOnly` özelliğini `True`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="89d97-201">Change the column s `DataType` property from `System.String` to `System.Int32` and set the `ReadOnly` property to `True`, as shown in Figure 6.</span></span>

![Yeni sütunun DataType ve ReadOnly özelliklerini ayarla](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image16.png)

<span data-ttu-id="89d97-203">**Şekil 6**: yeni sütunun `DataType` ve `ReadOnly` özelliklerini ayarlayın</span><span class="sxs-lookup"><span data-stu-id="89d97-203">**Figure 6**: Set the `DataType` and `ReadOnly` Properties of the New Column</span></span>

<span data-ttu-id="89d97-204">`CategoriesDataTable` artık bir `NumberOfProducts` sütununa sahip olsa da, değeri karşılık gelen herhangi bir TableAdapter s sorgusunun hiçbirinde ayarlı değildir.</span><span class="sxs-lookup"><span data-stu-id="89d97-204">While the `CategoriesDataTable` now has a `NumberOfProducts` column, its value is not set by any of the corresponding TableAdapter s queries.</span></span> <span data-ttu-id="89d97-205">Kategori bilgilerinin alındığı her seferinde bu bilgilerin döndürülmesini istiyorsanız bu bilgileri döndürmek için `GetCategories()` yöntemini güncelleştirebiliriz.</span><span class="sxs-lookup"><span data-stu-id="89d97-205">We can update the `GetCategories()` method to return this information if we want such information returned every time category information is retrieved.</span></span> <span data-ttu-id="89d97-206">Ancak, nadir örneklerde (yalnızca bu öğreticide olduğu gibi) kategorilerin ilişkili ürün sayısını almak için, `GetCategories()` olduğu gibi bırakabilir ve bu bilgileri döndüren yeni bir yöntem oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="89d97-206">If, however, we only need to grab the number of associated products for the categories in rare instances (such as just for this tutorial), then we can leave `GetCategories()` as-is and create a new method that returns this information.</span></span> <span data-ttu-id="89d97-207">`GetCategoriesAndNumberOfProducts()`adlı yeni bir yöntem oluşturarak bu ikinci yaklaşımı kullanalım.</span><span class="sxs-lookup"><span data-stu-id="89d97-207">Let s use this latter approach, creating a new method named `GetCategoriesAndNumberOfProducts()`.</span></span>

<span data-ttu-id="89d97-208">Bu yeni `GetCategoriesAndNumberOfProducts()` yöntemi eklemek için, `CategoriesTableAdapter` sağ tıklayıp yeni sorgu ' yı seçin.</span><span class="sxs-lookup"><span data-stu-id="89d97-208">To add this new `GetCategoriesAndNumberOfProducts()` method, right-click on the `CategoriesTableAdapter` and choose New Query.</span></span> <span data-ttu-id="89d97-209">Bu, önceki öğreticilerde çok sayıda kez kullandığımız TableAdapter sorgu Yapılandırma Sihirbazı 'nı getirir.</span><span class="sxs-lookup"><span data-stu-id="89d97-209">This brings up the TableAdapter Query Configuration Wizard, which we ve used numerous times in previous tutorials.</span></span> <span data-ttu-id="89d97-210">Bu yöntem için, sorgunun satırları döndüren bir geçici SQL ifadesini kullandığını belirterek sihirbazı başlatın.</span><span class="sxs-lookup"><span data-stu-id="89d97-210">For this method, start the wizard by indicating that the query uses an ad-hoc SQL statement that returns rows.</span></span>

<span data-ttu-id="89d97-211">[![geçici bir SQL Ifadesini kullanarak yöntem oluşturma](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image18.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="89d97-211">[![Create the Method Using an Ad-Hoc SQL Statement](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image18.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image17.png)</span></span>

<span data-ttu-id="89d97-212">**Şekil 7**: GEÇICI bir SQL Ifadesini kullanarak yöntemi oluşturun ([tam boyutlu görüntüyü görüntülemek için tıklayın](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="89d97-212">**Figure 7**: Create the Method Using an Ad-Hoc SQL Statement ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image19.png))</span></span>

<span data-ttu-id="89d97-213">[SQL deyimindeki satırları döndüren ![](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image21.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="89d97-213">[![The SQL Statement Returns Rows](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image21.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image20.png)</span></span>

<span data-ttu-id="89d97-214">**Şekil 8**: SQL Ifadesinin satırları döndürmesi ([tam boyutlu görüntüyü görüntülemek için tıklatın](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="89d97-214">**Figure 8**: The SQL Statement Returns Rows ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image22.png))</span></span>

<span data-ttu-id="89d97-215">Sonraki sihirbaz ekranı, sorgunun kullanması için bizi ister.</span><span class="sxs-lookup"><span data-stu-id="89d97-215">The next wizard screen prompts us for the query to use.</span></span> <span data-ttu-id="89d97-216">Her bir kategorinin `CategoryID`, `CategoryName`ve `Description` alanlarının yanı sıra kategori ile ilişkili ürünlerin sayısını döndürmek için aşağıdaki `SELECT` ifadesini kullanın:</span><span class="sxs-lookup"><span data-stu-id="89d97-216">To return each category s `CategoryID`, `CategoryName`, and `Description` fields, along with the number of products associated with the category, use the following `SELECT` statement:</span></span>

[!code-sql[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample7.sql)]

<span data-ttu-id="89d97-217">[Kullanılacak sorguyu belirtmek ![](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image24.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="89d97-217">[![Specify the Query to Use](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image24.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image23.png)</span></span>

<span data-ttu-id="89d97-218">**Şekil 9**: kullanılacak sorguyu belirtin ([tam boyutlu görüntüyü görüntülemek için tıklayın](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="89d97-218">**Figure 9**: Specify the Query to Use ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image25.png))</span></span>

<span data-ttu-id="89d97-219">Kategorisiyle ilişkili ürün sayısını hesaplayan alt sorgunun `NumberOfProducts`olarak diğer adı olduğunu unutmayın.</span><span class="sxs-lookup"><span data-stu-id="89d97-219">Note that the subquery that computes the number of products associated with the category is aliased as `NumberOfProducts`.</span></span> <span data-ttu-id="89d97-220">Bu adlandırma eşleşmesi, bu alt sorgunun döndürdüğü değerin `CategoriesDataTable` s `NumberOfProducts` sütunuyla ilişkilendirilmesine neden olur.</span><span class="sxs-lookup"><span data-stu-id="89d97-220">This naming match causes the value returned by this subquery to be associated with the `CategoriesDataTable` s `NumberOfProducts` column.</span></span>

<span data-ttu-id="89d97-221">Bu sorguyu girdikten sonra, son adım yeni yöntemin adını seçmekte.</span><span class="sxs-lookup"><span data-stu-id="89d97-221">After entering this query, the last step is to choose the name for the new method.</span></span> <span data-ttu-id="89d97-222">DataTable Fill ve sırasıyla bir DataTable desenleri döndüren `FillWithNumberOfProducts` ve `GetCategoriesAndNumberOfProducts` kullanın.</span><span class="sxs-lookup"><span data-stu-id="89d97-222">Use `FillWithNumberOfProducts` and `GetCategoriesAndNumberOfProducts` for the Fill a DataTable and Return a DataTable patterns, respectively.</span></span>

<span data-ttu-id="89d97-223">[Yeni TableAdapter s yöntemleri FillWithNumberOfProducts ve GetCategoriesAndNumberOfProducts ![adı](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image27.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="89d97-223">[![Name the New TableAdapter s Methods FillWithNumberOfProducts and GetCategoriesAndNumberOfProducts](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image27.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image26.png)</span></span>

<span data-ttu-id="89d97-224">**Şekil 10**: yeni TableAdapter s yöntemlerini `FillWithNumberOfProducts` ve `GetCategoriesAndNumberOfProducts` adlandırın ([tam boyutlu görüntüyü görüntülemek için tıklayın](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="89d97-224">**Figure 10**: Name the New TableAdapter s Methods `FillWithNumberOfProducts` and `GetCategoriesAndNumberOfProducts` ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image28.png))</span></span>

<span data-ttu-id="89d97-225">Bu noktada, veri erişim katmanı kategori başına ürün sayısını içerecek şekilde genişletilmiştir.</span><span class="sxs-lookup"><span data-stu-id="89d97-225">At this point the Data Access Layer has been extended to include the number of products per category.</span></span> <span data-ttu-id="89d97-226">Tüm sunum katmanımız, farklı bir Iş mantığı katmanı aracılığıyla DAL için tüm çağrıları yönlendirdiğinden, `CategoriesBLL` sınıfına karşılık gelen bir `GetCategoriesAndNumberOfProducts` yöntemi eklememiz gerekir:</span><span class="sxs-lookup"><span data-stu-id="89d97-226">Since all our presentation layer routes all calls to the DAL through a separate Business Logic Layer we need to add a corresponding `GetCategoriesAndNumberOfProducts` method to the `CategoriesBLL` class:</span></span>

[!code-csharp[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample8.cs)]

<span data-ttu-id="89d97-227">DAL ve BLL ile, bu verileri `CategoriesAndProducts.aspx``Categories` yineleyicisi 'ne bağlamayı yeniden hazırlarız!</span><span class="sxs-lookup"><span data-stu-id="89d97-227">With the DAL and BLL complete, we re ready to bind this data to the `Categories` Repeater in `CategoriesAndProducts.aspx`!</span></span> <span data-ttu-id="89d97-228">Zaten Yineleyici için `ItemDataBound` olay Işleyicisi bölümünde ürün sayısını belirleme için bir ObjectDataSource oluşturduysanız, bu ObjectDataSource 'u silin ve yineleyici s `DataSourceID` özellik ayarını kaldırın; Ayrıca, ASP.NET arka plan kod sınıfında `Handles Categories.OnItemDataBound` sözdizimini kaldırarak olay işleyicisindeki yineleyicinin `ItemDataBound` olayını kaldırır.</span><span class="sxs-lookup"><span data-stu-id="89d97-228">If you ve already created an ObjectDataSource for the Repeater from the Determining the Number of Products in the `ItemDataBound` Event Handler section, delete this ObjectDataSource and remove the Repeater s `DataSourceID` property setting; also unwire the Repeater s `ItemDataBound` event from the event handler by removing the `Handles Categories.OnItemDataBound` syntax in the ASP.NET code-behind class.</span></span>

<span data-ttu-id="89d97-229">Yineleyici, özgün durumuna geri döndüğünüzde, yineleyici s akıllı etiketi aracılığıyla `CategoriesDataSource` adlı yeni bir ObjectDataSource ekleyin.</span><span class="sxs-lookup"><span data-stu-id="89d97-229">With the Repeater back in its original state, add a new ObjectDataSource named `CategoriesDataSource` via the Repeater s smart tag.</span></span> <span data-ttu-id="89d97-230">ObjectDataSource 'u `CategoriesBLL` sınıfını kullanacak şekilde yapılandırın, ancak bunun yerine `GetCategories()` metodunu kullanmasını sağlamak yerine `GetCategoriesAndNumberOfProducts()` kullanın (bkz. Şekil 11).</span><span class="sxs-lookup"><span data-stu-id="89d97-230">Configure the ObjectDataSource to use the `CategoriesBLL` class, but instead of having it use the `GetCategories()` method, have it use `GetCategoriesAndNumberOfProducts()` instead (see Figure 11).</span></span>

<span data-ttu-id="89d97-231">[![, GetCategoriesAndNumberOfProducts metodunu kullanmak için ObjectDataSource 'u yapılandırma](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image30.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="89d97-231">[![Configure the ObjectDataSource to Use the GetCategoriesAndNumberOfProducts Method](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image30.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image29.png)</span></span>

<span data-ttu-id="89d97-232">**Şekil 11**: `GetCategoriesAndNumberOfProducts` yöntemini kullanmak için ObjectDataSource 'ı yapılandırın ([tam boyutlu görüntüyü görüntülemek için tıklayın](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="89d97-232">**Figure 11**: Configure the ObjectDataSource to Use the `GetCategoriesAndNumberOfProducts` Method ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image31.png))</span></span>

<span data-ttu-id="89d97-233">Daha sonra, LinkButton s `Text` özelliğinin veri bağlama söz dizimi kullanılarak bildirimli olarak atanması ve hem `CategoryName` hem de `NumberOfProducts` veri alanlarını içermesi için `ItemTemplate` güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="89d97-233">Next, update the `ItemTemplate` so that the LinkButton s `Text` property is declaratively assigned using databinding syntax and includes both the `CategoryName` and `NumberOfProducts` data fields.</span></span> <span data-ttu-id="89d97-234">Yineleyici ve `CategoriesDataSource` ObjectDataSource için tüm bildirim temelli biçimlendirme şu şekilde yapılır:</span><span class="sxs-lookup"><span data-stu-id="89d97-234">The complete declarative markup for the Repeater and the `CategoriesDataSource` ObjectDataSource follow:</span></span>

[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample9.aspx)]

<span data-ttu-id="89d97-235">DAL, bir `NumberOfProducts` sütunu içerecek şekilde güncelleştirilerek işlenen çıktı, `ItemDataBound` olay işleyicisi yaklaşımını (kategori adlarını ve ürün sayısını gösteren yineleyicinin ekran görüntüsünü görmek için yeniden) ile aynıdır.</span><span class="sxs-lookup"><span data-stu-id="89d97-235">The output rendered by updating the DAL to include a `NumberOfProducts` column is the same as using the `ItemDataBound` event handler approach (refer back to Figure 4 to see a screen shot of the Repeater showing the category names and number of products).</span></span>

## <a name="step-3-displaying-the-selected-category-s-products"></a><span data-ttu-id="89d97-236">3\. Adım: Seçili Kategori ürünlerini görüntüleme</span><span class="sxs-lookup"><span data-stu-id="89d97-236">Step 3: Displaying the Selected Category s Products</span></span>

<span data-ttu-id="89d97-237">Bu noktada, kategorilerin listesini her bir kategorideki ürünlerin sayısıyla birlikte görüntüleyen `Categories` Yineleyici vardır.</span><span class="sxs-lookup"><span data-stu-id="89d97-237">At this point we have the `Categories` Repeater displaying the list of categories along with the number of products in each category.</span></span> <span data-ttu-id="89d97-238">Yineleyicisi, tıklandığı her bir kategori için bir LinkButton kullanır ve bu aşamada `CategoryProducts` DataList 'te seçili kategori için bu ürünleri görüntülemesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="89d97-238">The Repeater uses a LinkButton for each category that, when clicked, causes a postback, at which point we need to display those products for the selected category in the `CategoryProducts` DataList.</span></span>

<span data-ttu-id="89d97-239">Bizimle ilgili bir zorluk, DataList 'in seçili kategori için yalnızca bu ürünleri görüntülemesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="89d97-239">One challenge facing us is how to have the DataList display just those products for the selected category.</span></span> <span data-ttu-id="89d97-240">[Ayrıntılar DetailsView Ile seçilebilir bir ana GridView kullanan ana/ayrıntı](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) için, seçili satır s ayrıntıları aynı sayfada bir DetailsView 'da görüntülenirken, satırları seçilebilecek bir GridView oluşturmayı gördünüz.</span><span class="sxs-lookup"><span data-stu-id="89d97-240">In the [Master/Detail Using a Selectable Master GridView with a Details DetailsView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) tutorial we saw how to build a GridView whose rows could be selected, with the selected row s details being displayed in a DetailsView on the same page.</span></span> <span data-ttu-id="89d97-241">GridView s ObjectDataSource, `ProductsBLL` s `GetProducts()` yöntemini kullanan tüm ürünlerle ilgili bilgileri geri döndürdü. DetailsView, `GetProductsByProductID(productID)` yöntemi kullanılarak seçili ürünle ilgili bilgiler almıştır.</span><span class="sxs-lookup"><span data-stu-id="89d97-241">The GridView s ObjectDataSource returned information about all products using the `ProductsBLL` s `GetProducts()` method while the DetailsView s ObjectDataSource retrieved information about the selected product using the `GetProductsByProductID(productID)` method.</span></span> <span data-ttu-id="89d97-242">*`productID`* parametre değeri, GridView s `SelectedValue` özelliğinin değeriyle ilişkilendirerek bildirimli olarak sağlandı.</span><span class="sxs-lookup"><span data-stu-id="89d97-242">The *`productID`* parameter value was provided declaratively by associating it with the value of the GridView s `SelectedValue` property.</span></span> <span data-ttu-id="89d97-243">Ne yazık ki, yineleyicisi bir `SelectedValue` özelliğine sahip değildir ve bir parametre kaynağı olarak görev alamaz.</span><span class="sxs-lookup"><span data-stu-id="89d97-243">Unfortunately, the Repeater does not have a `SelectedValue` property and cannot serve as a parameter source.</span></span>

> [!NOTE]
> <span data-ttu-id="89d97-244">Bu, bir yineleyici içinde LinkButton kullanılırken görünen güçlüklerden biridir.</span><span class="sxs-lookup"><span data-stu-id="89d97-244">This is one of those challenges that appear when using the LinkButton in a Repeater.</span></span> <span data-ttu-id="89d97-245">Bunun yerine QueryString aracılığıyla `CategoryID` geçirmek için bir köprü kullandık, bu QueryString alanını parametre değeri için kaynak olarak kullanabiliriz.</span><span class="sxs-lookup"><span data-stu-id="89d97-245">Had we used a hyperlink to pass in the `CategoryID` through the querystring instead, we could use that QueryString field as the source for the parameter s value.</span></span>

<span data-ttu-id="89d97-246">Yineleyicisi için `SelectedValue` özelliğinin bulunmaması konusunda endişelenmemiz için önce DataList 'i bir ObjectDataSource 'a bağlasa ve `ItemTemplate`belirteceğiz.</span><span class="sxs-lookup"><span data-stu-id="89d97-246">Before we worry about the lack of a `SelectedValue` property for the Repeater, though, let s first bind the DataList to an ObjectDataSource and specify its `ItemTemplate`.</span></span>

<span data-ttu-id="89d97-247">DataList s akıllı etiketinden, `CategoryProductsDataSource` adlı yeni bir ObjectDataSource eklemeyi ve `ProductsBLL` sınıf s `GetProductsByCategoryID(categoryID)` metodunu kullanacak şekilde yapılandırmayı tercih edin.</span><span class="sxs-lookup"><span data-stu-id="89d97-247">From the DataList s smart tag, opt to add a new ObjectDataSource named `CategoryProductsDataSource` and configure it to use the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="89d97-248">Bu öğreticideki DataList bir salt okuma arabirimi sağladığından, ekleme, GÜNCELLEŞTIRME ve SILME sekmelerinden (hiçbiri) açılan listeleri ayarlamayı ücretsiz olarak hissetmeniz yeterlidir.</span><span class="sxs-lookup"><span data-stu-id="89d97-248">Since the DataList in this tutorial offers a read-only interface, feel free to set the drop-down lists in the INSERT, UPDATE, and DELETE tabs to (None).</span></span>

<span data-ttu-id="89d97-249">[![, ProductsBLL Class s Getproductsbycategoryıd (CategoryID) metodunu kullanacak şekilde yapılandırma](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image33.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="89d97-249">[![Configure the ObjectDataSource to Use ProductsBLL Class s GetProductsByCategoryID(categoryID) Method](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image33.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image32.png)</span></span>

<span data-ttu-id="89d97-250">**Şekil 12**: `ProductsBLL` Class s `GetProductsByCategoryID(categoryID)` metodunu kullanacak şekilde ObjectDataSource 'ı yapılandırma ([tam boyutlu görüntüyü görüntülemek için tıklayın](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="89d97-250">**Figure 12**: Configure the ObjectDataSource to Use `ProductsBLL` Class s `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image34.png))</span></span>

<span data-ttu-id="89d97-251">`GetProductsByCategoryID(categoryID)` yöntemi bir giriş parametresi ( *`categoryID`* ) beklediği Için, veri kaynağını yapılandırma Sihirbazı, parametre kaynağını belirtmemizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="89d97-251">Since the `GetProductsByCategoryID(categoryID)` method expects an input parameter (*`categoryID`*), the Configure Data Source wizard allows us to specify the parameter s source.</span></span> <span data-ttu-id="89d97-252">Kategorilerin bir GridView veya DataList içinde listelenmesi gerekiyordu. parametre kaynağı açılır listesini, veri Web denetiminin `ID` kontrol etmek ve ControlID olarak ayarlayacağız.</span><span class="sxs-lookup"><span data-stu-id="89d97-252">Had the categories been listed in a GridView or a DataList, we d set the Parameter source drop-down list to Control and the ControlID to the `ID` of the data Web control.</span></span> <span data-ttu-id="89d97-253">Ancak, yineleyicisi bir `SelectedValue` özelliğine sahip olmadığından parametre kaynağı olarak kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="89d97-253">However, since the Repeater lacks a `SelectedValue` property it cannot be used as a parameter source.</span></span> <span data-ttu-id="89d97-254">Onay ederseniz, ControlID açılır listesinin yalnızca bir denetim `ID``CategoryProducts`, DataList 'in `ID` içerdiğini göreceksiniz.</span><span class="sxs-lookup"><span data-stu-id="89d97-254">If you check, you'll find that the ControlID drop-down list only contains one control `ID``CategoryProducts`, the `ID` of the DataList.</span></span>

<span data-ttu-id="89d97-255">Şimdilik, parametre kaynağı açılır listesini hiçbiri olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="89d97-255">For now, set the Parameter source drop-down list to None.</span></span> <span data-ttu-id="89d97-256">Yineleyicisi 'nde bir Category LinkButton tıklandığında bu parametre değerini programlı olarak atamaya başlayacağız.</span><span class="sxs-lookup"><span data-stu-id="89d97-256">We'll end up programmatically assigning this parameter value when a category LinkButton is clicked in the Repeater.</span></span>

<span data-ttu-id="89d97-257">[CategoryID parametresi için bir parametre kaynağı belirtmeyin ![](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image36.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="89d97-257">[![Do Not Specify a Parameter Source for the categoryID Parameter](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image36.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image35.png)</span></span>

<span data-ttu-id="89d97-258">**Şekil 13**: *`categoryID`* parametresi Için bir parametre kaynağı belirtmeyin ([tam boyutlu görüntüyü görüntülemek için tıklayın](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="89d97-258">**Figure 13**: Do Not Specify a Parameter Source for the *`categoryID`* Parameter ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image37.png))</span></span>

<span data-ttu-id="89d97-259">Veri kaynağı Yapılandırma Sihirbazı 'nı tamamladıktan sonra, Visual Studio, DataList s `ItemTemplate`otomatik olarak oluşturur.</span><span class="sxs-lookup"><span data-stu-id="89d97-259">After completing the Configure Data Source wizard, Visual Studio auto-generates the DataList s `ItemTemplate`.</span></span> <span data-ttu-id="89d97-260">Bu varsayılan `ItemTemplate`, önceki öğreticide kullandığımız şablonla değiştirin; Ayrıca, DataList s `RepeatColumns` özelliğini 2 olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="89d97-260">Replace this default `ItemTemplate` with the template we used in the preceding tutorial; also, set the DataList s `RepeatColumns` property to 2.</span></span> <span data-ttu-id="89d97-261">Bu değişiklikleri yaptıktan sonra, DataList 'niz ve ilişkili ObjectDataSource için bildirim temelli biçimlendirme aşağıdaki gibi görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="89d97-261">After making these changes the declarative markup for your DataList and its associated ObjectDataSource should look like the following:</span></span>

[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample10.aspx)]

<span data-ttu-id="89d97-262">Şu anda `CategoryProductsDataSource` ObjectDataSource *`categoryID`* parametresi hiçbir zaman ayarlanmamaktadır, bu nedenle sayfa görüntülenirken hiçbir ürün gösterilmez.</span><span class="sxs-lookup"><span data-stu-id="89d97-262">Currently, the `CategoryProductsDataSource` ObjectDataSource s *`categoryID`* parameter is never set, so no products are displayed when viewing the page.</span></span> <span data-ttu-id="89d97-263">Bu parametre değerinin, yineleyici içindeki tıklanan kategorinin `CategoryID` göre ayarlanmış olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="89d97-263">What we need to do is have this parameter value set based on the `CategoryID` of the clicked category in the Repeater.</span></span> <span data-ttu-id="89d97-264">Bu iki zorluk sergiler: ilk olarak, yineleyici `ItemTemplate` bir LinkButton 'ın ne zaman tıklandığını nasıl belirliyoruz; İkinci olarak, LinkButton 'a tıklandığı karşılık gelen kategorinin `CategoryID` nasıl belirleyebiliriz?</span><span class="sxs-lookup"><span data-stu-id="89d97-264">This introduces two challenges: first, how do we determine when a LinkButton in the Repeater s `ItemTemplate` has been clicked; and second, how can we determine the `CategoryID` of the corresponding category whose LinkButton was clicked?</span></span>

<span data-ttu-id="89d97-265">Düğme ve ImageButton denetimleri gibi LinkButton, bir `Click` olayına ve bir [`Command` olayına](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.command.aspx)sahiptir.</span><span class="sxs-lookup"><span data-stu-id="89d97-265">The LinkButton like the Button and ImageButton controls has a `Click` event and a [`Command` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.command.aspx).</span></span> <span data-ttu-id="89d97-266">`Click` olay, LinkButton öğesine tıklandığına işaret etmek üzere tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="89d97-266">The `Click` event is designed to simply note that the LinkButton has been clicked.</span></span> <span data-ttu-id="89d97-267">Ancak, LinkButton ' ın tıklandığını belirten ek olarak, olay işleyicisine bazı ek bilgiler iletmemiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="89d97-267">At times, however, in addition to noting that the LinkButton has been clicked we also need to pass some extra information to the event handler.</span></span> <span data-ttu-id="89d97-268">Bu durumda, LinkButton s [`CommandName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandname.aspx) ve [`CommandArgument`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandargument.aspx) özelliklerine bu ek bilgiler atanabilir.</span><span class="sxs-lookup"><span data-stu-id="89d97-268">If this is the case, the LinkButton s [`CommandName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandname.aspx) and [`CommandArgument`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandargument.aspx) properties can be assigned this extra information.</span></span> <span data-ttu-id="89d97-269">Daha sonra LinkButton tıklandığında, `Command` olayı başlatılır (`Click` olayı yerine) ve olay işleyicisi `CommandName` ve `CommandArgument` özelliklerinin değerlerini iletilir.</span><span class="sxs-lookup"><span data-stu-id="89d97-269">Then, when the LinkButton is clicked, its `Command` event fires (instead of its `Click` event) and the event handler is passed the values of the `CommandName` and `CommandArgument` properties.</span></span>

<span data-ttu-id="89d97-270">Yineleyicisi içindeki bir şablon içinden `Command` bir olay tetiklendiğinde, Repeater s [`ItemCommand` olayı](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeater.itemcommand.aspx) ateşlenir ve tıklanan LinkButton (veya Button veya ImageButton) `CommandName` ve `CommandArgument` değerleri geçirilir.</span><span class="sxs-lookup"><span data-stu-id="89d97-270">When a `Command` event is raised from within a template in the Repeater, the Repeater s [`ItemCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeater.itemcommand.aspx) fires and is passed the `CommandName` and `CommandArgument` values of the clicked LinkButton (or Button or ImageButton).</span></span> <span data-ttu-id="89d97-271">Bu nedenle, yineleyici içindeki bir kategori LinkButton 'ın ne zaman tıklandığını anlamak için aşağıdakileri yapmanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="89d97-271">Therefore, to determine when a category LinkButton in the Repeater has been clicked, we need to do the following:</span></span>

1. <span data-ttu-id="89d97-272">Repeater s `ItemTemplate` LinkButton 'ın `CommandName` özelliğini bir değere ayarlayın (ListProducts kullandım).</span><span class="sxs-lookup"><span data-stu-id="89d97-272">Set the `CommandName` property of the LinkButton in the Repeater s `ItemTemplate` to some value (I ve used ListProducts ).</span></span> <span data-ttu-id="89d97-273">Bu `CommandName` değerini ayarlayarak LinkButton s `Command` olayı LinkButton tıklandığında ateşlenir.</span><span class="sxs-lookup"><span data-stu-id="89d97-273">By setting this `CommandName` value, the LinkButton s `Command` event fires when the LinkButton is clicked.</span></span>
2. <span data-ttu-id="89d97-274">LinkButton s `CommandArgument` özelliğini geçerli öğe s `CategoryID`değerine ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="89d97-274">Set the LinkButton s `CommandArgument` property to the value of the current item s `CategoryID`.</span></span>
3. <span data-ttu-id="89d97-275">Yineleyici s `ItemCommand` olayı için bir olay işleyicisi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="89d97-275">Create an event handler for the Repeater s `ItemCommand` event.</span></span> <span data-ttu-id="89d97-276">Olay işleyicisinde `CategoryProductsDataSource` ObjectDataSource s `CategoryID` parametresini, geçirilen `CommandArgument`değerine ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="89d97-276">In the event handler, set the `CategoryProductsDataSource` ObjectDataSource s `CategoryID` parameter to the value of the passed-in `CommandArgument`.</span></span>

<span data-ttu-id="89d97-277">Yineleyici kategoriler için aşağıdaki `ItemTemplate` biçimlendirmesi 1 ve 2. adımları uygular.</span><span class="sxs-lookup"><span data-stu-id="89d97-277">The following `ItemTemplate` markup for the Categories Repeater implements steps 1 and 2.</span></span> <span data-ttu-id="89d97-278">`CommandArgument` değere veri bağlama söz dizimi kullanılarak `CategoryID` veri öğesi için nasıl atandığını aklınızda kullanın:</span><span class="sxs-lookup"><span data-stu-id="89d97-278">Note how the `CommandArgument` value is assigned the data item s `CategoryID` using databinding syntax:</span></span>

[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample11.aspx)]

<span data-ttu-id="89d97-279">`ItemCommand` olay işleyicisi oluştururken, yineleyici içinde *herhangi* bir düğme, LinkButton veya ImageButton tarafından oluşturulan *herhangi bir* `Command` olayı `ItemCommand` olayının tetiklenmesine neden olacağı için, her zaman ilk önce gelen `CommandName` değerini denetleyemedi.</span><span class="sxs-lookup"><span data-stu-id="89d97-279">Whenever creating an `ItemCommand` event handler it is prudent to always first check the incoming `CommandName` value because *any* `Command` event raised by *any* Button, LinkButton, or ImageButton within the Repeater will cause the `ItemCommand` event to fire.</span></span> <span data-ttu-id="89d97-280">Şu anda yalnızca bir LinkButton 'a Şu anda sahipsiniz (veya ekibimizin başka bir geliştirici), tıklandığı zaman aynı `ItemCommand` olay işleyicisini oluşturan Yineleyici için ek düğme Web denetimleri ekleyebilirler.</span><span class="sxs-lookup"><span data-stu-id="89d97-280">While we currently only have one such LinkButton now, in the future we (or another developer on our team) might add additional button Web controls to the Repeater that, when clicked, raises the same `ItemCommand` event handler.</span></span> <span data-ttu-id="89d97-281">Bu nedenle, `CommandName` özelliğini her zaman denetlediğinizden ve yalnızca beklenen değerle eşleşiyorsa programlama mantığınızla devam eden en iyi seçenektir.</span><span class="sxs-lookup"><span data-stu-id="89d97-281">Therefore, it s best to always make sure you check the `CommandName` property and only proceed with your programmatic logic if it matches up to the value expected.</span></span>

<span data-ttu-id="89d97-282">Geçirilen `CommandName` değerinin ListProducts 'a eşit olduğundan emin olduktan sonra olay işleyicisi, `CategoryProductsDataSource` ObjectDataSource s `CategoryID` parametresini geçirilen `CommandArgument`değerine atar.</span><span class="sxs-lookup"><span data-stu-id="89d97-282">After ensuring that the passed-in `CommandName` value equals ListProducts, the event handler then assigns the `CategoryProductsDataSource` ObjectDataSource s `CategoryID` parameter to the value of the passed-in `CommandArgument`.</span></span> <span data-ttu-id="89d97-283">`SelectParameters` ObjectDataSource 'ta bu değişiklik otomatik olarak DataList 'in kendisini veri kaynağına yeniden bağlamasını ve yeni seçilen kategorinin ürünlerini göstermesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="89d97-283">This modification to the ObjectDataSource s `SelectParameters` automatically causes the DataList to rebind itself to the data source, showing the products for the newly selected category.</span></span>

[!code-csharp[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample12.cs)]

<span data-ttu-id="89d97-284">Bu eklemeler sayesinde öğreticimiz tamamlanmıştır!</span><span class="sxs-lookup"><span data-stu-id="89d97-284">With these additions, our tutorial is complete!</span></span> <span data-ttu-id="89d97-285">Bir tarayıcıda test etmek için bir dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="89d97-285">Take a moment to test it out in a browser.</span></span> <span data-ttu-id="89d97-286">Şekil 14, sayfayı ilk ziyaret eden ekranı gösterir.</span><span class="sxs-lookup"><span data-stu-id="89d97-286">Figure 14 shows the screen when first visiting the page.</span></span> <span data-ttu-id="89d97-287">Bir kategori henüz seçilememiştir, hiçbir ürün gösterilmez.</span><span class="sxs-lookup"><span data-stu-id="89d97-287">Since a category has yet to be selected, no products are displayed.</span></span> <span data-ttu-id="89d97-288">Bir kategoriye tıkladığınızda (örneğin,), ürün kategorisindeki bu ürünleri iki sütunlu görünümde görüntüler (bkz. Şekil 15).</span><span class="sxs-lookup"><span data-stu-id="89d97-288">Clicking on a category, such as Produce, displays those products in the Product category in a two-column view (see Figure 15).</span></span>

<span data-ttu-id="89d97-289">[![sayfa Ilk ziyaret edildiğinde hiçbir ürün gösterilmez](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image39.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="89d97-289">[![No Products are Displayed When First Visiting the Page](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image39.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image38.png)</span></span>

<span data-ttu-id="89d97-290">**Şekil 14**: sayfa Ilk ziyaret edildiğinde hiçbir ürün gösterilmez ([tam boyutlu görüntüyü görüntülemek için tıklayın](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="89d97-290">**Figure 14**: No Products are Displayed When First Visiting the Page ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image40.png))</span></span>

<span data-ttu-id="89d97-291">[Üretim kategorisine tıklanması ![, doğru eşleşen ürünleri listeler](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image42.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="89d97-291">[![Clicking the Produce Category Lists the Matching Products to the Right](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image42.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image41.png)</span></span>

<span data-ttu-id="89d97-292">**Şekil 15**: üretim kategorisine tıkladığınızda sağdaki eşleşen ürünler listelenir ([tam boyutlu görüntüyü görüntülemek için tıklayın](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image43.png))</span><span class="sxs-lookup"><span data-stu-id="89d97-292">**Figure 15**: Clicking the Produce Category Lists the Matching Products to the Right ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image43.png))</span></span>

## <a name="summary"></a><span data-ttu-id="89d97-293">Özet</span><span class="sxs-lookup"><span data-stu-id="89d97-293">Summary</span></span>

<span data-ttu-id="89d97-294">Bu öğreticide ve önceki bir adımda gördüğümüz ana/ayrıntı raporları iki sayfada dağıtılabilir veya bir tane üzerinde birleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="89d97-294">As we saw in this tutorial and the preceding one, master/detail reports can be spread out across two pages, or consolidated on one.</span></span> <span data-ttu-id="89d97-295">Bununla birlikte, tek bir sayfada ana/ayrıntı raporunu görüntülemek, sayfada ana ve ayrıntı kayıtlarının ne kadar en iyi şekilde yerleşmekte zorluk gösterilmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="89d97-295">Displaying a master/details report on a single page, however, introduces some challenges on how best to layout the master and details records on the page.</span></span> <span data-ttu-id="89d97-296">*Ayrıntı DetailsView Ile seçilebilir bir ana GridView kullanan ana/ayrıntı* bölümünde, Ayrıntılar kayıtları ana kayıtların üzerinde görüntülenir; Bu öğreticide, ana kayıtları ayrıntıların sol tarafında yüzer olması için CSS tekniklerini kullandık.</span><span class="sxs-lookup"><span data-stu-id="89d97-296">In the *Master/Detail Using a Selectable Master GridView with a Details DetailsView* tutorial we had the details records appear above the master records; in this tutorial we used CSS techniques to have the master records float to the left of the details.</span></span>

<span data-ttu-id="89d97-297">Ana/ayrıntı raporlarının yanı sıra, her bir kategori ile ilişkili ürün sayısını ve bir bağlantı düğmesine (veya düğmeye veya ImageButton) bir yineleyici içinden tıklandığı zaman sunucu tarafı mantığın nasıl alınacağını keşfettik.</span><span class="sxs-lookup"><span data-stu-id="89d97-297">Along with displaying master/details reports, we also had the opportunity to explore how to retrieve the number of products associated with each category as well as how to perform server-side logic when a LinkButton (or Button or ImageButton) is clicked from within a Repeater.</span></span>

<span data-ttu-id="89d97-298">Bu öğretici, DataList ve Repeater ile ana/ayrıntı raporlarının incelemesini tamamlar.</span><span class="sxs-lookup"><span data-stu-id="89d97-298">This tutorial completes our examination of master/detail reports with the DataList and Repeater.</span></span> <span data-ttu-id="89d97-299">Sonraki öğreticilerimiz, DataList denetimine nasıl özellik ekleneceğini ve bu yeteneklerin nasıl ekleneceğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="89d97-299">Our next set of tutorials will illustrate how to add editing and deleting capabilities to the DataList control.</span></span>

<span data-ttu-id="89d97-300">Programlamanın kutlu olsun!</span><span class="sxs-lookup"><span data-stu-id="89d97-300">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="89d97-301">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="89d97-301">Further Reading</span></span>

<span data-ttu-id="89d97-302">Bu öğreticide ele alınan konular hakkında daha fazla bilgi için aşağıdaki kaynaklara bakın:</span><span class="sxs-lookup"><span data-stu-id="89d97-302">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- <span data-ttu-id="89d97-303">CSS ile kayan CSS öğeleri hakkında [Floatutorial](http://css.maxdesign.com.au/floatutorial/) bir öğretici</span><span class="sxs-lookup"><span data-stu-id="89d97-303">[Floatutorial](http://css.maxdesign.com.au/floatutorial/) a tutorial on floating CSS elements with CSS</span></span>
- <span data-ttu-id="89d97-304">CSS ile öğeleri konumlandırma hakkında daha fazla bilgi [konumlandırma](http://www.brainjar.com/css/positioning/)</span><span class="sxs-lookup"><span data-stu-id="89d97-304">[CSS Positioning](http://www.brainjar.com/css/positioning/) more information on positioning elements with CSS</span></span>
- <span data-ttu-id="89d97-305">`<table>` s ve diğer HTML öğelerini konumlandırma için kullanarak [HTML Ile Içerik yerleştirme](http://www.w3schools.com/html/html_layout.asp)</span><span class="sxs-lookup"><span data-stu-id="89d97-305">[Laying Out Content with HTML](http://www.w3schools.com/html/html_layout.asp) using `<table>` s and other HTML elements for positioning</span></span>

## <a name="about-the-author"></a><span data-ttu-id="89d97-306">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="89d97-306">About the Author</span></span>

<span data-ttu-id="89d97-307">4GuysFromRolla.com 'in, [Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), yedi ASP/ASP. net books ve [](http://www.4guysfromrolla.com)'in yazarı, 1998 sürümünden bu yana Microsoft Web teknolojileriyle çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="89d97-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="89d97-308">Scott bağımsız danışman, Trainer ve yazıcı olarak çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="89d97-308">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="89d97-309">En son kitabı, [*24 saat içinde ASP.NET 2,0 kendi kendinize eğitim*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)ister.</span><span class="sxs-lookup"><span data-stu-id="89d97-309">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="89d97-310">mitchell@4GuysFromRolla.comadresinden erişilebilir [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="89d97-310">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="89d97-311">ya da blog aracılığıyla [http://ScottOnWriting.NET](http://ScottOnWriting.NET)bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="89d97-311">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="89d97-312">Özel olarak teşekkürler</span><span class="sxs-lookup"><span data-stu-id="89d97-312">Special Thanks To</span></span>

<span data-ttu-id="89d97-313">Bu öğretici serisi birçok yararlı gözden geçirenler tarafından incelendi.</span><span class="sxs-lookup"><span data-stu-id="89d97-313">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="89d97-314">Bu öğretici için müşteri adayı gözden geçireni, Zack Jones idi.</span><span class="sxs-lookup"><span data-stu-id="89d97-314">Lead reviewer for this tutorial was Zack Jones.</span></span> <span data-ttu-id="89d97-315">Yaklaşan MSDN makalelerimi gözden geçiriyor musunuz?</span><span class="sxs-lookup"><span data-stu-id="89d97-315">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="89d97-316">Öyleyse, benimitchell@4GuysFromRolla.combir satır bırakın [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="89d97-316">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="89d97-317">[Önceki](master-detail-filtering-acess-two-pages-datalist-cs.md)
> [İleri](master-detail-filtering-with-a-dropdownlist-datalist-vb.md)</span><span class="sxs-lookup"><span data-stu-id="89d97-317">[Previous](master-detail-filtering-acess-two-pages-datalist-cs.md)
[Next](master-detail-filtering-with-a-dropdownlist-datalist-vb.md)</span></span>
