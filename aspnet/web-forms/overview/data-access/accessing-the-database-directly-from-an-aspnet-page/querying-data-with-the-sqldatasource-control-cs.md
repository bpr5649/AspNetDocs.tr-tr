---
uid: web-forms/overview/data-access/accessing-the-database-directly-from-an-aspnet-page/querying-data-with-the-sqldatasource-control-cs
title: SqlDataSource denetimiyle verileri sorgulama (C#) | Microsoft Docs
author: rick-anderson
description: Önceki öğreticilerde, veri erişim katmanından sunum katmanını tamamen ayırmak için ObjectDataSource denetimini kullandık. Bu Tutor 'dan itibaren...
ms.author: riande
ms.date: 02/20/2007
ms.assetid: 60512d6a-b572-4b7a-beb3-3e44b4d2020c
msc.legacyurl: /web-forms/overview/data-access/accessing-the-database-directly-from-an-aspnet-page/querying-data-with-the-sqldatasource-control-cs
msc.type: authoredcontent
ms.openlocfilehash: 5bda42965f7d1db71b207c0b76e251b8fff64e31
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74606187"
---
# <a name="querying-data-with-the-sqldatasource-control-c"></a><span data-ttu-id="e88eb-104">SqlDataSource Denetimi ile Veri Sorgulama (C#)</span><span class="sxs-lookup"><span data-stu-id="e88eb-104">Querying Data with the SqlDataSource Control (C#)</span></span>

<span data-ttu-id="e88eb-105">[Scott Mitchell](https://twitter.com/ScottOnWriting) tarafından</span><span class="sxs-lookup"><span data-stu-id="e88eb-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="e88eb-106">[Örnek uygulamayı indirin](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_47_CS.exe) veya [PDF 'yi indirin](querying-data-with-the-sqldatasource-control-cs/_static/datatutorial47cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="e88eb-106">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_47_CS.exe) or [Download PDF](querying-data-with-the-sqldatasource-control-cs/_static/datatutorial47cs1.pdf)</span></span>

> <span data-ttu-id="e88eb-107">Önceki öğreticilerde, veri erişim katmanından sunum katmanını tamamen ayırmak için ObjectDataSource denetimini kullandık.</span><span class="sxs-lookup"><span data-stu-id="e88eb-107">In the preceding tutorials we used the ObjectDataSource control to fully separate the presentation layer from the Data Access layer.</span></span> <span data-ttu-id="e88eb-108">Bu öğreticiden başlayarak, SqlDataSource denetiminin sunum ve veri erişimi için katı bir ayrım gerektirmeyen basit uygulamalar için nasıl kullanılabileceğini öğreniyoruz.</span><span class="sxs-lookup"><span data-stu-id="e88eb-108">Starting with this tutorial, we learn how the SqlDataSource control can be used for simple applications that do not require such a strict separation of presentation and data access.</span></span>

## <a name="introduction"></a><span data-ttu-id="e88eb-109">Giriş</span><span class="sxs-lookup"><span data-stu-id="e88eb-109">Introduction</span></span>

<span data-ttu-id="e88eb-110">Şimdiye kadar incelediğimiz tüm öğreticiler, sunum, Iş mantığı ve veri erişimi katmanlarından oluşan katmanlı bir mimari kullandık.</span><span class="sxs-lookup"><span data-stu-id="e88eb-110">All of the tutorials we ve examined so far have used a tiered architecture consisting of presentation, Business Logic, and Data Access layers.</span></span> <span data-ttu-id="e88eb-111">Veri erişim katmanı (DAL) ilk öğreticide ([veri erişim katmanı oluşturma](../introduction/creating-a-data-access-layer-cs.md)) ve Ikinci bir Iş mantığı katmanının ([Iş mantığı katmanı oluşturma](../introduction/creating-a-business-logic-layer-cs.md)) oluşturulmuştur.</span><span class="sxs-lookup"><span data-stu-id="e88eb-111">The Data Access Layer (DAL) was crafted in the first tutorial ([Creating a Data Access Layer](../introduction/creating-a-data-access-layer-cs.md)) and the Business Logic Layer in the second ([Creating a Business Logic Layer](../introduction/creating-a-business-logic-layer-cs.md)).</span></span> <span data-ttu-id="e88eb-112">[ObjectDataSource Ile verileri görüntüleme](../basic-reporting/displaying-data-with-the-objectdatasource-cs.md) öğreticisiyle başlayarak, ASP.NET 2,0 s New ObjectDataSource denetimini, sunu katmanından mimariyle bildirimli arabirim olarak nasıl kullanacağınızı gördük.</span><span class="sxs-lookup"><span data-stu-id="e88eb-112">Starting with the [Displaying Data With the ObjectDataSource](../basic-reporting/displaying-data-with-the-objectdatasource-cs.md) tutorial, we saw how to use ASP.NET 2.0 s new ObjectDataSource control to declaratively interface with the architecture from the presentation layer.</span></span>

<span data-ttu-id="e88eb-113">Şimdiye kadar olan tüm öğreticiler, verilerle çalışmak üzere mimarinin kullanıldığı sürece, mimari atlayarak veritabanı verilerini doğrudan bir ASP.NET sayfasından erişmek, eklemek, güncelleştirmek ve silmek de mümkündür.</span><span class="sxs-lookup"><span data-stu-id="e88eb-113">While all of the tutorials so far have used the architecture to work with data, it is also possible to access, insert, update, and delete database data directly from an ASP.NET page, bypassing the architecture.</span></span> <span data-ttu-id="e88eb-114">Bunu yaptığınızda, belirli veritabanı sorguları ve iş mantığını doğrudan Web sayfasına yerleştirirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e88eb-114">Doing so places the specific database queries and business logic directly in the web page.</span></span> <span data-ttu-id="e88eb-115">Yeterince büyük veya karmaşık uygulamalarda, katmanlı bir mimari tasarlamak, uygulamak ve kullanmak uygulamanın başarı, Güncelleştirilebilirlik ve bakım açısından önemli değildir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-115">For sufficiently large or complex applications, designing, implementing, and using a tiered architecture is vitally important for the success, updatability, and maintainability of the application.</span></span> <span data-ttu-id="e88eb-116">Ancak, daha güçlü bir mimari geliştirme, tek seferlik basit uygulamalar oluştururken gereksiz olabilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-116">Developing a robust architecture, however, may be unnecessary when creating exceedingly simple, one-off applications.</span></span>

<span data-ttu-id="e88eb-117">ASP.NET 2,0, [SqlDataSource](https://msdn.microsoft.com/library/dz12d98w%28vs.80%29.aspx), [AccessDataSource](https://msdn.microsoft.com/library/8e5545e1.aspx), [ObjectDataSource](https://msdn.microsoft.com/library/9a4kyhcx.aspx), [XmlDataSource](https://msdn.microsoft.com/library/e8d8587a%28en-US,VS.80%29.aspx)ve [SiteMapDataSource](https://msdn.microsoft.com/library/5ex9t96x%28en-US,VS.80%29.aspx)gibi beş yerleşik veri kaynağı denetimi sağlar.</span><span class="sxs-lookup"><span data-stu-id="e88eb-117">ASP.NET 2.0 provides five built-in data source controls [SqlDataSource](https://msdn.microsoft.com/library/dz12d98w%28vs.80%29.aspx), [AccessDataSource](https://msdn.microsoft.com/library/8e5545e1.aspx), [ObjectDataSource](https://msdn.microsoft.com/library/9a4kyhcx.aspx), [XmlDataSource](https://msdn.microsoft.com/library/e8d8587a%28en-US,VS.80%29.aspx), and [SiteMapDataSource](https://msdn.microsoft.com/library/5ex9t96x%28en-US,VS.80%29.aspx).</span></span> <span data-ttu-id="e88eb-118">SqlDataSource, Microsoft SQL Server, Microsoft Access, Oracle, MySQL ve diğerleri dahil olmak üzere bir ilişkisel veritabanından doğrudan erişmek ve veri değiştirmek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-118">The SqlDataSource can be used to access and modify data directly from a relational database, including Microsoft SQL Server, Microsoft Access, Oracle, MySQL, and others.</span></span> <span data-ttu-id="e88eb-119">Bu öğreticide ve sonraki üç adımda, SqlDataSource denetimiyle çalışmayı, veritabanı verilerinin sorgulanarak ve filtreleneceğini araştırmaya ve verileri eklemek, güncelleştirmek ve silmek için SqlDataSource 'un nasıl kullanılacağını inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="e88eb-119">In this tutorial and the next three, we'll examine how to work with the SqlDataSource control, exploring how to query and filter database data, as well as how to use the SqlDataSource to insert, update, and delete data.</span></span>

![ASP.NET 2,0, beş yerleşik veri kaynağı denetimini Içerir](querying-data-with-the-sqldatasource-control-cs/_static/image1.gif)

<span data-ttu-id="e88eb-121">**Şekil 1**: ASP.NET 2,0, beş yerleşik veri kaynağı denetimini içerir</span><span class="sxs-lookup"><span data-stu-id="e88eb-121">**Figure 1**: ASP.NET 2.0 Includes Five Built-In Data Source Controls</span></span>

## <a name="comparing-the-objectdatasource-and-sqldatasource"></a><span data-ttu-id="e88eb-122">ObjectDataSource ve SqlDataSource karşılaştırılıyor</span><span class="sxs-lookup"><span data-stu-id="e88eb-122">Comparing the ObjectDataSource and SqlDataSource</span></span>

<span data-ttu-id="e88eb-123">Kavramsal olarak, hem ObjectDataSource hem de SqlDataSource denetimleri yalnızca veri proxy 'leri olur.</span><span class="sxs-lookup"><span data-stu-id="e88eb-123">Conceptually, both the ObjectDataSource and SqlDataSource controls are simply proxies to data.</span></span> <span data-ttu-id="e88eb-124">ObjectDataSource [Ile verileri görüntüleme konusunda](../basic-reporting/displaying-data-with-the-objectdatasource-cs.md) anlatıldığı gibi, ObjectDataSource, verileri sağlayan nesne türünü ve temel alınan nesne türünden verileri seçmek, eklemek, güncelleştirmek ve silmek için çağrılacak yöntemleri belirten özelliklere sahiptir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-124">As discussed in the [Displaying Data With the ObjectDataSource](../basic-reporting/displaying-data-with-the-objectdatasource-cs.md) tutorial, the ObjectDataSource has properties that indicate the object type that provides the data and the methods to invoke to select, insert, update, and delete data from the underlying object type.</span></span> <span data-ttu-id="e88eb-125">ObjectDataSource 'un özellikleri yapılandırıldıktan sonra, GridView, DetailsView veya DataList gibi bir veri Web denetimi, temel mimariyle etkileşim kurmak için `Select()`, `Insert()`, `Delete()`ve `Update()` yöntemleri kullanılarak denetime bağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-125">Once the ObjectDataSource s properties have been configured, a data Web control such as a GridView, DetailsView, or DataList can be bound to the control, using the ObjectDataSource s `Select()`, `Insert()`, `Delete()`, and `Update()` methods to interact with the underlying architecture.</span></span>

<span data-ttu-id="e88eb-126">SqlDataSource aynı işlevselliği sağlar, ancak nesne kitaplığı yerine ilişkisel bir veritabanına göre çalışır.</span><span class="sxs-lookup"><span data-stu-id="e88eb-126">The SqlDataSource provides the same functionality, but operates against a relational database rather than an object library.</span></span> <span data-ttu-id="e88eb-127">SqlDataSource ile veri ekleme, güncelleştirme, silme ve alma işlemleri için veritabanı bağlantı dizesini ve geçici SQL sorgularını veya çalıştırılacak saklı yordamları belirtmemiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-127">With the SqlDataSource, we must specify the database connection string and the ad-hoc SQL queries or stored procedures to execute to insert, update, delete, and retrieve data.</span></span> <span data-ttu-id="e88eb-128">`Select()`, `Insert()`, `Update()`ve `Delete()` yöntemleri, çağrıldığında, belirtilen veritabanına bağlanır ve uygun SQL sorgusunu verebilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-128">The SqlDataSource s `Select()`, `Insert()`, `Update()`, and `Delete()` methods, when invoked, connect to the specified database and issue the appropriate SQL query.</span></span> <span data-ttu-id="e88eb-129">Aşağıdaki diyagramda gösterildiği gibi, bu yöntemler bir veritabanına bağlanma, sorgu verme ve sonuçları döndürme için gryeniden çalışma işini yapılır.</span><span class="sxs-lookup"><span data-stu-id="e88eb-129">As the following diagram illustrates, the these methods do the grunt work of connecting to a database, issuing a query, and returning the results.</span></span>

![SqlDataSource, veritabanına bir proxy görevi görür](querying-data-with-the-sqldatasource-control-cs/_static/image2.gif)

<span data-ttu-id="e88eb-131">**Şekil 2**: SqlDataSource veritabanına bir proxy görevi görür</span><span class="sxs-lookup"><span data-stu-id="e88eb-131">**Figure 2**: The SqlDataSource Serves as a Proxy to the Database</span></span>

> [!NOTE]
> <span data-ttu-id="e88eb-132">Bu öğreticide, veritabanından veri almaya odaklanacağız.</span><span class="sxs-lookup"><span data-stu-id="e88eb-132">In this tutorial we'll focus on retrieving data from the database.</span></span> <span data-ttu-id="e88eb-133">[SqlDataSource denetim öğreticisiyle veri ekleme, güncelleştirme ve silme](inserting-updating-and-deleting-data-with-the-sqldatasource-cs.md) konusunda, SqlDataSource 'un ekleme, güncelleştirme ve silme desteği için nasıl yapılandırılacağını inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="e88eb-133">In the [Inserting, Updating, and Deleting Data with the SqlDataSource Control](inserting-updating-and-deleting-data-with-the-sqldatasource-cs.md) tutorial, we'll see how to configure the SqlDataSource to support inserting, updating, and deleting.</span></span>

## <a name="the-sqldatasource-and-accessdatasource-controls"></a><span data-ttu-id="e88eb-134">SqlDataSource ve AccessDataSource denetimleri</span><span class="sxs-lookup"><span data-stu-id="e88eb-134">The SqlDataSource and AccessDataSource Controls</span></span>

<span data-ttu-id="e88eb-135">ASP.NET 2,0, SqlDataSource denetimine ek olarak bir AccessDataSource denetimi de içerir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-135">In addition to the SqlDataSource control, ASP.NET 2.0 also includes an AccessDataSource control.</span></span> <span data-ttu-id="e88eb-136">Bu iki farklı denetim, ASP.NET 2,0 ' ye yeni bir çok geliştirici sağlar. Bu, AccessDataSource denetiminin yalnızca Microsoft SQL Server ile çalışmak üzere tasarlanan SqlDataSource denetimiyle Microsoft Access ile özel olarak çalışacak şekilde tasarlandığından şüphelenmesine neden olur.</span><span class="sxs-lookup"><span data-stu-id="e88eb-136">These two different controls lead many developers new to ASP.NET 2.0 to suspect that the AccessDataSource control is designed to work exclusively with Microsoft Access with the SqlDataSource control designed to work exclusively with Microsoft SQL Server.</span></span> <span data-ttu-id="e88eb-137">AccessDataSource özellikle Microsoft Access ile çalışacak şekilde tasarlandığından, SqlDataSource denetimi .NET aracılığıyla erişilebilen *herhangi bir* ilişkisel veritabanıyla çalışır.</span><span class="sxs-lookup"><span data-stu-id="e88eb-137">While the AccessDataSource is designed to work specifically with Microsoft Access, the SqlDataSource control works with *any* relational database that can be accessed through .NET.</span></span> <span data-ttu-id="e88eb-138">Bu, çok sayıda Microsoft SQL Server, Microsoft Access, Oracle, Informix, MySQL ve PostgreSQL gibi herhangi bir OleDb veya ODBC uyumlu veri deposunu içerir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-138">This includes any OleDb- or ODBC-compliant data stores, such as Microsoft SQL Server, Microsoft Access, Oracle, Informix, MySQL, and PostgreSQL, among many others.</span></span>

<span data-ttu-id="e88eb-139">AccessDataSource ve SqlDataSource denetimleri arasındaki tek fark, veritabanı bağlantı bilgilerinin nasıl belirtildidir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-139">The sole difference between the AccessDataSource and SqlDataSource controls is how the database connection information is specified.</span></span> <span data-ttu-id="e88eb-140">AccessDataSource denetimi yalnızca Access veritabanı dosyasının dosya yolunu gerektirir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-140">The AccessDataSource control needs just the file path to the Access database file.</span></span> <span data-ttu-id="e88eb-141">Diğer yandan SqlDataSource, bir bağlantı dizesi gerektirir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-141">The SqlDataSource, on the other hand, requires a complete connection string.</span></span>

## <a name="step-1-creating-the-sqldatasource-web-pages"></a><span data-ttu-id="e88eb-142">1\. Adım: SqlDataSource Web sayfaları oluşturma</span><span class="sxs-lookup"><span data-stu-id="e88eb-142">Step 1: Creating the SqlDataSource Web Pages</span></span>

<span data-ttu-id="e88eb-143">SqlDataSource denetimini kullanarak veritabanı verileriyle doğrudan nasıl çalışacağımız konusunda keşfetmeye başlamadan önce, Web sitesi projemizdeki Bu öğretici ve sonraki üç için gereken ASP.NET sayfalarını oluşturmak için önce bir süre sürme.</span><span class="sxs-lookup"><span data-stu-id="e88eb-143">Before we start exploring how to work directly with database data using the SqlDataSource control, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next three.</span></span> <span data-ttu-id="e88eb-144">`SqlDataSource`adlı yeni bir klasör ekleyerek başlayın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-144">Start by adding a new folder named `SqlDataSource`.</span></span> <span data-ttu-id="e88eb-145">Ardından, aşağıdaki ASP.NET sayfalarını bu klasöre ekleyerek her bir sayfayı `Site.master` ana sayfasıyla ilişkilendirdiğinizden emin olun:</span><span class="sxs-lookup"><span data-stu-id="e88eb-145">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `Querying.aspx`
- `ParameterizedQueries.aspx`
- `InsertUpdateDelete.aspx`
- `OptimisticConcurrency.aspx`

![SqlDataSource ile Ilgili öğreticiler için ASP.NET sayfaları ekleyin](querying-data-with-the-sqldatasource-control-cs/_static/image3.gif)

<span data-ttu-id="e88eb-147">**Şekil 3**: SqlDataSource Ile ilgili öğreticiler Için ASP.NET sayfaları ekleme</span><span class="sxs-lookup"><span data-stu-id="e88eb-147">**Figure 3**: Add the ASP.NET Pages for the SqlDataSource-Related Tutorials</span></span>

<span data-ttu-id="e88eb-148">Diğer klasörlerde olduğu gibi, `SqlDataSource` klasöründeki `Default.aspx` öğreticileri bölümündeki öğreticilerin listelecektir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-148">Like in the other folders, `Default.aspx` in the `SqlDataSource` folder will list the tutorials in its section.</span></span> <span data-ttu-id="e88eb-149">`SectionLevelTutorialListing.ascx` Kullanıcı denetiminin bu işlevselliği sağladığını hatırlayın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-149">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="e88eb-150">Bu nedenle, bu kullanıcı denetimini Çözüm Gezgini sayfa s Tasarım görünümü üzerine sürükleyerek `Default.aspx` ekleyin.</span><span class="sxs-lookup"><span data-stu-id="e88eb-150">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>

<span data-ttu-id="e88eb-151">[SectionLevelTutorialListing. ascx Kullanıcı denetimini default. aspx öğesine eklemek ![](querying-data-with-the-sqldatasource-control-cs/_static/image5.gif)](querying-data-with-the-sqldatasource-control-cs/_static/image4.gif)</span><span class="sxs-lookup"><span data-stu-id="e88eb-151">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](querying-data-with-the-sqldatasource-control-cs/_static/image5.gif)](querying-data-with-the-sqldatasource-control-cs/_static/image4.gif)</span></span>

<span data-ttu-id="e88eb-152">**Şekil 4**: `Default.aspx` Için `SectionLevelTutorialListing.ascx` Kullanıcı denetimini ekleme ([tam boyutlu görüntüyü görüntülemek için tıklayın](querying-data-with-the-sqldatasource-control-cs/_static/image6.gif))</span><span class="sxs-lookup"><span data-stu-id="e88eb-152">**Figure 4**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](querying-data-with-the-sqldatasource-control-cs/_static/image6.gif))</span></span>

<span data-ttu-id="e88eb-153">Son olarak, bu dört sayfayı `Web.sitemap` dosyasına girdi olarak ekleyin.</span><span class="sxs-lookup"><span data-stu-id="e88eb-153">Lastly, add these four pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="e88eb-154">Özellikle, DataList ve Repeater `<siteMapNode>`özel düğmeler eklendikten sonra aşağıdaki biçimlendirmeyi ekleyin:</span><span class="sxs-lookup"><span data-stu-id="e88eb-154">Specifically, add the following markup after the Adding Custom Buttons to the DataList and Repeater `<siteMapNode>`:</span></span>

[!code-sql[Main](querying-data-with-the-sqldatasource-control-cs/samples/sample1.sql)]

<span data-ttu-id="e88eb-155">`Web.sitemap`güncelleştirildikten sonra Öğreticiler Web sitesini bir tarayıcıdan görüntülemek için bir dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-155">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="e88eb-156">Sol taraftaki menü artık öğreticilerin düzenlenmesine, eklemeye ve silinmesine yönelik öğeler içerir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-156">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>

![Site Haritası artık SqlDataSource öğreticileri için girdiler Içeriyor](querying-data-with-the-sqldatasource-control-cs/_static/image7.gif)

<span data-ttu-id="e88eb-158">**Şekil 5**: site haritasında artık SqlDataSource öğreticileri Için girişler yer almaktadır</span><span class="sxs-lookup"><span data-stu-id="e88eb-158">**Figure 5**: The Site Map Now Includes Entries for the SqlDataSource Tutorials</span></span>

## <a name="step-2-adding-and-configuring-the-sqldatasource-control"></a><span data-ttu-id="e88eb-159">2\. Adım: SqlDataSource denetimini ekleme ve yapılandırma</span><span class="sxs-lookup"><span data-stu-id="e88eb-159">Step 2: Adding and Configuring the SqlDataSource Control</span></span>

<span data-ttu-id="e88eb-160">`SqlDataSource` klasöründeki `Querying.aspx` sayfasını açıp Tasarım görünümü 'e geçiş yaparak başlayın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-160">Start by opening the `Querying.aspx` page in the `SqlDataSource` folder and switch to Design view.</span></span> <span data-ttu-id="e88eb-161">Araç kutusundan bir SqlDataSource denetimini tasarımcı üzerine sürükleyin ve `ID` `ProductsDataSource`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-161">Drag a SqlDataSource control from the Toolbox onto the Designer and set its `ID` to `ProductsDataSource`.</span></span> <span data-ttu-id="e88eb-162">ObjectDataSource gibi, SqlDataSource işlenen herhangi bir çıktı oluşturmaz ve bu nedenle tasarım yüzeyinde gri kutu olarak görünür.</span><span class="sxs-lookup"><span data-stu-id="e88eb-162">As with the ObjectDataSource, the SqlDataSource does not produce any rendered output and therefore appears as a gray box on the design surface.</span></span> <span data-ttu-id="e88eb-163">SqlDataSource 'u yapılandırmak için SqlDataSource s akıllı etiketinden veri kaynağını Yapılandır bağlantısına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-163">To configure the SqlDataSource, click on the Configure Data Source link from the SqlDataSource s smart tag.</span></span>

![SqlDataSource s akıllı etiketinden veri kaynağını Yapılandır bağlantısına tıklayın](querying-data-with-the-sqldatasource-control-cs/_static/image8.gif)

<span data-ttu-id="e88eb-165">**Şekil 6**: SqlDataSource s akıllı etiketinden veri kaynağını Yapılandır bağlantısına tıklayın</span><span class="sxs-lookup"><span data-stu-id="e88eb-165">**Figure 6**: Click on the Configure Data Source Link from the SqlDataSource s Smart Tag</span></span>

<span data-ttu-id="e88eb-166">Bu, SqlDataSource denetim s veri kaynağını yapılandırma Sihirbazı 'nı getirir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-166">This brings up the SqlDataSource control s Configure Data Source wizard.</span></span> <span data-ttu-id="e88eb-167">Sihirbazın adımları, ObjectDataSource denetiminden farklı olsa da, son hedef, veri kaynağı aracılığıyla veri alma, ekleme, güncelleştirme ve silme hakkındaki ayrıntıları sağlamak için aynıdır.</span><span class="sxs-lookup"><span data-stu-id="e88eb-167">While the wizard s steps differ from the ObjectDataSource control s, the end goal is the same to provide the details on how to retrieve, insert, update, and delete data through the data source.</span></span> <span data-ttu-id="e88eb-168">SqlDataSource için bu, kullanılacak temel veritabanını belirtmeyi ve geçici SQL deyimlerini veya saklı yordamları sağlamayı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-168">For the SqlDataSource this entails specifying the underlying database to use and providing the ad-hoc SQL statements or stored procedures.</span></span>

<span data-ttu-id="e88eb-169">İlk sihirbaz adımı, veritabanı için bize sorar.</span><span class="sxs-lookup"><span data-stu-id="e88eb-169">The first wizard step prompts us for the database.</span></span> <span data-ttu-id="e88eb-170">Açılan liste, Web uygulaması `App_Data` klasöründe bulunan bu veritabanlarını ve Sunucu Gezgini veri bağlantıları düğümüne eklenmiş olanları içerir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-170">The drop-down list includes those databases found in the web application s `App_Data` folder and those that have been added to the Data Connections node in the Server Explorer.</span></span> <span data-ttu-id="e88eb-171">`App_Data` klasöründeki `NORTHWIND.MDF` veritabanı için proje s `Web.config` dosyasına zaten bir bağlantı dizesi eklediğimiz için, açılan liste bu bağlantı dizesinin bir başvurusunu içerir `NORTHWINDConnectionString`.</span><span class="sxs-lookup"><span data-stu-id="e88eb-171">Since we ve already added a connection string for the `NORTHWIND.MDF` database in the `App_Data` folder to our project s `Web.config` file, the drop-down list includes a reference to that connection string, `NORTHWINDConnectionString`.</span></span> <span data-ttu-id="e88eb-172">Aşağı açılan listeden bu öğeyi seçin ve Ileri ' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-172">Choose this item from the drop-down list and click Next.</span></span>

![Açılan listeden NORTHWINDConnectionString öğesini seçin](querying-data-with-the-sqldatasource-control-cs/_static/image9.gif)

<span data-ttu-id="e88eb-174">**Şekil 7**: açılan listeden `NORTHWINDConnectionString` seçin</span><span class="sxs-lookup"><span data-stu-id="e88eb-174">**Figure 7**: Choose the `NORTHWINDConnectionString` from the Drop-Down List</span></span>

<span data-ttu-id="e88eb-175">Veritabanı seçildikten sonra sihirbaz, sorgunun veri döndürmesini ister.</span><span class="sxs-lookup"><span data-stu-id="e88eb-175">After choosing the database, the wizard asks for the query to return data.</span></span> <span data-ttu-id="e88eb-176">Döndürülecek veya özel bir SQL ifadesini girebileceğiniz ya da bir saklı yordam belirtebileceğiniz bir tablonun veya görünümün sütunlarını belirttik.</span><span class="sxs-lookup"><span data-stu-id="e88eb-176">We can either specify the columns of a table or view to return or can enter a custom SQL statement or specify a stored procedure.</span></span> <span data-ttu-id="e88eb-177">Özel bir SQL ifadesini veya saklı yordamı belirleme ve tablo veya görünüm radyo düğmelerini kullanarak bu seçim arasında geçiş yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e88eb-177">You can toggle between this choice through the Specify a custom SQL statement or stored procedure and Specify columns from a table or view radio buttons.</span></span>

> [!NOTE]
> <span data-ttu-id="e88eb-178">Bu ilk örnek için, bir tablo veya görünüm seçeneğinde sütunları belirt ' i kullanalım.</span><span class="sxs-lookup"><span data-stu-id="e88eb-178">For this first example, let s use the Specify columns from a table or view option.</span></span> <span data-ttu-id="e88eb-179">Bu öğreticide daha sonra sihirbaza geri döneceğiz ve özel bir SQL ifadesini veya saklı yordamı belirtme seçeneğini keşfetmeye başlayacağız.</span><span class="sxs-lookup"><span data-stu-id="e88eb-179">We'll return to the wizard later in this tutorial and explore the Specify a custom SQL statement or stored procedure option.</span></span>

<span data-ttu-id="e88eb-180">Şekil 8 ' de bir tablodan sütun belirt veya bir görünüm radyo düğmesi seçildiğinde Select Ifadesini Yapılandır ekranı görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-180">Figure 8 shows the Configure the Select Statement screen when the Specify columns from a table or view radio button is selected.</span></span> <span data-ttu-id="e88eb-181">Aşağı açılan listede, aşağıdaki onay kutusu listesinde bulunan seçili tablo veya görünüm sütunları ile Northwind veritabanındaki tablo ve görünüm kümesi bulunur.</span><span class="sxs-lookup"><span data-stu-id="e88eb-181">The drop-down list contains the set of tables and views in the Northwind database, with the selected table or view s columns displayed in the checkbox list below.</span></span> <span data-ttu-id="e88eb-182">Bu örnekte, s `ProductID`, `ProductName`ve `UnitPrice` sütunlarını `Products` tablosundan döndürmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="e88eb-182">For this example, let s return the `ProductID`, `ProductName`, and `UnitPrice` columns from the `Products` table.</span></span> <span data-ttu-id="e88eb-183">Şekil 8 ' de gösterildiği gibi, bu seçimleri yaptıktan sonra sihirbaz, sonuçta elde edilen SQL ifadesini `SELECT [ProductID], [ProductName], [UnitPrice] FROM [Products]`gösterir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-183">As Figure 8 shows, after making these selections the wizard shows the resulting SQL statement `SELECT [ProductID], [ProductName], [UnitPrice] FROM [Products]`.</span></span>

![Products tablosundan veri döndürme](querying-data-with-the-sqldatasource-control-cs/_static/image10.gif)

<span data-ttu-id="e88eb-185">**Şekil 8**: `Products` tablosundan veri döndürme</span><span class="sxs-lookup"><span data-stu-id="e88eb-185">**Figure 8**: Return Data from the `Products` Table</span></span>

<span data-ttu-id="e88eb-186">Sihirbazı `Products` tablosundan `ProductID`, `ProductName`ve `UnitPrice` sütunları döndürecek şekilde yapılandırdıktan sonra Ileri düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-186">Once you have configured the wizard to return the `ProductID`, `ProductName`, and `UnitPrice` columns from the `Products` table, click the Next button.</span></span> <span data-ttu-id="e88eb-187">Bu son ekran, önceki adımdan yapılandırılan sorgunun sonuçlarını incelemek için bir fırsat sağlar.</span><span class="sxs-lookup"><span data-stu-id="e88eb-187">This final screen provides an opportunity to examine the results of the query configured from the previous step.</span></span> <span data-ttu-id="e88eb-188">Sorguyu Sına düğmesine tıklamak yapılandırılmış `SELECT` ifadesini yürütür ve sonuçları bir kılavuzda görüntüler.</span><span class="sxs-lookup"><span data-stu-id="e88eb-188">Clicking the Test Query button executes the configured `SELECT` statement and displays the results in a grid.</span></span>

![Seçme sorgunuzu gözden geçirmek için sorguyu Sına düğmesine tıklayın](querying-data-with-the-sqldatasource-control-cs/_static/image11.gif)

<span data-ttu-id="e88eb-190">**Şekil 9**: `SELECT` sorgunuzu gözden geçirmek Için sorguyu Sına düğmesine tıklayın</span><span class="sxs-lookup"><span data-stu-id="e88eb-190">**Figure 9**: Click the Test Query Button to Review Your `SELECT` Query</span></span>

<span data-ttu-id="e88eb-191">Sihirbazı tamamladığınızda son ' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-191">To complete the wizard, click Finish.</span></span>

<span data-ttu-id="e88eb-192">ObjectDataSource gibi, SqlDataSource s Sihirbazı yalnızca denetim s özelliklerine değerler atar, bu da [`ConnectionString`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.sqldatasource.connectionstring.aspx) ve [`SelectCommand`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.sqldatasource.selectcommand.aspx) özelliklerdir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-192">Like with the ObjectDataSource, the SqlDataSource s wizard merely assigns values to the control s properties, namely the [`ConnectionString`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.sqldatasource.connectionstring.aspx) and [`SelectCommand`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.sqldatasource.selectcommand.aspx) properties.</span></span> <span data-ttu-id="e88eb-193">Sihirbazı tamamladıktan sonra, SqlDataSource denetim bildirim temelli işaretlerinizin aşağıdakine benzer şekilde görünmesi gerekir:</span><span class="sxs-lookup"><span data-stu-id="e88eb-193">After completing the wizard, your SqlDataSource control s declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](querying-data-with-the-sqldatasource-control-cs/samples/sample2.aspx)]

<span data-ttu-id="e88eb-194">`ConnectionString` özelliği, veritabanına bağlanma hakkında bilgi sağlar.</span><span class="sxs-lookup"><span data-stu-id="e88eb-194">The `ConnectionString` property provides information on how to connect to the database.</span></span> <span data-ttu-id="e88eb-195">Bu özelliğe, tam, sabit kodlanmış bir bağlantı dizesi değeri atanabilir veya `Web.config`içindeki bir bağlantı dizesine işaret edebilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-195">This property can be assigned a complete, hard-coded connection string value or can point to a connection string in `Web.config`.</span></span> <span data-ttu-id="e88eb-196">Web. config dosyasındaki bir bağlantı dizesi değerine başvurmak için `<%$ expressionPrefix:expressionValue %>`söz dizimini kullanın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-196">To reference a connection string value in Web.config, use the syntax `<%$ expressionPrefix:expressionValue %>`.</span></span> <span data-ttu-id="e88eb-197">Genellikle, *ExpressionPrefix* ConnectionString ve *expressionvalue* , `Web.config` [`<connectionStrings>` bölümündeki](https://msdn.microsoft.com/library/bf7sd233.aspx)bağlantı dizesinin adıdır.</span><span class="sxs-lookup"><span data-stu-id="e88eb-197">Typically, *expressionPrefix* is ConnectionStrings and *expressionValue* is the name of the connect string in the `Web.config` [`<connectionStrings>` section](https://msdn.microsoft.com/library/bf7sd233.aspx).</span></span> <span data-ttu-id="e88eb-198">Ancak söz dizimi, kaynak dosyalarından `<appSettings>` öğelerine veya içeriğe başvurmak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-198">However, the syntax can be used to reference `<appSettings>` elements or content from resource files.</span></span> <span data-ttu-id="e88eb-199">Bu söz dizimi hakkında daha fazla bilgi için bkz. [ASP.net Ifadeleri Overview](https://msdn.microsoft.com/library/d5bd1tad.aspx) .</span><span class="sxs-lookup"><span data-stu-id="e88eb-199">See [ASP.NET Expressions Overview](https://msdn.microsoft.com/library/d5bd1tad.aspx) for more on this syntax.</span></span>

<span data-ttu-id="e88eb-200">`SelectCommand` özelliği, verileri döndürmek için yürütülecek geçici SQL ifadesini veya saklı yordamı belirtir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-200">The `SelectCommand` property specifies the ad-hoc SQL statement or stored procedure to execute to return the data.</span></span>

## <a name="step-3-adding-a-data-web-control-and-binding-it-to-the-sqldatasource"></a><span data-ttu-id="e88eb-201">3\. Adım: veri Web denetimi ekleme ve SqlDataSource 'a bağlama</span><span class="sxs-lookup"><span data-stu-id="e88eb-201">Step 3: Adding a Data Web Control and Binding it to the SqlDataSource</span></span>

<span data-ttu-id="e88eb-202">SqlDataSource yapılandırıldıktan sonra, GridView veya DetailsView gibi bir veri Web denetimine bağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-202">Once the SqlDataSource has been configured, it can be bound to a data Web control, such as a GridView or DetailsView.</span></span> <span data-ttu-id="e88eb-203">Bu öğreticide, verileri bir GridView 'da görüntüler.</span><span class="sxs-lookup"><span data-stu-id="e88eb-203">For this tutorial, let s display the data in a GridView.</span></span> <span data-ttu-id="e88eb-204">Araç kutusundan bir GridView öğesini sayfaya sürükleyin ve GridView s akıllı etiketindeki açılan listeden veri kaynağını seçerek `ProductsDataSource` SqlDataSource 'a bağlayın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-204">From the Toolbox, drag a GridView onto the page and bind it to the `ProductsDataSource` SqlDataSource by choosing the data source from the drop-down list in the GridView s smart tag.</span></span>

<span data-ttu-id="e88eb-205">[GridView ekleme ve SqlDataSource denetimine bağlama ![](querying-data-with-the-sqldatasource-control-cs/_static/image13.gif)](querying-data-with-the-sqldatasource-control-cs/_static/image12.gif)</span><span class="sxs-lookup"><span data-stu-id="e88eb-205">[![Add a GridView and Bind it to the SqlDataSource Control](querying-data-with-the-sqldatasource-control-cs/_static/image13.gif)](querying-data-with-the-sqldatasource-control-cs/_static/image12.gif)</span></span>

<span data-ttu-id="e88eb-206">**Şekil 10**: GridView ekleme ve SqlDataSource denetimine bağlama ([tam boyutlu görüntüyü görüntülemek için tıklayın](querying-data-with-the-sqldatasource-control-cs/_static/image14.gif))</span><span class="sxs-lookup"><span data-stu-id="e88eb-206">**Figure 10**: Add a GridView and Bind it to the SqlDataSource Control ([Click to view full-size image](querying-data-with-the-sqldatasource-control-cs/_static/image14.gif))</span></span>

<span data-ttu-id="e88eb-207">GridView s akıllı etiketindeki aşağı açılan listeden SqlDataSource denetimini seçtikten sonra, Visual Studio veri kaynağı denetimi tarafından döndürülen her sütun için GridView 'a otomatik olarak bir BoundField veya CheckBoxField ekler.</span><span class="sxs-lookup"><span data-stu-id="e88eb-207">Once you ve selected the SqlDataSource control from the drop-down list in the GridView s smart tag, Visual Studio will automatically add a BoundField or CheckBoxField to the GridView for each of the columns returned by the data source control.</span></span> <span data-ttu-id="e88eb-208">SqlDataSource `ProductID`, `ProductName`ve `UnitPrice` üç veritabanı sütunu döndürdüğünden, GridView 'da üç alan vardır.</span><span class="sxs-lookup"><span data-stu-id="e88eb-208">Since the SqlDataSource returns three database columns `ProductID`, `ProductName`, and `UnitPrice` there are three fields in the GridView.</span></span>

<span data-ttu-id="e88eb-209">GridView s üç BoundFields 'i yapılandırmak için bir dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-209">Take a moment to configure the GridView s three BoundFields.</span></span> <span data-ttu-id="e88eb-210">`ProductName` alan s `HeaderText` özelliğini ürün adı ve `UnitPrice` alanı için fiyat olarak değiştirin.</span><span class="sxs-lookup"><span data-stu-id="e88eb-210">Change the `ProductName` field s `HeaderText` property to Product Name and the `UnitPrice` field s to Price.</span></span> <span data-ttu-id="e88eb-211">Ayrıca `UnitPrice` alanını para birimi olarak biçimlendirin.</span><span class="sxs-lookup"><span data-stu-id="e88eb-211">Also format the `UnitPrice` field as a currency.</span></span> <span data-ttu-id="e88eb-212">Bu değişiklikleri yaptıktan sonra, GridView s bildirim temelli işaretlerinizin aşağıdakine benzer şekilde görünmesi gerekir:</span><span class="sxs-lookup"><span data-stu-id="e88eb-212">After making these modifications, your GridView s declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](querying-data-with-the-sqldatasource-control-cs/samples/sample3.aspx)]

<span data-ttu-id="e88eb-213">Bu sayfayı bir tarayıcı aracılığıyla ziyaret edin.</span><span class="sxs-lookup"><span data-stu-id="e88eb-213">Visit this page through a browser.</span></span> <span data-ttu-id="e88eb-214">Şekil 11 ' de gösterildiği gibi, GridView her bir ürün `ProductID`, `ProductName`ve `UnitPrice` değerlerini listeler.</span><span class="sxs-lookup"><span data-stu-id="e88eb-214">As Figure 11 shows, the GridView lists each product s `ProductID`, `ProductName`, and `UnitPrice` values.</span></span>

<span data-ttu-id="e88eb-215">[GridView ![her ürün ProductID, ProductName ve BirimFiyat değerlerini görüntüler](querying-data-with-the-sqldatasource-control-cs/_static/image16.gif)](querying-data-with-the-sqldatasource-control-cs/_static/image15.gif)</span><span class="sxs-lookup"><span data-stu-id="e88eb-215">[![The GridView Displays Each Product s ProductID, ProductName, and UnitPrice Values](querying-data-with-the-sqldatasource-control-cs/_static/image16.gif)](querying-data-with-the-sqldatasource-control-cs/_static/image15.gif)</span></span>

<span data-ttu-id="e88eb-216">**Şekil 11**: GridView her bir ürün için `ProductID`, `ProductName`ve `UnitPrice` değerleri görüntüler ([tam boyutlu görüntüyü görüntülemek için tıklayın](querying-data-with-the-sqldatasource-control-cs/_static/image17.gif))</span><span class="sxs-lookup"><span data-stu-id="e88eb-216">**Figure 11**: The GridView Displays Each Product s `ProductID`, `ProductName`, and `UnitPrice` Values ([Click to view full-size image](querying-data-with-the-sqldatasource-control-cs/_static/image17.gif))</span></span>

<span data-ttu-id="e88eb-217">Sayfa ziyaret edildiğinde GridView, veri kaynağı denetim s `Select()` yöntemini çağırır.</span><span class="sxs-lookup"><span data-stu-id="e88eb-217">When the page is visited the GridView invokes its data source control s `Select()` method.</span></span> <span data-ttu-id="e88eb-218">ObjectDataSource denetimini kullanırken, bu `ProductsBLL` sınıf s `GetProducts()` metodunu çağırdı.</span><span class="sxs-lookup"><span data-stu-id="e88eb-218">When we were using the ObjectDataSource control, this called the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="e88eb-219">Ancak, SqlDataSource ile `Select()` yöntemi belirtilen veritabanıyla bir bağlantı kurar ve `SelectCommand` (`SELECT [ProductID], [ProductName], [UnitPrice] FROM [Products]`, bu örnekte) yayınlar.</span><span class="sxs-lookup"><span data-stu-id="e88eb-219">With the SqlDataSource, however, the `Select()` method establishes a connection to the specified database and issues the `SelectCommand` (`SELECT [ProductID], [ProductName], [UnitPrice] FROM [Products]`, in this example).</span></span> <span data-ttu-id="e88eb-220">SqlDataSource, GridView 'un, döndürülen her veritabanı kaydı için GridView 'da bir satır oluşturan sonuçlarını getirir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-220">The SqlDataSource returns its results which the GridView then enumerates, creating a row in the GridView for each database record returned.</span></span>

## <a name="the-built-in-data-web-control-features-and-the-sqldatasource-control"></a><span data-ttu-id="e88eb-221">Yerleşik veri Web denetimi özellikleri ve SqlDataSource denetimi</span><span class="sxs-lookup"><span data-stu-id="e88eb-221">The Built-In Data Web Control Features and the SqlDataSource Control</span></span>

<span data-ttu-id="e88eb-222">Genel olarak, veri Web 'e ait özellikler, sayfalama, sıralama, Düzenle, silme, ekleme, vb. veri Web denetimine özgüdür ve kullanılan veri kaynağı denetimine bağlı değildir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-222">In general, the features inherent to the data Web controls paging, sorting, editing, deleting, inserting, and so on are specific to the data Web control and are not dependent on the data source control used.</span></span> <span data-ttu-id="e88eb-223">Diğer bir deyişle, GridView, yerleşik sayfalama, sıralama, düzen ve silmeyi bir ObjectDataSource veya SqlDataSource 'a bağlanıp bağlanmadığını kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-223">That is, the GridView can utilize its built-in paging, sorting, editing, and deleting whether it is bound to an ObjectDataSource or a SqlDataSource.</span></span> <span data-ttu-id="e88eb-224">Ancak, belirli veri Web denetimi özellikleri kullanılan veri kaynağı denetimiyle veya veri kaynağı denetimi s yapılandırmasına duyarlıdır.</span><span class="sxs-lookup"><span data-stu-id="e88eb-224">However, certain data Web control features are sensitive to the data source control being used or to the data source control s configuration.</span></span>

<span data-ttu-id="e88eb-225">Örneğin, [büyük miktarlarda veri öğreticisi aracılığıyla verimli bir şekilde sayfalamakta](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) , varsayılan olarak, veri Web denetimlerine ait sayfalama mantığı, temel alınan veri kaynağından *Tüm* kayıtları döndürmektedir ve ardından yalnızca geçerli sayfa dizini ve sayfa başına görüntülenecek kayıt sayısı için uygun kayıt alt kümesini görüntüler.</span><span class="sxs-lookup"><span data-stu-id="e88eb-225">For example, in the [Efficiently Paging Through Large Amounts of Data](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) tutorial we discussed how, by default, the paging logic for the data Web controls naively returns *all* records from the underlying data source and then displays only the appropriate subset of records given the current page index and the number of records to display per page.</span></span> <span data-ttu-id="e88eb-226">Bu model yeterince büyük sonuç kümeleriyle sayfalama yaparken oldukça verimsiz olur.</span><span class="sxs-lookup"><span data-stu-id="e88eb-226">This model is highly inefficient when paging through sufficiently large result sets.</span></span> <span data-ttu-id="e88eb-227">Neyse ki, ObjectDataSource, yalnızca görüntülenecek kayıtların kesin alt kümesini döndüren özel sayfalama 'yı destekleyecek şekilde yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-227">Fortunately, the ObjectDataSource can be configured to support custom paging, which returns only the precise subset of records to display.</span></span> <span data-ttu-id="e88eb-228">Ancak, SqlDataSource denetimi özel sayfalama uygulamaya yönelik özellikler eksiktir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-228">The SqlDataSource control, however, lacks the properties for implementing custom paging.</span></span>

<span data-ttu-id="e88eb-229">SqlDataSource ile sayfalama ve sıralama ile başka bir alt ttity.</span><span class="sxs-lookup"><span data-stu-id="e88eb-229">Another subtlety with paging and sorting arises with the SqlDataSource.</span></span> <span data-ttu-id="e88eb-230">Varsayılan olarak, bir SqlDataSource 'tan döndürülen veriler disk belleğine alınabilir veya GridView aracılığıyla sıralanabilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-230">By default, the data returned from a SqlDataSource can be paged or sorted through the GridView.</span></span> <span data-ttu-id="e88eb-231">Bunu göstermek için, `Querying.aspx` ' deki GridView s akıllı etiketinde sayfalama etkinleştir ve sıralama seçeneklerini etkinleştir ' i işaretleyin ve bunun beklendiği gibi çalıştığını doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-231">To demonstrate this, check the Enable Paging and Enable Sorting options in the GridView s smart tag in `Querying.aspx` and verify that this works as expected.</span></span>

<span data-ttu-id="e88eb-232">Sıralama ve sayfalama, SqlDataSource veritabanı verilerini gevşek yazılmış bir veri kümesine alcağından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="e88eb-232">Sorting and paging works because the SqlDataSource retrieves the database data into a loosely-typed DataSet.</span></span> <span data-ttu-id="e88eb-233">Sorgu tarafından döndürülen kayıtların toplam sayısı, veri kümesinden bunun olabilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-233">The total number of records returned by the query an essential aspect to implementing paging can be ascertained from the DataSet.</span></span> <span data-ttu-id="e88eb-234">Ayrıca, DataSet s sonuçları bir DataView aracılığıyla sıralanabilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-234">Additionally, the DataSet s results can be sorted through a DataView.</span></span> <span data-ttu-id="e88eb-235">Bu yetenekler, GridView tarafından disk belleğine veya sıralanmış verileri istediğinde SqlDataSource tarafından otomatik olarak kullanılır.</span><span class="sxs-lookup"><span data-stu-id="e88eb-235">These capabilities are automatically used by the SqlDataSource when the GridView requests paged or sorted data.</span></span>

<span data-ttu-id="e88eb-236">SqlDataSource, [`DataSourceMode` özelliğini](https://msdn.microsoft.com/library/system.web.ui.webcontrols.sqldatasource.datasourcemode.aspx) `DataSet` (varsayılan) `DataReader`olarak değiştirerek veri kümesi yerine bir DataReader döndürecek şekilde yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-236">The SqlDataSource can be configured to return a DataReader instead of a DataSet by changing its [`DataSourceMode` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.sqldatasource.datasourcemode.aspx) from `DataSet` (the default) to `DataReader`.</span></span> <span data-ttu-id="e88eb-237">Bir DataReader kullanmak, SqlDataSource 'un sonuçları bir DataReader bekleyen mevcut koda geçirirken durumlarda tercih edilebilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-237">Using a DataReader might be preferred in situations when passing the SqlDataSource s results to existing code that expects a DataReader.</span></span> <span data-ttu-id="e88eb-238">Ayrıca, DataReaders, veri kümelerinden önemli ölçüde daha basit nesneler olduğundan, daha iyi performans sunar.</span><span class="sxs-lookup"><span data-stu-id="e88eb-238">Furthermore, since DataReaders are considerably simpler objects than DataSets, they offer better performance.</span></span> <span data-ttu-id="e88eb-239">Ancak bu değişikliği yaparsanız, SqlDataSource, sorgu tarafından kaç kayıt yapıldığını belirlemediğinden veya DataReader döndürülen verileri sıralamak için herhangi bir teknik sunduğundan, veri Web denetimi ne sıralama ne de sayfa değildir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-239">If you make this change, however, the data Web control can neither sort nor page since the SqlDataSource cannot ascertain how many records are returned by the query, nor does the DataReader offer any techniques for sorting the returned data.</span></span>

## <a name="step-4-using-a-custom-sql-statement-or-stored-procedure"></a><span data-ttu-id="e88eb-240">4\. Adım: özel bir SQL Ifadesini veya saklı yordamı kullanma</span><span class="sxs-lookup"><span data-stu-id="e88eb-240">Step 4: Using a Custom SQL Statement or Stored Procedure</span></span>

<span data-ttu-id="e88eb-241">SqlDataSource denetimini yapılandırırken, verileri döndürmek için kullanılan sorgu, özel bir SQL ifadesiyle veya saklı yordamda ya da varolan bir tablo ya da görünümden sütunlar olarak iki yaklaşımdan birinde belirtilebilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-241">When configuring the SqlDataSource control, the query used to return data can be specified in one of two approaches as a custom SQL statement or stored procedure, or as columns from an existing table or view.</span></span> <span data-ttu-id="e88eb-242">2\. adımda `Products` tablosundan sütunları seçmeyi inceledik.</span><span class="sxs-lookup"><span data-stu-id="e88eb-242">In Step 2 we examined selecting columns from the `Products` table.</span></span> <span data-ttu-id="e88eb-243">Özel bir SQL ifadesini kullanarak bakalım.</span><span class="sxs-lookup"><span data-stu-id="e88eb-243">Let s look at using a custom SQL statement.</span></span>

<span data-ttu-id="e88eb-244">`Querying.aspx` sayfasına başka bir GridView denetimi ekleyin ve akıllı etiketteki açılan listeden yeni bir veri kaynağı oluşturmayı seçin.</span><span class="sxs-lookup"><span data-stu-id="e88eb-244">Add another GridView control to the `Querying.aspx` page and choose to create a new data source from the drop-down list in the smart tag.</span></span> <span data-ttu-id="e88eb-245">Sonra, verilerin bir veritabanından çekileceğini, bu yeni bir SqlDataSource denetimi oluşturulacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-245">Next, indicate that the data will be pulled from a database this will create a new SqlDataSource control.</span></span> <span data-ttu-id="e88eb-246">Denetim `ProductsWithCategoryInfoDataSource`adlandırın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-246">Name the control `ProductsWithCategoryInfoDataSource`.</span></span>

![Productswithcategorınfodatasource adlı yeni bir SqlDataSource denetimi oluşturun](querying-data-with-the-sqldatasource-control-cs/_static/image18.gif)

<span data-ttu-id="e88eb-248">**Şekil 12**: `ProductsWithCategoryInfoDataSource` adlı yeni bir SqlDataSource denetimi oluşturma</span><span class="sxs-lookup"><span data-stu-id="e88eb-248">**Figure 12**: Create a New SqlDataSource Control Named `ProductsWithCategoryInfoDataSource`</span></span>

<span data-ttu-id="e88eb-249">Sonraki ekranda veritabanını belirtmemizi ister.</span><span class="sxs-lookup"><span data-stu-id="e88eb-249">The next screen asks us to specify the database.</span></span> <span data-ttu-id="e88eb-250">Şekil 7 ' ye geri döndüğünüzde, açılan listeden `NORTHWINDConnectionString` seçin ve Ileri ' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-250">As we did back in Figure 7, select the `NORTHWINDConnectionString` from the drop-down list and click Next.</span></span> <span data-ttu-id="e88eb-251">Select Ifadesini Yapılandır ekranında, özel bir SQL ifadesini veya saklı yordamı belirtin radyo düğmesini seçin ve Ileri ' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-251">In the Configure the Select Statement screen, choose the Specify a custom SQL statement or stored procedure radio button and click Next.</span></span> <span data-ttu-id="e88eb-252">Bu, SELECT, UPDATE, INSERT ve DELETE etiketli sekmeler sunan özel deyimler veya saklı yordamlar tanımla ekranını getirir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-252">This will bring up the Define Custom Statements or Stored Procedures screen, which offers tabs labeled SELECT, UPDATE, INSERT, and DELETE.</span></span> <span data-ttu-id="e88eb-253">Her sekmede, metin kutusuna özel bir SQL ifadesini girebilir veya açılan listeden bir saklı yordam seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e88eb-253">In each tab you can enter a custom SQL statement into the textbox or choose a stored procedure from the drop-down list.</span></span> <span data-ttu-id="e88eb-254">Bu öğreticide, özel bir SQL bildirisini girmeye bakacağız; sonraki öğreticide, saklı yordam kullanan bir örnek yer alır.</span><span class="sxs-lookup"><span data-stu-id="e88eb-254">In this tutorial we will look at entering a custom SQL statement; the next tutorial includes an example that uses a stored procedure.</span></span>

![Özel bir SQL Ifadesini girin veya saklı yordam seçin](querying-data-with-the-sqldatasource-control-cs/_static/image19.gif)

<span data-ttu-id="e88eb-256">**Şekil 13**: özel bir SQL ifadesini girin veya saklı yordam seçin</span><span class="sxs-lookup"><span data-stu-id="e88eb-256">**Figure 13**: Enter a Custom SQL Statement or Pick a Stored Procedure</span></span>

<span data-ttu-id="e88eb-257">Özel SQL deyimleri metin kutusuna el ile girilebilir veya Sorgu Tasarımcısı düğmesine tıklanarak grafiksel olarak oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-257">The custom SQL statement can be entered by hand into the textbox or can be constructed graphically by clicking the Query Builder button.</span></span> <span data-ttu-id="e88eb-258">Sorgu Tasarımcısı veya metin kutusundan, `JOIN` tablosundan ürün s `CategoryName` almak için `Categories` kullanarak `Products` tablosundan `ProductID` ve `ProductName` alanları döndürmek için aşağıdaki sorguyu kullanın:</span><span class="sxs-lookup"><span data-stu-id="e88eb-258">From either the Query Builder or the textbox, use the following query to return the `ProductID` and `ProductName` fields from the `Products` table using a `JOIN` to retrieve the product s `CategoryName` from the `Categories` table:</span></span>

[!code-sql[Main](querying-data-with-the-sqldatasource-control-cs/samples/sample4.sql)]

![Sorgu Tasarımcısı kullanarak sorguyu grafiksel olarak oluşturabilirsiniz](querying-data-with-the-sqldatasource-control-cs/_static/image20.gif)

<span data-ttu-id="e88eb-260">**Şekil 14**: Sorgu Tasarımcısı kullanarak sorguyu grafik olarak oluşturabilirsiniz</span><span class="sxs-lookup"><span data-stu-id="e88eb-260">**Figure 14**: You can Graphically Construct the Query Using the Query Builder</span></span>

<span data-ttu-id="e88eb-261">Sorguyu belirttikten sonra, test sorgu ekranına ilerlemek için Ileri ' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-261">After specifying the query, click Next to proceed to the Test Query screen.</span></span> <span data-ttu-id="e88eb-262">SqlDataSource sihirbazını gerçekleştirmek için son ' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e88eb-262">Click Finish to complete the SqlDataSource wizard.</span></span>

<span data-ttu-id="e88eb-263">Sihirbazı tamamladıktan sonra GridView 'un, sorgudan döndürülen `ProductID`, `ProductName`ve `CategoryName` sütunları görüntüleyerek üç BoundFields eklenir ve aşağıdaki bildirime dayalı biçimlendirme elde edilir:</span><span class="sxs-lookup"><span data-stu-id="e88eb-263">After completing the wizard, the GridView will have three BoundFields added to it displaying the `ProductID`, `ProductName`, and `CategoryName` columns returned from the query and resulting in the following declarative markup:</span></span>

[!code-aspx[Main](querying-data-with-the-sqldatasource-control-cs/samples/sample5.aspx)]

<span data-ttu-id="e88eb-264">[GridView ![her ürün KIMLIĞI, adı ve Ilişkili kategori adını gösterir](querying-data-with-the-sqldatasource-control-cs/_static/image22.gif)](querying-data-with-the-sqldatasource-control-cs/_static/image21.gif)</span><span class="sxs-lookup"><span data-stu-id="e88eb-264">[![The GridView Shows Each Product s ID, Name, and Associated Category Name](querying-data-with-the-sqldatasource-control-cs/_static/image22.gif)](querying-data-with-the-sqldatasource-control-cs/_static/image21.gif)</span></span>

<span data-ttu-id="e88eb-265">**Şekil 15**: GridView her ürün kimliği, adı ve Ilişkili kategori adını gösterir ([tam boyutlu görüntüyü görüntülemek için tıklayın](querying-data-with-the-sqldatasource-control-cs/_static/image23.gif))</span><span class="sxs-lookup"><span data-stu-id="e88eb-265">**Figure 15**: The GridView Shows Each Product s ID, Name, and Associated Category Name ([Click to view full-size image](querying-data-with-the-sqldatasource-control-cs/_static/image23.gif))</span></span>

## <a name="summary"></a><span data-ttu-id="e88eb-266">Özet</span><span class="sxs-lookup"><span data-stu-id="e88eb-266">Summary</span></span>

<span data-ttu-id="e88eb-267">Bu öğreticide, SqlDataSource denetimini kullanarak verileri sorgulama ve görüntüleme hakkında gördük.</span><span class="sxs-lookup"><span data-stu-id="e88eb-267">In this tutorial we saw how to query and display data using the SqlDataSource control.</span></span> <span data-ttu-id="e88eb-268">ObjectDataSource gibi, SqlDataSource bir proxy görevi görür ve verilere erişmek için bildirim temelli bir yaklaşım sağlar.</span><span class="sxs-lookup"><span data-stu-id="e88eb-268">Like the ObjectDataSource, the SqlDataSource serves as a proxy, providing a declarative approach to accessing data.</span></span> <span data-ttu-id="e88eb-269">Özellikleri bağlanılacak veritabanını ve yürütülecek SQL `SELECT` sorgusunu belirtir; Özellikler penceresi veya veri kaynağı Yapılandırma Sihirbazı kullanılarak belirtilebilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-269">Its properties specify the database to connect to and the SQL `SELECT` query to execute; they can be specified through the Properties window or by using the Configure DataSource wizard.</span></span>

<span data-ttu-id="e88eb-270">Bu öğreticide incelenen `SELECT` sorgu örnekleri, belirtilen sorgudaki tüm kayıtları döndürdü.</span><span class="sxs-lookup"><span data-stu-id="e88eb-270">The `SELECT` query examples we examined in this tutorial returned all of the records from the specified query.</span></span> <span data-ttu-id="e88eb-271">Ancak, SqlDataSource denetimi, değerleri programlı olarak atanan veya belirtilen bir kaynaktan otomatik olarak çekilen parametrelere sahip bir `WHERE` yan tümcesi içerebilir.</span><span class="sxs-lookup"><span data-stu-id="e88eb-271">The SqlDataSource control, however, can include a `WHERE` clause with parameters whose values are assigned programmatically or are automatically pulled from a specified source.</span></span> <span data-ttu-id="e88eb-272">Sonraki öğreticide parametreli sorgular oluşturmayı ve kullanmayı inceleyeceğiz!</span><span class="sxs-lookup"><span data-stu-id="e88eb-272">We'll examine how to create and use parameterized queries in the next tutorial!</span></span>

<span data-ttu-id="e88eb-273">Programlamanın kutlu olsun!</span><span class="sxs-lookup"><span data-stu-id="e88eb-273">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="e88eb-274">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="e88eb-274">Further Reading</span></span>

<span data-ttu-id="e88eb-275">Bu öğreticide ele alınan konular hakkında daha fazla bilgi için aşağıdaki kaynaklara bakın:</span><span class="sxs-lookup"><span data-stu-id="e88eb-275">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="e88eb-276">Ilişkisel veritabanı verilerine erişme</span><span class="sxs-lookup"><span data-stu-id="e88eb-276">Accessing Relational Database Data</span></span>](http://aspnet.4guysfromrolla.com/articles/022206-1.aspx)
- [<span data-ttu-id="e88eb-277">SqlDataSource denetimine genel bakış</span><span class="sxs-lookup"><span data-stu-id="e88eb-277">SqlDataSource Control Overview</span></span>](https://msdn.microsoft.com/library/dz12d98w.aspx)
- [<span data-ttu-id="e88eb-278">ASP.NET hızlı başlangıç öğreticileri: SqlDataSource denetimi</span><span class="sxs-lookup"><span data-stu-id="e88eb-278">ASP.NET Quickstart Tutorials: The SqlDataSource Control</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/data/sqldatasource.aspx)
- [<span data-ttu-id="e88eb-279">Web. config `<connectionStrings>` öğesi</span><span class="sxs-lookup"><span data-stu-id="e88eb-279">The Web.config `<connectionStrings>` Element</span></span>](https://msdn.microsoft.com/library/bf7sd233.aspx)
- [<span data-ttu-id="e88eb-280">Veritabanı bağlantı dizesi başvurusu</span><span class="sxs-lookup"><span data-stu-id="e88eb-280">Database Connection String Reference</span></span>](http://www.connectionstrings.com/)

## <a name="about-the-author"></a><span data-ttu-id="e88eb-281">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="e88eb-281">About the Author</span></span>

<span data-ttu-id="e88eb-282">4GuysFromRolla.com 'in, [Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), yedi ASP/ASP. net books ve [](http://www.4guysfromrolla.com)'in yazarı, 1998 sürümünden bu yana Microsoft Web teknolojileriyle çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="e88eb-282">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="e88eb-283">Scott bağımsız danışman, Trainer ve yazıcı olarak çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="e88eb-283">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="e88eb-284">En son kitabı, [*24 saat içinde ASP.NET 2,0 kendi kendinize eğitim*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)ister.</span><span class="sxs-lookup"><span data-stu-id="e88eb-284">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="e88eb-285">mitchell@4GuysFromRolla.comadresinden erişilebilir [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="e88eb-285">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="e88eb-286">ya da blog aracılığıyla [http://ScottOnWriting.NET](http://ScottOnWriting.NET)bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e88eb-286">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="e88eb-287">Özel olarak teşekkürler</span><span class="sxs-lookup"><span data-stu-id="e88eb-287">Special Thanks To</span></span>

<span data-ttu-id="e88eb-288">Bu öğretici serisi birçok yararlı gözden geçirenler tarafından incelendi.</span><span class="sxs-lookup"><span data-stu-id="e88eb-288">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="e88eb-289">Bu öğreticide müşteri adayı gözden geçirenler, Çiğdem Connery, Bernadette Leigh ve David suru.</span><span class="sxs-lookup"><span data-stu-id="e88eb-289">Lead reviewers for this tutorial were Susan Connery, Bernadette Leigh, and David Suru.</span></span> <span data-ttu-id="e88eb-290">Yaklaşan MSDN makalelerimi gözden geçiriyor musunuz?</span><span class="sxs-lookup"><span data-stu-id="e88eb-290">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="e88eb-291">Öyleyse, benimitchell@4GuysFromRolla.combir satır bırakın [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="e88eb-291">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="e88eb-292">Next</span><span class="sxs-lookup"><span data-stu-id="e88eb-292">Next</span></span>](using-parameterized-queries-with-the-sqldatasource-cs.md)
