---
uid: web-forms/overview/data-access/accessing-the-database-directly-from-an-aspnet-page/inserting-updating-and-deleting-data-with-the-sqldatasource-cs
title: Ekleme, güncelleştirme ve silme (C#) SqlDataSource ile veri | Microsoft Docs
author: rick-anderson
description: Önceki öğreticilerde ObjectDataSource Denetimi, ekleme, güncelleştirme ve verileri silmek için nasıl izin öğrendiniz. SqlDataSource denetimi t destekler...
ms.author: riande
ms.date: 02/20/2007
ms.assetid: a526f0ec-779e-4a2b-a476-6604090d25ce
msc.legacyurl: /web-forms/overview/data-access/accessing-the-database-directly-from-an-aspnet-page/inserting-updating-and-deleting-data-with-the-sqldatasource-cs
msc.type: authoredcontent
ms.openlocfilehash: 2c52fcf746d80899d7ea568c8110c4dfa610224c
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57071049"
---
<a name="inserting-updating-and-deleting-data-with-the-sqldatasource-c"></a><span data-ttu-id="2544c-104">SqlDataSource ile Veri Ekleme, Güncelleştirme ve Silme (C#)</span><span class="sxs-lookup"><span data-stu-id="2544c-104">Inserting, Updating, and Deleting Data with the SqlDataSource (C#)</span></span>
====================
<span data-ttu-id="2544c-105">tarafından [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="2544c-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="2544c-106">[Örnek uygulamayı indirin](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_49_CS.exe) veya [PDF olarak indirin](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/datatutorial49cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="2544c-106">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_49_CS.exe) or [Download PDF](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/datatutorial49cs1.pdf)</span></span>

> <span data-ttu-id="2544c-107">Önceki öğreticilerde ObjectDataSource Denetimi, ekleme, güncelleştirme ve verileri silmek için nasıl izin öğrendiniz.</span><span class="sxs-lookup"><span data-stu-id="2544c-107">In previous tutorials we learned how the ObjectDataSource control allowed for inserting, updating, and deleting of data.</span></span> <span data-ttu-id="2544c-108">SqlDataSource denetimi aynı işlemleri destekler ancak farklı bir yaklaşımdır ve Bu öğreticide, ekleme, güncelleştirme ve verileri silmek için SqlDataSource yapılandırma işlemi gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="2544c-108">The SqlDataSource control supports the same operations, but the approach is different, and this tutorial shows how to configure the SqlDataSource to insert, update, and delete data.</span></span>


## <a name="introduction"></a><span data-ttu-id="2544c-109">Giriş</span><span class="sxs-lookup"><span data-stu-id="2544c-109">Introduction</span></span>

<span data-ttu-id="2544c-110">Bölümünde açıklandığı gibi [bir genel bakış, güncelleştirme ve silme ekleme,](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), yerleşik güncelleştirme GridView denetiminde sağlar ve DetailsView ve FormView denetimleri ekleme içerirken silme özellikleri desteği ile birlikte düzenleme ve silme işlevleri.</span><span class="sxs-lookup"><span data-stu-id="2544c-110">As discussed in [An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), the GridView control provides built-in updating and deleting capabilities, while the DetailsView and FormView controls include inserting support along with editing and deleting functionality.</span></span> <span data-ttu-id="2544c-111">Bu veri değişikliği özellikleri veri kaynağı denetimi bir satır kod yazılması gerek kalmadan doğrudan takılabilir.</span><span class="sxs-lookup"><span data-stu-id="2544c-111">These data modification capabilities can be plugged directly into a data source control without a line of code needing to be written.</span></span> <span data-ttu-id="2544c-112">[Bir genel bakış, güncelleştirme ve silme ekleme,](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) ekleme, güncelleştirme ve silme ile FormView GridView ve DetailsView denetimlerini kolaylaştırmak için ObjectDataSource kullanma incelenir.</span><span class="sxs-lookup"><span data-stu-id="2544c-112">[An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) examined using the ObjectDataSource to facilitate inserting, updating, and deleting with the GridView, DetailsView, and FormView controls.</span></span> <span data-ttu-id="2544c-113">Alternatif olarak, SqlDataSource ObjectDataSource yerine kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="2544c-113">Alternatively, the SqlDataSource can be used in place of the ObjectDataSource.</span></span>

<span data-ttu-id="2544c-114">Ekleme, güncelleştirme ve silme, biz INSERT gerçekleştirmek için çağrılacak nesne katmanı yöntemlerini belirtmek için güncelleştirme veya silme eylemi ObjectDataSource ile desteklemek için geri çağırma.</span><span class="sxs-lookup"><span data-stu-id="2544c-114">Recall that to support inserting, updating, and deleting, with the ObjectDataSource we needed to specify the object layer methods to invoke to perform the insert, update, or delete action.</span></span> <span data-ttu-id="2544c-115">Sağlamak için ihtiyacımız SqlDataSource ile `INSERT`, `UPDATE`, ve `DELETE` SQL deyimleri (veya saklı yordamları) yürütmek için.</span><span class="sxs-lookup"><span data-stu-id="2544c-115">With the SqlDataSource, we need to provide `INSERT`, `UPDATE`, and `DELETE` SQL statements (or stored procedures) to execute.</span></span> <span data-ttu-id="2544c-116">Bu öğreticide anlatıldığı gibi bu deyimler el ile oluşturulabilir veya SqlDataSource s veri kaynağı Yapılandırma Sihirbazı tarafından otomatik olarak oluşturulabilir.</span><span class="sxs-lookup"><span data-stu-id="2544c-116">As we'll see in this tutorial, these statements can be created manually or can be automatically generated by the SqlDataSource s Configure Data Source wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="2544c-117">Bu yana ve zaten ekleme, düzenleme ve DetailsView, GridView yeteneklerini silme ele almıştık ve FormView denetler, bu öğreticide işlemlerini desteklemek için SqlDataSource denetimi yapılandırma üzerinde odaklanır.</span><span class="sxs-lookup"><span data-stu-id="2544c-117">Since we ve already discussed the inserting, editing, and deleting capabilities of the GridView, DetailsView, and FormView controls, this tutorial will focus on configuring the SqlDataSource control to support these operations.</span></span> <span data-ttu-id="2544c-118">Bu özellikler düzenleme, ekleme ve silme veri öğreticiler GridView DetailsView ve FormView dönüşü içinde uygulamaya tazelemek istiyorsanız başlayarak [bir genel bakış, güncelleştirme ve silme ekleme,](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md).</span><span class="sxs-lookup"><span data-stu-id="2544c-118">If you need to brush up on implementing these features within the GridView, DetailsView, and FormView, return to the Editing, Inserting, and Deleting Data tutorials, starting with [An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md).</span></span>


## <a name="step-1-specifyinginsertupdate-anddeletestatements"></a><span data-ttu-id="2544c-119">1. Adım: Belirtme`INSERT`,`UPDATE`, ve`DELETE`deyimleri</span><span class="sxs-lookup"><span data-stu-id="2544c-119">Step 1: Specifying`INSERT`,`UPDATE`, and`DELETE`Statements</span></span>

<span data-ttu-id="2544c-120">Olarak seçmeliyiz SqlDataSource denetimden verileri almak üzere son iki öğreticilerde görülen ve iki özelliği ayarlayın:</span><span class="sxs-lookup"><span data-stu-id="2544c-120">As we ve seen in the past two tutorials, to retrieve data from a SqlDataSource control we need to set two properties:</span></span>

1. <span data-ttu-id="2544c-121">`ConnectionString`, ne, sorgu göndermek için veritabanı belirtir ve</span><span class="sxs-lookup"><span data-stu-id="2544c-121">`ConnectionString`, which specifies what database to send the query to, and</span></span>
2. <span data-ttu-id="2544c-122">`SelectCommand`, geçici SQL deyiminin veya saklı yordam adı sonuçları döndürmek için yürütülecek belirtir.</span><span class="sxs-lookup"><span data-stu-id="2544c-122">`SelectCommand`, which specifies the ad-hoc SQL statement or stored procedure name to execute to return the results.</span></span>

<span data-ttu-id="2544c-123">İçin `SelectCommand` parametreleriyle değerleri, değerler SqlDataSource s belirtilen parametre `SelectParameters` koleksiyonu ve ortak parametre kaynak değerlerini sabit kodlu değer içerebilir (querystring alanları, oturum değişkenleri Web denetim değerleri ve VS.) ya da programlı bir şekilde atanabilir.</span><span class="sxs-lookup"><span data-stu-id="2544c-123">For `SelectCommand` values with parameters, the parameter values are specified via the SqlDataSource s `SelectParameters` collection and can include hard-coded values, common parameter source values (querystring fields, session variables, Web control values, and so on), or can be programmatically assigned.</span></span> <span data-ttu-id="2544c-124">SqlDataSource denetlemek s `Select()` yöntemi Web denetimi veri çağrılması programlama yoluyla veya otomatik olarak veritabanına bir bağlantı kurulur, sorgu parametresi değerler atanır ve için Kapat komutunu shuttled Veritabanı.</span><span class="sxs-lookup"><span data-stu-id="2544c-124">When the SqlDataSource control s `Select()` method is invoked either programmatically or automatically from a data Web control a connection to the database is established, the parameter values are assigned to the query, and the command is shuttled off to the database.</span></span> <span data-ttu-id="2544c-125">Sonuçlar daha sonra bir veri kümesi veya DataReader, ' s denetimin değerine bağlı olarak döndürülen `DataSourceMode` özelliği.</span><span class="sxs-lookup"><span data-stu-id="2544c-125">The results are then returned as either a DataSet or DataReader, depending on the value of the control s `DataSourceMode` property.</span></span>

<span data-ttu-id="2544c-126">Verileri seçme birlikte SqlDataSource denetimi ekleme, güncelleştirme ve verileri sağlayarak silmek için kullanılabilir `INSERT`, `UPDATE`, ve `DELETE` SQL deyimlerinde epey benzer.</span><span class="sxs-lookup"><span data-stu-id="2544c-126">Along with selecting data, the SqlDataSource control can be used to insert, update, and delete data by supplying `INSERT`, `UPDATE`, and `DELETE` SQL statements in much the same way.</span></span> <span data-ttu-id="2544c-127">Yalnızca Ata `InsertCommand`, `UpdateCommand`, ve `DeleteCommand` özellikleri `INSERT`, `UPDATE`, ve `DELETE` SQL deyimleri yürütmek için.</span><span class="sxs-lookup"><span data-stu-id="2544c-127">Simply assign the `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties the `INSERT`, `UPDATE`, and `DELETE` SQL statements to execute.</span></span> <span data-ttu-id="2544c-128">(Her zaman en göründükleri gibi) ifadeler parametrelere sahip olup, içine dahil `InsertParameters`, `UpdateParameters`, ve `DeleteParameters` koleksiyonları.</span><span class="sxs-lookup"><span data-stu-id="2544c-128">If the statements have parameters (as they most always will), include them in the `InsertParameters`, `UpdateParameters`, and `DeleteParameters` collections.</span></span>

<span data-ttu-id="2544c-129">Bir kez bir `InsertCommand`, `UpdateCommand`, veya `DeleteCommand` değer belirtilmiş, karşılık gelen verileri Web denetimi s akıllı etiket ekleme etkinleştirmek, düzenlemeyi etkinleştir ya da silmeyi etkinleştir seçeneği kullanılabilir olur.</span><span class="sxs-lookup"><span data-stu-id="2544c-129">Once an `InsertCommand`, `UpdateCommand`, or `DeleteCommand` value has been specified, the Enable Inserting, Enable Editing, or Enable Deleting option in the corresponding data Web control s smart tag will become available.</span></span> <span data-ttu-id="2544c-130">Let s bunu göstermek için bir örnekten ele `Querying.aspx` oluşturduğumuz sayfa [SqlDataSource denetimi ile veri sorgulama](querying-data-with-the-sqldatasource-control-cs.md) öğretici ve ayırma özellikleri içerecek şekilde silin.</span><span class="sxs-lookup"><span data-stu-id="2544c-130">To illustrate this, let s take an example from the `Querying.aspx` page we created in the [Querying Data with the SqlDataSource Control](querying-data-with-the-sqldatasource-control-cs.md) tutorial and augment it to include delete capabilities.</span></span>

<span data-ttu-id="2544c-131">Başlangıç açarak `InsertUpdateDelete.aspx` ve `Querying.aspx` gelen sayfaları `SqlDataSource` klasör.</span><span class="sxs-lookup"><span data-stu-id="2544c-131">Start by opening the `InsertUpdateDelete.aspx` and `Querying.aspx` pages from the `SqlDataSource` folder.</span></span> <span data-ttu-id="2544c-132">Üzerinde Tasarımcısından `Querying.aspx` sayfasında, ilk örnekte SqlDataSource ve GridView seçin ( `ProductsDataSource` ve `GridView1` denetimleri).</span><span class="sxs-lookup"><span data-stu-id="2544c-132">From the Designer on the `Querying.aspx` page, select the SqlDataSource and GridView from the first example (the `ProductsDataSource` and `GridView1` controls).</span></span> <span data-ttu-id="2544c-133">İki denetimi seçtikten sonra düzenleme menüsüne gidin ve Kopyala'yı seçin (veya Ctrl + C yalnızca isabet).</span><span class="sxs-lookup"><span data-stu-id="2544c-133">After selecting the two controls, go to the Edit menu and choose Copy (or just hit Ctrl+C).</span></span> <span data-ttu-id="2544c-134">Ardından, tasarımcısına Git `InsertUpdateDelete.aspx` denetimlerinde yapıştırın.</span><span class="sxs-lookup"><span data-stu-id="2544c-134">Next, go to the Designer of `InsertUpdateDelete.aspx` and paste in the controls.</span></span> <span data-ttu-id="2544c-135">Sonra iki denetim e taşınmış `InsertUpdateDelete.aspx`, test bir tarayıcıda sayfası.</span><span class="sxs-lookup"><span data-stu-id="2544c-135">After you have moved the two controls over to `InsertUpdateDelete.aspx`, test out the page in a browser.</span></span> <span data-ttu-id="2544c-136">Değerlerini görmelisiniz `ProductID`, `ProductName`, ve `UnitPrice` tüm kayıtları için sütunları `Products` veritabanı tablosu.</span><span class="sxs-lookup"><span data-stu-id="2544c-136">You should see the values of the `ProductID`, `ProductName`, and `UnitPrice` columns for all of the records in the `Products` database table.</span></span>


<span data-ttu-id="2544c-137">[![Tüm ürünleri, sıralı ProductID listelenir](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="2544c-137">[![All of the Products are Listed, Ordered by ProductID](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.png)</span></span>

<span data-ttu-id="2544c-138">**Şekil 1**: Tüm ürünleri, göre sıralanmış listelenen `ProductID` ([tam boyutlu görüntüyü görmek için tıklatın](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="2544c-138">**Figure 1**: All of the Products are Listed, Ordered by `ProductID` ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image2.png))</span></span>


## <a name="adding-the-sqldatasource-sdeletecommandanddeleteparametersproperties"></a><span data-ttu-id="2544c-139">SqlDataSource s ekleme`DeleteCommand`ve`DeleteParameters`özellikleri</span><span class="sxs-lookup"><span data-stu-id="2544c-139">Adding the SqlDataSource s`DeleteCommand`and`DeleteParameters`Properties</span></span>

<span data-ttu-id="2544c-140">Bu noktada yalnızca tüm kayıtları döndüren bir SqlDataSource sahibiz `Products` tablo ve bu verileri işleyen GridView.</span><span class="sxs-lookup"><span data-stu-id="2544c-140">At this point we have a SqlDataSource that simply returns all of the records from the `Products` table and a GridView that renders this data.</span></span> <span data-ttu-id="2544c-141">Hedefimiz, kullanıcının ürünleri GridView aracılığıyla silmek izin vermek için bu örneği genişletmek sağlamaktır.</span><span class="sxs-lookup"><span data-stu-id="2544c-141">Our goal is to extend this example to allow for the user to delete products via the GridView.</span></span> <span data-ttu-id="2544c-142">SqlDataSource denetimi s değerlerini belirtmek için ihtiyacımız bunu sağlamak için `DeleteCommand` ve `DeleteParameters` özellikleri ve GridView silme destekleyecek şekilde yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="2544c-142">To accomplish this we need to specify values for the SqlDataSource control s `DeleteCommand` and `DeleteParameters` properties and then configure the GridView to support deleting.</span></span>

<span data-ttu-id="2544c-143">`DeleteCommand` Ve `DeleteParameters` özellikleri çeşitli şekillerde belirtilebilir:</span><span class="sxs-lookup"><span data-stu-id="2544c-143">The `DeleteCommand` and `DeleteParameters` properties can be specified in a number of ways:</span></span>

- <span data-ttu-id="2544c-144">Bildirim temelli söz dizimi aracılığıyla</span><span class="sxs-lookup"><span data-stu-id="2544c-144">Through the declarative syntax</span></span>
- <span data-ttu-id="2544c-145">Tasarımcıda Özellikler penceresinden</span><span class="sxs-lookup"><span data-stu-id="2544c-145">From the Properties window in the Designer</span></span>
- <span data-ttu-id="2544c-146">Özel bir SQL deyimi belirtin veya saklı yordam ekranından veri kaynağı Yapılandırma Sihirbazı</span><span class="sxs-lookup"><span data-stu-id="2544c-146">From the Specify a custom SQL statement or stored procedure screen in the Configure Data Source wizard</span></span>
- <span data-ttu-id="2544c-147">Görünüm ekranında veri kaynağı Yapılandırma Sihirbazı'nı bir tablo belirtin sütunlarından Gelişmiş düğmesi aracılığıyla, otomatik olarak oluşturacağını `DELETE` kullanılan SQL deyimi ve parametre koleksiyonu `DeleteCommand` ve `DeleteParameters` özellikleri</span><span class="sxs-lookup"><span data-stu-id="2544c-147">Via the Advanced button in the Specify columns from a table of view screen in the Configure Data Source wizard, which will actually automatically generate the `DELETE` SQL statement and parameter collection used in the `DeleteCommand` and `DeleteParameters` properties</span></span>

<span data-ttu-id="2544c-148">Otomatik olarak nasıl inceleyeceğiz `DELETE` deyimi 2. adımda oluşturmuştunuz.</span><span class="sxs-lookup"><span data-stu-id="2544c-148">We'll examine how to automatically have the `DELETE` statement created in Step 2.</span></span> <span data-ttu-id="2544c-149">Veri Kaynağı Yapılandırma Sihirbazı'nı veya bildirim temelli söz dizimi seçeneği da çalışır ancak şimdilik s Tasarımcısı'nda Özellikler penceresini kullanın olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="2544c-149">For now, let s use the Properties window in the Designer, although the Configure Data Source wizard or declarative syntax option would work just as well.</span></span>

<span data-ttu-id="2544c-150">Tasarımcıda gelen `InsertUpdateDelete.aspx`, tıklayarak `ProductsDataSource` SqlDataSource ve ardından Özellikler penceresini açın (Görünüm menüsünden, Özellikler penceresinde seçin veya yalnızca, F4 isabet).</span><span class="sxs-lookup"><span data-stu-id="2544c-150">From the Designer in `InsertUpdateDelete.aspx`, click on the `ProductsDataSource` SqlDataSource and then bring up the Properties window (from the View menu, choose Properties window, or simply hit F4).</span></span> <span data-ttu-id="2544c-151">Üç nokta kümesi getirecek DeleteQuery özelliği seçin.</span><span class="sxs-lookup"><span data-stu-id="2544c-151">Select the DeleteQuery property, which will bring up a set of ellipses.</span></span>


![DeleteQuery özelliğini Özellikler penceresinden seçin](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image2.gif)

<span data-ttu-id="2544c-153">**Şekil 2**: DeleteQuery özelliğini Özellikler penceresinden seçin</span><span class="sxs-lookup"><span data-stu-id="2544c-153">**Figure 2**: Select the DeleteQuery Property from the Properties Window</span></span>


> [!NOTE]
> <span data-ttu-id="2544c-154">SqlDataSource eklenmemişse t bir DeleteQuery özellik vardır.</span><span class="sxs-lookup"><span data-stu-id="2544c-154">The SqlDataSource doesn t have a DeleteQuery property.</span></span> <span data-ttu-id="2544c-155">Bunun yerine, DeleteQuery birleşimidir `DeleteCommand` ve `DeleteParameters` özellikleri ve Özellikler penceresinde Tasarımcı penceresinden görüntülerken yalnızca listelenir.</span><span class="sxs-lookup"><span data-stu-id="2544c-155">Rather, DeleteQuery is a combination of the `DeleteCommand` and `DeleteParameters` properties and is only listed in the Properties window when viewing the window through the Designer.</span></span> <span data-ttu-id="2544c-156">Kaynak Görünümü Özellikler penceresinde bakıyorsanız bulabilirsiniz `DeleteCommand` özelliği bunun yerine.</span><span class="sxs-lookup"><span data-stu-id="2544c-156">If you are looking at the Properties window in the Source view, you'll find the `DeleteCommand` property instead.</span></span>


<span data-ttu-id="2544c-157">Komut ve parametre Düzenleyicisi iletişim kutusunu açmak için DeleteQuery özelliğinde üç noktayı (bkz. Şekil 3) kutusuna tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2544c-157">Click the ellipses in the DeleteQuery property to bring up the Command and Parameter Editor dialog box (see Figure 3).</span></span> <span data-ttu-id="2544c-158">Bu iletişim kutusunda belirttiğiniz `DELETE` SQL deyimi ve parametreleri belirtin.</span><span class="sxs-lookup"><span data-stu-id="2544c-158">From this dialog box you can specify the `DELETE` SQL statement and specify the parameters.</span></span> <span data-ttu-id="2544c-159">Aşağıdaki sorguyu girin `DELETE` komut textbox (ya da el ile veya tercih ederseniz, Sorgu Oluşturucusu'nu kullanarak):</span><span class="sxs-lookup"><span data-stu-id="2544c-159">Enter the following query into the `DELETE` command textbox (either manually or using the Query Builder, if you prefer):</span></span>

[!code-sql[Main](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/samples/sample1.sql)]

<span data-ttu-id="2544c-160">Ardından, eklemek için parametreleri Yenile düğmesini `@ProductID` parametresini aşağıdaki parametrelerin listesi.</span><span class="sxs-lookup"><span data-stu-id="2544c-160">Next, click the Refresh Parameters button to add the `@ProductID` parameter to the list of parameters below.</span></span>


<span data-ttu-id="2544c-161">[![DeleteQuery özelliğini Özellikler penceresinden seçin](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="2544c-161">[![Select the DeleteQuery Property from the Properties Window](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.png)</span></span>

<span data-ttu-id="2544c-162">**Şekil 3**: DeleteQuery özelliğini Özellikler penceresinden seçin ([tam boyutlu görüntüyü görmek için tıklatın](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="2544c-162">**Figure 3**: Select the DeleteQuery Property from the Properties Window ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.png))</span></span>


<span data-ttu-id="2544c-163">Yapmak *değil* (bırakın, parametresi None kaynak) Bu parametre için bir değer sağlayın.</span><span class="sxs-lookup"><span data-stu-id="2544c-163">Do *not* provide a value for this parameter (leave its Parameter source at None ).</span></span> <span data-ttu-id="2544c-164">Silme desteği GridView'a eklediğinizde GridView otomatik olarak bu parametre değerini kullanarak sağlayacak kendi `DataKeys` olan Sil düğmesine tıklanana satır koleksiyonu.</span><span class="sxs-lookup"><span data-stu-id="2544c-164">Once we add deleting support to the GridView, the GridView will automatically supply this parameter value, using the value of its `DataKeys` collection for the row whose Delete button was clicked.</span></span>

> [!NOTE]
> <span data-ttu-id="2544c-165">Kullanılan parametre adı `DELETE` sorgu *gerekir* adı ile aynı olması `DataKeyNames` GridView, DetailsView veya FormView değeri.</span><span class="sxs-lookup"><span data-stu-id="2544c-165">The parameter name used in the `DELETE` query *must* be the same as the name of the `DataKeyNames` value in the GridView, DetailsView, or FormView.</span></span> <span data-ttu-id="2544c-166">Diğer bir deyişle, parametreyi `DELETE` deyimi kullanılamıyor.%n%nÇözüm adlı `@ProductID` (yerine, örneğin `@ID`), Ürünler tablosu (ve bu nedenle GridView DataKeyNames değer) birincil anahtar sütunu adı olduğundan `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="2544c-166">That is, the parameter in the `DELETE` statement is purposefully named `@ProductID` (instead of, say, `@ID`), because the primary key column name in the Products table (and therefore the DataKeyNames value in the GridView) is `ProductID`.</span></span>


<span data-ttu-id="2544c-167">Parametre adı ve `DataKeyNames` değeri eklenmemişse t eşleşme GridView otomatik olarak atayamazsınız parametresi değerinden `DataKeys` koleksiyonu.</span><span class="sxs-lookup"><span data-stu-id="2544c-167">If the parameter name and `DataKeyNames` value doesn t match, the GridView cannot automatically assign the parameter the value from the `DataKeys` collection.</span></span>

<span data-ttu-id="2544c-168">Komut ve parametre Düzenleyicisi iletişim kutusuna delete ile ilgili bilgileri girdikten sonra Tamam'a tıklayın ve ortaya çıkan bildirim temelli biçimlendirme incelemek için kaynak görünümüne gidin:</span><span class="sxs-lookup"><span data-stu-id="2544c-168">After entering the delete-related information into the Command and Parameter Editor dialog box click OK and go to the Source view to examine the resulting declarative markup:</span></span>

[!code-aspx[Main](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/samples/sample2.aspx)]

<span data-ttu-id="2544c-169">Ek unutmayın `DeleteCommand` özelliği yanı sıra `<DeleteParameters>` bölümü ve adlı parametre nesnesini `productID`.</span><span class="sxs-lookup"><span data-stu-id="2544c-169">Note the addition of the `DeleteCommand` property as well as the `<DeleteParameters>` section and the Parameter object named `productID`.</span></span>

## <a name="configuring-the-gridview-for-deleting"></a><span data-ttu-id="2544c-170">GridView'ın silmek için yapılandırma</span><span class="sxs-lookup"><span data-stu-id="2544c-170">Configuring the GridView for Deleting</span></span>

<span data-ttu-id="2544c-171">İle `DeleteCommand` özelliği eklendi, GridView s akıllı etiket artık Silmeyi Etkinleştir seçeneği içerir.</span><span class="sxs-lookup"><span data-stu-id="2544c-171">With the `DeleteCommand` property added, the GridView s smart tag now contains the Enable Deleting option.</span></span> <span data-ttu-id="2544c-172">Devam edip bu onay kutusunu işaretleyin.</span><span class="sxs-lookup"><span data-stu-id="2544c-172">Go ahead and check this checkbox.</span></span> <span data-ttu-id="2544c-173">Bölümünde açıklandığı gibi [bir genel bakış, güncelleştirme ve silme ekleme,](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), GridView ile bir CommandField eklemek bu neden olur, `ShowDeleteButton` özelliğini `true`.</span><span class="sxs-lookup"><span data-stu-id="2544c-173">As discussed in [An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), this causes the GridView to add a CommandField with its `ShowDeleteButton` property set to `true`.</span></span> <span data-ttu-id="2544c-174">Bir tarayıcıdan sayfayı ziyaret edildiğinde 4 gösterir, Şekil gibi Sil düğmesini dahil edilir.</span><span class="sxs-lookup"><span data-stu-id="2544c-174">As Figure 4 shows, when the page is visited through a browser a Delete button is included.</span></span> <span data-ttu-id="2544c-175">Bu sayfa, bazı ürünler silerek test edin.</span><span class="sxs-lookup"><span data-stu-id="2544c-175">Test this page out by deleting some products.</span></span>


<span data-ttu-id="2544c-176">[![Her GridView Satır Sil düğmesini artık içerir.](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="2544c-176">[![Each GridView Row Now Includes a Delete Button](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image5.png)</span></span>

<span data-ttu-id="2544c-177">**Şekil 4**: Her GridView satırında bir Sil düğmesini artık içerir ([tam boyutlu görüntüyü görmek için tıklatın](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="2544c-177">**Figure 4**: Each GridView Row Now Includes a Delete Button ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.png))</span></span>


<span data-ttu-id="2544c-178">Sil düğmesini tıklatarak, bağlı bir geri gönderme gerçekleşir, GridView atar `ProductID` parametre değeri, `DataKeys` olan Sil düğmesine tıklandığını ve SqlDataSource s çağırır satır için koleksiyon değeri `Delete()` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="2544c-178">Upon clicking a Delete button, a postback occurs, the GridView assigns the `ProductID` parameter the value of the `DataKeys` collection value for the row whose Delete button was clicked, and invokes the SqlDataSource s `Delete()` method.</span></span> <span data-ttu-id="2544c-179">SqlDataSource denetimi ardından veritabanına bağlanır ve yürüten `DELETE` deyimi.</span><span class="sxs-lookup"><span data-stu-id="2544c-179">The SqlDataSource control then connects to the database and executes the `DELETE` statement.</span></span> <span data-ttu-id="2544c-180">GridView geri alma ve görüntüleme (kod artık tam olarak silinen kayıt içerir) ürünleri geçerli kümesini SqlDataSource için ardından rebinds.</span><span class="sxs-lookup"><span data-stu-id="2544c-180">The GridView then rebinds to the SqlDataSource, getting back and displaying the current set of products (which no longer includes the just-deleted record).</span></span>

> [!NOTE]
> <span data-ttu-id="2544c-181">GridView kullandığından, `DataKeys` SqlDataSource parametreleri doldurmak için koleksiyon, önemli s, GridView s `DataKeyNames` birincil anahtar ve, oluşturan sütunları özelliğinin ayarlanması SqlDataSource s `SelectCommand` döndürür Bu sütunlar.</span><span class="sxs-lookup"><span data-stu-id="2544c-181">Since the GridView uses its `DataKeys` collection to populate the SqlDataSource parameters, it s vital that the GridView s `DataKeyNames` property be set to the column(s) that constitute the primary key and that the SqlDataSource s `SelectCommand` returns these columns.</span></span> <span data-ttu-id="2544c-182">Ayrıca, bu parametre SqlDataSource s'te adı önemli s `DeleteCommand` ayarlanır `@ProductID`.</span><span class="sxs-lookup"><span data-stu-id="2544c-182">Moreover, it s important that the parameter name in the SqlDataSource s `DeleteCommand` is set to `@ProductID`.</span></span> <span data-ttu-id="2544c-183">Varsa `DataKeyNames` özelliği ayarlı değil veya parametre adlandırılmamış `@ProductsID`Sil düğmesine tıklanarak geri göndermeye neden olur, ancak kazanılan t gerçekte herhangi bir kaydı silin.</span><span class="sxs-lookup"><span data-stu-id="2544c-183">If the `DataKeyNames` property is not set or the parameter is not named `@ProductsID`, clicking the Delete button will cause a postback, but won t actually delete any record.</span></span>


<span data-ttu-id="2544c-184">Şekil 5, bu etkileşim grafik olarak gösterir.</span><span class="sxs-lookup"><span data-stu-id="2544c-184">Figure 5 depicts this interaction graphically.</span></span> <span data-ttu-id="2544c-185">Kiracıurl [ekleme, güncelleştirme ve silme ile ilişkili olayları İnceleme](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) ekleme, güncelleştirme ve silme verilerden Web denetimi ile ilgili olaylar zincirini üzerinde daha ayrıntılı bir açıklaması için öğretici.</span><span class="sxs-lookup"><span data-stu-id="2544c-185">Refer back to the [Examining the Events Associated with Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial for a more detailed discussion on the chain of events associated with inserting, updating, and deleting from a data Web control.</span></span>


![GridView Sil düğmesini tıklatarak SqlDataSource s Delete() yöntemi çağırır](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image5.gif)

<span data-ttu-id="2544c-187">**Şekil 5**: GridView Sil düğmesini tıklatarak çağırır SqlDataSource s `Delete()` yöntemi</span><span class="sxs-lookup"><span data-stu-id="2544c-187">**Figure 5**: Clicking the Delete Button in the GridView Invokes the SqlDataSource s `Delete()` Method</span></span>


## <a name="step-2-automatically-generating-theinsertupdate-anddeletestatements"></a><span data-ttu-id="2544c-188">2. Adım: Otomatik olarak oluşturma`INSERT`,`UPDATE`, ve`DELETE`deyimleri</span><span class="sxs-lookup"><span data-stu-id="2544c-188">Step 2: Automatically Generating the`INSERT`,`UPDATE`, and`DELETE`Statements</span></span>

<span data-ttu-id="2544c-189">Denetlenen 1. adım olarak `INSERT`, `UPDATE`, ve `DELETE` SQL deyimleri, Özellikler penceresinde veya denetim s bildirim temelli söz dizimi belirtilebilir.</span><span class="sxs-lookup"><span data-stu-id="2544c-189">As Step 1 examined, `INSERT`, `UPDATE`, and `DELETE` SQL statements can be specified through the Properties window or the control s declarative syntax.</span></span> <span data-ttu-id="2544c-190">Ancak, bu yaklaşım, biz el ile SQL deyimlerini el ile ve sıkıcı ve hataya olabilen yazma gerektirir.</span><span class="sxs-lookup"><span data-stu-id="2544c-190">However, this approach requires that we manually write out the SQL statements by hand, which can be monotonous and error-prone.</span></span> <span data-ttu-id="2544c-191">Neyse ki, veri kaynağı Yapılandırma Sihirbazı için bir seçenek sağlar `INSERT`, `UPDATE`, ve `DELETE` deyimleri görüntüleme ekranı tablosunu belirtin sütunlarından kullanırken otomatik olarak oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="2544c-191">Fortunately, the Configure Data Source wizard provides an option to have the `INSERT`, `UPDATE`, and `DELETE` statements automatically generated when using the Specify columns from a table of view screen.</span></span>

<span data-ttu-id="2544c-192">Bu otomatik oluşturma seçeneği keşfedin s olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="2544c-192">Let s explore this automatic generation option.</span></span> <span data-ttu-id="2544c-193">Tasarımcıda bir DetailsView eklemek `InsertUpdateDelete.aspx` ve kendi `ID` özelliğini `ManageProducts`.</span><span class="sxs-lookup"><span data-stu-id="2544c-193">Add a DetailsView to the Designer in `InsertUpdateDelete.aspx` and set its `ID` property to `ManageProducts`.</span></span> <span data-ttu-id="2544c-194">Ardından, yeni bir veri kaynağı oluşturun ve adlı bir SqlDataSource oluşturmak DetailsView s akıllı etiketten seçin `ManageProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="2544c-194">Next, from the DetailsView s smart tag, choose to create a new data source and create a SqlDataSource named `ManageProductsDataSource`.</span></span>


<span data-ttu-id="2544c-195">[![ManageProductsDataSource adlı yeni bir SqlDataSource oluşturma](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="2544c-195">[![Create a New SqlDataSource Named ManageProductsDataSource](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.png)</span></span>

<span data-ttu-id="2544c-196">**Şekil 6**: Adlı yeni bir SqlDataSource oluşturma `ManageProductsDataSource` ([tam boyutlu görüntüyü görmek için tıklatın](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="2544c-196">**Figure 6**: Create a New SqlDataSource Named `ManageProductsDataSource` ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image8.png))</span></span>


<span data-ttu-id="2544c-197">Veri Kaynağı Yapılandırma Sihirbazı'ndan kullanmayı tercih `NORTHWINDConnectionString` bağlantı dizesi ve İleri'ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="2544c-197">From the Configure Data Source wizard, opt to use the `NORTHWINDConnectionString` connection string and click Next.</span></span> <span data-ttu-id="2544c-198">Select deyimi ekran yapılandırma belirtin sütunları seçili bir tablo veya Görünüm radyo düğmesini bırakın ve çekme `Products` aşağı açılan listeden bir tablo.</span><span class="sxs-lookup"><span data-stu-id="2544c-198">From the Configure the Select Statement screen, leave the Specify columns from a table or view radio button selected and pick the `Products` table from the drop-down list.</span></span> <span data-ttu-id="2544c-199">Seçin `ProductID`, `ProductName`, `UnitPrice`, ve `Discontinued` onay kutusu listesi sütunları.</span><span class="sxs-lookup"><span data-stu-id="2544c-199">Select the `ProductID`, `ProductName`, `UnitPrice`, and `Discontinued` columns from the checkbox list.</span></span>


<span data-ttu-id="2544c-200">[![Ürünleri tabloyu kullanarak ProductID, ProductName, UnitPrice ve kullanımdan kaldırılan sütunlar döndürür](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="2544c-200">[![Using the Products Table, Return the ProductID, ProductName, UnitPrice, and Discontinued Columns](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.png)</span></span>

<span data-ttu-id="2544c-201">**Şekil 7**: Kullanarak `Products` tablo, iade `ProductID`, `ProductName`, `UnitPrice`, ve `Discontinued` sütunları ([tam boyutlu görüntüyü görmek için tıklatın](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="2544c-201">**Figure 7**: Using the `Products` Table, Return the `ProductID`, `ProductName`, `UnitPrice`, and `Discontinued` Columns ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image10.png))</span></span>


<span data-ttu-id="2544c-202">Otomatik olarak oluşturmak için `INSERT`, `UPDATE`, ve `DELETE` seçili tablo ve sütunlara göre deyimleri Gelişmiş düğmesine tıklayın ve Generate denetleyin `INSERT`, `UPDATE`, ve `DELETE` deyimleri onay kutusu.</span><span class="sxs-lookup"><span data-stu-id="2544c-202">To automatically generate `INSERT`, `UPDATE`, and `DELETE` statements based on the selected table and columns, click the Advanced button and check the Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox.</span></span>


![Generate INSERT, UPDATE ve DELETE deyimleri onay kutusunu işaretleyin](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image8.gif)

<span data-ttu-id="2544c-204">**Şekil 8**: Generate denetleyin `INSERT`, `UPDATE`, ve `DELETE` onay deyimleri</span><span class="sxs-lookup"><span data-stu-id="2544c-204">**Figure 8**: Check the Generate `INSERT`, `UPDATE`, and `DELETE` statements Checkbox</span></span>


<span data-ttu-id="2544c-205">Generate `INSERT`, `UPDATE`, ve `DELETE` deyimleri onay kutusu yalnızca olacaktır checkable seçili olan tablonun birincil anahtar varsa ve birincil anahtar sütunu (veya sütun) geri dönen sütunlar listesinde yer.</span><span class="sxs-lookup"><span data-stu-id="2544c-205">The Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox will only be checkable if the table selected has a primary key and the primary key column (or columns) are included in the list of returned columns.</span></span> <span data-ttu-id="2544c-206">Seçilebilir duruma kullanım iyimser eşzamanlılık onay kutusunu Oluştur `INSERT`, `UPDATE`, ve `DELETE` deyimleri onay kutusu iade, büyütmek `WHERE` sonuç olarak yan tümceleri `UPDATE` ve `DELETE` deyimleri iyimser eşzamanlılık denetimi sağlamak için.</span><span class="sxs-lookup"><span data-stu-id="2544c-206">The Use optimistic concurrency checkbox, which becomes selectable once the Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox has been checked, will augment the `WHERE` clauses in the resulting `UPDATE` and `DELETE` statements to provide optimistic concurrency control.</span></span> <span data-ttu-id="2544c-207">Şu an için bu onay kutusunu işaretlemeden bırakın; sonraki öğreticide SqlDataSource denetimi ile iyimser eşzamanlılık inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="2544c-207">For now, leave this checkbox unchecked; we'll examine optimistic concurrency with the SqlDataSource control in the next tutorial.</span></span>

<span data-ttu-id="2544c-208">Generate denetledikten sonra `INSERT`, `UPDATE`, ve `DELETE` deyimleri onay kutusunu Select deyimini yapılandırma ekranına geri dönmek ve ardından İleri'yi için Tamam'a tıklayın ve ardından, veri kaynağı Yapılandırma Sihirbazı'nı tamamlamak için son.</span><span class="sxs-lookup"><span data-stu-id="2544c-208">After checking the Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox, click OK to return to the Configure Select Statement screen, then click Next, and then Finish, to complete the Configure Data Source wizard.</span></span> <span data-ttu-id="2544c-209">Sihirbazı tamamladığınızda, Visual Studio BoundFields için DetailsView ekleyeceksiniz `ProductID`, `ProductName`, ve `UnitPrice` sütunları ve için bir CheckBoxField `Discontinued` sütun.</span><span class="sxs-lookup"><span data-stu-id="2544c-209">Upon completing the wizard, Visual Studio will add BoundFields to the DetailsView for the `ProductID`, `ProductName`, and `UnitPrice` columns and a CheckBoxField for the `Discontinued` column.</span></span> <span data-ttu-id="2544c-210">Böylece bu sayfasını ziyaret ederek kullanıcı ile ürünleri geçebilirsiniz DetailsView s akıllı etiketten sayfalama Etkinleştir seçeneği işaretleyin.</span><span class="sxs-lookup"><span data-stu-id="2544c-210">From the DetailsView s smart tag, check the Enable Paging option so that the user visiting this page can step through the products.</span></span> <span data-ttu-id="2544c-211">Ayrıca DetailsView s Temizle `Width` ve `Height` özellikleri.</span><span class="sxs-lookup"><span data-stu-id="2544c-211">Also clear out the DetailsView s `Width` and `Height` properties.</span></span>

<span data-ttu-id="2544c-212">Akıllı etiket etkinleştirme ekleme, düzenlemeyi etkinleştir ve silmeyi etkinleştir seçenekleri olduğuna dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="2544c-212">Notice that the smart tag has the Enable Inserting, Enable Editing, and Enable Deleting options available.</span></span> <span data-ttu-id="2544c-213">SqlDataSource değerlerini içeren olmasıdır, `InsertCommand`, `UpdateCommand`, ve `DeleteCommand`aşağıdaki bildirim temelli söz dizimi gösterildiği gibi:</span><span class="sxs-lookup"><span data-stu-id="2544c-213">This is because the SqlDataSource contains values for its `InsertCommand`, `UpdateCommand`, and `DeleteCommand`, as the following declarative syntax shows:</span></span>

[!code-aspx[Main](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/samples/sample3.aspx)]

<span data-ttu-id="2544c-214">SqlDataSource denetimi için otomatik olarak ayarlanmış değerleri nasıl aldığını unutmayın, `InsertCommand`, `UpdateCommand`, ve `DeleteCommand` özellikleri.</span><span class="sxs-lookup"><span data-stu-id="2544c-214">Note how the SqlDataSource control has had values automatically set for its `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties.</span></span> <span data-ttu-id="2544c-215">Başvurulan sütun kümesini `InsertCommand` ve `UpdateCommand` özelliklerini de temel alınmıştır `SELECT` deyimi.</span><span class="sxs-lookup"><span data-stu-id="2544c-215">The set of columns referenced in the `InsertCommand` and `UpdateCommand` properties are based on those in the `SELECT` statement.</span></span> <span data-ttu-id="2544c-216">Diğer bir deyişle, yerine *her* ürünleri sütununda `InsertCommand` ve `UpdateCommand`, yalnızca belirtilen sütun `SelectCommand` (daha az `ProductID`, çünkü atlanırsa, s bir [ `IDENTITY` sütun](http://www.sqlteam.com/item.asp?ItemID=102)düzenlendiğinde değeri değiştirilemez ve otomatik olarak atanır eklenirken).</span><span class="sxs-lookup"><span data-stu-id="2544c-216">That is, rather than having *every* Products column in the `InsertCommand` and `UpdateCommand`, there are only those columns specified in the `SelectCommand` (less `ProductID`, which is omitted because it s an [`IDENTITY` column](http://www.sqlteam.com/item.asp?ItemID=102), whose value cannot be changed when edited and which is automatically assigned when inserting).</span></span> <span data-ttu-id="2544c-217">Ayrıca, her parametre için `InsertCommand`, `UpdateCommand`, ve `DeleteCommand` özellikleri içinde karşılık gelen parametre yok `InsertParameters`, `UpdateParameters`, ve `DeleteParameters` koleksiyonları.</span><span class="sxs-lookup"><span data-stu-id="2544c-217">Moreover, for each parameter in the `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties there are corresponding parameters in the `InsertParameters`, `UpdateParameters`, and `DeleteParameters` collections.</span></span>

<span data-ttu-id="2544c-218">DetailsView s veri değişikliği özelliklerini etkinleştirme için etkinleştirme ekleme, düzenlemeyi etkinleştir ve akıllı etiketinde silmeyi etkinleştir seçeneklerinde denetleyin.</span><span class="sxs-lookup"><span data-stu-id="2544c-218">To turn on the DetailsView s data modification features, check the Enable Inserting, Enable Editing, and Enable Deleting options in its smart tag.</span></span> <span data-ttu-id="2544c-219">Bu bir CommandField ile ekler, `ShowInsertButton`, `ShowEditButton`, ve `ShowDeleteButton` özelliklerini ayarlamak `true`.</span><span class="sxs-lookup"><span data-stu-id="2544c-219">This adds a CommandField with its `ShowInsertButton`, `ShowEditButton`, and `ShowDeleteButton` properties set to `true`.</span></span>

<span data-ttu-id="2544c-220">Bir tarayıcıda sayfasını ziyaret edin ve düzenleme, silme ve DetailsView içinde bulunan yeni düğmeler dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="2544c-220">Visit the page in a browser and note the Edit, Delete, and New buttons included in the DetailsView.</span></span> <span data-ttu-id="2544c-221">Düzenle düğmesine tıklayarak, her BoundField görüntüler düzenleme moduna DetailsView kapatır, `ReadOnly` özelliği `false` (varsayılan) olarak bir metin kutusu ve bir onay kutusu olarak CheckBoxField.</span><span class="sxs-lookup"><span data-stu-id="2544c-221">Clicking the Edit button turns the DetailsView into edit mode, which displays each BoundField whose `ReadOnly` property is set to `false` (the default) as a TextBox, and the CheckBoxField as a checkbox.</span></span>


<span data-ttu-id="2544c-222">[![DetailsView s varsayılan düzenleme arabirimi](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="2544c-222">[![The DetailsView s Default Editing Interface](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image11.png)</span></span>

<span data-ttu-id="2544c-223">**Şekil 9**: Varsayılan düzenleme arabirimini DetailsView s ([tam boyutlu görüntüyü görmek için tıklatın](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="2544c-223">**Figure 9**: The DetailsView s Default Editing Interface ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image12.png))</span></span>


<span data-ttu-id="2544c-224">Benzer şekilde, şu anda seçili ürünü silmek ya da sisteme yeni bir ürün ekleyin.</span><span class="sxs-lookup"><span data-stu-id="2544c-224">Similarly, you can delete the currently selected product or add a new product to the system.</span></span> <span data-ttu-id="2544c-225">Bu yana `InsertCommand` deyimi yalnızca çalışır `ProductName`, `UnitPrice`, ve `Discontinued` sütunları, diğer sütunları olan ya da `NULL` veya ekleme sırasında veritabanı tarafından atanan varsayılan değer.</span><span class="sxs-lookup"><span data-stu-id="2544c-225">Since the `InsertCommand` statement only works with the `ProductName`, `UnitPrice`, and `Discontinued` columns, the other columns have either `NULL` or their default value assigned by the database upon insert.</span></span> <span data-ttu-id="2544c-226">ObjectDataSource ile durumunda olduğu gibi `InsertCommand` t ki sütunları izin herhangi bir veritabanı tablosu eksik `NULL` s ve rsquo; < varsayılan değerine sahip, bir SQL hatası meydana gelir yürütmeye çalışılırken `INSERT` deyimi.</span><span class="sxs-lookup"><span data-stu-id="2544c-226">Just like with the ObjectDataSource, if the `InsertCommand` is missing any database table columns that don t allow `NULL` s and don t have a default value, a SQL error will occur when attempting to execute the `INSERT` statement.</span></span>

> [!NOTE]
> <span data-ttu-id="2544c-227">Ekleme ve düzenleme arabirimleri DetailsView s herhangi bir tür özelleştirme ya da doğrulama yoksundur.</span><span class="sxs-lookup"><span data-stu-id="2544c-227">The DetailsView s inserting and editing interfaces lack any sort of customization or validation.</span></span> <span data-ttu-id="2544c-228">Doğrulama denetimleri ekleme veya arabirimleri özelleştirmek için bunları TemplateField için BoundFields dönüştürmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="2544c-228">To add validation controls or to customize the interfaces, you need to convert the BoundFields to TemplateFields.</span></span> <span data-ttu-id="2544c-229">Başvurmak [arabirimleri ekleme ve düzenleme için doğrulama denetimleri ekleme](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) ve [veri değişikliği arabirimini özelleştirme](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) daha fazla bilgi için öğreticiler.</span><span class="sxs-lookup"><span data-stu-id="2544c-229">Refer to the [Adding Validation Controls to the Editing and Inserting Interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) and [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorials for more information.</span></span>


<span data-ttu-id="2544c-230">Ayrıca, güncelleştirme ve silme için kullandığı geçerli ürün s DetailsView akılda tutulması `DataKey` yalnızca var ise değer `DataKeyNames` özelliği yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="2544c-230">Also, keep in mind that for updating and deleting, the DetailsView uses the current product s `DataKey` value, which is only present if the `DataKeyNames` property is configured.</span></span> <span data-ttu-id="2544c-231">Düzenleme veya silme etkisinin görünüyorsa emin `DataKeyNames` özelliği ayarlanmış.</span><span class="sxs-lookup"><span data-stu-id="2544c-231">If editing or deleting appears to have no effect, ensure that the `DataKeyNames` property is set.</span></span>

## <a name="limitations-of-automatically-generating-sql-statements"></a><span data-ttu-id="2544c-232">Otomatik olarak SQL deyimleri oluşturma sınırlamaları</span><span class="sxs-lookup"><span data-stu-id="2544c-232">Limitations of Automatically Generating SQL Statements</span></span>

<span data-ttu-id="2544c-233">Generate beri `INSERT`, `UPDATE`, ve `DELETE` deyimleri seçeneği, yalnızca kullanılabilir, daha karmaşık sorgular için bir tablodaki sütunların çekme kendi yazmak yapacağı `INSERT`, `UPDATE`, ve `DELETE` Adım 1'de yaptığımız gibi deyimler.</span><span class="sxs-lookup"><span data-stu-id="2544c-233">Since the Generate `INSERT`, `UPDATE`, and `DELETE` statements option is only available when picking columns from a table, for more complex queries you will have to write your own `INSERT`, `UPDATE`, and `DELETE` statements like we did in Step 1.</span></span> <span data-ttu-id="2544c-234">Yaygın olarak, SQL `SELECT` deyimlerini `JOIN` verileri için bir veya daha fazla arama tabloları görüntülemek amacıyla geri getirmek için s (geri getirme gibi `Categories` tablo s `CategoryName` ürün bilgileri görüntülerken, alan).</span><span class="sxs-lookup"><span data-stu-id="2544c-234">Commonly, SQL `SELECT` statements use `JOIN` s to bring back data from one or more lookup tables for display purposes (such as bringing back the `Categories` table s `CategoryName` field when displaying product information).</span></span> <span data-ttu-id="2544c-235">Aynı zamanda, biz düzenlemek, güncelleştirme veya çekirdek tabloya veri eklemek kullanıcı izin vermek isteyebilirsiniz (`Products`, bu durumda).</span><span class="sxs-lookup"><span data-stu-id="2544c-235">At the same time, we might want to allow the user to edit, update, or insert data into the core table (`Products`, in this case).</span></span>

<span data-ttu-id="2544c-236">Sırada `INSERT`, `UPDATE`, ve `DELETE` deyimleri el ile girilebilir, aşağıdaki zamandan tasarruf ipucu göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="2544c-236">While the `INSERT`, `UPDATE`, and `DELETE` statements can be entered manually, consider the following time-saving tip.</span></span> <span data-ttu-id="2544c-237">Böylece geri veri yalnızca çeker SqlDataSource başlangıçta Kurulum `Products` tablo.</span><span class="sxs-lookup"><span data-stu-id="2544c-237">Initially setup the SqlDataSource so that it pulls back data just from the `Products` table.</span></span> <span data-ttu-id="2544c-238">Veri Kaynağı Yapılandırma Sihirbazı'nı s belirtin sütunlar bir tablo veya Görünüm ekrandan kullanabilir, böylece otomatik olarak oluşturabilirsiniz `INSERT`, `UPDATE`, ve `DELETE` deyimleri.</span><span class="sxs-lookup"><span data-stu-id="2544c-238">Use the Configure Data Source wizard s Specify columns from a table or view screen so that you can automatically generate the `INSERT`, `UPDATE`, and `DELETE` statements.</span></span> <span data-ttu-id="2544c-239">Ardından Özellikler penceresinden SelectQuery yapılandırmak Sihirbazı tamamladıktan sonra seçin (veya alternatif olarak, veri kaynağı Yapılandırma Sihirbazı, ancak kullanım özel bir SQL deyimi belirtin veya saklı yordam seçeneği geri dönme).</span><span class="sxs-lookup"><span data-stu-id="2544c-239">Then, after completing the wizard, choose to configure the SelectQuery from the Properties window (or, alternatively, go back to the Configure Data Source wizard, but use the Specify a custom SQL statement or stored procedure option).</span></span> <span data-ttu-id="2544c-240">Ardından update `SELECT` bildirimini `JOIN` söz dizimi.</span><span class="sxs-lookup"><span data-stu-id="2544c-240">Then update the `SELECT` statement to include the `JOIN` syntax.</span></span> <span data-ttu-id="2544c-241">Bu teknik otomatik olarak oluşturulan SQL deyimlerini zamandan tasarruf avantajlarını sunar ve için daha fazla özelleştirilmiş sağlayan `SELECT` deyimi.</span><span class="sxs-lookup"><span data-stu-id="2544c-241">This technique offers the time-saving benefits of the automatically generated SQL statements and allows for a more customized `SELECT` statement.</span></span>

<span data-ttu-id="2544c-242">Otomatik olarak oluşturmanın bir diğer sınırlandırma `INSERT`, `UPDATE`, ve `DELETE` deyimler olduğu, sütunları `INSERT` ve `UPDATE` deyimleri tarafından döndürülecek olan sütunları temel `SELECT` deyimi.</span><span class="sxs-lookup"><span data-stu-id="2544c-242">Another limitation of automatically generating the `INSERT`, `UPDATE`, and `DELETE` statements is that the columns in the `INSERT` and `UPDATE` statements are based on the columns returned by the `SELECT` statement.</span></span> <span data-ttu-id="2544c-243">Güncelleştirin veya daha fazla veya daha az alanları ancak eklemek gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="2544c-243">We may need to update or insert more or fewer fields, however.</span></span> <span data-ttu-id="2544c-244">Örneğin, adım 2'deki örnekte, belki de olmasını istiyoruz `UnitPrice` BoundField salt okunur.</span><span class="sxs-lookup"><span data-stu-id="2544c-244">For example, in the example from Step 2, maybe we want to have the `UnitPrice` BoundField be read-only.</span></span> <span data-ttu-id="2544c-245">Bu durumda, paylaşılmamalıdır t görünür `UpdateCommand`.</span><span class="sxs-lookup"><span data-stu-id="2544c-245">In that case, it shouldn t appear in the `UpdateCommand`.</span></span> <span data-ttu-id="2544c-246">Veya, biz GridView görünmeyen bir tablo alanın değerini ayarlamak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2544c-246">Or we may want to set the value of a table field that does not appear in the GridView.</span></span> <span data-ttu-id="2544c-247">Örneğin, yeni bir eklerken kayıt istiyoruz `QuantityPerUnit` TODO için değer ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="2544c-247">For example, when adding a new record we may want the `QuantityPerUnit` value set to TODO .</span></span>

<span data-ttu-id="2544c-248">Bu tür özelleştirmeleri gerekiyorsa, bunları el ile Özellikler penceresinde, özel bir SQL deyimi belirtin ya da saklı yordam seçeneği sihirbazda ya da bildirim temelli söz dizimi aracılığıyla aracılığıyla yapmak gerekir.</span><span class="sxs-lookup"><span data-stu-id="2544c-248">If such customizations are required, you need to make them manually, either through the Properties window, the Specify a custom SQL statement or stored procedure option in the wizard, or via the declarative syntax.</span></span>

> [!NOTE]
> <span data-ttu-id="2544c-249">Veriler karşılık gelen alanlara sahip olmayan parametreler eklemeyi Web denetimi, bu parametreleri değerleri değerlerde bir şekilde atanması gerekir aklınızda bulundurun.</span><span class="sxs-lookup"><span data-stu-id="2544c-249">When adding parameters that do not have corresponding fields in the data Web control, keep in mind that these parameters values will need to be assigned values in some manner.</span></span> <span data-ttu-id="2544c-250">Bu değerler olabilir: doğrudan kodlanmış `InsertCommand` veya `UpdateCommand`; bazı önceden tanımlanmış kaynaktan (sorgu dizesi, oturum durumu, Web denetimleri sayfa vb.); gelebilir veya önceki öğreticide gördüğümüz gibi programlı olarak atanabilir.</span><span class="sxs-lookup"><span data-stu-id="2544c-250">These values can be: hard-coded directly in the `InsertCommand` or `UpdateCommand`; can come from some pre-defined source (the querystring, session state, Web controls on the page, and so on); or can be assigned programmatically, as we saw in the preceding tutorial.</span></span>


## <a name="summary"></a><span data-ttu-id="2544c-251">Özet</span><span class="sxs-lookup"><span data-stu-id="2544c-251">Summary</span></span>

<span data-ttu-id="2544c-252">Kendi yerleşik ekleme, düzenleme ve silme özelliklerini kullanmak için Web denetimlerini sırayla veriler için bağlı olan veri kaynak denetimi bu işlevselliğin sağlaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="2544c-252">In order for the data Web controls to utilize their built-in inserting, editing, and deleting capabilities, the data source control they are bound to must offer such functionality.</span></span> <span data-ttu-id="2544c-253">SqlDataSource için diğer bir deyişle `INSERT`, `UPDATE`, ve `DELETE` için SQL deyimleri atanmalıdır `InsertCommand`, `UpdateCommand`, ve `DeleteCommand` özellikleri.</span><span class="sxs-lookup"><span data-stu-id="2544c-253">For the SqlDataSource, this means that `INSERT`, `UPDATE`, and `DELETE` SQL statements must be assigned to the `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties.</span></span> <span data-ttu-id="2544c-254">Bu özellikler ve karşılık gelen parametreleri koleksiyonları el ile eklenen veya veri kaynağı Yapılandırma Sihirbazı otomatik olarak oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="2544c-254">These properties, and the corresponding parameters collections, can be added manually or generated automatically through the Configure Data Source wizard.</span></span> <span data-ttu-id="2544c-255">Bu öğreticide size her iki tekniği incelenir.</span><span class="sxs-lookup"><span data-stu-id="2544c-255">In this tutorial we examined both techniques.</span></span>

<span data-ttu-id="2544c-256">İçinde ObjectDataSource ile iyimser eşzamanlılık kullanarak incelenmesi [iyimser eşzamanlılık uygulama](../editing-inserting-and-deleting-data/implementing-optimistic-concurrency-cs.md) öğretici.</span><span class="sxs-lookup"><span data-stu-id="2544c-256">We examined using optimistic concurrency with the ObjectDataSource in the [Implementing Optimistic Concurrency](../editing-inserting-and-deleting-data/implementing-optimistic-concurrency-cs.md) tutorial.</span></span> <span data-ttu-id="2544c-257">SqlDataSource denetimi iyimser eşzamanlılık desteği de sağlar.</span><span class="sxs-lookup"><span data-stu-id="2544c-257">The SqlDataSource control also provides optimistic concurrency support.</span></span> <span data-ttu-id="2544c-258">Adım 2'de otomatik olarak oluştururken belirtildiği gibi `INSERT`, `UPDATE`, ve `DELETE` deyimleri, sihirbaz teklif iyimser eşzamanlılık seçeneğini kullanın.</span><span class="sxs-lookup"><span data-stu-id="2544c-258">As noted in Step 2, when automatically generating the `INSERT`, `UPDATE`, and `DELETE` statements, the wizard offers a Use optimistic concurrency option.</span></span> <span data-ttu-id="2544c-259">SqlDataSource ile iyimser eşzamanlılık kullanma sonraki öğreticide anlatıldığı gibi değiştirir `WHERE` yan tümcelerinde `UPDATE` ve `DELETE` değerleri için diğer sütunları veri son başlatıldığından beri değiştirilmiş t haven emin olmak için deyimleri sayfada görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="2544c-259">As we'll see in the next tutorial, using optimistic concurrency with the SqlDataSource modifies the `WHERE` clauses in the `UPDATE` and `DELETE` statements to ensure that the values for the other columns haven t changed since the data was last displayed on the page.</span></span>

<span data-ttu-id="2544c-260">Mutlu programlama!</span><span class="sxs-lookup"><span data-stu-id="2544c-260">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="2544c-261">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="2544c-261">About the Author</span></span>

<span data-ttu-id="2544c-262">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), yazar yedi ASP/ASP.NET kitaplardan ve poshbeauty.com sitesinin [4GuysFromRolla.com](http://www.4guysfromrolla.com), Microsoft Web teknolojileriyle beri 1998'de çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="2544c-262">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="2544c-263">Scott, bağımsız Danışman, Eğitimci ve yazıcı çalışır.</span><span class="sxs-lookup"><span data-stu-id="2544c-263">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="2544c-264">En son nitelemiştir olan [ *Unleashed'i öğretin kendiniz ASP.NET 2.0 24 saat içindeki*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="2544c-264">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="2544c-265">He adresinden ulaşılabilir [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="2544c-265">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="2544c-266">veya kendi blog hangi bulunabilir [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="2544c-266">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="2544c-267">[Önceki](using-parameterized-queries-with-the-sqldatasource-cs.md)
> [İleri](implementing-optimistic-concurrency-with-the-sqldatasource-cs.md)</span><span class="sxs-lookup"><span data-stu-id="2544c-267">[Previous](using-parameterized-queries-with-the-sqldatasource-cs.md)
[Next](implementing-optimistic-concurrency-with-the-sqldatasource-cs.md)</span></span>
