---
uid: web-forms/overview/data-access/caching-data/caching-data-with-the-objectdatasource-cs
title: ObjectDataSource ile verileri önbelleğe alma (C#) | Microsoft Docs
author: rick-anderson
description: Önbelleğe alma, yavaş ve hızlı bir Web uygulaması arasındaki farkı ifade edebilir. Bu öğretici, ASP.NET içinde önbelleğe alma hakkında ayrıntılı bir bakış sunan ilk dört
ms.author: riande
ms.date: 05/30/2007
ms.assetid: bd87413c-8160-4520-a8a2-43b555c4183a
msc.legacyurl: /web-forms/overview/data-access/caching-data/caching-data-with-the-objectdatasource-cs
msc.type: authoredcontent
ms.openlocfilehash: c9883314d6153b9816d9bad2a281ab3c0a816448
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74612626"
---
# <a name="caching-data-with-the-objectdatasource-c"></a><span data-ttu-id="ccf62-104">ObjectDataSource ile Verileri Önbelleğe Alma (C#)</span><span class="sxs-lookup"><span data-stu-id="ccf62-104">Caching Data with the ObjectDataSource (C#)</span></span>

<span data-ttu-id="ccf62-105">[Scott Mitchell](https://twitter.com/ScottOnWriting) tarafından</span><span class="sxs-lookup"><span data-stu-id="ccf62-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="ccf62-106">[Örnek uygulamayı indirin](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_58_CS.exe) veya [PDF 'yi indirin](caching-data-with-the-objectdatasource-cs/_static/datatutorial58cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="ccf62-106">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_58_CS.exe) or [Download PDF](caching-data-with-the-objectdatasource-cs/_static/datatutorial58cs1.pdf)</span></span>

> <span data-ttu-id="ccf62-107">Önbelleğe alma, yavaş ve hızlı bir Web uygulaması arasındaki farkı ifade edebilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-107">Caching can mean the difference between a slow and a fast Web application.</span></span> <span data-ttu-id="ccf62-108">Bu öğretici, ASP.NET ' de önbelleğe alma hakkında ayrıntılı bir bakış sunan ilk dört ilkidir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-108">This tutorial is the first of four that take a detailed look at caching in ASP.NET.</span></span> <span data-ttu-id="ccf62-109">Önbelleğe alma işleminin temel kavramlarını ve ObjectDataSource denetimi aracılığıyla Sunu katmanına nasıl önbelleğe alınacağını öğrenin.</span><span class="sxs-lookup"><span data-stu-id="ccf62-109">Learn the key concepts of caching and how to apply caching to the Presentation Layer through the ObjectDataSource control.</span></span>

## <a name="introduction"></a><span data-ttu-id="ccf62-110">Giriş</span><span class="sxs-lookup"><span data-stu-id="ccf62-110">Introduction</span></span>

<span data-ttu-id="ccf62-111">Bilgisayar bilimi ' nde, *önbelleğe alma* , bir kopyasını elde etmek ve bir kopyasını daha hızlı bir konuma depolamak için pahalı olan verileri veya bilgileri alma işlemidir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-111">In computer science, *caching* is the process of taking data or information that is expensive to obtain and storing a copy of it in a location that is quicker to access.</span></span> <span data-ttu-id="ccf62-112">Veri odaklı uygulamalar için büyük ve karmaşık sorgular genellikle uygulama yürütme zamanının çoğunu kullanır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-112">For data-driven applications, large and complex queries commonly consume the majority of the application s execution time.</span></span> <span data-ttu-id="ccf62-113">Bu tür bir uygulama performansı daha sonra, uygulama s belleğindeki pahalı Veritabanı sorgularının sonuçları depolanarak genellikle iyileşebilirler.</span><span class="sxs-lookup"><span data-stu-id="ccf62-113">Such an application s performance, then, can often be improved by storing the results of expensive database queries in the application s memory.</span></span>

<span data-ttu-id="ccf62-114">ASP.NET 2,0, çeşitli önbelleğe alma seçenekleri sunar.</span><span class="sxs-lookup"><span data-stu-id="ccf62-114">ASP.NET 2.0 offers a variety of caching options.</span></span> <span data-ttu-id="ccf62-115">Tüm Web sayfası veya Kullanıcı denetimi işlenmiş işaretleme, *çıktı önbelleği*aracılığıyla önbelleğe alınabilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-115">An entire web page or User Control s rendered markup can be cached through *output caching*.</span></span> <span data-ttu-id="ccf62-116">ObjectDataSource ve SqlDataSource denetimleri, önbelleğe alma yeteneklerini de sağlar ve bu sayede verilerin Denetim düzeyinde önbelleğe alınmasına izin verir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-116">The ObjectDataSource and SqlDataSource controls provide caching capabilities as well, thereby allowing data to be cached at the control level.</span></span> <span data-ttu-id="ccf62-117">Ve ASP.NET s *veri önbelleği* , sayfa geliştiricilerinin nesneleri programlı bir şekilde önbelleğe almasını sağlayan zengin bir önbelleğe alma API 'si sağlar.</span><span class="sxs-lookup"><span data-stu-id="ccf62-117">And ASP.NET s *data cache* provides a rich caching API that enables page developers to programmatically cache objects.</span></span> <span data-ttu-id="ccf62-118">Bu öğreticide ve sonraki üç adımda, ObjectDataSource s önbelleğe alma özelliklerinin yanı sıra veri önbelleğinin kullanılması anlatılmaktadır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-118">In this tutorial and the next three we'll examine using the ObjectDataSource s caching features as well as the data cache.</span></span> <span data-ttu-id="ccf62-119">Ayrıca, başlangıçta uygulama genelinde verilerin nasıl önbelleğe alınacağını ve SQL önbellek bağımlılıklarının kullanımı aracılığıyla önbelleğe alınmış verilerin nasıl güncel tutulacağını araştıracağız.</span><span class="sxs-lookup"><span data-stu-id="ccf62-119">We'll also explore how to cache application-wide data at startup and how to keep cached data fresh through the use of SQL cache dependencies.</span></span> <span data-ttu-id="ccf62-120">Bu öğreticiler çıktı önbelleğe almayı araştırmaz.</span><span class="sxs-lookup"><span data-stu-id="ccf62-120">These tutorials do not explore output caching.</span></span> <span data-ttu-id="ccf62-121">Çıktı önbelleğe alma hakkında ayrıntılı bir bakış için bkz. [ASP.NET 2,0 'de çıktı önbelleği](http://aspnet.4guysfromrolla.com/articles/121306-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="ccf62-121">For a detailed look at output caching, see [Output Caching in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/121306-1.aspx).</span></span>

<span data-ttu-id="ccf62-122">Önbelleğe alma, veri erişim katmanından sunum katmanı üzerinden yukarı, mimaride herhangi bir yerde uygulanabilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-122">Caching can be applied at any place in the architecture, from the Data Access Layer up through the Presentation Layer.</span></span> <span data-ttu-id="ccf62-123">Bu öğreticide, ObjectDataSource denetimi aracılığıyla sunum katmanına önbelleğe alma uygulama bölümüne bakacağız.</span><span class="sxs-lookup"><span data-stu-id="ccf62-123">In this tutorial we'll look at applying caching to the Presentation Layer through the ObjectDataSource control.</span></span> <span data-ttu-id="ccf62-124">Sonraki öğreticide Iş mantığı katmanında önbelleğe alma verilerini inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="ccf62-124">In the next tutorial we'll examine caching data at the Business Logic Layer.</span></span>

## <a name="key-caching-concepts"></a><span data-ttu-id="ccf62-125">Anahtar önbelleğe alma kavramları</span><span class="sxs-lookup"><span data-stu-id="ccf62-125">Key Caching Concepts</span></span>

<span data-ttu-id="ccf62-126">Önbelleğe alma, bir kopyasının oluşturulması ve bir kopyasını daha verimli bir yerde daha etkin erişilebilen bir konuma depolayarak bir uygulamanın genel performansını ve ölçeklenebilirliğini önemli ölçüde iyileştirebilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-126">Caching can greatly improve an application s overall performance and scalability by taking data that is expensive to generate and storing a copy of it in a location that can be more efficiently accessed.</span></span> <span data-ttu-id="ccf62-127">Önbellek gerçek, temel alınan verilerin yalnızca bir kopyasını içerdiğinden, temel alınan veriler değişirse *eski veya eski*olabilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-127">Since the cache holds just a copy of the actual, underlying data, it can become outdated, or *stale*, if the underlying data changes.</span></span> <span data-ttu-id="ccf62-128">Bu, bir sayfa geliştiricisi, önbellek öğesinin önbellekten *çıkarılabileceği* ölçütü belirtebileceği, aşağıdakilerden birini kullanarak:</span><span class="sxs-lookup"><span data-stu-id="ccf62-128">To combat this, a page developer can indicate criteria by which the cache item will be *evicted* from the cache, using either:</span></span>

- <span data-ttu-id="ccf62-129">**Zamana dayalı ölçütler** mutlak veya kayan bir süre için önbelleğe bir öğe eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-129">**Time-based criteria** an item may be added to the cache for an absolute or sliding duration.</span></span> <span data-ttu-id="ccf62-130">Örneğin, bir sayfa geliştiricisi bir süreyi, deyin, 60 saniye olarak gösterebilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-130">For example, a page developer may indicate a duration of, say, 60 seconds.</span></span> <span data-ttu-id="ccf62-131">Mutlak bir süre ile, önbelleğe alınan öğe, ne sıklıkta erişildiğine bakmaksızın önbelleğe eklendikten sonra 60 saniye çıkarıldı.</span><span class="sxs-lookup"><span data-stu-id="ccf62-131">With an absolute duration, the cached item is evicted 60 seconds after it was added to cache, regardless of how frequently it was accessed.</span></span> <span data-ttu-id="ccf62-132">Kayan bir süre ile, önbelleğe alınmış öğe son erişimden sonra 60 saniye çıkarıldı.</span><span class="sxs-lookup"><span data-stu-id="ccf62-132">With a sliding duration, the cached item is evicted 60 seconds after the last access.</span></span>
- <span data-ttu-id="ccf62-133">**Bağımlılık tabanlı ölçütler** , bir bağımlılık, önbelleğe eklendiğinde bir öğe ile ilişkilendirilebilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-133">**Dependency-based criteria** a dependency can be associated with an item when added to the cache.</span></span> <span data-ttu-id="ccf62-134">Öğe bağımlılığının değişiklik yaptığı değişiklikler önbellekten çıkarıldı.</span><span class="sxs-lookup"><span data-stu-id="ccf62-134">When the item s dependency changes it is evicted from the cache.</span></span> <span data-ttu-id="ccf62-135">Bağımlılık bir dosya, başka bir önbellek öğesi veya ikisinin bir birleşimi olabilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-135">The dependency may be a file, another cache item, or a combination of the two.</span></span> <span data-ttu-id="ccf62-136">ASP.NET 2,0 Ayrıca, geliştiricilerin önbelleğe bir öğe eklemesini ve temel alınan veritabanı verileri değiştiğinde çıkarılmasını sağlayan SQL önbellek bağımlılıklarına izin verir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-136">ASP.NET 2.0 also allows SQL cache dependencies, which enable developers to add an item to the cache and have it evicted when the underlying database data changes.</span></span> <span data-ttu-id="ccf62-137">SQL önbellek bağımlılıklarını yakında SQL [önbellek bağımlılıkları](using-sql-cache-dependencies-cs.md) öğreticisini kullanarak inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="ccf62-137">We will examine SQL cache dependencies in the upcoming [Using SQL Cache Dependencies](using-sql-cache-dependencies-cs.md) tutorial.</span></span>

<span data-ttu-id="ccf62-138">Belirtilen çıkarma ölçütlerine bakılmaksızın, zaman tabanlı veya bağımlılık tabanlı ölçütler karşılanmadan önbellekteki bir öğe *atılabilir* .</span><span class="sxs-lookup"><span data-stu-id="ccf62-138">Regardless of the eviction criteria specified, an item in the cache may be *scavenged* before the time-based or dependency-based criteria has been met.</span></span> <span data-ttu-id="ccf62-139">Önbellek kapasiteye ulaştıysa, yeni bir öğe eklenebilmesi için mevcut öğelerin kaldırılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-139">If the cache has reached its capacity, existing items must be removed before new ones can be added.</span></span> <span data-ttu-id="ccf62-140">Sonuç olarak, önbelleğe alınmış verilerle programlı olarak çalışırken, her zaman önbelleğe alınan verilerin mevcut olabileceğini varsaymanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-140">Consequently, when programmatically working with cached data it s vital that you always assume that the cached data may not be present.</span></span> <span data-ttu-id="ccf62-141">Sonraki öğreticimizde, *mimarideki verileri, mimaride önbelleğe alma*sırasında kullanarak önbellekteki verilere erişirken kullanılacak düzene bakacağız.</span><span class="sxs-lookup"><span data-stu-id="ccf62-141">We'll look at the pattern to use when accessing data from the cache programmatically in our next tutorial, *Caching Data in the Architecture*.</span></span>

<span data-ttu-id="ccf62-142">Önbelleğe alma, bir uygulamadan daha fazla performans sağlayan ekonomik bir yol sağlar.</span><span class="sxs-lookup"><span data-stu-id="ccf62-142">Caching provides an economical means for squeezing more performance from an application.</span></span> <span data-ttu-id="ccf62-143">[Steven Smith](http://aspadvice.com/blogs/ssmith/) , makalede [ASP.NET önbelleğe alma: teknikler ve en iyi uygulamalar](https://msdn.microsoft.com/library/aa478965.aspx):</span><span class="sxs-lookup"><span data-stu-id="ccf62-143">As [Steven Smith](http://aspadvice.com/blogs/ssmith/) articulates in his article [ASP.NET Caching: Techniques and Best Practices](https://msdn.microsoft.com/library/aa478965.aspx):</span></span>

<span data-ttu-id="ccf62-144">Önbelleğe alma, çok fazla zaman ve analiz gerekmeden yeterince iyi performans sağlamak için iyi bir yoldur.</span><span class="sxs-lookup"><span data-stu-id="ccf62-144">Caching can be a good way to get good enough performance without requiring a lot of time and analysis.</span></span> <span data-ttu-id="ccf62-145">Bellek, bu nedenle, kodunuzu veya veritabanınızı en iyi duruma getirmeye çalışan bir gün veya hafta harcamak yerine çıktıyı 30 saniye boyunca önbelleğe alarak ihtiyacınız olan performansı alabilir, önbelleğe alma çözümünü (30 saniyelik eski verilerin Tamam olduğu varsayıldığında) ve üzerinde geçiş yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ccf62-145">Memory is cheap, so if you can get the performance you need by caching the output for 30 seconds instead of spending a day or a week trying to optimize your code or database, do the caching solution (assuming 30-second old data is ok) and move on.</span></span> <span data-ttu-id="ccf62-146">Sonuç olarak, kötü tasarım büyük olasılıkla sizi sizin için doğru şekilde tasarlayacaktır, böylece uygulamalarınızı doğru bir şekilde tasarlamaya çalışırsınız.</span><span class="sxs-lookup"><span data-stu-id="ccf62-146">Eventually, poor design will probably catch up to you, so of course you should try to design your applications correctly.</span></span> <span data-ttu-id="ccf62-147">Ancak bugün yeterince iyi performans almanız gerekiyorsa, önbelleğe alma işlemi harika bir [yaklaşım] olabilir, bu da uygulamanızı daha sonraki bir tarihte yeniden düzenlemeniz için zaman satın alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ccf62-147">But if you just need to get good enough performance today, caching can be an excellent [approach], buying you time to refactor your application at a later date when you have the time to do so.</span></span>

<span data-ttu-id="ccf62-148">Önbelleğe alma işlemi, gelişmiş performans iyileştirmeleri sağlayabilse de, gerçek zamanlı, sık güncelleştirilen verileri kullanan uygulamalarla veya hatta daha fazla eski verilerin kabul edilemez olduğu durumlarda olduğu gibi tüm durumlarda geçerli değildir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-148">While caching can provide appreciable performance enhancements, it is not applicable in all situations, such as with applications that use real-time, frequently-updating data, or where even shortly-lived stale data is unacceptable.</span></span> <span data-ttu-id="ccf62-149">Ancak uygulamaların çoğunluğu için önbelleğe alma kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-149">But for the majority of applications, caching should be used.</span></span> <span data-ttu-id="ccf62-150">ASP.NET 2,0 ' de önbelleğe alma hakkında daha fazla arka plan için [ASP.NET 2,0 hızlı başlangıç öğreticilerinin](https://quickstarts.asp.net/QuickStartv20/aspnet/) [performans için önbelleğe alma](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/default.aspx) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-150">For more background on caching in ASP.NET 2.0, refer to the [Caching for Performance](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/default.aspx) section of the [ASP.NET 2.0 QuickStart Tutorials](https://quickstarts.asp.net/QuickStartv20/aspnet/).</span></span>

## <a name="step-1-creating-the-caching-web-pages"></a><span data-ttu-id="ccf62-151">1\. Adım: önbelleğe alma Web sayfalarını oluşturma</span><span class="sxs-lookup"><span data-stu-id="ccf62-151">Step 1: Creating the Caching Web Pages</span></span>

<span data-ttu-id="ccf62-152">ObjectDataSource 'un önbelleğe alma özelliklerinin araştırmasına başlamadan önce, Web sitesi projemizdeki Bu öğretici ve sonraki üç için gereken ASP.NET sayfalarını oluşturmak için ilk olarak bir süre sürer.</span><span class="sxs-lookup"><span data-stu-id="ccf62-152">Before we start our exploration of the ObjectDataSource s caching features, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next three.</span></span> <span data-ttu-id="ccf62-153">`Caching`adlı yeni bir klasör ekleyerek başlayın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-153">Start by adding a new folder named `Caching`.</span></span> <span data-ttu-id="ccf62-154">Ardından, aşağıdaki ASP.NET sayfalarını bu klasöre ekleyerek her bir sayfayı `Site.master` ana sayfasıyla ilişkilendirdiğinizden emin olun:</span><span class="sxs-lookup"><span data-stu-id="ccf62-154">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `ObjectDataSource.aspx`
- `FromTheArchitecture.aspx`
- `AtApplicationStartup.aspx`
- `SqlCacheDependencies.aspx`

![Önbelleğe alma ile Ilgili öğreticiler için ASP.NET sayfaları ekleyin](caching-data-with-the-objectdatasource-cs/_static/image1.png)

<span data-ttu-id="ccf62-156">**Şekil 1**: önbelleğe alma Ile ilgili öğreticiler Için ASP.NET sayfaları ekleme</span><span class="sxs-lookup"><span data-stu-id="ccf62-156">**Figure 1**: Add the ASP.NET Pages for the Caching-Related Tutorials</span></span>

<span data-ttu-id="ccf62-157">Diğer klasörlerde olduğu gibi, `Caching` klasöründeki `Default.aspx` öğreticileri bölümündeki öğreticilerin listelecektir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-157">Like in the other folders, `Default.aspx` in the `Caching` folder will list the tutorials in its section.</span></span> <span data-ttu-id="ccf62-158">`SectionLevelTutorialListing.ascx` Kullanıcı denetiminin bu işlevselliği sağladığını hatırlayın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-158">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="ccf62-159">Bu nedenle, bu kullanıcı denetimini Çözüm Gezgini sayfa s Tasarım görünümü üzerine sürükleyerek `Default.aspx` ekleyin.</span><span class="sxs-lookup"><span data-stu-id="ccf62-159">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>

<span data-ttu-id="ccf62-160">[![Şekil 2: SectionLevelTutorialListing. ascx Kullanıcı denetimini default. aspx 'e ekleme](caching-data-with-the-objectdatasource-cs/_static/image3.png)](caching-data-with-the-objectdatasource-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="ccf62-160">[![Figure 2: Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](caching-data-with-the-objectdatasource-cs/_static/image3.png)](caching-data-with-the-objectdatasource-cs/_static/image2.png)</span></span>

<span data-ttu-id="ccf62-161">**Şekil 2**: Şekil 2: `SectionLevelTutorialListing.ascx` kullanıcı denetimini `Default.aspx` 'e ekleme ([tam boyutlu görüntüyü görüntülemek için tıklayın](caching-data-with-the-objectdatasource-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="ccf62-161">**Figure 2**: Figure 2: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image4.png))</span></span>

<span data-ttu-id="ccf62-162">Son olarak, bu sayfaları `Web.sitemap` dosyasına girdi olarak ekleyin.</span><span class="sxs-lookup"><span data-stu-id="ccf62-162">Lastly, add these pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="ccf62-163">Özellikle, Ikili verilerle çalışmayı tamamladıktan sonra aşağıdaki biçimlendirmeyi ekleyin `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="ccf62-163">Specifically, add the following markup after the Working with Binary Data `<siteMapNode>`:</span></span>

[!code-xml[Main](caching-data-with-the-objectdatasource-cs/samples/sample1.xml)]

<span data-ttu-id="ccf62-164">`Web.sitemap`güncelleştirildikten sonra Öğreticiler Web sitesini bir tarayıcıdan görüntülemek için bir dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-164">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="ccf62-165">Sol taraftaki menü artık önbelleğe alma öğreticilerinin öğelerini içerir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-165">The menu on the left now includes items for the caching tutorials.</span></span>

![Site Haritası artık önbelleğe alma öğreticilerinin girdilerini Içerir](caching-data-with-the-objectdatasource-cs/_static/image5.png)

<span data-ttu-id="ccf62-167">**Şekil 3**: site haritası artık önbelleğe alma öğreticilerinin girdilerini içerir</span><span class="sxs-lookup"><span data-stu-id="ccf62-167">**Figure 3**: The Site Map Now Includes Entries for the Caching Tutorials</span></span>

## <a name="step-2-displaying-a-list-of-products-in-a-web-page"></a><span data-ttu-id="ccf62-168">2\. Adım: bir Web sayfasında ürünlerin listesini görüntüleme</span><span class="sxs-lookup"><span data-stu-id="ccf62-168">Step 2: Displaying a List of Products in a Web Page</span></span>

<span data-ttu-id="ccf62-169">Bu öğreticide, ObjectDataSource denetimi yerleşik önbelleğe alma özelliklerinin nasıl kullanılacağı açıklanır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-169">This tutorial explores how to use the ObjectDataSource control s built-in caching features.</span></span> <span data-ttu-id="ccf62-170">Bu özelliklere bakmadan önce, ilk olarak bir sayfanın çalışması gerekir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-170">Before we can look at these features, though, we first need a page to work from.</span></span> <span data-ttu-id="ccf62-171">`ProductsBLL` sınıfından bir ObjectDataSource tarafından alınan ürün bilgilerini listelemek için GridView kullanan bir Web sayfası oluşturalım.</span><span class="sxs-lookup"><span data-stu-id="ccf62-171">Let s create a web page that uses a GridView to list product information retrieved by an ObjectDataSource from the `ProductsBLL` class.</span></span>

<span data-ttu-id="ccf62-172">`Caching` klasöründeki `ObjectDataSource.aspx` sayfasını açarak başlayın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-172">Start by opening the `ObjectDataSource.aspx` page in the `Caching` folder.</span></span> <span data-ttu-id="ccf62-173">Araç kutusundan bir GridView 'u tasarımcı üzerine sürükleyin, `ID` özelliğini `Products`olarak ayarlayın ve akıllı etiketinden, `ProductsDataSource`adlı yeni bir ObjectDataSource denetimine bağlamayı seçin.</span><span class="sxs-lookup"><span data-stu-id="ccf62-173">Drag a GridView from the Toolbox onto the Designer, set its `ID` property to `Products`, and, from its smart tag, choose to bind it to a new ObjectDataSource control named `ProductsDataSource`.</span></span> <span data-ttu-id="ccf62-174">ObjectDataSource 'ı `ProductsBLL` sınıfıyla çalışacak şekilde yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-174">Configure the ObjectDataSource to work with the `ProductsBLL` class.</span></span>

<span data-ttu-id="ccf62-175">[![, ObjectDataSource 'ı ProductsBLL sınıfını kullanacak şekilde yapılandırma](caching-data-with-the-objectdatasource-cs/_static/image7.png)](caching-data-with-the-objectdatasource-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="ccf62-175">[![Configure the ObjectDataSource to Use the ProductsBLL Class](caching-data-with-the-objectdatasource-cs/_static/image7.png)](caching-data-with-the-objectdatasource-cs/_static/image6.png)</span></span>

<span data-ttu-id="ccf62-176">**Şekil 4**: ObjectDataSource 'ı `ProductsBLL` sınıfını kullanacak şekilde yapılandırma ([tam boyutlu görüntüyü görüntülemek için tıklayın](caching-data-with-the-objectdatasource-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="ccf62-176">**Figure 4**: Configure the ObjectDataSource to Use the `ProductsBLL` Class ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image8.png))</span></span>

<span data-ttu-id="ccf62-177">Bu sayfa için, ObjectDataSource 'da önbelleğe alınan veriler GridView s arabirimi aracılığıyla değiştirildiğinde ne olduğunu inceleyebileceğiniz şekilde, s için düzenlenebilir bir GridView oluşturalım.</span><span class="sxs-lookup"><span data-stu-id="ccf62-177">For this page, let s create an editable GridView so that we can examine what happens when data cached in the ObjectDataSource is modified through the GridView s interface.</span></span> <span data-ttu-id="ccf62-178">Seç sekmesinde açılan listeyi varsayılan olarak ayarlayın, `GetProducts()`, ancak GÜNCELLEŞTIR sekmesindeki seçili öğeyi, giriş parametreleri olarak `productName`, `unitPrice`ve `productID` kabul eden `UpdateProduct` aşırı yüklemeye değiştirin.</span><span class="sxs-lookup"><span data-stu-id="ccf62-178">Leave the drop-down list in the SELECT tab set to its default, `GetProducts()`, but change the selected item in the UPDATE tab to the `UpdateProduct` overload that accepts `productName`, `unitPrice`, and `productID` as its input parameters.</span></span>

<span data-ttu-id="ccf62-179">[![GÜNCELLEŞTIRME sekmesi açılan listesini uygun UpdateProduct aşırı yüküne ayarla](caching-data-with-the-objectdatasource-cs/_static/image10.png)](caching-data-with-the-objectdatasource-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="ccf62-179">[![Set the UPDATE Tab s Drop-Down List to the Appropriate UpdateProduct Overload](caching-data-with-the-objectdatasource-cs/_static/image10.png)](caching-data-with-the-objectdatasource-cs/_static/image9.png)</span></span>

<span data-ttu-id="ccf62-180">**Şekil 5**: güncelleştirme sekmesi s açılan listesini uygun `UpdateProduct` aşırı yüklemeye ayarlayın ([tam boyutlu görüntüyü görüntülemek için tıklayın](caching-data-with-the-objectdatasource-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="ccf62-180">**Figure 5**: Set the UPDATE Tab s Drop-Down List to the Appropriate `UpdateProduct` Overload ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image11.png))</span></span>

<span data-ttu-id="ccf62-181">Son olarak, INSERT ve DELETE sekmelerindeki açılan listeleri (yok) olarak ayarlayın ve son ' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-181">Finally, set the drop-down lists in the INSERT and DELETE tabs to (None) and click Finish.</span></span> <span data-ttu-id="ccf62-182">Veri kaynağı Yapılandırma Sihirbazı 'nı tamamladıktan sonra Visual Studio, ObjectDataSource `OldValuesParameterFormatString` özelliğini `original_{0}`olarak ayarlar.</span><span class="sxs-lookup"><span data-stu-id="ccf62-182">Upon completing the Configure Data Source wizard, Visual Studio sets the ObjectDataSource s `OldValuesParameterFormatString` property to `original_{0}`.</span></span> <span data-ttu-id="ccf62-183">Veri öğreticisini [ekleme, güncelleştirme ve silmeye genel bakış](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) konusunda açıklandığı gibi, güncelleştirme iş akışınız hata olmadan devam edebilmesi için, bu özelliğin bildirime dayalı sözdiziminden kaldırılması veya varsayılan değerine (`{0}`) yeniden ayarlanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-183">As discussed in the [An Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, this property needs to be removed from the declarative syntax or set back to its default value, `{0}`, in order for our update workflow to proceed without error.</span></span>

<span data-ttu-id="ccf62-184">Ayrıca, sihirbazın tamamlanması, her ürün veri alanı için GridView 'a bir alan ekler.</span><span class="sxs-lookup"><span data-stu-id="ccf62-184">Furthermore, at the completion of the wizard Visual Studio adds a field to the GridView for each of the product data fields.</span></span> <span data-ttu-id="ccf62-185">`ProductName`, `CategoryName`ve `UnitPrice` BoundFields hariç tümünü kaldırın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-185">Remove all but the `ProductName`, `CategoryName`, and `UnitPrice` BoundFields.</span></span> <span data-ttu-id="ccf62-186">Ardından, bu BoundFields 'in her birinin `HeaderText` özelliklerini sırasıyla ürün, kategori ve fiyat olarak güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="ccf62-186">Next, update the `HeaderText` properties of each of these BoundFields to Product, Category, and Price, respectively.</span></span> <span data-ttu-id="ccf62-187">`ProductName` alanı gerekli olduğundan, BoundField öğesini TemplateField öğesine dönüştürün ve `EditItemTemplate`bir RequiredFieldValidator ekleyin.</span><span class="sxs-lookup"><span data-stu-id="ccf62-187">Since the `ProductName` field is required, convert the BoundField into a TemplateField and add a RequiredFieldValidator to the `EditItemTemplate`.</span></span> <span data-ttu-id="ccf62-188">Benzer şekilde, `UnitPrice` BoundField öğesini TemplateField 'a dönüştürün ve Kullanıcı tarafından girilen değerin sıfırdan büyük veya sıfıra eşit geçerli bir para birimi değeri olduğundan emin olmak için bir CompareValidator ekleyin.</span><span class="sxs-lookup"><span data-stu-id="ccf62-188">Similarly, convert the `UnitPrice` BoundField into a TemplateField and add a CompareValidator to ensure that the value entered by the user is a valid currency value that s greater than or equal to zero.</span></span> <span data-ttu-id="ccf62-189">Bu değişikliklere ek olarak, `UnitPrice` değerini sağa hizalamak veya `UnitPrice` metnin biçimlendirmesini salt okunurdur ve Düzenle arabirimlerinde belirtmek gibi herhangi bir Aesthetic Characteristics değişikliğini gerçekleştirmeye başlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ccf62-189">In addition to these modifications, feel free to perform any aesthetic changes, such as right-aligning the `UnitPrice` value, or specifying the formatting for the `UnitPrice` text in its read-only and editing interfaces.</span></span>

<span data-ttu-id="ccf62-190">GridView s akıllı etiketinde düzenleme etkinleştir onay kutusunu işaretleyerek GridView 'ı düzenlenebilir hale getirin.</span><span class="sxs-lookup"><span data-stu-id="ccf62-190">Make the GridView editable by checking the Enable Editing checkbox in the GridView s smart tag.</span></span> <span data-ttu-id="ccf62-191">Ayrıca, Sayfalamayı Etkinleştir ve sıralamayı etkinleştir onay kutularını işaretleyin.</span><span class="sxs-lookup"><span data-stu-id="ccf62-191">Also check the Enable Paging and Enable Sorting checkboxes.</span></span>

> [!NOTE]
> <span data-ttu-id="ccf62-192">GridView s Editing arabirimini nasıl özelleştireceğinizi gözden geçirmeniz gerekiyor mu?</span><span class="sxs-lookup"><span data-stu-id="ccf62-192">Need a review of how to customize the GridView s editing interface?</span></span> <span data-ttu-id="ccf62-193">Bu durumda, [veri değiştirme arabirimi](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) öğreticisini özelleştirmeye geri bakın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-193">If so, refer back to the [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorial.</span></span>

<span data-ttu-id="ccf62-194">[Düzen, sıralama ve sayfalama için GridView desteğini etkinleştirmek ![](caching-data-with-the-objectdatasource-cs/_static/image13.png)](caching-data-with-the-objectdatasource-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="ccf62-194">[![Enable GridView Support for Editing, Sorting, and Paging](caching-data-with-the-objectdatasource-cs/_static/image13.png)](caching-data-with-the-objectdatasource-cs/_static/image12.png)</span></span>

<span data-ttu-id="ccf62-195">**Şekil 6**: düzen, sıralama ve sayfalama Için GridView desteğini etkinleştirin ([tam boyutlu görüntüyü görüntülemek için tıklayın](caching-data-with-the-objectdatasource-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="ccf62-195">**Figure 6**: Enable GridView Support for Editing, Sorting, and Paging ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image14.png))</span></span>

<span data-ttu-id="ccf62-196">Bu GridView değişikliklerini yaptıktan sonra, GridView ve ObjectDataSource 'un bildirim temelli işaretlemesi aşağıdakine benzer olmalıdır:</span><span class="sxs-lookup"><span data-stu-id="ccf62-196">After making these GridView modifications, the GridView and ObjectDataSource s declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](caching-data-with-the-objectdatasource-cs/samples/sample2.aspx)]

<span data-ttu-id="ccf62-197">Şekil 7 ' de gösterildiği gibi, düzenlenebilir GridView veritabanındaki her bir ürünün adını, kategorisini ve fiyatını listeler.</span><span class="sxs-lookup"><span data-stu-id="ccf62-197">As Figure 7 shows, the editable GridView lists the name, category, and price of each of the products in the database.</span></span> <span data-ttu-id="ccf62-198">En kısa süre içinde sonuçları sıralayın, bu işlem içindeki sayfaları düzenleyin ve bir kaydı düzenleyin.</span><span class="sxs-lookup"><span data-stu-id="ccf62-198">Take a moment to test out the page s functionality sort the results, page through them, and edit a record.</span></span>

<span data-ttu-id="ccf62-199">[Her ürün adı, kategori ve fiyat ![sıralanabilir, disk belleğine alınabilir, düzenlenebilir bir GridView 'da listelenmiştir](caching-data-with-the-objectdatasource-cs/_static/image16.png)](caching-data-with-the-objectdatasource-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="ccf62-199">[![Each Product s Name, Category, and Price is Listed in a Sortable, Pageable, Editable GridView](caching-data-with-the-objectdatasource-cs/_static/image16.png)](caching-data-with-the-objectdatasource-cs/_static/image15.png)</span></span>

<span data-ttu-id="ccf62-200">**Şekil 7**: her ürün adı, kategori ve fiyat sıralanabilir, disk belleğine alınan, düzenlenebilir bir GridView 'da listelenir ([tam boyutlu görüntüyü görüntülemek için tıklayın](caching-data-with-the-objectdatasource-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="ccf62-200">**Figure 7**: Each Product s Name, Category, and Price is Listed in a Sortable, Pageable, Editable GridView ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image17.png))</span></span>

## <a name="step-3-examining-when-the-objectdatasource-is-requesting-data"></a><span data-ttu-id="ccf62-201">3\. Adım: ObjectDataSource 'un verileri ne zaman Istediğini Inceleme</span><span class="sxs-lookup"><span data-stu-id="ccf62-201">Step 3: Examining When the ObjectDataSource is Requesting Data</span></span>

<span data-ttu-id="ccf62-202">GridView `Products`, `ProductsDataSource` ObjectDataSource 'un `Select` yöntemini çağırarak verileri görüntülenecek şekilde alır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-202">The `Products` GridView retrieves its data to display by invoking the `Select` method of the `ProductsDataSource` ObjectDataSource.</span></span> <span data-ttu-id="ccf62-203">Bu ObjectDataSource, Iş mantığı katmanı s `ProductsBLL` sınıfının bir örneğini oluşturur ve `GetProducts()` yöntemini çağırır ve bu da veri erişim katmanı s `ProductsTableAdapter` s `GetProducts()` yöntemini çağırır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-203">This ObjectDataSource creates an instance of the Business Logic Layer s `ProductsBLL` class and calls its `GetProducts()` method, which in turn calls the Data Access Layer s `ProductsTableAdapter` s `GetProducts()` method.</span></span> <span data-ttu-id="ccf62-204">DAL yöntemi, Northwind veritabanına bağlanır ve yapılandırılmış `SELECT` sorgusunu yayınlar.</span><span class="sxs-lookup"><span data-stu-id="ccf62-204">The DAL method connects to the Northwind database and issues the configured `SELECT` query.</span></span> <span data-ttu-id="ccf62-205">Bu veriler daha sonra DAL olarak döndürülür ve bir `NorthwindDataTable`.</span><span class="sxs-lookup"><span data-stu-id="ccf62-205">This data is then returned to the DAL, which packages it up in a `NorthwindDataTable`.</span></span> <span data-ttu-id="ccf62-206">DataTable nesnesi BLL 'e döndürülür. Bu, bunu GridView 'a döndüren ObjectDataSource öğesine döndürür.</span><span class="sxs-lookup"><span data-stu-id="ccf62-206">The DataTable object is returned to the BLL, which returns it to the ObjectDataSource, which returns it to the GridView.</span></span> <span data-ttu-id="ccf62-207">GridView daha sonra DataTable 'daki her bir `DataRow` için bir `GridViewRow` nesnesi oluşturur ve her `GridViewRow` sonunda istemciye döndürülen ve ziyaretçi tarayıcısı üzerinde görüntülenen HTML 'de işlenir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-207">The GridView then creates a `GridViewRow` object for each `DataRow` in the DataTable, and each `GridViewRow` is eventually rendered into the HTML that is returned to the client and displayed on the visitor s browser.</span></span>

<span data-ttu-id="ccf62-208">Bu olay dizisi her biri ve GridView 'un temel alınan verilerine bağlanması gereken her seferinde oluşur.</span><span class="sxs-lookup"><span data-stu-id="ccf62-208">This sequence of events happens each and every time the GridView needs to bind to its underlying data.</span></span> <span data-ttu-id="ccf62-209">Sayfa ilk kez ziyaret edildiğinde, bir veri sayfasından diğerine geçiş yaparken, GridView sıralandığında veya GridView s verilerini yerleşik düzenleme veya silme arabirimleri aracılığıyla değiştirirken meydana gelir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-209">That happens when the page is first visited, when moving from one page of data to another, when sorting the GridView, or when modifying the GridView s data through its built-in editing or deleting interfaces.</span></span> <span data-ttu-id="ccf62-210">GridView s görünüm durumu devre dışıysa, GridView her bir ve her geri göndermede de yeniden bağlanacaktır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-210">If the GridView s view state is disabled, the GridView will be rebound on each and every postback as well.</span></span> <span data-ttu-id="ccf62-211">GridView Ayrıca `DataBind()` yöntemi çağırarak verilerine açıkça yeniden bağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-211">The GridView can also be explicitly rebound to its data by calling its `DataBind()` method.</span></span>

<span data-ttu-id="ccf62-212">Verilerin veritabanından alındığı sıklığı tam olarak görmek için, verilerin ne zaman yeniden alındığını belirten bir ileti görüntülenmesini sağlayın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-212">To fully appreciate the frequency with which the data is retrieved from the database, let s display a message indicating when the data is being re-retrieved.</span></span> <span data-ttu-id="ccf62-213">`ODSEvents`adlı GridView 'un üstüne bir etiket Web denetimi ekleyin.</span><span class="sxs-lookup"><span data-stu-id="ccf62-213">Add a Label Web control above the GridView named `ODSEvents`.</span></span> <span data-ttu-id="ccf62-214">`Text` özelliğini temizleyin ve `EnableViewState` özelliğini `false`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-214">Clear out its `Text` property and set its `EnableViewState` property to `false`.</span></span> <span data-ttu-id="ccf62-215">Etiketin altına bir Button Web Control ekleyin ve `Text` özelliğini postback olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-215">Underneath the Label, add a Button Web control and set its `Text` property to Postback .</span></span>

<span data-ttu-id="ccf62-216">[GridView 'un üzerindeki sayfaya bir etiket ve düğme eklemek ![](caching-data-with-the-objectdatasource-cs/_static/image19.png)](caching-data-with-the-objectdatasource-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="ccf62-216">[![Add a Label and Button to the Page Above the GridView](caching-data-with-the-objectdatasource-cs/_static/image19.png)](caching-data-with-the-objectdatasource-cs/_static/image18.png)</span></span>

<span data-ttu-id="ccf62-217">**Şekil 8**: GridView 'un üzerindeki sayfaya bir etiket ve düğme ekleyin ([tam boyutlu görüntüyü görüntülemek için tıklayın](caching-data-with-the-objectdatasource-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="ccf62-217">**Figure 8**: Add a Label and Button to the Page Above the GridView ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image20.png))</span></span>

<span data-ttu-id="ccf62-218">Veri erişimi iş akışı sırasında, ObjectDataSource `Selecting` olayı temel alınan nesne oluşturulmadan ve yapılandırılan Yöntem çağrılmadan önce ateşlenir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-218">During the data access workflow, the ObjectDataSource s `Selecting` event fires before the underlying object is created and its configured method invoked.</span></span> <span data-ttu-id="ccf62-219">Bu olay için bir olay işleyicisi oluşturun ve aşağıdaki kodu ekleyin:</span><span class="sxs-lookup"><span data-stu-id="ccf62-219">Create an event handler for this event and add the following code:</span></span>

[!code-csharp[Main](caching-data-with-the-objectdatasource-cs/samples/sample3.cs)]

<span data-ttu-id="ccf62-220">ObjectDataSource her bir veri için mimariye bir istek yaptığında, etiket tetiklenen olayı seçen metin görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-220">Each time the ObjectDataSource makes a request to the architecture for data, the Label will display the text Selecting event fired .</span></span>

<span data-ttu-id="ccf62-221">Bu sayfayı bir tarayıcıda ziyaret edin.</span><span class="sxs-lookup"><span data-stu-id="ccf62-221">Visit this page in a browser.</span></span> <span data-ttu-id="ccf62-222">Sayfa ilk kez ziyaret edildiğinde, tetiklenen olayı seçen metin gösterilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-222">When the page is first visited, the text Selecting event fired is shown.</span></span> <span data-ttu-id="ccf62-223">Geri gönder düğmesine tıklayın ve metnin kaybolduğunu unutmayın (GridView s `EnableViewState` özelliğinin `true`, varsayılan) olarak ayarlandığı varsayılır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-223">Click the Postback button and note that the text disappears (assuming that the GridView s `EnableViewState` property is set to `true`, the default).</span></span> <span data-ttu-id="ccf62-224">Bunun nedeni, geri göndermede GridView 'un görünüm durumundan yeniden yapılandırılmış olması ve bu nedenle verileri için ObjectDataSource 'e geri gönderilmesi.</span><span class="sxs-lookup"><span data-stu-id="ccf62-224">This is because, on postback, the GridView is reconstructed from its view state and therefore doesn t turn to the ObjectDataSource for its data.</span></span> <span data-ttu-id="ccf62-225">Ancak verileri sıralama, sayfalama veya düzenlemenin yanı sıra GridView 'un veri kaynağına yeniden bağlanmasına neden olur ve bu nedenle olay harekete geçen metin seçimi yeniden belirir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-225">Sorting, paging, or editing the data, however, causes the GridView to rebind to its data source, and therefore the Selecting event fired text reappears.</span></span>

<span data-ttu-id="ccf62-226">[GridView, veri kaynağına her bağlandığında ![tetiklenen olay seçildiğinde görüntülenir](caching-data-with-the-objectdatasource-cs/_static/image22.png)](caching-data-with-the-objectdatasource-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="ccf62-226">[![Whenever the GridView is Rebound to its Data Source, Selecting event fired is Displayed](caching-data-with-the-objectdatasource-cs/_static/image22.png)](caching-data-with-the-objectdatasource-cs/_static/image21.png)</span></span>

<span data-ttu-id="ccf62-227">**Şekil 9**: GridView 'un veri kaynağına yeniden bağlanması durumunda tetiklenen olayı seçme görüntülenir ([tam boyutlu görüntüyü görüntülemek için tıklayın](caching-data-with-the-objectdatasource-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="ccf62-227">**Figure 9**: Whenever the GridView is Rebound to its Data Source, Selecting event fired is Displayed ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image23.png))</span></span>

<span data-ttu-id="ccf62-228">[Geri gönderme düğmesine tıklamak ![GridView 'un görünüm durumundan yeniden oluşturulmasına neden olur](caching-data-with-the-objectdatasource-cs/_static/image25.png)](caching-data-with-the-objectdatasource-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="ccf62-228">[![Clicking the Postback Button Causes the GridView to be Reconstructed from its View State](caching-data-with-the-objectdatasource-cs/_static/image25.png)](caching-data-with-the-objectdatasource-cs/_static/image24.png)</span></span>

<span data-ttu-id="ccf62-229">**Şekil 10**: geri gönderme düğmesine tıklamak GridView 'un görünüm durumundan yeniden oluşturulmasına neden olur ([tam boyutlu görüntüyü görüntülemek için tıklayın](caching-data-with-the-objectdatasource-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="ccf62-229">**Figure 10**: Clicking the Postback Button Causes the GridView to be Reconstructed from its View State ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image26.png))</span></span>

<span data-ttu-id="ccf62-230">Verilerin her sayfalanışında veya sıralandığında veritabanı verilerinin alınması beklenebilir görünebilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-230">It may seem wasteful to retrieve the database data each time the data is paged through or sorted.</span></span> <span data-ttu-id="ccf62-231">Bu yana, varsayılan sayfalama 'yı kullanmaya başladıktan sonra, ilk sayfa görüntülenirken ObjectDataSource tüm kayıtları almıştır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-231">After all, since we re using default paging, the ObjectDataSource has retrieved all of the records when displaying the first page.</span></span> <span data-ttu-id="ccf62-232">GridView sıralama ve sayfalama desteği sağlamasa bile, sayfa her kullanıcı tarafından ilk kez ziyaret edildiğinde (ve Görünüm durumu devre dışıysa her geri göndermede) verilerin veritabanından alınması gerekir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-232">Even if the GridView does not provide sorting and paging support, the data must be retrieved from the database each time the page is first visited by any user (and on every postback, if view state is disabled).</span></span> <span data-ttu-id="ccf62-233">Ancak GridView tüm kullanıcılar için aynı verileri gösteriyorsa, bu ek veritabanı istekleri gereksiz olur.</span><span class="sxs-lookup"><span data-stu-id="ccf62-233">But if the GridView is showing the same data to all users, these extra database requests are superfluous.</span></span> <span data-ttu-id="ccf62-234">`GetProducts()` yönteminden döndürülen sonuçları önbelleğe alma ve GridView 'i bu önbelleğe alınmış sonuçlara bağlama.</span><span class="sxs-lookup"><span data-stu-id="ccf62-234">Why not cache the results returned from the `GetProducts()` method and bind the GridView to those cached results?</span></span>

## <a name="step-4-caching-the-data-using-the-objectdatasource"></a><span data-ttu-id="ccf62-235">4\. Adım: ObjectDataSource kullanarak verileri önbelleğe alma</span><span class="sxs-lookup"><span data-stu-id="ccf62-235">Step 4: Caching the Data Using the ObjectDataSource</span></span>

<span data-ttu-id="ccf62-236">Yalnızca birkaç özelliği ayarlayarak, ObjectDataSource, alınan verilerini ASP.NET veri önbelleğinde otomatik olarak önbelleğe almak üzere yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-236">By simply setting a few properties, the ObjectDataSource can be configured to automatically cache its retrieved data in the ASP.NET data cache.</span></span> <span data-ttu-id="ccf62-237">Aşağıdaki liste, ObjectDataSource 'un önbellekte ilgili özelliklerini özetler:</span><span class="sxs-lookup"><span data-stu-id="ccf62-237">The following list summarizes the cache-related properties of the ObjectDataSource:</span></span>

- <span data-ttu-id="ccf62-238">Önbelleğe almayı etkinleştirmek için [EnableCaching](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.enablecaching.aspx) 'nin `true` olarak ayarlanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-238">[EnableCaching](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.enablecaching.aspx) must be set to `true` to enable caching.</span></span> <span data-ttu-id="ccf62-239">Varsayılan, `false` değeridir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-239">The default is `false`.</span></span>
- <span data-ttu-id="ccf62-240">[CacheDuration](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheduration.aspx) , verilerin önbelleğe alınma süresi (saniye cinsinden).</span><span class="sxs-lookup"><span data-stu-id="ccf62-240">[CacheDuration](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheduration.aspx) the amount of time, in seconds, that the data is cached.</span></span> <span data-ttu-id="ccf62-241">Varsayılan değer 0 ' dır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-241">The default is 0.</span></span> <span data-ttu-id="ccf62-242">ObjectDataSource yalnızca `EnableCaching` `true` ve `CacheDuration` sıfırdan büyük bir değere ayarlandıysa verileri önbelleğe alacak.</span><span class="sxs-lookup"><span data-stu-id="ccf62-242">The ObjectDataSource will only cache data if `EnableCaching` is `true` and `CacheDuration` is set to a value greater than zero.</span></span>
- <span data-ttu-id="ccf62-243">[CacheExpirationPolicy](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheexpirationpolicy.aspx) , `Absolute` veya `Sliding`olarak ayarlanabilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-243">[CacheExpirationPolicy](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheexpirationpolicy.aspx) can be set to `Absolute` or `Sliding`.</span></span> <span data-ttu-id="ccf62-244">`Absolute`, ObjectDataSource `CacheDuration` saniye boyunca alınan verilerini önbelleğe alır; `Sliding`, verilerin süresi yalnızca `CacheDuration` saniye boyunca erişilmedi.</span><span class="sxs-lookup"><span data-stu-id="ccf62-244">If `Absolute`, the ObjectDataSource caches its retrieved data for `CacheDuration` seconds; if `Sliding`, the data expires only after it has not been accessed for `CacheDuration` seconds.</span></span> <span data-ttu-id="ccf62-245">Varsayılan, `Absolute` değeridir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-245">The default is `Absolute`.</span></span>
- <span data-ttu-id="ccf62-246">[CacheKeyDependency](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cachekeydependency.aspx) bu özelliği, ObjectDataSource s önbellek girişlerini varolan bir önbellek bağımlılığı ile ilişkilendirmek için kullanın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-246">[CacheKeyDependency](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cachekeydependency.aspx) use this property to associate the ObjectDataSource s cache entries with an existing cache dependency.</span></span> <span data-ttu-id="ccf62-247">ObjectDataSource 'un veri girişleri, ilişkili `CacheKeyDependency`süresi dolduğunda önbellekten erken çıkartık olabilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-247">The ObjectDataSource s data entries can be prematurely evicted from the cache by expiring its associated `CacheKeyDependency`.</span></span> <span data-ttu-id="ccf62-248">Bu özellik en yaygın olarak SQL önbellek bağımlılıkları öğreticisini [kullanarak](using-sql-cache-dependencies-cs.md) keşfedediğimiz bir konu olan ObjectDataSource s Cache ile SQL önbellek bağımlılığını ilişkilendirmek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-248">This property is most commonly used to associate a SQL cache dependency with the ObjectDataSource s cache, a topic we'll explore in the future [Using SQL Cache Dependencies](using-sql-cache-dependencies-cs.md) tutorial.</span></span>

<span data-ttu-id="ccf62-249">`ProductsDataSource` ObjectDataSource 'ı, verileri mutlak ölçekte 30 saniye önbellekte önbelleğe almak üzere yapılandıralım.</span><span class="sxs-lookup"><span data-stu-id="ccf62-249">Let s configure the `ProductsDataSource` ObjectDataSource to cache its data for 30 seconds on an absolute scale.</span></span> <span data-ttu-id="ccf62-250">ObjectDataSource `EnableCaching` özelliğini `true` ve `CacheDuration` özelliğini 30 olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-250">Set the ObjectDataSource s `EnableCaching` property to `true` and its `CacheDuration` property to 30.</span></span> <span data-ttu-id="ccf62-251">`CacheExpirationPolicy` özelliğini varsayılan, `Absolute`olarak bırakın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-251">Leave the `CacheExpirationPolicy` property set to its default, `Absolute`.</span></span>

<span data-ttu-id="ccf62-252">[![, verileri 30 saniye önbellekte önbelleğe almak için yapılandırın](caching-data-with-the-objectdatasource-cs/_static/image28.png)](caching-data-with-the-objectdatasource-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="ccf62-252">[![Configure the ObjectDataSource to Cache its Data for 30 Seconds](caching-data-with-the-objectdatasource-cs/_static/image28.png)](caching-data-with-the-objectdatasource-cs/_static/image27.png)</span></span>

<span data-ttu-id="ccf62-253">**Şekil 11**: ObjectDataSource 'ı verileri 30 saniye önbellekte önbelleğe almak üzere yapılandırın ([tam boyutlu görüntüyü görüntülemek için tıklayın](caching-data-with-the-objectdatasource-cs/_static/image29.png))</span><span class="sxs-lookup"><span data-stu-id="ccf62-253">**Figure 11**: Configure the ObjectDataSource to Cache its Data for 30 Seconds ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image29.png))</span></span>

<span data-ttu-id="ccf62-254">Değişikliklerinizi kaydedin ve bu sayfayı bir tarayıcıda yeniden ziyaret edin.</span><span class="sxs-lookup"><span data-stu-id="ccf62-254">Save your changes and revisit this page in a browser.</span></span> <span data-ttu-id="ccf62-255">İlk olarak veri önbellekte olmadığında, sayfayı ilk kez ziyaret ettiğinizde başlatılan olay seçme metni görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-255">The Selecting event fired text will appear when you first visit the page, as initially the data is not in the cache.</span></span> <span data-ttu-id="ccf62-256">Ancak geri gönderme düğmesine tıklanarak, sıralama, sayfalama veya Düzenle ya da Iptal düğmelerini tıklatmak ile tetiklenen sonraki geri göndermeler, başlatılan olay harekete geçirilmiş metni *yeniden görüntülemez* .</span><span class="sxs-lookup"><span data-stu-id="ccf62-256">But subsequent postbacks triggered by clicking the Postback button, sorting, paging, or clicking the Edit or Cancel buttons does *not* redisplay the Selecting event fired text.</span></span> <span data-ttu-id="ccf62-257">Bunun nedeni, `Selecting` olayının yalnızca ObjectDataSource temel nesnesinden verileri aldığında harekete geçirilir; veriler veri önbelleğinden çekilmezse `Selecting` olay harekete geçmeyecektir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-257">This is because the `Selecting` event only fires when the ObjectDataSource gets its data from its underlying object; the `Selecting` event does not fire if the data is pulled from the data cache.</span></span>

<span data-ttu-id="ccf62-258">30 saniye sonra, veriler önbellekten çıkarılacaktır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-258">After 30 seconds, the data will be evicted from the cache.</span></span> <span data-ttu-id="ccf62-259">`Insert`, `Update`veya `Delete` yöntemleri çağrılırsa, veriler önbellekten de çıkartılecektir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-259">The data will also be evicted from the cache if the ObjectDataSource s `Insert`, `Update`, or `Delete` methods are invoked.</span></span> <span data-ttu-id="ccf62-260">Sonuç olarak, 30 saniye geçtikten sonra veya güncelleştirme düğmesine tıklandıktan sonra, sıralama, sayfalama veya Düzenle ya da Iptal düğmelerini tıklatmak, ObjectDataSource 'un verileri temel nesnesinden almasını sağlar ve bu da `Selecting` olay tetiklendiğinde çalıştırılan olayı Seçme metnini görüntüler.</span><span class="sxs-lookup"><span data-stu-id="ccf62-260">Consequently, after 30 seconds have passed or the Update button has been clicked, sorting, paging, or clicking the Edit or Cancel buttons will cause the ObjectDataSource to get its data from its underlying object, displaying the Selecting event fired text when the `Selecting` event fires.</span></span> <span data-ttu-id="ccf62-261">Döndürülen bu sonuçlar veri önbelleğine geri yerleştirilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-261">These returned results are placed back into the data cache.</span></span>

> [!NOTE]
> <span data-ttu-id="ccf62-262">Çalışan olay harekete geçen metni sık sık görürseniz, ObjectDataSource 'un önbelleğe alınmış verilerle çalışmasını bekleseniz bile, bu durum Bellek kısıtlamalarından kaynaklanıyor olabilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-262">If you see the Selecting event fired text frequently, even when you expect the ObjectDataSource to be working with cached data, it may be due to memory constraints.</span></span> <span data-ttu-id="ccf62-263">Yeterli boş bellek yoksa, ObjectDataSource tarafından önbelleğe eklenen veriler de atılabilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-263">If there is not enough free memory, the data added to the cache by the ObjectDataSource may have been scavenged.</span></span> <span data-ttu-id="ccf62-264">ObjectDataSource, verileri doğru önbelleğe alma veya yalnızca verileri önbelleğe alma gibi görünmesine gerek yoksa belleği boşaltmak için bazı uygulamaları kapatın ve yeniden deneyin.</span><span class="sxs-lookup"><span data-stu-id="ccf62-264">If the ObjectDataSource doesn t appear to be correctly caching the data or only caches the data sporadically, close some applications to free memory and try again.</span></span>

<span data-ttu-id="ccf62-265">Şekil 12, ObjectDataSource 'un önbelleğe alma iş akışını gösterir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-265">Figure 12 illustrates the ObjectDataSource s caching workflow.</span></span> <span data-ttu-id="ccf62-266">Ekranda seçme olayı harekete geçirildiğinde metin görüntülendiğinde, verilerin önbellekte olmaması ve temel alınan nesneden alınması gerekiyordu.</span><span class="sxs-lookup"><span data-stu-id="ccf62-266">When the Selecting event fired text appears on your screen, it is because the data was not in the cache and had to be retrieved from the underlying object.</span></span> <span data-ttu-id="ccf62-267">Ancak bu metin eksik olduğunda, veriler önbellekten kullanılabilir olduğundan,.</span><span class="sxs-lookup"><span data-stu-id="ccf62-267">When this text is missing, however, it s because the data was available from the cache.</span></span> <span data-ttu-id="ccf62-268">Veriler önbellekten döndürüldüğünde, temel alınan nesneye hiçbir çağrı yapılmaz ve bu nedenle veritabanı sorgusu yürütülmez.</span><span class="sxs-lookup"><span data-stu-id="ccf62-268">When the data is returned from the cache there s no call to the underlying object and, therefore, no database query executed.</span></span>

![ObjectDataSource verileri veri önbelleğinden depolar ve alır](caching-data-with-the-objectdatasource-cs/_static/image30.png)

<span data-ttu-id="ccf62-270">**Şekil 12**: ObjectDataSource, verileri veri önbelleğinden depolar ve alır</span><span class="sxs-lookup"><span data-stu-id="ccf62-270">**Figure 12**: The ObjectDataSource Stores and Retrieves its Data from the Data Cache</span></span>

<span data-ttu-id="ccf62-271">Her bir ASP.NET uygulamasının, tüm sayfalar ve ziyaretçiler genelinde paylaştığı kendi veri önbelleği örneği vardır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-271">Each ASP.NET application has its own data cache instance that s shared across all pages and visitors.</span></span> <span data-ttu-id="ccf62-272">Diğer bir deyişle, ObjectDataSource tarafından veri önbelleğinde depolanan veriler aynı şekilde sayfayı ziyaret eden tüm kullanıcılar arasında paylaşılır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-272">That means that the data stored in the data cache by the ObjectDataSource is likewise shared across all users who visit the page.</span></span> <span data-ttu-id="ccf62-273">Bunu doğrulamak için `ObjectDataSource.aspx` sayfasını bir tarayıcıda açın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-273">To verify this, open the `ObjectDataSource.aspx` page in a browser.</span></span> <span data-ttu-id="ccf62-274">Sayfa ilk kez ziyaret edildiğinde, başlatılan olayı seçme metni görüntülenir (önceki testlerin önbelleğine eklenen verilerin şu anda çıkarıldığını varsayarak).</span><span class="sxs-lookup"><span data-stu-id="ccf62-274">When first visiting the page, the Selecting event fired text will appear (assuming that the data added to the cache by previous tests has, by now, been evicted).</span></span> <span data-ttu-id="ccf62-275">İkinci bir tarayıcı örneği açın ve ilk tarayıcı örneğinden ikincisine URL 'YI kopyalayın ve yapıştırın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-275">Open a second browser instance and copy and paste the URL from the first browser instance to the second.</span></span> <span data-ttu-id="ccf62-276">İkinci tarayıcı örneğinde, ilk olarak aynı önbelleğe alınmış verileri kullandığından, olay harekete geçen metin seçme metni gösterilmez.</span><span class="sxs-lookup"><span data-stu-id="ccf62-276">In the second browser instance, the Selecting event fired text is not shown because it s using the same cached data as the first.</span></span>

<span data-ttu-id="ccf62-277">Alınan veriler önbelleğe eklenirken, ObjectDataSource, `CacheDuration` ve `CacheExpirationPolicy` özellik değerlerini içeren bir önbellek anahtarı değeri kullanır; [`TypeName` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.typename.aspx) Ile belirtilen ObjectDataSource tarafından kullanılan temeldeki iş nesnesinin türü (`ProductsBLL`, bu örnekte); `SelectMethod` özelliğinin değeri ve `SelectParameters` koleksiyonundaki parametrelerin adı ve değerleri; ve `StartRowIndex` ve `MaximumRows` özelliklerinin, [Özel sayfalama](../paging-and-sorting/paging-and-sorting-report-data-cs.md) uygularken kullanılan değerleri.</span><span class="sxs-lookup"><span data-stu-id="ccf62-277">When inserting its retrieved data into the cache, the ObjectDataSource uses a cache key value that includes: the `CacheDuration` and `CacheExpirationPolicy` property values; the type of the underlying business object being used by the ObjectDataSource, which is specified via the [`TypeName` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.typename.aspx) (`ProductsBLL`, in this example); the value of the `SelectMethod` property and the name and values of the parameters in the `SelectParameters` collection; and the values of its `StartRowIndex` and `MaximumRows` properties, which are used when implementing [custom paging.](../paging-and-sorting/paging-and-sorting-report-data-cs.md)</span></span>

<span data-ttu-id="ccf62-278">Bu özelliklerin bir birleşimi olarak önbellek anahtarı değerinin oluşturulması, bu değerler değiştikçe benzersiz bir önbellek girişi sağlar.</span><span class="sxs-lookup"><span data-stu-id="ccf62-278">Crafting the cache key value as a combination of these properties ensures a unique cache entry as these values change.</span></span> <span data-ttu-id="ccf62-279">Örneğin, geçmiş öğreticilerde, belirtilen bir kategori için tüm ürünleri döndüren `ProductsBLL` sınıf s `GetProductsByCategoryID(categoryID)`kullanmaya baktık.</span><span class="sxs-lookup"><span data-stu-id="ccf62-279">For example, in past tutorials we ve looked at using the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)`, which returns all products for a specified category.</span></span> <span data-ttu-id="ccf62-280">Tek bir kullanıcı sayfaya gelebilir ve 1 `CategoryID` olan meşruleri görüntüleyebilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-280">One user might come to the page and view beverages, which has a `CategoryID` of 1.</span></span> <span data-ttu-id="ccf62-281">ObjectDataSource, `SelectParameters` değerleri dikkate almadan sonuçlarını önbelleğe alıyorsa, içgörüler ürünleri önbellekte olduğu sürece, başka bir kullanıcı da sayfaya geldiğinde, büyük/küçük ürünler yerine önbelleğe alınmış içecek ürünlerini görürler.</span><span class="sxs-lookup"><span data-stu-id="ccf62-281">If the ObjectDataSource cached its results without regard for the `SelectParameters` values, when another user came to the page to view condiments while the beverages products were in the cache, they d see the cached beverage products rather than condiments.</span></span> <span data-ttu-id="ccf62-282">`SelectParameters`değerleri de dahil olmak üzere bu özelliklere göre önbellek anahtarını değiştirerek, ObjectDataSource, içecek ve koşullu kaynaklar için ayrı bir önbellek girişi tutar.</span><span class="sxs-lookup"><span data-stu-id="ccf62-282">By varying the cache key by these properties, which include the values of the `SelectParameters`, the ObjectDataSource maintains a separate cache entry for beverages and condiments.</span></span>

## <a name="stale-data-concerns"></a><span data-ttu-id="ccf62-283">Eski veri konuları</span><span class="sxs-lookup"><span data-stu-id="ccf62-283">Stale Data Concerns</span></span>

<span data-ttu-id="ccf62-284">`Insert`, `Update`veya `Delete` yöntemlerinin herhangi biri çağrıldığında, ObjectDataSource öğeleri önbellekten otomatik olarak çıkarır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-284">The ObjectDataSource automatically evicts its items from the cache when any one of its `Insert`, `Update`, or `Delete` methods is invoked.</span></span> <span data-ttu-id="ccf62-285">Bu, veriler sayfa aracılığıyla değiştirildiğinde önbellek girişlerini temizleyerek eski verilere karşı korumaya yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="ccf62-285">This helps protect against stale data by clearing out the cache entries when the data is modified through the page.</span></span> <span data-ttu-id="ccf62-286">Ancak, önbelleğe alma kullanan bir ObjectDataSource, eski verileri görüntülemeye devam etmek için mümkündür.</span><span class="sxs-lookup"><span data-stu-id="ccf62-286">However, it is possible for an ObjectDataSource using caching to still display stale data.</span></span> <span data-ttu-id="ccf62-287">En basit durumda, bunun nedeni doğrudan veritabanı içinde değişen veri olabilir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-287">In the simplest case, it can be due to the data changing directly within the database.</span></span> <span data-ttu-id="ccf62-288">Belki de bir veritabanı Yöneticisi veritabanındaki bazı kayıtları değiştiren bir betiği çalıştırdı.</span><span class="sxs-lookup"><span data-stu-id="ccf62-288">Perhaps a database administrator just ran a script that modifies some of the records in the database.</span></span>

<span data-ttu-id="ccf62-289">Bu senaryo, daha hafif bir şekilde katlamayı de kaldırır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-289">This scenario could also unfold in a more subtle way.</span></span> <span data-ttu-id="ccf62-290">ObjectDataSource, veri değiştirme yöntemlerinden biri çağrıldığında öğeleri önbellekten çıkarlarken, kaldırılan önbelleğe alınmış öğeler, özellik değerlerinin (`CacheDuration`, `TypeName`, `SelectMethod`vb.) belirli bir birleşimine yöneliktir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-290">While the ObjectDataSource evicts its items from the cache when one of its data modification methods is called, the cached items removed are for the ObjectDataSource s particular combination of property values (`CacheDuration`, `TypeName`, `SelectMethod`, and so on).</span></span> <span data-ttu-id="ccf62-291">Farklı `SelectMethods` veya `SelectParameters`kullanan, ancak yine de aynı verileri güncelleştirebilecek iki ObjectDataSources varsa, bir ObjectDataSource bir satırı güncelleştirebilir ve kendi önbellek girişlerini geçersiz kılabilir, ancak ikinci ObjectDataSource için karşılık gelen satır, hala önbelleğe alınmış olarak sunulur.</span><span class="sxs-lookup"><span data-stu-id="ccf62-291">If you have two ObjectDataSources that use different `SelectMethods` or `SelectParameters`, but still can update the same data, then one ObjectDataSource may update a row and invalidate its own cache entries, but the corresponding row for the second ObjectDataSource will still be served from the cached.</span></span> <span data-ttu-id="ccf62-292">Bu işlevi gösteren sayfalar oluşturmanızı teşvik ediyorum.</span><span class="sxs-lookup"><span data-stu-id="ccf62-292">I encourage you to create pages to exhibit this functionality.</span></span> <span data-ttu-id="ccf62-293">Verilerini önbelleğe alma kullanan bir ObjectDataSource 'tan alıp `ProductsBLL` sınıf s `GetProducts()` yönteminden veri almak üzere yapılandırılmış bir düzenlenebilir GridView görüntüleyen bir sayfa oluşturun.</span><span class="sxs-lookup"><span data-stu-id="ccf62-293">Create a page that displays an editable GridView that pulls its data from an ObjectDataSource that uses caching and is configured to get data from the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="ccf62-294">Bu sayfaya (veya başka bir tane) başka bir düzenlenebilir GridView ve ObjectDataSource ekleyin, ancak bu ikinci ObjectDataSource için `GetProductsByCategoryID(categoryID)` yöntemini kullanın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-294">Add another editable GridView and ObjectDataSource to this page (or another one), but for this second ObjectDataSource have it use the `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="ccf62-295">İki ObjectDataSources `SelectMethod` özellikleri farklı olduğundan, bunların her biri kendi önbelleğe alınmış değerlerine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-295">Since the two ObjectDataSources `SelectMethod` properties differ, they ll each have their own cached values.</span></span> <span data-ttu-id="ccf62-296">Bir ürünü tek bir kılavuzda düzenlerseniz, daha sonra verileri diğer kılavuza geri bağladığınızda (sayfalama, sıralama vb.), yine de eski, önbelleğe alınmış verilere sahip olur ve diğer kılavuzdan yapılan değişikliği yansıtmaz.</span><span class="sxs-lookup"><span data-stu-id="ccf62-296">If you edit a product in one grid, the next time you bind the data back to the other grid (by paging, sorting, and so forth), it will still serve the old, cached data and not reflect the change that was made from the other grid.</span></span>

<span data-ttu-id="ccf62-297">Kısacası, yalnızca eski verilerin potansiyelini sağlamak istiyorsanız zaman tabanlı expiries kullanın ve verilerin yeniliği önemli olan senaryolar için daha kısa expiries kullanın.</span><span class="sxs-lookup"><span data-stu-id="ccf62-297">In short, only use time-based expiries if you are willing to have the potential of stale data, and use shorter expiries for scenarios where the freshness of data is important.</span></span> <span data-ttu-id="ccf62-298">Eski veriler kabul edilebilir değilse, ya da SQL önbellek bağımlılıklarını kullanın veya (yeniden önbelleğe aldığınız veritabanı verileri olduğu varsayılarak).</span><span class="sxs-lookup"><span data-stu-id="ccf62-298">If stale data is not acceptable, either forgo caching or use SQL cache dependencies (assuming it is database data you re caching).</span></span> <span data-ttu-id="ccf62-299">Gelecek bir öğreticide SQL önbellek bağımlılıklarını araştıracağız.</span><span class="sxs-lookup"><span data-stu-id="ccf62-299">We'll explore SQL cache dependencies in a future tutorial.</span></span>

## <a name="summary"></a><span data-ttu-id="ccf62-300">Özet</span><span class="sxs-lookup"><span data-stu-id="ccf62-300">Summary</span></span>

<span data-ttu-id="ccf62-301">Bu öğreticide, ObjectDataSource 'ın yerleşik önbelleğe alma yeteneklerini inceliyoruz.</span><span class="sxs-lookup"><span data-stu-id="ccf62-301">In this tutorial we examined the ObjectDataSource s built-in caching capabilities.</span></span> <span data-ttu-id="ccf62-302">Yalnızca birkaç özelliği ayarlayarak, ObjectDataSource 'a belirtilen `SelectMethod` döndürülen sonuçları ASP.NET veri önbelleğine önbelleğe almak için talimat vereceğiz.</span><span class="sxs-lookup"><span data-stu-id="ccf62-302">By simply setting a few properties, we can instruct the ObjectDataSource to cache the results returned from the specified `SelectMethod` into the ASP.NET data cache.</span></span> <span data-ttu-id="ccf62-303">`CacheDuration` ve `CacheExpirationPolicy` özellikleri, öğenin önbelleğe alındığı süreyi ve mutlak veya kayan bir süre sonu olup olmadığını gösterir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-303">The `CacheDuration` and `CacheExpirationPolicy` properties indicate the duration the item is cached and whether it is an absolute or sliding expiration.</span></span> <span data-ttu-id="ccf62-304">`CacheKeyDependency` özelliği, tüm ObjectDataSource 'lar önbellek girdilerini varolan bir önbellek bağımlılığı ile ilişkilendirir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-304">The `CacheKeyDependency` property associates all of the ObjectDataSource s cache entries with an existing cache dependency.</span></span> <span data-ttu-id="ccf62-305">Bu, zaman tabanlı süre sonuna ulaşılmadan önce ObjectDataSource 'un girişlerini önbellekten çıkarmak için kullanılabilir ve genellikle SQL önbellek bağımlılıklarıyla birlikte kullanılır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-305">This can be used to evict the ObjectDataSource s entries from the cache before the time-based expiration is reached, and is typically used with SQL cache dependencies.</span></span>

<span data-ttu-id="ccf62-306">ObjectDataSource, değerlerini veri önbelleğine yalnızca önbelleğe aldığından, ObjectDataSource 'ın yerleşik işlevselliğini programlı bir şekilde çoğaltabiliriz.</span><span class="sxs-lookup"><span data-stu-id="ccf62-306">Since the ObjectDataSource simply caches its values to the data cache, we could replicate the ObjectDataSource s built-in functionality programmatically.</span></span> <span data-ttu-id="ccf62-307">Bu, ObjectDataSource bu işlevselliği kutudan çıkar, ancak bir mimarinin ayrı bir katmanında önbelleğe alma özelliği uygulayabiliriz.</span><span class="sxs-lookup"><span data-stu-id="ccf62-307">It doesn t make sense to do this at the Presentation Layer, since the ObjectDataSource offers this functionality out of the box, but we can implement caching capabilities in a separate layer of the architecture.</span></span> <span data-ttu-id="ccf62-308">Bunu yapmak için, ObjectDataSource tarafından kullanılan mantığı tekrarlamanız gerekecektir.</span><span class="sxs-lookup"><span data-stu-id="ccf62-308">To do so, we'll need to repeat the same logic used by the ObjectDataSource.</span></span> <span data-ttu-id="ccf62-309">Sonraki öğreticimizde mimarideki veri önbelleğiyle programlı olarak nasıl çalışacağımız anlatılmaktadır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-309">We'll explore how to programmatically work with the data cache from within the architecture in our next tutorial.</span></span>

<span data-ttu-id="ccf62-310">Programlamanın kutlu olsun!</span><span class="sxs-lookup"><span data-stu-id="ccf62-310">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="ccf62-311">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="ccf62-311">Further Reading</span></span>

<span data-ttu-id="ccf62-312">Bu öğreticide ele alınan konular hakkında daha fazla bilgi için aşağıdaki kaynaklara bakın:</span><span class="sxs-lookup"><span data-stu-id="ccf62-312">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="ccf62-313">ASP.NET önbelleğe alma: teknikler ve En Iyi uygulamalar</span><span class="sxs-lookup"><span data-stu-id="ccf62-313">ASP.NET Caching: Techniques and Best Practices</span></span>](https://msdn.microsoft.com/library/aa478965.aspx)
- [<span data-ttu-id="ccf62-314">.NET Framework uygulamalar için önbelleğe alma Mimarisi Kılavuzu</span><span class="sxs-lookup"><span data-stu-id="ccf62-314">Caching Architecture Guide for .NET Framework Applications</span></span>](https://msdn.microsoft.com/library/ee817645.aspx)
- [<span data-ttu-id="ccf62-315">ASP.NET 2,0 ' de çıktı önbelleği</span><span class="sxs-lookup"><span data-stu-id="ccf62-315">Output Caching in ASP.NET 2.0</span></span>](http://aspnet.4guysfromrolla.com/articles/121306-1.aspx)

## <a name="about-the-author"></a><span data-ttu-id="ccf62-316">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="ccf62-316">About the Author</span></span>

<span data-ttu-id="ccf62-317">4GuysFromRolla.com 'in, [Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), yedi ASP/ASP. net books ve [](http://www.4guysfromrolla.com)'in yazarı, 1998 sürümünden bu yana Microsoft Web teknolojileriyle çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="ccf62-317">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="ccf62-318">Scott bağımsız danışman, Trainer ve yazıcı olarak çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="ccf62-318">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="ccf62-319">En son kitabı, [*24 saat içinde ASP.NET 2,0 kendi kendinize eğitim*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)ister.</span><span class="sxs-lookup"><span data-stu-id="ccf62-319">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="ccf62-320">mitchell@4GuysFromRolla.comadresinden erişilebilir [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="ccf62-320">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="ccf62-321">ya da blog aracılığıyla [http://ScottOnWriting.NET](http://ScottOnWriting.NET)bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ccf62-321">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="ccf62-322">Özel olarak teşekkürler</span><span class="sxs-lookup"><span data-stu-id="ccf62-322">Special Thanks To</span></span>

<span data-ttu-id="ccf62-323">Bu öğretici serisi birçok yararlı gözden geçirenler tarafından incelendi.</span><span class="sxs-lookup"><span data-stu-id="ccf62-323">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="ccf62-324">Bu öğretici için müşteri adayı gözden geçireni bir Murphy idi.</span><span class="sxs-lookup"><span data-stu-id="ccf62-324">Lead reviewer for this tutorial was Teresa Murphy.</span></span> <span data-ttu-id="ccf62-325">Yaklaşan MSDN makalelerimi gözden geçiriyor musunuz?</span><span class="sxs-lookup"><span data-stu-id="ccf62-325">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="ccf62-326">Öyleyse, benimitchell@4GuysFromRolla.combir satır bırakın [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="ccf62-326">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="ccf62-327">Next</span><span class="sxs-lookup"><span data-stu-id="ccf62-327">Next</span></span>](caching-data-in-the-architecture-cs.md)
