---
uid: web-forms/overview/data-access/caching-data/caching-data-with-the-objectdatasource-cs
title: (C#) ObjectDataSource ile verileri önbelleğe alma | Microsoft Docs
author: rick-anderson
description: Önbelleğe alma, yavaş ve hızlı bir Web uygulaması arasındaki fark anlamına gelebilir. Bu öğreticide, ASP.NET önbelleğe alma ayrıntılı göz atalım dört davranıştır...
ms.author: riande
ms.date: 05/30/2007
ms.assetid: bd87413c-8160-4520-a8a2-43b555c4183a
msc.legacyurl: /web-forms/overview/data-access/caching-data/caching-data-with-the-objectdatasource-cs
msc.type: authoredcontent
ms.openlocfilehash: 770b1ae92db8384a0c0b7f038b1ea994ae4c1b4c
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57077994"
---
<a name="caching-data-with-the-objectdatasource-c"></a><span data-ttu-id="e00cb-104">ObjectDataSource ile Verileri Önbelleğe Alma (C#)</span><span class="sxs-lookup"><span data-stu-id="e00cb-104">Caching Data with the ObjectDataSource (C#)</span></span>
====================
<span data-ttu-id="e00cb-105">tarafından [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="e00cb-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="e00cb-106">[Örnek uygulamayı indirin](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_58_CS.exe) veya [PDF olarak indirin](caching-data-with-the-objectdatasource-cs/_static/datatutorial58cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="e00cb-106">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_58_CS.exe) or [Download PDF](caching-data-with-the-objectdatasource-cs/_static/datatutorial58cs1.pdf)</span></span>

> <span data-ttu-id="e00cb-107">Önbelleğe alma, yavaş ve hızlı bir Web uygulaması arasındaki fark anlamına gelebilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-107">Caching can mean the difference between a slow and a fast Web application.</span></span> <span data-ttu-id="e00cb-108">Bu öğretici, ASP.NET önbelleğe alma ayrıntılı göz atalım dört ilk bölümüdür.</span><span class="sxs-lookup"><span data-stu-id="e00cb-108">This tutorial is the first of four that take a detailed look at caching in ASP.NET.</span></span> <span data-ttu-id="e00cb-109">Önbelleğe alma temel kavramları ve uygulama için sunu katmanı aracılığıyla ObjectDataSource Denetimi önbelleğe alma öğrenin.</span><span class="sxs-lookup"><span data-stu-id="e00cb-109">Learn the key concepts of caching and how to apply caching to the Presentation Layer through the ObjectDataSource control.</span></span>


## <a name="introduction"></a><span data-ttu-id="e00cb-110">Giriş</span><span class="sxs-lookup"><span data-stu-id="e00cb-110">Introduction</span></span>

<span data-ttu-id="e00cb-111">Bilgisayar bilimleri *önbelleğe alma* , veri ya da elde etmek pahalı bilgisi alma ve erişimi daha hızlı bir şekilde bir konumda bir kopyasını depolayarak işlemidir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-111">In computer science, *caching* is the process of taking data or information that is expensive to obtain and storing a copy of it in a location that is quicker to access.</span></span> <span data-ttu-id="e00cb-112">Veri odaklı uygulamalar için büyük ve karmaşık sorgular genellikle uygulama s yürütme süresi çoğunu kullanır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-112">For data-driven applications, large and complex queries commonly consume the majority of the application s execution time.</span></span> <span data-ttu-id="e00cb-113">Bu tür bir uygulama s performansı, daha sonra genellikle uygulama s bellekte pahalı veritabanı sorguların sonuçlarını depolayarak geliştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-113">Such an application s performance, then, can often be improved by storing the results of expensive database queries in the application s memory.</span></span>

<span data-ttu-id="e00cb-114">ASP.NET 2.0 seçenekleriyle önbelleğe almayı çeşitli sunar.</span><span class="sxs-lookup"><span data-stu-id="e00cb-114">ASP.NET 2.0 offers a variety of caching options.</span></span> <span data-ttu-id="e00cb-115">Bir web sayfasının tamamını veya kullanıcı denetimi işlenen s biçimlendirme aracılığıyla önbelleğe alınabilir *çıktı önbelleği*.</span><span class="sxs-lookup"><span data-stu-id="e00cb-115">An entire web page or User Control s rendered markup can be cached through *output caching*.</span></span> <span data-ttu-id="e00cb-116">ObjectDataSource ve SqlDataSource denetimleri denetimi düzeyinde önbelleğe alınması için önbelleğe alma özellikleri de, böylece veri izin vererek sağlar.</span><span class="sxs-lookup"><span data-stu-id="e00cb-116">The ObjectDataSource and SqlDataSource controls provide caching capabilities as well, thereby allowing data to be cached at the control level.</span></span> <span data-ttu-id="e00cb-117">Ve ASP.NET s *veri önbelleğini* sayfa geliştiricilerin önbellek nesnelere program aracılığıyla sağlayan zengin bir önbelleğe alma API sağlar.</span><span class="sxs-lookup"><span data-stu-id="e00cb-117">And ASP.NET s *data cache* provides a rich caching API that enables page developers to programmatically cache objects.</span></span> <span data-ttu-id="e00cb-118">Bu öğretici ve ObjectDataSource s kullanarak inceleyeceğiz sonraki üç veri önbelleğini yanı sıra özellikleri önbelleğe alma.</span><span class="sxs-lookup"><span data-stu-id="e00cb-118">In this tutorial and the next three we'll examine using the ObjectDataSource s caching features as well as the data cache.</span></span> <span data-ttu-id="e00cb-119">Biz de birçok farklı uygulama başlangıcında verileri önbelleğe alınacağını ve önbelleğe alınan verilerin SQL önbellek bağımlılıklarını genelindeki güncel kalması nasıl üzerinde durulacaktır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-119">We'll also explore how to cache application-wide data at startup and how to keep cached data fresh through the use of SQL cache dependencies.</span></span> <span data-ttu-id="e00cb-120">Çıktı önbelleği bu öğreticileri keşfedin değil.</span><span class="sxs-lookup"><span data-stu-id="e00cb-120">These tutorials do not explore output caching.</span></span> <span data-ttu-id="e00cb-121">Çıkış önbelleğe alma, ayrıntılı bilgi için bkz. [çıktı önbelleği, ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/121306-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="e00cb-121">For a detailed look at output caching, see [Output Caching in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/121306-1.aspx).</span></span>

<span data-ttu-id="e00cb-122">Önbelleğe alma herhangi bir yerde mimarisi veri erişim katmanından yukarı sunu katmanı uygulanabilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-122">Caching can be applied at any place in the architecture, from the Data Access Layer up through the Presentation Layer.</span></span> <span data-ttu-id="e00cb-123">Bu öğreticide, uygulamayı sunu katmanı aracılığıyla ObjectDataSource denetimi için önbelleğe alma inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="e00cb-123">In this tutorial we'll look at applying caching to the Presentation Layer through the ObjectDataSource control.</span></span> <span data-ttu-id="e00cb-124">Sonraki öğreticide inceleyeceğiz iş mantığı katmanı verileri önbelleğe alma.</span><span class="sxs-lookup"><span data-stu-id="e00cb-124">In the next tutorial we'll examine caching data at the Business Logic Layer.</span></span>

## <a name="key-caching-concepts"></a><span data-ttu-id="e00cb-125">Anahtar kavramlar önbelleğe alma</span><span class="sxs-lookup"><span data-stu-id="e00cb-125">Key Caching Concepts</span></span>

<span data-ttu-id="e00cb-126">Önbelleğe alma uygulama s büyük ölçüde geliştirebilir genel performans ve ölçeklenebilirlik oluşturulması maliyetli olan verileri alma ve daha verimli bir şekilde erişilebilir bir konumda bir kopyasını depolayarak.</span><span class="sxs-lookup"><span data-stu-id="e00cb-126">Caching can greatly improve an application s overall performance and scalability by taking data that is expensive to generate and storing a copy of it in a location that can be more efficiently accessed.</span></span> <span data-ttu-id="e00cb-127">Önbellek gerçek, temel alınan verilerin yalnızca bir kopyasını tuttuğu eski, olabilir veya *eski*, temel alınan verileri değişirse.</span><span class="sxs-lookup"><span data-stu-id="e00cb-127">Since the cache holds just a copy of the actual, underlying data, it can become outdated, or *stale*, if the underlying data changes.</span></span> <span data-ttu-id="e00cb-128">Bu sorunla başa çıkmak için sayfasında geliştirici tarafından önbellek öğesinin olacak ölçüt belirtebilirsiniz *çıkarılacak* önbellekten kullanarak:</span><span class="sxs-lookup"><span data-stu-id="e00cb-128">To combat this, a page developer can indicate criteria by which the cache item will be *evicted* from the cache, using either:</span></span>

- <span data-ttu-id="e00cb-129">**Zamana bağlı ölçütleri** bir öğe için mutlak ya da süresi kayan önbelleğe eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-129">**Time-based criteria** an item may be added to the cache for an absolute or sliding duration.</span></span> <span data-ttu-id="e00cb-130">Örneğin, bir sayfa geliştirici, örneğin 60 saniye süre gösterebilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-130">For example, a page developer may indicate a duration of, say, 60 seconds.</span></span> <span data-ttu-id="e00cb-131">Mutlak bir süre ile 60 saniye önbelleğine ne sıklıkla erişilen bağımsız olarak eklendikten sonra önbelleğe alınan öğeyi çıkarılır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-131">With an absolute duration, the cached item is evicted 60 seconds after it was added to cache, regardless of how frequently it was accessed.</span></span> <span data-ttu-id="e00cb-132">Bir kayan süresi ile 60 saniye sonra son erişim önbelleğe alınan öğeyi çıkarılır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-132">With a sliding duration, the cached item is evicted 60 seconds after the last access.</span></span>
- <span data-ttu-id="e00cb-133">**Bağımlılık alan ölçütleri** bağımlılık önbelleğe eklenen bir öğe ile ilişkili olabilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-133">**Dependency-based criteria** a dependency can be associated with an item when added to the cache.</span></span> <span data-ttu-id="e00cb-134">S öğesi bağımlılık değiştiğinde, önbellekten çıkarılır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-134">When the item s dependency changes it is evicted from the cache.</span></span> <span data-ttu-id="e00cb-135">Bağımlılık, bir dosya, başka bir önbellek öğesi veya ikisinin bir birleşimi olabilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-135">The dependency may be a file, another cache item, or a combination of the two.</span></span> <span data-ttu-id="e00cb-136">ASP.NET 2.0 önbelleğe bir öğe ekleyin ve temel alınan veritabanı veriler değiştiğinde çıkarılmasını sağlamak geliştiricilerin SQL önbellek bağımlılıklarını de sağlar.</span><span class="sxs-lookup"><span data-stu-id="e00cb-136">ASP.NET 2.0 also allows SQL cache dependencies, which enable developers to add an item to the cache and have it evicted when the underlying database data changes.</span></span> <span data-ttu-id="e00cb-137">SQL önbellek bağımlılıklarını yaklaşan içinde inceleyeceğiz [SQL önbellek bağımlılıklarını kullanma](using-sql-cache-dependencies-cs.md) öğretici.</span><span class="sxs-lookup"><span data-stu-id="e00cb-137">We will examine SQL cache dependencies in the upcoming [Using SQL Cache Dependencies](using-sql-cache-dependencies-cs.md) tutorial.</span></span>

<span data-ttu-id="e00cb-138">Çıkarma ölçütlere bağımsız olarak, bir öğeyi önbellekte olabilir *işlemi* önce zaman veya bağımlılık tabanlı ölçütleri karşıladığında.</span><span class="sxs-lookup"><span data-stu-id="e00cb-138">Regardless of the eviction criteria specified, an item in the cache may be *scavenged* before the time-based or dependency-based criteria has been met.</span></span> <span data-ttu-id="e00cb-139">Önbellek kapasitesi ulaştıysa, yeni bir tane eklemeden önce var olan öğeleri kaldırılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-139">If the cache has reached its capacity, existing items must be removed before new ones can be added.</span></span> <span data-ttu-id="e00cb-140">Sonuç olarak, program aracılığıyla önbelleğe alınmış veri, s, her zaman, varsayıyorsunuz önemli çalışırken önbelleğe alınan verilerin mevcut olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-140">Consequently, when programmatically working with cached data it s vital that you always assume that the cached data may not be present.</span></span> <span data-ttu-id="e00cb-141">Verileri önbellekten program aracılığıyla sonraki müşterilerimize öğreticide erişirken kullanılacak düzeni inceleyeceğiz *mimaride verileri önbelleğe alma*.</span><span class="sxs-lookup"><span data-stu-id="e00cb-141">We'll look at the pattern to use when accessing data from the cache programmatically in our next tutorial, *Caching Data in the Architecture*.</span></span>

<span data-ttu-id="e00cb-142">Önbelleğe alma, bir uygulamadan daha fazla performans sıkıştırırsanız için ekonomik bir yol sağlar.</span><span class="sxs-lookup"><span data-stu-id="e00cb-142">Caching provides an economical means for squeezing more performance from an application.</span></span> <span data-ttu-id="e00cb-143">Olarak [Steven Smith](http://aspadvice.com/blogs/ssmith/) makalede korumadaki [ASP.NET önbelleğe alma: Teknikleri ve en iyi](https://msdn.microsoft.com/library/aa478965.aspx):</span><span class="sxs-lookup"><span data-stu-id="e00cb-143">As [Steven Smith](http://aspadvice.com/blogs/ssmith/) articulates in his article [ASP.NET Caching: Techniques and Best Practices](https://msdn.microsoft.com/library/aa478965.aspx):</span></span>

<span data-ttu-id="e00cb-144">Önbelleğe alma, çok fazla zaman ve analiz gerek kalmadan yeterli performans iyi almak için en iyi yolu olabilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-144">Caching can be a good way to get good enough performance without requiring a lot of time and analysis.</span></span> <span data-ttu-id="e00cb-145">Bellek ucuz, önbelleğe alma çözümü ihtiyaç gün veya haftada bir kod veya veritabanı iyileştirmeye çalışıyor yerine 30 saniye için çıktı önbelleği tarafından performansı elde edebilirsiniz, bu nedenle yapın (30 - eski ikinci veri olarak sayılıyor olabilir) ve geçin.</span><span class="sxs-lookup"><span data-stu-id="e00cb-145">Memory is cheap, so if you can get the performance you need by caching the output for 30 seconds instead of spending a day or a week trying to optimize your code or database, do the caching solution (assuming 30-second old data is ok) and move on.</span></span> <span data-ttu-id="e00cb-146">Tabii ki uygulamalarınızı doğru tasarım denemelisiniz için sonuç olarak, kötü tasarım büyük olasılıkla sizin için yakalar.</span><span class="sxs-lookup"><span data-stu-id="e00cb-146">Eventually, poor design will probably catch up to you, so of course you should try to design your applications correctly.</span></span> <span data-ttu-id="e00cb-147">Ancak hemen bugün yeterli performans iyi almanız gerekirse, önbelleğe alma bir mükemmel [yaklaşım] olabilir zaman uygulamanız varsa bunu yapmak için zaman daha sonraki bir tarihte yeniden satın.</span><span class="sxs-lookup"><span data-stu-id="e00cb-147">But if you just need to get good enough performance today, caching can be an excellent [approach], buying you time to refactor your application at a later date when you have the time to do so.</span></span>

<span data-ttu-id="e00cb-148">Önemli performans geliştirmeleri önbelleğe alma sağlarken, ancak gibi tüm durumlarda geçerli değildir uygulamalarla gerçek zamanlı, sık sık güncelleştirme veri kullanan ya da kısa süreli eski veri olduğu kabul edilemez.</span><span class="sxs-lookup"><span data-stu-id="e00cb-148">While caching can provide appreciable performance enhancements, it is not applicable in all situations, such as with applications that use real-time, frequently-updating data, or where even shortly-lived stale data is unacceptable.</span></span> <span data-ttu-id="e00cb-149">Ancak, önbelleğe alma uygulamalarının çoğu için kullanılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-149">But for the majority of applications, caching should be used.</span></span> <span data-ttu-id="e00cb-150">ASP.NET 2.0 ile önbelleğe alma hakkında daha fazla arka plan için başvurmak [performans için önbelleğe alma](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/default.aspx) bölümünü [ASP.NET 2.0 hızlı başlangıç öğreticileri](https://quickstarts.asp.net/QuickStartv20/aspnet/).</span><span class="sxs-lookup"><span data-stu-id="e00cb-150">For more background on caching in ASP.NET 2.0, refer to the [Caching for Performance](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/default.aspx) section of the [ASP.NET 2.0 QuickStart Tutorials](https://quickstarts.asp.net/QuickStartv20/aspnet/).</span></span>

## <a name="step-1-creating-the-caching-web-pages"></a><span data-ttu-id="e00cb-151">1. Adım: Önbelleğe alma Web sayfaları oluşturma</span><span class="sxs-lookup"><span data-stu-id="e00cb-151">Step 1: Creating the Caching Web Pages</span></span>

<span data-ttu-id="e00cb-152">Size sunduğumuz araştırma ObjectDataSource s önbelleğe alma özellikleri başlamadan önce ilk ASP.NET sayfaları ve bu öğreticinin sonraki üç yapmamız gereken bizim Web sitesi projesi oluşturmak için bir dakikanızı ayırarak s olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-152">Before we start our exploration of the ObjectDataSource s caching features, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next three.</span></span> <span data-ttu-id="e00cb-153">Başlangıç adlı yeni bir klasör ekleyerek `Caching`.</span><span class="sxs-lookup"><span data-stu-id="e00cb-153">Start by adding a new folder named `Caching`.</span></span> <span data-ttu-id="e00cb-154">Ardından, o klasördeki her bir sayfayla ilişkilendirilecek emin olmak için aşağıdaki ASP.NET sayfaları ekleyin `Site.master` ana sayfa:</span><span class="sxs-lookup"><span data-stu-id="e00cb-154">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `ObjectDataSource.aspx`
- `FromTheArchitecture.aspx`
- `AtApplicationStartup.aspx`
- `SqlCacheDependencies.aspx`


![ASP.NET sayfaları için önbelleğe alma ile ilgili öğreticiler Ekle](caching-data-with-the-objectdatasource-cs/_static/image1.png)

<span data-ttu-id="e00cb-156">**Şekil 1**: ASP.NET sayfaları için önbelleğe alma ile ilgili öğreticiler Ekle</span><span class="sxs-lookup"><span data-stu-id="e00cb-156">**Figure 1**: Add the ASP.NET Pages for the Caching-Related Tutorials</span></span>


<span data-ttu-id="e00cb-157">Diğer klasörler gibi `Default.aspx` içinde `Caching` klasörü kendi bölümünde öğreticileri listeler.</span><span class="sxs-lookup"><span data-stu-id="e00cb-157">Like in the other folders, `Default.aspx` in the `Caching` folder will list the tutorials in its section.</span></span> <span data-ttu-id="e00cb-158">Bu geri çağırma `SectionLevelTutorialListing.ascx` kullanıcı denetimi bu işlevselliği sağlar.</span><span class="sxs-lookup"><span data-stu-id="e00cb-158">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="e00cb-159">Bu nedenle, bu kullanıcı denetimine ekleme `Default.aspx` sayfaya s Tasarım görünümü Çözüm Gezgini'nde sürükleyerek.</span><span class="sxs-lookup"><span data-stu-id="e00cb-159">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>


<span data-ttu-id="e00cb-160">[![Şekil 2: İçin Default.aspx SectionLevelTutorialListing.ascx kullanıcı denetimi Ekle](caching-data-with-the-objectdatasource-cs/_static/image3.png)](caching-data-with-the-objectdatasource-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="e00cb-160">[![Figure 2: Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](caching-data-with-the-objectdatasource-cs/_static/image3.png)](caching-data-with-the-objectdatasource-cs/_static/image2.png)</span></span>

<span data-ttu-id="e00cb-161">**Şekil 2**: Şekil 2: Ekleme `SectionLevelTutorialListing.ascx` kullanıcı denetimine `Default.aspx` ([tam boyutlu görüntüyü görmek için tıklatın](caching-data-with-the-objectdatasource-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="e00cb-161">**Figure 2**: Figure 2: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image4.png))</span></span>


<span data-ttu-id="e00cb-162">Son olarak, girişleri olarak bu sayfalar ekleme `Web.sitemap` dosya.</span><span class="sxs-lookup"><span data-stu-id="e00cb-162">Lastly, add these pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="e00cb-163">Özellikle, ikili verilerle çalışma aşağıdaki işaretlemeyi ekleyin `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="e00cb-163">Specifically, add the following markup after the Working with Binary Data `<siteMapNode>`:</span></span>


[!code-xml[Main](caching-data-with-the-objectdatasource-cs/samples/sample1.xml)]

<span data-ttu-id="e00cb-164">Güncelleştirdikten sonra `Web.sitemap`, bir tarayıcı aracılığıyla öğreticiler Web sitesini görüntülemek için bir dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="e00cb-164">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="e00cb-165">Sol taraftaki menüden, önbelleğe alma öğreticileri için artık öğelerini içerir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-165">The menu on the left now includes items for the caching tutorials.</span></span>


![Site Haritası girişleri için önbelleğe alma öğreticiler artık içerir.](caching-data-with-the-objectdatasource-cs/_static/image5.png)

<span data-ttu-id="e00cb-167">**Şekil 3**: Site Haritası girişleri için önbelleğe alma öğreticiler artık içerir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-167">**Figure 3**: The Site Map Now Includes Entries for the Caching Tutorials</span></span>


## <a name="step-2-displaying-a-list-of-products-in-a-web-page"></a><span data-ttu-id="e00cb-168">2. Adım: Bir Web sayfasında ürünlerin listesini görüntüleme</span><span class="sxs-lookup"><span data-stu-id="e00cb-168">Step 2: Displaying a List of Products in a Web Page</span></span>

<span data-ttu-id="e00cb-169">Bu öğretici, ObjectDataSource Denetimi s yerleşik önbelleğe alma özelliklerinin nasıl kullanılacağını açıklar.</span><span class="sxs-lookup"><span data-stu-id="e00cb-169">This tutorial explores how to use the ObjectDataSource control s built-in caching features.</span></span> <span data-ttu-id="e00cb-170">Ancak, bu özellikleri bakacağız önce ilk çalışmak için bir sayfa gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="e00cb-170">Before we can look at these features, though, we first need a page to work from.</span></span> <span data-ttu-id="e00cb-171">Let s bir ObjectDataSource tarafından alınan ürün bilgilerini listelemek GridView kullanan bir web sayfası oluşturma `ProductsBLL` sınıfı.</span><span class="sxs-lookup"><span data-stu-id="e00cb-171">Let s create a web page that uses a GridView to list product information retrieved by an ObjectDataSource from the `ProductsBLL` class.</span></span>

<span data-ttu-id="e00cb-172">Başlangıç açarak `ObjectDataSource.aspx` sayfasını `Caching` klasör.</span><span class="sxs-lookup"><span data-stu-id="e00cb-172">Start by opening the `ObjectDataSource.aspx` page in the `Caching` folder.</span></span> <span data-ttu-id="e00cb-173">GridView tasarımcı araç kutusundan sürükleyin, ayarla, `ID` özelliğini `Products`ve adlı yeni bir ObjectDataSource denetimine bağlamak, akıllı etiketten seçin `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="e00cb-173">Drag a GridView from the Toolbox onto the Designer, set its `ID` property to `Products`, and, from its smart tag, choose to bind it to a new ObjectDataSource control named `ProductsDataSource`.</span></span> <span data-ttu-id="e00cb-174">ObjectDataSource ile çalışmak için yapılandırma `ProductsBLL` sınıfı.</span><span class="sxs-lookup"><span data-stu-id="e00cb-174">Configure the ObjectDataSource to work with the `ProductsBLL` class.</span></span>


<span data-ttu-id="e00cb-175">[![ObjectDataSource ProductsBLL sınıfını kullanmak için yapılandırma](caching-data-with-the-objectdatasource-cs/_static/image7.png)](caching-data-with-the-objectdatasource-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="e00cb-175">[![Configure the ObjectDataSource to Use the ProductsBLL Class](caching-data-with-the-objectdatasource-cs/_static/image7.png)](caching-data-with-the-objectdatasource-cs/_static/image6.png)</span></span>

<span data-ttu-id="e00cb-176">**Şekil 4**: ObjectDataSource kullanılacak yapılandırma `ProductsBLL` sınıfı ([tam boyutlu görüntüyü görmek için tıklatın](caching-data-with-the-objectdatasource-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="e00cb-176">**Figure 4**: Configure the ObjectDataSource to Use the `ProductsBLL` Class ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image8.png))</span></span>


<span data-ttu-id="e00cb-177">Bu sayfa için düzenlenebilir bir GridView oluşturun, böylece biz ObjectDataSource önbelleğe alınmış veri GridView s arabirimi aracılığıyla değiştirildiğinde ne inceleyebilirsiniz s olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-177">For this page, let s create an editable GridView so that we can examine what happens when data cached in the ObjectDataSource is modified through the GridView s interface.</span></span> <span data-ttu-id="e00cb-178">Aşağı açılan listesinde, varsayılan ayarına seçme sekmesinde bırakın `GetProducts()`, ancak seçili öğeyi güncelleştirme için sekmesinde değiştirmek `UpdateProduct` kabul eden aşırı yükleme `productName`, `unitPrice`, ve `productID` giriş parametre olarak.</span><span class="sxs-lookup"><span data-stu-id="e00cb-178">Leave the drop-down list in the SELECT tab set to its default, `GetProducts()`, but change the selected item in the UPDATE tab to the `UpdateProduct` overload that accepts `productName`, `unitPrice`, and `productID` as its input parameters.</span></span>


<span data-ttu-id="e00cb-179">[![Güncelleştirme sekmesini s açılır listede uygun UpdateProduct aşırı ayarlayın](caching-data-with-the-objectdatasource-cs/_static/image10.png)](caching-data-with-the-objectdatasource-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="e00cb-179">[![Set the UPDATE Tab s Drop-Down List to the Appropriate UpdateProduct Overload](caching-data-with-the-objectdatasource-cs/_static/image10.png)](caching-data-with-the-objectdatasource-cs/_static/image9.png)</span></span>

<span data-ttu-id="e00cb-180">**Şekil 5**: Güncelleştirme sekmesini s açılır listede ayarlamak için uygun `UpdateProduct` aşırı yükleme ([tam boyutlu görüntüyü görmek için tıklatın](caching-data-with-the-objectdatasource-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="e00cb-180">**Figure 5**: Set the UPDATE Tab s Drop-Down List to the Appropriate `UpdateProduct` Overload ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image11.png))</span></span>


<span data-ttu-id="e00cb-181">Son olarak, açılan listeler INSERT ve DELETE sekmeler (yok) olarak ayarlayın ve Son'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="e00cb-181">Finally, set the drop-down lists in the INSERT and DELETE tabs to (None) and click Finish.</span></span> <span data-ttu-id="e00cb-182">Veri Kaynağı Yapılandırma Sihirbazı tamamlandıktan sonra Visual Studio ObjectDataSource s ayarlar `OldValuesParameterFormatString` özelliğini `original_{0}`.</span><span class="sxs-lookup"><span data-stu-id="e00cb-182">Upon completing the Configure Data Source wizard, Visual Studio sets the ObjectDataSource s `OldValuesParameterFormatString` property to `original_{0}`.</span></span> <span data-ttu-id="e00cb-183">Bölümünde açıklandığı gibi [, bir genel bakış ekleme, güncelleştirme ve silme veri](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) öğretici, bu özellik olması gerekiyor bildirim temelli söz dizimi kaldırıldı ya da geri varsayılan değerine ayarlanmış `{0}`, bizim güncelleştirme iş akışı için sırayla hatasız devam edin.</span><span class="sxs-lookup"><span data-stu-id="e00cb-183">As discussed in the [An Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, this property needs to be removed from the declarative syntax or set back to its default value, `{0}`, in order for our update workflow to proceed without error.</span></span>

<span data-ttu-id="e00cb-184">Ayrıca, sihirbaz tamamlandığında Visual Studio bir alan için GridView ürün veri alanların her biri için ekler.</span><span class="sxs-lookup"><span data-stu-id="e00cb-184">Furthermore, at the completion of the wizard Visual Studio adds a field to the GridView for each of the product data fields.</span></span> <span data-ttu-id="e00cb-185">Kaldırma dışındaki tüm `ProductName`, `CategoryName`, ve `UnitPrice` BoundFields.</span><span class="sxs-lookup"><span data-stu-id="e00cb-185">Remove all but the `ProductName`, `CategoryName`, and `UnitPrice` BoundFields.</span></span> <span data-ttu-id="e00cb-186">Ardından, güncelleştirme `HeaderText` özelliklerini bu BoundFields ürün, kategori ve fiyat, sırasıyla.</span><span class="sxs-lookup"><span data-stu-id="e00cb-186">Next, update the `HeaderText` properties of each of these BoundFields to Product, Category, and Price, respectively.</span></span> <span data-ttu-id="e00cb-187">Bu yana `ProductName` alan gereklidir, bir TemplateField BoundField dönüştürmek ve eklemek için bir RequiredFieldValidator `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="e00cb-187">Since the `ProductName` field is required, convert the BoundField into a TemplateField and add a RequiredFieldValidator to the `EditItemTemplate`.</span></span> <span data-ttu-id="e00cb-188">Benzer şekilde, dönüştürme `UnitPrice` BoundField bir TemplateField oturum ve kullanıcı tarafından girilen değer geçerli bir para birimi değeri, s değerinden büyük veya sıfıra eşit olduğundan emin olmak için bir CompareValidator ekleyin.</span><span class="sxs-lookup"><span data-stu-id="e00cb-188">Similarly, convert the `UnitPrice` BoundField into a TemplateField and add a CompareValidator to ensure that the value entered by the user is a valid currency value that s greater than or equal to zero.</span></span> <span data-ttu-id="e00cb-189">Bu değişikliklerin yanı sıra sağa hizalama gibi estetik değişiklikleri gerçekleştirmek çekinmeyin `UnitPrice` değeri veya için biçimlendirme belirtme `UnitPrice` salt okunur ve düzenleme arabirimlerinden metin.</span><span class="sxs-lookup"><span data-stu-id="e00cb-189">In addition to these modifications, feel free to perform any aesthetic changes, such as right-aligning the `UnitPrice` value, or specifying the formatting for the `UnitPrice` text in its read-only and editing interfaces.</span></span>

<span data-ttu-id="e00cb-190">Akıllı etiket s GridView düzenlemeyi etkinleştir onay kutusunu işaretleyerek GridView düzenlenebilir hale getirin.</span><span class="sxs-lookup"><span data-stu-id="e00cb-190">Make the GridView editable by checking the Enable Editing checkbox in the GridView s smart tag.</span></span> <span data-ttu-id="e00cb-191">Ayrıca etkinleştirme sayfalama ve sıralamayı etkinleştir onay kutularını kontrol edin.</span><span class="sxs-lookup"><span data-stu-id="e00cb-191">Also check the Enable Paging and Enable Sorting checkboxes.</span></span>

> [!NOTE]
> <span data-ttu-id="e00cb-192">GridView s düzenleme arabirimini özelleştirme incelenmesi gerekiyor?</span><span class="sxs-lookup"><span data-stu-id="e00cb-192">Need a review of how to customize the GridView s editing interface?</span></span> <span data-ttu-id="e00cb-193">Bu durumda, kiracıurl [veri değişikliği arabirimini özelleştirme](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) öğretici.</span><span class="sxs-lookup"><span data-stu-id="e00cb-193">If so, refer back to the [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorial.</span></span>


<span data-ttu-id="e00cb-194">[![Düzenleme, sıralama ve disk belleği GridView desteğini etkinleştir](caching-data-with-the-objectdatasource-cs/_static/image13.png)](caching-data-with-the-objectdatasource-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="e00cb-194">[![Enable GridView Support for Editing, Sorting, and Paging](caching-data-with-the-objectdatasource-cs/_static/image13.png)](caching-data-with-the-objectdatasource-cs/_static/image12.png)</span></span>

<span data-ttu-id="e00cb-195">**Şekil 6**: Sıralama ve disk belleği düzenleme GridView desteğini etkinleştir ([tam boyutlu görüntüyü görmek için tıklatın](caching-data-with-the-objectdatasource-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="e00cb-195">**Figure 6**: Enable GridView Support for Editing, Sorting, and Paging ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image14.png))</span></span>


<span data-ttu-id="e00cb-196">Bu GridView değişiklikleri yaptıktan sonra GridView ve ObjectDataSource s bildirim temelli biçimlendirme aşağıdakine benzer görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="e00cb-196">After making these GridView modifications, the GridView and ObjectDataSource s declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](caching-data-with-the-objectdatasource-cs/samples/sample2.aspx)]

<span data-ttu-id="e00cb-197">Şekil 7 gösterildiği gibi ad, kategori ve her veritabanında ürünlerin fiyat düzenlenebilir GridView listeler.</span><span class="sxs-lookup"><span data-stu-id="e00cb-197">As Figure 7 shows, the editable GridView lists the name, category, and price of each of the products in the database.</span></span> <span data-ttu-id="e00cb-198">Sayfası s işlevleri sıralama test sonuçları, bunları, sayfa için bir dakikanızı ayırın ve bir kayıt düzenleyin.</span><span class="sxs-lookup"><span data-stu-id="e00cb-198">Take a moment to test out the page s functionality sort the results, page through them, and edit a record.</span></span>


<span data-ttu-id="e00cb-199">[![Her ürün s ad, kategori ve fiyat listelenen sıralanabilir, Pageable, düzenlenebilir GridView](caching-data-with-the-objectdatasource-cs/_static/image16.png)](caching-data-with-the-objectdatasource-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="e00cb-199">[![Each Product s Name, Category, and Price is Listed in a Sortable, Pageable, Editable GridView](caching-data-with-the-objectdatasource-cs/_static/image16.png)](caching-data-with-the-objectdatasource-cs/_static/image15.png)</span></span>

<span data-ttu-id="e00cb-200">**Şekil 7**: Her ürün s ad, kategori ve fiyat listelenen sıralanabilir, Pageable, düzenlenebilir GridView ([tam boyutlu görüntüyü görmek için tıklatın](caching-data-with-the-objectdatasource-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="e00cb-200">**Figure 7**: Each Product s Name, Category, and Price is Listed in a Sortable, Pageable, Editable GridView ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image17.png))</span></span>


## <a name="step-3-examining-when-the-objectdatasource-is-requesting-data"></a><span data-ttu-id="e00cb-201">3. Adım: Veri isteme olduğu zaman ObjectDataSource İnceleme</span><span class="sxs-lookup"><span data-stu-id="e00cb-201">Step 3: Examining When the ObjectDataSource is Requesting Data</span></span>

<span data-ttu-id="e00cb-202">`Products` GridView çağırarak görüntülenecek verisini alır `Select` yöntemi `ProductsDataSource` ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="e00cb-202">The `Products` GridView retrieves its data to display by invoking the `Select` method of the `ProductsDataSource` ObjectDataSource.</span></span> <span data-ttu-id="e00cb-203">Bu ObjectDataSource iş mantığı katmanı s örneği oluşturur `ProductsBLL` sınıfı ve çağrılarını kendi `GetProducts()` sırayla veri erişim katmanı s çağıran yöntem `ProductsTableAdapter` s `GetProducts()` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="e00cb-203">This ObjectDataSource creates an instance of the Business Logic Layer s `ProductsBLL` class and calls its `GetProducts()` method, which in turn calls the Data Access Layer s `ProductsTableAdapter` s `GetProducts()` method.</span></span> <span data-ttu-id="e00cb-204">DAL yöntemi Northwind veritabanına bağlanır ve sorunları yapılandırılmış `SELECT` sorgu.</span><span class="sxs-lookup"><span data-stu-id="e00cb-204">The DAL method connects to the Northwind database and issues the configured `SELECT` query.</span></span> <span data-ttu-id="e00cb-205">Bu veriler daha sonra içindeki paketleri yukarı DAL döndürülür bir `NorthwindDataTable`.</span><span class="sxs-lookup"><span data-stu-id="e00cb-205">This data is then returned to the DAL, which packages it up in a `NorthwindDataTable`.</span></span> <span data-ttu-id="e00cb-206">GridView'a döndürür ObjectDataSource döndürür BLL DataTable nesne döndürülür.</span><span class="sxs-lookup"><span data-stu-id="e00cb-206">The DataTable object is returned to the BLL, which returns it to the ObjectDataSource, which returns it to the GridView.</span></span> <span data-ttu-id="e00cb-207">GridView ardından oluşturan bir `GridViewRow` her nesne `DataRow` DataTable ve her `GridViewRow` sonunda istemciye döndürülen ve ziyaretçi s tarayıcıda görüntülenen HTML olarak işlenir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-207">The GridView then creates a `GridViewRow` object for each `DataRow` in the DataTable, and each `GridViewRow` is eventually rendered into the HTML that is returned to the client and displayed on the visitor s browser.</span></span>

<span data-ttu-id="e00cb-208">GridView, temel alınan verilere bağlamak için gereken her zaman bu olaylar dizisi gerçekleşir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-208">This sequence of events happens each and every time the GridView needs to bind to its underlying data.</span></span> <span data-ttu-id="e00cb-209">Sayfanın ilk kez, bir veri sayfasından GridView sıralama veya düzenleme veya silme arabirimleri yerleşik GridView s verilerine değiştirirken diğerine taşırken ziyaret edildiğinde durum ortaya çıkar.</span><span class="sxs-lookup"><span data-stu-id="e00cb-209">That happens when the page is first visited, when moving from one page of data to another, when sorting the GridView, or when modifying the GridView s data through its built-in editing or deleting interfaces.</span></span> <span data-ttu-id="e00cb-210">GridView s görünüm durumu devre dışı bırakılırsa, GridView her geri göndermede de DataSet'e.</span><span class="sxs-lookup"><span data-stu-id="e00cb-210">If the GridView s view state is disabled, the GridView will be rebound on each and every postback as well.</span></span> <span data-ttu-id="e00cb-211">GridView de açıkça verileriyle çağırarak DataSet'e kendi `DataBind()` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="e00cb-211">The GridView can also be explicitly rebound to its data by calling its `DataBind()` method.</span></span>

<span data-ttu-id="e00cb-212">Veritabanından alınan veri ile sıklığı tam olarak anlamak için verileri yeniden alınan zamanı belirten bir ileti görüntüler s olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-212">To fully appreciate the frequency with which the data is retrieved from the database, let s display a message indicating when the data is being re-retrieved.</span></span> <span data-ttu-id="e00cb-213">Etiket Web denetim adlı GridView yukarıda ekleme `ODSEvents`.</span><span class="sxs-lookup"><span data-stu-id="e00cb-213">Add a Label Web control above the GridView named `ODSEvents`.</span></span> <span data-ttu-id="e00cb-214">Temizle kendi `Text` özelliği ve kümesi kendi `EnableViewState` özelliğini `false`.</span><span class="sxs-lookup"><span data-stu-id="e00cb-214">Clear out its `Text` property and set its `EnableViewState` property to `false`.</span></span> <span data-ttu-id="e00cb-215">Etiketi altında bir düğme Web denetimi ekleyip ayarlayın, `Text` özelliğini geri gönderme.</span><span class="sxs-lookup"><span data-stu-id="e00cb-215">Underneath the Label, add a Button Web control and set its `Text` property to Postback .</span></span>


<span data-ttu-id="e00cb-216">[![GridView yukarıda sayfasına bir etiket ve düğme ekleme](caching-data-with-the-objectdatasource-cs/_static/image19.png)](caching-data-with-the-objectdatasource-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="e00cb-216">[![Add a Label and Button to the Page Above the GridView](caching-data-with-the-objectdatasource-cs/_static/image19.png)](caching-data-with-the-objectdatasource-cs/_static/image18.png)</span></span>

<span data-ttu-id="e00cb-217">**Şekil 8**: Sayfanın üstündeki GridView için bir etiket ve düğme ekleyin ([tam boyutlu görüntüyü görmek için tıklatın](caching-data-with-the-objectdatasource-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="e00cb-217">**Figure 8**: Add a Label and Button to the Page Above the GridView ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image20.png))</span></span>


<span data-ttu-id="e00cb-218">Veri erişim iş akışı, ObjectDataSource s sırasında `Selecting` temel alınan nesne oluşturulmadan önce olay harekete geçirilir ve kendi yapılandırılmış yöntemi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-218">During the data access workflow, the ObjectDataSource s `Selecting` event fires before the underlying object is created and its configured method invoked.</span></span> <span data-ttu-id="e00cb-219">Bu olay için bir olay işleyicisi oluşturun ve aşağıdaki kodu ekleyin:</span><span class="sxs-lookup"><span data-stu-id="e00cb-219">Create an event handler for this event and add the following code:</span></span>


[!code-csharp[Main](caching-data-with-the-objectdatasource-cs/samples/sample3.cs)]

<span data-ttu-id="e00cb-220">ObjectDataSource veri mimarisi için istekte bulunan her zaman harekete metin seçme olay etiketini görüntüler.</span><span class="sxs-lookup"><span data-stu-id="e00cb-220">Each time the ObjectDataSource makes a request to the architecture for data, the Label will display the text Selecting event fired .</span></span>

<span data-ttu-id="e00cb-221">Bir tarayıcıda bu sayfasını ziyaret edin.</span><span class="sxs-lookup"><span data-stu-id="e00cb-221">Visit this page in a browser.</span></span> <span data-ttu-id="e00cb-222">Sayfa ilk ziyaret edildiğinde metin seçme olayı harekete gösterilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-222">When the page is first visited, the text Selecting event fired is shown.</span></span> <span data-ttu-id="e00cb-223">Geri gönderme düğmesine tıklayın ve metin kaybolduğuna dikkat edin (varsayarak GridView s `EnableViewState` özelliği `true`, varsayılan).</span><span class="sxs-lookup"><span data-stu-id="e00cb-223">Click the Postback button and note that the text disappears (assuming that the GridView s `EnableViewState` property is set to `true`, the default).</span></span> <span data-ttu-id="e00cb-224">GridView Görünüm durumuna geri göndermede, yeniden düzenlenir ve bu nedenle eklenmemişse t açın verilerini ObjectDataSource için nedeni budur.</span><span class="sxs-lookup"><span data-stu-id="e00cb-224">This is because, on postback, the GridView is reconstructed from its view state and therefore doesn t turn to the ObjectDataSource for its data.</span></span> <span data-ttu-id="e00cb-225">Sıralama, sayfalama ve veri düzenleme ancak kendi veri kaynağı için yeniden bağlamaya GridView neden olur ve bu nedenle seçme olay metin yeniden harekete.</span><span class="sxs-lookup"><span data-stu-id="e00cb-225">Sorting, paging, or editing the data, however, causes the GridView to rebind to its data source, and therefore the Selecting event fired text reappears.</span></span>


<span data-ttu-id="e00cb-226">[![GridView, kendi veri kaynağına DataSet'e her seçme olay harekete görüntülenir](caching-data-with-the-objectdatasource-cs/_static/image22.png)](caching-data-with-the-objectdatasource-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="e00cb-226">[![Whenever the GridView is Rebound to its Data Source, Selecting event fired is Displayed](caching-data-with-the-objectdatasource-cs/_static/image22.png)](caching-data-with-the-objectdatasource-cs/_static/image21.png)</span></span>

<span data-ttu-id="e00cb-227">**Şekil 9**: GridView, kendi veri kaynağına DataSet'e her seçme olay harekete görüntülenir ([tam boyutlu görüntüyü görmek için tıklatın](caching-data-with-the-objectdatasource-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="e00cb-227">**Figure 9**: Whenever the GridView is Rebound to its Data Source, Selecting event fired is Displayed ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image23.png))</span></span>


<span data-ttu-id="e00cb-228">[![GridView Görünüm durumuna oluşturulmadan geri göndermenin neden düğmesine tıklayarak](caching-data-with-the-objectdatasource-cs/_static/image25.png)](caching-data-with-the-objectdatasource-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="e00cb-228">[![Clicking the Postback Button Causes the GridView to be Reconstructed from its View State](caching-data-with-the-objectdatasource-cs/_static/image25.png)](caching-data-with-the-objectdatasource-cs/_static/image24.png)</span></span>

<span data-ttu-id="e00cb-229">**Şekil 10**: Geri gönderme düğmeye tıklandığında GridView Görünüm durumuna oluşturulmadan neden olur ([tam boyutlu görüntüyü görmek için tıklatın](caching-data-with-the-objectdatasource-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="e00cb-229">**Figure 10**: Clicking the Postback Button Causes the GridView to be Reconstructed from its View State ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image26.png))</span></span>


<span data-ttu-id="e00cb-230">Veritabanı verileri her zaman veri aracılığıyla disk belleğine alınan veya sıralanmış almak üzere kısıp görünebilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-230">It may seem wasteful to retrieve the database data each time the data is paged through or sorted.</span></span> <span data-ttu-id="e00cb-231">Sonuçta, biz bu yana varsayılan disk belleği'ni kullanarak yeniden ObjectDataSource tüm kayıtlar ilk sayfa görüntülenirken almıştır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-231">After all, since we re using default paging, the ObjectDataSource has retrieved all of the records when displaying the first page.</span></span> <span data-ttu-id="e00cb-232">GridView sıralama ve disk belleği desteği sağlamaz bile veri sayfası ilk herhangi bir kullanıcı tarafından (ve görünüm durumunu devre dışı bırakılırsa her geri gönderme,) ziyaret edilen her zaman veritabanından alınmalıdır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-232">Even if the GridView does not provide sorting and paging support, the data must be retrieved from the database each time the page is first visited by any user (and on every postback, if view state is disabled).</span></span> <span data-ttu-id="e00cb-233">Ancak bu ek veritabanı istekleri GridView tüm kullanıcılar aynı verileri gösteriliyorsa, gereksiz olur.</span><span class="sxs-lookup"><span data-stu-id="e00cb-233">But if the GridView is showing the same data to all users, these extra database requests are superfluous.</span></span> <span data-ttu-id="e00cb-234">Neden döndürülen sonuçları önbelleğe `GetProducts()` yöntemi ve bağlama GridView olanlar için önbelleğe alınan sonuçları?</span><span class="sxs-lookup"><span data-stu-id="e00cb-234">Why not cache the results returned from the `GetProducts()` method and bind the GridView to those cached results?</span></span>

## <a name="step-4-caching-the-data-using-the-objectdatasource"></a><span data-ttu-id="e00cb-235">4. Adım: ObjectDataSource kullanarak verileri önbelleğe alma</span><span class="sxs-lookup"><span data-stu-id="e00cb-235">Step 4: Caching the Data Using the ObjectDataSource</span></span>

<span data-ttu-id="e00cb-236">Yalnızca birkaç özelliklerini ayarlayarak ObjectDataSource otomatik olarak ASP.NET verileri önbelleğe alınan verilerini önbelleğe almak için yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-236">By simply setting a few properties, the ObjectDataSource can be configured to automatically cache its retrieved data in the ASP.NET data cache.</span></span> <span data-ttu-id="e00cb-237">Aşağıdaki listede ObjectDataSource önbellekle ilgili özellikleri özetlenmektedir:</span><span class="sxs-lookup"><span data-stu-id="e00cb-237">The following list summarizes the cache-related properties of the ObjectDataSource:</span></span>

- <span data-ttu-id="e00cb-238">[EnableCaching](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.enablecaching.aspx) ayarlanmalıdır `true` önbelleğe almayı etkinleştirmek için.</span><span class="sxs-lookup"><span data-stu-id="e00cb-238">[EnableCaching](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.enablecaching.aspx) must be set to `true` to enable caching.</span></span> <span data-ttu-id="e00cb-239">Varsayılan, `false` değeridir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-239">The default is `false`.</span></span>
- <span data-ttu-id="e00cb-240">[CacheDuration](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheduration.aspx) verileri önbelleğe saniye cinsinden süre.</span><span class="sxs-lookup"><span data-stu-id="e00cb-240">[CacheDuration](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheduration.aspx) the amount of time, in seconds, that the data is cached.</span></span> <span data-ttu-id="e00cb-241">Varsayılan değer 0'dır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-241">The default is 0.</span></span> <span data-ttu-id="e00cb-242">ObjectDataSource yalnızca veri varsa önbelleğe alacağı `EnableCaching` olduğu `true` ve `CacheDuration` sıfırdan büyük bir değere ayarlanmış.</span><span class="sxs-lookup"><span data-stu-id="e00cb-242">The ObjectDataSource will only cache data if `EnableCaching` is `true` and `CacheDuration` is set to a value greater than zero.</span></span>
- <span data-ttu-id="e00cb-243">[CacheExpirationPolicy](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheexpirationpolicy.aspx) ayarlanabilir `Absolute` veya `Sliding`.</span><span class="sxs-lookup"><span data-stu-id="e00cb-243">[CacheExpirationPolicy](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheexpirationpolicy.aspx) can be set to `Absolute` or `Sliding`.</span></span> <span data-ttu-id="e00cb-244">Varsa `Absolute`, ObjectDataSource önbelleğe alınan verileri için `CacheDuration` ; saniye, `Sliding`, yalnızca bu için eriştiğini değil sonra verilerin süresini sona erdirir `CacheDuration` saniye.</span><span class="sxs-lookup"><span data-stu-id="e00cb-244">If `Absolute`, the ObjectDataSource caches its retrieved data for `CacheDuration` seconds; if `Sliding`, the data expires only after it has not been accessed for `CacheDuration` seconds.</span></span> <span data-ttu-id="e00cb-245">Varsayılan, `Absolute` değeridir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-245">The default is `Absolute`.</span></span>
- <span data-ttu-id="e00cb-246">[CacheKeyDependency](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cachekeydependency.aspx) ObjectDataSource s önbellek girişlerinin mevcut bir önbellek bağımlılık ile ilişkilendirmek için bu özelliği kullanın.</span><span class="sxs-lookup"><span data-stu-id="e00cb-246">[CacheKeyDependency](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cachekeydependency.aspx) use this property to associate the ObjectDataSource s cache entries with an existing cache dependency.</span></span> <span data-ttu-id="e00cb-247">ObjectDataSource s veri girişleri erken önbellekten ilişkili süresinin dolmasını sağlayarak çıkartılabilir `CacheKeyDependency`.</span><span class="sxs-lookup"><span data-stu-id="e00cb-247">The ObjectDataSource s data entries can be prematurely evicted from the cache by expiring its associated `CacheKeyDependency`.</span></span> <span data-ttu-id="e00cb-248">SQL önbellek bağımlılık ObjectDataSource s önbellek ile ilişkilendirmek için bu özelliğin en yaygın olarak kullanılır, bu konu şunları gelecekte keşfedeceğiz [SQL önbellek bağımlılıklarını kullanma](using-sql-cache-dependencies-cs.md) öğretici.</span><span class="sxs-lookup"><span data-stu-id="e00cb-248">This property is most commonly used to associate a SQL cache dependency with the ObjectDataSource s cache, a topic we'll explore in the future [Using SQL Cache Dependencies](using-sql-cache-dependencies-cs.md) tutorial.</span></span>

<span data-ttu-id="e00cb-249">Yapılandırma s izin `ProductsDataSource` ObjectDataSource verilerini mutlak ölçek 30 saniye için önbelleğe alma.</span><span class="sxs-lookup"><span data-stu-id="e00cb-249">Let s configure the `ProductsDataSource` ObjectDataSource to cache its data for 30 seconds on an absolute scale.</span></span> <span data-ttu-id="e00cb-250">ObjectDataSource s ayarlamak `EnableCaching` özelliğini `true` ve kendi `CacheDuration` 30 özelliği.</span><span class="sxs-lookup"><span data-stu-id="e00cb-250">Set the ObjectDataSource s `EnableCaching` property to `true` and its `CacheDuration` property to 30.</span></span> <span data-ttu-id="e00cb-251">Bırakın `CacheExpirationPolicy` özelliği, varsayılan olarak ayarlanmış `Absolute`.</span><span class="sxs-lookup"><span data-stu-id="e00cb-251">Leave the `CacheExpirationPolicy` property set to its default, `Absolute`.</span></span>


<span data-ttu-id="e00cb-252">[![ObjectDataSource verilerini 30 saniye için önbelleğe al'ı yapılandırma](caching-data-with-the-objectdatasource-cs/_static/image28.png)](caching-data-with-the-objectdatasource-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="e00cb-252">[![Configure the ObjectDataSource to Cache its Data for 30 Seconds](caching-data-with-the-objectdatasource-cs/_static/image28.png)](caching-data-with-the-objectdatasource-cs/_static/image27.png)</span></span>

<span data-ttu-id="e00cb-253">**Şekil 11**: ObjectDataSource verilerini 30 saniye için önbelleğe al'ı yapılandırma ([tam boyutlu görüntüyü görmek için tıklatın](caching-data-with-the-objectdatasource-cs/_static/image29.png))</span><span class="sxs-lookup"><span data-stu-id="e00cb-253">**Figure 11**: Configure the ObjectDataSource to Cache its Data for 30 Seconds ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image29.png))</span></span>


<span data-ttu-id="e00cb-254">Yaptığınız değişiklikleri kaydedin ve bir tarayıcıda bu sayfayı yeniden ziyaret.</span><span class="sxs-lookup"><span data-stu-id="e00cb-254">Save your changes and revisit this page in a browser.</span></span> <span data-ttu-id="e00cb-255">Sayfa ilk ziyaret edildiğinde metin seçme harekete geçirilen olay başlangıçta veriler önbellekte değil görünür.</span><span class="sxs-lookup"><span data-stu-id="e00cb-255">The Selecting event fired text will appear when you first visit the page, as initially the data is not in the cache.</span></span> <span data-ttu-id="e00cb-256">Ancak disk belleği veya düzenleme veya İptal düğmesini tıklatarak sıralama, geri gönderme düğmesine tıklayarak tetiklenen sonraki Geri göndermeler *değil* yeniden seçme olayı harekete metin.</span><span class="sxs-lookup"><span data-stu-id="e00cb-256">But subsequent postbacks triggered by clicking the Postback button, sorting, paging, or clicking the Edit or Cancel buttons does *not* redisplay the Selecting event fired text.</span></span> <span data-ttu-id="e00cb-257">Bunun nedeni, `Selecting` olay yalnızca ObjectDataSource, temel alınan bir nesneden; verisini alır gerektiğinde ateşlenir `Selecting` olay değil yangın verileri veri önbelleğinden alındığından durumunda.</span><span class="sxs-lookup"><span data-stu-id="e00cb-257">This is because the `Selecting` event only fires when the ObjectDataSource gets its data from its underlying object; the `Selecting` event does not fire if the data is pulled from the data cache.</span></span>

<span data-ttu-id="e00cb-258">30 saniye sonra verilerin önbellekten çıkarılmasına.</span><span class="sxs-lookup"><span data-stu-id="e00cb-258">After 30 seconds, the data will be evicted from the cache.</span></span> <span data-ttu-id="e00cb-259">Veriler ayrıca önbellekten varsa çıkarılmasına ObjectDataSource s `Insert`, `Update`, veya `Delete` yöntemi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-259">The data will also be evicted from the cache if the ObjectDataSource s `Insert`, `Update`, or `Delete` methods are invoked.</span></span> <span data-ttu-id="e00cb-260">Sonuç olarak, 30 saniye geçtiğinden veya güncelleştir düğmesine tıklatıldıktan, sıralama, sayfalama, veya düzenleme veya İptal düğmesini tıklatarak, temel alınan nesne verilerini almak ObjectDataSource neden sonra seçme olay görüntüleme metin tetiklenen zaman `Selecting` olay harekete geçirilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-260">Consequently, after 30 seconds have passed or the Update button has been clicked, sorting, paging, or clicking the Edit or Cancel buttons will cause the ObjectDataSource to get its data from its underlying object, displaying the Selecting event fired text when the `Selecting` event fires.</span></span> <span data-ttu-id="e00cb-261">Döndürülen sonuçlar, verileri önbelleğe geri yerleştirilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-261">These returned results are placed back into the data cache.</span></span>

> [!NOTE]
> <span data-ttu-id="e00cb-262">Metin seçme harekete geçirilen olay sık sık bakın, önbelleğe alınan verilerle çalışmak ObjectDataSource beklediğiniz bellek kısıtlamaları nedeniyle olabilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-262">If you see the Selecting event fired text frequently, even when you expect the ObjectDataSource to be working with cached data, it may be due to memory constraints.</span></span> <span data-ttu-id="e00cb-263">Yeterli bellek yoksa, ObjectDataSource tarafından önbelleğe eklenen veriler attı.</span><span class="sxs-lookup"><span data-stu-id="e00cb-263">If there is not enough free memory, the data added to the cache by the ObjectDataSource may have been scavenged.</span></span> <span data-ttu-id="e00cb-264">ObjectDataSource eklenmemişse t doğru verileri veya tek önbellekler tampon görünüyorsa verileri tutularak, belleği boşaltmak için bazı uygulamaları kapatın ve yeniden deneyin.</span><span class="sxs-lookup"><span data-stu-id="e00cb-264">If the ObjectDataSource doesn t appear to be correctly caching the data or only caches the data sporadically, close some applications to free memory and try again.</span></span>


<span data-ttu-id="e00cb-265">Şekil 12 iş akışı önbelleğe alma ObjectDataSource s gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-265">Figure 12 illustrates the ObjectDataSource s caching workflow.</span></span> <span data-ttu-id="e00cb-266">Seçme olayı tetiklendiğinde metin ekranda görünür, çünkü veriler önbellekte değil ve temel alınan nesneden alınması gerekiyordu.</span><span class="sxs-lookup"><span data-stu-id="e00cb-266">When the Selecting event fired text appears on your screen, it is because the data was not in the cache and had to be retrieved from the underlying object.</span></span> <span data-ttu-id="e00cb-267">Bu metin eksik olduğunda ancak bunu s verileri önbellekten olmadığı için.</span><span class="sxs-lookup"><span data-stu-id="e00cb-267">When this text is missing, however, it s because the data was available from the cache.</span></span> <span data-ttu-id="e00cb-268">Veri önbelleğinden döndürüldüğünde nesnesini çağrı yok ve bu nedenle, hiçbir veritabanı sorgusu orada s.</span><span class="sxs-lookup"><span data-stu-id="e00cb-268">When the data is returned from the cache there s no call to the underlying object and, therefore, no database query executed.</span></span>


![ObjectDataSource depoları ve veri önbelleğinden verilerini alır](caching-data-with-the-objectdatasource-cs/_static/image30.png)

<span data-ttu-id="e00cb-270">**Şekil 12**: ObjectDataSource depoları ve veri önbelleğinden verilerini alır</span><span class="sxs-lookup"><span data-stu-id="e00cb-270">**Figure 12**: The ObjectDataSource Stores and Retrieves its Data from the Data Cache</span></span>


<span data-ttu-id="e00cb-271">Her bir ASP.NET uygulama paylaşılan tüm sayfaları ve Ziyaretçiler, s örnek kendi veri önbelleği vardır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-271">Each ASP.NET application has its own data cache instance that s shared across all pages and visitors.</span></span> <span data-ttu-id="e00cb-272">ObjectDataSource ile verileri önbelleğe depolanan veriler aynı şekilde sayfasını ziyaret edin tüm kullanıcılar arasında paylaşılan anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-272">That means that the data stored in the data cache by the ObjectDataSource is likewise shared across all users who visit the page.</span></span> <span data-ttu-id="e00cb-273">Bunu doğrulamak için açık `ObjectDataSource.aspx` sayfasını bir tarayıcıda.</span><span class="sxs-lookup"><span data-stu-id="e00cb-273">To verify this, open the `ObjectDataSource.aspx` page in a browser.</span></span> <span data-ttu-id="e00cb-274">(Önceki testleri tarafından önbelleğe eklenen veriler artık çıkarıldı varsayarak) ilk sayfasını ziyaret ederek, metin seçme harekete geçirilen olay görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-274">When first visiting the page, the Selecting event fired text will appear (assuming that the data added to the cache by previous tests has, by now, been evicted).</span></span> <span data-ttu-id="e00cb-275">İkinci bir tarayıcı örneğinde ve kopyalama açın ve ikinci ilk tarayıcı örnekten URL'yi yapıştırın.</span><span class="sxs-lookup"><span data-stu-id="e00cb-275">Open a second browser instance and copy and paste the URL from the first browser instance to the second.</span></span> <span data-ttu-id="e00cb-276">İkinci tarayıcı örneğinde olay harekete metin seçme çünkü gösterilmez, s aynı kullanarak önbelleğe alınmış verileri ilk olarak.</span><span class="sxs-lookup"><span data-stu-id="e00cb-276">In the second browser instance, the Selecting event fired text is not shown because it s using the same cached data as the first.</span></span>

<span data-ttu-id="e00cb-277">Önbelleğe alınan verileri eklerken, ObjectDataSource içeren bir önbellek anahtar değeri kullanır: `CacheDuration` ve `CacheExpirationPolicy` özellik değerlerini; belirtilen ObjectDataSource tarafından kullanılan temel alınan iş nesne türü aracılığıyla [ `TypeName` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.typename.aspx) (`ProductsBLL`, bu örnekte); değerini `SelectMethod` özellik adı ve parametrelerin değerlerini `SelectParameters` toplama; ve kendi değerlerini`StartRowIndex`ve `MaximumRows` uygularken kullanılan özellikler [özel disk belleği.](../paging-and-sorting/paging-and-sorting-report-data-cs.md)</span><span class="sxs-lookup"><span data-stu-id="e00cb-277">When inserting its retrieved data into the cache, the ObjectDataSource uses a cache key value that includes: the `CacheDuration` and `CacheExpirationPolicy` property values; the type of the underlying business object being used by the ObjectDataSource, which is specified via the [`TypeName` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.typename.aspx) (`ProductsBLL`, in this example); the value of the `SelectMethod` property and the name and values of the parameters in the `SelectParameters` collection; and the values of its `StartRowIndex` and `MaximumRows` properties, which are used when implementing [custom paging.](../paging-and-sorting/paging-and-sorting-report-data-cs.md)</span></span>

<span data-ttu-id="e00cb-278">Önbellek anahtar değeri bu özellikler bir birleşimi olarak hazırlayın, bu değerleri değiştikçe benzersiz önbellek girişi sağlar.</span><span class="sxs-lookup"><span data-stu-id="e00cb-278">Crafting the cache key value as a combination of these properties ensures a unique cache entry as these values change.</span></span> <span data-ttu-id="e00cb-279">Örneğin, önceki öğreticilerde ediyoruz ve baktığı kullanarak `ProductsBLL` s sınıfı `GetProductsByCategoryID(categoryID)`, belirtilen bir kategorideki tüm ürünleri döndürür.</span><span class="sxs-lookup"><span data-stu-id="e00cb-279">For example, in past tutorials we ve looked at using the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)`, which returns all products for a specified category.</span></span> <span data-ttu-id="e00cb-280">Bir kullanıcı, sahip olduğu sayfası ve görünüm İçecekler gelebilir bir `CategoryID` 1.</span><span class="sxs-lookup"><span data-stu-id="e00cb-280">One user might come to the page and view beverages, which has a `CategoryID` of 1.</span></span> <span data-ttu-id="e00cb-281">ObjectDataSource bakmadan sonuçlarını önbelleğe varsa `SelectParameters` değerlerini, sayfaya başka bir kullanıcı gelen Çeşniler İçecekler ürünleri çalışırken görüntülemek için önbellekte olan, d Çeşniler yerine önbelleğe alınmış içecek ürünleri görürler.</span><span class="sxs-lookup"><span data-stu-id="e00cb-281">If the ObjectDataSource cached its results without regard for the `SelectParameters` values, when another user came to the page to view condiments while the beverages products were in the cache, they d see the cached beverage products rather than condiments.</span></span> <span data-ttu-id="e00cb-282">Bu özelliklere göre önbellek anahtarını değiştirerek içeren değerlerini `SelectParameters`, İçecekler ve Çeşniler için ayrı bir önbellek girdisi ObjectDataSource tutar.</span><span class="sxs-lookup"><span data-stu-id="e00cb-282">By varying the cache key by these properties, which include the values of the `SelectParameters`, the ObjectDataSource maintains a separate cache entry for beverages and condiments.</span></span>

## <a name="stale-data-concerns"></a><span data-ttu-id="e00cb-283">Eski veri konuları</span><span class="sxs-lookup"><span data-stu-id="e00cb-283">Stale Data Concerns</span></span>

<span data-ttu-id="e00cb-284">ObjectDataSource öğelerinden birini, önbellekten otomatik olarak çıkarır, `Insert`, `Update`, veya `Delete` yöntemi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-284">The ObjectDataSource automatically evicts its items from the cache when any one of its `Insert`, `Update`, or `Delete` methods is invoked.</span></span> <span data-ttu-id="e00cb-285">Bu, veri sayfası aracılığıyla değiştirildiğinde önbellek girişleri temizleyerek eski veri karşı korunmasına yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="e00cb-285">This helps protect against stale data by clearing out the cache entries when the data is modified through the page.</span></span> <span data-ttu-id="e00cb-286">Ancak, yine de eski verileri görüntülemek için önbelleğe alma'ı kullanarak bir ObjectDataSource için mümkündür.</span><span class="sxs-lookup"><span data-stu-id="e00cb-286">However, it is possible for an ObjectDataSource using caching to still display stale data.</span></span> <span data-ttu-id="e00cb-287">En basit durumda, doğrudan veritabanı içinde değiştirme veri nedeniyle olabilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-287">In the simplest case, it can be due to the data changing directly within the database.</span></span> <span data-ttu-id="e00cb-288">Belki de bir veritabanı yöneticisi, yalnızca bazı veritabanında kayıtlar değiştiren betik çalıştırdınız.</span><span class="sxs-lookup"><span data-stu-id="e00cb-288">Perhaps a database administrator just ran a script that modifies some of the records in the database.</span></span>

<span data-ttu-id="e00cb-289">Bu senaryo ayrıca daha zarif bir şekilde unfold.</span><span class="sxs-lookup"><span data-stu-id="e00cb-289">This scenario could also unfold in a more subtle way.</span></span> <span data-ttu-id="e00cb-290">Veri değişikliği yöntemlerinden biri çağrıldığında ObjectDataSource öğelerinden önbellekten çıkarır, ancak önbelleğe alınmış öğeleri kaldırıldı ObjectDataSource s belirli özellik değerleri için birleşimidir (`CacheDuration`, `TypeName`, `SelectMethod`, vb.).</span><span class="sxs-lookup"><span data-stu-id="e00cb-290">While the ObjectDataSource evicts its items from the cache when one of its data modification methods is called, the cached items removed are for the ObjectDataSource s particular combination of property values (`CacheDuration`, `TypeName`, `SelectMethod`, and so on).</span></span> <span data-ttu-id="e00cb-291">Farklı kullanan iki ObjectDataSources varsa `SelectMethods` veya `SelectParameters`, ancak yine de bir ObjectDataSource bir satırı güncelleştirmek ve kendi önbellek girişi, ancak karşılık gelen satır için ikinci ObjectDataSource geçersiz aynı verileri güncelleştirebilirsiniz yine de hizmet alabilecektir gelen önbelleğe alınmış.</span><span class="sxs-lookup"><span data-stu-id="e00cb-291">If you have two ObjectDataSources that use different `SelectMethods` or `SelectParameters`, but still can update the same data, then one ObjectDataSource may update a row and invalidate its own cache entries, but the corresponding row for the second ObjectDataSource will still be served from the cached.</span></span> <span data-ttu-id="e00cb-292">Bu işlev göstermesi için sayfa oluşturma geçmenizi öneriyoruz.</span><span class="sxs-lookup"><span data-stu-id="e00cb-292">I encourage you to create pages to exhibit this functionality.</span></span> <span data-ttu-id="e00cb-293">Kullanan önbelleğe alma ve verileri almak üzere yapılandırılan bir ObjectDataSource gelen verileri çeker düzenlenebilir bir GridView görüntüleyen bir sayfa oluşturmak `ProductsBLL` s sınıfı `GetProducts()` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="e00cb-293">Create a page that displays an editable GridView that pulls its data from an ObjectDataSource that uses caching and is configured to get data from the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="e00cb-294">Başka bir düzenlenebilir GridView ve bu sayfayı (veya başka bir tane), ancak bu ikinci ObjectDataSource ObjectDataSource sahip bunu kullanmak `GetProductsByCategoryID(categoryID)` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="e00cb-294">Add another editable GridView and ObjectDataSource to this page (or another one), but for this second ObjectDataSource have it use the `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="e00cb-295">İki ObjectDataSources beri `SelectMethod` özellikleri farklı, bunların tümünü her önbelleğe alınmış değerlerine sahip.</span><span class="sxs-lookup"><span data-stu-id="e00cb-295">Since the two ObjectDataSources `SelectMethod` properties differ, they ll each have their own cached values.</span></span> <span data-ttu-id="e00cb-296">Verileri geri diğer kılavuzuna (disk belleği, sıralama ve diğerleri tarafından) bağlama sonraki açışınızda bir kılavuz, bir ürün düzenlerseniz, hala eski, önbelleğe alınmış verileri sunmak ve diğer kılavuzdan yapılan değişiklik yansıtmıyor.</span><span class="sxs-lookup"><span data-stu-id="e00cb-296">If you edit a product in one grid, the next time you bind the data back to the other grid (by paging, sorting, and so forth), it will still serve the old, cached data and not reflect the change that was made from the other grid.</span></span>

<span data-ttu-id="e00cb-297">Kısacası, eski veri potansiyelini ve veri güncellik önemli olduğu senaryolar için daha kısa expiries kullanın istekliyse yalnızca zaman tabanlı expiries kullanın.</span><span class="sxs-lookup"><span data-stu-id="e00cb-297">In short, only use time-based expiries if you are willing to have the potential of stale data, and use shorter expiries for scenarios where the freshness of data is important.</span></span> <span data-ttu-id="e00cb-298">Eski veri kabul edilebilir değilse, önbelleğe alma bırakmayı veya SQL önbellek bağımlılıklarını kullanma (veritabanı veri olduğunu varsayarak, önbelleğe alma re).</span><span class="sxs-lookup"><span data-stu-id="e00cb-298">If stale data is not acceptable, either forgo caching or use SQL cache dependencies (assuming it is database data you re caching).</span></span> <span data-ttu-id="e00cb-299">Bir sonraki öğreticide şunları SQL önbellek bağımlılıklarını keşfedeceğiz.</span><span class="sxs-lookup"><span data-stu-id="e00cb-299">We'll explore SQL cache dependencies in a future tutorial.</span></span>

## <a name="summary"></a><span data-ttu-id="e00cb-300">Özet</span><span class="sxs-lookup"><span data-stu-id="e00cb-300">Summary</span></span>

<span data-ttu-id="e00cb-301">Bu öğreticide, biz ObjectDataSource s önbelleğe alma özellikleri yerleşik incelenir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-301">In this tutorial we examined the ObjectDataSource s built-in caching capabilities.</span></span> <span data-ttu-id="e00cb-302">Yalnızca birkaç özelliklerini ayarlayarak, biz belirtilen döndürülen sonuçları önbelleğe almak için ObjectDataSource bildirebilirsiniz `SelectMethod` ASP.NET veri önbelleğine.</span><span class="sxs-lookup"><span data-stu-id="e00cb-302">By simply setting a few properties, we can instruct the ObjectDataSource to cache the results returned from the specified `SelectMethod` into the ASP.NET data cache.</span></span> <span data-ttu-id="e00cb-303">`CacheDuration` Ve `CacheExpirationPolicy` özellikleri, öğenin önbelleğe alınma süresi ve mutlak veya kayan zaman aşımı olup olmadığını gösterir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-303">The `CacheDuration` and `CacheExpirationPolicy` properties indicate the duration the item is cached and whether it is an absolute or sliding expiration.</span></span> <span data-ttu-id="e00cb-304">`CacheKeyDependency` Özelliği tüm ObjectDataSource s önbellek girişi var olan bir önbellek bağımlılık ile ilişkilendirir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-304">The `CacheKeyDependency` property associates all of the ObjectDataSource s cache entries with an existing cache dependency.</span></span> <span data-ttu-id="e00cb-305">Zamana bağlı süre sonu ulaşıldığında ve genelde SQL önbellek bağımlılıklarını ile kullanılan önce ObjectDataSource s girişlerin önbellekten çıkarmak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-305">This can be used to evict the ObjectDataSource s entries from the cache before the time-based expiration is reached, and is typically used with SQL cache dependencies.</span></span>

<span data-ttu-id="e00cb-306">ObjectDataSource yalnızca değerlerinin veri önbelleği için önbelleğe aldığından, biz ObjectDataSource s yerleşik işlevleri programlı olarak çoğaltabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="e00cb-306">Since the ObjectDataSource simply caches its values to the data cache, we could replicate the ObjectDataSource s built-in functionality programmatically.</span></span> <span data-ttu-id="e00cb-307">Bunu eklenmemişse t mantıklı sunu katmanında ObjectDataSource bu işlevsellik sunar, ancak önbelleğe alma özellikleri mimarisinin ayrı bir katmana uygulayabilirsiniz olduğundan bunun için.</span><span class="sxs-lookup"><span data-stu-id="e00cb-307">It doesn t make sense to do this at the Presentation Layer, since the ObjectDataSource offers this functionality out of the box, but we can implement caching capabilities in a separate layer of the architecture.</span></span> <span data-ttu-id="e00cb-308">Bunu yapmak için biz ObjectDataSource tarafından kullanılan aynı mantığı tekrarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="e00cb-308">To do so, we'll need to repeat the same logic used by the ObjectDataSource.</span></span> <span data-ttu-id="e00cb-309">Biz programlı olarak yapı içinde veri önbelleğinden sonraki müşterilerimize öğreticide çalışma hakkında bilgi edineceksiniz.</span><span class="sxs-lookup"><span data-stu-id="e00cb-309">We'll explore how to programmatically work with the data cache from within the architecture in our next tutorial.</span></span>

<span data-ttu-id="e00cb-310">Mutlu programlama!</span><span class="sxs-lookup"><span data-stu-id="e00cb-310">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="e00cb-311">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="e00cb-311">Further Reading</span></span>

<span data-ttu-id="e00cb-312">Bu öğreticide ele alınan konular hakkında daha fazla bilgi için aşağıdaki kaynaklara bakın:</span><span class="sxs-lookup"><span data-stu-id="e00cb-312">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="e00cb-313">ASP.NET önbelleğe alma: Teknikleri ve en iyi uygulamalar</span><span class="sxs-lookup"><span data-stu-id="e00cb-313">ASP.NET Caching: Techniques and Best Practices</span></span>](https://msdn.microsoft.com/library/aa478965.aspx)
- [<span data-ttu-id="e00cb-314">.NET Framework uygulamaları için önbellek Mimarisi Kılavuzu</span><span class="sxs-lookup"><span data-stu-id="e00cb-314">Caching Architecture Guide for .NET Framework Applications</span></span>](https://msdn.microsoft.com/library/ee817645.aspx)
- [<span data-ttu-id="e00cb-315">ASP.NET 2.0 çıkış önbelleğe alma</span><span class="sxs-lookup"><span data-stu-id="e00cb-315">Output Caching in ASP.NET 2.0</span></span>](http://aspnet.4guysfromrolla.com/articles/121306-1.aspx)

## <a name="about-the-author"></a><span data-ttu-id="e00cb-316">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="e00cb-316">About the Author</span></span>

<span data-ttu-id="e00cb-317">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), yazar yedi ASP/ASP.NET kitaplardan ve poshbeauty.com sitesinin [4GuysFromRolla.com](http://www.4guysfromrolla.com), Microsoft Web teknolojileriyle beri 1998'de çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-317">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="e00cb-318">Scott, bağımsız Danışman, Eğitimci ve yazıcı çalışır.</span><span class="sxs-lookup"><span data-stu-id="e00cb-318">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="e00cb-319">En son nitelemiştir olan [ *Unleashed'i öğretin kendiniz ASP.NET 2.0 24 saat içindeki*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="e00cb-319">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="e00cb-320">He adresinden ulaşılabilir [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="e00cb-320">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="e00cb-321">veya kendi blog hangi bulunabilir [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="e00cb-321">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="e00cb-322">Özel teşekkürler</span><span class="sxs-lookup"><span data-stu-id="e00cb-322">Special Thanks To</span></span>

<span data-ttu-id="e00cb-323">Bu öğretici serisinde, birçok yararlı Gözden Geçiren tarafından gözden geçirildi.</span><span class="sxs-lookup"><span data-stu-id="e00cb-323">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="e00cb-324">Bu öğretici için müşteri adayı İnceleme Teresa Murphy oluştu.</span><span class="sxs-lookup"><span data-stu-id="e00cb-324">Lead reviewer for this tutorial was Teresa Murphy.</span></span> <span data-ttu-id="e00cb-325">Yaklaşan My MSDN makaleleri gözden geçirme ilgileniyor musunuz?</span><span class="sxs-lookup"><span data-stu-id="e00cb-325">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="e00cb-326">Bu durumda, bir satır bana bırak [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="e00cb-326">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="e00cb-327">Next</span><span class="sxs-lookup"><span data-stu-id="e00cb-327">Next</span></span>](caching-data-in-the-architecture-cs.md)
