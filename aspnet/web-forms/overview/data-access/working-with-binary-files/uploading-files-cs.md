---
uid: web-forms/overview/data-access/working-with-binary-files/uploading-files-cs
title: Dosyalar karşıya yükleniyorC#() | Microsoft Docs
author: rick-anderson
description: Kullanıcıların, ikili dosyaları (Word veya PDF belgeleri gibi), sunucunun dosya sisteminde depolanabileceği Web sitenize yüklemesine nasıl izin vereceğinizi öğrenin...
ms.author: riande
ms.date: 03/27/2007
ms.assetid: b381b1da-feb3-4776-bc1b-75db53eb90ab
msc.legacyurl: /web-forms/overview/data-access/working-with-binary-files/uploading-files-cs
msc.type: authoredcontent
ms.openlocfilehash: 4e3e32a829de386a681504c8d5d61dd258b8b2e6
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74581691"
---
# <a name="uploading-files-c"></a><span data-ttu-id="87b0d-103">Karşıya Dosya Yükleme (C#)</span><span class="sxs-lookup"><span data-stu-id="87b0d-103">Uploading Files (C#)</span></span>

<span data-ttu-id="87b0d-104">[Scott Mitchell](https://twitter.com/ScottOnWriting) tarafından</span><span class="sxs-lookup"><span data-stu-id="87b0d-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="87b0d-105">[Örnek uygulamayı indirin](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_54_CS.exe) veya [PDF 'yi indirin](uploading-files-cs/_static/datatutorial54cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="87b0d-105">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_54_CS.exe) or [Download PDF](uploading-files-cs/_static/datatutorial54cs1.pdf)</span></span>

> <span data-ttu-id="87b0d-106">Kullanıcıların, dosyanın dosya sisteminde veya veritabanında saklanabileceği Web sitenize ikili dosyaları (Word veya PDF belgeleri gibi) karşıya yüklemesine nasıl izin vereceğinizi öğrenin.</span><span class="sxs-lookup"><span data-stu-id="87b0d-106">Learn how to allow users to upload binary files (such as Word or PDF documents) to your Web site where they may be stored in either the server's file system or the database.</span></span>

## <a name="introduction"></a><span data-ttu-id="87b0d-107">Giriş</span><span class="sxs-lookup"><span data-stu-id="87b0d-107">Introduction</span></span>

<span data-ttu-id="87b0d-108">Şimdiye kadar incelediğimiz tüm öğreticiler metin verileriyle özel olarak çalıştık.</span><span class="sxs-lookup"><span data-stu-id="87b0d-108">All of the tutorials we ve examined so far have worked exclusively with text data.</span></span> <span data-ttu-id="87b0d-109">Ancak, birçok uygulamanın hem metin hem de ikili verileri yakalayan veri modelleri vardır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-109">However, many applications have data models that capture both text and binary data.</span></span> <span data-ttu-id="87b0d-110">Çevrimiçi bir site, kullanıcıların profiliyle ilişkilendirmek üzere bir resmi karşıya yüklemesine izin verebilir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-110">An online dating site might allow users to upload a picture to associate with their profile.</span></span> <span data-ttu-id="87b0d-111">Bir işe alma Web sitesi, kullanıcıların özgeçmişini bir Microsoft Word veya PDF belgesi olarak karşıya yüklemesine izin verebilir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-111">A recruiting website might let users upload their resume as a Microsoft Word or PDF document.</span></span>

<span data-ttu-id="87b0d-112">İkili verilerle çalışma yeni bir zorluk kümesi ekler.</span><span class="sxs-lookup"><span data-stu-id="87b0d-112">Working with binary data adds a new set of challenges.</span></span> <span data-ttu-id="87b0d-113">İkili verilerin uygulamada nasıl depolanacağına karar vermelidir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-113">We must decide how the binary data is stored in the application.</span></span> <span data-ttu-id="87b0d-114">Yeni kayıtları eklemek için kullanılan arabirimin, kullanıcının bilgisayarından bir dosyayı karşıya yüklemesine izin vermek için güncelleştirilmeleri ve kayıt ile ilişkili ikili verileri indirmek için bir yol sağlamak üzere ek adımların alınması gerekir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-114">The interface used for inserting new records has to be updated to allow the user to upload a file from their computer and extra steps must be taken to display or provide a means for downloading a record s associated binary data.</span></span> <span data-ttu-id="87b0d-115">Bu öğreticide ve sonraki üç zorluk bu zorlukları nasıl ele alacağız.</span><span class="sxs-lookup"><span data-stu-id="87b0d-115">In this tutorial and the next three we'll explore how to hurdle these challenges.</span></span> <span data-ttu-id="87b0d-116">Bu öğreticilerin sonunda, her kategoriden bir resim ve PDF Broşürü ilişkilendiğinde tam işlevli bir uygulama oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="87b0d-116">At the end of these tutorials we'll have built a fully functional application that associates a picture and PDF brochure with each category.</span></span> <span data-ttu-id="87b0d-117">Bu öğreticide, ikili verileri depolamak için farklı teknikler ele alacağız ve kullanıcıların bilgisayarından bir dosyayı karşıya yüklemesi ve Web sunucusu s dosya sistemine kaydedilmesini sağlama yöntemleri anlatılmaktadır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-117">In this particular tutorial we'll look at different techniques for storing binary data and explore how to enable users to upload a file from their computer and have it saved on the web server s file system.</span></span>

> [!NOTE]
> <span data-ttu-id="87b0d-118">Bir uygulama veri modelinin parçası olan ikili veriler bazen bir [BLOB](http://en.wikipedia.org/wiki/Binary_large_object)olarak adlandırılır, Ikili büyük nesne için bir kısaltma.</span><span class="sxs-lookup"><span data-stu-id="87b0d-118">Binary data that is part of an application s data model is sometimes referred to as a [BLOB](http://en.wikipedia.org/wiki/Binary_large_object), an acronym for Binary Large OBject.</span></span> <span data-ttu-id="87b0d-119">Bu öğreticilerde, BLOB terimi eş anlamlı olsa da, terminoloji ikili verilerini kullanmayı seçtim.</span><span class="sxs-lookup"><span data-stu-id="87b0d-119">In these tutorials I have chosen to use the terminology binary data, although the term BLOB is synonymous.</span></span>

## <a name="step-1-creating-the-working-with-binary-data-web-pages"></a><span data-ttu-id="87b0d-120">1\. Adım: Ikili veri Web sayfalarıyla çalışmayı oluşturma</span><span class="sxs-lookup"><span data-stu-id="87b0d-120">Step 1: Creating the Working with Binary Data Web Pages</span></span>

<span data-ttu-id="87b0d-121">İkili veriler için destek eklemeyle ilgili güçlükleri keşfetmeye başlamadan önce, Web sitesi projemizdeki Bu öğretici ve sonraki üç için gereken ASP.NET sayfalarını oluşturmak için önce bir süre sürme.</span><span class="sxs-lookup"><span data-stu-id="87b0d-121">Before we begin to explore the challenges associated with adding support for binary data, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next three.</span></span> <span data-ttu-id="87b0d-122">`BinaryData`adlı yeni bir klasör ekleyerek başlayın.</span><span class="sxs-lookup"><span data-stu-id="87b0d-122">Start by adding a new folder named `BinaryData`.</span></span> <span data-ttu-id="87b0d-123">Ardından, aşağıdaki ASP.NET sayfalarını bu klasöre ekleyerek her bir sayfayı `Site.master` ana sayfasıyla ilişkilendirdiğinizden emin olun:</span><span class="sxs-lookup"><span data-stu-id="87b0d-123">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `FileUpload.aspx`
- `DisplayOrDownloadData.aspx`
- `UploadInDetailsView.aspx`
- `UpdatingAndDeleting.aspx`

![Ikili veri ile Ilgili öğreticiler için ASP.NET sayfaları ekleyin](uploading-files-cs/_static/image1.gif)

<span data-ttu-id="87b0d-125">**Şekil 1**: ikili veri Ile ilgili öğreticiler Için ASP.NET sayfaları ekleme</span><span class="sxs-lookup"><span data-stu-id="87b0d-125">**Figure 1**: Add the ASP.NET Pages for the Binary Data-Related Tutorials</span></span>

<span data-ttu-id="87b0d-126">Diğer klasörlerde olduğu gibi, `BinaryData` klasöründeki `Default.aspx` öğreticileri bölümündeki öğreticilerin listelecektir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-126">Like in the other folders, `Default.aspx` in the `BinaryData` folder will list the tutorials in its section.</span></span> <span data-ttu-id="87b0d-127">`SectionLevelTutorialListing.ascx` Kullanıcı denetiminin bu işlevselliği sağladığını hatırlayın.</span><span class="sxs-lookup"><span data-stu-id="87b0d-127">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="87b0d-128">Bu nedenle, bu kullanıcı denetimini Çözüm Gezgini sayfa s Tasarım görünümü üzerine sürükleyerek `Default.aspx` ekleyin.</span><span class="sxs-lookup"><span data-stu-id="87b0d-128">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>

<span data-ttu-id="87b0d-129">[SectionLevelTutorialListing. ascx Kullanıcı denetimini default. aspx öğesine eklemek ![](uploading-files-cs/_static/image2.gif)](uploading-files-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="87b0d-129">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](uploading-files-cs/_static/image2.gif)](uploading-files-cs/_static/image1.png)</span></span>

<span data-ttu-id="87b0d-130">**Şekil 2**: `SectionLevelTutorialListing.ascx` kullanıcı denetimini `Default.aspx` ekleyin ([tam boyutlu görüntüyü görüntülemek için tıklayın](uploading-files-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="87b0d-130">**Figure 2**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](uploading-files-cs/_static/image2.png))</span></span>

<span data-ttu-id="87b0d-131">Son olarak, bu sayfaları `Web.sitemap` dosyasına girdi olarak ekleyin.</span><span class="sxs-lookup"><span data-stu-id="87b0d-131">Lastly, add these pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="87b0d-132">Özellikle, GridView 'u geliştirmeyle sonra aşağıdaki biçimlendirmeyi ekleyin `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="87b0d-132">Specifically, add the following markup after the Enhancing the GridView `<siteMapNode>`:</span></span>

[!code-xml[Main](uploading-files-cs/samples/sample1.xml)]

<span data-ttu-id="87b0d-133">`Web.sitemap`güncelleştirildikten sonra Öğreticiler Web sitesini bir tarayıcıdan görüntülemek için bir dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="87b0d-133">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="87b0d-134">Sol taraftaki menüde artık Ikili veri öğreticileri ile çalışma için öğeler yer almaktadır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-134">The menu on the left now includes items for the Working with Binary Data tutorials.</span></span>

![Site Haritası artık Ikili veri öğreticileri ile çalışmaya yönelik girişleri Içerir](uploading-files-cs/_static/image3.gif)

<span data-ttu-id="87b0d-136">**Şekil 3**: site haritası artık Ikili veri öğreticileri ile çalışmaya yönelik girişleri içerir</span><span class="sxs-lookup"><span data-stu-id="87b0d-136">**Figure 3**: The Site Map Now Includes Entries for the Working with Binary Data Tutorials</span></span>

## <a name="step-2-deciding-where-to-store-the-binary-data"></a><span data-ttu-id="87b0d-137">2\. Adım: Ikili verileri nerede depolayacağınıza karar verme</span><span class="sxs-lookup"><span data-stu-id="87b0d-137">Step 2: Deciding Where to Store the Binary Data</span></span>

<span data-ttu-id="87b0d-138">Uygulama veri modeliyle ilişkili ikili veriler iki konumdan birinde depolanabilir: Web sunucusu s dosya sisteminde, veritabanında depolanan dosyaya yönelik bir başvuruya sahip olan. ya da doğrudan veritabanı içinden (bkz. Şekil 4).</span><span class="sxs-lookup"><span data-stu-id="87b0d-138">Binary data that is associated with the application s data model can be stored in one of two places: on the web server s file system with a reference to the file stored in the database; or directly within the database itself (see Figure 4).</span></span> <span data-ttu-id="87b0d-139">Her yaklaşımın kendi profesyonelleri ve olumsuz yönleri vardır ve daha ayrıntılı bir tartışmayı birleşmiştir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-139">Each approach has its own set of pros and cons and merits a more detailed discussion.</span></span>

<span data-ttu-id="87b0d-140">[![Ikili veriler dosya sisteminde veya doğrudan veritabanında depolanabilir](uploading-files-cs/_static/image4.gif)](uploading-files-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="87b0d-140">[![Binary Data Can Be Stored On the File System or Directly in the Database](uploading-files-cs/_static/image4.gif)](uploading-files-cs/_static/image3.png)</span></span>

<span data-ttu-id="87b0d-141">**Şekil 4**: Ikili veriler dosya sisteminde veya doğrudan veritabanında depolanabilir ([tam boyutlu görüntüyü görüntülemek için tıklatın](uploading-files-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="87b0d-141">**Figure 4**: Binary Data Can Be Stored On the File System or Directly in the Database ([Click to view full-size image](uploading-files-cs/_static/image4.png))</span></span>

<span data-ttu-id="87b0d-142">Northwind veritabanını her ürünle bir resmi ilişkilendirmek üzere uzatmak istediğinizi düşünün.</span><span class="sxs-lookup"><span data-stu-id="87b0d-142">Imagine that we wanted to extend the Northwind database to associate a picture with each product.</span></span> <span data-ttu-id="87b0d-143">Tek bir seçenek, bu görüntü dosyalarını Web sunucusu s dosya sisteminde depolamak ve yolu `Products` tablosuna kaydeder.</span><span class="sxs-lookup"><span data-stu-id="87b0d-143">One option would be to store these image files on the web server s file system and record the path in the `Products` table.</span></span> <span data-ttu-id="87b0d-144">Bu yaklaşımda, belki `varchar(200)`türünde `Products` tabloya bir `ImagePath` sütunu ekleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="87b0d-144">With this approach, we d add an `ImagePath` column to the `Products` table of type `varchar(200)`, perhaps.</span></span> <span data-ttu-id="87b0d-145">Kullanıcı Chai için bir resim yüklediğini, bu resim `~/Images/Tea.jpg`adresindeki Web sunucusu s dosya sisteminde depolanabilir; burada `~`, uygulamanın fiziksel yolunu temsil eder.</span><span class="sxs-lookup"><span data-stu-id="87b0d-145">When a user uploaded a picture for Chai, that picture might be stored on the web server s file system at `~/Images/Tea.jpg`, where `~` represents the application s physical path.</span></span> <span data-ttu-id="87b0d-146">Diğer bir deyişle, Web sitesinin kökü fiziksel yolda `C:\Websites\Northwind\`, `~/Images/Tea.jpg` `C:\Websites\Northwind\Images\Tea.jpg`eşdeğerdir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-146">That is, if the web site is rooted at the physical path `C:\Websites\Northwind\`, `~/Images/Tea.jpg` would be equivalent to `C:\Websites\Northwind\Images\Tea.jpg`.</span></span> <span data-ttu-id="87b0d-147">Resim dosyasını karşıya yükledikten sonra, `Products` tablosundaki Chai kaydını, `ImagePath` sütununun yeni görüntünün yolunu başvurduğu şekilde güncelleştirdik.</span><span class="sxs-lookup"><span data-stu-id="87b0d-147">After uploading the image file, we d update the Chai record in the `Products` table so that its `ImagePath` column referenced the path of the new image.</span></span> <span data-ttu-id="87b0d-148">Tüm ürün görüntülerinin uygulama s `Images` klasörüne yerleştirilmesi gerektiğine karar verdiğimiz durumlarda `~/Images/Tea.jpg` veya yalnızca `Tea.jpg` kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="87b0d-148">We could use `~/Images/Tea.jpg` or just `Tea.jpg` if we decided that all product images would be placed in the application s `Images` folder.</span></span>

<span data-ttu-id="87b0d-149">İkili verileri dosya sisteminde depolamanın başlıca avantajları şunlardır:</span><span class="sxs-lookup"><span data-stu-id="87b0d-149">The main advantages of storing the binary data on the file system are:</span></span>

- <span data-ttu-id="87b0d-150">Kısa süre içinde, doğrudan veritabanı içinde depolanan ikili verilerin depolanması ve alınması, dosya sistemi aracılığıyla verilerle çalışırken biraz daha fazla kod içerir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-150">**Ease of implementation** as we'll see shortly, storing and retrieving binary data stored directly within the database involves a bit more code than when working with data through the file system.</span></span> <span data-ttu-id="87b0d-151">Ayrıca, bir kullanıcının ikili verileri görüntülemesi veya indirmesi için bu verilere yönelik bir URL ile sunulmaları gerekir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-151">Additionally, in order for a user to view or download binary data they must be presented with a URL to that data.</span></span> <span data-ttu-id="87b0d-152">Veriler Web sunucusu s dosya sisteminde bulunuyorsa, URL basittir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-152">If the data resides on the web server s file system, the URL is straightforward.</span></span> <span data-ttu-id="87b0d-153">Ancak veriler veritabanında depolanıyorsa, verileri alacak ve veritabanından döndürecek bir Web sayfasının oluşturulması gerekir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-153">If the data is stored in the database, however, a web page needs to be created that will retrieve and return the data from the database.</span></span>
- <span data-ttu-id="87b0d-154">**İkili verilere daha fazla erişme** ikili verilere, verileri veritabanından çekmeyecek diğer hizmetler veya uygulamalar için erişilebilir olması gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-154">**Wider access to the binary data** the binary data may need to be accessible to other services or applications, ones that cannot pull the data from the database.</span></span> <span data-ttu-id="87b0d-155">Örneğin, her ürünle ilişkili görüntülerin de [FTP](http://en.wikipedia.org/wiki/File_Transfer_Protocol)aracılığıyla kullanıcılara açık olması gerekebilir, bu durumda ikili verileri dosya sisteminde depolamak istiyoruz.</span><span class="sxs-lookup"><span data-stu-id="87b0d-155">For example, the images associated with each product might also need to be available to users through [FTP](http://en.wikipedia.org/wiki/File_Transfer_Protocol), in which case we d want to store the binary data on the file system.</span></span>
- <span data-ttu-id="87b0d-156">**Performans** ikili veriler dosya sisteminde depolanıyorsa, veritabanı sunucusu ve Web sunucusu arasındaki talep ve ağ tıkanıklığı, ikili veriler doğrudan veritabanı içinde depolanacaksa küçüktür.</span><span class="sxs-lookup"><span data-stu-id="87b0d-156">**Performance** if the binary data is stored on the file system, the demand and network congestion between the database server and web server will be less than if the binary data is stored directly within the database.</span></span>

<span data-ttu-id="87b0d-157">İkili verileri dosya sisteminde depolamanın temel dezavantajı, verileri veritabanından ayırmasıdır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-157">The main disadvantage of storing binary data on the file system is that it decouples the data from the database.</span></span> <span data-ttu-id="87b0d-158">`Products` tablosundan bir kayıt silinirse, Web sunucusu s dosya sistemindeki ilişkili dosya otomatik olarak silinmez.</span><span class="sxs-lookup"><span data-stu-id="87b0d-158">If a record is deleted from the `Products` table, the associated file on the web server s file system is not automatically deleted.</span></span> <span data-ttu-id="87b0d-159">Dosyayı silmek için ek kod yazdık veya dosya sistemi kullanılmayan, yalnız bırakılmış dosyalarla karışık olacak.</span><span class="sxs-lookup"><span data-stu-id="87b0d-159">We must write extra code to delete the file or the file system will become cluttered with unused, orphaned files.</span></span> <span data-ttu-id="87b0d-160">Ayrıca, veritabanını yedeklerken, ilişkili ikili verilerin yedeklerini de dosya sisteminde gerçekleştirdiğinizden emin olmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-160">Furthermore, when backing up the database, we must make sure to make backups of the associated binary data on the file system, as well.</span></span> <span data-ttu-id="87b0d-161">Veritabanını başka bir siteye veya sunucuya taşımak benzer sorunlar doğurur.</span><span class="sxs-lookup"><span data-stu-id="87b0d-161">Moving the database to another site or server poses similar challenges.</span></span>

<span data-ttu-id="87b0d-162">Alternatif olarak, ikili veriler `varbinary`türünde bir sütun oluşturarak doğrudan bir Microsoft SQL Server 2005 veritabanında depolanabilir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-162">Alternatively, binary data can be stored directly in a Microsoft SQL Server 2005 database by creating a column of type `varbinary`.</span></span> <span data-ttu-id="87b0d-163">Diğer değişken uzunluklu veri türleriyle benzer şekilde, bu sütunda tutulabilecek ikili verilerin maksimum uzunluğunu belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="87b0d-163">Like with other variable length data types, you can specify a maximum length of the binary data that can be held in this column.</span></span> <span data-ttu-id="87b0d-164">Örneğin, en fazla 5.000 bayt ayırmak için `varbinary(5000)`; `varbinary(MAX)`, en fazla 2 GB depolama boyutuna izin verir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-164">For example, to reserve at most 5,000 bytes use `varbinary(5000)`; `varbinary(MAX)` allows for the maximum storage size, about 2 GB.</span></span>

<span data-ttu-id="87b0d-165">İkili verileri doğrudan veritabanında depolamanın ana avantajı, ikili veriler ve veritabanı kaydı arasında sıkı bir şekilde yapılır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-165">The main advantage of storing binary data directly in the database is the tight coupling between the binary data and the database record.</span></span> <span data-ttu-id="87b0d-166">Bu, yedeklemeler veya veritabanını farklı bir siteye veya sunucuya taşıma gibi veritabanı yönetim görevlerini büyük ölçüde basitleştirir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-166">This greatly simplifies database administration tasks, like backups or moving the database to a different site or server.</span></span> <span data-ttu-id="87b0d-167">Ayrıca, bir kaydın silinmesi karşılık gelen ikili verileri otomatik olarak siler.</span><span class="sxs-lookup"><span data-stu-id="87b0d-167">Also, deleting a record automatically deletes the corresponding binary data.</span></span> <span data-ttu-id="87b0d-168">Ayrıca, ikili verileri veritabanında depolamanın daha hafif avantajları da vardır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-168">There are also more subtle benefits of storing the binary data in the database.</span></span> <span data-ttu-id="87b0d-169">Daha ayrıntılı bir tartışma için bkz. [ASP.NET 2,0 kullanarak Ikili dosyaları doğrudan veritabanında depolama](http://aspnet.4guysfromrolla.com/articles/120606-1.aspx) .</span><span class="sxs-lookup"><span data-stu-id="87b0d-169">See [Storing Binary Files Directly in the Database Using ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/120606-1.aspx) for a more in-depth discussion.</span></span>

> [!NOTE]
> <span data-ttu-id="87b0d-170">Microsoft SQL Server 2000 ve önceki sürümlerde, `varbinary` veri türü en fazla 8.000 bayt sınırına sahipti.</span><span class="sxs-lookup"><span data-stu-id="87b0d-170">In Microsoft SQL Server 2000 and earlier versions, the `varbinary` data type had a maximum limit of 8,000 bytes.</span></span> <span data-ttu-id="87b0d-171">2 GB 'a kadar ikili veri depolamak için, bunun yerine [`image` veri türünün](https://msdn.microsoft.com/library/ms187993.aspx) kullanılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-171">To store up to 2 GB of binary data the [`image` data type](https://msdn.microsoft.com/library/ms187993.aspx) needs to be used instead.</span></span> <span data-ttu-id="87b0d-172">Ancak `MAX` SQL Server 2005 ' deki eklenmesiyle `image` veri türü kullanım dışı bırakılmıştır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-172">With the addition of `MAX` in SQL Server 2005, however, the `image` data type has been deprecated.</span></span> <span data-ttu-id="87b0d-173">Geriye dönük uyumluluk için hala desteklenmektedir, ancak Microsoft, `image` veri türünün gelecekte SQL Server bir sürümünde kaldırılacağını duyurmuştur.</span><span class="sxs-lookup"><span data-stu-id="87b0d-173">It s still supported for backwards compatibility, but Microsoft has announced that the `image` data type will be removed in a future version of SQL Server.</span></span>

<span data-ttu-id="87b0d-174">Daha eski bir veri modeliyle çalışıyorsanız `image` veri türünü görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="87b0d-174">If you are working with an older data model you may see the `image` data type.</span></span> <span data-ttu-id="87b0d-175">Northwind veritabanı `Categories` tablosu, kategori için bir görüntü dosyasının ikili verilerini depolamak için kullanılabilecek bir `Picture` sütununa sahiptir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-175">The Northwind database s `Categories` table has a `Picture` column that can be used to store the binary data of an image file for the category.</span></span> <span data-ttu-id="87b0d-176">Northwind veritabanının Microsoft Access ve daha önceki SQL Server sürümlerindeki köklerine sahip olduğundan, bu sütun `image`türündedir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-176">Since the Northwind database has its roots in Microsoft Access and earlier versions of SQL Server, this column is of type `image`.</span></span>

<span data-ttu-id="87b0d-177">Bu öğretici ve sonraki üç yaklaşım için her iki yaklaşımı de kullanacağız.</span><span class="sxs-lookup"><span data-stu-id="87b0d-177">For this tutorial and the next three, we'll use both approaches.</span></span> <span data-ttu-id="87b0d-178">`Categories` tabloda, kategori için bir görüntünün ikili içeriğini depolamak üzere bir `Picture` sütunu zaten var.</span><span class="sxs-lookup"><span data-stu-id="87b0d-178">The `Categories` table already has a `Picture` column for storing the binary content of an image for the category.</span></span> <span data-ttu-id="87b0d-179">Kategoriye bir yazdırma kalitesi, şık bir genel bakış sağlamak için kullanılabilen Web sunucusu s dosya sisteminde bir PDF 'nin yolunu depolamak üzere `BrochurePath`ek bir sütun ekleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="87b0d-179">We'll add an additional column, `BrochurePath`, to store a path to a PDF on the web server s file system that can be used to provide a print-quality, polished overview of the category.</span></span>

## <a name="step-3-adding-thebrochurepathcolumn-to-thecategoriestable"></a><span data-ttu-id="87b0d-180">Adım 3:`Categories`tabloya`BrochurePath`sütununu ekleme</span><span class="sxs-lookup"><span data-stu-id="87b0d-180">Step 3: Adding the`BrochurePath`Column to the`Categories`Table</span></span>

<span data-ttu-id="87b0d-181">Şu anda Kategoriler tablosu yalnızca dört sütuna sahiptir: `CategoryID`, `CategoryName`, `Description`ve `Picture`.</span><span class="sxs-lookup"><span data-stu-id="87b0d-181">Currently the Categories table has only four columns: `CategoryID`, `CategoryName`, `Description`, and `Picture`.</span></span> <span data-ttu-id="87b0d-182">Bu alanlara ek olarak, (varsa) kategori broşürleri işaret edecek yeni bir tane eklememiz gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="87b0d-182">In addition to these fields, we need to add a new one that will point to the category s brochure (if one exists).</span></span> <span data-ttu-id="87b0d-183">Bu sütunu eklemek için Sunucu Gezgini gidin, tablolarda ayrıntıya gidin, `Categories` tablosuna sağ tıklayın ve tablo tanımını aç ' ı seçin (bkz. Şekil 5).</span><span class="sxs-lookup"><span data-stu-id="87b0d-183">To add this column, go to the Server Explorer, drill down into the Tables, right-click on the `Categories` table and choose Open Table Definition (see Figure 5).</span></span> <span data-ttu-id="87b0d-184">Sunucu Gezgini görmüyorsanız, Görünüm menüsünden Sunucu Gezgini seçeneğini seçerek veya CTRL + ALT + S tuşlarına basın.</span><span class="sxs-lookup"><span data-stu-id="87b0d-184">If you do not see the Server Explorer, bring it up by selecting the Server Explorer option from the View menu, or hit Ctrl+Alt+S.</span></span>

<span data-ttu-id="87b0d-185">`BrochurePath` adlı `Categories` tabloya yeni bir `varchar(200)` sütunu ekleyin ve `NULL` s 'ye izin verir ve kaydet simgesine tıklayın (veya CTRL + S tuşlarına basın).</span><span class="sxs-lookup"><span data-stu-id="87b0d-185">Add a new `varchar(200)` column to the `Categories` table that is named `BrochurePath` and allows `NULL` s and click the Save icon (or hit Ctrl+S).</span></span>

<span data-ttu-id="87b0d-186">[Kategoriler tablosuna bir BrochurePath sütunu eklemek ![](uploading-files-cs/_static/image5.gif)](uploading-files-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="87b0d-186">[![Add a BrochurePath Column to the Categories Table](uploading-files-cs/_static/image5.gif)](uploading-files-cs/_static/image5.png)</span></span>

<span data-ttu-id="87b0d-187">**Şekil 5**: `Categories` tablosuna bir `BrochurePath` sütunu ekleme ([tam boyutlu görüntüyü görüntülemek için tıklayın](uploading-files-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="87b0d-187">**Figure 5**: Add a `BrochurePath` Column to the `Categories` Table ([Click to view full-size image](uploading-files-cs/_static/image6.png))</span></span>

## <a name="step-4-updating-the-architecture-to-use-thepictureandbrochurepathcolumns"></a><span data-ttu-id="87b0d-188">4\. Adım: mimariyi`Picture`ve`BrochurePath`sütunları kullanacak şekilde güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="87b0d-188">Step 4: Updating the Architecture to Use the`Picture`and`BrochurePath`Columns</span></span>

<span data-ttu-id="87b0d-189">Veri erişim katmanındaki (DAL) `CategoriesDataTable` Şu anda dört `DataColumn` s tanımlı: `CategoryID`, `CategoryName`, `Description`ve `NumberOfProducts`.</span><span class="sxs-lookup"><span data-stu-id="87b0d-189">The `CategoriesDataTable` in the Data Access Layer (DAL) currently has four `DataColumn` s defined: `CategoryID`, `CategoryName`, `Description`, and `NumberOfProducts`.</span></span> <span data-ttu-id="87b0d-190">[Veri erişim katmanı oluşturma](../introduction/creating-a-data-access-layer-cs.md) öğreticisinde başlangıçta bu DataTable 'ı tasarladığımızda, `CategoriesDataTable` yalnızca ilk üç sütun içeriyordu; `NumberOfProducts` sütunu, [Ayrıntılar DataList öğreticisi Ile madde Işaretli ana kayıt listesi kullanılarak ana/ayrıntıya](../filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md) eklenmiştir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-190">When we originally designed this DataTable in the [Creating a Data Access Layer](../introduction/creating-a-data-access-layer-cs.md) tutorial, the `CategoriesDataTable` only had the first three columns; the `NumberOfProducts` column was added in the [Master/Detail Using a Bulleted List of Master Records with a Details DataList](../filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md) tutorial.</span></span>

<span data-ttu-id="87b0d-191">*Veri erişim katmanı oluşturma*bölümünde açıklandığı gibi, yazılan veri kümesindeki DataTable iş nesnelerini oluşturur.</span><span class="sxs-lookup"><span data-stu-id="87b0d-191">As discussed in *Creating a Data Access Layer*, the DataTables in the Typed DataSet make up the business objects.</span></span> <span data-ttu-id="87b0d-192">TableAdapters, veritabanıyla iletişim kurmaktan ve iş nesnelerinin sorgu sonuçlarıyla doldurulmasından sorumludur.</span><span class="sxs-lookup"><span data-stu-id="87b0d-192">The TableAdapters are responsible for communicating with the database and populating the business objects with the query results.</span></span> <span data-ttu-id="87b0d-193">`CategoriesDataTable`, üç veri alma yöntemine sahip olan `CategoriesTableAdapter`doldurulur:</span><span class="sxs-lookup"><span data-stu-id="87b0d-193">The `CategoriesDataTable` is populated by the `CategoriesTableAdapter`, which has three data retrieval methods:</span></span>

- <span data-ttu-id="87b0d-194">`GetCategories()` TableAdapter s ana sorgusunu yürütür ve `Categories` tablosundaki tüm kayıtların `CategoryID`, `CategoryName`ve `Description` alanlarını döndürür.</span><span class="sxs-lookup"><span data-stu-id="87b0d-194">`GetCategories()` executes the TableAdapter s main query and returns the `CategoryID`, `CategoryName`, and `Description` fields of all records in the `Categories` table.</span></span> <span data-ttu-id="87b0d-195">Ana sorgu, otomatik olarak oluşturulan `Insert` ve `Update` yöntemleri tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-195">The main query is what is used by the auto-generated `Insert` and `Update` methods.</span></span>
- <span data-ttu-id="87b0d-196">`GetCategoryByCategoryID(categoryID)`, `CategoryID` eşit *CategoryID*değerine sahip kategorinin `CategoryID`, `CategoryName`ve `Description` alanlarını döndürür.</span><span class="sxs-lookup"><span data-stu-id="87b0d-196">`GetCategoryByCategoryID(categoryID)` returns the `CategoryID`, `CategoryName`, and `Description` fields of the category whose `CategoryID` equals *categoryID*.</span></span>
- <span data-ttu-id="87b0d-197">`GetCategoriesAndNumberOfProducts()`-`Categories` tablosundaki tüm kayıtlar için `CategoryID`, `CategoryName`ve `Description` alanlarını döndürür.</span><span class="sxs-lookup"><span data-stu-id="87b0d-197">`GetCategoriesAndNumberOfProducts()` - returns the `CategoryID`, `CategoryName`, and `Description` fields for all records in the `Categories` table.</span></span> <span data-ttu-id="87b0d-198">Ayrıca, her bir kategoriyle ilişkili ürün sayısını döndürmek için bir alt sorgu kullanır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-198">Also uses a subquery to return the number of products associated with each category.</span></span>

<span data-ttu-id="87b0d-199">Bu sorguların hiçbirinin `Categories` tablo s `Picture` veya `BrochurePath` sütunları döndürmediğine dikkat edin; `CategoriesDataTable` bu alanlar için `DataColumn` s de sağlar.</span><span class="sxs-lookup"><span data-stu-id="87b0d-199">Notice that none of these queries return the `Categories` table s `Picture` or `BrochurePath` columns; nor does the `CategoriesDataTable` provide `DataColumn` s for these fields.</span></span> <span data-ttu-id="87b0d-200">Resim ve `BrochurePath` özellikleriyle çalışmak için, önce bunları `CategoriesDataTable` eklemeli ve ardından `CategoriesTableAdapter` sınıfını bu sütunları döndürecek şekilde güncelleştirmemiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-200">In order to work with the Picture and `BrochurePath` properties, we need to first add them to the `CategoriesDataTable` and then update the `CategoriesTableAdapter` class to return these columns.</span></span>

## <a name="adding-thepictureandbrochurepathdatacolumn-s"></a><span data-ttu-id="87b0d-201">`Picture`ve`BrochurePath``DataColumn` s ekleme</span><span class="sxs-lookup"><span data-stu-id="87b0d-201">Adding the`Picture`and`BrochurePath``DataColumn` s</span></span>

<span data-ttu-id="87b0d-202">Bu iki sütunu `CategoriesDataTable`ekleyerek başlayın.</span><span class="sxs-lookup"><span data-stu-id="87b0d-202">Start by adding these two columns to the `CategoriesDataTable`.</span></span> <span data-ttu-id="87b0d-203">`CategoriesDataTable` s üstbilgisine sağ tıklayın, bağlam menüsünden Ekle ' yi seçin ve ardından sütun seçeneğini belirleyin.</span><span class="sxs-lookup"><span data-stu-id="87b0d-203">Right-click on the `CategoriesDataTable` s header, select Add from the context menu and then choose the Column option.</span></span> <span data-ttu-id="87b0d-204">Bu, DataTable dosyasında `Column1`adlı yeni bir `DataColumn` oluşturur.</span><span class="sxs-lookup"><span data-stu-id="87b0d-204">This will create a new `DataColumn` in the DataTable named `Column1`.</span></span> <span data-ttu-id="87b0d-205">Bu sütunu `Picture`olarak yeniden adlandırın.</span><span class="sxs-lookup"><span data-stu-id="87b0d-205">Rename this column to `Picture`.</span></span> <span data-ttu-id="87b0d-206">Özellikler penceresi, `DataColumn` s `DataType` özelliğini `System.Byte[]` olarak ayarlayın (Bu, açılan listede bir seçenek değildir; içine yazmanız gerekir).</span><span class="sxs-lookup"><span data-stu-id="87b0d-206">From the Properties window, set the `DataColumn` s `DataType` property to `System.Byte[]` (this is not an option in the drop-down list; you need to type it in).</span></span>

<span data-ttu-id="87b0d-207">[![veri türü System. Byte [] olan bir DataColumn adlı resim oluşturma](uploading-files-cs/_static/image6.gif)](uploading-files-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="87b0d-207">[![Create a DataColumn Named Picture whose DataType is System.Byte[]](uploading-files-cs/_static/image6.gif)](uploading-files-cs/_static/image7.png)</span></span>

<span data-ttu-id="87b0d-208">**Şekil 6**: `DataType` `System.Byte[]` olan `Picture` adlı `DataColumn` oluşturma ([tam boyutlu görüntüyü görüntülemek için tıklayın](uploading-files-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="87b0d-208">**Figure 6**: Create a `DataColumn` Named `Picture` whose `DataType` is `System.Byte[]` ([Click to view full-size image](uploading-files-cs/_static/image8.png))</span></span>

<span data-ttu-id="87b0d-209">DataTable 'a başka bir `DataColumn` ekleyin, `BrochurePath` varsayılan `DataType` değeri (`System.String`) kullanarak adlandırarak.</span><span class="sxs-lookup"><span data-stu-id="87b0d-209">Add another `DataColumn` to the DataTable, naming it `BrochurePath` using the default `DataType` value (`System.String`).</span></span>

## <a name="returning-thepictureandbrochurepathvalues-from-the-tableadapter"></a><span data-ttu-id="87b0d-210">TableAdapter 'tan`Picture`ve`BrochurePath`değerlerini döndürme</span><span class="sxs-lookup"><span data-stu-id="87b0d-210">Returning the`Picture`and`BrochurePath`Values from the TableAdapter</span></span>

<span data-ttu-id="87b0d-211">Bu iki `DataColumn` `CategoriesDataTable`eklenmiş olan `CategoriesTableAdapter`güncelleştirilmeye yeniden hazırlandık.</span><span class="sxs-lookup"><span data-stu-id="87b0d-211">With these two `DataColumn` s added to the `CategoriesDataTable`, we re ready to update the `CategoriesTableAdapter`.</span></span> <span data-ttu-id="87b0d-212">Bu sütun değerlerinin her ikisi de ana TableAdapter sorgusunda döndürüyoruz, ancak `GetCategories()` yöntemi her çağrıldığında ikili verileri geri getirecek.</span><span class="sxs-lookup"><span data-stu-id="87b0d-212">We could have both of these column values returned in the main TableAdapter query, but this would bring back the binary data every time the `GetCategories()` method was invoked.</span></span> <span data-ttu-id="87b0d-213">Bunun yerine, bir ana TableAdapter sorgusunu `BrochurePath` geri getirip, belirli bir kategorinin `Picture` sütununu döndüren ek bir veri alma yöntemi oluşturacak şekilde güncelleştirmesine izin verin.</span><span class="sxs-lookup"><span data-stu-id="87b0d-213">Instead, let s update the main TableAdapter query to bring back `BrochurePath` and create an additional data retrieval method that returns a particular category s `Picture` column.</span></span>

<span data-ttu-id="87b0d-214">Ana TableAdapter sorgusunu güncelleştirmek için `CategoriesTableAdapter` s üstbilgisine sağ tıklayın ve bağlam menüsünden Yapılandır seçeneğini belirleyin.</span><span class="sxs-lookup"><span data-stu-id="87b0d-214">To update the main TableAdapter query, right-click on the `CategoriesTableAdapter` s header and choose the Configure option from the context menu.</span></span> <span data-ttu-id="87b0d-215">Bu, bir dizi geçmiş öğreticilerde görtiğimiz tablo bağdaştırıcısı yapılandırma sihirbazını getirir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-215">This brings up the Table Adapter Configuration Wizard, which we ve seen in a number of past tutorials.</span></span> <span data-ttu-id="87b0d-216">`BrochurePath` geri getirip son ' a tıklayarak sorguyu güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="87b0d-216">Update the query to bring back the `BrochurePath` and click Finish.</span></span>

<span data-ttu-id="87b0d-217">[![SELECT deyimindeki sütun listesini güncelleştirmek için de BrochurePath döndürün](uploading-files-cs/_static/image7.gif)](uploading-files-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="87b0d-217">[![Update the Column List in the SELECT Statement to Also Return BrochurePath](uploading-files-cs/_static/image7.gif)](uploading-files-cs/_static/image9.png)</span></span>

<span data-ttu-id="87b0d-218">**Şekil 7**: `SELECT` deyimindeki sütun listesini, ayrıca `BrochurePath` döndürmek için güncelleştirin ([tam boyutlu görüntüyü görüntülemek için tıklayın](uploading-files-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="87b0d-218">**Figure 7**: Update the Column List in the `SELECT` Statement to Also Return `BrochurePath` ([Click to view full-size image](uploading-files-cs/_static/image10.png))</span></span>

<span data-ttu-id="87b0d-219">TableAdapter için geçici SQL deyimleri kullanılırken, ana sorgudaki sütun listesini güncelleştirmek TableAdapter içindeki tüm `SELECT` sorgu yöntemlerinin sütun listesini günceller.</span><span class="sxs-lookup"><span data-stu-id="87b0d-219">When using ad-hoc SQL statements for the TableAdapter, updating the column list in the main query updates the column list for all of the `SELECT` query methods in the TableAdapter.</span></span> <span data-ttu-id="87b0d-220">Bu, `GetCategoryByCategoryID(categoryID)` yönteminin `BrochurePath` sütununu döndürecek şekilde güncelleştirildiği anlamına gelir. Bu, amaçlarız olabilir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-220">That means the `GetCategoryByCategoryID(categoryID)` method has been updated to return the `BrochurePath` column, which might be what we intended.</span></span> <span data-ttu-id="87b0d-221">Ancak, her bir kategorinin ürün sayısını döndüren alt sorguyu kaldırarak `GetCategoriesAndNumberOfProducts()` yöntemindeki sütun listesini de güncelleştirirler!</span><span class="sxs-lookup"><span data-stu-id="87b0d-221">However, it also updated the column list in the `GetCategoriesAndNumberOfProducts()` method, removing the subquery that returns the number of products for each category!</span></span> <span data-ttu-id="87b0d-222">Bu nedenle, bu yöntem `SELECT` sorgusunu güncelleştirmemiz gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="87b0d-222">Therefore, we need to update this method s `SELECT` query.</span></span> <span data-ttu-id="87b0d-223">`GetCategoriesAndNumberOfProducts()` yöntemine sağ tıklayın, Yapılandır ' ı seçin ve `SELECT` sorgusunu özgün değerine geri geri alın:</span><span class="sxs-lookup"><span data-stu-id="87b0d-223">Right-click on the `GetCategoriesAndNumberOfProducts()` method, choose Configure, and revert the `SELECT` query back to its original value:</span></span>

[!code-sql[Main](uploading-files-cs/samples/sample2.sql)]

<span data-ttu-id="87b0d-224">Sonra, belirli bir kategori `Picture` sütun değeri döndüren yeni bir TableAdapter yöntemi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="87b0d-224">Next, create a new TableAdapter method that returns a particular category s `Picture` column value.</span></span> <span data-ttu-id="87b0d-225">`CategoriesTableAdapter` s üstbilgisine sağ tıklayın ve TableAdapter sorgu Yapılandırma Sihirbazı 'nı başlatmak için Sorgu Ekle seçeneğini belirleyin.</span><span class="sxs-lookup"><span data-stu-id="87b0d-225">Right-click on the `CategoriesTableAdapter` s header and choose the Add Query option to launch the TableAdapter Query Configuration Wizard.</span></span> <span data-ttu-id="87b0d-226">Bu sihirbazın ilk adımı, verileri geçici bir SQL ifadesini, yeni bir saklı yordamı veya var olan bir SQL ifadesini kullanarak sorgulamak isteyip istemediğinizi sorar.</span><span class="sxs-lookup"><span data-stu-id="87b0d-226">The first step of this wizard asks us if we want to query data using an ad-hoc SQL statement, a new stored procedure, or an existing one.</span></span> <span data-ttu-id="87b0d-227">SQL deyimlerini kullan ' ı seçin ve Ileri ' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="87b0d-227">Select Use SQL statements and click Next.</span></span> <span data-ttu-id="87b0d-228">Bir satır döndüyoruz, ikinci adımda satırları döndüren Seç seçeneğini belirleyin.</span><span class="sxs-lookup"><span data-stu-id="87b0d-228">Since we will be returning a row, choose the SELECT which returns rows option from the second step.</span></span>

<span data-ttu-id="87b0d-229">[![SQL deyimlerini kullan seçeneğini belirleyin](uploading-files-cs/_static/image8.gif)](uploading-files-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="87b0d-229">[![Select the Use SQL statements Option](uploading-files-cs/_static/image8.gif)](uploading-files-cs/_static/image11.png)</span></span>

<span data-ttu-id="87b0d-230">**Şekil 8**: SQL deyimlerini kullan seçeneğini belirleyin ([tam boyutlu görüntüyü görüntülemek için tıklayın](uploading-files-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="87b0d-230">**Figure 8**: Select the Use SQL statements Option ([Click to view full-size image](uploading-files-cs/_static/image12.png))</span></span>

<span data-ttu-id="87b0d-231">[Sorgu Kategoriler tablosundan bir kayıt döndürdüğünden ![, satırları döndüren Seç ' i seçin](uploading-files-cs/_static/image9.gif)](uploading-files-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="87b0d-231">[![Since the Query Will Return a Record from the Categories Table, Choose SELECT which returns rows](uploading-files-cs/_static/image9.gif)](uploading-files-cs/_static/image13.png)</span></span>

<span data-ttu-id="87b0d-232">**Şekil 9**: sorgu Kategoriler tablosundan bir kayıt döndürecek olduğundan, satırları döndüren Seç[' i seçin (tam boyutlu görüntüyü görüntülemek için tıklayın](uploading-files-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="87b0d-232">**Figure 9**: Since the Query Will Return a Record from the Categories Table, Choose SELECT which returns rows ([Click to view full-size image](uploading-files-cs/_static/image14.png))</span></span>

<span data-ttu-id="87b0d-233">Üçüncü adımda, aşağıdaki SQL sorgusunu girin ve Ileri ' ye tıklayın:</span><span class="sxs-lookup"><span data-stu-id="87b0d-233">In the third step, enter the following SQL query and click Next:</span></span>

[!code-sql[Main](uploading-files-cs/samples/sample3.sql)]

<span data-ttu-id="87b0d-234">Son adım, yeni yöntemin adını seçdir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-234">The last step is to choose the name for the new method.</span></span> <span data-ttu-id="87b0d-235">DataTable Fill ve sırasıyla bir DataTable desenleri döndüren `FillCategoryWithBinaryDataByCategoryID` ve `GetCategoryWithBinaryDataByCategoryID` kullanın.</span><span class="sxs-lookup"><span data-stu-id="87b0d-235">Use `FillCategoryWithBinaryDataByCategoryID` and `GetCategoryWithBinaryDataByCategoryID` for the Fill a DataTable and Return a DataTable patterns, respectively.</span></span> <span data-ttu-id="87b0d-236">Sihirbazı tamamladığınızda son ' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="87b0d-236">Click Finish to complete the wizard.</span></span>

<span data-ttu-id="87b0d-237">[TableAdapter s yöntemlerinin adlarını seçin ![](uploading-files-cs/_static/image10.gif)](uploading-files-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="87b0d-237">[![Choose the Names for the TableAdapter s Methods](uploading-files-cs/_static/image10.gif)](uploading-files-cs/_static/image15.png)</span></span>

<span data-ttu-id="87b0d-238">**Şekil 10**: TableAdapter s metotları için adları seçin ([tam boyutlu görüntüyü görüntülemek için tıklayın](uploading-files-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="87b0d-238">**Figure 10**: Choose the Names for the TableAdapter s Methods ([Click to view full-size image](uploading-files-cs/_static/image16.png))</span></span>

> [!NOTE]
> <span data-ttu-id="87b0d-239">Tablo bağdaştırıcısı sorgu Yapılandırma Sihirbazı 'Nı tamamladıktan sonra, yeni komut metninin, ana sorgunun şemasından farklı bir şemaya sahip verileri döndürdüğünü bildiren bir iletişim kutusu görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="87b0d-239">After completing the Table Adapter Query Configuration Wizard you may see a dialog box informing you that the new command text returns data with schema different from the schema of the main query.</span></span> <span data-ttu-id="87b0d-240">Kısaca, sihirbaz TableAdapter ana sorgusunun `GetCategories()` yeni oluşturduğumuz olandan farklı bir şema döndürdüğünden emin olur.</span><span class="sxs-lookup"><span data-stu-id="87b0d-240">In short, the wizard is noting that the TableAdapter s main query `GetCategories()` returns a different schema than the one we just created.</span></span> <span data-ttu-id="87b0d-241">Ancak bu durum, bu iletiyi yoksayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="87b0d-241">But this is what we want, so you can disregard this message.</span></span>

<span data-ttu-id="87b0d-242">Ayrıca, geçici SQL deyimlerini kullanıyorsanız ve daha sonra TableAdapter s ana sorgusunu değiştirmek için Sihirbazı kullanırsanız, `GetCategoryWithBinaryDataByCategoryID` yöntemi `SELECT` deyim listesini ana sorgudan yalnızca bu sütunları içerecek şekilde değiştirecek (yani `Picture` sütununu sorgudan kaldıracak) göz önünde bulundurmanız gerekir.)</span><span class="sxs-lookup"><span data-stu-id="87b0d-242">Also, keep in mind that if you are using ad-hoc SQL statements and use the wizard to change the TableAdapter s main query at some later point in time, it will modify the `GetCategoryWithBinaryDataByCategoryID` method s `SELECT` statement s column list to include just those columns from the main query (that is, it will remove the `Picture` column from the query).</span></span> <span data-ttu-id="87b0d-243">Bu adımda daha önce `GetCategoriesAndNumberOfProducts()` yöntemi ile yaptığımız gibi `Picture` sütununu döndürecek şekilde sütun listesini el ile güncelleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-243">You will have to manually update the column list to return the `Picture` column, similar to what we did with the `GetCategoriesAndNumberOfProducts()` method earlier in this step.</span></span>

<span data-ttu-id="87b0d-244">İki `DataColumn` `CategoriesDataTable` ve `GetCategoryWithBinaryDataByCategoryID` `CategoriesTableAdapter`yöntemine eklendikten sonra, yazılan veri kümesi tasarımcısında bu sınıfların Şekil 11 ' de ekran görüntüsü gibi görünmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-244">After adding the two `DataColumn` s to the `CategoriesDataTable` and the `GetCategoryWithBinaryDataByCategoryID` method to the `CategoriesTableAdapter`, these classes in the Typed DataSet Designer should look like the screenshot in Figure 11.</span></span>

![Veri kümesi Tasarımcısı yeni sütunları ve yöntemi Içerir](uploading-files-cs/_static/image11.gif)

<span data-ttu-id="87b0d-246">**Şekil 11**: veri kümesi Tasarımcısı yeni sütunları ve yöntemi içerir</span><span class="sxs-lookup"><span data-stu-id="87b0d-246">**Figure 11**: The DataSet Designer Includes the New Columns and Method</span></span>

## <a name="updating-the-business-logic-layer-bll"></a><span data-ttu-id="87b0d-247">Iş mantığı katmanını (BLL) güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="87b0d-247">Updating the Business Logic Layer (BLL)</span></span>

<span data-ttu-id="87b0d-248">DAL güncelleştirildiğinden, her şey, yeni `CategoriesTableAdapter` yöntemi için bir yöntem eklemek üzere Iş mantığı katmanını (BLL) artırmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-248">With the DAL updated, all that remains is to augment the Business Logic Layer (BLL) to include a method for the new `CategoriesTableAdapter` method.</span></span> <span data-ttu-id="87b0d-249">`CategoriesBLL` sınıfına aşağıdaki yöntemi ekleyin:</span><span class="sxs-lookup"><span data-stu-id="87b0d-249">Add the following method to the `CategoriesBLL` class:</span></span>

[!code-csharp[Main](uploading-files-cs/samples/sample4.cs)]

## <a name="step-5-uploading-a-file-from-the-client-to-the-web-server"></a><span data-ttu-id="87b0d-250">5\. Adım: Istemciden Web sunucusuna dosya yükleme</span><span class="sxs-lookup"><span data-stu-id="87b0d-250">Step 5: Uploading a File From the Client to the Web Server</span></span>

<span data-ttu-id="87b0d-251">İkili veriler toplanırken, bu veriler Son Kullanıcı tarafından sağlanır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-251">When collecting binary data, oftentimes this data is supplied by an end user.</span></span> <span data-ttu-id="87b0d-252">Bu bilgileri yakalamak için, kullanıcının bilgisayarından Web sunucusuna bir dosya yükleyebilmeleri gerekir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-252">To capture this information, the user needs to be able to upload a file from their computer to the web server.</span></span> <span data-ttu-id="87b0d-253">Karşıya yüklenen verilerin veri modeliyle tümleşik olması gerekir. Bu, dosyayı Web sunucusu s dosya sistemine kaydetmek ve veritabanına dosya yolu eklemek ya da ikili içerikleri doğrudan veritabanına yazmak anlamına gelebilir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-253">The uploaded data then needs to be integrated with the data model, which may mean saving the file to the web server s file system and adding a path to the file in the database, or writing the binary contents directly into the database.</span></span> <span data-ttu-id="87b0d-254">Bu adımda, bir kullanıcının bilgisayarından sunucusuna dosya yüklemesine nasıl izin vereceğiz bölümüne bakacağız.</span><span class="sxs-lookup"><span data-stu-id="87b0d-254">In this step we'll look at how to allow a user to upload files from their computer to the server.</span></span> <span data-ttu-id="87b0d-255">Sonraki öğreticide karşıya yüklenen dosyayı veri modeliyle tümleştirmek için ilgilenmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-255">In the next tutorial we'll turn our attention to integrating the uploaded file with data model.</span></span>

<span data-ttu-id="87b0d-256">ASP.NET 2,0 s New [FileUpload Web Control](https://msdn.microsoft.com/library/ms227677(VS.80).aspx) , kullanıcıların bilgisayarından Web sunucusuna dosya gönderebilmesi için bir mekanizma sağlar.</span><span class="sxs-lookup"><span data-stu-id="87b0d-256">ASP.NET 2.0 s new [FileUpload Web control](https://msdn.microsoft.com/library/ms227677(VS.80).aspx) provides a mechanism for users to send a file from their computer to the web server.</span></span> <span data-ttu-id="87b0d-257">FileUpload denetimi, `type` özniteliği dosya olarak ayarlanan bir `<input>` öğesi olarak işlenir ve bu da tarayıcıların, bir e-posta kutusu olarak bir düğme olarak görüntülenmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="87b0d-257">The FileUpload control renders as an `<input>` element whose `type` attribute is set to file, which browsers display as a textbox with a Browse button.</span></span> <span data-ttu-id="87b0d-258">Tarayıcı düğmesine tıklamak, kullanıcının bir dosya seçmesini sağlayan bir iletişim kutusu açar.</span><span class="sxs-lookup"><span data-stu-id="87b0d-258">Clicking the Browse button brings up a dialog box from which the user can select a file.</span></span> <span data-ttu-id="87b0d-259">Form geri gönderildiğinde, seçili dosya içerikleri geri gönderme ile birlikte gönderilir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-259">When the form is posted back, the selected file s contents are sent along with the postback.</span></span> <span data-ttu-id="87b0d-260">Sunucu tarafında, karşıya yüklenen dosyayla ilgili bilgilere dosya yükleme denetim s özellikleri aracılığıyla erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-260">On the server-side, information about the uploaded file is accessible through the FileUpload control s properties.</span></span>

<span data-ttu-id="87b0d-261">Dosyaları karşıya yükleme işlemini göstermek için, `BinaryData` klasöründeki `FileUpload.aspx` sayfasını açın, araç kutusundan bir dosya yükleme denetimini tasarımcı üzerine sürükleyin ve denetim s `ID` özelliğini `UploadTest`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="87b0d-261">To demonstrate uploading files, open the `FileUpload.aspx` page in the `BinaryData` folder, drag a FileUpload control from the Toolbox onto the Designer, and set the control s `ID` property to `UploadTest`.</span></span> <span data-ttu-id="87b0d-262">Daha sonra, `ID` ve `Text` özelliklerini `UploadButton` ve sırasıyla seçili dosyayı karşıya yüklemek için bir Button Web Control ekleyin.</span><span class="sxs-lookup"><span data-stu-id="87b0d-262">Next, add a Button Web control setting its `ID` and `Text` properties to `UploadButton` and Upload Selected File, respectively.</span></span> <span data-ttu-id="87b0d-263">Son olarak, düğmenin altına bir etiket Web denetimi yerleştirin, `Text` özelliğini temizleyin ve `ID` özelliğini `UploadDetails`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="87b0d-263">Finally, place a Label Web control beneath the Button, clear out its `Text` property and set its `ID` property to `UploadDetails`.</span></span>

<span data-ttu-id="87b0d-264">[ASP.NET sayfasına dosya yükleme denetimi ekleme ![](uploading-files-cs/_static/image12.gif)](uploading-files-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="87b0d-264">[![Add a FileUpload Control to the ASP.NET Page](uploading-files-cs/_static/image12.gif)](uploading-files-cs/_static/image17.png)</span></span>

<span data-ttu-id="87b0d-265">**Şekil 12**: ASP.NET sayfasına bir dosya yükleme denetimi ekleme ([tam boyutlu görüntüyü görüntülemek için tıklayın](uploading-files-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="87b0d-265">**Figure 12**: Add a FileUpload Control to the ASP.NET Page ([Click to view full-size image](uploading-files-cs/_static/image18.png))</span></span>

<span data-ttu-id="87b0d-266">Şekil 13, bir tarayıcı aracılığıyla görüntülenirken bu sayfayı gösterir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-266">Figure 13 shows this page when viewed through a browser.</span></span> <span data-ttu-id="87b0d-267">Göz at düğmesine tıklanması bir dosya seçimi iletişim kutusu gösterir ve kullanıcının bilgisayarından bir dosya seçmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="87b0d-267">Note that clicking the Browse button brings up a file selection dialog box, allowing the user to pick a file from their computer.</span></span> <span data-ttu-id="87b0d-268">Bir dosya seçildikten sonra, seçili dosyayı karşıya yükle düğmesine tıklamak seçili dosyanın ikili içeriğini Web sunucusuna gönderen bir geri göndermeye neden olur.</span><span class="sxs-lookup"><span data-stu-id="87b0d-268">Once a file has been selected, clicking the Upload Selected File button causes a postback that sends the selected file s binary content to the web server.</span></span>

<span data-ttu-id="87b0d-269">[![Kullanıcı, bilgisayarından sunucusuna yüklemek için bir dosya seçebilir](uploading-files-cs/_static/image13.gif)](uploading-files-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="87b0d-269">[![The User Can Select a File to Upload from their Computer to the Server](uploading-files-cs/_static/image13.gif)](uploading-files-cs/_static/image19.png)</span></span>

<span data-ttu-id="87b0d-270">**Şekil 13**: Kullanıcı, bilgisayarından sunucusuna yüklemek Için bir dosya seçebilir ([tam boyutlu görüntüyü görüntülemek için tıklatın](uploading-files-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="87b0d-270">**Figure 13**: The User Can Select a File to Upload from their Computer to the Server ([Click to view full-size image](uploading-files-cs/_static/image20.png))</span></span>

<span data-ttu-id="87b0d-271">Geri göndermede, karşıya yüklenen dosya dosya sistemine kaydedilebilir veya ikili verileri doğrudan bir akış üzerinden çalışabilir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-271">On postback, the uploaded file can be saved to the file system or its binary data can be worked with directly through a Stream.</span></span> <span data-ttu-id="87b0d-272">Bu örnekte, s `~/Brochures` bir klasör oluşturur ve karşıya yüklenen dosyayı buraya kaydeder.</span><span class="sxs-lookup"><span data-stu-id="87b0d-272">For this example, let s create a `~/Brochures` folder and save the uploaded file there.</span></span> <span data-ttu-id="87b0d-273">`Brochures` klasörünü, kök dizinin bir alt klasörü olarak siteye ekleyerek başlayın.</span><span class="sxs-lookup"><span data-stu-id="87b0d-273">Start by adding the `Brochures` folder to the site as a subfolder of the root directory.</span></span> <span data-ttu-id="87b0d-274">Sonra, `UploadButton` s `Click` olayı için bir olay işleyicisi oluşturun ve aşağıdaki kodu ekleyin:</span><span class="sxs-lookup"><span data-stu-id="87b0d-274">Next, create an event handler for the `UploadButton` s `Click` event and add the following code:</span></span>

[!code-csharp[Main](uploading-files-cs/samples/sample5.cs)]

<span data-ttu-id="87b0d-275">Dosya karşıya yükleme denetimi, karşıya yüklenen verilerle çalışmaya yönelik çeşitli özellikler sağlar.</span><span class="sxs-lookup"><span data-stu-id="87b0d-275">The FileUpload control provides a variety of properties for working with the uploaded data.</span></span> <span data-ttu-id="87b0d-276">Örneğin, [`HasFile` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.fileupload.hasfile.aspx) , bir dosyanın Kullanıcı tarafından karşıya yüklenip yüklenmediğini belirtir, ancak [`FileBytes` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.fileupload.filebytes.aspx) , karşıya yüklenen ikili verilere bir bayt dizisi olarak erişim sağlar.</span><span class="sxs-lookup"><span data-stu-id="87b0d-276">For instance, the [`HasFile` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.fileupload.hasfile.aspx) indicates whether a file was uploaded by the user, while the [`FileBytes` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.fileupload.filebytes.aspx) provides access to the uploaded binary data as an array of bytes.</span></span> <span data-ttu-id="87b0d-277">`Click` olay işleyicisi, bir dosyanın karşıya yüklendiğinden emin olarak başlar.</span><span class="sxs-lookup"><span data-stu-id="87b0d-277">The `Click` event handler starts by ensuring that a file has been uploaded.</span></span> <span data-ttu-id="87b0d-278">Bir dosya karşıya yüklenmişse, etiket karşıya yüklenen dosyanın adını, bayt cinsinden boyutunu ve içerik türünü gösterir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-278">If a file has been uploaded, the Label shows the name of the uploaded file, its size in bytes, and its content-type.</span></span>

> [!NOTE]
> <span data-ttu-id="87b0d-279">Kullanıcının bir dosyayı karşıya yüklemediğinden emin olmak için `HasFile` özelliğini denetleyebilir ve `false`bir uyarı görüntüleyebilir veya bunun yerine [RequiredFieldValidator denetimini](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/validation/default.aspx) kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="87b0d-279">To ensure that the user uploads a file you can check the `HasFile` property and display a warning if it s `false`, or you may use the [RequiredFieldValidator control](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/validation/default.aspx) instead.</span></span>

<span data-ttu-id="87b0d-280">Dosya karşıya yükleme `SaveAs(filePath)`, yüklenen dosyayı belirtilen *FilePath*öğesine kaydeder.</span><span class="sxs-lookup"><span data-stu-id="87b0d-280">The FileUpload s `SaveAs(filePath)` saves the uploaded file to the specified *filePath*.</span></span> <span data-ttu-id="87b0d-281">*FilePath* bir *sanal* *yol* (`/Brochures/SomeFile.pdf`) yerine bir *fiziksel yol* (`C:\Websites\Brochures\SomeFile.pdf`) olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-281">*filePath* must be a *physical path* (`C:\Websites\Brochures\SomeFile.pdf`) rather than a *virtual* *path* (`/Brochures/SomeFile.pdf`).</span></span> <span data-ttu-id="87b0d-282">[`Server.MapPath(virtPath)` yöntemi](https://msdn.microsoft.com/library/system.web.httpserverutility.mappath.aspx) bir sanal yol alır ve karşılık gelen fiziksel yolunu döndürür.</span><span class="sxs-lookup"><span data-stu-id="87b0d-282">The [`Server.MapPath(virtPath)` method](https://msdn.microsoft.com/library/system.web.httpserverutility.mappath.aspx) takes a virtual path and returns its corresponding physical path.</span></span> <span data-ttu-id="87b0d-283">Burada, sanal yol `~/Brochures/fileName`, burada *filename* karşıya yüklenen dosyanın adıdır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-283">Here, the virtual path is `~/Brochures/fileName`, where *fileName* is the name of the uploaded file.</span></span> <span data-ttu-id="87b0d-284">Sanal ve fiziksel yollar hakkında daha fazla bilgi edinmek ve `Server.MapPath`kullanmak için bkz. [Server. MapPath kullanma](http://www.4guysfromrolla.com/webtech/121799-1.shtml) .</span><span class="sxs-lookup"><span data-stu-id="87b0d-284">See [Using Server.MapPath](http://www.4guysfromrolla.com/webtech/121799-1.shtml) for more information on virtual and physical paths and using `Server.MapPath`.</span></span>

<span data-ttu-id="87b0d-285">`Click` olay işleyicisini tamamladıktan sonra, sayfayı bir tarayıcıda test etmek biraz zaman ayırın.</span><span class="sxs-lookup"><span data-stu-id="87b0d-285">After completing the `Click` event handler, take a moment to test out the page in a browser.</span></span> <span data-ttu-id="87b0d-286">E-bul düğmesine tıklayın ve sabit sürücünüzden bir dosya seçip seçili dosyayı karşıya yükle düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="87b0d-286">Click the Browse button and select a file from your hard drive and then click the Upload Selected File button.</span></span> <span data-ttu-id="87b0d-287">Geri gönderme, seçili dosyanın içeriğini Web sunucusuna gönderir ve daha sonra `~/Brochures` klasöre kaydedilmeden önce dosya hakkındaki bilgileri görüntüler.</span><span class="sxs-lookup"><span data-stu-id="87b0d-287">The postback will send the contents of the selected file to the web server, which will then display information about the file before saving it to the `~/Brochures` folder.</span></span> <span data-ttu-id="87b0d-288">Dosyayı karşıya yükledikten sonra Visual Studio 'ya dönün ve Çözüm Gezgini Yenile düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="87b0d-288">After uploading the file, return to Visual Studio and click the Refresh button in the Solution Explorer.</span></span> <span data-ttu-id="87b0d-289">Karşıya yüklediğiniz dosyayı ~/broşürler klasörüne görmeniz gerekir!</span><span class="sxs-lookup"><span data-stu-id="87b0d-289">You should see the file you just uploaded in the ~/Brochures folder!</span></span>

<span data-ttu-id="87b0d-290">[![EvolutionValley. jpg dosyası Web sunucusuna yüklendi](uploading-files-cs/_static/image14.gif)](uploading-files-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="87b0d-290">[![The File EvolutionValley.jpg Has Been Uploaded to the Web Server](uploading-files-cs/_static/image14.gif)](uploading-files-cs/_static/image21.png)</span></span>

<span data-ttu-id="87b0d-291">**Şekil 14**: dosya `EvolutionValley.jpg` Web sunucusuna yüklendi ([tam boyutlu görüntüyü görüntülemek için tıklayın](uploading-files-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="87b0d-291">**Figure 14**: The File `EvolutionValley.jpg` Has Been Uploaded to the Web Server ([Click to view full-size image](uploading-files-cs/_static/image22.png))</span></span>

![EvolutionValley. jpg, ~/broşürler klasörüne kaydedildi](uploading-files-cs/_static/image15.gif)

<span data-ttu-id="87b0d-293">**Şekil 15**: `EvolutionValley.jpg` `~/Brochures` klasörüne kaydedildi</span><span class="sxs-lookup"><span data-stu-id="87b0d-293">**Figure 15**: `EvolutionValley.jpg` Was Saved to the `~/Brochures` Folder</span></span>

## <a name="subtleties-with-saving-uploaded-files-to-the-file-system"></a><span data-ttu-id="87b0d-294">Karşıya yüklenen dosyaları dosya sistemine kaydetme ile ilgili alt tlikler</span><span class="sxs-lookup"><span data-stu-id="87b0d-294">Subtleties with Saving Uploaded Files to the File System</span></span>

<span data-ttu-id="87b0d-295">Karşıya yükleme dosyalarını Web sunucusu s dosya sistemine kaydederken değinilmesi gereken birkaç alt parametre vardır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-295">There are several subtleties that must be addressed when saving uploading files to the web server s file system.</span></span> <span data-ttu-id="87b0d-296">İlk olarak, güvenlik sorunu vardır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-296">First, there s the issue of security.</span></span> <span data-ttu-id="87b0d-297">Dosya sistemine bir dosyayı kaydetmek için, ASP.NET sayfasının yürütüldüğü güvenlik bağlamının yazma izinlerine sahip olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-297">To save a file to the file system, the security context under which the ASP.NET page is executing must have Write permissions.</span></span> <span data-ttu-id="87b0d-298">ASP.NET Development Web sunucusu, geçerli kullanıcı hesabınızın bağlamı altında çalışır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-298">The ASP.NET Development Web Server runs under the context of your current user account.</span></span> <span data-ttu-id="87b0d-299">Web sunucusu olarak Microsoft s Internet Information Services (IIS) kullanıyorsanız, güvenlik bağlamı IIS sürümüne ve yapılandırmasına bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-299">If you are using Microsoft s Internet Information Services (IIS) as the web server, the security context depends on the version of IIS and its configuration.</span></span>

<span data-ttu-id="87b0d-300">Dosyaları dosya sistemine kaydetmenin bir diğer zorluğu, dosyaları adlandırmanın yerini alır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-300">Another challenge of saving files to the file system revolves around naming the files.</span></span> <span data-ttu-id="87b0d-301">Şu anda sayfamız, yüklenen dosyaların tümünü, istemci s bilgisayarındaki dosyayla aynı adı kullanarak `~/Brochures` dizine kaydeder.</span><span class="sxs-lookup"><span data-stu-id="87b0d-301">Currently, our page saves all of the uploaded files to the `~/Brochures` directory using the same name as the file on the client s computer.</span></span> <span data-ttu-id="87b0d-302">Kullanıcı A, adı `Brochure.pdf`bir broşür karşıya yüklediğinde, dosya `~/Brochure/Brochure.pdf`olarak kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-302">If User A uploads a brochure with the name `Brochure.pdf`, the file will be saved as `~/Brochure/Brochure.pdf`.</span></span> <span data-ttu-id="87b0d-303">Ancak daha sonra Kullanıcı B, aynı dosya adına (`Brochure.pdf`) sahip olacak şekilde farklı bir broşür dosyasını karşıya yüklediğinde ne olur?</span><span class="sxs-lookup"><span data-stu-id="87b0d-303">But what if sometime later User B uploads a different brochure file that happens to have the same filename (`Brochure.pdf`)?</span></span> <span data-ttu-id="87b0d-304">Şimdi yaptığımız kodla, Kullanıcı B 'nin karşıya yüklenmesi ile ilgili bir s dosyasının üzerine yazılacak.</span><span class="sxs-lookup"><span data-stu-id="87b0d-304">With the code we have now, User A s file will be overwritten with User B s upload.</span></span>

<span data-ttu-id="87b0d-305">Dosya adı çakışmalarını çözmek için çeşitli teknikler vardır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-305">There are a number of techniques for resolving file name conflicts.</span></span> <span data-ttu-id="87b0d-306">Bir seçenek, aynı ada sahip bir dosya zaten varsa karşıya yüklemeyi yasaklayadır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-306">One option is to prohibit uploading a file if there already exists one with the same name.</span></span> <span data-ttu-id="87b0d-307">Bu yaklaşım ile, B kullanıcısı, `Brochure.pdf`adlı bir dosyayı karşıya yüklemeye çalıştığında, sistem dosyalarını kaydetmez ve bunun yerine, Kullanıcı B 'nin dosyayı yeniden adlandırıp tekrar denemesini bildiren bir ileti görüntüler.</span><span class="sxs-lookup"><span data-stu-id="87b0d-307">With this approach, when User B attempts to upload a file named `Brochure.pdf`, the system would not save their file and instead display a message informing User B to rename the file and try again.</span></span> <span data-ttu-id="87b0d-308">Başka bir yaklaşım ise, bir [genel benzersiz tanımlayıcı (GUID)](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) veya karşılık gelen veritabanı kaydı birincil anahtar sütunundan değer olabilen benzersiz bir dosya adı kullanarak dosyayı kaydetmektedir (karşıya yüklemenin veri modelindeki belirli bir satırla ilişkili olduğu varsayılırsa).</span><span class="sxs-lookup"><span data-stu-id="87b0d-308">Another approach is to save the file using a unique file name, which could be a [globally unique identifier (GUID)](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) or the value from the corresponding database record s primary key column(s) (assuming that the upload is associated with a particular row in the data model).</span></span> <span data-ttu-id="87b0d-309">Sonraki öğreticide bu seçenekleri daha ayrıntılı keşfedeceğiz.</span><span class="sxs-lookup"><span data-stu-id="87b0d-309">In the next tutorial we'll explore these options in more detail.</span></span>

## <a name="challenges-involved-with-very-large-amounts-of-binary-data"></a><span data-ttu-id="87b0d-310">Çok büyük miktarlarda Ikili veri ile Ilgili sorunlar</span><span class="sxs-lookup"><span data-stu-id="87b0d-310">Challenges Involved with Very Large Amounts of Binary Data</span></span>

<span data-ttu-id="87b0d-311">Bu öğreticiler, yakalanan ikili verilerin boyut olarak olduğunu varsayar.</span><span class="sxs-lookup"><span data-stu-id="87b0d-311">These tutorials assume that the binary data captured is modest in size.</span></span> <span data-ttu-id="87b0d-312">Birkaç megabayt veya daha büyük miktarda ikili veri dosyası ile çalışma, Bu öğreticilerin kapsamı ötesinde yeni zorluk sergiler.</span><span class="sxs-lookup"><span data-stu-id="87b0d-312">Working with very large amounts of binary data files that are several megabytes or larger introduces new challenges that are beyond the scope of these tutorials.</span></span> <span data-ttu-id="87b0d-313">Örneğin, varsayılan olarak ASP.NET, 4 MB 'den daha fazla karşıya yüklemeyi reddeder, ancak bu, `Web.config`[`<httpRuntime>` öğesi](https://msdn.microsoft.com/library/e1f13641.aspx) aracılığıyla yapılandırılabilirler.</span><span class="sxs-lookup"><span data-stu-id="87b0d-313">For example, by default ASP.NET will reject uploads of more than 4 MB, although this can be configured through the [`<httpRuntime>` element](https://msdn.microsoft.com/library/e1f13641.aspx) in `Web.config`.</span></span> <span data-ttu-id="87b0d-314">IIS, kendi dosya yükleme boyutu sınırlamalarını da uygular.</span><span class="sxs-lookup"><span data-stu-id="87b0d-314">IIS imposes its own file upload size limitations, too.</span></span> <span data-ttu-id="87b0d-315">Daha fazla bilgi için bkz. [IIS karşıya yükleme dosyası boyutu](http://vandamme.typepad.com/development/2005/09/iis_upload_file.html) .</span><span class="sxs-lookup"><span data-stu-id="87b0d-315">See [IIS Upload File Size](http://vandamme.typepad.com/development/2005/09/iis_upload_file.html) for more information.</span></span> <span data-ttu-id="87b0d-316">Ayrıca, büyük dosyaları karşıya yüklemek için geçen süre varsayılan 110 saniye ASP.NET bir istek için bekleyecektir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-316">Furthermore, the time taken to upload large files might exceed the default 110 seconds ASP.NET will wait for a request.</span></span> <span data-ttu-id="87b0d-317">Büyük dosyalarla çalışırken ortaya çıkan bellek ve performans sorunları da vardır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-317">There are also memory and performance issues that arise when working with large files.</span></span>

<span data-ttu-id="87b0d-318">Dosya karşıya yükleme denetimi, büyük dosya yüklemeleri için pratik bir şekilde yapılır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-318">The FileUpload control is impractical for large file uploads.</span></span> <span data-ttu-id="87b0d-319">Dosya içerikleri sunucuya gönderildiğinde, son kullanıcının karşıya yüklemesinin devam eden herhangi bir onay olmadan önce beklemesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-319">As the file s contents are being posted to the server, the end user must patiently wait without any confirmation that their upload is progressing.</span></span> <span data-ttu-id="87b0d-320">Bu, birkaç saniye içinde karşıya yüklenebilen küçük dosyalarla ilgilenirken çok fazla soruna neden olmaz, ancak karşıya yüklenmesi dakika süreolabilecek daha büyük dosyalarla ilgilenirken bir sorun olabilir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-320">This is not so much an issue when dealing with smaller files that can be uploaded in a few seconds, but can be an issue when dealing with larger files that may take minutes to upload.</span></span> <span data-ttu-id="87b0d-321">Büyük karşıya yüklemeleri işlemeye daha uygun olan üçüncü taraf dosya yükleme denetimleri bulunur ve bu satıcıların birçoğu, daha canlı bir kullanıcı deneyimi sunan ilerleme göstergelerini ve ActiveX karşıya yükleme yöneticilerini sağlar.</span><span class="sxs-lookup"><span data-stu-id="87b0d-321">There are a variety of third-party file upload controls that are better suited for handling large uploads and many of these vendors provide progress indicators and ActiveX upload managers that present a much more polished user experience.</span></span>

<span data-ttu-id="87b0d-322">Uygulamanızın büyük dosyaları işlemesi gerekiyorsa, zorlukları dikkatle araştırmanız ve belirli gereksinimleriniz için uygun çözümler bulmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="87b0d-322">If your application needs to handle large files, you'll need to carefully investigate the challenges and find suitable solutions for your particular needs.</span></span>

## <a name="summary"></a><span data-ttu-id="87b0d-323">Özet</span><span class="sxs-lookup"><span data-stu-id="87b0d-323">Summary</span></span>

<span data-ttu-id="87b0d-324">İkili verileri yakalamak için gereken bir uygulama oluşturmak çok sayıda zorluk sağlar.</span><span class="sxs-lookup"><span data-stu-id="87b0d-324">Building an application that needs to capture binary data introduces a number of challenges.</span></span> <span data-ttu-id="87b0d-325">Bu öğreticide, ilk iki: ikili verileri nerede depolayacağınıza karar verme ve bir kullanıcının bir Web sayfası aracılığıyla ikili içeriği karşıya yüklemesine izin verme.</span><span class="sxs-lookup"><span data-stu-id="87b0d-325">In this tutorial we explored the first two: deciding where to store the binary data and allowing a user to upload binary content through a web page.</span></span> <span data-ttu-id="87b0d-326">Sonraki üç öğreticide, karşıya yüklenen verileri veritabanındaki bir kayıtla ilişkilendirmeyi ve metin veri alanları ile birlikte ikili verilerin nasıl görüntüleneceğini öğreneceğiz.</span><span class="sxs-lookup"><span data-stu-id="87b0d-326">Over the next three tutorials, we'll see how to associate the uploaded data with a record in the database as well as how to display the binary data alongside its text data fields.</span></span>

<span data-ttu-id="87b0d-327">Programlamanın kutlu olsun!</span><span class="sxs-lookup"><span data-stu-id="87b0d-327">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="87b0d-328">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="87b0d-328">Further Reading</span></span>

<span data-ttu-id="87b0d-329">Bu öğreticide ele alınan konular hakkında daha fazla bilgi için aşağıdaki kaynaklara bakın:</span><span class="sxs-lookup"><span data-stu-id="87b0d-329">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="87b0d-330">Büyük değer veri türlerini kullanma</span><span class="sxs-lookup"><span data-stu-id="87b0d-330">Using Large-Value Data Types</span></span>](https://msdn.microsoft.com/library/ms178158.aspx)
- [<span data-ttu-id="87b0d-331">Dosya karşıya yükleme denetimi hızlı başlangıçlarını</span><span class="sxs-lookup"><span data-stu-id="87b0d-331">FileUpload Control QuickStarts</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/standard/fileupload.aspx)
- [<span data-ttu-id="87b0d-332">ASP.NET 2,0 FileUpload sunucu denetimi</span><span class="sxs-lookup"><span data-stu-id="87b0d-332">The ASP.NET 2.0 FileUpload Server Control</span></span>](http://www.wrox.com/WileyCDA/Section/id-292158.html)
- [<span data-ttu-id="87b0d-333">Dosya karşıya yüklemelerinin koyu tarafı</span><span class="sxs-lookup"><span data-stu-id="87b0d-333">The Dark Side of File Uploads</span></span>](http://www.aspnetresources.com/articles/dark_side_of_file_uploads.aspx)

## <a name="about-the-author"></a><span data-ttu-id="87b0d-334">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="87b0d-334">About the Author</span></span>

<span data-ttu-id="87b0d-335">4GuysFromRolla.com 'in, [Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), yedi ASP/ASP. net books ve [](http://www.4guysfromrolla.com)'in yazarı, 1998 sürümünden bu yana Microsoft Web teknolojileriyle çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="87b0d-335">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="87b0d-336">Scott bağımsız danışman, Trainer ve yazıcı olarak çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="87b0d-336">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="87b0d-337">En son kitabı, [*24 saat içinde ASP.NET 2,0 kendi kendinize eğitim*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)ister.</span><span class="sxs-lookup"><span data-stu-id="87b0d-337">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="87b0d-338">mitchell@4GuysFromRolla.comadresinden erişilebilir [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="87b0d-338">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="87b0d-339">ya da blog aracılığıyla [http://ScottOnWriting.NET](http://ScottOnWriting.NET)bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="87b0d-339">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="87b0d-340">Özel olarak teşekkürler</span><span class="sxs-lookup"><span data-stu-id="87b0d-340">Special Thanks To</span></span>

<span data-ttu-id="87b0d-341">Bu öğretici serisi birçok yararlı gözden geçirenler tarafından incelendi.</span><span class="sxs-lookup"><span data-stu-id="87b0d-341">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="87b0d-342">Bu öğreticide lider gözden geçirenler, bir Murphy ve Bernadette Leigh.</span><span class="sxs-lookup"><span data-stu-id="87b0d-342">Lead reviewers for this tutorial were Teresa Murphy and Bernadette Leigh.</span></span> <span data-ttu-id="87b0d-343">Yaklaşan MSDN makalelerimi gözden geçiriyor musunuz?</span><span class="sxs-lookup"><span data-stu-id="87b0d-343">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="87b0d-344">Öyleyse, benimitchell@4GuysFromRolla.combir satır bırakın [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="87b0d-344">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="87b0d-345">Next</span><span class="sxs-lookup"><span data-stu-id="87b0d-345">Next</span></span>](displaying-binary-data-in-the-data-web-controls-cs.md)
