---
uid: web-forms/overview/older-versions-security/roles/creating-and-managing-roles-cs
title: Rolleri oluşturma ve yönetme (C#) | Microsoft Docs
author: rick-anderson
description: Bu öğretici, roller çerçevesini yapılandırmak için gerekli olan adımları inceler. Bundan sonra, rolleri oluşturmak ve silmek için Web sayfaları oluşturacağız.
ms.author: riande
ms.date: 03/24/2008
ms.assetid: 113f10b3-a19a-471b-8ff6-db3c79ce8a91
msc.legacyurl: /web-forms/overview/older-versions-security/roles/creating-and-managing-roles-cs
msc.type: authoredcontent
ms.openlocfilehash: a7883d0b05f2fa5a3fdac887f8c8b39d70418fb3
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78640247"
---
# <a name="creating-and-managing-roles-c"></a><span data-ttu-id="a0d14-104">Rolleri Oluşturma ve Yönetme (C#)</span><span class="sxs-lookup"><span data-stu-id="a0d14-104">Creating and Managing Roles (C#)</span></span>

<span data-ttu-id="a0d14-105">[Scott Mitchell](https://twitter.com/ScottOnWriting) tarafından</span><span class="sxs-lookup"><span data-stu-id="a0d14-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a0d14-106">[Kodu indirin](https://download.microsoft.com/download/6/0/3/6032582f-360d-4739-b935-38721fdb86ea/CS.09.zip) veya [PDF 'yi indirin](https://download.microsoft.com/download/6/0/3/6032582f-360d-4739-b935-38721fdb86ea/aspnet_tutorial09_CreatingRoles_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="a0d14-106">[Download Code](https://download.microsoft.com/download/6/0/3/6032582f-360d-4739-b935-38721fdb86ea/CS.09.zip) or [Download PDF](https://download.microsoft.com/download/6/0/3/6032582f-360d-4739-b935-38721fdb86ea/aspnet_tutorial09_CreatingRoles_cs.pdf)</span></span>

> <span data-ttu-id="a0d14-107">Bu öğretici, roller çerçevesini yapılandırmak için gerekli olan adımları inceler.</span><span class="sxs-lookup"><span data-stu-id="a0d14-107">This tutorial examines the steps necessary for configuring the Roles framework.</span></span> <span data-ttu-id="a0d14-108">Bundan sonra, rolleri oluşturmak ve silmek için Web sayfaları oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="a0d14-108">Following that, we will build web pages to create and delete roles.</span></span>

## <a name="introduction"></a><span data-ttu-id="a0d14-109">Giriş</span><span class="sxs-lookup"><span data-stu-id="a0d14-109">Introduction</span></span>

<span data-ttu-id="a0d14-110"><a id="_msoanchor_1"> </a> [*Kullanıcı tabanlı yetkilendirme*](../membership/user-based-authorization-cs.md) öğreticisinde, bir sayfa kümesinden belirli kullanıcıları kısıtlamak için URL yetkilendirmesi kullanma ve bir ASP.net sayfasının işlevselliğini ziyaret eden kullanıcıya göre ayarlamak için programlı teknikler hakkında baktık.</span><span class="sxs-lookup"><span data-stu-id="a0d14-110">In the <a id="_msoanchor_1"></a>[*User-Based Authorization*](../membership/user-based-authorization-cs.md) tutorial we looked at using URL authorization to restrict certain users from a set of pages and explored declarative and programmatic techniques for adjusting an ASP.NET page's functionality based on the visiting user.</span></span> <span data-ttu-id="a0d14-111">Kullanıcı tarafından Kullanıcı bazında sayfa erişimi veya işlevselliği için izin verilmesi, ancak çok sayıda kullanıcı hesabının olduğu ve kullanıcıların ayrıcalıkların genellikle değişmediği senaryolarda bir bakım olabilir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-111">Granting permission for page access or functionality on a user-by-user basis, however, can become a maintenance nightmare in scenarios where there are many user accounts or when users' privileges change often.</span></span> <span data-ttu-id="a0d14-112">Bir Kullanıcı belirli bir görevi gerçekleştirmek için Yetkilendirmeyi her aldığında veya kaybettiğinde, yöneticinin uygun URL yetkilendirme kurallarını, bildirime dayalı biçimlendirmeyi ve kodu güncelleştirmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-112">Any time a user gains or loses authorization to perform a particular task, the administrator needs to update the appropriate URL authorization rules, declarative markup, and code.</span></span>

<span data-ttu-id="a0d14-113">Genellikle kullanıcıları gruplar veya *Roller* halinde sınıflandırarak, rol rol temelinde izinleri uygulamanıza yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="a0d14-113">It usually helps to classify users into groups or *roles* and then to apply permissions on a role-by-role basis.</span></span> <span data-ttu-id="a0d14-114">Örneğin, çoğu Web uygulamasında yalnızca yönetici kullanıcılar için ayrılan belirli bir sayfa veya görev kümesi vardır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-114">For example, most web applications have a certain set of pages or tasks that are reserved only for administrative users.</span></span> <span data-ttu-id="a0d14-115">*Kullanıcı tabanlı yetkilendirme* öğreticisinde öğrenilen teknikleri kullanarak, belirtilen kullanıcı hesaplarının yönetim görevlerini gerçekleştirmesine izin vermek IÇIN uygun URL yetkilendirme kurallarını, bildirime dayalı biçimlendirmeyi ve kodu ekleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="a0d14-115">Using the techniques learned in the *User-Based Authorization* tutorial, we would add the appropriate URL authorization rules, declarative markup, and code to allow the specified user accounts to perform administrative tasks.</span></span> <span data-ttu-id="a0d14-116">Ancak yeni bir yönetici eklendiyse veya yönetim haklarının iptal edilmesini sağlamak için gerekli olan bir yönetici varsa, yapılandırma dosyalarını ve Web sayfalarını döndürmemiz ve güncelleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-116">But if a new administrator was added or if an existing administrator needed to have her administration rights revoked, we would have to return and update the configuration files and web pages.</span></span> <span data-ttu-id="a0d14-117">Ancak, roller ile yöneticiler adlı bir rol oluşturabilir ve bu güvenilir kullanıcıları Yöneticiler rolüne atayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0d14-117">With roles, however, we could create a role called Administrators and assign those trusted users to the Administrators role.</span></span> <span data-ttu-id="a0d14-118">Daha sonra, yönetici rolünün çeşitli yönetim görevlerini gerçekleştirmesine izin vermek için uygun URL yetkilendirme kurallarını, bildirime dayalı biçimlendirmeyi ve kodu ekleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="a0d14-118">Next, we would add the appropriate URL authorization rules, declarative markup, and code to allow the Administrators role to perform the various administrative tasks.</span></span> <span data-ttu-id="a0d14-119">Bu altyapı söz konusu olduğunda, siteye yeni yöneticiler eklemek veya var olanları kaldırmak, kullanıcıyı dahil etmek veya Yöneticiler rolünden kaldırmak kadar basittir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-119">With this infrastructure in place, adding new administrators to the site or removing existing ones is as simple as including or removing the user from the Administrators role.</span></span> <span data-ttu-id="a0d14-120">Yapılandırma, bildirime dayalı biçimlendirme veya kod değişikliği gerekli değildir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-120">No configuration, declarative markup, or code changes are necessary.</span></span>

<span data-ttu-id="a0d14-121">ASP.NET rolleri tanımlamak ve bunları Kullanıcı hesaplarıyla ilişkilendirmek için bir rol çerçevesi sunar.</span><span class="sxs-lookup"><span data-stu-id="a0d14-121">ASP.NET offers a Roles framework for defining roles and associating them with user accounts.</span></span> <span data-ttu-id="a0d14-122">Rol çerçevesi ile roller oluşturup silebilir, bir role kullanıcı ekleyebilir veya gruptan kullanıcıları kaldırabilir, belirli bir role ait olan kullanıcı kümesini belirleyebilir ve bir kullanıcının belirli bir role ait olup olmadığını anlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0d14-122">With the Roles framework we can create and delete roles, add users to or remove users from a role, determine the set of users that belong to a particular role, and tell whether a user belongs to a particular role.</span></span> <span data-ttu-id="a0d14-123">Rol çerçevesi yapılandırıldıktan sonra, URL Yetkilendirme kuralları aracılığıyla bir rol temelinde görevlere erişimi sınırlayabilir ve şu anda oturum açmış olan kullanıcının rollerine bağlı olarak bir sayfada ek bilgi ya da işlevsellik gösterebilir veya gizleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0d14-123">Once the Roles framework has been configured, we can limit access to pages on a role-by-role basis through URL authorization rules and show or hide additional information or functionality on a page based on the currently logged on user's roles.</span></span>

<span data-ttu-id="a0d14-124">Bu öğretici, roller çerçevesini yapılandırmak için gerekli olan adımları inceler.</span><span class="sxs-lookup"><span data-stu-id="a0d14-124">This tutorial examines the steps necessary for configuring the Roles framework.</span></span> <span data-ttu-id="a0d14-125">Bundan sonra, rolleri oluşturmak ve silmek için Web sayfaları oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="a0d14-125">Following that, we will build web pages to create and delete roles.</span></span> <span data-ttu-id="a0d14-126"><a id="_msoanchor_2"> </a> [*Kullanıcılara roller atama*](assigning-roles-to-users-cs.md) öğreticisinde, rolleri Kullanıcı ekleme ve rollerden kaldırma bölümüne bakacağız.</span><span class="sxs-lookup"><span data-stu-id="a0d14-126">In the <a id="_msoanchor_2"></a>[*Assigning Roles to Users*](assigning-roles-to-users-cs.md) tutorial we will look at how to add and remove users from roles.</span></span> <span data-ttu-id="a0d14-127">Rol <a id="_msoanchor_3"> </a> [*tabanlı yetkilendirme*](role-based-authorization-cs.md) öğreticisinde, bir rol rol temelinde sayfalara erişimi, ziyaret eden kullanıcının rolüne bağlı olarak sayfa işlevselliğinin nasıl ayarlanacağını öğreneceğiz.</span><span class="sxs-lookup"><span data-stu-id="a0d14-127">And in the <a id="_msoanchor_3"></a>[*Role-Based Authorization*](role-based-authorization-cs.md) tutorial we will see how to limit access to pages on a role-by-role basis along with how to adjust page functionality depending on the visiting user's role.</span></span> <span data-ttu-id="a0d14-128">Haydi başlayın!</span><span class="sxs-lookup"><span data-stu-id="a0d14-128">Let's get started!</span></span>

## <a name="step-1-adding-new-aspnet-pages"></a><span data-ttu-id="a0d14-129">1\. Adım: yeni ASP.NET sayfaları ekleme</span><span class="sxs-lookup"><span data-stu-id="a0d14-129">Step 1: Adding New ASP.NET Pages</span></span>

<span data-ttu-id="a0d14-130">Bu öğreticide ve sonraki iki adımda, rollerle ilgili çeşitli işlevler ve yetenekler incelenmeyecektir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-130">In this tutorial and the next two we will be examining various roles-related functions and capabilities.</span></span> <span data-ttu-id="a0d14-131">Bu öğreticiler genelinde incelenen konuları uygulamak için bir dizi ASP.NET sayfasına ihtiyacımız olacak.</span><span class="sxs-lookup"><span data-stu-id="a0d14-131">We will need a series of ASP.NET pages to implement the topics examined throughout these tutorials.</span></span> <span data-ttu-id="a0d14-132">Bu sayfaları oluşturalım ve site haritasını güncelleştirlim.</span><span class="sxs-lookup"><span data-stu-id="a0d14-132">Let's create these pages and update the site map.</span></span>

<span data-ttu-id="a0d14-133">`Roles`adlı projede yeni bir klasör oluşturarak başlayın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-133">Start by creating a new folder in the project named `Roles`.</span></span> <span data-ttu-id="a0d14-134">Sonra, `Roles` klasöre dört yeni ASP.NET sayfası ekleyerek her sayfayı `Site.master` ana sayfayla bağlantılandırın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-134">Next, add four new ASP.NET pages to the `Roles` folder, linking each page with the `Site.master` master page.</span></span> <span data-ttu-id="a0d14-135">Sayfaları adlandırın:</span><span class="sxs-lookup"><span data-stu-id="a0d14-135">Name the pages:</span></span>

- `ManageRoles.aspx`
- `UsersAndRoles.aspx`
- `CreateUserWizardWithRoles.aspx`
- `RoleBasedAuthorization.aspx`

<span data-ttu-id="a0d14-136">Bu noktada, projenizin Çözüm Gezgini Şekil 1 ' de gösterilen ekran görüntüsüne benzer olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-136">At this point your project's Solution Explorer should look similar to the screen shot shown in Figure 1.</span></span>

<span data-ttu-id="a0d14-137">[Roller klasörüne dört yeni sayfa ![eklenmiştir](creating-and-managing-roles-cs/_static/image2.png)](creating-and-managing-roles-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a0d14-137">[![Four New Pages Have Been Added to the Roles Folder](creating-and-managing-roles-cs/_static/image2.png)](creating-and-managing-roles-cs/_static/image1.png)</span></span>

<span data-ttu-id="a0d14-138">**Şekil 1**: `Roles` klasöre dört yeni sayfa eklenmiştir ([tam boyutlu görüntüyü görüntülemek için tıklayın](creating-and-managing-roles-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a0d14-138">**Figure 1**: Four New Pages Have Been Added to the `Roles` Folder  ([Click to view full-size image](creating-and-managing-roles-cs/_static/image3.png))</span></span>

<span data-ttu-id="a0d14-139">Her sayfa, her bir ana sayfanın Contenttutucuları: `MainContent` ve `LoginContent`olmak üzere iki Içerik denetimine sahip olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-139">Each page should, at this point, have the two Content controls, one for each of the master page's ContentPlaceHolders: `MainContent` and `LoginContent`.</span></span>

[!code-aspx[Main](creating-and-managing-roles-cs/samples/sample1.aspx)]

<span data-ttu-id="a0d14-140">`LoginContent` ContentPlaceHolder 'ın varsayılan biçimlendirmesinin, kullanıcının kimliğinin doğrulanmadığına bağlı olarak, oturum açma veya site oturumunu kapatma bağlantısı görüntülediğini geri çekin.</span><span class="sxs-lookup"><span data-stu-id="a0d14-140">Recall that the `LoginContent` ContentPlaceHolder's default markup displays a link to log on or log off the site, depending on whether the user is authenticated.</span></span> <span data-ttu-id="a0d14-141">Ancak ASP.NET sayfasındaki Içerik denetiminin `Content2` varlığı, ana sayfanın varsayılan işaretlemesini geçersiz kılar.</span><span class="sxs-lookup"><span data-stu-id="a0d14-141">The presence of the `Content2` Content control in the ASP.NET page, however, overrides the master page's default markup.</span></span> <span data-ttu-id="a0d14-142"><a id="_msoanchor_4"> </a> [*Form kimlik doğrulaması öğreticisine genel bakış*](../introduction/an-overview-of-forms-authentication-cs.md) konusunda anlatıldığı gibi, varsayılan biçimlendirmeyi geçersiz kılmak, oturum açma ile ilgili seçenekleri sol sütunda göstermek istemediğimiz sayfalarda yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-142">As we discussed in <a id="_msoanchor_4"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-cs.md) tutorial, overriding the default markup is useful in pages where we do not want to display login-related options in the left column.</span></span>

<span data-ttu-id="a0d14-143">Bununla birlikte, bu dört sayfa için ana sayfanın varsayılan biçimlendirmesini `LoginContent` ContentPlaceHolder olarak göstermek istiyoruz.</span><span class="sxs-lookup"><span data-stu-id="a0d14-143">For these four pages, however, we want to show the master page's default markup for the `LoginContent` ContentPlaceHolder.</span></span> <span data-ttu-id="a0d14-144">Bu nedenle, `Content2` Içerik denetimi için bildirim temelli biçimlendirmeyi kaldırın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-144">Therefore, remove the declarative markup for the `Content2` Content control.</span></span> <span data-ttu-id="a0d14-145">Bunu yaptıktan sonra dört sayfa biçimlendirmesinin her biri yalnızca bir Içerik denetimi içermelidir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-145">After doing so, each of the four page's markup should contain just one Content control.</span></span>

<span data-ttu-id="a0d14-146">Son olarak, site haritasını (`Web.sitemap`) bu yeni Web sayfalarını içerecek şekilde güncelleştirelim.</span><span class="sxs-lookup"><span data-stu-id="a0d14-146">Finally, let's update the site map (`Web.sitemap`) to include these new web pages.</span></span> <span data-ttu-id="a0d14-147">Üyelik öğreticileri için eklediğimiz `<siteMapNode>` sonra aşağıdaki XML 'i ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a0d14-147">Add the following XML after the `<siteMapNode>` we added for the Membership tutorials.</span></span>

[!code-xml[Main](creating-and-managing-roles-cs/samples/sample2.xml)]

<span data-ttu-id="a0d14-148">Site Haritası güncelleştirildikten sonra, siteyi bir tarayıcı aracılığıyla ziyaret edin.</span><span class="sxs-lookup"><span data-stu-id="a0d14-148">With the site map updated, visit the site through a browser.</span></span> <span data-ttu-id="a0d14-149">Şekil 2 ' de gösterildiği gibi, sol taraftaki Gezinti artık rol öğreticilerine yönelik öğeler içerir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-149">As Figure 2 shows, the navigation on the left now includes items for the Roles tutorials.</span></span>

<span data-ttu-id="a0d14-150">[Roller klasörüne dört yeni sayfa ![eklenmiştir](creating-and-managing-roles-cs/_static/image5.png)](creating-and-managing-roles-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="a0d14-150">[![Four New Pages Have Been Added to the Roles Folder](creating-and-managing-roles-cs/_static/image5.png)](creating-and-managing-roles-cs/_static/image4.png)</span></span>

<span data-ttu-id="a0d14-151">**Şekil 2**: `Roles` klasöre dört yeni sayfa eklenmiştir ([tam boyutlu görüntüyü görüntülemek için tıklayın](creating-and-managing-roles-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="a0d14-151">**Figure 2**: Four New Pages Have Been Added to the `Roles` Folder  ([Click to view full-size image](creating-and-managing-roles-cs/_static/image6.png))</span></span>

## <a name="step-2-specifying-and-configuring-the-roles-framework-provider"></a><span data-ttu-id="a0d14-152">2\. Adım: roller çerçeve sağlayıcısını belirtme ve yapılandırma</span><span class="sxs-lookup"><span data-stu-id="a0d14-152">Step 2: Specifying and Configuring the Roles Framework Provider</span></span>

<span data-ttu-id="a0d14-153">Üyelik çerçevesi gibi, rol çerçevesi de sağlayıcı modeline göre oluşturulmuştur.</span><span class="sxs-lookup"><span data-stu-id="a0d14-153">Like the Membership framework, the Roles framework is built atop the provider model.</span></span> <span data-ttu-id="a0d14-154"><a id="_msoanchor_5"> </a> [*Güvenlik temelleri ve ASP.NET Destek*](../introduction/security-basics-and-asp-net-support-cs.md) öğreticisinde açıklandığı gibi .NET Framework üç yerleşik rol sağlayıcısıyla birlikte gelir: [`AuthorizationStoreRoleProvider`](https://msdn.microsoft.com/library/system.web.security.authorizationstoreroleprovider.aspx), [`WindowsTokenRoleProvider`](https://msdn.microsoft.com/library/system.web.security.windowstokenroleprovider.aspx)ve [`SqlRoleProvider`](https://msdn.microsoft.com/library/system.web.security.sqlroleprovider.aspx).</span><span class="sxs-lookup"><span data-stu-id="a0d14-154">As discussed in the <a id="_msoanchor_5"></a>[*Security Basics and ASP.NET Support*](../introduction/security-basics-and-asp-net-support-cs.md) tutorial, the .NET Framework ships with three built-in Roles providers: [`AuthorizationStoreRoleProvider`](https://msdn.microsoft.com/library/system.web.security.authorizationstoreroleprovider.aspx), [`WindowsTokenRoleProvider`](https://msdn.microsoft.com/library/system.web.security.windowstokenroleprovider.aspx), and [`SqlRoleProvider`](https://msdn.microsoft.com/library/system.web.security.sqlroleprovider.aspx).</span></span> <span data-ttu-id="a0d14-155">Bu öğretici serisi, rol deposu olarak bir Microsoft SQL Server veritabanı kullanan `SqlRoleProvider`odaklanır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-155">This tutorial series focuses on the `SqlRoleProvider`, which uses a Microsoft SQL Server database as the role store.</span></span>

<span data-ttu-id="a0d14-156">Altında, rollerinin çerçevesini ve `SqlRoleProvider`, üyelik çerçevesi ve `SqlMembershipProvider`gibi çalışır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-156">Underneath the covers the Roles framework and `SqlRoleProvider` work just like the Membership framework and `SqlMembershipProvider`.</span></span> <span data-ttu-id="a0d14-157">.NET Framework, rol çerçevesine API görevi gören bir `Roles` sınıfı içerir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-157">The .NET Framework contains a `Roles` class that serves as the API to the Roles framework.</span></span> <span data-ttu-id="a0d14-158">`Roles` sınıfında `CreateRole`, `DeleteRole`, `GetAllRoles`, `AddUserToRole`, `IsUserInRole`gibi statik yöntemler bulunur.</span><span class="sxs-lookup"><span data-stu-id="a0d14-158">The `Roles` class has static methods like `CreateRole`, `DeleteRole`, `GetAllRoles`, `AddUserToRole`, `IsUserInRole`, and so forth.</span></span> <span data-ttu-id="a0d14-159">Bu yöntemlerin biri çağrıldığında `Roles` sınıfı, yapılandırılan sağlayıcıya çağrıyı devreder.</span><span class="sxs-lookup"><span data-stu-id="a0d14-159">When one of these methods is invoked, the `Roles` class delegates the call to the configured provider.</span></span> <span data-ttu-id="a0d14-160">`SqlRoleProvider`, yanıt olarak role özgü tablolar (`aspnet_Roles` ve `aspnet_UsersInRoles`) ile birlikte kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-160">The `SqlRoleProvider` works with the role-specific tables (`aspnet_Roles` and `aspnet_UsersInRoles`) in response.</span></span>

<span data-ttu-id="a0d14-161">Uygulamamızda `SqlRoleProvider` sağlayıcıyı kullanmak için, mağaza olarak kullanılacak veritabanını belirtmemiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-161">In order to use the `SqlRoleProvider` provider in our application, we need to specify what database to use as the store.</span></span> <span data-ttu-id="a0d14-162">`SqlRoleProvider`, belirtilen rol mağazasının belirli veritabanı tabloları, görünümler ve saklı yordamları olmasını bekler.</span><span class="sxs-lookup"><span data-stu-id="a0d14-162">The `SqlRoleProvider` expects the specified role store to have certain database tables, views, and stored procedures.</span></span> <span data-ttu-id="a0d14-163">Bu önkoşul veritabanı nesneleri [`aspnet_regsql.exe` aracı](https://msdn.microsoft.com/library/ms229862.aspx)kullanılarak eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-163">These requisite database objects can be added using the [`aspnet_regsql.exe` tool](https://msdn.microsoft.com/library/ms229862.aspx).</span></span> <span data-ttu-id="a0d14-164">Bu noktada, `SqlRoleProvider`için gereken şemaya sahip bir veritabanı zaten var.</span><span class="sxs-lookup"><span data-stu-id="a0d14-164">At this point we already have a database with the schema necessary for the `SqlRoleProvider`.</span></span> <span data-ttu-id="a0d14-165"><a id="_msoanchor_6"> </a> [*SQL Server öğreticide üyelik şeması oluşturmaya*](../membership/creating-the-membership-schema-in-sql-server-cs.md) geri döndüğünüzde, `SecurityTutorials.mdf` adlı bir veritabanı oluşturdunuz ve `SqlRoleProvider`gereken veritabanı nesnelerini içeren uygulama hizmetlerini eklemek için `aspnet_regsql.exe` kullandınız.</span><span class="sxs-lookup"><span data-stu-id="a0d14-165">Back in the <a id="_msoanchor_6"></a>[*Creating the Membership Schema in SQL Server*](../membership/creating-the-membership-schema-in-sql-server-cs.md) tutorial we created a database named `SecurityTutorials.mdf` and used `aspnet_regsql.exe` to add the application services, which included the database objects required by the `SqlRoleProvider`.</span></span> <span data-ttu-id="a0d14-166">Bu nedenle, roller çerçevesini rol desteğini etkinleştirmek ve `SqlRoleProvider` rol deposu olarak `SecurityTutorials.mdf` veritabanı ile kullanmak için söylememiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-166">Therefore we just need to tell the Roles framework to enable role support and to use the `SqlRoleProvider` with the `SecurityTutorials.mdf` database as the role store.</span></span>

<span data-ttu-id="a0d14-167">Rol çerçevesi, uygulamanın `Web.config` dosyasındaki &lt;`roleManager`&gt; öğesi aracılığıyla yapılandırılır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-167">The Roles framework is configured via the &lt;`roleManager`&gt; element in the application's `Web.config` file.</span></span> <span data-ttu-id="a0d14-168">Rol desteği varsayılan olarak devre dışıdır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-168">By default, role support is disabled.</span></span> <span data-ttu-id="a0d14-169">Bunu etkinleştirmek için, [&lt;`roleManager`&gt;](https://msdn.microsoft.com/library/ms164660.aspx) öğenin `enabled` `true` özniteliğini şöyle olacak şekilde ayarlamanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="a0d14-169">To enable it, you must set the [&lt;`roleManager`&gt;](https://msdn.microsoft.com/library/ms164660.aspx) element's `enabled` attribute to `true` like so:</span></span>

[!code-xml[Main](creating-and-managing-roles-cs/samples/sample3.xml)]

<span data-ttu-id="a0d14-170">Varsayılan olarak, tüm Web uygulamalarının `SqlRoleProvider`türünde `AspNetSqlRoleProvider` adlı bir rol sağlayıcısı vardır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-170">By default, all web applications have a Roles provider named `AspNetSqlRoleProvider` of type `SqlRoleProvider`.</span></span> <span data-ttu-id="a0d14-171">Bu varsayılan sağlayıcı `machine.config` kaydedilir (`%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG`konumunda bulunur):</span><span class="sxs-lookup"><span data-stu-id="a0d14-171">This default provider is registered in `machine.config` (located at `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG`):</span></span>

[!code-xml[Main](creating-and-managing-roles-cs/samples/sample4.xml)]

<span data-ttu-id="a0d14-172">Sağlayıcının `connectionStringName` özniteliği kullanılan rol deposunu belirtir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-172">The provider's `connectionStringName` attribute specifies the role store that is used.</span></span> <span data-ttu-id="a0d14-173">`AspNetSqlRoleProvider` sağlayıcı, bu özniteliği aynı zamanda `machine.config` ve `LocalSqlServer`olarak, `App_Data` adlı `aspnet.mdf`klasöründeki bir SQL Server 2005 Express Sürüm veritabanına da tanımlanmış olarak ayarlar.</span><span class="sxs-lookup"><span data-stu-id="a0d14-173">The `AspNetSqlRoleProvider` provider sets this attribute to `LocalSqlServer`, which is also defined in `machine.config` and points, by default, to a SQL Server 2005 Express Edition database in the `App_Data` folder named `aspnet.mdf`.</span></span>

<span data-ttu-id="a0d14-174">Sonuç olarak, uygulamanın `Web.config` dosyasında herhangi bir sağlayıcı bilgisi belirtmeden rol çerçevesini etkinleştireceğiz, uygulama varsayılan kayıtlı rol sağlayıcısını kullanır, `AspNetSqlRoleProvider`.</span><span class="sxs-lookup"><span data-stu-id="a0d14-174">Consequently, if we simply enable the Roles framework without specifying any provider information in our application's `Web.config` file, the application uses the default registered Roles provider, `AspNetSqlRoleProvider`.</span></span> <span data-ttu-id="a0d14-175">`~/App_Data/aspnet.mdf` veritabanı yoksa, ASP.NET çalışma zamanı otomatik olarak oluşturur ve uygulama Hizmetleri şemasını ekler.</span><span class="sxs-lookup"><span data-stu-id="a0d14-175">If the `~/App_Data/aspnet.mdf` database does not exist, the ASP.NET runtime will automatically create it and add the application services schema.</span></span> <span data-ttu-id="a0d14-176">Ancak, `aspnet.mdf` veritabanını kullanmak istemiyorum; Bunun yerine, önceden oluşturmuş olduğumuz `SecurityTutorials.mdf` veritabanını kullanmak ve uygulama Hizmetleri şemasını eklemek istiyoruz.</span><span class="sxs-lookup"><span data-stu-id="a0d14-176">However, we don't want to use the `aspnet.mdf` database; rather, we want to use the `SecurityTutorials.mdf` database that we have already created and added the application services schema to.</span></span> <span data-ttu-id="a0d14-177">Bu değişiklik, iki şekilde gerçekleştirilebilir:</span><span class="sxs-lookup"><span data-stu-id="a0d14-177">This modification can be accomplished in one of two ways:</span></span>

- <span data-ttu-id="a0d14-178"><strong>`Web.config`</strong><strong>`LocalSqlServer`</strong> <strong>bağlantı dizesi adı</strong> <strong>için bir değer belirtin</strong> <strong>.</strong></span><span class="sxs-lookup"><span data-stu-id="a0d14-178"><strong>Specify a value for the</strong><strong>`LocalSqlServer`</strong><strong>connection string name in</strong><strong>`Web.config`</strong><strong>.</strong></span></span> <span data-ttu-id="a0d14-179">`Web.config``LocalSqlServer` bağlantı dizesi adı değerinin üzerine yazarak, varsayılan kayıtlı rol sağlayıcısını (`AspNetSqlRoleProvider`) kullanabilir ve `SecurityTutorials.mdf` veritabanıyla doğru bir şekilde çalışabilir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-179">By overwriting the `LocalSqlServer` connection string name value in `Web.config`, we can use the default registered Roles provider (`AspNetSqlRoleProvider`) and have it correctly work with the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="a0d14-180">Bu teknik hakkında daha fazla bilgi için bkz. [Scott Guthrie](https://weblogs.asp.net/scottgu/)'nin blog gönderisi, [SQL Server 2000 veya SQL Server 2005 kullanmak için ASP.NET 2,0 uygulama hizmetleri yapılandırma](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span><span class="sxs-lookup"><span data-stu-id="a0d14-180">For more information on this technique, see [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog post, [Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span></span>
- <span data-ttu-id="a0d14-181"><strong>`SqlRoleProvider`türünde yeni bir kayıtlı sağlayıcı ekleyin</strong> <strong>ve</strong> <strong>`connectionStringName`</strong>ayarını<strong>`SecurityTutorials.mdf`</strong> <strong>veritabanına</strong> <strong>işaret etmek üzere</strong> yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-181"><strong>Add a new registered provider of type</strong><strong>`SqlRoleProvider`</strong><strong>and configure its</strong><strong>`connectionStringName`</strong><strong>setting to point to the</strong><strong>`SecurityTutorials.mdf`</strong><strong>database.</strong></span></span> <span data-ttu-id="a0d14-182">Bu, önerilen ve SQL Server öğreticide <a id="_msoanchor_7"> </a> [*Üyelik şeması oluşturma*](../membership/creating-the-membership-schema-in-sql-server-cs.md) bölümünde kullanılan yaklaşım ve bu öğreticide de kullandığım yaklaşımdır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-182">This is the approach I recommended and used in the <a id="_msoanchor_7"></a>[*Creating the Membership Schema in SQL Server*](../membership/creating-the-membership-schema-in-sql-server-cs.md) tutorial, and it is the approach I will use in this tutorial as well.</span></span>

<span data-ttu-id="a0d14-183">Aşağıdaki rol yapılandırması işaretlemesini `Web.config` dosyasına ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a0d14-183">Add the following Roles configuration markup to the `Web.config` file.</span></span> <span data-ttu-id="a0d14-184">Bu biçimlendirme `SecurityTutorialsSqlRoleProvider`adlı yeni bir sağlayıcı kaydeder.</span><span class="sxs-lookup"><span data-stu-id="a0d14-184">This markup registers a new provider named `SecurityTutorialsSqlRoleProvider`.</span></span>

[!code-xml[Main](creating-and-managing-roles-cs/samples/sample5.xml)]

<span data-ttu-id="a0d14-185">Yukarıdaki biçimlendirme `SecurityTutorialsSqlRoleProvider` varsayılan sağlayıcı olarak tanımlar (`<roleManager>` öğesinde `defaultProvider` özniteliği aracılığıyla).</span><span class="sxs-lookup"><span data-stu-id="a0d14-185">The above markup defines the `SecurityTutorialsSqlRoleProvider` as the default provider (via the `defaultProvider` attribute in the `<roleManager>` element).</span></span> <span data-ttu-id="a0d14-186">Ayrıca, `SecurityTutorialsSqlRoleProvider``applicationName` ayarını üyelik sağlayıcısı tarafından kullanılan `applicationName` ayarı olan `SecurityTutorials`olarak ayarlar (`SecurityTutorialsSqlMembershipProvider`).</span><span class="sxs-lookup"><span data-stu-id="a0d14-186">It also sets the `SecurityTutorialsSqlRoleProvider`'s `applicationName` setting to `SecurityTutorials`, which is the same `applicationName` setting used by the Membership provider (`SecurityTutorialsSqlMembershipProvider`).</span></span> <span data-ttu-id="a0d14-187">Burada gösterilmediğinden, `SqlRoleProvider` için [`<add>` öğesi](https://msdn.microsoft.com/library/ms164662.aspx) , veritabanı zaman aşımı süresini saniye cinsinden belirtmek için bir `commandTimeout` özniteliği de içerebilir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-187">While not shown here, the [`<add>` element](https://msdn.microsoft.com/library/ms164662.aspx) for the `SqlRoleProvider` may also contain a `commandTimeout` attribute to specify the database timeout duration, in seconds.</span></span> <span data-ttu-id="a0d14-188">Varsayılan değer 30 ' dur.</span><span class="sxs-lookup"><span data-stu-id="a0d14-188">The default value is 30.</span></span>

<span data-ttu-id="a0d14-189">Bu yapılandırma işaretlemesi varken, uygulamamız içinde rol işlevselliğini kullanmaya başlamaya hazırız.</span><span class="sxs-lookup"><span data-stu-id="a0d14-189">With this configuration markup in place, we are ready to start using role functionality within our application.</span></span>

> [!NOTE]
> <span data-ttu-id="a0d14-190">Yukarıdaki yapılandırma biçimlendirmesinde, &lt;`roleManager`&gt; öğesinin `enabled` ve `defaultProvider` özniteliklerinin kullanımı gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-190">The above configuration markup illustrates using the &lt;`roleManager`&gt; element's `enabled` and `defaultProvider` attributes.</span></span> <span data-ttu-id="a0d14-191">Rol çerçevesinin Kullanıcı bazında rol bilgilerini nasıl ilişkilendirdiğini etkileyen çeşitli öznitelikler vardır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-191">There are a number of other attributes that affect how the Roles framework associates role information on a user-by-user basis.</span></span> <span data-ttu-id="a0d14-192"><a id="_msoanchor_8"> </a> [*Rol tabanlı yetkilendirme*](role-based-authorization-cs.md) öğreticisinde bu ayarları inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="a0d14-192">We will examine these settings in the <a id="_msoanchor_8"></a>[*Role-Based Authorization*](role-based-authorization-cs.md) tutorial.</span></span>

## <a name="step-3-examining-the-roles-api"></a><span data-ttu-id="a0d14-193">3\. Adım: rol API 'sini Inceleme</span><span class="sxs-lookup"><span data-stu-id="a0d14-193">Step 3: Examining the Roles API</span></span>

<span data-ttu-id="a0d14-194">Roller çerçevesinin işlevselliği, rol tabanlı işlemleri gerçekleştirmek için on dört statik yöntem içeren [`Roles` sınıfı](https://msdn.microsoft.com/library/system.web.security.roles.aspx)aracılığıyla sunulur.</span><span class="sxs-lookup"><span data-stu-id="a0d14-194">The Roles framework's functionality is exposed via the [`Roles` class](https://msdn.microsoft.com/library/system.web.security.roles.aspx), which contains thirteen static methods for performing role-based operations.</span></span> <span data-ttu-id="a0d14-195">4 ve 6. adımlarda rol oluşturma ve silme konusunda baktığımızda, sistemden bir rol ekleyen veya bir rol ekleyen [`CreateRole`](https://msdn.microsoft.com/library/system.web.security.roles.createrole.aspx) ve [`DeleteRole`](https://msdn.microsoft.com/library/system.web.security.roles.deleterole.aspx) yöntemlerini kullanacağız.</span><span class="sxs-lookup"><span data-stu-id="a0d14-195">When we look at creating and deleting roles in Steps 4 and 6 we will use the [`CreateRole`](https://msdn.microsoft.com/library/system.web.security.roles.createrole.aspx) and [`DeleteRole`](https://msdn.microsoft.com/library/system.web.security.roles.deleterole.aspx) methods, which add or remove a role from the system.</span></span>

<span data-ttu-id="a0d14-196">Sistemdeki tüm rollerin bir listesini almak için [`GetAllRoles` yöntemi](https://msdn.microsoft.com/library/system.web.security.roles.getallroles.aspx) kullanın (bkz. 5. adım).</span><span class="sxs-lookup"><span data-stu-id="a0d14-196">To get a list of all of the roles in the system, use the [`GetAllRoles` method](https://msdn.microsoft.com/library/system.web.security.roles.getallroles.aspx) (see Step 5).</span></span> <span data-ttu-id="a0d14-197">[`RoleExists` yöntemi](https://msdn.microsoft.com/library/system.web.security.roles.roleexists.aspx) , belirtilen bir rolün var olup olmadığını gösteren bir Boole değeri döndürür.</span><span class="sxs-lookup"><span data-stu-id="a0d14-197">The [`RoleExists` method](https://msdn.microsoft.com/library/system.web.security.roles.roleexists.aspx) returns a Boolean value indicating whether a specified role exists.</span></span>

<span data-ttu-id="a0d14-198">Sonraki öğreticide, kullanıcıların rollerle nasıl ilişkilendirileceğini inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="a0d14-198">In the next tutorial we will examine how to associate users with roles.</span></span> <span data-ttu-id="a0d14-199">`Roles` sınıfın [`AddUserToRole`](https://msdn.microsoft.com/library/system.web.security.roles.addusertorole.aspx), [`AddUserToRoles`](https://msdn.microsoft.com/library/system.web.security.roles.addusertoroles.aspx), [`AddUsersToRole`](https://msdn.microsoft.com/library/system.web.security.roles.adduserstorole.aspx)ve [`AddUsersToRoles`](https://msdn.microsoft.com/library/system.web.security.roles.adduserstoroles.aspx) yöntemleri bir veya daha fazla role bir veya daha fazla kullanıcı ekler.</span><span class="sxs-lookup"><span data-stu-id="a0d14-199">The `Roles` class's [`AddUserToRole`](https://msdn.microsoft.com/library/system.web.security.roles.addusertorole.aspx), [`AddUserToRoles`](https://msdn.microsoft.com/library/system.web.security.roles.addusertoroles.aspx), [`AddUsersToRole`](https://msdn.microsoft.com/library/system.web.security.roles.adduserstorole.aspx), and [`AddUsersToRoles`](https://msdn.microsoft.com/library/system.web.security.roles.adduserstoroles.aspx) methods add one or more users to one or more roles.</span></span> <span data-ttu-id="a0d14-200">Kullanıcıları rollerden kaldırmak için [`RemoveUserFromRole`](https://msdn.microsoft.com/library/system.web.security.roles.removeuserfromrole.aspx), [`RemoveUserFromRoles`](https://msdn.microsoft.com/library/system.web.security.roles.removeuserfromroles.aspx), [`RemoveUsersFromRole`](https://msdn.microsoft.com/library/system.web.security.roles.removeusersfromrole.aspx)veya [`RemoveUsersFromRoles`](https://msdn.microsoft.com/library/system.web.security.roles.removeusersfromroles.aspx) yöntemlerini kullanın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-200">To remove users from roles, use the [`RemoveUserFromRole`](https://msdn.microsoft.com/library/system.web.security.roles.removeuserfromrole.aspx), [`RemoveUserFromRoles`](https://msdn.microsoft.com/library/system.web.security.roles.removeuserfromroles.aspx), [`RemoveUsersFromRole`](https://msdn.microsoft.com/library/system.web.security.roles.removeusersfromrole.aspx), or [`RemoveUsersFromRoles`](https://msdn.microsoft.com/library/system.web.security.roles.removeusersfromroles.aspx) methods.</span></span>

<span data-ttu-id="a0d14-201"><a id="_msoanchor_9"> </a> [*Rol tabanlı yetkilendirme*](role-based-authorization-cs.md) öğreticisinde, şu anda oturum açmış olan kullanıcının rolüne bağlı olarak işlevselliği programlı bir şekilde gösterme veya gizleme yollarına bakacağız.</span><span class="sxs-lookup"><span data-stu-id="a0d14-201">In the <a id="_msoanchor_9"></a>[*Role-Based Authorization*](role-based-authorization-cs.md) tutorial we will look at ways to programmatically show or hide functionality based on the currently logged in user's role.</span></span> <span data-ttu-id="a0d14-202">Bunu gerçekleştirmek için `Role` sınıfının [`FindUsersInRole`](https://msdn.microsoft.com/library/system.web.security.roles.findusersinrole.aspx), [`GetRolesForUser`](https://msdn.microsoft.com/library/system.web.security.roles.getrolesforuser.aspx), [`GetUsersInRole`](https://msdn.microsoft.com/library/system.web.security.roles.getusersinrole.aspx)veya [`IsUserInRole`](https://msdn.microsoft.com/library/system.web.security.roles.isuserinrole.aspx) yöntemlerini kullanabiliriz.</span><span class="sxs-lookup"><span data-stu-id="a0d14-202">To accomplish this, we can use the `Role` class's [`FindUsersInRole`](https://msdn.microsoft.com/library/system.web.security.roles.findusersinrole.aspx), [`GetRolesForUser`](https://msdn.microsoft.com/library/system.web.security.roles.getrolesforuser.aspx), [`GetUsersInRole`](https://msdn.microsoft.com/library/system.web.security.roles.getusersinrole.aspx), or [`IsUserInRole`](https://msdn.microsoft.com/library/system.web.security.roles.isuserinrole.aspx) methods.</span></span>

> [!NOTE]
> <span data-ttu-id="a0d14-203">Bu yöntemlerin birinin çağrılışında `Roles` sınıfı, yapılandırılan sağlayıcıya çağrıyı devreder.</span><span class="sxs-lookup"><span data-stu-id="a0d14-203">Keep in mind that any time one of these methods is invoked, the `Roles` class delegates the call to the configured provider.</span></span> <span data-ttu-id="a0d14-204">Bu durumda, çağrının `SqlRoleProvider`gönderildiği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-204">In our case, this means that the call is being sent to the `SqlRoleProvider`.</span></span> <span data-ttu-id="a0d14-205">`SqlRoleProvider`, çağrılan yönteme göre uygun veritabanı işlemini gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-205">The `SqlRoleProvider` then performs the appropriate database operation based on the invoked method.</span></span> <span data-ttu-id="a0d14-206">Örneğin, kod `Roles.CreateRole("Administrators")`, Yöneticiler adlı `aspnet_Roles` tabloya yeni bir kayıt ekleyen `aspnet_Roles_CreateRole` saklı yordamını yürüten `SqlRoleProvider` sonuçlanır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-206">For example, the code `Roles.CreateRole("Administrators")` results in the `SqlRoleProvider` executing the `aspnet_Roles_CreateRole` stored procedure, which inserts a new record into the `aspnet_Roles` table named Administrators .</span></span>

<span data-ttu-id="a0d14-207">Bu öğreticinin geri kalanı, sistemdeki rolleri yönetmek için `Roles` sınıfının `CreateRole`, `GetAllRoles`ve `DeleteRole` yöntemlerini kullanmaya bakar.</span><span class="sxs-lookup"><span data-stu-id="a0d14-207">The remainder of this tutorial looks at using the `Roles` class's `CreateRole`, `GetAllRoles`, and `DeleteRole` methods to manage the roles in the system.</span></span>

## <a name="step-4-creating-new-roles"></a><span data-ttu-id="a0d14-208">4\. Adım: yeni roller oluşturma</span><span class="sxs-lookup"><span data-stu-id="a0d14-208">Step 4: Creating New Roles</span></span>

<span data-ttu-id="a0d14-209">Roller, kullanıcıları rastgele gruplamak için bir yol sunar ve en yaygın olarak bu gruplandırma, yetkilendirme kuralları uygulamak için daha uygun bir yol için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-209">Roles offer a way to arbitrarily group users, and most commonly this grouping is used for a more convenient way to apply authorization rules.</span></span> <span data-ttu-id="a0d14-210">Ancak, rolleri bir yetkilendirme mekanizması olarak kullanmak için önce uygulamada bulunan rolleri tanımlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-210">But in order to use roles as an authorization mechanism we first need to define what roles exist in the application.</span></span> <span data-ttu-id="a0d14-211">Ne yazık ki, ASP.NET bir CreateRoleWizard denetimi içermez.</span><span class="sxs-lookup"><span data-stu-id="a0d14-211">Unfortunately, ASP.NET does not include a CreateRoleWizard control.</span></span> <span data-ttu-id="a0d14-212">Yeni roller eklemek için uygun bir kullanıcı arabirimi oluşturmak ve API kendimize rollerini çağırmak gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-212">In order to add new roles we need to create a suitable user interface and invoke the Roles API ourselves.</span></span> <span data-ttu-id="a0d14-213">İyi haber, bunun kolayca gerçekleştirilmesi çok kolaydır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-213">The good news is that this is very easy to accomplish.</span></span>

> [!NOTE]
> <span data-ttu-id="a0d14-214">CreateRoleWizard Web denetimi olmasa da, Web uygulamanızın yapılandırmasını görüntülemeye ve yönetmeye yardımcı olmak üzere tasarlanmış bir yerel ASP.NET uygulaması olan [ASP.NET Web sitesi yönetim aracı](https://msdn.microsoft.com/library/ms228053.aspx)vardır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-214">While there is no CreateRoleWizard Web control, there is the [ASP.NET Web Site Administration Tool](https://msdn.microsoft.com/library/ms228053.aspx), which is a local ASP.NET application designed to assist with viewing and managing your web application's configuration.</span></span> <span data-ttu-id="a0d14-215">Ancak, ASP.NET Web sitesi yönetim aracının iki nedenden dolayı büyük bir fanı olmadım.</span><span class="sxs-lookup"><span data-stu-id="a0d14-215">However, I am not a big fan of the ASP.NET Web Site Administration Tool for two reasons.</span></span> <span data-ttu-id="a0d14-216">İlk olarak, bu biraz hata yaşar ve Kullanıcı deneyimi istenen kadar çok kalır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-216">First, it is a bit buggy and the user experience leaves a lot to be desired.</span></span> <span data-ttu-id="a0d14-217">İkincisi, ASP.NET Web sitesi yönetim aracı yalnızca yerel olarak çalışacak şekilde tasarlanmıştır, yani canlı bir sitede rolleri uzaktan yönetmeniz gerekiyorsa kendi rol yönetimi Web sayfalarınızı oluşturmanız gerekecektir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-217">Second, the ASP.NET Web Site Administration Tool is designed to only work locally, meaning that you will have to build your own role management web pages if you need to manage roles on a live site remotely.</span></span> <span data-ttu-id="a0d14-218">Bu iki nedenden dolayı, bu öğretici ve bir sonraki, ASP.NET Web sitesi yönetim aracına güvenmek yerine, gerekli rol yönetim araçlarını bir Web sayfasında oluşturmaya odaklanacaktır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-218">For these two reasons, this tutorial and the next will focus on building the necessary role management tools in a web page rather than relying on the ASP.NET Web Site Administration Tool.</span></span>

<span data-ttu-id="a0d14-219">`Roles` klasöründeki `ManageRoles.aspx` sayfasını açın ve sayfaya bir TextBox ve bir Button Web denetimi ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a0d14-219">Open the `ManageRoles.aspx` page in the `Roles` folder and add a TextBox and a Button Web control to the page.</span></span> <span data-ttu-id="a0d14-220">TextBox denetiminin `ID` özelliğini `RoleName` ve düğmenin `ID` ve `Text` özellikleri sırasıyla `CreateRoleButton` ve rol oluştur olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-220">Set the TextBox control's `ID` property to `RoleName` and the Button's `ID` and `Text` properties to `CreateRoleButton` and Create Role, respectively.</span></span> <span data-ttu-id="a0d14-221">Bu noktada, sayfanızın bildirime dayalı biçimlendirmesi aşağıdakine benzer görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="a0d14-221">At this point, your page's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](creating-and-managing-roles-cs/samples/sample6.aspx)]

<span data-ttu-id="a0d14-222">Sonra, `Click` olay işleyicisi oluşturmak için tasarımcıda `CreateRoleButton` Button denetimine çift tıklayın ve ardından aşağıdaki kodu ekleyin:</span><span class="sxs-lookup"><span data-stu-id="a0d14-222">Next, double-click the `CreateRoleButton` Button control in the Designer to create a `Click` event handler and then add the following code:</span></span>

[!code-csharp[Main](creating-and-managing-roles-cs/samples/sample7.cs)]

<span data-ttu-id="a0d14-223">Yukarıdaki kod, `newRoleName` değişkenine `RoleName` metin kutusuna girilen bölünen rol adı atanarak başlatılır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-223">The above code starts by assigning the trimmed role name entered in the `RoleName` TextBox to the `newRoleName` variable.</span></span> <span data-ttu-id="a0d14-224">Daha sonra, rol `newRoleName` sistemde zaten mevcut olup olmadığını anlamak için `Roles` sınıfının `RoleExists` yöntemi çağırılır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-224">Next, the `Roles` class's `RoleExists` method is called to determine if the role `newRoleName` already exists in the system.</span></span> <span data-ttu-id="a0d14-225">Rol yoksa, `CreateRole` yöntemine yapılan bir çağrı aracılığıyla oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="a0d14-225">If the role does not exist, it is created via a call to the `CreateRole` method.</span></span> <span data-ttu-id="a0d14-226">`CreateRole` yöntemi sistemde zaten bulunan bir rol adı geçirtiyse, bir `ProviderException` özel durumu oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="a0d14-226">If the `CreateRole` method is passed a role name that already exists in the system, a `ProviderException` exception is thrown.</span></span> <span data-ttu-id="a0d14-227">Bu, kodun, `CreateRole`çağrılmadan önce rolün zaten sistemde mevcut olmadığından emin olmak için ilk kez kontrol eder.</span><span class="sxs-lookup"><span data-stu-id="a0d14-227">This is why the code first checks to ensure that the role does not already exist in the system before calling `CreateRole`.</span></span> <span data-ttu-id="a0d14-228">`Click` olay işleyicisi `RoleName` TextBox 'ın `Text` özelliğini temizleyerek sonlanır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-228">The `Click` event handler concludes by clearing out the `RoleName` TextBox's `Text` property.</span></span>

> [!NOTE]
> <span data-ttu-id="a0d14-229">Kullanıcı `RoleName` metin kutusuna herhangi bir değer girmezse ne olacağını merak ediyor olabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0d14-229">You may be wondering what will happen if the user doesn't enter any value into the `RoleName` TextBox.</span></span> <span data-ttu-id="a0d14-230">`CreateRole` yöntemine geçirilen değer `null` veya boş bir dize ise, bir özel durum oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="a0d14-230">If the value passed into the `CreateRole` method is `null` or an empty string, an exception is raised.</span></span> <span data-ttu-id="a0d14-231">Benzer şekilde, rol adı virgül içeriyorsa bir özel durum oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="a0d14-231">Likewise, if the role name contains a comma an exception is raised.</span></span> <span data-ttu-id="a0d14-232">Sonuç olarak, sayfa, kullanıcının bir rol girip hiç virgül içermediğinden emin olmak için doğrulama denetimleri içermelidir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-232">Consequently, the page should contain validation controls to ensure that the user enters a role and that it does not contain any commas.</span></span> <span data-ttu-id="a0d14-233">Okuyucu için alıştırma olarak bırakıyorum.</span><span class="sxs-lookup"><span data-stu-id="a0d14-233">I leave as an exercise for the reader.</span></span>

<span data-ttu-id="a0d14-234">Yöneticiler adlı bir rol oluşturalım.</span><span class="sxs-lookup"><span data-stu-id="a0d14-234">Let's create a role named Administrators.</span></span> <span data-ttu-id="a0d14-235">`ManageRoles.aspx` sayfasını bir tarayıcıda ziyaret edin, metin kutusuna Yöneticiler yazın (bkz. Şekil 3) ve ardından rol Oluştur düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-235">Visit the `ManageRoles.aspx` page through a browser, type in Administrators into the textbox (see Figure 3), and then click the Create Role button.</span></span>

<span data-ttu-id="a0d14-236">[![yönetici rolü oluşturma](creating-and-managing-roles-cs/_static/image8.png)](creating-and-managing-roles-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a0d14-236">[![Create an Administrators Role](creating-and-managing-roles-cs/_static/image8.png)](creating-and-managing-roles-cs/_static/image7.png)</span></span>

<span data-ttu-id="a0d14-237">**Şekil 3**: bir yönetici rolü oluşturma ([tam boyutlu görüntüyü görüntülemek için tıklayın](creating-and-managing-roles-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="a0d14-237">**Figure 3**: Create an Administrators Role  ([Click to view full-size image](creating-and-managing-roles-cs/_static/image9.png))</span></span>

<span data-ttu-id="a0d14-238">Ne olur?</span><span class="sxs-lookup"><span data-stu-id="a0d14-238">What happens?</span></span> <span data-ttu-id="a0d14-239">Geri gönderme gerçekleşir, ancak rolün sisteme gerçekten eklenmiş olduğu görsel bir ipucu yoktur.</span><span class="sxs-lookup"><span data-stu-id="a0d14-239">A postback occurs, but there's no visual cue that the role has actually been added to the system.</span></span> <span data-ttu-id="a0d14-240">Bu sayfayı, adım 5 ' te görsel geri bildirim içerecek şekilde güncelleştireceğiz.</span><span class="sxs-lookup"><span data-stu-id="a0d14-240">We will update this page in Step 5 to include visual feedback.</span></span> <span data-ttu-id="a0d14-241">Ancak şimdilik, `SecurityTutorials.mdf` veritabanına giderek ve `aspnet_Roles` tablosundan verileri görüntüleyerek rolün oluşturulduğunu doğrulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a0d14-241">For now, however, you can verify that the role was created by going to the `SecurityTutorials.mdf` database and displaying the data from the `aspnet_Roles` table.</span></span> <span data-ttu-id="a0d14-242">Şekil 4 ' te gösterildiği gibi, `aspnet_Roles` tablosu, yalnızca eklenen Yöneticiler rolleri için bir kayıt içerir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-242">As Figure 4 shows, the `aspnet_Roles` table contains a record for the just-added Administrators roles.</span></span>

<span data-ttu-id="a0d14-243">[![aspnet_Roles tablosunda Yöneticiler için bir satır bulunur](creating-and-managing-roles-cs/_static/image11.png)](creating-and-managing-roles-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="a0d14-243">[![The aspnet_Roles Table has a Row for the Administrators](creating-and-managing-roles-cs/_static/image11.png)](creating-and-managing-roles-cs/_static/image10.png)</span></span>

<span data-ttu-id="a0d14-244">**Şekil 4**: `aspnet_Roles` tablosu Yöneticiler Için bir satıra sahiptir ([tam boyutlu görüntüyü görüntülemek için tıklayın](creating-and-managing-roles-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="a0d14-244">**Figure 4**: The `aspnet_Roles` Table has a Row for the Administrators  ([Click to view full-size image](creating-and-managing-roles-cs/_static/image12.png))</span></span>

## <a name="step-5-displaying-the-roles-in-the-system"></a><span data-ttu-id="a0d14-245">5\. Adım: rolleri sistemde görüntüleme</span><span class="sxs-lookup"><span data-stu-id="a0d14-245">Step 5: Displaying the Roles in the System</span></span>

<span data-ttu-id="a0d14-246">`ManageRoles.aspx` sayfasını, sistemdeki geçerli rollerin bir listesini içerecek şekilde kullanalım.</span><span class="sxs-lookup"><span data-stu-id="a0d14-246">Let's augment the `ManageRoles.aspx` page to include a list of the current roles in the system.</span></span> <span data-ttu-id="a0d14-247">Bunu gerçekleştirmek için, sayfaya bir GridView denetimi ekleyin ve `ID` özelliğini `RoleList`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-247">To accomplish this, add a GridView control to the page and set its `ID` property to `RoleList`.</span></span> <span data-ttu-id="a0d14-248">Ardından, aşağıdaki kodu kullanarak, sayfanın arka plan kod sınıfına `DisplayRolesInGrid` bir yöntem ekleyin:</span><span class="sxs-lookup"><span data-stu-id="a0d14-248">Next, add a method to the page's code-behind class named `DisplayRolesInGrid` using the following code:</span></span>

[!code-csharp[Main](creating-and-managing-roles-cs/samples/sample8.cs)]

<span data-ttu-id="a0d14-249">`Roles` sınıfının `GetAllRoles` yöntemi, sistemdeki tüm rolleri dize dizisi olarak döndürür.</span><span class="sxs-lookup"><span data-stu-id="a0d14-249">The `Roles` class's `GetAllRoles` method returns all of the roles in the system as an array of strings.</span></span> <span data-ttu-id="a0d14-250">Bu dize dizisi daha sonra GridView 'a bağlanır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-250">This string array is then bound to the GridView.</span></span> <span data-ttu-id="a0d14-251">Sayfa ilk yüklendiğinde rol listesini GridView 'a bağlamak için, sayfanın `Page_Load` olay işleyicisinden `DisplayRolesInGrid` yöntemini çağırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-251">In order to bind the list of roles to the GridView when the page is first loaded, we need to call the `DisplayRolesInGrid` method from the page's `Page_Load` event handler.</span></span> <span data-ttu-id="a0d14-252">Aşağıdaki kod, sayfa ilk kez ziyaret edildiğinde, sonraki geri göndermeler üzerinde değil, bu yöntemi çağırır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-252">The following code calls this method when the page is first visited, but not on subsequent postbacks.</span></span>

[!code-csharp[Main](creating-and-managing-roles-cs/samples/sample9.cs)]

<span data-ttu-id="a0d14-253">Bu kodla birlikte, sayfayı bir tarayıcıdan ziyaret edin.</span><span class="sxs-lookup"><span data-stu-id="a0d14-253">With this code in place, visit the page through a browser.</span></span> <span data-ttu-id="a0d14-254">Şekil 5 ' i gösterdiği gibi, öğe etiketli tek sütunlu bir kılavuz görmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-254">As Figure 5 shows, you should see a grid with a single column labeled Item.</span></span> <span data-ttu-id="a0d14-255">Kılavuz 4. adımda eklediğimiz Yöneticiler rolü için bir satır içerir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-255">The grid includes a row for the Administrators role we added in Step 4.</span></span>

<span data-ttu-id="a0d14-256">[GridView ![rolleri tek bir sütunda görüntülüyor](creating-and-managing-roles-cs/_static/image14.png)](creating-and-managing-roles-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="a0d14-256">[![The GridView Displays the Roles in a Single Column](creating-and-managing-roles-cs/_static/image14.png)](creating-and-managing-roles-cs/_static/image13.png)</span></span>

<span data-ttu-id="a0d14-257">**Şekil 5**: GridView, rolleri tek bir sütunda görüntüler ([tam boyutlu görüntüyü görüntülemek için tıklayın](creating-and-managing-roles-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="a0d14-257">**Figure 5**: The GridView Displays the Roles in a Single Column  ([Click to view full-size image](creating-and-managing-roles-cs/_static/image15.png))</span></span>

<span data-ttu-id="a0d14-258">GridView, GridView 'un `AutoGenerateColumns` özelliği true olarak ayarlandığı için (varsayılan) GridView 'un `DataSource`her özellik için otomatik olarak bir sütun oluşturmasına neden olan bir tek sütunu, öğe olarak etiketlenmiş bir sütun görüntüler.</span><span class="sxs-lookup"><span data-stu-id="a0d14-258">The GridView displays a lone column labeled Item because the GridView's `AutoGenerateColumns` property is set to True (the default), which causes the GridView to automatically create a column for each property in its `DataSource`.</span></span> <span data-ttu-id="a0d14-259">Bir dizinin dizideki öğeleri temsil eden tek bir özelliği vardır, bu nedenle GridView 'daki tek sütun.</span><span class="sxs-lookup"><span data-stu-id="a0d14-259">An array has a single property that represents the elements in the array, hence the single column in the GridView.</span></span>

<span data-ttu-id="a0d14-260">GridView ile verileri görüntülerken, GridView tarafından örtülü olarak oluşturulmasını sağlamak yerine sütunlarımı açıkça tanımlamanızı tercih ediyorum.</span><span class="sxs-lookup"><span data-stu-id="a0d14-260">When displaying data with a GridView, I prefer to explicitly define my columns rather than have them implicitly generated by the GridView.</span></span> <span data-ttu-id="a0d14-261">Sütunları açıkça tanımlayarak, verileri biçimlendirmek, sütunları yeniden düzenlemek ve diğer ortak görevleri gerçekleştirmek çok daha kolaydır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-261">By explicitly defining the columns it is much easier to format the data, rearrange the columns, and perform other common tasks.</span></span> <span data-ttu-id="a0d14-262">Bu nedenle, sütunlarının açıkça tanımlanması için GridView 'un bildirim temelli işaretlemesini güncelleştirelim.</span><span class="sxs-lookup"><span data-stu-id="a0d14-262">Therefore, let's update the GridView's declarative markup so that its columns are explicitly defined.</span></span>

<span data-ttu-id="a0d14-263">GridView 'un `AutoGenerateColumns` özelliğini false olarak ayarlayarak başlayın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-263">Start by setting the GridView's `AutoGenerateColumns` property to False.</span></span> <span data-ttu-id="a0d14-264">Ardından, kılavuza bir TemplateField ekleyin, `HeaderText` özelliğini roller olarak ayarlayın ve `ItemTemplate` dizinin içeriğini görüntüleyecek şekilde yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-264">Next, add a TemplateField to the grid, set its `HeaderText` property to Roles, and configure its `ItemTemplate` so that it displays the contents of the array.</span></span> <span data-ttu-id="a0d14-265">Bunu gerçekleştirmek için, `ItemTemplate` `RoleNameLabel` adlı bir etiket Web denetimi ekleyin ve `Text` özelliğini `Container.DataItem`bağlayın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-265">To accomplish this, add a Label Web control named `RoleNameLabel` to the `ItemTemplate` and bind its `Text` property to `Container.DataItem`.</span></span>

<span data-ttu-id="a0d14-266">Bu özellikler ve `ItemTemplate`içerikleri bildirimli olarak veya GridView 'un alanlar iletişim kutusu ve düzenleme şablonları arabirimi aracılığıyla ayarlanabilir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-266">These properties and the `ItemTemplate`'s contents can be set declaratively or through the GridView's Fields dialog box and Edit Templates interface.</span></span> <span data-ttu-id="a0d14-267">Alanlar iletişim kutusuna ulaşmak için GridView 'un akıllı etiketindeki sütunları düzenle bağlantısına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-267">To reach the Fields dialog box, click the Edit Columns link in the GridView's Smart Tag.</span></span> <span data-ttu-id="a0d14-268">Sonra, `AutoGenerateColumns` özelliğini false olarak ayarlamak için alanları otomatik oluştur onay kutusunun işaretini kaldırın ve GridView 'a bir TemplateField ekleyin ve `HeaderText` özelliğini role olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-268">Next, uncheck the Auto-generate fields checkbox to set the `AutoGenerateColumns` property to False, and add a TemplateField to the GridView, setting its `HeaderText` property to Role.</span></span> <span data-ttu-id="a0d14-269">`ItemTemplate`içeriğini tanımlamak için GridView 'un akıllı etiketindeki Şablonları Düzenle seçeneğini belirleyin.</span><span class="sxs-lookup"><span data-stu-id="a0d14-269">To define the `ItemTemplate`'s contents, choose the Edit Templates option from the GridView's Smart Tag.</span></span> <span data-ttu-id="a0d14-270">Bir etiket Web denetimini `ItemTemplate`sürükleyin, `ID` özelliğini `RoleNameLabel`olarak ayarlayın ve `Text` özelliğinin `Container.DataItem`'e bağlanması için veri bağlama ayarlarını yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-270">Drag a Label Web control onto the `ItemTemplate`, set its `ID` property to `RoleNameLabel`, and configure its databinding settings so that its `Text` property is bound to `Container.DataItem`.</span></span>

<span data-ttu-id="a0d14-271">Kullandığınız yaklaşımdan bağımsız olarak, oluşturduğunuz zaman, GridView 'un elde edilen bildirim zaman biçimlendirmesi aşağıdakine benzer görünmelidir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-271">Regardless of what approach you use, the GridView's resulting declarative markup should look similar to the following when you are done.</span></span>

[!code-aspx[Main](creating-and-managing-roles-cs/samples/sample10.aspx)]

> [!NOTE]
> <span data-ttu-id="a0d14-272">Dizinin içerikleri, `<%# Container.DataItem %>`DataBinding sözdizimi kullanılarak görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-272">The array's contents are displayed using the databinding syntax `<%# Container.DataItem %>`.</span></span> <span data-ttu-id="a0d14-273">GridView 'a göre bir dizinin içeriğini görüntülerken bu sözdiziminin neden kullanıldığı hakkında kapsamlı bir açıklama, Bu öğreticinin kapsamının dışındadır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-273">A thorough description of why this syntax is used when displaying the contents of an array bound to the GridView is beyond the scope of this tutorial.</span></span> <span data-ttu-id="a0d14-274">Bu konuyla ilgili daha fazla bilgi için, bir [skalar diziyi veri Web denetimine bağlama](http://aspnet.4guysfromrolla.com/articles/082504-1.aspx)konusuna bakın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-274">For more information on this matter, refer to [Binding a Scalar Array to a Data Web Control](http://aspnet.4guysfromrolla.com/articles/082504-1.aspx).</span></span>

<span data-ttu-id="a0d14-275">Şu anda, `RoleList` GridView yalnızca sayfa ilk kez ziyaret edildiğinde rol listesine bağlanır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-275">Currently, the `RoleList` GridView is only bound to the list of roles when the page is first visited.</span></span> <span data-ttu-id="a0d14-276">Her yeni rol eklendiğinde Kılavuzu yenilememiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-276">We need to refresh the grid whenever a new role is added.</span></span> <span data-ttu-id="a0d14-277">Bunu gerçekleştirmek için, yeni bir rol oluşturulduysa `CreateRoleButton` düğmenin `Click` olay işleyicisini `DisplayRolesInGrid` yöntemini çağıracak şekilde güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="a0d14-277">To accomplish this, update the `CreateRoleButton` Button's `Click` event handler so that it calls the `DisplayRolesInGrid` method if a new role is created.</span></span>

[!code-csharp[Main](creating-and-managing-roles-cs/samples/sample11.cs)]

<span data-ttu-id="a0d14-278">Artık Kullanıcı yeni bir rol eklediğinde `RoleList` GridView, geri gönderme sırasında hemen eklenen rolü gösterir ve bu da rolün başarıyla oluşturulduğu görsel geri bildirim sağlar.</span><span class="sxs-lookup"><span data-stu-id="a0d14-278">Now when the user adds a new role the `RoleList` GridView shows the just-added role on postback, providing visual feedback that the role was successfully created.</span></span> <span data-ttu-id="a0d14-279">Bunu göstermek için, bir tarayıcı aracılığıyla `ManageRoles.aspx` sayfasını ziyaret edin ve Supervisors adlı bir rol ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a0d14-279">To illustrate this, visit the `ManageRoles.aspx` page through a browser and add a role named Supervisors.</span></span> <span data-ttu-id="a0d14-280">Rol Oluştur düğmesine tıklandıktan sonra, bir geri gönderme yapılır ve kılavuz, yeni rol, süper yönetici ve yöneticiler dahil olmak üzere günceldir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-280">Upon clicking the Create Role button, a postback will ensue and the grid will update to include Administrators as well as the new role, Supervisors.</span></span>

<span data-ttu-id="a0d14-281">[![ana bilgisayar rolü eklendi](creating-and-managing-roles-cs/_static/image17.png)](creating-and-managing-roles-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="a0d14-281">[![The Supervisors Role has Been Added](creating-and-managing-roles-cs/_static/image17.png)](creating-and-managing-roles-cs/_static/image16.png)</span></span>

<span data-ttu-id="a0d14-282">**Şekil 6**: Supervisors rolü eklendi ([tam boyutlu görüntüyü görüntülemek için tıklayın](creating-and-managing-roles-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="a0d14-282">**Figure 6**: The Supervisors Role has Been Added  ([Click to view full-size image](creating-and-managing-roles-cs/_static/image18.png))</span></span>

## <a name="step-6-deleting-roles"></a><span data-ttu-id="a0d14-283">6\. Adım: rolleri silme</span><span class="sxs-lookup"><span data-stu-id="a0d14-283">Step 6: Deleting Roles</span></span>

<span data-ttu-id="a0d14-284">Bu noktada, bir Kullanıcı yeni bir rol oluşturabilir ve `ManageRoles.aspx` sayfasından tüm mevcut rolleri görüntüleyebilir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-284">At this point a user can create a new role and view all existing roles from the `ManageRoles.aspx` page.</span></span> <span data-ttu-id="a0d14-285">Ayrıca kullanıcıların rolleri silmesine izin verlim.</span><span class="sxs-lookup"><span data-stu-id="a0d14-285">Let's allow users to also delete roles.</span></span> <span data-ttu-id="a0d14-286">`Roles.DeleteRole` yönteminin iki aşırı yüklemesi vardır:</span><span class="sxs-lookup"><span data-stu-id="a0d14-286">The `Roles.DeleteRole` method has two overloads:</span></span>

- <span data-ttu-id="a0d14-287">[`DeleteRole(roleName)`](https://msdn.microsoft.com/library/ek4sywc0.aspx) - *roleName*rolünü siler.</span><span class="sxs-lookup"><span data-stu-id="a0d14-287">[`DeleteRole(roleName)`](https://msdn.microsoft.com/library/ek4sywc0.aspx) - deletes the role *roleName*.</span></span> <span data-ttu-id="a0d14-288">Rol bir veya daha fazla üye içeriyorsa bir özel durum oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="a0d14-288">An exception is thrown if the role contains one or more members.</span></span>
- <span data-ttu-id="a0d14-289">[`DeleteRole(roleName, throwOnPopulatedRole)`](https://msdn.microsoft.com/library/38h6wf59.aspx) - *roleName*rolünü siler.</span><span class="sxs-lookup"><span data-stu-id="a0d14-289">[`DeleteRole(roleName, throwOnPopulatedRole)`](https://msdn.microsoft.com/library/38h6wf59.aspx) - deletes the role *roleName*.</span></span> <span data-ttu-id="a0d14-290">*ThrowOnPopulateRole* `true`ise, rol bir veya daha fazla üye içeriyorsa bir özel durum oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="a0d14-290">If *throwOnPopulateRole* is `true`, then an exception is thrown if the role contains one or more members.</span></span> <span data-ttu-id="a0d14-291">*ThrowOnPopulateRole* `false`ise, rol, üye içerip içermediğini değil, silinir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-291">If *throwOnPopulateRole* is `false`, then the role is deleted whether it contains any members or not.</span></span> <span data-ttu-id="a0d14-292">Dahili olarak, `DeleteRole(roleName)` yöntemi `DeleteRole(roleName, true)`çağırır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-292">Internally, the `DeleteRole(roleName)` method calls `DeleteRole(roleName, true)`.</span></span>

<span data-ttu-id="a0d14-293">*Rolename* `null` veya boş bir dize veya *roleName* bir virgül içeriyorsa `DeleteRole` yöntemi de bir özel durum oluşturur.</span><span class="sxs-lookup"><span data-stu-id="a0d14-293">The `DeleteRole` method will also throw an exception if *roleName* is `null` or an empty string or if *roleName* contains a comma.</span></span> <span data-ttu-id="a0d14-294">*RoleName* sistemde yoksa, `DeleteRole` özel durum oluşturmadan sessizce başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="a0d14-294">If *roleName* does not exist in the system, `DeleteRole` fails silently, without raising an exception.</span></span>

<span data-ttu-id="a0d14-295">`ManageRoles.aspx` ' deki GridView 'u, tıklandığı zaman seçili rolü sildiği bir Delete düğmesi içerecek şekilde kullanalım.</span><span class="sxs-lookup"><span data-stu-id="a0d14-295">Let's augment the GridView in `ManageRoles.aspx` to include a Delete button that, when clicked, deletes the selected role.</span></span> <span data-ttu-id="a0d14-296">Alanlar iletişim kutusuna gidip CommandField seçeneğinin altında bulunan bir Delete düğmesi ekleyerek GridView 'a bir Delete düğmesi ekleyerek başlayın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-296">Start by adding a Delete button to the GridView by going to the Fields dialog box and adding a Delete button, which is located under the CommandField option.</span></span> <span data-ttu-id="a0d14-297">Sil düğmesini en soldaki sütunda yapın ve `DeleteText` özelliğini rol sil olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="a0d14-297">Make the Delete button the far left column and set its `DeleteText` property to Delete Role .</span></span>

<span data-ttu-id="a0d14-298">[![RoleList GridView öğesine Delete düğmesi ekleyin](creating-and-managing-roles-cs/_static/image20.png)](creating-and-managing-roles-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="a0d14-298">[![Add a Delete Button to the RoleList GridView](creating-and-managing-roles-cs/_static/image20.png)](creating-and-managing-roles-cs/_static/image19.png)</span></span>

<span data-ttu-id="a0d14-299">**Şekil 7**: `RoleList` GridView 'A bir Delete düğmesi ekleyin ([tam boyutlu görüntüyü görüntülemek için tıklayın](creating-and-managing-roles-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="a0d14-299">**Figure 7**: Add a Delete Button to the `RoleList` GridView  ([Click to view full-size image](creating-and-managing-roles-cs/_static/image21.png))</span></span>

<span data-ttu-id="a0d14-300">Sil düğmesi eklendikten sonra, GridView 'un bildirime dayalı biçimlendirmesi aşağıdakine benzer olmalıdır:</span><span class="sxs-lookup"><span data-stu-id="a0d14-300">After adding the Delete button, your GridView's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](creating-and-managing-roles-cs/samples/sample12.aspx)]

<span data-ttu-id="a0d14-301">Sonra, GridView 'un `RowDeleting` olayı için bir olay işleyicisi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="a0d14-301">Next, create an event handler for the GridView's `RowDeleting` event.</span></span> <span data-ttu-id="a0d14-302">Bu, rol Sil düğmesine tıklandığında geri gönderme sırasında oluşturulan olaydır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-302">This is the event that is raised on postback when the Delete Role button is clicked.</span></span> <span data-ttu-id="a0d14-303">Olay işleyicisine aşağıdaki kodu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a0d14-303">Add the following code to the event handler.</span></span>

[!code-csharp[Main](creating-and-managing-roles-cs/samples/sample13.cs)]

<span data-ttu-id="a0d14-304">Kod, rol Sil düğmesine tıklandığı satırdaki `RoleNameLabel` Web denetimine programlı olarak başvuruda bulunarak başlatılır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-304">The code starts by programmatically referencing the `RoleNameLabel` Web control in the row whose Delete Role button was clicked.</span></span> <span data-ttu-id="a0d14-305">`Roles.DeleteRole` yöntemi daha sonra çağrılır, `RoleNameLabel` ve `false``Text` geçirerek rolü ile ilişkili herhangi bir kullanıcı olup olmamasına bakılmaksızın rolü de silinir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-305">The `Roles.DeleteRole` method is then invoked, passing in the `Text` of the `RoleNameLabel` and `false`, thereby deleting the role regardless of whether there are any users associated with the role.</span></span> <span data-ttu-id="a0d14-306">Son olarak, `RoleList` GridView yenilenir, böylece yalnızca, silinen rol artık kılavuzda görünmez.</span><span class="sxs-lookup"><span data-stu-id="a0d14-306">Finally, the `RoleList` GridView is refreshed so that the just-deleted role no longer appears in the grid.</span></span>

> [!NOTE]
> <span data-ttu-id="a0d14-307">Rolü Sil düğmesi, rolü silmeden önce kullanıcıdan herhangi bir onay sıralaması gerektirmez.</span><span class="sxs-lookup"><span data-stu-id="a0d14-307">The Delete Role button does not require any sort of confirmation from the user before deleting the role.</span></span> <span data-ttu-id="a0d14-308">Bir eylemi onaylamaya yönelik en kolay yollarından biri, istemci tarafı onaylama iletişim kutusunu kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-308">One of the easiest ways to confirm an action is through a client-side confirm dialog box.</span></span> <span data-ttu-id="a0d14-309">Bu teknik hakkında daha fazla bilgi için bkz. [silerken Istemci tarafı onaylama ekleme](https://asp.net/learn/data-access/tutorial-42-cs.aspx).</span><span class="sxs-lookup"><span data-stu-id="a0d14-309">For more information on this technique, see [Adding Client-Side Confirmation When Deleting](https://asp.net/learn/data-access/tutorial-42-cs.aspx).</span></span>

## <a name="summary"></a><span data-ttu-id="a0d14-310">Özet</span><span class="sxs-lookup"><span data-stu-id="a0d14-310">Summary</span></span>

<span data-ttu-id="a0d14-311">Birçok Web uygulamasının belirli yetkilendirme kuralları veya yalnızca belirli kullanıcı sınıfları tarafından kullanılabilen sayfa düzeyi işlevleri vardır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-311">Many web applications have certain authorization rules or page-level functionality that is only available to certain classes of users.</span></span> <span data-ttu-id="a0d14-312">Örneğin, yalnızca yöneticilerin erişebileceği bir Web sayfaları kümesi olabilir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-312">For example, there may be a set of web pages that only administrators can access.</span></span> <span data-ttu-id="a0d14-313">Bu yetkilendirme kurallarını bir kullanıcı temelinde tanımlamak yerine, kuralları bir role göre tanımlamak daha yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-313">Rather than defining these authorization rules on a user-by-user basis, oftentimes it is more useful to define the rules based on a role.</span></span> <span data-ttu-id="a0d14-314">Diğer bir deyişle, Scott ve Jisun 'ın Yönetim Web sayfalarına erişmesine açıkça izin vermek yerine, daha sürdürülebilir bir yaklaşım Yöneticiler rolünün üyelerinin bu sayfalara erişmesine izin vermek ve ardından Scott ve Jisun 'ın Yöneticiler rolü.</span><span class="sxs-lookup"><span data-stu-id="a0d14-314">That is, rather than explicitly allowing users Scott and Jisun to access the administrative web pages, a more maintainable approach is to permit members of the Administrators role to access these pages, and then to denote Scott and Jisun as users belonging to the Administrators role.</span></span>

<span data-ttu-id="a0d14-315">Rol çerçevesi, rolleri oluşturmayı ve yönetmeyi kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="a0d14-315">The Roles framework makes it easy to create and manage roles.</span></span> <span data-ttu-id="a0d14-316">Bu öğreticide roller çerçevesinin rol deposu olarak bir Microsoft SQL Server veritabanı kullanan `SqlRoleProvider`kullanmak için nasıl yapılandırılacağı incelendi.</span><span class="sxs-lookup"><span data-stu-id="a0d14-316">In this tutorial we examined how to configure the Roles framework to use the `SqlRoleProvider`, which uses a Microsoft SQL Server database as the role store.</span></span> <span data-ttu-id="a0d14-317">Ayrıca, sistemde var olan rolleri listeleyen bir Web sayfası Oluşturulduk ve yeni rollerin oluşturulmasına ve mevcut olanların silinmesine izin verir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-317">We also created a web page that lists the existing roles in the system and allows for new roles to be created and existing ones to be deleted.</span></span> <span data-ttu-id="a0d14-318">Sonraki öğreticilerde, rollerin kullanıcılara nasıl atanacağını ve rol tabanlı yetkilendirmeyi nasıl uygulayacağınızı görüyoruz.</span><span class="sxs-lookup"><span data-stu-id="a0d14-318">In subsequent tutorials we will see how to assign users to roles and how to apply role-based authorization.</span></span>

<span data-ttu-id="a0d14-319">Programlamanın kutlu olsun!</span><span class="sxs-lookup"><span data-stu-id="a0d14-319">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="a0d14-320">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="a0d14-320">Further Reading</span></span>

<span data-ttu-id="a0d14-321">Bu öğreticide ele alınan konular hakkında daha fazla bilgi için aşağıdaki kaynaklara bakın:</span><span class="sxs-lookup"><span data-stu-id="a0d14-321">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="a0d14-322">ASP.NET 2.0 'ın üyeliğini, rollerini ve profilini İnceleme</span><span class="sxs-lookup"><span data-stu-id="a0d14-322">Examining ASP.NET 2.0's Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="a0d14-323">Nasıl yapılır: ASP.NET 2,0 ' de rol yöneticisini kullanma</span><span class="sxs-lookup"><span data-stu-id="a0d14-323">How To: Use Role Manager in ASP.NET 2.0</span></span>](https://msdn.microsoft.com/library/ms998314.aspx)
- [<span data-ttu-id="a0d14-324">Rol sağlayıcıları</span><span class="sxs-lookup"><span data-stu-id="a0d14-324">Role Providers</span></span>](https://msdn.microsoft.com/library/aa478950.aspx)
- [<span data-ttu-id="a0d14-325">Kendi web sitesi yönetim aracınızı toplama</span><span class="sxs-lookup"><span data-stu-id="a0d14-325">Rolling Your Own Website Administration Tool</span></span>](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)
- [<span data-ttu-id="a0d14-326">`<roleManager>` öğesi için teknik belgeler</span><span class="sxs-lookup"><span data-stu-id="a0d14-326">Technical documentation for the `<roleManager>` Element</span></span>](https://msdn.microsoft.com/library/ms164660.aspx)
- [<span data-ttu-id="a0d14-327">Üyelik ve rol Yöneticisi API 'Lerini kullanma</span><span class="sxs-lookup"><span data-stu-id="a0d14-327">Using the Membership and Role Manager APIs</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/security/membership.aspx)

### <a name="about-the-author"></a><span data-ttu-id="a0d14-328">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="a0d14-328">About the Author</span></span>

<span data-ttu-id="a0d14-329">Birden çok ASP/ASP. NET Books ve 4GuysFromRolla.com 'in yazarı Scott Mitchell, 1998 sürümünden bu yana Microsoft Web teknolojileriyle birlikte çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="a0d14-329">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a0d14-330">Scott bağımsız danışman, Trainer ve yazıcı olarak çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="a0d14-330">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a0d14-331">En son kitabı, *[24 saat içinde ASP.NET 2,0 kendi kendinize eğitim](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)* ister.</span><span class="sxs-lookup"><span data-stu-id="a0d14-331">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="a0d14-332">Scott 'a [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) veya blogundan [http://ScottOnWriting.NET](http://scottonwriting.net/)üzerinden erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-332">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="a0d14-333">Özel olarak teşekkürler</span><span class="sxs-lookup"><span data-stu-id="a0d14-333">Special Thanks To</span></span>

<span data-ttu-id="a0d14-334">Bu öğretici serisi birçok yararlı gözden geçirenler tarafından incelendi.</span><span class="sxs-lookup"><span data-stu-id="a0d14-334">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="a0d14-335">Bu öğreticide lider gözden geçirenler, Alicja Maziarz, suchi Banerjee ve Teresa Murphy ' i içerir.</span><span class="sxs-lookup"><span data-stu-id="a0d14-335">Lead reviewers for this tutorial include Alicja Maziarz, Suchi Banerjee, and Teresa Murphy.</span></span> <span data-ttu-id="a0d14-336">Yaklaşan MSDN makalelerimi gözden geçiriyor musunuz?</span><span class="sxs-lookup"><span data-stu-id="a0d14-336">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="a0d14-337">Öyleyse, beni [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) bir satır bırakın</span><span class="sxs-lookup"><span data-stu-id="a0d14-337">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="a0d14-338">Next</span><span class="sxs-lookup"><span data-stu-id="a0d14-338">Next</span></span>](assigning-roles-to-users-cs.md)
