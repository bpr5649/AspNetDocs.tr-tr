---
uid: web-forms/overview/older-versions-security/introduction/an-overview-of-forms-authentication-cs
title: Forms kimlik doğrulamasına genel bakış (C#) | Microsoft Docs
author: rick-anderson
description: Özel rotalar oluşturma
ms.author: riande
ms.date: 01/14/2008
ms.assetid: de2d65b9-aadc-42ba-abe1-4e87e66521a0
msc.legacyurl: /web-forms/overview/older-versions-security/introduction/an-overview-of-forms-authentication-cs
msc.type: authoredcontent
ms.openlocfilehash: 009c3f84e00d648ede4a15e530ceac2d23e01eec
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74620747"
---
# <a name="an-overview-of-forms-authentication-c"></a><span data-ttu-id="6cace-103">Forms Authentication 'A (C#) genel bakış</span><span class="sxs-lookup"><span data-stu-id="6cace-103">An Overview of Forms Authentication (C#)</span></span>

<span data-ttu-id="6cace-104">[Scott Mitchell](https://twitter.com/ScottOnWriting) tarafından</span><span class="sxs-lookup"><span data-stu-id="6cace-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="6cace-105">[Kodu indirin](https://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/ASPNET_Security_Tutorial_02_CS.zip) veya [PDF 'yi indirin](https://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/aspnet_tutorial02_FormsAuth_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="6cace-105">[Download Code](https://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/ASPNET_Security_Tutorial_02_CS.zip) or [Download PDF](https://download.microsoft.com/download/2/F/7/2F705A34-F9DE-4112-BBDE-60098089645E/aspnet_tutorial02_FormsAuth_cs.pdf)</span></span>

> <span data-ttu-id="6cace-106">Bu öğreticide, boyutundaydı tartışmadan uygulamaya ekleyeceğiz; Özellikle, form kimlik doğrulamasını uygulama bölümüne bakacağız.</span><span class="sxs-lookup"><span data-stu-id="6cace-106">In this tutorial we will turn from mere discussion to implementation; in particular, we will look at implementing forms authentication.</span></span> <span data-ttu-id="6cace-107">Bu öğreticide oluşturacağız başlatdığımız Web uygulaması, basit form kimlik doğrulamasından üyelik ve rollere geçtiğimiz için sonraki öğreticilerde derlenmeye devam edecektir.</span><span class="sxs-lookup"><span data-stu-id="6cace-107">The web application we start constructing in this tutorial will continue to be built upon in subsequent tutorials, as we move from simple forms authentication to membership and roles.</span></span>
> 
> <span data-ttu-id="6cace-108">Bu konu hakkında daha fazla bilgi için bkz. [ASP.net Içinde temel form kimlik doğrulaması kullanma](../../../videos/authentication/using-basic-forms-authentication-in-aspnet.md).</span><span class="sxs-lookup"><span data-stu-id="6cace-108">Please see this video for more information on this topic: [Using Basic Forms Authentication in ASP.NET](../../../videos/authentication/using-basic-forms-authentication-in-aspnet.md).</span></span>

## <a name="introduction"></a><span data-ttu-id="6cace-109">Giriş</span><span class="sxs-lookup"><span data-stu-id="6cace-109">Introduction</span></span>

<span data-ttu-id="6cace-110">[Önceki öğreticide](security-basics-and-asp-net-support-cs.md) , ASP.NET tarafından sunulan çeşitli kimlik doğrulama, yetkilendirme ve Kullanıcı hesabı seçeneklerini tartıştık.</span><span class="sxs-lookup"><span data-stu-id="6cace-110">In the [preceding tutorial](security-basics-and-asp-net-support-cs.md) we discussed the various authentication, authorization, and user account options provided by ASP.NET.</span></span> <span data-ttu-id="6cace-111">Bu öğreticide, boyutundaydı tartışmadan uygulamaya ekleyeceğiz; Özellikle, form kimlik doğrulamasını uygulama bölümüne bakacağız.</span><span class="sxs-lookup"><span data-stu-id="6cace-111">In this tutorial we will turn from mere discussion to implementation; in particular, we will look at implementing forms authentication.</span></span> <span data-ttu-id="6cace-112">Bu öğreticide oluşturacağız başlatdığımız Web uygulaması, basit form kimlik doğrulamasından üyelik ve rollere geçtiğimiz için sonraki öğreticilerde derlenmeye devam edecektir.</span><span class="sxs-lookup"><span data-stu-id="6cace-112">The web application we start constructing in this tutorial will continue to be built upon in subsequent tutorials, as we move from simple forms authentication to membership and roles.</span></span>

<span data-ttu-id="6cace-113">Bu öğreticide, önceki öğreticide dokunduğumuz bir konu, Forms kimlik doğrulaması iş akışında ayrıntılı bir bakış ile başlar.</span><span class="sxs-lookup"><span data-stu-id="6cace-113">This tutorial begins with an in-depth look at the forms authentication workflow, a topic we touched upon in the previous tutorial.</span></span> <span data-ttu-id="6cace-114">Bunu izleyerek, form kimlik doğrulaması kavramlarını tanıtıtacak bir ASP.NET Web sitesi oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="6cace-114">Following that, we will create an ASP.NET website through which to demo the concepts of forms authentication.</span></span> <span data-ttu-id="6cace-115">Daha sonra, siteyi Forms kimlik doğrulamasını kullanacak şekilde yapılandıracağız, basit bir oturum açma sayfası oluşturacak ve bir kullanıcının kimlik doğrulamasının yapılıp yapılmayacağını ve bu durumda oturum açtıkları Kullanıcı adının nasıl belirleneceğini öğreneceksiniz.</span><span class="sxs-lookup"><span data-stu-id="6cace-115">Next, we will configure the site to use forms authentication, create a simple login page, and see how to determine, in code, whether a user is authenticated and, if so, the username they logged in with.</span></span>

<span data-ttu-id="6cace-116">Form kimlik doğrulaması iş akışını anlamak, bir Web uygulamasında etkinleştirmek ve oturum açma ve oturum kapatma sayfalarının oluşturulması, Kullanıcı hesaplarını destekleyen bir ASP.NET uygulaması oluşturma ve bir Web sayfası aracılığıyla kullanıcıların kimliğini doğrulama konusunda önemli adımlardır.</span><span class="sxs-lookup"><span data-stu-id="6cace-116">Understanding the forms authentication workflow, enabling it in a web application, and creating the login and logoff pages are all vital steps in building an ASP.NET application that supports user accounts and authenticates users through a web page.</span></span> <span data-ttu-id="6cace-117">Bu nedenle ve bu öğreticiler bir diğeri üzerine inşa edildiğinden, geçmiş projelerde form kimlik doğrulamasını yapılandırma konusunda deneyim almış olsanız bile, Bu öğreticiye geçmeden önce Bu öğreticide geçiş yapmak için size tam olarak çalışmanız önerilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-117">Because of this – and because these tutorials build upon one another - I would encourage you to work through this tutorial in full before moving on to the next one even if you already have had experience configuring forms authentication in past projects.</span></span>

## <a name="understanding-the-forms-authentication-workflow"></a><span data-ttu-id="6cace-118">Forms kimlik doğrulaması Iş akışını anlama</span><span class="sxs-lookup"><span data-stu-id="6cace-118">Understanding the Forms Authentication Workflow</span></span>

<span data-ttu-id="6cace-119">ASP.NET çalışma zamanı, bir ASP.NET sayfası veya ASP.NET Web hizmeti gibi bir ASP.NET kaynağı için isteği işlediğinde, istek yaşam döngüsü boyunca birkaç olay oluşturur.</span><span class="sxs-lookup"><span data-stu-id="6cace-119">When the ASP.NET runtime processes a request for an ASP.NET resource, such as an ASP.NET page or ASP.NET Web service, the request raises a number of events during its lifecycle.</span></span> <span data-ttu-id="6cace-120">İsteğin çok başında ve çok sonunda oluşturulan, isteğin kimlik doğrulaması yapıldığında ve yetkilendirildiğinde, işlenmemiş bir özel durum durumunda oluşturulan bir olay ve bu şekilde gerçekleştirilen olaylar vardır.</span><span class="sxs-lookup"><span data-stu-id="6cace-120">There are events raised at the very beginning and very end of the request, ones raised when the request is being authenticated and authorized, an event raised in the case of an unhandled exception, and so forth.</span></span> <span data-ttu-id="6cace-121">Olayların tüm listesini görmek için [HttpApplication nesnesinin olaylarına](https://msdn.microsoft.com/library/system.web.httpapplication_events.aspx)bakın.</span><span class="sxs-lookup"><span data-stu-id="6cace-121">To see a complete listing of the events, refer to the [HttpApplication object's events](https://msdn.microsoft.com/library/system.web.httpapplication_events.aspx).</span></span>

<span data-ttu-id="6cace-122">*Http modülleri* , kodu istek yaşam döngüsünde belirli bir olaya yanıt olarak yürütülen yönetilen sınıflardır.</span><span class="sxs-lookup"><span data-stu-id="6cace-122">*HTTP Modules* are managed classes whose code is executed in response to a particular event in the request lifecycle.</span></span> <span data-ttu-id="6cace-123">ASP.NET, arka planda önemli görevleri gerçekleştiren bir dizi HTTP modülleriyle birlikte gelir.</span><span class="sxs-lookup"><span data-stu-id="6cace-123">ASP.NET ships with a number of HTTP Modules that perform essential tasks behind the scenes.</span></span> <span data-ttu-id="6cace-124">Özellikle Tartışmayla ilgili olan iki yerleşik HTTP modülü şunlardır:</span><span class="sxs-lookup"><span data-stu-id="6cace-124">Two built-in HTTP Modules that are especially relevant to our discussion are:</span></span>

- <span data-ttu-id="6cace-125">**[`FormsAuthenticationModule`](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx)** – genellikle kullanıcının tanımlama bilgileri koleksiyonuna dahil edilen Forms kimlik doğrulama biletini inceleyerek kullanıcının kimliğini doğrular.</span><span class="sxs-lookup"><span data-stu-id="6cace-125">**[`FormsAuthenticationModule`](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx)** – authenticates the user by inspecting the forms authentication ticket, which is typically included in the user's cookies collection.</span></span> <span data-ttu-id="6cace-126">Hiçbir form kimlik doğrulama bileti yoksa, kullanıcı anonimdir.</span><span class="sxs-lookup"><span data-stu-id="6cace-126">If no forms authentication ticket is present, the user is anonymous.</span></span>
- <span data-ttu-id="6cace-127">**[`UrlAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.urlauthorizationmodule.aspx)** – geçerli kullanıcının istenen URL 'ye erişim yetkisi olup olmadığını belirler.</span><span class="sxs-lookup"><span data-stu-id="6cace-127">**[`UrlAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.urlauthorizationmodule.aspx)** – determines whether or not the current user is authorized to access the requested URL.</span></span> <span data-ttu-id="6cace-128">Bu modül, uygulamanın yapılandırma dosyalarında belirtilen yetkilendirme kurallarına danışarak yetkiyi belirler.</span><span class="sxs-lookup"><span data-stu-id="6cace-128">This module determines the authority by consulting the authorization rules specified in the application's configuration files.</span></span> <span data-ttu-id="6cace-129">ASP.NET, istenen dosya (ler) ACL 'Lerine danışarak yetkiyi belirleyen [`FileAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.fileauthorizationmodule.aspx) da içerir.</span><span class="sxs-lookup"><span data-stu-id="6cace-129">ASP.NET also includes the [`FileAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.fileauthorizationmodule.aspx) that determines authority by consulting the requested file(s) ACLs.</span></span>

<span data-ttu-id="6cace-130">`FormsAuthenticationModule`, `UrlAuthorizationModule` (ve `FileAuthorizationModule`) yürütmeden önce kullanıcının kimliğini doğrulamaya çalışır.</span><span class="sxs-lookup"><span data-stu-id="6cace-130">The `FormsAuthenticationModule` attempts to authenticate the user prior to the `UrlAuthorizationModule` (and `FileAuthorizationModule`) executing.</span></span> <span data-ttu-id="6cace-131">İsteği yapan kullanıcının istenen kaynağa erişim yetkisi yoksa, yetkilendirme modülü isteği sonlandırır ve [HTTP 401 Yetkisiz](http://www.checkupdown.com/status/E401.html) durumunu döndürür.</span><span class="sxs-lookup"><span data-stu-id="6cace-131">If the user making the request is not authorized to access the requested resource, the authorization module terminates the request and returns an [HTTP 401 Unauthorized](http://www.checkupdown.com/status/E401.html) status.</span></span> <span data-ttu-id="6cace-132">Windows kimlik doğrulama senaryolarında HTTP 401 durumu tarayıcıya döndürülür.</span><span class="sxs-lookup"><span data-stu-id="6cace-132">In Windows authentication scenarios, the HTTP 401 status is returned to the browser.</span></span> <span data-ttu-id="6cace-133">Bu durum kodu tarayıcının, kullanıcının kimlik bilgilerini bir kalıcı iletişim kutusu aracılığıyla sormasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="6cace-133">This status code causes the browser to prompt the user for their credentials via a modal dialog box.</span></span> <span data-ttu-id="6cace-134">Ancak, Forms kimlik doğrulaması ile, FormsAuthenticationModule bu durumu algıladığı ve kullanıcıyı bunun yerine oturum açma sayfasına ( [HTTP 302 yeniden yönlendirme](http://www.checkupdown.com/status/E302.html) durumu aracılığıyla) yeniden yönlendirmek üzere DEĞIŞTIRDIĞI için http 401 Yetkisiz durumu hiçbir şekilde tarayıcıya gönderilmez.</span><span class="sxs-lookup"><span data-stu-id="6cace-134">With forms authentication, however, the HTTP 401 Unauthorized status is never sent to the browser because the FormsAuthenticationModule detects this status and modifies it to redirect the user to the login page instead (via an [HTTP 302 Redirect](http://www.checkupdown.com/status/E302.html) status).</span></span>

<span data-ttu-id="6cace-135">Oturum açma sayfasının sorumluluğu, kullanıcının kimlik bilgilerinin geçerli olup olmadığını ve bu durumda bir form kimlik doğrulama bileti oluşturup kullanıcıyı ziyaret edilmeye çalıştıkları sayfaya yeniden yönlendirmeyi belirlemektir.</span><span class="sxs-lookup"><span data-stu-id="6cace-135">The login page's responsibility is to determine if the user's credentials are valid and, if so, to create a forms authentication ticket and redirect the user back to the page they were attempting to visit.</span></span> <span data-ttu-id="6cace-136">Kimlik doğrulama anahtarı, Web sitesindeki sayfalara, `FormsAuthenticationModule` kullanıcıyı tanımlamak için kullandığı sonraki isteklere dahil edilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-136">The authentication ticket is included in subsequent requests to the pages on the website, which the `FormsAuthenticationModule` uses to identify the user.</span></span>

![Forms kimlik doğrulama Iş akışı](an-overview-of-forms-authentication-cs/_static/image1.png)

<span data-ttu-id="6cace-138">**Şekil 1**: Forms kimlik doğrulama iş akışı</span><span class="sxs-lookup"><span data-stu-id="6cace-138">**Figure 1**: The Forms Authentication Workflow</span></span>

### <a name="remembering-the-authentication-ticket-across-page-visits"></a><span data-ttu-id="6cace-139">Sayfa ziyaretlerinin tamamında kimlik doğrulama biletini anımsama</span><span class="sxs-lookup"><span data-stu-id="6cace-139">Remembering the Authentication Ticket Across Page Visits</span></span>

<span data-ttu-id="6cace-140">Oturum açtıktan sonra, kullanıcının siteye gözatarken oturum açmasını sağlamak için form kimlik doğrulama anahtarının her bir istekteki Web sunucusuna geri gönderilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="6cace-140">After logging in, the forms authentication ticket must be sent back to the web server on each request so that the user remains logged in as they browse the site.</span></span> <span data-ttu-id="6cace-141">Bu, genellikle kimlik doğrulama bileti kullanıcının tanımlama bilgileri koleksiyonuna yerleştirilerek gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-141">This is typically accomplished by placing the authentication ticket in the user's cookies collection.</span></span> <span data-ttu-id="6cace-142">[Tanımlama bilgileri](http://en.wikipedia.org/wiki/HTTP_cookie) , kullanıcının bilgisayarında yer alan küçük metin dosyalarıdır ve tanımlama bilgisini oluşturan Web sitesine her Istek için http üstbilgilerinde iletilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-142">[Cookies](http://en.wikipedia.org/wiki/HTTP_cookie) are small text files that reside on the user's computer and are transmitted in the HTTP headers on each request to the website that created the cookie.</span></span> <span data-ttu-id="6cace-143">Bu nedenle, formlar kimlik doğrulama bileti oluşturulup tarayıcının tanımlama bilgilerinde depolandıktan sonra, bu siteye yapılan her bir sonraki ziyaret, kimlik doğrulama biletini istekle birlikte gönderir ve bu sayede kullanıcıyı tanımlar.</span><span class="sxs-lookup"><span data-stu-id="6cace-143">Therefore, once the forms authentication ticket has been created and stored in the browser's cookies, each subsequent visit to that site sends the authentication ticket along with the request, thereby identifying the user.</span></span>

<span data-ttu-id="6cace-144">Tanımlama bilgilerinin bir yönü, tarayıcının tanımlama bilgisini atma tarihi ve saati olan tarih ve saat olan süre sonu sayısıdır.</span><span class="sxs-lookup"><span data-stu-id="6cace-144">One aspect of cookies is their expiration, which is the date and time at which the browser discards the cookie.</span></span> <span data-ttu-id="6cace-145">Form kimlik doğrulaması tanımlama bilgisinin süresi dolmuşsa, kullanıcının kimliği artık doğrulanmaz ve bu nedenle anonim hale gelir.</span><span class="sxs-lookup"><span data-stu-id="6cace-145">When the forms authentication cookie expires, the user can no longer be authenticated and therefore become anonymous.</span></span> <span data-ttu-id="6cace-146">Bir Kullanıcı bir genel terminalden ziyaret edildiğinde, kendi tarayıcısını kapattıklarında kimlik doğrulama biletinin zaman dolmasını istiyoruz.</span><span class="sxs-lookup"><span data-stu-id="6cace-146">When a user is visiting from a public terminal, chances are they want their authentication ticket to expire when they close their browser.</span></span> <span data-ttu-id="6cace-147">Ancak evden ziyaret edildiğinde, aynı kullanıcı, her siteyi ziyaret ettiklerinde her seferinde oturum açmasını gerektirmeyen kimlik doğrulama biletinin tarayıcı yeniden başlatmaları arasında hatırlanmasını isteyebilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-147">When visiting from home, however, that same user might want the authentication ticket to be remembered across browser restarts so that they do not have to re-log in each time they visit the site.</span></span> <span data-ttu-id="6cace-148">Bu karar, genellikle oturum açma sayfasındaki "Beni anımsa" onay kutusu biçiminde kullanıcı tarafından yapılır.</span><span class="sxs-lookup"><span data-stu-id="6cace-148">This decision is often made by the user in the form of a "Remember me" checkbox on the login page.</span></span> <span data-ttu-id="6cace-149">Adım 3 ' te oturum açma sayfasında "Beni anımsa" onay kutusunu nasıl uygulayacağınızı inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="6cace-149">In Step 3 we will examine how to implement a "Remember me" checkbox in the login page.</span></span> <span data-ttu-id="6cace-150">Aşağıdaki öğreticide, kimlik doğrulama anahtarı zaman aşımı ayarları ayrıntılı olarak ele alınmaktadır.</span><span class="sxs-lookup"><span data-stu-id="6cace-150">The following tutorial addresses the authentication ticket timeout settings in detail.</span></span>

> [!NOTE]
> <span data-ttu-id="6cace-151">Web sitesinde oturum açmak için kullanılan Kullanıcı aracısının tanımlama bilgilerini desteklememesi olasıdır.</span><span class="sxs-lookup"><span data-stu-id="6cace-151">It is possible that the user agent used to log on to the website may not support cookies.</span></span> <span data-ttu-id="6cace-152">Böyle bir durumda ASP.NET, tanımlama bilgisi olmayan form kimlik doğrulama biletlerini kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-152">In such a case, ASP.NET can use cookieless forms authentication tickets.</span></span> <span data-ttu-id="6cace-153">Bu modda, kimlik doğrulama anahtarı URL olarak kodlanır.</span><span class="sxs-lookup"><span data-stu-id="6cace-153">In this mode, the authentication ticket is encoded into the URL.</span></span> <span data-ttu-id="6cace-154">Tanımlama bilgisi olmayan kimlik doğrulama biletlerinin ne zaman kullanıldığını ve sonraki öğreticide nasıl oluşturulup yönetileceğini inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="6cace-154">We will look at when cookieless authentication tickets are used and how they are created and managed in the next tutorial.</span></span>

### <a name="the-scope-of-forms-authentication"></a><span data-ttu-id="6cace-155">Form kimlik doğrulaması kapsamı</span><span class="sxs-lookup"><span data-stu-id="6cace-155">The Scope of Forms Authentication</span></span>

<span data-ttu-id="6cace-156">`FormsAuthenticationModule`, ASP.NET çalışma zamanının bir parçası olan yönetilen koddur.</span><span class="sxs-lookup"><span data-stu-id="6cace-156">The `FormsAuthenticationModule` is managed code that is part of the ASP.NET runtime.</span></span> <span data-ttu-id="6cace-157">Microsoft 'un [Internet Information Services (IIS)](https://www.iis.net/) Web sunucusu sürüm 7 ' den önce, IIS 'nin http işlem hattı ve ASP.NET çalışma zamanının işlem hattı arasında ayrı bir engel vardı.</span><span class="sxs-lookup"><span data-stu-id="6cace-157">Prior to version 7 of Microsoft's [Internet Information Services (IIS)](https://www.iis.net/) web server, there was a distinct barrier between IIS's HTTP pipeline and the ASP.NET runtime's pipeline.</span></span> <span data-ttu-id="6cace-158">Kısacası, IIS 6 ve önceki sürümlerde `FormsAuthenticationModule` yalnızca, IIS 'den ASP.NET çalışma zamanına bir istek atandığında yürütülür.</span><span class="sxs-lookup"><span data-stu-id="6cace-158">In short, in IIS 6 and earlier, the `FormsAuthenticationModule` only executes when a request is delegated from IIS to the ASP.NET runtime.</span></span> <span data-ttu-id="6cace-159">Varsayılan olarak IIS, statik içeriğin kendisini (HTML sayfaları ve CSS ve resim dosyaları gibi) işler ve yalnızca. aspx,. asmx veya. ashx uzantılı bir sayfa istendiğinde ASP.NET çalışma zamanına yönelik istekleri devre dışı bırakır.</span><span class="sxs-lookup"><span data-stu-id="6cace-159">By default, IIS processes static content itself – like HTML pages and CSS and image files – and only hands off requests to the ASP.NET runtime when a page with an extension of .aspx, .asmx, or .ashx is requested.</span></span>

<span data-ttu-id="6cace-160">Ancak IIS 7, tümleşik IIS ve ASP.NET işlem hatları sağlar.</span><span class="sxs-lookup"><span data-stu-id="6cace-160">IIS 7, however, allows for integrated IIS and ASP.NET pipelines.</span></span> <span data-ttu-id="6cace-161">Birkaç yapılandırma ayarı ile, IIS 7 ' yi *Tüm* Istekler için FormsAuthenticationModule çağırmak üzere ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6cace-161">With a few configuration settings you can setup IIS 7 to invoke the FormsAuthenticationModule for *all* requests.</span></span> <span data-ttu-id="6cace-162">Ayrıca, IIS 7 ile herhangi bir türdeki dosyalar için URL Yetkilendirme kuralları tanımlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6cace-162">Furthermore, with IIS 7 you can define URL authorization rules for files of any type.</span></span> <span data-ttu-id="6cace-163">Daha fazla bilgi için [IIS6 ve IIS7 güvenliği](https://www.iis.net/learn/get-started/whats-new-in-iis-7/changes-in-security-between-iis-60-and-iis-7-and-above), [Web platformu GÜVENLIK](https://www.iis.net/learn/get-started/whats-new-in-iis-7/iis7-and-above-security-improvements)ve [IIS7 URL yetkilendirmesini anlama](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/URL-Authorization/Understanding-IIS7-URL-Authorization)arasındaki değişikliklere bakın.</span><span class="sxs-lookup"><span data-stu-id="6cace-163">For more information, see [Changes Between IIS6 and IIS7 Security](https://www.iis.net/learn/get-started/whats-new-in-iis-7/changes-in-security-between-iis-60-and-iis-7-and-above), [Your Web Platform Security](https://www.iis.net/learn/get-started/whats-new-in-iis-7/iis7-and-above-security-improvements), and [Understanding IIS7 URL Authorization](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/URL-Authorization/Understanding-IIS7-URL-Authorization).</span></span>

<span data-ttu-id="6cace-164">Uzun hikaye kısaltması, IIS 7 ' den önceki sürümlerde yalnızca ASP.NET çalışma zamanı tarafından işlenen kaynakları korumak için form kimlik doğrulamasını kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6cace-164">Long story short, in versions prior to IIS 7, you can only use forms authentication to protect resources handled by the ASP.NET runtime.</span></span> <span data-ttu-id="6cace-165">Benzer şekilde, URL Yetkilendirme kuralları yalnızca ASP.NET çalışma zamanı tarafından işlenen kaynaklara uygulanır.</span><span class="sxs-lookup"><span data-stu-id="6cace-165">Likewise, URL authorization rules are only applied to resources handled by the ASP.NET runtime.</span></span> <span data-ttu-id="6cace-166">Ancak, IIS 7 ' de, FormsAuthenticationModule ve UrlAuthorizationModule ' yi IIS 'nin HTTP işlem hattına entegre etmek mümkündür. bu nedenle bu işlevselliği tüm isteklere genişleterek.</span><span class="sxs-lookup"><span data-stu-id="6cace-166">But with IIS 7 it is possible to integrate the FormsAuthenticationModule and UrlAuthorizationModule into IIS's HTTP pipeline, thereby extending this functionality to all requests.</span></span>

## <a name="step-1-creating-an-aspnet-website-for-this-tutorial-series"></a><span data-ttu-id="6cace-167">1\. Adım: Bu öğretici serisi için bir ASP.NET Web sitesi oluşturma</span><span class="sxs-lookup"><span data-stu-id="6cace-167">Step 1: Creating an ASP.NET Website for this Tutorial Series</span></span>

<span data-ttu-id="6cace-168">Mümkün olan en geniş kitleye ulaşmak için, bu serinin tamamında oluşturulacak ASP.NET Web sitesi Microsoft 'un ücretsiz Visual Studio 2008, [Visual Web Developer 2008](https://www.microsoft.com/express/vwd/)sürümü ile oluşturulacaktır.</span><span class="sxs-lookup"><span data-stu-id="6cace-168">In order to reach the widest possible audience, the ASP.NET website we will be building throughout this series will be created with Microsoft's free version of Visual Studio 2008, [Visual Web Developer 2008](https://www.microsoft.com/express/vwd/).</span></span> <span data-ttu-id="6cace-169">`SqlMembershipProvider` Kullanıcı mağazasını bir [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) veritabanında uygulayacağız.</span><span class="sxs-lookup"><span data-stu-id="6cace-169">We will implement the `SqlMembershipProvider` user store in a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database.</span></span> <span data-ttu-id="6cace-170">Visual Studio 2005 veya Visual Studio 2008 ' nin farklı bir sürümünü kullanıyorsanız veya SQL Server, endişelenmeyin, adımlar neredeyse aynı olur ve önemsiz olmayan tüm farklılıklar gösterilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-170">If you are using Visual Studio 2005 or a different edition of Visual Studio 2008 or SQL Server, don't worry - the steps will be nearly identical and any non-trivial differences will be pointed out.</span></span>

> [!NOTE]
> <span data-ttu-id="6cace-171">Her öğreticide kullanılan tanıtım Web uygulaması bir indirme olarak sunulmaktadır.</span><span class="sxs-lookup"><span data-stu-id="6cace-171">The demo web application used in each tutorial is available as a download.</span></span> <span data-ttu-id="6cace-172">Bu indirilebilir uygulama, .NET Framework sürüm 3,5 için hedeflenen Visual Web Developer 2008 ile oluşturulmuştur.</span><span class="sxs-lookup"><span data-stu-id="6cace-172">This downloadable application was created with Visual Web Developer 2008 targeted for the .NET Framework version 3.5.</span></span> <span data-ttu-id="6cace-173">Uygulama .NET 3,5 için hedeflendiğinden, Web. config dosyası, 3,5 'e özgü ek yapılandırma öğeleri içerir.</span><span class="sxs-lookup"><span data-stu-id="6cace-173">Since the application is targeted for .NET 3.5, its Web.config file includes additional, 3.5-specific configuration elements.</span></span> <span data-ttu-id="6cace-174">Uzun hikaye kısa, henüz bilgisayarınıza .NET 3,5 ' i yüklemeniz gerekiyorsa indirilebilir web uygulaması önce, Web. config dosyasından 3,5 özel biçimlendirmeyi kaldırmadan çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="6cace-174">Long story short, if you have yet to install .NET 3.5 on your computer then the downloadable web application will not work without first removing the 3.5-specific markup from Web.config.</span></span>

<span data-ttu-id="6cace-175">Forms kimlik doğrulamasını yapılandırmadan önce, önce bir ASP.NET Web sitesine ihtiyacımız var.</span><span class="sxs-lookup"><span data-stu-id="6cace-175">Before we can configure forms authentication, we first need an ASP.NET website.</span></span> <span data-ttu-id="6cace-176">Yeni bir dosya sistemi tabanlı ASP.NET Web sitesi oluşturarak başlayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-176">Start by creating a new file system-based ASP.NET website.</span></span> <span data-ttu-id="6cace-177">Bunu gerçekleştirmek için, Visual Web Developer ' ı başlatın ve ardından Dosya menüsüne gidin ve yeni Web sitesi ' ni seçerek yeni Web sitesi iletişim kutusunu görüntüler.</span><span class="sxs-lookup"><span data-stu-id="6cace-177">To accomplish this, launch Visual Web Developer and then go to the File menu and choose New Web Site, displaying the New Web Site dialog box.</span></span> <span data-ttu-id="6cace-178">ASP.NET Web sitesi şablonunu seçin, konum açılan listesini dosya sistemi olarak ayarlayın, Web sitesini yerleştirmek için bir klasör seçin ve dili olarak C#ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-178">Choose the ASP.NET Web Site template, set the Location drop-down list to File System, choose a folder to place the web site, and set the language to C#.</span></span> <span data-ttu-id="6cace-179">Bu, default. aspx ASP.NET sayfası, bir uygulama\_veri klasörü ve Web. config dosyası ile yeni bir Web sitesi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="6cace-179">This will create a new web site with a Default.aspx ASP.NET page, an App\_Data folder, and a Web.config file.</span></span>

> [!NOTE]
> <span data-ttu-id="6cace-180">Visual Studio, iki proje yönetimi modunu destekler: Web sitesi projeleri ve Web uygulaması projeleri.</span><span class="sxs-lookup"><span data-stu-id="6cace-180">Visual Studio supports two modes of project management: Web Site Projects and Web Application Projects.</span></span> <span data-ttu-id="6cace-181">Web sitesi projelerinin proje dosyası olmadığından, Web uygulaması projeleri Visual Studio .NET 2002/2003 'deki proje mimarisini taklit ederken, proje dosyası içerirler ve projenin kaynak kodunu,/bin klasörüne yerleştirilmiş tek bir derlemede derler.</span><span class="sxs-lookup"><span data-stu-id="6cace-181">Web Site Projects lack a project file, whereas Web Application Projects mimic the project architecture in Visual Studio .NET 2002/2003 – they include a project file and compile the project's source code into a single assembly, which is placed in the /bin folder.</span></span> <span data-ttu-id="6cace-182">Visual Studio 2005 başlangıçta yalnızca desteklenen Web sitesi projeleri, ancak Web uygulaması proje modeli Service Pack 1 ile yeniden kullanılmaya başlandı; Visual Studio 2008, her iki proje modelini de sunmaktadır.</span><span class="sxs-lookup"><span data-stu-id="6cace-182">Visual Studio 2005 initially only supported Web Site Projects, although the Web Application Project model was reintroduced with Service Pack 1; Visual Studio 2008 offers both project models.</span></span> <span data-ttu-id="6cace-183">Ancak, Visual Web Developer 2005 ve 2008 sürümleri yalnızca Web sitesi projelerini destekler.</span><span class="sxs-lookup"><span data-stu-id="6cace-183">The Visual Web Developer 2005 and 2008 editions, however, only support Web Site Projects.</span></span> <span data-ttu-id="6cace-184">Web sitesi proje modelini kullanıyorum.</span><span class="sxs-lookup"><span data-stu-id="6cace-184">I will be using the Web Site Project model.</span></span> <span data-ttu-id="6cace-185">Express olmayan bir sürüm kullanıyorsanız ve bunun yerine [Web uygulaması proje modelini](https://msdn.microsoft.com/library/aa730880%28vs.80%29.aspx) kullanmak istiyorsanız, ekranınızda gördüklerinizle ilgili bazı tutarsızlıklar olabileceğini ve bu öğreticilerde sunulan ekran görüntülerini ve yönergeleri izlemeniz gereken adımları aklınızda bulundurun.</span><span class="sxs-lookup"><span data-stu-id="6cace-185">If you are using a non-Express edition and want to use the [Web Application Project model](https://msdn.microsoft.com/library/aa730880%28vs.80%29.aspx) instead, feel free to do so but be aware that there may be some discrepancies between what you see on your screen and the steps you must take versus the screen shots shown and instructions provided in these tutorials.</span></span>

<span data-ttu-id="6cace-186">[![yeni bir dosya sistemi tabanlı Web sitesi oluşturma](an-overview-of-forms-authentication-cs/_static/image3.png)](an-overview-of-forms-authentication-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="6cace-186">[![Create a New File System-Based Web Site](an-overview-of-forms-authentication-cs/_static/image3.png)](an-overview-of-forms-authentication-cs/_static/image2.png)</span></span>

<span data-ttu-id="6cace-187">**Şekil 2**: yeni bir dosya sistemi tabanlı Web sitesi oluşturma ([tam boyutlu görüntüyü görüntülemek için tıklayın](an-overview-of-forms-authentication-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="6cace-187">**Figure 2**: Create a New File System-Based Web Site ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image4.png))</span></span>

### <a name="adding-a-master-page"></a><span data-ttu-id="6cace-188">Ana sayfa ekleme</span><span class="sxs-lookup"><span data-stu-id="6cace-188">Adding a Master Page</span></span>

<span data-ttu-id="6cace-189">Ardından, site. Master adlı kök dizinde siteye yeni bir ana sayfa ekleyin.</span><span class="sxs-lookup"><span data-stu-id="6cace-189">Next, add a new Master Page to the site in the root directory named Site.master.</span></span> <span data-ttu-id="6cace-190">[Ana sayfalar](https://msdn.microsoft.com/library/wtxbf3hh.aspx) , sayfa geliştiricisinin ASP.NET sayfalarına uygulanabilecek site genelinde bir şablon tanımlamasına olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="6cace-190">[Master pages](https://msdn.microsoft.com/library/wtxbf3hh.aspx) enable a page developer to define a site-wide template that can be applied to ASP.NET pages.</span></span> <span data-ttu-id="6cace-191">Ana sayfaların başlıca avantajı, sitenin genel görünümünün tek bir konumda tanımlanıp tanımlanabileceği ve bu sayede sitenin düzeninin güncelleştirilmesini veya ince ayar olmasını kolaylaştırmaktır.</span><span class="sxs-lookup"><span data-stu-id="6cace-191">The main benefit of master pages is that the site's overall appearance can be defined in a single location, thereby making it easy to update or tweak the site's layout.</span></span>

<span data-ttu-id="6cace-192">[Web sitesine site. Master adlı bir ana sayfa eklemek ![](an-overview-of-forms-authentication-cs/_static/image6.png)](an-overview-of-forms-authentication-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="6cace-192">[![Add a Master Page Named Site.master to the Website](an-overview-of-forms-authentication-cs/_static/image6.png)](an-overview-of-forms-authentication-cs/_static/image5.png)</span></span>

<span data-ttu-id="6cace-193">**Şekil 3**: Web sitesine site. Master adlı bir ana sayfa ekleme ([tam boyutlu görüntüyü görüntülemek için tıklayın](an-overview-of-forms-authentication-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="6cace-193">**Figure 3**: Add a Master Page Named Site.master to the Website ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image7.png))</span></span>

<span data-ttu-id="6cace-194">Site genelinde sayfa mizanpajını ana sayfada tanımlayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-194">Define the site-wide page layout here in the master page.</span></span> <span data-ttu-id="6cace-195">Tasarım görünümü kullanabilir ve gereken düzen veya Web denetimlerini ekleyebilir ya da biçimlendirmeyi el ile kaynak görünümüne ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6cace-195">You can use the Design view and add whatever Layout or Web controls you need, or you can manually add the markup by hand in the Source view.</span></span> <span data-ttu-id="6cace-196">Ana sayfamın düzeninden, *[ASP.NET 2,0 öğretici serisinde bulunan verilerle çalışmamda](../../data-access/index.md)* kullanılan düzeni taklit etmek için yapılandırılmış mıyım (bkz. Şekil 4).</span><span class="sxs-lookup"><span data-stu-id="6cace-196">I structured my master page's layout to mimic the layout used in my *[Working with Data in ASP.NET 2.0](../../data-access/index.md)* tutorial series (see Figure 4).</span></span> <span data-ttu-id="6cace-197">Ana sayfa, dosya stilinde (Bu öğreticinin ilişkili İndirilme dahil) tanımlanmış CSS ayarlarına sahip konumlandırma ve stiller için [geçişli stil sayfaları](http://www.w3schools.com/css/default.asp) kullanır.</span><span class="sxs-lookup"><span data-stu-id="6cace-197">The master page uses [cascading style sheets](http://www.w3schools.com/css/default.asp) for positioning and styles with the CSS settings defined in the file Style.css (which is included in this tutorial's associated download).</span></span> <span data-ttu-id="6cace-198">Aşağıda gösterilen biçimlendirmeden söylemeirken, CSS kuralları, gezinti &lt;div&gt;içeriğinin solunda görünmesi için mutlak olarak konumlandırılıp 200 piksellik sabit genişliğe sahip olacak şekilde tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="6cace-198">While you cannot tell from the markup shown below, the CSS rules are defined such that the navigation &lt;div&gt;'s content is absolutely positioned so that it appears on the left and has a fixed width of 200 pixels.</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample1.aspx)]

<span data-ttu-id="6cace-199">Ana sayfa, hem statik sayfa mizanpajını hem de ana sayfayı kullanan ASP.NET sayfaları tarafından düzenlenebilecek bölgeleri tanımlar.</span><span class="sxs-lookup"><span data-stu-id="6cace-199">A master page defines both the static page layout and the regions that can be edited by the ASP.NET pages that use the master page.</span></span> <span data-ttu-id="6cace-200">Bu içerik düzenlenebilir bölgeler, &lt;div&gt;içerik içinde görünebilen `ContentPlaceHolder` denetimiyle belirtilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-200">These content editable regions are indicated by the `ContentPlaceHolder` control, which can be seen within the content &lt;div&gt;.</span></span> <span data-ttu-id="6cace-201">Ana sayfamız tek bir `ContentPlaceHolder` (MainContent) içeriyor, ancak ana sayfanın birden çok Content, yer tutucusu olabilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-201">Our master page has a single `ContentPlaceHolder` (MainContent), but master page's may have multiple ContentPlaceHolders.</span></span>

<span data-ttu-id="6cace-202">Yukarıda girilen biçimlendirme ile, Tasarım görünümü geçiş ana sayfanın yerleşimini gösterir.</span><span class="sxs-lookup"><span data-stu-id="6cace-202">With the markup entered above, switching to the Design view shows the master page's layout.</span></span> <span data-ttu-id="6cace-203">Bu ana sayfayı kullanan tüm ASP.NET sayfaları, `MainContent` bölgenin işaretlemesini belirtmek için bu Tekdüzen düzenine sahip olacaktır.</span><span class="sxs-lookup"><span data-stu-id="6cace-203">Any ASP.NET pages that use this master page will have this uniform layout, with the ability to specify the markup for the `MainContent` region.</span></span>

<span data-ttu-id="6cace-204">[Tasarım görünümü Ile görüntülenirken ana sayfayı ![](an-overview-of-forms-authentication-cs/_static/image9.png)](an-overview-of-forms-authentication-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="6cace-204">[![The Master Page, When Viewed Through the Design View](an-overview-of-forms-authentication-cs/_static/image9.png)](an-overview-of-forms-authentication-cs/_static/image8.png)</span></span>

<span data-ttu-id="6cace-205">**Şekil 4**: Ana sayfa, Tasarım görünümü ile görüntülenirken ([tam boyutlu görüntüyü görüntülemek için tıklayın](an-overview-of-forms-authentication-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="6cace-205">**Figure 4**: The Master Page, When Viewed Through the Design View ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image10.png))</span></span>

### <a name="creating-content-pages"></a><span data-ttu-id="6cace-206">Içerik sayfaları oluşturma</span><span class="sxs-lookup"><span data-stu-id="6cace-206">Creating Content Pages</span></span>

<span data-ttu-id="6cace-207">Bu noktada, Web sitemizden bir default. aspx sayfası vardır, ancak yeni oluşturduğumuz ana sayfayı kullanmaz.</span><span class="sxs-lookup"><span data-stu-id="6cace-207">At this point we have a Default.aspx page in our website, but it does not use the master page we just created.</span></span> <span data-ttu-id="6cace-208">Bir Web sayfasının bildirim temelli işaretlemesini bir ana sayfa kullanmak üzere işlemek mümkün olsa da, sayfada herhangi bir içerik yoksa sayfayı silmek ve bunu projeye yeniden eklemek daha kolay olur ve kullanılacak ana sayfayı belirterek.</span><span class="sxs-lookup"><span data-stu-id="6cace-208">While it is possible to manipulate the declarative markup of a web page to use a master page, if the page doesn't contain any content yet it is easier to just delete the page and re-add it to the project, specifying the master page to use.</span></span> <span data-ttu-id="6cace-209">Bu nedenle, varsayılan. aspx öğesini projeden silerek başlayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-209">Therefore, start by deleting Default.aspx from the project.</span></span>

<span data-ttu-id="6cace-210">Sonra, Çözüm Gezgini proje adına sağ tıklayın ve default. aspx adlı yeni bir Web formu eklemeyi seçin.</span><span class="sxs-lookup"><span data-stu-id="6cace-210">Next, right-click on the project name in the Solution Explorer and choose to add a new Web Form named Default.aspx.</span></span> <span data-ttu-id="6cace-211">Bu kez "Ana sayfa seç" onay kutusunu işaretleyin ve listeden site. Master ana sayfasını seçin.</span><span class="sxs-lookup"><span data-stu-id="6cace-211">This time, check the "Select master page" checkbox and choose the Site.master master page from the list.</span></span>

<span data-ttu-id="6cace-212">[![yeni bir default. aspx sayfası eklemek için bir ana sayfa seçmeyi seçin](an-overview-of-forms-authentication-cs/_static/image12.png)](an-overview-of-forms-authentication-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="6cace-212">[![Add a New Default.aspx Page Choosing to Select a Master Page](an-overview-of-forms-authentication-cs/_static/image12.png)](an-overview-of-forms-authentication-cs/_static/image11.png)</span></span>

<span data-ttu-id="6cace-213">**Şekil 5**: bir ana sayfa seçerek yeni bir default. aspx sayfası ekleyin ([tam boyutlu görüntüyü görüntülemek için tıklayın](an-overview-of-forms-authentication-cs/_static/image13.png))</span><span class="sxs-lookup"><span data-stu-id="6cace-213">**Figure 5**: Add a New Default.aspx Page Choosing to Select a Master Page ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image13.png))</span></span>

![Site. Master ana sayfasını kullanın](an-overview-of-forms-authentication-cs/_static/image14.png)

<span data-ttu-id="6cace-215">**Şekil 6**: site. Master ana sayfasını kullanın</span><span class="sxs-lookup"><span data-stu-id="6cace-215">**Figure 6**: Use the Site.master Master Page</span></span>

> [!NOTE]
> <span data-ttu-id="6cace-216">Web uygulaması proje modeli kullanıyorsanız yeni öğe Ekle iletişim kutusunda bir "Ana sayfa seç" onay kutusu bulunmaz.</span><span class="sxs-lookup"><span data-stu-id="6cace-216">If you are using the Web Application Project Model the Add New Item dialog box does not include a "Select master page" checkbox.</span></span> <span data-ttu-id="6cace-217">Bunun yerine, "Web Içerik formu" türünde bir öğe eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="6cace-217">Instead, you need to add an item of type "Web Content Form."</span></span> <span data-ttu-id="6cace-218">"Web Içerik formu" seçeneğini belirledikten ve Ekle ' ye tıkladığınızda, Visual Studio, Şekil 6 ' da gösterilen aynı ana öğe seç iletişim kutusunu görüntüler.</span><span class="sxs-lookup"><span data-stu-id="6cace-218">After choosing the "Web Content Form" option and clicking Add, Visual Studio will display the same Select a Master dialog box shown in Figure 6.</span></span>

<span data-ttu-id="6cace-219">Yeni default. aspx sayfasının bildirim temelli biçimlendirmesi, ana sayfa dosyasının yolunu ve ana sayfanın MainContent ContentPlaceHolder için bir Içerik denetimini belirten yalnızca bir @Page yönergesini içerir.</span><span class="sxs-lookup"><span data-stu-id="6cace-219">The new Default.aspx page's declarative markup includes just a @Page directive specifying the path to the master page file and a Content control for the master page's MainContent ContentPlaceHolder.</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample2.aspx)]

<span data-ttu-id="6cace-220">Şimdilik default. aspx ' i boş bırakın.</span><span class="sxs-lookup"><span data-stu-id="6cace-220">For now, leave Default.aspx empty.</span></span> <span data-ttu-id="6cace-221">İçerik eklemek için Bu öğreticinin ilerleyen kısımlarında buna geri döneceksiniz.</span><span class="sxs-lookup"><span data-stu-id="6cace-221">We will return to it later in this tutorial to add content.</span></span>

> [!NOTE]
> <span data-ttu-id="6cace-222">Ana sayfamız, bir menü ya da başka bir gezinti arabirimine ilişkin bir bölüm içerir.</span><span class="sxs-lookup"><span data-stu-id="6cace-222">Our master page includes a section for a menu or some other navigation interface.</span></span> <span data-ttu-id="6cace-223">Daha sonraki bir öğreticide böyle bir arabirim oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="6cace-223">We will create such an interface in a future tutorial.</span></span>

## <a name="step-2-enabling-forms-authentication"></a><span data-ttu-id="6cace-224">2\. Adım: form kimlik doğrulamasını etkinleştirme</span><span class="sxs-lookup"><span data-stu-id="6cace-224">Step 2: Enabling Forms Authentication</span></span>

<span data-ttu-id="6cace-225">ASP.NET Web sitesi oluşturulduğunda, bir sonraki göreviniz form kimlik doğrulamasını etkinleştirmektir.</span><span class="sxs-lookup"><span data-stu-id="6cace-225">With the ASP.NET website created, our next task is to enable forms authentication.</span></span> <span data-ttu-id="6cace-226">Uygulamanın kimlik doğrulama yapılandırması, Web. config içindeki [`<authentication>` öğesi](https://msdn.microsoft.com/library/532aee0e.aspx) aracılığıyla belirtilir. `<authentication>` öğesi, uygulama tarafından kullanılan kimlik doğrulama modelini belirten Mode adlı tek bir özniteliği içerir.</span><span class="sxs-lookup"><span data-stu-id="6cace-226">The application's authentication configuration is specified through the [`<authentication>` element](https://msdn.microsoft.com/library/532aee0e.aspx) in Web.config. The `<authentication>` element contains a single attribute named mode that specifies the authentication model used by the application.</span></span> <span data-ttu-id="6cace-227">Bu öznitelik aşağıdaki dört değerden birine sahip olabilir:</span><span class="sxs-lookup"><span data-stu-id="6cace-227">This attribute can have one of the following four values:</span></span>

- <span data-ttu-id="6cace-228">**Pencereler** – önceki öğreticide açıklandığı gibi, bir uygulama Windows kimlik doğrulaması kullandığında, ziyaretçi kimlik doğrulaması için Web sunucusunun sorumluluğundadır ve bu genellikle temel, Özet veya tümleşik Windows kimlik doğrulaması aracılığıyla yapılır.</span><span class="sxs-lookup"><span data-stu-id="6cace-228">**Windows** – as discussed in the preceding tutorial, when an application uses Windows authentication it is the web server's responsibility to authenticate the visitor, and this is usually done through Basic, Digest, or Integrated Windows authentication.</span></span>
- <span data-ttu-id="6cace-229">**Formlar**– kullanıcıların kimliği bir Web sayfasındaki form aracılığıyla doğrulanır.</span><span class="sxs-lookup"><span data-stu-id="6cace-229">**Forms**– users are authenticated via a form on a web page.</span></span>
- <span data-ttu-id="6cace-230">**Passport**– kullanıcıların kimliği, Microsoft 'un Passport ağı kullanılarak doğrulanır.</span><span class="sxs-lookup"><span data-stu-id="6cace-230">**Passport**– users are authenticated using Microsoft's Passport Network.</span></span>
- <span data-ttu-id="6cace-231">**Hiçbiri**– kimlik doğrulama modeli kullanılmaz; Tüm ziyaretçiler anonimdir.</span><span class="sxs-lookup"><span data-stu-id="6cace-231">**None**– no authentication model is used; all visitors are anonymous.</span></span>

<span data-ttu-id="6cace-232">Varsayılan olarak, ASP.NET uygulamaları Windows kimlik doğrulamasını kullanır.</span><span class="sxs-lookup"><span data-stu-id="6cace-232">By default, ASP.NET applications use Windows authentication.</span></span> <span data-ttu-id="6cace-233">Kimlik doğrulama türünü Forms kimlik doğrulaması olarak değiştirmek için, `<authentication>` öğenin mode özniteliğini Forms olarak değiştirmemiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="6cace-233">To change the authentication type to forms authentication, then, we need to modify the `<authentication>` element's mode attribute to Forms.</span></span>

<span data-ttu-id="6cace-234">Projeniz henüz bir Web. config dosyası içermiyorsa, Çözüm Gezgini proje adına sağ tıklayıp yeni öğe Ekle ' yi seçip bir Web yapılandırma dosyası ekleyerek bir tane ekleyin.</span><span class="sxs-lookup"><span data-stu-id="6cace-234">If your project does not yet contain a Web.config file, add one now by right-clicking on the project name in the Solution Explorer, choosing Add New Item, and then adding a Web Configuration file.</span></span>

<span data-ttu-id="6cace-235">[![projeniz henüz Web. config Içermiyorsa, şimdi ekleyin](an-overview-of-forms-authentication-cs/_static/image16.png)](an-overview-of-forms-authentication-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="6cace-235">[![If Your Project Does Not Yet Include Web.config, Add It Now](an-overview-of-forms-authentication-cs/_static/image16.png)](an-overview-of-forms-authentication-cs/_static/image15.png)</span></span>

<span data-ttu-id="6cace-236">**Şekil 7**: projeniz henüz Web. config Içermiyorsa, şimdi ekleyin ([tam boyutlu görüntüyü görüntülemek için tıklayın](an-overview-of-forms-authentication-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="6cace-236">**Figure 7**: If Your Project Does Not Yet Include Web.config, Add It Now ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image17.png))</span></span>

<span data-ttu-id="6cace-237">Sonra, `<authentication>` öğesini bulun ve Forms kimlik doğrulamasını kullanmak için güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="6cace-237">Next, locate the `<authentication>` element and update it to use forms authentication.</span></span> <span data-ttu-id="6cace-238">Bu değişiklikten sonra, Web. config dosyanızın biçimlendirmesi şuna benzer olmalıdır:</span><span class="sxs-lookup"><span data-stu-id="6cace-238">After this change, your Web.config file's markup should look similar to the following:</span></span>

[!code-xml[Main](an-overview-of-forms-authentication-cs/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="6cace-239">Web. config bir XML dosyası olduğundan, büyük/küçük harf önemli olur.</span><span class="sxs-lookup"><span data-stu-id="6cace-239">Since Web.config is an XML file, casing is important.</span></span> <span data-ttu-id="6cace-240">Mode özniteliğini, büyük bir "F" ile form olarak ayarladığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="6cace-240">Make sure that you set the mode attribute to Forms, with a capital "F".</span></span> <span data-ttu-id="6cace-241">"Formlar" gibi farklı bir büyük harfleri kullanırsanız, siteyi bir tarayıcı aracılığıyla ziyaret ederken bir yapılandırma hatası alırsınız.</span><span class="sxs-lookup"><span data-stu-id="6cace-241">If you use a different casing, such as "forms", you'll receive a configuration error when visiting the site through a browser.</span></span>

<span data-ttu-id="6cace-242">`<authentication>` öğesi, isteğe bağlı olarak Forms Authentication 'a özgü ayarları içeren bir `<forms>` alt öğesi içerebilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-242">The `<authentication>` element may optionally include a `<forms>` child element that contains forms authentication-specific settings.</span></span> <span data-ttu-id="6cace-243">Şimdilik yalnızca varsayılan form kimlik doğrulama ayarlarını kullanalım.</span><span class="sxs-lookup"><span data-stu-id="6cace-243">For now, let's just use the default forms authentication settings.</span></span> <span data-ttu-id="6cace-244">Sonraki öğreticide daha ayrıntılı bir şekilde `<forms>` alt öğesi keşfedeceğiz.</span><span class="sxs-lookup"><span data-stu-id="6cace-244">We will explore the `<forms>` child element in more detail in the next tutorial.</span></span>

## <a name="step-3-building-the-login-page"></a><span data-ttu-id="6cace-245">3\. Adım: oturum açma sayfası oluşturma</span><span class="sxs-lookup"><span data-stu-id="6cace-245">Step 3: Building the Login Page</span></span>

<span data-ttu-id="6cace-246">Form kimlik doğrulamasını desteklemek için, Web sitemiz bir oturum açma sayfasına ihtiyaç duyuyor.</span><span class="sxs-lookup"><span data-stu-id="6cace-246">In order to support forms authentication our website needs a login page.</span></span> <span data-ttu-id="6cace-247">"Form kimlik doğrulaması Iş akışını anlama" bölümünde açıklandığı gibi, `FormsAuthenticationModule`, görüntüleme yetkisine sahip olmadıkları bir sayfaya erişmeyi denediklerinde kullanıcıyı otomatik olarak oturum açma sayfasına yönlendirecektir.</span><span class="sxs-lookup"><span data-stu-id="6cace-247">As discussed in the "Understanding the Forms Authentication Workflow" section, the `FormsAuthenticationModule` will automatically redirect the user to the login page if they attempt to access a page that they are not authorized to view.</span></span> <span data-ttu-id="6cace-248">Anonim kullanıcılara oturum açma sayfası bağlantısını görüntüleyen ASP.NET Web denetimleri de vardır.</span><span class="sxs-lookup"><span data-stu-id="6cace-248">There are also ASP.NET Web controls that will display a link to the login page to anonymous users.</span></span> <span data-ttu-id="6cace-249">Bu, "oturum açma sayfasının URL 'SI nedir?" sorusunu ekler.</span><span class="sxs-lookup"><span data-stu-id="6cace-249">This begs the question, "What is the URL of the login page?"</span></span>

<span data-ttu-id="6cace-250">Varsayılan olarak, Forms kimlik doğrulama sistemi, oturum açma sayfasının Login. aspx olarak adlandırılması ve Web uygulamasının kök dizinine yerleştirilmesi bekler.</span><span class="sxs-lookup"><span data-stu-id="6cace-250">By default, the forms authentication system expects the login page to be named Login.aspx and placed in the root directory of the web application.</span></span> <span data-ttu-id="6cace-251">Farklı bir oturum açma sayfası URL 'SI kullanmak istiyorsanız, bunu Web. config içinde belirterek yapabilirsiniz. Bunu sonraki öğreticide nasıl yapacağız.</span><span class="sxs-lookup"><span data-stu-id="6cace-251">If you want to use a different login page URL, you can do so by specifying it in Web.config. We will see how to do this in the subsequent tutorial.</span></span>

<span data-ttu-id="6cace-252">Oturum açma sayfası üç sorumluluklara sahiptir:</span><span class="sxs-lookup"><span data-stu-id="6cace-252">The login page has three responsibilities:</span></span>

1. <span data-ttu-id="6cace-253">Ziyaretçilerin kimlik bilgilerini girmesini sağlayan bir arabirim sağlayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-253">Provide an interface that allows the visitor to enter their credentials.</span></span>
2. <span data-ttu-id="6cace-254">Gönderilen kimlik bilgilerinin geçerli olup olmadığını belirleme.</span><span class="sxs-lookup"><span data-stu-id="6cace-254">Determine if the submitted credentials are valid.</span></span>
3. <span data-ttu-id="6cace-255">"Oturum aç", Forms kimlik doğrulama bileti oluşturarak Kullanıcı.</span><span class="sxs-lookup"><span data-stu-id="6cace-255">"Log in" the user by creating the forms authentication ticket.</span></span>

### <a name="creating-the-login-pages-user-interface"></a><span data-ttu-id="6cace-256">Oturum açma sayfasının Kullanıcı arabirimini oluşturma</span><span class="sxs-lookup"><span data-stu-id="6cace-256">Creating the Login Page's User Interface</span></span>

<span data-ttu-id="6cace-257">İlk görevi kullanmaya başlayalım.</span><span class="sxs-lookup"><span data-stu-id="6cace-257">Let's get started with the first task.</span></span> <span data-ttu-id="6cace-258">Sitenin Login. aspx adlı kök dizinine yeni bir ASP.NET sayfası ekleyin ve bunu site. Master ana sayfası ile ilişkilendirin.</span><span class="sxs-lookup"><span data-stu-id="6cace-258">Add a new ASP.NET page to the site's root directory named Login.aspx and associate it with the Site.master master page.</span></span>

<span data-ttu-id="6cace-259">[![Login. aspx adlı yeni bir ASP.NET sayfası ekleyin](an-overview-of-forms-authentication-cs/_static/image19.png)](an-overview-of-forms-authentication-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="6cace-259">[![Add a New ASP.NET Page Named Login.aspx](an-overview-of-forms-authentication-cs/_static/image19.png)](an-overview-of-forms-authentication-cs/_static/image18.png)</span></span>

<span data-ttu-id="6cace-260">**Şekil 8**: login. aspx adlı yeni bir ASP.NET sayfası ekleyin ([tam boyutlu görüntüyü görüntülemek için tıklayın](an-overview-of-forms-authentication-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="6cace-260">**Figure 8**: Add a New ASP.NET Page Named Login.aspx ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image20.png))</span></span>

<span data-ttu-id="6cace-261">Tipik oturum açma sayfası arabirimi, biri Kullanıcı adı, biri parolası için bir ve formu göndermek için bir düğme olmak üzere iki metin kutından oluşur.</span><span class="sxs-lookup"><span data-stu-id="6cace-261">The typical login page interface consists of two textboxes – one for the user's name, one for their password – and a button to submit the form.</span></span> <span data-ttu-id="6cace-262">İşaretliyse Web siteleri "Beni anımsa" onay kutusunu işaretleyerek, denetlenen kimlik doğrulama biletini tarayıcı yeniden başlatmaları arasında devam ettirir.</span><span class="sxs-lookup"><span data-stu-id="6cace-262">Websites oftentimes include a "Remember me" checkbox that, if checked, persists the resulting authentication ticket across browser restarts.</span></span>

<span data-ttu-id="6cace-263">Login. aspx öğesine iki metin kutuları ekleyin ve `ID` özelliklerini sırasıyla Kullanıcı adı ve parola olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-263">Add two TextBoxes to Login.aspx and set their `ID` properties to UserName and Password, respectively.</span></span> <span data-ttu-id="6cace-264">Parolanın `TextMode` özelliğini parola olarak da ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-264">Also set Password's `TextMode` property to Password.</span></span> <span data-ttu-id="6cace-265">Sonra, bir CheckBox denetimi ekleyin, `ID` özelliğini RememberMe ve `Text` özelliğini "anımsa" olarak ayarlar.</span><span class="sxs-lookup"><span data-stu-id="6cace-265">Next, add a CheckBox control, setting its `ID` property to RememberMe and its `Text` property to "Remember Me".</span></span> <span data-ttu-id="6cace-266">Bundan sonra, `Text` özelliği "Login" olarak ayarlanmış olan LoginButton adlı bir düğme ekleyin.</span><span class="sxs-lookup"><span data-stu-id="6cace-266">Following that, add a Button named LoginButton whose `Text` property is set to "Login".</span></span> <span data-ttu-id="6cace-267">Son olarak, bir etiket Web denetimi ekleyip `ID` özelliğini ınvalidcredentialsmessage, `Text` özelliğini ise "Kullanıcı adınız veya parolanız geçersiz olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-267">And finally, add a Label Web control and set its `ID` property to InvalidCredentialsMessage, its `Text` property to "Your username or password is invalid.</span></span> <span data-ttu-id="6cace-268">Lütfen tekrar deneyin. "`ForeColor` özelliği kırmızı ve `Visible` özelliği false olarak.</span><span class="sxs-lookup"><span data-stu-id="6cace-268">Please try again.", its `ForeColor` property to Red, and its `Visible` property to False.</span></span>

<span data-ttu-id="6cace-269">Bu noktada ekranınızın, Şekil 9 ' da ekran görüntüsüne benzer olması gerekir ve Sayfanızın bildirime dayalı sözdizimi aşağıdaki gibi görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="6cace-269">At this point your screen should look similar to the screen shot in Figure 9, and your page's declarative syntax should like the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample4.aspx)]

<span data-ttu-id="6cace-270">[Oturum açma sayfası ![Iki metin kutusu, bir onay kutusu, düğme ve etiket Içerir](an-overview-of-forms-authentication-cs/_static/image22.png)](an-overview-of-forms-authentication-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="6cace-270">[![The Login Page Contains Two TextBoxes, a CheckBox, a Button, and a Label](an-overview-of-forms-authentication-cs/_static/image22.png)](an-overview-of-forms-authentication-cs/_static/image21.png)</span></span>

<span data-ttu-id="6cace-271">**Şekil 9**: oturum açma sayfası Iki metin kutusu, bir onay kutusu, düğme ve bir etiket içerir ([tam boyutlu görüntüyü görüntülemek için tıklayın](an-overview-of-forms-authentication-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="6cace-271">**Figure 9**: The Login Page Contains Two TextBoxes, a CheckBox, a Button, and a Label ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image23.png))</span></span>

<span data-ttu-id="6cace-272">Son olarak, LoginButton 'ın Click olayı için bir olay işleyicisi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="6cace-272">Finally, create an event handler for the LoginButton's Click event.</span></span> <span data-ttu-id="6cace-273">Tasarımcıda Bu olay işleyicisini oluşturmak için düğme denetimini çift tıklayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-273">From the Designer, simply double-click the Button control to create this event handler.</span></span>

### <a name="determining-if-the-supplied-credentials-are-valid"></a><span data-ttu-id="6cace-274">Sağlanan kimlik bilgilerinin geçerli olup olmadığı belirleniyor</span><span class="sxs-lookup"><span data-stu-id="6cace-274">Determining If the Supplied Credentials are Valid</span></span>

<span data-ttu-id="6cace-275">Şimdi, düğmenin tıklama olay işleyicisi – sağlanan kimlik bilgilerinin geçerli olup olmadığını belirleyen 2. görevi uygulamamız gerekir.</span><span class="sxs-lookup"><span data-stu-id="6cace-275">We now need to implement task 2 in the Button's Click event handler – determining whether the supplied credentials are valid.</span></span> <span data-ttu-id="6cace-276">Bunu yapmak için, belirtilen kimlik bilgilerinin bilinen kimlik bilgileriyle eşleşip eşleşmediğine belirleyebilmemiz için tüm kullanıcıların kimlik bilgilerini tutan bir kullanıcı deposu olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="6cace-276">In order to do this there needs to be a user store that holds all of the users' credentials so that we can determine if the supplied credentials match up with any known credentials.</span></span>

<span data-ttu-id="6cace-277">ASP.NET 2,0 ' den önce, geliştiriciler hem kendi Kullanıcı mağazalarını uygulamaktan hem de kodu yazarken, belirtilen kimlik bilgilerini depoya göre doğrulamaya sorumludur.</span><span class="sxs-lookup"><span data-stu-id="6cace-277">Prior to ASP.NET 2.0, developers were responsible for implementing both their own user stores and writing the code to validate the supplied credentials against the store.</span></span> <span data-ttu-id="6cace-278">Çoğu geliştirici Kullanıcı mağazasını bir veritabanında uygular, Kullanıcı adı, parola, e-posta, LastLoginDate vb. gibi sütunlara sahip kullanıcılar adlı bir tablo oluşturur.</span><span class="sxs-lookup"><span data-stu-id="6cace-278">Most developers would implement the user store in a database, creating a table named Users with columns like UserName, Password, Email, LastLoginDate, and so forth.</span></span> <span data-ttu-id="6cace-279">Bu tabloda, Kullanıcı hesabı başına bir kayıt olur.</span><span class="sxs-lookup"><span data-stu-id="6cace-279">This table, then, would have one record per user account.</span></span> <span data-ttu-id="6cace-280">Kullanıcının sağladığı kimlik bilgilerinin doğrulanması, eşleşen bir Kullanıcı adı için veritabanını sorgulamayı ve sonra veritabanındaki parolanın sağlanan parolaya uygun olduğundan emin olmayı içerir.</span><span class="sxs-lookup"><span data-stu-id="6cace-280">Verifying a user's supplied credentials would involve querying the database for a matching username and then ensuring that the password in the database corresponded to the supplied password.</span></span>

<span data-ttu-id="6cace-281">ASP.NET 2,0 ile, geliştiriciler Kullanıcı mağazasını yönetmek için üyelik sağlayıcılarından birini kullanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="6cace-281">With ASP.NET 2.0, developers should use one of the Membership providers to manage the user store.</span></span> <span data-ttu-id="6cace-282">Bu öğretici serisinde, kullanıcı deposu için bir SQL Server veritabanı kullanan SqlMembershipProvider 'ı kullanacağız.</span><span class="sxs-lookup"><span data-stu-id="6cace-282">In this tutorial series we will be using the SqlMembershipProvider, which uses a SQL Server database for the user store.</span></span> <span data-ttu-id="6cace-283">SqlMembershipProvider kullanırken, sağlayıcı tarafından beklenen tabloları, görünümleri ve saklı yordamları içeren belirli bir veritabanı şeması uygulamamız gerekir.</span><span class="sxs-lookup"><span data-stu-id="6cace-283">When using the SqlMembershipProvider we need to implement a specific database schema that includes the tables, views, and stored procedures expected by the provider.</span></span> <span data-ttu-id="6cace-284">SQL Server öğreticide ***Üyelik şeması oluşturma*** bölümünde bu şemayı nasıl uygulayacağınızı inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="6cace-284">We will examine how to implement this schema in the ***Creating the Membership Schema in SQL Server*** tutorial.</span></span> <span data-ttu-id="6cace-285">Üyelik sağlayıcısı varken, kullanıcının kimlik bilgilerini doğrulamak, Kullanıcı *adı* ve *parola* birleşiminin geçerliliğini belirten bir Boole değeri döndüren [Üyelik sınıfının](https://msdn.microsoft.com/library/system.web.security.membership.aspx) [ValidateUser (*Kullanıcı adı*, *parola*) yöntemini](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx)çağırmak kadar basittir.</span><span class="sxs-lookup"><span data-stu-id="6cace-285">With the Membership provider in place, validating the user's credentials is as simple as calling the [Membership class](https://msdn.microsoft.com/library/system.web.security.membership.aspx)'s [ValidateUser(*username*, *password*) method](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx), which returns a Boolean value indicating whether the validity of the *username* and *password* combination.</span></span> <span data-ttu-id="6cace-286">Zaten SqlMembershipProvider 'ın Kullanıcı deposunu uygulamadığımızda, üyelik sınıfının ValidateUser metodunu şu anda kullanmıyoruz.</span><span class="sxs-lookup"><span data-stu-id="6cace-286">Seeing as we have not yet implemented the SqlMembershipProvider's user store, we cannot use the Membership class's ValidateUser method at this time.</span></span>

<span data-ttu-id="6cace-287">Kendi özel kullanıcılar veritabanı tabloımızı oluşturma süresi yerine (SqlMembershipProvider uygulandıktan sonra kullanımdan kalktı), bunun yerine oturum açma sayfasının içinde geçerli kimlik bilgilerini sabit olarak kodlayalım.</span><span class="sxs-lookup"><span data-stu-id="6cace-287">Rather than take the time to build our own custom Users database table (which would be obsolete once we implemented the SqlMembershipProvider), let's instead hard-code the valid credentials within the login page itself.</span></span> <span data-ttu-id="6cace-288">LoginButton ' ın Click olay işleyicisine aşağıdaki kodu ekleyin:</span><span class="sxs-lookup"><span data-stu-id="6cace-288">In the LoginButton's Click event handler, add the following code:</span></span>

[!code-csharp[Main](an-overview-of-forms-authentication-cs/samples/sample5.cs)]

<span data-ttu-id="6cace-289">Gördüğünüz gibi, üç geçerli kullanıcı hesabı vardır: Scott, Jisun ve Sam – üçü de aynı parolaya sahiptir ("parola").</span><span class="sxs-lookup"><span data-stu-id="6cace-289">As you can see, there are three valid user accounts – Scott, Jisun, and Sam – and all three have the same password ("password").</span></span> <span data-ttu-id="6cace-290">Kod, geçerli bir Kullanıcı adı ve parola eşleşmesi bulmak için Kullanıcı ve parola dizileri boyunca döngü yapılır.</span><span class="sxs-lookup"><span data-stu-id="6cace-290">The code loops through the users and passwords arrays looking for a valid username and password match.</span></span> <span data-ttu-id="6cace-291">Kullanıcı adı ve parola geçerliyse, kullanıcıyı oturum açıp uygun sayfaya yönlendirmemiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="6cace-291">If both the username and password are valid, we need to login the user and then redirect them to the appropriate page.</span></span> <span data-ttu-id="6cace-292">Kimlik bilgileri geçersizse, ınvalidcredentialsmessage etiketini görüntüleriz.</span><span class="sxs-lookup"><span data-stu-id="6cace-292">If the credentials are invalid, then we display the InvalidCredentialsMessage Label.</span></span>

<span data-ttu-id="6cace-293">Kullanıcı geçerli kimlik bilgileri girdiğinde "uygun sayfaya" yönlendirildiğine bahsetdim.</span><span class="sxs-lookup"><span data-stu-id="6cace-293">When a user enters valid credentials, I mentioned that they are then redirected to the "appropriate page."</span></span> <span data-ttu-id="6cace-294">Ne olmasa da uygun sayfa nedir?</span><span class="sxs-lookup"><span data-stu-id="6cace-294">What is the appropriate page, though?</span></span> <span data-ttu-id="6cace-295">Kullanıcı, görüntüleme yetkisine sahip olmayan bir sayfayı ziyaret ettiğinde, FormsAuthenticationModule otomatik olarak oturum açma sayfasına yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="6cace-295">Recall that when a user visits a page they are not authorized to view, the FormsAuthenticationModule automatically redirects them to the login page.</span></span> <span data-ttu-id="6cace-296">Bunu yaparken, istenen URL 'yi ReturnUrl parametresi aracılığıyla QueryString içinde içerir.</span><span class="sxs-lookup"><span data-stu-id="6cace-296">In doing so, it includes the requested URL in the querystring via the ReturnUrl parameter.</span></span> <span data-ttu-id="6cace-297">Diğer bir deyişle, bir Kullanıcı ProtectedPage. aspx ' i ziyaret etmeyi denediğinde ve bunu yapmak için yetkilendirilmeyen FormsAuthenticationModule, bunları şu şekilde yönlendirecektir:</span><span class="sxs-lookup"><span data-stu-id="6cace-297">That is, if a user attempted to visit ProtectedPage.aspx, and they were not authorized to do so, the FormsAuthenticationModule would redirect them to:</span></span>

<span data-ttu-id="6cace-298">Login. aspx? ReturnUrl = ProtectedPage. aspx</span><span class="sxs-lookup"><span data-stu-id="6cace-298">Login.aspx?ReturnUrl=ProtectedPage.aspx</span></span>

<span data-ttu-id="6cace-299">Başarıyla oturum açtıktan sonra, Kullanıcı ProtectedPage. aspx 'e yeniden yönlendirilmelidir.</span><span class="sxs-lookup"><span data-stu-id="6cace-299">Upon successfully logging in, the user should be redirected back to ProtectedPage.aspx.</span></span> <span data-ttu-id="6cace-300">Alternatif olarak, kullanıcılar kendi oyları üzerinde oturum açma sayfasını ziyaret edebilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-300">Alternatively, users may visit the login page on their own volition.</span></span> <span data-ttu-id="6cace-301">Bu durumda, kullanıcıya oturum açtıktan sonra, kök klasörün default. aspx sayfasına gönderilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="6cace-301">In that case, after logging in the user they should be sent to the root folder's Default.aspx page.</span></span>

### <a name="logging-in-the-user"></a><span data-ttu-id="6cace-302">Kullanıcı oturumu açma</span><span class="sxs-lookup"><span data-stu-id="6cace-302">Logging In the User</span></span>

<span data-ttu-id="6cace-303">Sağlanan kimlik bilgilerinin geçerli olduğu varsayıldığında, bir form kimlik doğrulama bileti oluşturmanız ve bu nedenle kullanıcıya sitede oturum açmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="6cace-303">Assuming that the supplied credentials are valid, we need to create a forms authentication ticket, thereby logging in the user to the site.</span></span> <span data-ttu-id="6cace-304">[System. Web. Security ad alanındaki](https://msdn.microsoft.com/library/system.web.security.aspx) [FormsAuthentication sınıfı](https://msdn.microsoft.com/library/system.web.security.formsauthentication.aspx) , kullanıcıların oturum açmasını ve Forms kimlik doğrulama sistemi aracılığıyla oturum açmasını sağlayan assıralanan yöntemler sağlar.</span><span class="sxs-lookup"><span data-stu-id="6cace-304">The [FormsAuthentication class](https://msdn.microsoft.com/library/system.web.security.formsauthentication.aspx) in the [System.Web.Security namespace](https://msdn.microsoft.com/library/system.web.security.aspx) provides assorted methods for logging in and logging out users via the forms authentication system.</span></span> <span data-ttu-id="6cace-305">FormsAuthentication sınıfında çeşitli yöntemler olsa da, bu kavşakta 'te ilgilendiğiniz üç yöntem şunlardır:</span><span class="sxs-lookup"><span data-stu-id="6cace-305">While there are several methods in the FormsAuthentication class, the three we are interested in at this juncture are:</span></span>

- <span data-ttu-id="6cace-306">[GetAuthCookie (*UserName*, *persistcookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.getauthcookie.aspx) – sağlanan name *Kullanıcı*adı için bir form kimlik doğrulama bileti oluşturur.</span><span class="sxs-lookup"><span data-stu-id="6cace-306">[GetAuthCookie(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.getauthcookie.aspx) – creates a forms authentication ticket for the supplied name *username*.</span></span> <span data-ttu-id="6cace-307">Ardından, bu yöntem kimlik doğrulama anahtarının içeriğini tutan bir HttpCookie nesnesi oluşturur ve döndürür.</span><span class="sxs-lookup"><span data-stu-id="6cace-307">Next, this method creates and returns an HttpCookie object that holds the contents of the authentication ticket.</span></span> <span data-ttu-id="6cace-308">*Persistcookie* değeri true ise kalıcı tanımlama bilgisi oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="6cace-308">If *persistCookie* is true, a persistent cookie is created.</span></span>
- <span data-ttu-id="6cace-309">[SetAuthCookie (*Kullanıcı adı*, *persistcookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) – form kimlik doğrulama tanımlama bilgisini oluşturmak için GetAuthCookie (*UserName*, *persistcookie*) yöntemini çağırır.</span><span class="sxs-lookup"><span data-stu-id="6cace-309">[SetAuthCookie(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.setauthcookie.aspx) – calls the GetAuthCookie(*username*, *persistCookie*) method to generate the forms authentication cookie.</span></span> <span data-ttu-id="6cace-310">Bu yöntem daha sonra GetAuthCookie tarafından döndürülen tanımlama bilgisini Cookies koleksiyonuna ekler (tanımlama bilgileri tabanlı formlar kimlik doğrulamasının kullanıldığı varsayılarak), aksi takdirde, bu yöntem, tanımlama bilgisi olmayan bilet mantığını işleyen bir iç sınıf çağırır).</span><span class="sxs-lookup"><span data-stu-id="6cace-310">This method then adds the cookie returned by GetAuthCookie to the Cookies collection (assuming cookies-based forms authentication is being used; otherwise, this method calls an internal class that handles the cookieless ticket logic).</span></span>
- <span data-ttu-id="6cace-311">[RedirectFromLoginPage (*Kullanıcı adı*, *persistcookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.redirectfromloginpage.aspx) – bu yöntem SetAuthCookie (*UserName*, *persistcookie*) öğesini çağırır ve ardından kullanıcıyı uygun sayfaya yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="6cace-311">[RedirectFromLoginPage(*username*, *persistCookie*)](https://msdn.microsoft.com/library/system.web.security.formsauthentication.redirectfromloginpage.aspx) – this method calls SetAuthCookie(*username*, *persistCookie*), and then redirects the user to the appropriate page.</span></span>

<span data-ttu-id="6cace-312">Tanımlama bilgisini tanımlama bilgisi koleksiyonuna yazmadan önce kimlik doğrulama biletini değiştirmeniz gerektiğinde GetAuthCookie yararlı olur.</span><span class="sxs-lookup"><span data-stu-id="6cace-312">GetAuthCookie is handy when you need to modify the authentication ticket before writing the cookie out to the Cookies collection.</span></span> <span data-ttu-id="6cace-313">, Forms kimlik doğrulama bileti oluşturmak ve tanımlama bilgileri koleksiyonuna eklemek istiyorsanız SetAuthCookie yararlı olur, ancak kullanıcıyı uygun sayfaya yönlendirmek istemezsiniz.</span><span class="sxs-lookup"><span data-stu-id="6cace-313">SetAuthCookie is useful if you want to create the forms authentication ticket and add it to the Cookies collection, but do not want to redirect the user to the appropriate page.</span></span> <span data-ttu-id="6cace-314">Belki de oturum açma sayfasında tutmak veya farklı bir sayfaya göndermek isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6cace-314">Perhaps you want to keep them on the login page or send them to some alternate page.</span></span>

<span data-ttu-id="6cace-315">Kullanıcıya oturum açıp uygun sayfaya yönlendirdiğinizden, RedirectFromLoginPage ' i kullanalım.</span><span class="sxs-lookup"><span data-stu-id="6cace-315">Since we want to log in the user and redirect them to the appropriate page, let's use RedirectFromLoginPage.</span></span> <span data-ttu-id="6cace-316">İki açıklamalı TODO satırını aşağıdaki kod satırıyla değiştirerek LoginButton 'ın Click olay işleyicisini güncelleştirin:</span><span class="sxs-lookup"><span data-stu-id="6cace-316">Update the LoginButton's Click event handler, replacing the two commented TODO lines with the following line of code:</span></span>

<span data-ttu-id="6cace-317">FormsAuthentication. RedirectFromLoginPage (Kullanıcı adı. metin, RememberMe. Checked);</span><span class="sxs-lookup"><span data-stu-id="6cace-317">FormsAuthentication.RedirectFromLoginPage(UserName.Text, RememberMe.Checked);</span></span>

<span data-ttu-id="6cace-318">Form kimlik doğrulama bileti oluştururken, form kimlik doğrulaması bileti *Kullanıcı adı* parametresi Için Kullanıcı adı metin kutusu Text özelliğini ve *Persistcookie* parametresi için RememberMe onay kutusunun denetlenen durumunu kullanırız.</span><span class="sxs-lookup"><span data-stu-id="6cace-318">When creating the forms authentication ticket we use the UserName TextBox's Text property for the forms authentication ticket *username* parameter, and the checked state of the RememberMe CheckBox for the *persistCookie* parameter.</span></span>

<span data-ttu-id="6cace-319">Oturum açma sayfasını test etmek için bir tarayıcıda ziyaret edin.</span><span class="sxs-lookup"><span data-stu-id="6cace-319">To test the login page, visit it in a browser.</span></span> <span data-ttu-id="6cace-320">"Nope" Kullanıcı adı ve "yanlış" parolası gibi geçersiz kimlik bilgileri girerek başlayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-320">Start by entering invalid credentials, such as a username of "Nope" and a password of "wrong".</span></span> <span data-ttu-id="6cace-321">Oturum açma düğmesine tıklandıktan sonra bir geri gönderme gerçekleşir ve ınvalidcredentialsmessage etiketi görüntülenecektir.</span><span class="sxs-lookup"><span data-stu-id="6cace-321">Upon clicking the Login button a postback will occur and the InvalidCredentialsMessage Label will be displayed.</span></span>

<span data-ttu-id="6cace-322">[Geçersiz kimlik bilgileri girilirken ınvalidcredentialsmessage etiketi ![görüntülenir](an-overview-of-forms-authentication-cs/_static/image25.png)](an-overview-of-forms-authentication-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="6cace-322">[![The InvalidCredentialsMessage Label is Displayed When Entering Invalid Credentials](an-overview-of-forms-authentication-cs/_static/image25.png)](an-overview-of-forms-authentication-cs/_static/image24.png)</span></span>

<span data-ttu-id="6cace-323">**Şekil 10**: geçersiz kimlik bilgileri girilirken ınvalidcredentialsmessage etiketi görüntülenir ([tam boyutlu görüntüyü görüntülemek için tıklayın](an-overview-of-forms-authentication-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="6cace-323">**Figure 10**: The InvalidCredentialsMessage Label is Displayed When Entering Invalid Credentials ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image26.png))</span></span>

<span data-ttu-id="6cace-324">Sonra, geçerli kimlik bilgileri girin ve oturum aç düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-324">Next, enter valid credentials and click the Login button.</span></span> <span data-ttu-id="6cace-325">Bu kez geri gönderme işlemi bir form kimlik doğrulama bileti oluşturulduğunda ve otomatik olarak varsayılan. aspx 'e yeniden yönlendiriliyorsunuz.</span><span class="sxs-lookup"><span data-stu-id="6cace-325">This time when the postback occurs a forms authentication ticket is created and you are automatically redirected back to Default.aspx.</span></span> <span data-ttu-id="6cace-326">Bu noktada, Web sitesinde oturum açmış olursunuz, ancak şu anda oturum açtığınızı belirten hiçbir görsel ipucu yok.</span><span class="sxs-lookup"><span data-stu-id="6cace-326">At this point you have logged in to the website, although there are no visual cues to indicate that you are currently logged in.</span></span> <span data-ttu-id="6cace-327">Adım 4 ' te, bir kullanıcının oturum açıp açmayıp belirlememe ve sayfayı ziyaret eden kullanıcıyı nasıl tanımlayabileceği hakkında bilgi vereceğiz.</span><span class="sxs-lookup"><span data-stu-id="6cace-327">In Step 4 we will see how to programmatically determine whether a user is logged in or not as well as how to identify the user visiting the page.</span></span>

<span data-ttu-id="6cace-328">5\. adım, bir kullanıcıyı Web sitesinden günlüğe kaydetme tekniklerini inceler.</span><span class="sxs-lookup"><span data-stu-id="6cace-328">Step 5 examines techniques for logging a user out of the website.</span></span>

### <a name="securing-the-login-page"></a><span data-ttu-id="6cace-329">Oturum açma sayfasının güvenliğini sağlama</span><span class="sxs-lookup"><span data-stu-id="6cace-329">Securing the Login Page</span></span>

<span data-ttu-id="6cace-330">Kullanıcı kimlik bilgilerini girdiğinde ve oturum açma sayfası formunu gönderdiğinde, parola dahil olmak üzere kimlik bilgileri, *düz metin*olarak Internet üzerinden Web sunucusuna iletilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-330">When the user enters her credentials and submits the login page form, the credentials – including her password – are transmitted over the Internet to the web server in *plain text*.</span></span> <span data-ttu-id="6cace-331">Bu, tüm korsanlarının ağ trafiğinin Kullanıcı adını ve parolayı göremeyeceğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="6cace-331">That means any hacker sniffing the network traffic can see the username and password.</span></span> <span data-ttu-id="6cace-332">Bunu engellemek için [Güvenli Yuva katmanları (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer)kullanarak ağ trafiğini şifrelemek gereklidir.</span><span class="sxs-lookup"><span data-stu-id="6cace-332">To prevent this, it is essential to encrypt the network traffic by using [Secure Socket Layers (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span></span> <span data-ttu-id="6cace-333">Bu, kimlik bilgilerinin (Ayrıca tüm sayfanın HTML işaretlemesi) Web sunucusu tarafından alınana kadar tarayıcıdan ayrıldıklarından emin olur.</span><span class="sxs-lookup"><span data-stu-id="6cace-333">This will ensure that the credentials (as well as the entire page's HTML markup) are encrypted from the moment they leave the browser until they are received by the web server.</span></span>

<span data-ttu-id="6cace-334">Web siteniz hassas bilgiler içermiyorsa, oturum açma sayfasında ve kullanıcının parolasının düz metin olarak kablo üzerinden gönderilebileceği diğer sayfalarda SSL kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="6cace-334">Unless your website contains sensitive information, you will only need to use SSL on the login page and on other pages where the user's password would otherwise be sent over the wire in plain text.</span></span> <span data-ttu-id="6cace-335">Form kimlik doğrulama biletini güvenli hale getirmeniz gerekmez, çünkü varsayılan olarak hem şifreli hem de dijital olarak imzalanır (değişiklik yapılmasını engellemek için).</span><span class="sxs-lookup"><span data-stu-id="6cace-335">You do not need to worry about securing the forms authentication ticket since, by default, it is both encrypted and digitally signed (to prevent tampering).</span></span> <span data-ttu-id="6cace-336">Aşağıdaki öğreticide, Forms kimlik doğrulama bileti güvenliği hakkında daha kapsamlı bir tartışma sunulmaktadır.</span><span class="sxs-lookup"><span data-stu-id="6cace-336">A more thorough discussion on forms authentication ticket security is presented in the following tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="6cace-337">Birçok finansal ve tıp web sitesi, kimliği doğrulanmış kullanıcıların erişebileceği *Tüm* sayfalarda SSL kullanmak üzere yapılandırılmıştır.</span><span class="sxs-lookup"><span data-stu-id="6cace-337">Many financial and medical websites are configured to use SSL on *all* pages accessible to authenticated users.</span></span> <span data-ttu-id="6cace-338">Böyle bir Web sitesi oluşturuyorsanız Forms kimlik doğrulama sisteminin yalnızca güvenli bir bağlantı üzerinden iletilmesi için Forms kimlik doğrulama sistemini yapılandırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6cace-338">If you are building such a website you can configure the forms authentication system so that the forms authentication ticket is only transmitted over a secure connection.</span></span> <span data-ttu-id="6cace-339">Sonraki öğreticide, *[Forms kimlik doğrulaması yapılandırması ve gelişmiş konular](forms-authentication-configuration-and-advanced-topics-cs.md)* 'daki çeşitli form kimlik doğrulama yapılandırma seçeneklerine bakacağız.</span><span class="sxs-lookup"><span data-stu-id="6cace-339">We will look at the various forms authentication configuration options in the next tutorial, *[Forms Authentication Configuration and Advanced Topics](forms-authentication-configuration-and-advanced-topics-cs.md)*.</span></span>

## <a name="step-4-detecting-authenticated-visitors-and-determining-their-identity"></a><span data-ttu-id="6cace-340">4\. Adım: kimliği doğrulanmış ziyaretçileri algılama ve kimliklerini belirleme</span><span class="sxs-lookup"><span data-stu-id="6cace-340">Step 4: Detecting Authenticated Visitors and Determining Their Identity</span></span>

<span data-ttu-id="6cace-341">Bu noktada, form kimlik doğrulamasını etkinleştirdik ve bir ilkel oturum açma sayfası oluşturdunuz, ancak kullanıcının kimlik doğrulamasının yapılıp yapılmayacağını veya anonim olduğunu nasıl belirleyebiliriz.</span><span class="sxs-lookup"><span data-stu-id="6cace-341">At this point we have enabled forms authentication and created a rudimentary login page, but we have yet to examine how we can determine whether a user is authenticated or anonymous.</span></span> <span data-ttu-id="6cace-342">Belirli senaryolarda, kimliği doğrulanmış veya anonim bir kullanıcının sayfayı ziyaret edip etmediğine bağlı olarak farklı verileri veya bilgileri göstermek isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6cace-342">In certain scenarios we may wish to display different data or information depending on whether an authenticated or anonymous user is visiting the page.</span></span> <span data-ttu-id="6cace-343">Üstelik, kimliği doğrulanmış kullanıcının kimliğini bilmemiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="6cace-343">Moreover, we oftentimes need to know the identity of the authenticated user.</span></span>

<span data-ttu-id="6cace-344">Bu teknikleri göstermek için mevcut default. aspx sayfasını artalım.</span><span class="sxs-lookup"><span data-stu-id="6cace-344">Let's augment the existing Default.aspx page to illustrate these techniques.</span></span> <span data-ttu-id="6cace-345">Default. aspx ' de iki panel denetimi ekleyin, bir tane bir kimlik doğrulayan Tedmessagepanel ve başka bir AnonymousMessagePanel adı.</span><span class="sxs-lookup"><span data-stu-id="6cace-345">In Default.aspx add two Panel controls, one named AuthenticatedMessagePanel and another named AnonymousMessagePanel.</span></span> <span data-ttu-id="6cace-346">İlk panelde WelcomeBackMessage adlı bir etiket denetimi ekleyin.</span><span class="sxs-lookup"><span data-stu-id="6cace-346">Add a Label control named WelcomeBackMessage in the first Panel.</span></span> <span data-ttu-id="6cace-347">İkinci panelde bir köprü denetimi ekleyin, Text özelliğini "oturum aç" ve NavigateUrl özelliğini "~/Login.aspx" olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-347">In the second Panel add a HyperLink control, set its Text property to "Log In" and its NavigateUrl property to "~/Login.aspx".</span></span> <span data-ttu-id="6cace-348">Bu noktada, default. aspx için bildirim temelli biçimlendirme aşağıdakine benzer olmalıdır:</span><span class="sxs-lookup"><span data-stu-id="6cace-348">At this point the declarative markup for Default.aspx should look similar to the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample6.aspx)]

<span data-ttu-id="6cace-349">Şu anda tahmin ettiğiniz için buradaki fikir, yalnızca kimliği doğrulanmış ziyaretçilere ve yalnızca AnonymousMessagePanel 'e anonim ziyaretçilere olan kimlik doğrulamalı Tedmessagepanel 'i görüntülemektir.</span><span class="sxs-lookup"><span data-stu-id="6cace-349">As you have probably guessed by now, the idea here is to display just the AuthenticatedMessagePanel to authenticated visitors and just the AnonymousMessagePanel to anonymous visitors.</span></span> <span data-ttu-id="6cace-350">Bunu gerçekleştirmek için, kullanıcının oturum açmış olmasına bağlı olarak bu panellerin görünür özelliklerini ayarlaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="6cace-350">To accomplish this we need to set these Panels' Visible properties depending on whether the user is logged in or not.</span></span>

<span data-ttu-id="6cace-351">[Request. IsAuthenticated özelliği](https://msdn.microsoft.com/library/system.web.httprequest.isauthenticated.aspx) , isteğin doğrulanıp doğrulanmadığını gösteren bir Boole değeri döndürür.</span><span class="sxs-lookup"><span data-stu-id="6cace-351">The [Request.IsAuthenticated property](https://msdn.microsoft.com/library/system.web.httprequest.isauthenticated.aspx) returns a Boolean value indicating whether the request has been authenticated.</span></span> <span data-ttu-id="6cace-352">Aşağıdaki kodu sayfa\_Load olay işleyicisi kodu olarak girin:</span><span class="sxs-lookup"><span data-stu-id="6cace-352">Enter the following code into the Page\_Load event handler code:</span></span>

[!code-csharp[Main](an-overview-of-forms-authentication-cs/samples/sample7.cs)]

<span data-ttu-id="6cace-353">Bu kodla birlikte, bir tarayıcıdan default. aspx adresini ziyaret edin.</span><span class="sxs-lookup"><span data-stu-id="6cace-353">With this code in place, visit Default.aspx through a browser.</span></span> <span data-ttu-id="6cace-354">Henüz oturum açmanız gerektiğini varsayarsak, oturum açma sayfasına bir bağlantı görürsünüz (bkz. Şekil 11).</span><span class="sxs-lookup"><span data-stu-id="6cace-354">Assuming that you have yet to log in, you will see a link to the login page (see Figure 11).</span></span> <span data-ttu-id="6cace-355">Bu bağlantıya tıklayın ve sitede oturum açın.</span><span class="sxs-lookup"><span data-stu-id="6cace-355">Click this link and log in to the site.</span></span> <span data-ttu-id="6cace-356">Adım 3 ' te gördüğünüz gibi, kimlik bilgilerinizi girdikten sonra default. aspx 'e geri dönersiniz, ancak bu kez sayfada "hoş geldiniz geri!" görüntülenir</span><span class="sxs-lookup"><span data-stu-id="6cace-356">As we saw in Step 3, after entering your credentials you will be returned to Default.aspx, but this time the page shows the "Welcome back!"</span></span> <span data-ttu-id="6cace-357">ileti (bkz. Şekil 12).</span><span class="sxs-lookup"><span data-stu-id="6cace-357">message (see Figure 12).</span></span>

![Anonim olarak ziyaret edildiğinde bağlantıda bir oturum görüntülenir](an-overview-of-forms-authentication-cs/_static/image27.png)

<span data-ttu-id="6cace-359">**Şekil 11**: anonim olarak ziyaret edildiğinde bağlantıda bir oturum görüntülenir</span><span class="sxs-lookup"><span data-stu-id="6cace-359">**Figure 11**: When Visiting Anonymously, a Log In Link is Displayed</span></span>

![Kimliği doğrulanmış kullanıcılar](an-overview-of-forms-authentication-cs/_static/image28.png)

<span data-ttu-id="6cace-361">**Şekil 12**: kimliği doğrulanmış kullanıcılar "hoş geldiniz" i gösteriliyor</span><span class="sxs-lookup"><span data-stu-id="6cace-361">**Figure 12**: Authenticated Users are Shown the "Welcome back!"</span></span> <span data-ttu-id="6cace-362">İleti</span><span class="sxs-lookup"><span data-stu-id="6cace-362">Message</span></span>

<span data-ttu-id="6cace-363">Şu anda oturum açmış olan kullanıcının kimliğini [HttpContext nesnesinin](https://msdn.microsoft.com/library/system.web.httpcontext.aspx) [User özelliği](https://msdn.microsoft.com/library/system.web.httpcontext.user.aspx)aracılığıyla belirleyebiliriz.</span><span class="sxs-lookup"><span data-stu-id="6cace-363">We can determine the currently logged on user's identity via the [HttpContext object](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)'s [User property](https://msdn.microsoft.com/library/system.web.httpcontext.user.aspx).</span></span> <span data-ttu-id="6cace-364">HttpContext nesnesi, geçerli istek hakkındaki bilgileri temsil eder ve diğer yaygın ASP.NET nesneleri için yanıt, Istek ve oturum olarak diğerleri arasında giriş olur.</span><span class="sxs-lookup"><span data-stu-id="6cace-364">The HttpContext object represents information about the current request, and is the home for such common ASP.NET objects as Response, Request, and Session, among others.</span></span> <span data-ttu-id="6cace-365">User özelliği, geçerli HTTP isteğinin güvenlik bağlamını temsil eder ve [IPrincipal arabirimini](https://msdn.microsoft.com/library/system.security.principal.iprincipal.aspx)uygular.</span><span class="sxs-lookup"><span data-stu-id="6cace-365">The User property represents the security context of the current HTTP request and implements the [IPrincipal interface](https://msdn.microsoft.com/library/system.security.principal.iprincipal.aspx).</span></span>

<span data-ttu-id="6cace-366">Kullanıcı özelliği FormsAuthenticationModule tarafından ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="6cace-366">The User property is set by the FormsAuthenticationModule.</span></span> <span data-ttu-id="6cace-367">Özellikle, FormsAuthenticationModule gelen istekte bir Forms kimlik doğrulama bileti bulduğunda, yeni bir GenericPrincipal nesnesi oluşturur ve bunu Kullanıcı özelliğine atar.</span><span class="sxs-lookup"><span data-stu-id="6cace-367">Specifically, when the FormsAuthenticationModule finds a forms authentication ticket in the incoming request, it creates a new GenericPrincipal object and assigns it to the User property.</span></span>

<span data-ttu-id="6cace-368">Principal nesneleri (GenericPrincipal gibi), kullanıcının kimliği ve ait oldukları roller hakkında bilgi sağlar.</span><span class="sxs-lookup"><span data-stu-id="6cace-368">Principal objects (like GenericPrincipal) provide information on the user's identity and the roles to which they belong.</span></span> <span data-ttu-id="6cace-369">IPrincipal arabirimi iki üyeyi tanımlar:</span><span class="sxs-lookup"><span data-stu-id="6cace-369">The IPrincipal interface defines two members:</span></span>

- <span data-ttu-id="6cace-370">[Idirole (*roleName*)](https://msdn.microsoft.com/library/system.security.principal.iprincipal.isinrole.aspx) – sorumlunun belirtilen role ait olup olmadığını gösteren bir Boole değeri döndüren bir yöntem.</span><span class="sxs-lookup"><span data-stu-id="6cace-370">[IsInRole(*roleName*)](https://msdn.microsoft.com/library/system.security.principal.iprincipal.isinrole.aspx) – a method that returns a Boolean value indicating if the principal belongs to the specified role.</span></span>
- <span data-ttu-id="6cace-371">[Identity](https://msdn.microsoft.com/library/system.security.principal.iprincipal.identity.aspx) : [IIdentity arabirimini](https://msdn.microsoft.com/library/system.security.principal.iidentity.aspx)uygulayan bir nesne döndüren bir özellik.</span><span class="sxs-lookup"><span data-stu-id="6cace-371">[Identity](https://msdn.microsoft.com/library/system.security.principal.iprincipal.identity.aspx) – a property that returns an object that implements the [IIdentity interface](https://msdn.microsoft.com/library/system.security.principal.iidentity.aspx).</span></span> <span data-ttu-id="6cace-372">IIdentity arabirimi üç özelliği tanımlar: [AuthenticationType](https://msdn.microsoft.com/library/system.security.principal.iidentity.authenticationtype.aspx), [IsAuthenticated](https://msdn.microsoft.com/library/system.security.principal.iidentity.isauthenticated.aspx)ve [Name](https://msdn.microsoft.com/library/system.security.principal.iidentity.name.aspx).</span><span class="sxs-lookup"><span data-stu-id="6cace-372">The IIdentity interface defines three properties: [AuthenticationType](https://msdn.microsoft.com/library/system.security.principal.iidentity.authenticationtype.aspx), [IsAuthenticated](https://msdn.microsoft.com/library/system.security.principal.iidentity.isauthenticated.aspx), and [Name](https://msdn.microsoft.com/library/system.security.principal.iidentity.name.aspx).</span></span>

<span data-ttu-id="6cace-373">Aşağıdaki kodu kullanarak geçerli ziyaretçi adını belirleyebiliriz:</span><span class="sxs-lookup"><span data-stu-id="6cace-373">We can determine the name of the current visitor using the following code:</span></span>

<span data-ttu-id="6cace-374">String currentUsersName = User.Identity.Name;</span><span class="sxs-lookup"><span data-stu-id="6cace-374">string currentUsersName = User.Identity.Name;</span></span>

<span data-ttu-id="6cace-375">Form kimlik doğrulaması kullanılırken, GenericPrincipal 'ın Identity özelliği için bir [FormsIdentity nesnesi](https://msdn.microsoft.com/library/system.web.security.formsidentity.aspx) oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="6cace-375">When using forms authentication, a [FormsIdentity object](https://msdn.microsoft.com/library/system.web.security.formsidentity.aspx) is created for the GenericPrincipal's Identity property.</span></span> <span data-ttu-id="6cace-376">FormsIdentity sınıfı her zaman, AuthenticationType özelliği için "Forms" dizesini ve IsAuthenticated özelliği için true değerini döndürür.</span><span class="sxs-lookup"><span data-stu-id="6cace-376">The FormsIdentity class always returns the string "Forms" for its AuthenticationType property and true for its IsAuthenticated property.</span></span> <span data-ttu-id="6cace-377">Name özelliği, Forms kimlik doğrulama bileti oluşturulurken belirtilen kullanıcı adını döndürür.</span><span class="sxs-lookup"><span data-stu-id="6cace-377">The Name property returns the username specified when creating the forms authentication ticket.</span></span> <span data-ttu-id="6cace-378">Bu üç özelliğe ek olarak, FormsIdentity, [anahtar özelliği](https://msdn.microsoft.com/library/system.web.security.formsidentity.ticket.aspx)aracılığıyla temel alınan kimlik doğrulama biletlerine erişimi içerir.</span><span class="sxs-lookup"><span data-stu-id="6cace-378">In addition to these three properties, FormsIdentity includes access to the underlying authentication ticket via its [Ticket property](https://msdn.microsoft.com/library/system.web.security.formsidentity.ticket.aspx).</span></span> <span data-ttu-id="6cace-379">Bilet özelliği, [FormsAuthenticationTicket](https://msdn.microsoft.com/library/system.web.security.formsauthenticationticket.aspx)türünde bir nesne döndürür, bu, Expiration, IsPersistent, IssueDate, ad vb. gibi özelliklere sahiptir.</span><span class="sxs-lookup"><span data-stu-id="6cace-379">The Ticket property returns an object of type [FormsAuthenticationTicket](https://msdn.microsoft.com/library/system.web.security.formsauthenticationticket.aspx), which has properties like Expiration, IsPersistent, IssueDate, Name, and so on.</span></span>

<span data-ttu-id="6cace-380">Burada ele almanız gereken önemli nokta, FormsAuthentication. GetAuthCookie (*UserName*, *Persistcookie*), FormsAuthentication. SetAuthCookie tanımlama*bilgisinde (username*, *Persistcookie*) ve FormsAuthentication. redirecuthloginpage (*username*, *persistcookie*) yöntemlerinde belirtilen değer olan User.Identity.Name tarafından döndürülen değere sahip.</span><span class="sxs-lookup"><span data-stu-id="6cace-380">The important point to take away here is that the *username* parameter specified in the FormsAuthentication.GetAuthCookie(*username*, *persistCookie*), FormsAuthentication.SetAuthCookie(*username*, *persistCookie*), and FormsAuthentication.RedirectFromLoginPage(*username*, *persistCookie*) methods is the same value returned by User.Identity.Name.</span></span> <span data-ttu-id="6cace-381">Ayrıca, bu yöntemler tarafından oluşturulan kimlik doğrulama bileti, User. Identity bir FormsIdentity nesnesine ve ardından bilet özelliğine erişerek kullanılabilir:</span><span class="sxs-lookup"><span data-stu-id="6cace-381">Moreover, the authentication ticket created by these methods is available by casting User.Identity to a FormsIdentity object and then accessing the Ticket property:</span></span>

[!code-csharp[Main](an-overview-of-forms-authentication-cs/samples/sample8.cs)]

<span data-ttu-id="6cace-382">Default. aspx dosyasında daha kişiselleştirilmiş bir ileti sağlayabiliriz.</span><span class="sxs-lookup"><span data-stu-id="6cace-382">Let's provide a more personalized message in Default.aspx.</span></span> <span data-ttu-id="6cace-383">, WelcomeBackMessage etiketinin Text özelliğine "hoş geldiniz Back, *UserName*!" dizesinin atanması için olay işleyicisini yükle\_sayfayı güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="6cace-383">Update the Page\_Load event handler so that the WelcomeBackMessage Label's Text property is assigned the string "Welcome back, *username*!"</span></span>

<span data-ttu-id="6cace-384">WelcomeBackMessage. Text = "Welcome Back," + User.Identity.Name + "!";</span><span class="sxs-lookup"><span data-stu-id="6cace-384">WelcomeBackMessage.Text = "Welcome back, " + User.Identity.Name + "!";</span></span>

<span data-ttu-id="6cace-385">Şekil 13, bu değişikliğin etkisini gösterir (Kullanıcı Scott olarak oturum açarken).</span><span class="sxs-lookup"><span data-stu-id="6cace-385">Figure 13 shows the effect of this modification (when logging in as user Scott).</span></span>

![Hoş geldiniz Iletisi Şu anda oturum açmış olan kullanıcının adını Içerir](an-overview-of-forms-authentication-cs/_static/image29.png)

<span data-ttu-id="6cace-387">**Şekil 13**: hoş geldiniz Iletisi Şu anda oturum açmış olan kullanıcının adını içerir</span><span class="sxs-lookup"><span data-stu-id="6cace-387">**Figure 13**: The Welcome Message Includes the Currently Logged In User's Name</span></span>

### <a name="using-the-loginview-and-loginname-controls"></a><span data-ttu-id="6cace-388">LoginView ve LoginName denetimlerini kullanma</span><span class="sxs-lookup"><span data-stu-id="6cace-388">Using the LoginView and LoginName Controls</span></span>

<span data-ttu-id="6cace-389">Kimliği doğrulanmış ve anonim kullanıcılara farklı içerik görüntüleme yaygın bir gereksinimdir; Bu nedenle, şu anda oturum açmış olan kullanıcının adını görüntülüyor.</span><span class="sxs-lookup"><span data-stu-id="6cace-389">Displaying different content to authenticated and anonymous users is a common requirement; so is displaying the name of the currently logged on user.</span></span> <span data-ttu-id="6cace-390">Bu nedenle ASP.NET, Şekil 13 ' te gösterilen işlevselliği, ancak tek bir kod satırı yazmak zorunda kalmadan sağlayan iki Web denetimi içerir.</span><span class="sxs-lookup"><span data-stu-id="6cace-390">For that reason, ASP.NET includes two Web controls that provide the same functionality shown in Figure 13, but without the need to write a single line of code.</span></span>

<span data-ttu-id="6cace-391">[LoginView denetimi](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx) , kimliği doğrulanmış ve anonim kullanıcılara farklı verilerin görüntülenmesini kolaylaştıran şablon tabanlı bir Web denetimidir.</span><span class="sxs-lookup"><span data-stu-id="6cace-391">The [LoginView control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginview.aspx) is a template-based Web control that makes it easy to display different data to authenticated and anonymous users.</span></span> <span data-ttu-id="6cace-392">LoginView, önceden tanımlanmış iki şablonu içerir:</span><span class="sxs-lookup"><span data-stu-id="6cace-392">The LoginView includes two predefined templates:</span></span>

- <span data-ttu-id="6cace-393">AnonymousTemplate: Bu şablona eklenen tüm biçimlendirmeler yalnızca anonim ziyaretçilere görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="6cace-393">AnonymousTemplate – any markup added to this template is only displayed to anonymous visitors.</span></span>
- <span data-ttu-id="6cace-394">LoggedInTemplate: Bu şablonun biçimlendirmesi yalnızca kimliği doğrulanmış kullanıcılar için gösteriliyor.</span><span class="sxs-lookup"><span data-stu-id="6cace-394">LoggedInTemplate – this template's markup is shown only to authenticated users.</span></span>

<span data-ttu-id="6cace-395">Şimdi sitenizin ana sayfasına, site. Master öğesine LoginView denetimi ekleyelim.</span><span class="sxs-lookup"><span data-stu-id="6cace-395">Let's add the LoginView control to our site's master page, Site.master.</span></span> <span data-ttu-id="6cace-396">Yalnızca LoginView denetimi eklemek yerine, hem yeni bir ContentPlaceHolder denetimi ekleyelim hem de LoginView denetimini bu yeni ContentPlaceHolder içine koyalım.</span><span class="sxs-lookup"><span data-stu-id="6cace-396">Rather than adding just the LoginView control, though, let's add both a new ContentPlaceHolder control and then put the LoginView control within that new ContentPlaceHolder.</span></span> <span data-ttu-id="6cace-397">Bu karar için daha kısa bir süre içinde görünür hale gelir.</span><span class="sxs-lookup"><span data-stu-id="6cace-397">The rationale for this decision will become apparent shortly.</span></span>

> [!NOTE]
> <span data-ttu-id="6cace-398">AnonymousTemplate ve LoggedInTemplate 'e ek olarak, LoginView denetimi role özgü Şablonlar içerebilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-398">In addition to the AnonymousTemplate and LoggedInTemplate, the LoginView control can include role-specific templates.</span></span> <span data-ttu-id="6cace-399">Role özgü şablonlar yalnızca belirtilen role ait olan kullanıcılar için biçimlendirme gösterir.</span><span class="sxs-lookup"><span data-stu-id="6cace-399">Role-specific templates show markup only to those users that belong to a specified role.</span></span> <span data-ttu-id="6cace-400">Sonraki bir öğreticide, LoginView denetiminin rol tabanlı özelliklerini inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="6cace-400">We will examine the role-based features of the LoginView control in a future tutorial.</span></span>

<span data-ttu-id="6cace-401">Gezinti &lt;div&gt; öğesi içindeki ana sayfaya bir ContentPlaceHolder adlı bir ContentPlaceHolder ekleyerek başlayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-401">Start by adding a ContentPlaceHolder named LoginContent into the master page within the navigation &lt;div&gt; element.</span></span> <span data-ttu-id="6cace-402">Araç kutusu 'ndan bir ContentPlaceHolder denetimini kaynak görünümüne sürükleyerek, ortaya çıkan biçimlendirmeyi "TODO: menüsünün üzerine doğru" alacak şekilde yerleştirebilirsiniz... metinleri.</span><span class="sxs-lookup"><span data-stu-id="6cace-402">You can simply drag a ContentPlaceHolder control from the Toolbox onto the Source view, placing the resulting markup right above the "TODO: Menu will go here…" text.</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample9.aspx)]

<span data-ttu-id="6cace-403">Ardından, LoginContent ContentPlaceHolder içinde bir LoginView denetimi ekleyin.</span><span class="sxs-lookup"><span data-stu-id="6cace-403">Next, add a LoginView control within the LoginContent ContentPlaceHolder.</span></span> <span data-ttu-id="6cace-404">Ana sayfanın ContentPlaceHolder denetimlerine yerleştirilmiş içerikler, ContentPlaceHolder için *varsayılan içerik* olarak değerlendirilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-404">Content placed into the master page's ContentPlaceHolder controls are considered *default content* for the ContentPlaceHolder.</span></span> <span data-ttu-id="6cace-405">Diğer bir deyişle, bu ana sayfayı kullanan ASP.NET sayfaları her bir ContentPlaceHolder için kendi içeriğini belirtebilir veya ana sayfanın varsayılan içeriğini kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-405">That is, ASP.NET pages that use this master page can specify their own content for each ContentPlaceHolder or use the master page's default content.</span></span>

<span data-ttu-id="6cace-406">LoginView ve oturum açmayla ilgili diğer denetimler, araç kutusunun oturum açma sekmesinde bulunur.</span><span class="sxs-lookup"><span data-stu-id="6cace-406">The LoginView and other login-related controls are located in the Toolbox's Login tab.</span></span>

![Araç kutusundaki LoginView denetimi](an-overview-of-forms-authentication-cs/_static/image30.png)

<span data-ttu-id="6cace-408">**Şekil 14**: araç kutusundaki LoginView denetimi</span><span class="sxs-lookup"><span data-stu-id="6cace-408">**Figure 14**: The LoginView Control in the Toolbox</span></span>

<span data-ttu-id="6cace-409">Sonra, LoginView denetiminden hemen sonra, ancak ContentPlaceHolder içinde iki &lt;br/&gt; öğesi ekleyin.</span><span class="sxs-lookup"><span data-stu-id="6cace-409">Next, add two &lt;br /&gt; elements immediately after the LoginView control, but still within the ContentPlaceHolder.</span></span> <span data-ttu-id="6cace-410">Bu noktada, gezinti &lt;div&gt; öğesinin biçimlendirmesi aşağıdaki gibi görünmelidir:</span><span class="sxs-lookup"><span data-stu-id="6cace-410">At this point, the navigation &lt;div&gt; element's markup should look like the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample10.aspx)]

<span data-ttu-id="6cace-411">LoginView şablonları tasarımcıdan veya bildirime dayalı biçimlendirmeden tanımlanabilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-411">The LoginView's templates can be defined from the Designer or the declarative markup.</span></span> <span data-ttu-id="6cace-412">Visual Studio tasarımcısında, bir açılan listede yapılandırılmış şablonları listeleyen LoginView ' ın akıllı etiketini genişletin.</span><span class="sxs-lookup"><span data-stu-id="6cace-412">From Visual Studio's Designer, expand the LoginView's smart tag, which lists the configured templates in a drop-down list.</span></span> <span data-ttu-id="6cace-413">"Hello, Stranger" metnini AnonymousTemplate 'e yazın; sonra, bir köprü denetimi ekleyin ve metin ve NavigateUrl özelliklerini sırasıyla "oturum aç" ve "~/Login.aspx" olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-413">Type in the text "Hello, stranger" into the AnonymousTemplate; next, add a HyperLink control and set its Text and NavigateUrl properties to "Log In" and "~/Login.aspx", respectively.</span></span>

<span data-ttu-id="6cace-414">AnonymousTemplate 'i yapılandırdıktan sonra LoggedInTemplate 'e geçin ve "hoş geldiniz" metnini girin.</span><span class="sxs-lookup"><span data-stu-id="6cace-414">After configuring the AnonymousTemplate, switch to the LoggedInTemplate and enter the text, "Welcome back, ".</span></span> <span data-ttu-id="6cace-415">Ardından araç kutusundan bir LoginName denetimini LoggedInTemplate öğesine sürükleyerek "hoş geldiniz" metninin hemen sonrasına yerleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6cace-415">Then drag a LoginName control from the Toolbox into the LoggedInTemplate, placing it immediately after the "Welcome back, " text.</span></span> <span data-ttu-id="6cace-416">[LoginName denetimi](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginname.aspx), adının gösterdiği gibi, o anda oturum açmış kullanıcının adını görüntüler.</span><span class="sxs-lookup"><span data-stu-id="6cace-416">The [LoginName control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginname.aspx), as its name implies, displays the name of the currently logged in user.</span></span> <span data-ttu-id="6cace-417">Dahili olarak, LoginName denetimi yalnızca User.Identity.Name özelliğini verir</span><span class="sxs-lookup"><span data-stu-id="6cace-417">Internally, the LoginName control simply outputs the User.Identity.Name property</span></span>

<span data-ttu-id="6cace-418">Bu eklemeleri LoginView şablonlarına yaptıktan sonra, biçimlendirme aşağıdakine benzer olmalıdır:</span><span class="sxs-lookup"><span data-stu-id="6cace-418">After making these additions to the LoginView's templates, the markup should look similar to the following:</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample11.aspx)]

<span data-ttu-id="6cace-419">Site. Master ana sayfasına bu ekleme ile, Web sitemizden her sayfa, kullanıcının kimliğinin doğrulanmadığına bağlı olarak farklı bir ileti görüntüler.</span><span class="sxs-lookup"><span data-stu-id="6cace-419">With this addition to the Site.master master page, each page in our website will display a different message depending on whether the user is authenticated.</span></span> <span data-ttu-id="6cace-420">Şekil 15, Kullanıcı Jisun tarafından bir tarayıcı aracılığıyla ziyaret edildiğinde varsayılan. aspx sayfasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="6cace-420">Figure 15 shows the Default.aspx page when visited through a browser by user Jisun.</span></span> <span data-ttu-id="6cace-421">"Hoş geldiniz geri, Jisun" iletisi iki kez yineleniyor: ana sayfanın gezinti bölümünde (yeni eklediğimiz LoginView denetimi aracılığıyla) ve default. aspx 'in içerik alanında (panel denetimleri ve programlama mantığı aracılığıyla) bir kez.</span><span class="sxs-lookup"><span data-stu-id="6cace-421">The "Welcome back, Jisun" message is repeated twice: once in the master page's navigation section on the left (via the LoginView control we just added) and once in the Default.aspx's content area (via Panel controls and programmatic logic).</span></span>

![LoginView denetimi görüntülenir](an-overview-of-forms-authentication-cs/_static/image31.png)

<span data-ttu-id="6cace-423">**Şekil 15**: LoginView denetimi "hoş geldiniz geri, Jisun" görüntüler.</span><span class="sxs-lookup"><span data-stu-id="6cace-423">**Figure 15**: The LoginView Control Displays "Welcome back, Jisun."</span></span>

<span data-ttu-id="6cace-424">LoginView öğesini ana sayfaya eklediğimiz için, sitemizdeki her sayfada görünebilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-424">Because we added the LoginView to the master page, it can appear in every page on our site.</span></span> <span data-ttu-id="6cace-425">Ancak, bu iletiyi göstermek istemediğimiz Web sayfaları olabilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-425">However, there may be web pages where we don't want to show this message.</span></span> <span data-ttu-id="6cace-426">Bu tür bir sayfa, oturum açma sayfasına bir bağlantı olmadığı için oturum açma sayfasıdır.</span><span class="sxs-lookup"><span data-stu-id="6cace-426">One such page is the login page, since a link to the login page seems out of place there.</span></span> <span data-ttu-id="6cace-427">LoginView denetimini ana sayfada ContentPlaceHolder öğesine yerleştirdiğimiz için içerik sayfamızda bu varsayılan biçimlendirmeyi geçersiz kılarız.</span><span class="sxs-lookup"><span data-stu-id="6cace-427">Since we placed the LoginView control in a ContentPlaceHolder in the master page, we can override this default markup in our content page.</span></span> <span data-ttu-id="6cace-428">Login. aspx ' i açın ve tasarımcıya gidin.</span><span class="sxs-lookup"><span data-stu-id="6cace-428">Open Login.aspx and go to the Designer.</span></span> <span data-ttu-id="6cace-429">Ana sayfada bulunan LoginContent için login. aspx içinde açıkça bir Içerik denetimi tanımlamadık, oturum açma sayfası bu ContentPlaceHolder için ana sayfanın varsayılan işaretlemesini gösterir.</span><span class="sxs-lookup"><span data-stu-id="6cace-429">Since we have not explicitly defined a Content control in Login.aspx for the LoginContent ContentPlaceHolder in the master page, the login page will show the master page's default markup for this ContentPlaceHolder.</span></span> <span data-ttu-id="6cace-430">Bunu tasarımcı aracılığıyla görebilirsiniz – LoginContent ContentPlaceHolder, varsayılan biçimlendirmeyi gösterir (LoginView denetimi).</span><span class="sxs-lookup"><span data-stu-id="6cace-430">You can see this through the Designer – the LoginContent ContentPlaceHolder shows the default markup (the LoginView control).</span></span>

<span data-ttu-id="6cace-431">[Oturum açma sayfası ![ana sayfanın LoginContent ContentPlaceHolder öğesinin varsayılan Içeriğini gösterir](an-overview-of-forms-authentication-cs/_static/image33.png)](an-overview-of-forms-authentication-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="6cace-431">[![The Login Page Shows the Default Content for the Master Page's LoginContent ContentPlaceHolder](an-overview-of-forms-authentication-cs/_static/image33.png)](an-overview-of-forms-authentication-cs/_static/image32.png)</span></span>

<span data-ttu-id="6cace-432">**Şekil 16**: oturum açma sayfası, ana sayfanın Logincontent ContentPlaceHolder öğesinin varsayılan içeriğini gösterir ([tam boyutlu görüntüyü görüntülemek için tıklayın](an-overview-of-forms-authentication-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="6cace-432">**Figure 16**: The Login Page Shows the Default Content for the Master Page's LoginContent ContentPlaceHolder ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image34.png))</span></span>

<span data-ttu-id="6cace-433">LoginContent ContentPlaceHolder için varsayılan biçimlendirmeyi geçersiz kılmak için, tasarımcıda bölgeye sağ tıklayıp bağlam menüsünden Özel Içerik oluştur seçeneğini belirlemeniz yeterlidir.</span><span class="sxs-lookup"><span data-stu-id="6cace-433">To override the default markup for the LoginContent ContentPlaceHolder, simply right-click on the region in the Designer and choose the Create Custom Content option from the context menu.</span></span> <span data-ttu-id="6cace-434">(Visual Studio 2008 kullanırken ContentPlaceHolder, seçildiğinde aynı seçeneği sunan akıllı bir etiket içerir.) Bu, sayfanın biçimlendirmesine yeni bir Içerik denetimi ekler ve bu sayede Bu sayfa için özel içerik tanımlamamıza izin verir.</span><span class="sxs-lookup"><span data-stu-id="6cace-434">(When using Visual Studio 2008 the ContentPlaceHolder includes a smart tag that, when selected, offers the same option.) This adds a new Content control to the page's markup and thereby allows us to define custom content for this page.</span></span> <span data-ttu-id="6cace-435">Buraya "Lütfen oturum aç..." gibi özel bir ileti ekleyebilirsiniz, ancak bunu boş bırakalım.</span><span class="sxs-lookup"><span data-stu-id="6cace-435">You could add a custom message here, such as "Please log in…", but let's just leave this blank.</span></span>

> [!NOTE]
> <span data-ttu-id="6cace-436">Visual Studio 2005 ' de, özel içerik oluşturmak ASP.NET sayfasında boş bir Içerik denetimi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="6cace-436">In Visual Studio 2005, creating custom content creates an empty Content control in the ASP.NET page.</span></span> <span data-ttu-id="6cace-437">Ancak Visual Studio 2008 ' de, özel içerik oluşturma ana sayfanın varsayılan içeriğini yeni oluşturulan Içerik denetimine kopyalar.</span><span class="sxs-lookup"><span data-stu-id="6cace-437">In Visual Studio 2008, however, creating custom content copies the master page's default content into the newly created Content control.</span></span> <span data-ttu-id="6cace-438">Visual Studio 2008 kullanıyorsanız, yeni Içerik denetimini oluşturduktan sonra ana sayfadan kopyalanmış içeriği temizlediğinizden emin olun.</span><span class="sxs-lookup"><span data-stu-id="6cace-438">If you are using Visual Studio 2008, then, after creating the new Content control make sure to clear out the content copied over from the master page.</span></span>

<span data-ttu-id="6cace-439">Şekil 17, bu değişikliği yaptıktan sonra bir tarayıcıdan ziyaret edildiğinde Login. aspx sayfasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="6cace-439">Figure 17 shows the Login.aspx page when visited from a browser after making this change.</span></span> <span data-ttu-id="6cace-440">Varsayılan. aspx ' i ziyaret edildiğinde olduğu gibi sol gezinti &lt;div&gt; "Merhaba, Stranger" veya "hoş *geldiniz" iletisinin*olmadığını unutmayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-440">Note that there is no "Hello, stranger" or "Welcome back, *username*" message in the left navigation &lt;div&gt; as there is when visiting Default.aspx.</span></span>

<span data-ttu-id="6cace-441">[Oturum açma sayfası ![varsayılan LoginContent ContentPlaceHolder 'ın Işaretlemesini gizler](an-overview-of-forms-authentication-cs/_static/image36.png)](an-overview-of-forms-authentication-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="6cace-441">[![The Login Page Hides the Default LoginContent ContentPlaceHolder's Markup](an-overview-of-forms-authentication-cs/_static/image36.png)](an-overview-of-forms-authentication-cs/_static/image35.png)</span></span>

<span data-ttu-id="6cace-442">**Şekil 17**: oturum açma sayfası varsayılan Logincontent ContentPlaceHolder 'ın işaretlemesini gizler ([tam boyutlu görüntüyü görüntülemek için tıklayın](an-overview-of-forms-authentication-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="6cace-442">**Figure 17**: The Login Page Hides the Default LoginContent ContentPlaceHolder's Markup ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image37.png))</span></span>

## <a name="step-5-logging-out"></a><span data-ttu-id="6cace-443">5\. Adım: oturumu kapatma</span><span class="sxs-lookup"><span data-stu-id="6cace-443">Step 5: Logging Out</span></span>

<span data-ttu-id="6cace-444">Adım 3 ' te, bir kullanıcının siteye oturum açmasını sağlamak için bir oturum açma sayfası oluşturma konusuna baktık, ancak henüz bir kullanıcıyı nasıl günlüğe kaydettireceğiz. ' De bir Kullanıcı kaydetme yöntemlerine ek olarak, FormsAuthentication sınıfı da bir [SignOut yöntemi](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx)sağlar.</span><span class="sxs-lookup"><span data-stu-id="6cace-444">In Step 3 we looked at building a login page to log a user in to the site, but we have yet to see how to log a user out. In addition to methods for logging a user in, the FormsAuthentication class also provides a [SignOut method](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx).</span></span> <span data-ttu-id="6cace-445">SignOut yöntemi, form kimlik doğrulama anahtarını yok eder, böylece kullanıcı siteden dışarı günlüğe kaydediliyor.</span><span class="sxs-lookup"><span data-stu-id="6cace-445">The SignOut method simply destroys the forms authentication ticket, thereby logging the user out of the site.</span></span>

<span data-ttu-id="6cace-446">Bir oturum çıkış bağlantısı sunumu, ASP.NET 'in bir kullanıcıyı günlüğe kaydetmek için özel olarak tasarlanmış bir denetim içermesi gibi yaygın bir özelliktir. [LoginStatus denetimi](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginstatus.aspx) , kullanıcının kimlik doğrulama durumuna bağlı olarak "Login" LinkButton veya "Logout" LinkButton öğesini görüntüler.</span><span class="sxs-lookup"><span data-stu-id="6cace-446">Offering a log out link is such a common feature that ASP.NET includes a control specifically designed to log a user out. The [LoginStatus control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.loginstatus.aspx) displays either a "Login" LinkButton or a "Logout" LinkButton, depending on the user's authentication status.</span></span> <span data-ttu-id="6cace-447">Anonim kullanıcılar için "oturum açma" LinkButton işlemi, kimliği doğrulanmış kullanıcılara "oturum kapatma" LinkButton gösterilirken işlenir.</span><span class="sxs-lookup"><span data-stu-id="6cace-447">A "Login" LinkButton is rendered for anonymous users, whereas a "Logout" LinkButton is displayed to authenticated users.</span></span> <span data-ttu-id="6cace-448">"Login" ve "Logout" LinkButtons için metin, LoginStatus 'un LoginText ve LogoutText özellikleri aracılığıyla yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-448">The text for the "Login" and "Logout" LinkButtons can be configured via the LoginStatus's LoginText and LogoutText properties.</span></span>

<span data-ttu-id="6cace-449">"Login" LinkButton düğmesine tıklamak, oturum açma sayfasına yeniden yönlendirme verilen bir geri göndermeye neden olur.</span><span class="sxs-lookup"><span data-stu-id="6cace-449">Clicking the "Login" LinkButton causes a postback, from which a redirect is issued to the login page.</span></span> <span data-ttu-id="6cace-450">"Logout" LinkButton düğmesine tıklamak, LoginStatus denetiminin FormsAuthentication. SignOff metodunu çağırmasına ve sonra kullanıcıyı bir sayfaya yönlendirmesine neden olur.</span><span class="sxs-lookup"><span data-stu-id="6cace-450">Clicking the "Logout" LinkButton causes the LoginStatus control to invoke the FormsAuthentication.SignOff method and then redirects the user to a page.</span></span> <span data-ttu-id="6cace-451">Oturum açmış kullanıcının yeniden yönlendirildiği sayfa, aşağıdaki üç değerden birine atanabilecek LogoutAction özelliğine bağlıdır:</span><span class="sxs-lookup"><span data-stu-id="6cace-451">The page the logged off user is redirected to depends on the LogoutAction property, which can be assigned to one of the three following values:</span></span>

- <span data-ttu-id="6cace-452">Yenile – varsayılan; kullanıcıyı yeni ziyaret ettikleri sayfaya yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="6cace-452">Refresh – the default; redirects the user to the page they were just visiting.</span></span> <span data-ttu-id="6cace-453">Yeni ziyaret ettikleri sayfa anonim kullanıcılara izin vermediğinden, FormsAuthenticationModule otomatik olarak Kullanıcı oturum açma sayfasına yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="6cace-453">If the page they were just visiting does not allow anonymous users, then the FormsAuthenticationModule will automatically redirect the user to the login page.</span></span>

<span data-ttu-id="6cace-454">Burada yeniden yönlendirmenin neden gerçekleştirildiğinden merak ediyor olabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6cace-454">You may be curious as to why a redirect is performed here.</span></span> <span data-ttu-id="6cace-455">Kullanıcı aynı sayfada kalmak isterse, neden açık yeniden yönlendirme gereksinimim gerekir?</span><span class="sxs-lookup"><span data-stu-id="6cace-455">If the user wants to remain on the same page, why the need for the explicit redirect?</span></span> <span data-ttu-id="6cace-456">Bunun nedeni, "Oturumu Kapat" LinkButton 'ın tıklandığı, kullanıcının tanımlama bilgisi koleksiyonunda Forms kimlik doğrulama biletini hala sahip olmasından kaynaklanır.</span><span class="sxs-lookup"><span data-stu-id="6cace-456">The reason is because when the "Logoff" LinkButton is clicked, the user still has the forms authentication ticket in their cookies collection.</span></span> <span data-ttu-id="6cace-457">Sonuç olarak, geri gönderme isteği, kimliği doğrulanmış bir istek olur.</span><span class="sxs-lookup"><span data-stu-id="6cace-457">Consequently, the postback request is an authenticated request.</span></span> <span data-ttu-id="6cace-458">LoginStatus denetimi SignOut yöntemini çağırır, ancak FormsAuthenticationModule Kullanıcı kimliğini doğruladıktan sonra olur.</span><span class="sxs-lookup"><span data-stu-id="6cace-458">The LoginStatus control calls the SignOut method, but that happens after the FormsAuthenticationModule has authenticated the user.</span></span> <span data-ttu-id="6cace-459">Bu nedenle, açık bir yeniden yönlendirme tarayıcının sayfayı yeniden istemesine neden olur.</span><span class="sxs-lookup"><span data-stu-id="6cace-459">Therefore, an explicit redirect causes the browser to re-request the page.</span></span> <span data-ttu-id="6cace-460">Tarayıcının sayfayı yeniden istediği zaman, Forms kimlik doğrulama bileti kaldırılmıştır ve bu nedenle gelen istek anonimdir.</span><span class="sxs-lookup"><span data-stu-id="6cace-460">By the time the browser re-requests the page, the forms authentication ticket has been removed and therefore the incoming request is anonymous.</span></span>

- <span data-ttu-id="6cace-461">Yeniden yönlendir – Kullanıcı, LoginStatus 'un LogoutPageUrl özelliği tarafından belirtilen URL 'ye yeniden yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-461">Redirect – the user is redirected to the URL specified by the LoginStatus's LogoutPageUrl property.</span></span>
- <span data-ttu-id="6cace-462">RedirectToLoginPage: Kullanıcı oturum açma sayfasına yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-462">RedirectToLoginPage – the user is redirected to the login page.</span></span>

<span data-ttu-id="6cace-463">Ana sayfaya bir LoginStatus denetimi ekleyelim ve kullanıcıyı, imzalandığını onaylayan bir ileti görüntüleyen bir sayfaya göndermek için yeniden yönlendirme seçeneğini kullanacak şekilde yapılandıralim. Logout. aspx adlı kök dizinde bir sayfa oluşturarak başlayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-463">Let's add a LoginStatus control to the master page and configure it to use the Redirect option to send the user to a page that displays a message confirming that they have been signed out. Start by creating a page in the root directory named Logout.aspx.</span></span> <span data-ttu-id="6cace-464">Bu sayfayı site. Master ana sayfasıyla ilişkilendirmeyi unutmayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-464">Don't forget to associate this page with the Site.master master page.</span></span> <span data-ttu-id="6cace-465">Ardından, kullanıcının oturum açtıkları Kullanıcı tarafından kullanılan biçimlendirmesinde bir ileti girin.</span><span class="sxs-lookup"><span data-stu-id="6cace-465">Next, enter a message in the page's markup explaining to the user that they have been logged out.</span></span>

<span data-ttu-id="6cace-466">Ardından, site. Master ana sayfasına dönün ve LoginContent ContentPlaceHolder içindeki LoginView altına bir LoginStatus denetimi ekleyin.</span><span class="sxs-lookup"><span data-stu-id="6cace-466">Next, return to the Site.master master page and add a LoginStatus control beneath the LoginView in the LoginContent ContentPlaceHolder.</span></span> <span data-ttu-id="6cace-467">LoginStatus denetiminin LogoutAction özelliğini, Redirect ve LogoutPageUrl özelliğini "~/Logout.aspx" olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="6cace-467">Set the LoginStatus control's LogoutAction property to Redirect and its LogoutPageUrl property to "~/Logout.aspx".</span></span>

[!code-aspx[Main](an-overview-of-forms-authentication-cs/samples/sample12.aspx)]

<span data-ttu-id="6cace-468">LoginStatus, LoginView denetimi dışında olduğundan, hem anonim hem de kimliği doğrulanmış kullanıcılar için görünür, ancak LoginStatus "Login" veya "Logout" LinkButton öğesini doğru bir şekilde görüntülemesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="6cace-468">Since the LoginStatus is outside of the LoginView control, it will appear for both anonymous and authenticated users, but that's OK because the LoginStatus will correctly display a "Login" or "Logout" LinkButton.</span></span> <span data-ttu-id="6cace-469">LoginStatus denetimi eklendiğinde, AnonymousTemplate içindeki "oturum aç" Köprüsü gereksiz olduğundan bunu kaldırın.</span><span class="sxs-lookup"><span data-stu-id="6cace-469">With the addition of the LoginStatus control, the "Log In" HyperLink in the AnonymousTemplate is superfluous, so remove it.</span></span>

<span data-ttu-id="6cace-470">Şekil 18, Jisun ziyaret edildiğinde default. aspx ' i gösterir.</span><span class="sxs-lookup"><span data-stu-id="6cace-470">Figure 18 shows Default.aspx when Jisun visits.</span></span> <span data-ttu-id="6cace-471">Sol sütunda, "hoş geldiniz geri, Jisun" iletisini, oturum kapatma bağlantısı ile birlikte görüntülediğini unutmayın. Günlüğe kaydet LinkButton düğmesine tıklamak geri göndermeye neden olur, sistemin oturumunu kapatır ve sonra da oturumu kapat. aspx öğesine yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="6cace-471">Note that the left column displays the message, "Welcome back, Jisun" along with a link to log out. Clicking the log out LinkButton causes a postback, signs Jisun out of the system, and then redirects her to Logout.aspx.</span></span> <span data-ttu-id="6cace-472">Şekil 19 ' u gösterdiği gibi, Jisun Logout 'e ulaşmaz. aspx zaten kaydolmuş ve bu nedenle anonimdir.</span><span class="sxs-lookup"><span data-stu-id="6cace-472">As Figure 19 shows, by the time Jisun reaches Logout.aspx she has already been signed out and is therefore anonymous.</span></span> <span data-ttu-id="6cace-473">Sonuç olarak, sol sütunda "hoş geldiniz, yabanger" metni ve oturum açma sayfasına yönelik bir bağlantı gösterilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-473">Consequently, the left column shows the text "Welcome, stranger" and a link to the login page.</span></span>

<span data-ttu-id="6cace-474">[![default. aspx gösterir](an-overview-of-forms-authentication-cs/_static/image39.png)](an-overview-of-forms-authentication-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="6cace-474">[![Default.aspx Shows](an-overview-of-forms-authentication-cs/_static/image39.png)](an-overview-of-forms-authentication-cs/_static/image38.png)</span></span>

<span data-ttu-id="6cace-475">**Şekil 18**: default. aspx, "Logout" LinkButton ([tam boyutlu görüntüyü görüntülemek için tıklayın](an-overview-of-forms-authentication-cs/_static/image40.png)) Ile birlikte "Welcome Back, Jisun" gösterir.</span><span class="sxs-lookup"><span data-stu-id="6cace-475">**Figure 18**: Default.aspx Shows "Welcome Back, Jisun" Along with a "Logout" LinkButton ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image40.png))</span></span>

<span data-ttu-id="6cace-476">[![Logout. aspx gösterileri](an-overview-of-forms-authentication-cs/_static/image42.png)](an-overview-of-forms-authentication-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="6cace-476">[![Logout.aspx Shows](an-overview-of-forms-authentication-cs/_static/image42.png)](an-overview-of-forms-authentication-cs/_static/image41.png)</span></span>

<span data-ttu-id="6cace-477">**Şekil 19**: logout. aspx, "Login" LinkButton ([tam boyutlu görüntüyü görüntülemek için tıklayın](an-overview-of-forms-authentication-cs/_static/image43.png)) Ile birlikte "hoş geldiniz, yabanger" gösterir.</span><span class="sxs-lookup"><span data-stu-id="6cace-477">**Figure 19**: Logout.aspx Shows "Welcome, stranger" Along with a "Login" LinkButton ([Click to view full-size image](an-overview-of-forms-authentication-cs/_static/image43.png))</span></span>

> [!NOTE]
> <span data-ttu-id="6cace-478">Ana sayfanın LoginContent ContentPlaceHolder 'ı (adım 4 ' te Login. aspx yaptığımız gibi) gizlemek için Logout. aspx sayfasını özelleştirmenizi öneririz.</span><span class="sxs-lookup"><span data-stu-id="6cace-478">I encourage you to customize the Logout.aspx page to hide the master page's LoginContent ContentPlaceHolder (like we did for Login.aspx in Step 4).</span></span> <span data-ttu-id="6cace-479">Bunun nedeni, LoginStatus denetimi tarafından oluşturulan "Login" LinkButton 'ın ("Hello, Stranger" altında) kullanıcıyı, ReturnUrl QueryString parametresinde geçerli URL 'yi geçen oturum açma sayfasına göndermesi nedeniyle oluşur.</span><span class="sxs-lookup"><span data-stu-id="6cace-479">The reason is because the "Login" LinkButton rendered by the LoginStatus control (the one beneath "Hello, stranger") sends the user to the login page passing the current URL in the ReturnUrl querystring parameter.</span></span> <span data-ttu-id="6cace-480">Kısacası, oturum açmış bir Kullanıcı bu LoginStatus "Login" LinkButton öğesine tıklamıştır ve sonra oturum açar. Bu, kullanıcıyı kolayca karıştırabilen Logout. aspx öğesine yeniden yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="6cace-480">In short, if a user who has logged out clicks this LoginStatus's "Login" LinkButton, and then logs in, they will be redirected back to Logout.aspx, which could easily confuse the user.</span></span>

## <a name="summary"></a><span data-ttu-id="6cace-481">Özet</span><span class="sxs-lookup"><span data-stu-id="6cace-481">Summary</span></span>

<span data-ttu-id="6cace-482">Bu öğreticide, Forms kimlik doğrulaması iş akışını inceliyoruz ve sonra bir ASP.NET uygulamasında form kimlik doğrulaması uygulamayı etkinleştirdik.</span><span class="sxs-lookup"><span data-stu-id="6cace-482">In this tutorial we started with an examination of the forms authentication workflow and then turned to implementing forms authentication in an ASP.NET application.</span></span> <span data-ttu-id="6cace-483">Form kimlik doğrulaması, iki sorumluluğu olan FormsAuthenticationModule tarafından desteklenir: kullanıcıları Forms kimlik doğrulama biletini temel alarak tanımlama ve yetkisiz kullanıcıları oturum açma sayfasına yönlendirme.</span><span class="sxs-lookup"><span data-stu-id="6cace-483">Forms authentication is powered by the FormsAuthenticationModule, which has two responsibilities: identifying users based on their forms authentication ticket, and redirecting unauthorized users to the login page.</span></span>

<span data-ttu-id="6cace-484">.NET Framework FormsAuthentication sınıfı, form kimlik doğrulama biletlerini oluşturma, İnceleme ve kaldırma yöntemlerini içerir.</span><span class="sxs-lookup"><span data-stu-id="6cace-484">The .NET Framework's FormsAuthentication class includes methods for creating, inspecting, and removing forms authentication tickets.</span></span> <span data-ttu-id="6cace-485">Istek. IsAuthenticated özelliği ve Kullanıcı nesnesi, bir isteğin kimlik doğrulamasının yapılıp yapılmayacağını ve kullanıcının kimliğiyle ilgili bilgilerin belirlenmesi için ek programlama desteği sağlar.</span><span class="sxs-lookup"><span data-stu-id="6cace-485">The Request.IsAuthenticated property and User object provide additional programmatic support for determining whether a request is authenticated and information about the user's identity.</span></span> <span data-ttu-id="6cace-486">Ayrıca, geliştiricilere birçok yaygın oturum açma görevi gerçekleştirmeye yönelik hızlı ve kod içermeyen bir yol veren LoginView, LoginStatus ve LoginName Web denetimleri de vardır.</span><span class="sxs-lookup"><span data-stu-id="6cace-486">There are also the LoginView, LoginStatus, and LoginName Web controls, which give developers a quick, code-free way for performing many common login-related tasks.</span></span> <span data-ttu-id="6cace-487">Bu ve diğer oturum açma ile ilgili Web denetimlerini sonraki öğreticilerde daha ayrıntılı bir şekilde inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="6cace-487">We will examine these and other login-related Web controls in greater detail in future tutorials.</span></span>

<span data-ttu-id="6cace-488">Bu öğreticide, Forms kimlik doğrulamasına yönelik bir Amna hatlarıyla genel bakış sunulmaktadır.</span><span class="sxs-lookup"><span data-stu-id="6cace-488">This tutorial provided a cursory overview of forms authentication.</span></span> <span data-ttu-id="6cace-489">Assıralanan yapılandırma seçeneklerini inceleyemedi, tanımlama bilgisi olmayan formların kimlik doğrulama biletlerinin nasıl çalıştığını inceleyin veya form kimlik doğrulama anahtarının içeriğini nasıl koruduğunu araştırın ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="6cace-489">We did not examine the assorted configuration options, look at how cookieless forms authentication tickets work, or explore how ASP.NET protects the contents of the forms authentication ticket.</span></span> <span data-ttu-id="6cace-490">[Sonraki öğreticide](forms-authentication-configuration-and-advanced-topics-cs.md)bu konuları ve daha fazlasını tartışacağız.</span><span class="sxs-lookup"><span data-stu-id="6cace-490">We will discuss these topics and more in the [next tutorial](forms-authentication-configuration-and-advanced-topics-cs.md).</span></span>

<span data-ttu-id="6cace-491">Programlamanın kutlu olsun!</span><span class="sxs-lookup"><span data-stu-id="6cace-491">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="6cace-492">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="6cace-492">Further Reading</span></span>

<span data-ttu-id="6cace-493">Bu öğreticide ele alınan konular hakkında daha fazla bilgi için aşağıdaki kaynaklara bakın:</span><span class="sxs-lookup"><span data-stu-id="6cace-493">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="6cace-494">IıS6 ve ııS7 güvenliği arasındaki değişiklikler</span><span class="sxs-lookup"><span data-stu-id="6cace-494">Changes Between IIS6 and IIS7 Security</span></span>](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/Changes-between-IIS6-and-IIS7-Security)
- [<span data-ttu-id="6cace-495">Login ASP.NET denetimleri</span><span class="sxs-lookup"><span data-stu-id="6cace-495">Login ASP.NET Controls</span></span>](https://msdn.microsoft.com/library/d51ttbhx.aspx)
- <span data-ttu-id="6cace-496">[Professional ASP.NET 2,0 güvenlik, üyelik ve rol yönetimi](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html) (ısbn: 978-0-7645-9698-8)</span><span class="sxs-lookup"><span data-stu-id="6cace-496">[Professional ASP.NET 2.0 Security, Membership, and Role Management](http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596985.html) (ISBN: 978-0-7645-9698-8)</span></span>
- [<span data-ttu-id="6cace-497">`<authentication>` öğesi</span><span class="sxs-lookup"><span data-stu-id="6cace-497">The `<authentication>` Element</span></span>](https://msdn.microsoft.com/library/532aee0e.aspx)
- [<span data-ttu-id="6cace-498">`<authentication>` için `<forms>` öğesi</span><span class="sxs-lookup"><span data-stu-id="6cace-498">The `<forms>` Element for `<authentication>`</span></span>](https://msdn.microsoft.com/library/1d3t3c61.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="6cace-499">Bu öğreticide bulunan konularda video eğitimi</span><span class="sxs-lookup"><span data-stu-id="6cace-499">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="6cace-500">ASP.NET’te Temel Forms Kimlik Doğrulaması Kullanma</span><span class="sxs-lookup"><span data-stu-id="6cace-500">Using Basic Forms Authentication in ASP.NET</span></span>](../../../videos/authentication/using-basic-forms-authentication-in-aspnet.md)

## <a name="about-the-author"></a><span data-ttu-id="6cace-501">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="6cace-501">About the Author</span></span>

<span data-ttu-id="6cace-502">4GuysFromRolla.com 'in, [Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), yedi ASP/ASP. net books ve [](http://www.4guysfromrolla.com)'in yazarı, 1998 sürümünden bu yana Microsoft Web teknolojileriyle çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="6cace-502">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="6cace-503">Scott bağımsız danışman, Trainer ve yazıcı olarak çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="6cace-503">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="6cace-504">En son kitabı, [*24 saat içinde ASP.NET 2,0 kendi kendinize eğitim*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)ister.</span><span class="sxs-lookup"><span data-stu-id="6cace-504">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="6cace-505">mitchell@4GuysFromRolla.comadresinden erişilebilir [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="6cace-505">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="6cace-506">ya da blog aracılığıyla [http://ScottOnWriting.NET](http://ScottOnWriting.NET)bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6cace-506">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="6cace-507">Özel olarak teşekkürler...</span><span class="sxs-lookup"><span data-stu-id="6cace-507">Special Thanks To…</span></span>

<span data-ttu-id="6cace-508">Bu öğretici serisi birçok yararlı gözden geçirenler tarafından incelendi.</span><span class="sxs-lookup"><span data-stu-id="6cace-508">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="6cace-509">Bu öğretici için müşteri adayı gözden geçireni, bu öğretici serisinin birçok yararlı gözden geçiren tarafından incelendi.</span><span class="sxs-lookup"><span data-stu-id="6cace-509">Lead reviewer for this tutorial was This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="6cace-510">Bu öğreticide lider gözden geçirenler, Alicja Maziarz, John suru ve Teresa Murphy ' i içerir.</span><span class="sxs-lookup"><span data-stu-id="6cace-510">Lead reviewers for this tutorial include Alicja Maziarz, John Suru, and Teresa Murphy.</span></span> <span data-ttu-id="6cace-511">Yaklaşan MSDN makalelerimi gözden geçiriyor musunuz?</span><span class="sxs-lookup"><span data-stu-id="6cace-511">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="6cace-512">Öyleyse, benimitchell@4GuysFromRolla.combir satır bırakın [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="6cace-512">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="6cace-513">[Önceki](security-basics-and-asp-net-support-cs.md)
> [İleri](forms-authentication-configuration-and-advanced-topics-cs.md)</span><span class="sxs-lookup"><span data-stu-id="6cace-513">[Previous](security-basics-and-asp-net-support-cs.md)
[Next](forms-authentication-configuration-and-advanced-topics-cs.md)</span></span>
