---
uid: web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-cs
title: Kullanıcı kimlik bilgilerini üyelik kullanıcı deposunda doğrulama (C#) | Microsoft Docs
author: rick-anderson
description: Bu öğreticide, Kullanıcı kimlik bilgilerinin hem programlı hem de oturum açma denetimi kullanılarak üyelik kullanıcı deposunda nasıl doğrulanacağı anlatılmaktadır...
ms.author: riande
ms.date: 01/18/2008
ms.assetid: 61aa4e08-aa81-4aeb-8ebe-19ba7a65e04c
msc.legacyurl: /web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-cs
msc.type: authoredcontent
ms.openlocfilehash: aaf6df6f52253ef0f7369a7e77211b6786b97db1
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74618307"
---
# <a name="validating-user-credentials-against-the-membership-user-store-c"></a><span data-ttu-id="8843a-103">Üyelik Kullanıcı Deposu ile Karşılaştırarak Kullanıcı Kimlik Bilgilerini Doğrulama (C#)</span><span class="sxs-lookup"><span data-stu-id="8843a-103">Validating User Credentials Against the Membership User Store (C#)</span></span>

<span data-ttu-id="8843a-104">[Scott Mitchell](https://twitter.com/ScottOnWriting) tarafından</span><span class="sxs-lookup"><span data-stu-id="8843a-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="8843a-105">[Kodu indirin](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_CS.zip) veya [PDF 'yi indirin](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="8843a-105">[Download Code](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_CS.zip) or [Download PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_cs.pdf)</span></span>

> <span data-ttu-id="8843a-106">Bu öğreticide, Kullanıcı kimlik bilgilerinin hem programlı hem de oturum açma denetimi kullanılarak üyelik kullanıcı deposunda nasıl doğrulanacağı anlatılmaktadır.</span><span class="sxs-lookup"><span data-stu-id="8843a-106">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="8843a-107">Ayrıca, oturum açma denetiminin görünümünü ve davranışını özelleştirmeye de bakacağız.</span><span class="sxs-lookup"><span data-stu-id="8843a-107">We will also look at how to customize the login control's appearance and behavior.</span></span>

## <a name="introduction"></a><span data-ttu-id="8843a-108">Giriş</span><span class="sxs-lookup"><span data-stu-id="8843a-108">Introduction</span></span>

<span data-ttu-id="8843a-109"><a id="Tutorial05"> </a> [Önceki öğreticide](creating-user-accounts-cs.md) , üyelik çerçevesinde yeni bir kullanıcı hesabı oluşturmayı inceledik.</span><span class="sxs-lookup"><span data-stu-id="8843a-109">In the <a id="Tutorial05"></a>[preceding tutorial](creating-user-accounts-cs.md) we looked at how to create a new user account in the Membership framework.</span></span> <span data-ttu-id="8843a-110">İlk olarak, `Membership` sınıfın `CreateUser` yöntemi aracılığıyla Kullanıcı hesaplarını oluşturmaya ve ardından CreateUserWizard Web denetimi kullanılarak incelenmiştik.</span><span class="sxs-lookup"><span data-stu-id="8843a-110">We first looked at programmatically creating user accounts via the `Membership` class's `CreateUser` method, and then examined using the CreateUserWizard Web control.</span></span> <span data-ttu-id="8843a-111">Ancak, oturum açma sayfası şu anda belirtilen kimlik bilgilerini sabit kodlanmış Kullanıcı adı ve parola çiftleri listesine göre doğrular.</span><span class="sxs-lookup"><span data-stu-id="8843a-111">However, the login page currently validates the supplied credentials against a hard-coded list of username and password pairs.</span></span> <span data-ttu-id="8843a-112">Oturum açma sayfasının mantığını, üyelik çerçevesinin Kullanıcı deposunda kimlik bilgilerini doğrulayacak şekilde güncelleştirmemiz gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="8843a-112">We need to update the login page's logic so that it validates credentials against the Membership framework's user store.</span></span>

<span data-ttu-id="8843a-113">Kullanıcı hesapları oluşturma konusunda çok benzer şekilde, kimlik bilgileri programlı bir şekilde veya bildirimli olarak doğrulanabilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-113">Much like with creating user accounts, credentials can be validated programmatically or declaratively.</span></span> <span data-ttu-id="8843a-114">Üyelik API 'SI, kullanıcının kimlik bilgilerini Kullanıcı deposuna göre doğrulamaya yönelik bir yöntem içerir.</span><span class="sxs-lookup"><span data-stu-id="8843a-114">The Membership API includes a method for programmatically validating a user's credentials against the user store.</span></span> <span data-ttu-id="8843a-115">Ve ASP.NET, oturum açma Web denetimiyle birlikte gönderilir. Bu, Kullanıcı arabirimini Kullanıcı arabirimi, Kullanıcı adı ve parola için metin kutularına ve oturum açmak için bir düğmeye sahiptir.</span><span class="sxs-lookup"><span data-stu-id="8843a-115">And ASP.NET ships with the Login Web control, which renders a user interface with textboxes for the username and password and a button to log in.</span></span>

<span data-ttu-id="8843a-116">Bu öğreticide, Kullanıcı kimlik bilgilerinin hem programlı hem de oturum açma denetimi kullanılarak üyelik kullanıcı deposunda nasıl doğrulanacağı anlatılmaktadır.</span><span class="sxs-lookup"><span data-stu-id="8843a-116">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="8843a-117">Ayrıca, oturum açma denetiminin görünümünü ve davranışını özelleştirmeye de bakacağız.</span><span class="sxs-lookup"><span data-stu-id="8843a-117">We will also look at how to customize the login control's appearance and behavior.</span></span> <span data-ttu-id="8843a-118">Haydi başlayın!</span><span class="sxs-lookup"><span data-stu-id="8843a-118">Let's get started!</span></span>

## <a name="step-1-validating-credentials-against-the-membership-user-store"></a><span data-ttu-id="8843a-119">1\. Adım: üyelik kullanıcı deposunda kimlik bilgilerini doğrulama</span><span class="sxs-lookup"><span data-stu-id="8843a-119">Step 1: Validating Credentials Against the Membership User Store</span></span>

<span data-ttu-id="8843a-120">Form kimlik doğrulaması kullanan Web siteleri için, bir Kullanıcı oturum açma sayfasını ziyaret ederek ve kimlik bilgilerini girerek Web sitesinde oturum açar.</span><span class="sxs-lookup"><span data-stu-id="8843a-120">For web sites that use forms authentication, a user logs on to the website by visiting a login page and entering their credentials.</span></span> <span data-ttu-id="8843a-121">Bu kimlik bilgileri daha sonra kullanıcı deposu ile karşılaştırılır.</span><span class="sxs-lookup"><span data-stu-id="8843a-121">These credentials are then compared against the user store.</span></span> <span data-ttu-id="8843a-122">Bunlar geçerliyse, kullanıcıya ziyaretçinin kimliğini ve gerçekliğini gösteren bir güvenlik belirteci olan bir form kimlik doğrulama bileti verilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-122">If they are valid, then the user is granted a forms authentication ticket, which is a security token that indicates the identity and authenticity of the visitor.</span></span>

<span data-ttu-id="8843a-123">Bir kullanıcıyı üyelik çerçevesine karşı doğrulamak için `Membership` sınıfının [`ValidateUser` metodunu](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx)kullanın.</span><span class="sxs-lookup"><span data-stu-id="8843a-123">To validate a user against the Membership framework, use the `Membership` class's [`ValidateUser` method](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx).</span></span> <span data-ttu-id="8843a-124">`ValidateUser` yöntemi iki giriş parametresi alır- *`username`* ve *`password`* ve kimlik bilgilerinin geçerli olup olmadığını gösteren bir Boole değeri döndürür.</span><span class="sxs-lookup"><span data-stu-id="8843a-124">The `ValidateUser` method takes in two input parameters - *`username`* and *`password`* - and returns a Boolean value indicating whether the credentials were valid.</span></span> <span data-ttu-id="8843a-125">Önceki öğreticide incelenen `CreateUser` yöntemi gibi `ValidateUser` yöntemi, yapılandırılan üyelik sağlayıcısına gerçek doğrulamayı devreder.</span><span class="sxs-lookup"><span data-stu-id="8843a-125">Like with the `CreateUser` method we examined in the previous tutorial, the `ValidateUser` method delegates the actual validation to the configured Membership provider.</span></span>

<span data-ttu-id="8843a-126">`SqlMembershipProvider`, belirtilen kullanıcının parolasını `aspnet_Membership_GetPasswordWithFormat` saklı yordamı aracılığıyla alarak sağlanan kimlik bilgilerini doğrular.</span><span class="sxs-lookup"><span data-stu-id="8843a-126">The `SqlMembershipProvider` validates the supplied credentials by obtaining the specified user's password via the `aspnet_Membership_GetPasswordWithFormat` stored procedure.</span></span> <span data-ttu-id="8843a-127">`SqlMembershipProvider`, kullanıcıların parolalarını üç biçimden birini kullanarak depoladığını hatırlayın: şifresiz, şifrelenmiş veya karma hale getirilmiş.</span><span class="sxs-lookup"><span data-stu-id="8843a-127">Recall that the `SqlMembershipProvider` stores users' passwords using one of three formats: clear, encrypted, or hashed.</span></span> <span data-ttu-id="8843a-128">`aspnet_Membership_GetPasswordWithFormat` saklı yordam, parolayı ham biçiminde döndürür.</span><span class="sxs-lookup"><span data-stu-id="8843a-128">The `aspnet_Membership_GetPasswordWithFormat` stored procedure returns the password in its raw format.</span></span> <span data-ttu-id="8843a-129">Şifrelenmiş veya karma parolalar için `SqlMembershipProvider`, `ValidateUser` yöntemine geçirilen *`password`* değerini eşdeğer şifreli veya karma durumuna dönüştürür ve sonra onu veritabanından döndürülmüş şekilde karşılaştırır.</span><span class="sxs-lookup"><span data-stu-id="8843a-129">For encrypted or hashed passwords, the `SqlMembershipProvider` transforms the *`password`* value passed into the `ValidateUser` method into its equivalent encrypted or hashed state and then compares it with what was returned from the database.</span></span> <span data-ttu-id="8843a-130">Veritabanında depolanan parola, Kullanıcı tarafından girilen biçimli parolayla eşleşiyorsa, kimlik bilgileri geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="8843a-130">If the password stored in the database matches the formatted password entered by the user, the credentials are valid.</span></span>

<span data-ttu-id="8843a-131">İzin verilen kimlik bilgilerini üyelik çerçevesi kullanıcı deposunda doğrulamak için oturum açma sayfamızı (~/`Login.aspx`) güncelleştirelim.</span><span class="sxs-lookup"><span data-stu-id="8843a-131">Let's update our login page (~/`Login.aspx`) so that it validates the supplied credentials against the Membership framework user store.</span></span> <span data-ttu-id="8843a-132">Bu oturum açma sayfasını <a id="Tutorial02"> </a> [*form kimlik doğrulaması öğreticisine genel bakış*](../introduction/an-overview-of-forms-authentication-cs.md) bölümünde, Kullanıcı adı ve parola, beni anımsa onay kutusu ve oturum açma düğmesi için iki metin kutusuna sahip bir arabirim oluşturma (bkz. Şekil 1).</span><span class="sxs-lookup"><span data-stu-id="8843a-132">We created this login page back in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-cs.md) tutorial, creating an interface with two TextBoxes for the username and password, a Remember Me checkbox, and a Login button (see Figure 1).</span></span> <span data-ttu-id="8843a-133">Kod, girilen kimlik bilgilerini sabit kodlanmış Kullanıcı adı ve parola çiftleri (Scott/Password, Jisun/Password ve Sam/Password) listesiyle karşılaştırarak doğrular.</span><span class="sxs-lookup"><span data-stu-id="8843a-133">The code validates the entered credentials against a hard-coded list of username and password pairs (Scott/password, Jisun/password, and Sam/password).</span></span> <span data-ttu-id="8843a-134"><a id="Tutorial03"> </a> [*Forms kimlik doğrulaması yapılandırması ve gelişmiş konular*](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) öğreticisinde, form kimlik doğrulama biletinin `UserData` özelliğindeki ek bilgileri depolamak için oturum açma sayfasının kodunu güncelleştirdik.</span><span class="sxs-lookup"><span data-stu-id="8843a-134">In the <a id="Tutorial03"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) tutorial we updated the login page's code to store additional information in the forms authentication ticket's `UserData` property.</span></span>

<span data-ttu-id="8843a-135">[![oturum açma sayfasının arabirimi Iki metin kutuları, bir CheckBoxList ve bir düğme Içerir](validating-user-credentials-against-the-membership-user-store-cs/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="8843a-135">[![The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button](validating-user-credentials-against-the-membership-user-store-cs/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image1.png)</span></span>

<span data-ttu-id="8843a-136">**Şekil 1**: oturum açma sayfasının arabirimi Iki metin kutuları, bir CheckBoxList ve bir düğme içerir ([tam boyutlu görüntüyü görüntülemek için tıklatın](validating-user-credentials-against-the-membership-user-store-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="8843a-136">**Figure 1**: The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image3.png))</span></span>

<span data-ttu-id="8843a-137">Oturum açma sayfasının Kullanıcı arabirimi değişmeden kalabilir, ancak oturum açma düğmesinin `Click` olay işleyicisini, kullanıcıyı üyelik çerçevesi kullanıcı deposunda karşı doğrulayan kodla değiştirmemiz gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="8843a-137">The login page's user interface can remain unchanged, but we need to replace the Login button's `Click` event handler with code that validates the user against the Membership framework user store.</span></span> <span data-ttu-id="8843a-138">Olay işleyicisini kodun aşağıdaki gibi görünmesi için güncelleştirin:</span><span class="sxs-lookup"><span data-stu-id="8843a-138">Update the event handler so that its code appears as follows:</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample1.cs)]

<span data-ttu-id="8843a-139">Bu kod daha basit bir işlemdir.</span><span class="sxs-lookup"><span data-stu-id="8843a-139">This code is remarkably simple.</span></span> <span data-ttu-id="8843a-140">`Membership.ValidateUser` yöntemini çağırarak, sağlanan Kullanıcı adı ve parolayı geçirerek başladık.</span><span class="sxs-lookup"><span data-stu-id="8843a-140">We start by calling the `Membership.ValidateUser` method, passing in the supplied username and password.</span></span> <span data-ttu-id="8843a-141">Bu yöntem true değerini döndürürse, Kullanıcı `FormsAuthentication` sınıfının RedirectFromLoginPage yöntemi aracılığıyla sitede oturum açmış olur.</span><span class="sxs-lookup"><span data-stu-id="8843a-141">If that method returns true, then the user is signed into the site via the `FormsAuthentication` class's RedirectFromLoginPage method.</span></span> <span data-ttu-id="8843a-142">( <a id="Tutorial2"> </a> [*Form kimlik doğrulaması öğreticisine genel bakış*](../introduction/an-overview-of-forms-authentication-cs.md) konusunda anlatıldığı gibi `FormsAuthentication.RedirectFromLoginPage`, Forms kimlik doğrulama bileti oluşturur ve kullanıcıyı uygun sayfaya yönlendirir.) Kimlik bilgileri geçersiz ise, kullanıcıya Kullanıcı adının veya parolasının yanlış olduğunu bildiren `InvalidCredentialsMessage` etiketi görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="8843a-142">(As we discussed in the <a id="Tutorial2"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-cs.md) tutorial, the `FormsAuthentication.RedirectFromLoginPage` creates the forms authentication ticket and then redirects the user to the appropriate page.) If the credentials are invalid, however, the `InvalidCredentialsMessage` Label is displayed, informing the user that their username or password was incorrect.</span></span>

<span data-ttu-id="8843a-143">İşte bu kadar kolay!</span><span class="sxs-lookup"><span data-stu-id="8843a-143">That's all there is to it!</span></span>

<span data-ttu-id="8843a-144">Oturum açma sayfasının beklendiği gibi çalışıp çalışmadığını sınamak için, önceki öğreticide oluşturduğunuz kullanıcı hesaplarından biriyle oturum açmayı deneyin.</span><span class="sxs-lookup"><span data-stu-id="8843a-144">To test that the login page works as expected, attempt to login with one of the user accounts you created in the preceding tutorial.</span></span> <span data-ttu-id="8843a-145">Ya da henüz bir hesap oluşturmadıysanız `~/Membership/CreatingUserAccounts.aspx` sayfasından bir tane oluşturun.</span><span class="sxs-lookup"><span data-stu-id="8843a-145">Or, if you have not yet created an account, go ahead and create one from the `~/Membership/CreatingUserAccounts.aspx` page.</span></span>

> [!NOTE]
> <span data-ttu-id="8843a-146">Kullanıcı kimlik bilgilerini girdiğinde ve oturum açma sayfası formunu gönderdiğinde, parola da dahil olmak üzere kimlik bilgileri Internet üzerinden *düz metin*olarak iletilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-146">When the user enters her credentials and submits the login page form, the credentials, including her password, are transmitted over the Internet to the web server in *plain text*.</span></span> <span data-ttu-id="8843a-147">Bu, tüm korsanlarının ağ trafiğinin Kullanıcı adını ve parolayı göremeyeceğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="8843a-147">That means any hacker sniffing the network traffic can see the username and password.</span></span> <span data-ttu-id="8843a-148">Bunu engellemek için [Güvenli Yuva katmanları (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer)kullanarak ağ trafiğini şifrelemek gereklidir.</span><span class="sxs-lookup"><span data-stu-id="8843a-148">To prevent this, it is essential to encrypt the network traffic by using [Secure Socket Layers (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span></span> <span data-ttu-id="8843a-149">Bu, kimlik bilgilerinin (Ayrıca tüm sayfanın HTML işaretlemesi) Web sunucusu tarafından alınana kadar tarayıcıdan ayrıldıklarından emin olur.</span><span class="sxs-lookup"><span data-stu-id="8843a-149">This will ensure that the credentials (as well as the entire page's HTML markup) are encrypted from the moment they leave the browser until they are received by the web server.</span></span>

### <a name="how-the-membership-framework-handles-invalid-login-attempts"></a><span data-ttu-id="8843a-150">Üyelik çerçevesi geçersiz oturum açma girişimlerini nasıl Işler?</span><span class="sxs-lookup"><span data-stu-id="8843a-150">How the Membership Framework Handles Invalid Login Attempts</span></span>

<span data-ttu-id="8843a-151">Bir ziyaretçi oturum açma sayfasına ulaştığında ve kimlik bilgilerini gönderdiğinde, tarayıcıları oturum açma sayfasına bir HTTP isteği oluşturur.</span><span class="sxs-lookup"><span data-stu-id="8843a-151">When a visitor reaches the login page and submits their credentials, their browser makes an HTTP request to the login page.</span></span> <span data-ttu-id="8843a-152">Kimlik bilgileri geçerliyse, HTTP yanıtı bir tanımlama bilgisinde kimlik doğrulama biletini içerir.</span><span class="sxs-lookup"><span data-stu-id="8843a-152">If the credentials are valid, the HTTP response includes the authentication ticket in a cookie.</span></span> <span data-ttu-id="8843a-153">Bu nedenle, sitenize kesintiye uğramaya çalışan bir korsan, oturum açma sayfasına geçerli bir Kullanıcı adı ve parola tahminiyle, her zaman çalışan bir program oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-153">Therefore, a hacker attempting to break into your site could create a program that exhaustively sends HTTP requests to the login page with a valid username and a guess at the password.</span></span> <span data-ttu-id="8843a-154">Parola tahmini doğruysa, oturum açma sayfası, kimlik doğrulama anahtarı tanımlama bilgisini döndürür. bu noktada, programın geçerli bir Kullanıcı adı/parola çiftinin üzerinde olduğunu bildiğinde haberdar olur.</span><span class="sxs-lookup"><span data-stu-id="8843a-154">If the password guess is correct, the login page will return the authentication ticket cookie, at which point the program knows it has stumbled upon a valid username/password pair.</span></span> <span data-ttu-id="8843a-155">Bu tür bir program, deneme yanılma aracılığıyla bir kullanıcının parolasıyla, özellikle de parolanın zayıfına göre anlaşılabilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-155">Through brute force, such a program might be able to stumble upon a user's password, especially if the password is weak.</span></span>

<span data-ttu-id="8843a-156">Bu tür deneme yanılma saldırılarını engellemek için, belirli bir süre içinde belirli sayıda başarısız oturum açma girişimi varsa üyelik çerçevesi bir kullanıcıyı kilitler.</span><span class="sxs-lookup"><span data-stu-id="8843a-156">To prevent such brute force attacks, the Membership framework locks out a user if there are a certain number of unsuccessful login attempts within a certain period of time.</span></span> <span data-ttu-id="8843a-157">Tam parametreler aşağıdaki iki üyelik sağlayıcısı yapılandırma ayarları aracılığıyla yapılandırılabilir:</span><span class="sxs-lookup"><span data-stu-id="8843a-157">The exact parameters are configurable through the following two Membership provider configuration settings:</span></span>

- <span data-ttu-id="8843a-158">`maxInvalidPasswordAttempts`-Kullanıcı için, hesap kilitlenmeden önce geçen süre içinde geçersiz parola denemesine izin verildiğini belirtir. Varsayılan değer 5 ' tir.</span><span class="sxs-lookup"><span data-stu-id="8843a-158">`maxInvalidPasswordAttempts` - specifies how many invalid password attempts are allowed for the user within the time period before the account is locked out. The default value is 5.</span></span>
- <span data-ttu-id="8843a-159">`passwordAttemptWindow`-belirtilen geçersiz oturum açma girişimi sayısının, hesabın kilitlenmesine neden olacağı süreyi dakika cinsinden gösterir. Varsayılan değer 10 ' dur.</span><span class="sxs-lookup"><span data-stu-id="8843a-159">`passwordAttemptWindow` - indicates the time period in minutes during which the specified number of invalid login attempts will cause the account to be locked out. The default value is 10.</span></span>

<span data-ttu-id="8843a-160">Bir Kullanıcı kilitlendiyse, yönetici hesabının kilidini açana kadar oturum açamaz.</span><span class="sxs-lookup"><span data-stu-id="8843a-160">If a user has been locked out, she cannot login until an administrator unlocks her account.</span></span> <span data-ttu-id="8843a-161">Bir Kullanıcı kilitlendiğinde, geçerli kimlik bilgileri sağlanmış olsa bile `ValidateUser` yöntemi *her zaman* `false`döndürür.</span><span class="sxs-lookup"><span data-stu-id="8843a-161">When a user is locked out, the `ValidateUser` method will *always* return `false`, even if valid credentials are supplied.</span></span> <span data-ttu-id="8843a-162">Bu davranış, bir korsanın, deneme yanılma yöntemleri aracılığıyla sitenize bölünmesinin olasılığını azaltır, ancak parolasını unutduktan veya yanlışlıkla Caps Lock 'ta veya hatalı yazma gününe sahip olan geçerli bir kullanıcının kilitlenmesini sonlandırabilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-162">While this behavior lessens the likelihood that a hacker will break into your site through brute force methods, it can end up locking out a valid user who has simply forgotten her password or accidentally has the Caps Lock on or is having a bad typing day.</span></span>

<span data-ttu-id="8843a-163">Ne yazık ki, bir kullanıcı hesabının kilidini açmak için yerleşik bir araç yoktur.</span><span class="sxs-lookup"><span data-stu-id="8843a-163">Unfortunately, there is no built-in tool for unlocking a user account.</span></span> <span data-ttu-id="8843a-164">Bir hesabın kilidini açmak için veritabanını doğrudan değiştirebilir ve uygun Kullanıcı hesabı için `aspnet_Membership` tablosundaki `IsLockedOut` alanını değiştirebilir veya kilit açma seçeneklerinin kilidini açmak için seçenekleri olan kilitli hesapları listeleyen Web tabanlı bir arabirim oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8843a-164">In order to unlock an account, you can modify the database directly - change the `IsLockedOut` field in the `aspnet_Membership` table for the appropriate user account - or create a web-based interface that lists locked out accounts with options to unlock them.</span></span> <span data-ttu-id="8843a-165">Gelecekteki bir öğreticide, ortak kullanıcı hesabı ve rolle ilgili görevleri yerine getirmeye yönelik yönetim arabirimleri oluşturmayı inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="8843a-165">We will examine creating administrative interfaces for accomplishing common user account- and role-related tasks in a future tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="8843a-166">`ValidateUser` yönteminin bir alt tarafı, sağlanan kimlik bilgileri geçersiz olduğunda, neden bir açıklama sağlamaz.</span><span class="sxs-lookup"><span data-stu-id="8843a-166">One downside of the `ValidateUser` method is that when the supplied credentials are invalid, it does not provide any explanation as to why.</span></span> <span data-ttu-id="8843a-167">Kullanıcı deposunda eşleşen bir Kullanıcı adı/parola çifti olmadığından veya Kullanıcı henüz onaylanmadığından veya Kullanıcı kilitlenmiş olduğundan kimlik bilgileri geçersiz olabilir. Adım 4 ' te, oturum açma girişimi başarısız olduğunda kullanıcıya daha ayrıntılı bir ileti göstermeyi öğreneceğiz.</span><span class="sxs-lookup"><span data-stu-id="8843a-167">The credentials may be invalid because there is no matching username/password pair in the user store, or because the user has not yet been approved, or because the user has been locked out. In Step 4 we will see how to show a more detailed message to the user when their login attempt fails.</span></span>

## <a name="step-2-collecting-credentials-through-the-login-web-control"></a><span data-ttu-id="8843a-168">2\. Adım: oturum açma Web denetimi aracılığıyla kimlik bilgileri toplama</span><span class="sxs-lookup"><span data-stu-id="8843a-168">Step 2: Collecting Credentials through the Login Web Control</span></span>

<span data-ttu-id="8843a-169">[Oturum açma Web denetimi](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) , <a id="SKM5"> </a> [*form kimlik doğrulaması öğreticisine genel bakış*](../introduction/an-overview-of-forms-authentication-cs.md) konusunda daha sonra oluşturduğumuz bir varsayılan kullanıcı arabirimini çok benzer şekilde işler.</span><span class="sxs-lookup"><span data-stu-id="8843a-169">The [Login Web control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) renders a default user interface very similar to the one we created back in the <a id="SKM5"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-cs.md) tutorial.</span></span> <span data-ttu-id="8843a-170">Oturum açma denetiminin kullanılması, ziyaretçi kimlik bilgilerini toplamak için arabirim oluşturmak üzere sahip olma zorunluluğunu kaydeder.</span><span class="sxs-lookup"><span data-stu-id="8843a-170">Using the Login control saves us the work of having to create the interface to collect the visitor�s credentials.</span></span> <span data-ttu-id="8843a-171">Üstelik, oturum açma denetimi kullanıcı oturumunu otomatik olarak imzalar (gönderilen kimlik bilgilerinin geçerli olduğu varsayıldığında) ve bu sayede herhangi bir kod yazmak zorunda kalmaktan tasarruf edin.</span><span class="sxs-lookup"><span data-stu-id="8843a-171">Moreover, the Login control automatically signs in the user (assuming the submitted credentials are valid), thereby saving us from having to write any code.</span></span>

<span data-ttu-id="8843a-172">El ile oluşturulan arabirimi ve kodu bir oturum açma denetimiyle değiştirerek `Login.aspx`güncelleştirelim.</span><span class="sxs-lookup"><span data-stu-id="8843a-172">Let's update `Login.aspx`, replacing the manually created interface and code with a Login control.</span></span> <span data-ttu-id="8843a-173">`Login.aspx`içindeki mevcut biçimlendirmeyi ve kodu kaldırarak başlayın.</span><span class="sxs-lookup"><span data-stu-id="8843a-173">Start by removing the existing markup and code in `Login.aspx`.</span></span> <span data-ttu-id="8843a-174">Doğru bir şekilde silebilirsiniz ya da yalnızca bir açıklama olarak görebilirsiniz. Bildirim temelli işaretlemeyi açıklama eklemek için `<%--` ve `--%>` sınırlayıcılarıyla çevreleyin.</span><span class="sxs-lookup"><span data-stu-id="8843a-174">You may delete it outright, or simply comment it out. To comment out declarative markup, surround it with the `<%--` and `--%>` delimiters.</span></span> <span data-ttu-id="8843a-175">Bu sınırlayıcıları el ile girebilir veya şekil 2 ' de gösterildiği gibi, açıklama eklemek için metni seçip araç çubuğunda Seçili çizgiler simgesine tıklayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8843a-175">You can enter these delimiters manually, or, as Figure 2 shows, you may select the text to comment out and then click the Comment out the selected lines icon in the Toolbar.</span></span> <span data-ttu-id="8843a-176">Benzer şekilde, arka plan kod sınıfında seçili kodu açıklama olarak eklemek için seçili çizgiler simgesini açıklama olarak kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8843a-176">Similarly, you can use the Comment out the selected lines icon to comment out the selected code in the code-behind class.</span></span>

<span data-ttu-id="8843a-177">[Login. aspx dosyasındaki mevcut bildirime dayalı biçimlendirmeyi ve kaynak kodunu açıklama ![](validating-user-credentials-against-the-membership-user-store-cs/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="8843a-177">[![Comment Out the Existing Declarative Markup and Source Code in Login.aspx](validating-user-credentials-against-the-membership-user-store-cs/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image4.png)</span></span>

<span data-ttu-id="8843a-178">**Şekil 2**: `Login.aspx` ' de var olan bildirime dayalı biçimlendirmeyi ve kaynak kodu açıklama ([tam boyutlu görüntüyü görüntülemek için tıklayın](validating-user-credentials-against-the-membership-user-store-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="8843a-178">**Figure 2**: Comment Out the Existing Declarative Markup and Source Code in `Login.aspx` ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image6.png))</span></span>

> [!NOTE]
> <span data-ttu-id="8843a-179">Visual Studio 2005 ' de bildirim temelli biçimlendirme görüntülenirken Seçili satırlar simgesinin açıklaması kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="8843a-179">The Comment out the selected lines icon is not available when viewing the declarative markup in Visual Studio 2005.</span></span> <span data-ttu-id="8843a-180">Visual Studio 2008 kullanmıyorsanız `<%--` ve `--%>` sınırlayıcılarını el ile eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="8843a-180">If you are not using Visual Studio 2008 you will need to manually add the `<%--` and `--%>` delimiters.</span></span>

<span data-ttu-id="8843a-181">Sonra, bir oturum açma denetimini sayfada bulunan araç kutusundan sürükleyin ve `ID` özelliğini `myLogin`olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="8843a-181">Next, drag a Login control from the Toolbox on to the page and set its `ID` property to `myLogin`.</span></span> <span data-ttu-id="8843a-182">Bu noktada, ekranınızda şekil 3 ' e benzer görünmelidir.</span><span class="sxs-lookup"><span data-stu-id="8843a-182">At this point your screen should look similar to Figure 3.</span></span> <span data-ttu-id="8843a-183">Oturum açma denetiminin varsayılan arabiriminin Kullanıcı adı ve parola, bir sonraki zaman beni anımsa onay kutusu ve oturum açma düğmesi için TextBox denetimleri içerdiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="8843a-183">Note that the Login control's default interface includes TextBox controls for the username and password, a Remember me next time CheckBox, and a Log In Button.</span></span> <span data-ttu-id="8843a-184">Ayrıca iki metin kutuları için `RequiredFieldValidator` denetimleri vardır.</span><span class="sxs-lookup"><span data-stu-id="8843a-184">There are also `RequiredFieldValidator` controls for the two TextBoxes.</span></span>

<span data-ttu-id="8843a-185">[![sayfaya bir oturum açma denetimi ekleyin](validating-user-credentials-against-the-membership-user-store-cs/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="8843a-185">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-cs/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image7.png)</span></span>

<span data-ttu-id="8843a-186">**Şekil 3**: sayfaya bir oturum açma denetimi ekleme ([tam boyutlu görüntüyü görüntülemek için tıklayın](validating-user-credentials-against-the-membership-user-store-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="8843a-186">**Figure 3**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image9.png))</span></span>

<span data-ttu-id="8843a-187">Tebrikler!</span><span class="sxs-lookup"><span data-stu-id="8843a-187">And we're done!</span></span> <span data-ttu-id="8843a-188">Oturum açma denetiminin oturum açma düğmesine tıklandığında, bir geri gönderme gerçekleşir ve oturum açma denetimi, girilen Kullanıcı adı ve parolayı geçirerek `Membership.ValidateUser` yöntemini çağırır.</span><span class="sxs-lookup"><span data-stu-id="8843a-188">When the Login control's Log In button is clicked, a postback will occur and the Login control will call the `Membership.ValidateUser` method, passing in the entered username and password.</span></span> <span data-ttu-id="8843a-189">Kimlik bilgileri geçersizse, oturum açma denetimi şöyle bir ileti görüntüler.</span><span class="sxs-lookup"><span data-stu-id="8843a-189">If the credentials are invalid, the Login control displays a message stating such.</span></span> <span data-ttu-id="8843a-190">Ancak, kimlik bilgileri geçerliyse, oturum açma denetimi Forms kimlik doğrulama bileti oluşturur ve kullanıcıyı uygun sayfaya yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="8843a-190">If, however, the credentials are valid, then the Login control creates the forms authentication ticket and redirects the user to the appropriate page.</span></span>

<span data-ttu-id="8843a-191">Oturum açma denetimi, kullanıcıyı başarılı bir oturum açma üzerine yönlendiren uygun sayfayı belirlemekte kullanılacak dört faktörü kullanır:</span><span class="sxs-lookup"><span data-stu-id="8843a-191">The Login control uses four factors to determine the appropriate page to redirect the user to upon a successful login:</span></span>

- <span data-ttu-id="8843a-192">Oturum açma denetiminin, form kimlik doğrulaması yapılandırmasındaki `loginUrl` ayarı tarafından tanımlanan oturum açma sayfasında olup olmadığı. Bu ayarın varsayılan değeri `Login.aspx`</span><span class="sxs-lookup"><span data-stu-id="8843a-192">Whether the Login control is on the login page as defined by `loginUrl` setting in the forms authentication configuration; this setting's default value is `Login.aspx`</span></span>
- <span data-ttu-id="8843a-193">`ReturnUrl` QueryString parametresinin varlığı</span><span class="sxs-lookup"><span data-stu-id="8843a-193">The presence of a `ReturnUrl` querystring parameter</span></span>
- <span data-ttu-id="8843a-194">Oturum açma denetiminin [`DestinationUrl` özelliğinin](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx) değeri</span><span class="sxs-lookup"><span data-stu-id="8843a-194">The value of the Login control's [`DestinationUrl` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx)</span></span>
- <span data-ttu-id="8843a-195">Forms kimlik doğrulaması yapılandırma ayarlarında belirtilen `defaultUrl` değeri; Bu ayarın varsayılan değeri `Default.aspx`</span><span class="sxs-lookup"><span data-stu-id="8843a-195">The `defaultUrl` value specified in the forms authentication configuration settings; this setting's default value is `Default.aspx`</span></span>

<span data-ttu-id="8843a-196">Şekil 4 ' te, oturum açma denetiminin ilgili sayfa kararına ulaşmak için bu dört parametreyi nasıl kullandığı gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="8843a-196">Figure 4 depicts the how the Login control uses these four parameters to arrive at its appropriate page decision.</span></span>

<span data-ttu-id="8843a-197">[![sayfaya bir oturum açma denetimi ekleyin](validating-user-credentials-against-the-membership-user-store-cs/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="8843a-197">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-cs/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image10.png)</span></span>

<span data-ttu-id="8843a-198">**Şekil 4**: sayfaya bir oturum açma denetimi ekleme ([tam boyutlu görüntüyü görüntülemek için tıklayın](validating-user-credentials-against-the-membership-user-store-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="8843a-198">**Figure 4**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image12.png))</span></span>

<span data-ttu-id="8843a-199">Bir tarayıcı aracılığıyla siteyi ziyaret ederek ve üyelik çerçevesinde var olan bir kullanıcı olarak oturum açarak, oturum açma denetimini test etmek için bir dakikanızı ayırın.</span><span class="sxs-lookup"><span data-stu-id="8843a-199">Take a moment to test out the Login control by visiting the site through a browser and logging in as an existing user in the Membership framework.</span></span>

<span data-ttu-id="8843a-200">Oturum açma denetiminin işlenmiş arabirimi yüksek oranda yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-200">The Login control's rendered interface is highly configurable.</span></span> <span data-ttu-id="8843a-201">Görünümünü etkileyen bazı özellikler vardır; Artık, oturum açma denetimi, Kullanıcı arabirimi öğelerinin düzeni üzerinde kesin denetim için bir şablona dönüştürülebilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-201">There are a number of properties that influence its appearance; what's more, the Login control can be converted into a template for precise control over the layout the user interface elements.</span></span> <span data-ttu-id="8843a-202">Bu adımın geri kalanında görünümün ve düzenin nasıl özelleştirileceği incelenir.</span><span class="sxs-lookup"><span data-stu-id="8843a-202">The remainder of this step examines how to customize the appearance and layout.</span></span>

### <a name="customizing-the-login-controls-appearance"></a><span data-ttu-id="8843a-203">Oturum açma denetiminin görünümünü özelleştirme</span><span class="sxs-lookup"><span data-stu-id="8843a-203">Customizing the Login Control's Appearance</span></span>

<span data-ttu-id="8843a-204">Oturum açma denetiminin varsayılan özellik ayarları, Kullanıcı arabirimini bir başlık (oturum açma), TextBox ve etiket denetimleri Kullanıcı adı ve parola girişleri, bir sonraki zaman anımsa onay kutusu ve oturum açma düğmesi ile birlikte işler.</span><span class="sxs-lookup"><span data-stu-id="8843a-204">The Login control's default property settings render a user interface with a title ( Log In ), TextBox and Label controls for the username and password inputs, a Remember me next time CheckBox, and a Log In button.</span></span> <span data-ttu-id="8843a-205">Bu öğelerin görünümleri, oturum açma denetiminin çok sayıda özelliği aracılığıyla yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-205">The appearances of these elements are all configurable through the Login control's numerous properties.</span></span> <span data-ttu-id="8843a-206">Ayrıca, Yeni Kullanıcı hesabı oluşturmak için bir sayfanın bağlantısı gibi ek kullanıcı arabirimi öğeleri, bir özellik veya ikisi ayarlanarak eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-206">Furthermore, additional user interface elements - such as a link to a page to create a new user account - can be added by setting a property or two.</span></span>

<span data-ttu-id="8843a-207">Oturum açma denetimizin görünümünü en az bir dakika sonra harcayalım.</span><span class="sxs-lookup"><span data-stu-id="8843a-207">Let's spend a few moments to gussy up the appearance of our Login control.</span></span> <span data-ttu-id="8843a-208">`Login.aspx` sayfanın en üstünde, oturum açma bilgisi olan bir metin zaten olduğundan, oturum açma denetiminin başlığı gereksiz.</span><span class="sxs-lookup"><span data-stu-id="8843a-208">Since the `Login.aspx` page already has text at the top of the page that says Login, the Login control's title is superfluous.</span></span> <span data-ttu-id="8843a-209">Bu nedenle, oturum açma denetiminin başlığını kaldırmak için [`TitleText` Özellik](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) değerini temizleyin.</span><span class="sxs-lookup"><span data-stu-id="8843a-209">Therefore, clear out the [`TitleText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) value in order to remove the Login control's title.</span></span>

<span data-ttu-id="8843a-210">Kullanıcı adı: ve parola: iki metin kutusu denetiminin solundaki Etiketler sırasıyla [`UserNameLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) ve [`PasswordLabelText` özellikleri](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx)aracılığıyla özelleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-210">The User Name: and Password: Labels to the left of the two TextBox controls can be customized through the [`UserNameLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) and [`PasswordLabelText` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx), respectively.</span></span> <span data-ttu-id="8843a-211">Kullanıcı adını değiştirelim: etiketle Kullanıcı adı:.</span><span class="sxs-lookup"><span data-stu-id="8843a-211">Let's change the User Name: Label to read Username:.</span></span> <span data-ttu-id="8843a-212">Etiket ve metin kutusu stilleri sırasıyla [`LabelStyle`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) ve [`TextBoxStyle` özellikleri](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx)aracılığıyla yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-212">The Label and TextBox styles are configurable through the [`LabelStyle`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) and [`TextBoxStyle` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx), respectively.</span></span>

<span data-ttu-id="8843a-213">Beni anımsa bir sonraki zaman onay kutusunun Text özelliği, oturum açma denetiminin [`RememberMeText property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx)ve varsayılan olarak denetlenen durumu [`RememberMeSet property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx) aracılığıyla yapılandırılabilir (varsayılan olarak false değerine ayarlanır).</span><span class="sxs-lookup"><span data-stu-id="8843a-213">The Remember me next time CheckBox's Text property can be set through the Login control's [`RememberMeText property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx), and its default checked state is configurable through the [`RememberMeSet property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx) (which defaults to False).</span></span> <span data-ttu-id="8843a-214">Devam edin ve şimdi beni anımsa onay kutusunun varsayılan olarak denetleneceğini sağlamak için `RememberMeSet` özelliğini true olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="8843a-214">Go ahead and set the `RememberMeSet` property to True so that the Remember me next time CheckBox will be checked by default.</span></span>

<span data-ttu-id="8843a-215">Oturum açma denetimi, Kullanıcı arabirimi denetimlerinin yerleşimini ayarlamak için iki özellik sunar.</span><span class="sxs-lookup"><span data-stu-id="8843a-215">The Login control offers two properties for adjusting the layout of its user interface controls.</span></span> <span data-ttu-id="8843a-216">[`TextLayout property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) , Kullanıcı adı: ve Password: etiketlerin Ilgili metin kutularının solunda (varsayılan) mi yoksa üzerinde mi göründüğünü gösterir.</span><span class="sxs-lookup"><span data-stu-id="8843a-216">The [`TextLayout property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) indicates whether the Username: and Password: Labels appear to the left of their corresponding TextBoxes (the default), or above them.</span></span> <span data-ttu-id="8843a-217">[`Orientation property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) , Kullanıcı adı ve parola girişlerinin dikey mi (diğeri üzerinde) yoksa yatay mi olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="8843a-217">The [`Orientation property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) indicates whether the username and password inputs are situated vertically (one above the other) or horizontally.</span></span> <span data-ttu-id="8843a-218">Bu iki özelliği varsayılan ayarlarına ayarlıyorum, ancak sonuçta ortaya çıkan etkiyi görmek için bu iki özelliği varsayılan olmayan değerlerine ayarlamayı deneyin.</span><span class="sxs-lookup"><span data-stu-id="8843a-218">I am going to leave these two properties set to their defaults, but I encourage you to try setting these two properties to their non-default values to see the resulting effect.</span></span>

> [!NOTE]
> <span data-ttu-id="8843a-219">Sonraki bölümde, oturum açma denetiminin yerleşimini yapılandırırken, düzen denetiminin Kullanıcı arabirimi öğelerinin kesin yerleşimini tanımlamak için şablonları kullanma bölümüne bakacağız.</span><span class="sxs-lookup"><span data-stu-id="8843a-219">In the next section, Configuring the Login Control's Layout, we will look at using templates to define the precise layout of the Layout control's user interface elements.</span></span>

<span data-ttu-id="8843a-220">[`CreateUserText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) ve [`CreateUserUrl` özelliklerini](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) henüz kaydedilmemiş olarak ayarlayıp, oturum açma denetiminin özellik ayarlarını kaydırın.</span><span class="sxs-lookup"><span data-stu-id="8843a-220">Wrap up the Login control's property settings by setting the [`CreateUserText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) and [`CreateUserUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) to Not registered yet?</span></span> <span data-ttu-id="8843a-221">Hesap oluşturun!</span><span class="sxs-lookup"><span data-stu-id="8843a-221">Create an account!</span></span> <span data-ttu-id="8843a-222">ve sırasıyla `~/Membership/CreatingUserAccounts.aspx`.</span><span class="sxs-lookup"><span data-stu-id="8843a-222">and `~/Membership/CreatingUserAccounts.aspx`, respectively.</span></span> <span data-ttu-id="8843a-223">Bu, <a id="SKM6"> </a> [önceki öğreticide](creating-user-accounts-cs.md)oluşturduğumuz sayfaya işaret eden, oturum açma denetiminin arabirimine bir köprü ekler.</span><span class="sxs-lookup"><span data-stu-id="8843a-223">This adds a hyperlink to the Login control's interface pointing to the page we created in the <a id="SKM6"></a>[preceding tutorial](creating-user-accounts-cs.md).</span></span> <span data-ttu-id="8843a-224">Oturum açma denetiminin [`HelpPageText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) ve [`HelpPageUrl` özellikleri](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) ve [`PasswordRecoveryText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) ve [`PasswordRecoveryUrl` özellikleri](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) aynı şekilde çalışır, bir yardım sayfasına bağlantıları işleme ve parola kurtarma sayfası.</span><span class="sxs-lookup"><span data-stu-id="8843a-224">The Login control's [`HelpPageText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) and [`HelpPageUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) and [`PasswordRecoveryText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) and [`PasswordRecoveryUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) work in the same manner, rendering links to a help page and a password recovery page.</span></span>

<span data-ttu-id="8843a-225">Bu özellik değiştirildikten sonra, oturum açma denetiminizin bildirim temelli biçimlendirme ve görünüşü Şekil 5 ' te gösterilenle benzer şekilde görünmelidir.</span><span class="sxs-lookup"><span data-stu-id="8843a-225">After making these property changes, your Login control's declarative markup and appearance should look similar to that shown in Figure 5.</span></span>

<span data-ttu-id="8843a-226">[Oturum açma denetiminin özelliklerinin değerlerini ![görünümü dikte](validating-user-credentials-against-the-membership-user-store-cs/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="8843a-226">[![The Login Control's Properties' Values Dictate Its Appearance](validating-user-credentials-against-the-membership-user-store-cs/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image13.png)</span></span>

<span data-ttu-id="8843a-227">**Şekil 5**: oturum açma denetiminin özelliklerinin değerleri görünümü dikte ([tam boyutlu görüntüyü görüntülemek için tıklayın](validating-user-credentials-against-the-membership-user-store-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="8843a-227">**Figure 5**: The Login Control's Properties' Values Dictate Its Appearance  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image15.png))</span></span>

### <a name="configuring-the-login-controls-layout"></a><span data-ttu-id="8843a-228">Oturum açma denetiminin yerleşimini yapılandırma</span><span class="sxs-lookup"><span data-stu-id="8843a-228">Configuring the Login Control's Layout</span></span>

<span data-ttu-id="8843a-229">Oturum açma Web denetiminin varsayılan kullanıcı arabirimi, bir HTML `<table>`arabirimini yerleştirir.</span><span class="sxs-lookup"><span data-stu-id="8843a-229">The Login Web control's default user interface lays out the interface in an HTML `<table>`.</span></span> <span data-ttu-id="8843a-230">Ancak işlenmiş çıktı üzerinde daha ayrıntılı denetime ihtiyacım varsa ne olacak?</span><span class="sxs-lookup"><span data-stu-id="8843a-230">But what if we need finer control over the rendered output?</span></span> <span data-ttu-id="8843a-231">Belki de `<table>` bir dizi `<div>` etiketi ile değiştirmek istiyoruz.</span><span class="sxs-lookup"><span data-stu-id="8843a-231">Maybe we want to replace the `<table>` with a series of `<div>` tags.</span></span> <span data-ttu-id="8843a-232">Veya uygulamamız kimlik doğrulaması için ek kimlik bilgileri gerektiriyorsa ne olacak?</span><span class="sxs-lookup"><span data-stu-id="8843a-232">Or what if our application requires additional credentials for authentication?</span></span> <span data-ttu-id="8843a-233">Örneğin, çok sayıda Finans Web sitesi, kullanıcıların yalnızca bir Kullanıcı adı ve parola sağlamalarına, ayrıca bir kişisel kimlik numarası (PIN) veya diğer tanımlama bilgilerine sahip olmasını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="8843a-233">Many financial websites, for instance, require users to supply not only a username and password, but also a Personal Identification Number (PIN), or other identifying information.</span></span> <span data-ttu-id="8843a-234">Nedenler ne olursa olsun, oturum açma denetimini bir şablona dönüştürmek mümkündür ve bu, arabirimin bildirim temelli işaretlemesini açıkça tanımlayabiliriz.</span><span class="sxs-lookup"><span data-stu-id="8843a-234">Whatever the reasons may be, it is possible to convert the Login control into a template, from which we can explicitly define the interface's declarative markup.</span></span>

<span data-ttu-id="8843a-235">Oturum açma denetimini ek kimlik bilgileri toplayacak şekilde güncelleştirmek için iki şey yapmanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="8843a-235">We need to do two things in order to update the Login control to collect additional credentials:</span></span>

1. <span data-ttu-id="8843a-236">Ek kimlik bilgilerini toplamak için, oturum açma denetiminin arabirimini Web denetimleri içerecek şekilde güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="8843a-236">Update the Login control's interface to include Web control(s) to collect the additional credentials.</span></span>
2. <span data-ttu-id="8843a-237">Kullanıcının Kullanıcı adı ve parolası geçerliyse ve bunların ek kimlik bilgileri geçerli olduğunda kimlik doğrulaması yapmak için oturum açma denetiminin iç kimlik doğrulama mantığını geçersiz kılın.</span><span class="sxs-lookup"><span data-stu-id="8843a-237">Override the Login control's internal authentication logic so that a user is only authenticated if their username and password is valid and their additional credentials are valid, too.</span></span>

<span data-ttu-id="8843a-238">İlk görevi gerçekleştirmek için, oturum açma denetimini bir şablona dönüştürmemiz ve gerekli Web denetimlerini eklemesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="8843a-238">To accomplish the first task, we need to convert the Login control into a template and add the necessary Web controls.</span></span> <span data-ttu-id="8843a-239">İkinci görevde olduğu gibi, denetimin [`Authenticate` olayı](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx)için bir olay işleyicisi oluşturularak, oturum açma denetiminin kimlik doğrulama mantığının yerini alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8843a-239">As for the second task, the Login control's authentication logic can be superseded by creating an event handler for the control's [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span>

<span data-ttu-id="8843a-240">Oturum açma denetimini, Kullanıcı adı, parola ve e-posta adresi için sorar ve yalnızca belirtilen e-posta adresi dosyadaki e-posta adresiyle eşleşiyorsa kullanıcının kimliğini doğrular.</span><span class="sxs-lookup"><span data-stu-id="8843a-240">Let's update the Login control so that it prompts users for their username, password, and email address and only authenticates the user if the email address supplied matches their email address on file.</span></span> <span data-ttu-id="8843a-241">Önce, oturum açma denetiminin arabirimini bir şablona dönüştürmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="8843a-241">We first need to convert the Login control's interface to a template.</span></span> <span data-ttu-id="8843a-242">Oturum açma denetiminin akıllı etiketinden şablona Dönüştür seçeneğini belirleyin.</span><span class="sxs-lookup"><span data-stu-id="8843a-242">From the Login control's Smart Tag, choose the Convert to template option.</span></span>

<span data-ttu-id="8843a-243">[![oturum açma denetimini şablona dönüştürmek](validating-user-credentials-against-the-membership-user-store-cs/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="8843a-243">[![Convert the Login Control to a Template](validating-user-credentials-against-the-membership-user-store-cs/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image16.png)</span></span>

<span data-ttu-id="8843a-244">**Şekil 6**: oturum açma denetimini bir şablona Dönüştür ([tam boyutlu görüntüyü görüntülemek için tıklayın](validating-user-credentials-against-the-membership-user-store-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="8843a-244">**Figure 6**: Convert the Login Control to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image18.png))</span></span>

> [!NOTE]
> <span data-ttu-id="8843a-245">Oturum açma denetimini şablon öncesi sürümüne geri döndürmek için denetimin akıllı etiketindeki Sıfırla bağlantısına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="8843a-245">To revert the Login control to its pre-template version, click the Reset link from the control's Smart Tag.</span></span>

<span data-ttu-id="8843a-246">Oturum açma denetimini bir şablona dönüştürmek, denetimin bildirim temelli işaretlemesini HTML öğeleriyle ve Kullanıcı arabirimini tanımlayan Web denetimleriyle bir `LayoutTemplate` ekler.</span><span class="sxs-lookup"><span data-stu-id="8843a-246">Converting the Login control to a template adds a `LayoutTemplate` to the control's declarative markup with HTML elements and Web controls defining the user interface.</span></span> <span data-ttu-id="8843a-247">Şekil 7 ' de gösterildiği gibi, denetimi bir şablona dönüştürmek, bir şablon kullanılırken bu özellik değerleri dikkate alındıklarından, Özellikler penceresi `TitleText`, `CreateUserUrl`vb. gibi birçok özelliği kaldırır.</span><span class="sxs-lookup"><span data-stu-id="8843a-247">As Figure 7 shows, converting the control to a template removes a number of properties from the Properties window, such as `TitleText`, `CreateUserUrl`, and so forth, since these property values are ignored when using a template.</span></span>

<span data-ttu-id="8843a-248">[![, oturum açma denetimi bir şablona dönüştürüldüğünde daha az özellik kullanılabilir](validating-user-credentials-against-the-membership-user-store-cs/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="8843a-248">[![Fewer Properties are Available When the Login Control is Converted to a Template](validating-user-credentials-against-the-membership-user-store-cs/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image19.png)</span></span>

<span data-ttu-id="8843a-249">**Şekil 7**: oturum açma denetimi bir şablona dönüştürüldüğünde daha az özellik kullanılabilir ([tam boyutlu görüntüyü görüntülemek için tıklatın](validating-user-credentials-against-the-membership-user-store-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="8843a-249">**Figure 7**: Fewer Properties are Available When the Login Control is Converted to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image21.png))</span></span>

<span data-ttu-id="8843a-250">`LayoutTemplate` HTML biçimlendirmesi gerektiği şekilde değiştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-250">The HTML markup in the `LayoutTemplate` may be modified as needed.</span></span> <span data-ttu-id="8843a-251">Benzer şekilde, şablona yeni Web denetimleri eklemeyi de ücretsiz olarak hissetmekten çekinmeyin.</span><span class="sxs-lookup"><span data-stu-id="8843a-251">Likewise, feel free to add any new Web controls to the template.</span></span> <span data-ttu-id="8843a-252">Ancak, oturum açma denetiminin çekirdek Web denetimlerinin şablonda kalması ve atanan `ID` değerlerinin tutulması önemlidir.</span><span class="sxs-lookup"><span data-stu-id="8843a-252">However, it is important that Login control's core Web controls remain in the template and keep their assigned `ID` values.</span></span> <span data-ttu-id="8843a-253">Özellikle `UserName` veya `Password` metin kutularını, `RememberMe` onay kutusunu, `LoginButton` düğmesini, `FailureText` etiketini veya `RequiredFieldValidator` denetimlerini kaldırmayın veya yeniden adlandırmayın.</span><span class="sxs-lookup"><span data-stu-id="8843a-253">In particular, do not remove or rename the `UserName` or `Password` TextBoxes, the `RememberMe` CheckBox, the `LoginButton` Button, the `FailureText` Label, or the `RequiredFieldValidator` controls.</span></span>

<span data-ttu-id="8843a-254">Ziyaretçi e-posta adresini toplamak için, şablona bir metin kutusu eklememiz gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="8843a-254">To collect the visitor's email address, we need to add a TextBox to the template.</span></span> <span data-ttu-id="8843a-255">`Password` metin kutusunu içeren tablo satırı (`<tr>`) ve bir sonraki beni anımsa onay kutusunu tutan tablo satırı arasına aşağıdaki bildirim temelli biçimlendirmeyi ekleyin:</span><span class="sxs-lookup"><span data-stu-id="8843a-255">Add the following declarative markup between the table row (`<tr>`) that contains the `Password` TextBox and the table row that holds the Remember me next time CheckBox:</span></span>

[!code-aspx[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample2.aspx)]

<span data-ttu-id="8843a-256">`Email` metin kutusunu ekledikten sonra, sayfayı bir tarayıcıdan ziyaret edin.</span><span class="sxs-lookup"><span data-stu-id="8843a-256">After adding the `Email` TextBox, visit the page through a browser.</span></span> <span data-ttu-id="8843a-257">Şekil 8 ' de gösterildiği gibi, oturum açma denetiminin Kullanıcı arabirimi artık üçüncü bir TextBox içerir.</span><span class="sxs-lookup"><span data-stu-id="8843a-257">As Figure 8 shows, the Login control's user interface now includes a third textbox.</span></span>

<span data-ttu-id="8843a-258">[![oturum açma denetimi artık kullanıcının e-posta adresi için bir metin kutusu Içeriyor](validating-user-credentials-against-the-membership-user-store-cs/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="8843a-258">[![The Login Control Now Includes a Textbox for the User's Email Address](validating-user-credentials-against-the-membership-user-store-cs/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image22.png)</span></span>

<span data-ttu-id="8843a-259">**Şekil 8**: oturum açma denetimi artık kullanıcının e-posta adresi Için bir metin kutusu içerir ([tam boyutlu görüntüyü görüntülemek için tıklayın](validating-user-credentials-against-the-membership-user-store-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="8843a-259">**Figure 8**: The Login Control Now Includes a Textbox for the User's Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image24.png))</span></span>

<span data-ttu-id="8843a-260">Bu noktada, oturum açma denetimi, sağlanan kimlik bilgilerini doğrulamak için `Membership.ValidateUser` yöntemini kullanmaya devam eder.</span><span class="sxs-lookup"><span data-stu-id="8843a-260">At this point, the Login control is still using the `Membership.ValidateUser` method to validate the supplied credentials.</span></span> <span data-ttu-id="8843a-261">Karşılık gelen `Email` metin kutusuna girilen değerin, kullanıcının oturum açabilip oturum açıp etmeyeceğini hiçbir şekilde yok.</span><span class="sxs-lookup"><span data-stu-id="8843a-261">Correspondingly, the value entered into the `Email` TextBox has no bearing on whether the user can log in.</span></span> <span data-ttu-id="8843a-262">3\. adımda, kimlik bilgilerinin yalnızca Kullanıcı adı ve parola geçerli olduğunda ve sağlanan e-posta adresi dosyadaki e-posta adresiyle eşleşiyorsa, kimlik bilgilerinin geçerli kabul edilmesi için oturum açma denetiminin kimlik doğrulama mantığını geçersiz kılma bölümüne bakacağız.</span><span class="sxs-lookup"><span data-stu-id="8843a-262">In Step 3 we will look at how to override the Login control's authentication logic so that the credentials are only considered valid if the username and password are valid and the supplied email address matches up with the email address on file.</span></span>

## <a name="step-3-modifying-the-login-controls-authentication-logic"></a><span data-ttu-id="8843a-263">3\. Adım: oturum açma denetiminin kimlik doğrulama mantığını değiştirme</span><span class="sxs-lookup"><span data-stu-id="8843a-263">Step 3: Modifying the Login Control's Authentication Logic</span></span>

<span data-ttu-id="8843a-264">Bir ziyaretçi kimlik bilgilerini ne zaman sağlar ve oturum aç düğmesine tıkladığında, bir geri gönderme ve oturum açma denetimi kimlik doğrulama iş akışı üzerinden ilerler.</span><span class="sxs-lookup"><span data-stu-id="8843a-264">When a visitor supplies her credentials and clicks the Log In button, a postback ensues and the Login control progresses through its authentication workflow.</span></span> <span data-ttu-id="8843a-265">İş akışı, [`LoggingIn` olayı](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx)yükselterek başlar.</span><span class="sxs-lookup"><span data-stu-id="8843a-265">The workflow starts by raising the [`LoggingIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx).</span></span> <span data-ttu-id="8843a-266">Bu olayla ilişkili herhangi bir olay işleyicisi, `e.Cancel` özelliğini `true`ayarlayarak, oturum açma işlemini iptal edebilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-266">Any event handlers associated with this event may cancel the log in operation by setting the `e.Cancel` property to `true`.</span></span>

<span data-ttu-id="8843a-267">Oturum açma işlemi iptal edilmediğinden, iş akışı [`Authenticate` olayı](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx)yükselterek ilerler.</span><span class="sxs-lookup"><span data-stu-id="8843a-267">If the log in operation is not cancelled, the workflow progresses by raising the [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span> <span data-ttu-id="8843a-268">`Authenticate` olayı için bir olay işleyicisi varsa, sağlanan kimlik bilgilerinin geçerli olup olmadığını belirlemekten sorumludur.</span><span class="sxs-lookup"><span data-stu-id="8843a-268">If there is an event handler for the `Authenticate` event, then it is responsible for determining whether the supplied credentials are valid or not.</span></span> <span data-ttu-id="8843a-269">Hiçbir olay işleyicisi belirtilmemişse, oturum açma denetimi, kimlik bilgilerinin geçerliliğini belirlemede `Membership.ValidateUser` yöntemini kullanır.</span><span class="sxs-lookup"><span data-stu-id="8843a-269">If no event handler is specified, the Login control uses the `Membership.ValidateUser` method to determine the validity of the credentials.</span></span>

<span data-ttu-id="8843a-270">Sağlanan kimlik bilgileri geçerliyse, Forms kimlik doğrulama bileti oluşturulur, [`LoggedIn` olayı](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) tetiklenir ve Kullanıcı uygun sayfaya yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-270">If the supplied credentials are valid, then the forms authentication ticket is created, the [`LoggedIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) is raised, and the user is redirected to the appropriate page.</span></span> <span data-ttu-id="8843a-271">Ancak, kimlik bilgileri geçersiz kabul edildiği takdirde, [`LoginError` olayı](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) tetiklenir ve kullanıcıya kimlik bilgilerinin geçersiz olduğunu bildiren bir ileti görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="8843a-271">If, however, the credentials are deemed invalid, then the [`LoginError` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) is raised and a message is displayed informing the user that their credentials were invalid.</span></span> <span data-ttu-id="8843a-272">Varsayılan olarak, hata durumunda oturum açma denetimi, `FailureText` etiket denetiminin Text özelliğini bir hata iletisine ayarlar (oturum açma denemeniz başarılı olmadı.</span><span class="sxs-lookup"><span data-stu-id="8843a-272">By default, on failure the Login control simply sets its `FailureText` Label control's Text property to a failure message ( Your login attempt was not successful.</span></span> <span data-ttu-id="8843a-273">Lütfen yeniden deneyin).</span><span class="sxs-lookup"><span data-stu-id="8843a-273">Please try again ).</span></span> <span data-ttu-id="8843a-274">Ancak, oturum açma denetiminin [`FailureAction` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) `RedirectToLoginPage`olarak ayarlanırsa, oturum açma denetimi, oturum açma sayfasına `loginfailure=1` QueryString parametresini (oturum açma denetiminin hata iletisini görüntülemesine neden olur) ekleyerek bir `Response.Redirect` yayınlar.</span><span class="sxs-lookup"><span data-stu-id="8843a-274">However, if the Login control's [`FailureAction` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) is set to `RedirectToLoginPage`, then the Login control issues a `Response.Redirect` to the login page appending the querystring parameter `loginfailure=1` (which causes the Login control to display the failure message).</span></span>

<span data-ttu-id="8843a-275">Şekil 9, kimlik doğrulama iş akışının Akış grafiğini sunar.</span><span class="sxs-lookup"><span data-stu-id="8843a-275">Figure 9 offers a flow chart of the authentication workflow.</span></span>

<span data-ttu-id="8843a-276">[Oturum açma denetiminin kimlik doğrulama Iş akışını ![](validating-user-credentials-against-the-membership-user-store-cs/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="8843a-276">[![The Login Control's Authentication Workflow](validating-user-credentials-against-the-membership-user-store-cs/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image25.png)</span></span>

<span data-ttu-id="8843a-277">**Şekil 9**: oturum açma denetiminin kimlik doğrulama iş akışı ([tam boyutlu görüntüyü görüntülemek için tıklayın](validating-user-credentials-against-the-membership-user-store-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="8843a-277">**Figure 9**: The Login Control's Authentication Workflow  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image27.png))</span></span>

> [!NOTE]
> <span data-ttu-id="8843a-278">`FailureAction``RedirectToLogin` sayfası seçeneğini ne zaman kullanacağınızı merak ediyorsanız, aşağıdaki senaryoyu göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="8843a-278">If you are wondering when you would use the `FailureAction`'s `RedirectToLogin` page option, consider the following scenario.</span></span> <span data-ttu-id="8843a-279">Şu anda `Site.master` ana sayfamızda, anonim bir kullanıcı tarafından ziyaret edildiğinde sol sütunda görüntülenen metin, Merhaba, yabanger metni var, ancak bu metni bir oturum açma denetimiyle değiştirmek istediğimizi düşünün.</span><span class="sxs-lookup"><span data-stu-id="8843a-279">Right now our `Site.master` master page currently has the text, Hello, stranger displayed in the left column when visited by an anonymous user, but imagine that we wanted to replace that text with a Login control.</span></span> <span data-ttu-id="8843a-280">Bu, anonim bir kullanıcının oturum açma sayfasını doğrudan ziyaret etmesini gerektirmek yerine sitedeki herhangi bir sayfadan oturum açmasına olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="8843a-280">This would allow an anonymous user to log in from any page on the site, instead of requiring them to visit the login page directly.</span></span> <span data-ttu-id="8843a-281">Ancak, bir Kullanıcı Ana sayfa tarafından işlenen oturum açma denetimi aracılığıyla oturum açmıyorsa, bu sayfada büyük olasılıkla ek yönergeler, bağlantılar ve yeni bir hesap oluşturmak veya kayıp bir parola almak için ana sayfaya eklenmemiş bağlantılar gibi diğer yardım bilgileri de dahil olmak üzere, bunları oturum açma sayfasına (`Login.aspx`) yönlendirmek mantıklı olabilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-281">However, if a user was unable to log in via the Login control rendered by the master page, it might make sense to redirect them to the login page (`Login.aspx`) because that page likely includes additional instructions, links, and other help - such as links to create a new account or retrieve a lost password - that were not added to the master page.</span></span>

### <a name="creating-theauthenticateevent-handler"></a><span data-ttu-id="8843a-282">`Authenticate`olay Işleyicisi oluşturma</span><span class="sxs-lookup"><span data-stu-id="8843a-282">Creating the`Authenticate`Event Handler</span></span>

<span data-ttu-id="8843a-283">Özel kimlik doğrulama mantığımızı eklemek için, oturum açma denetiminin `Authenticate` olayı için bir olay işleyicisi oluşturmamız gerekir.</span><span class="sxs-lookup"><span data-stu-id="8843a-283">In order to plug in our custom authentication logic, we need to create an event handler for the Login control's `Authenticate` event.</span></span> <span data-ttu-id="8843a-284">`Authenticate` olayı için bir olay işleyicisi oluşturmak aşağıdaki olay işleyicisi tanımını oluşturur:</span><span class="sxs-lookup"><span data-stu-id="8843a-284">Creating an event handler for the `Authenticate` event will generate the following event handler definition:</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample3.cs)]

<span data-ttu-id="8843a-285">Görebileceğiniz gibi, `Authenticate` olay işleyicisi ikinci giriş parametresi olarak [`AuthenticateEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) türünde bir nesne geçirdi.</span><span class="sxs-lookup"><span data-stu-id="8843a-285">As you can see, the `Authenticate` event handler is passed an object of type [`AuthenticateEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) as its second input parameter.</span></span> <span data-ttu-id="8843a-286">`AuthenticateEventArgs` sınıfı, sağlanan kimlik bilgilerinin geçerli olup olmadığını belirtmek için kullanılan `Authenticated` adlı bir Boole özelliği içerir.</span><span class="sxs-lookup"><span data-stu-id="8843a-286">The `AuthenticateEventArgs` class contains a Boolean property named `Authenticated` that is used to specify whether the supplied credentials are valid.</span></span> <span data-ttu-id="8843a-287">Bundan sonra, sağlanan kimlik bilgilerinin geçerli olup olmadığını ve `e.Authenticate` özelliğini uygun şekilde ayarlamayı belirleyen kodu buraya yazalım.</span><span class="sxs-lookup"><span data-stu-id="8843a-287">Our task, then, is to write code here that determines whether the supplied credentials are valid or not, and to set the `e.Authenticate` property accordingly.</span></span>

### <a name="determining-and-validating-the-supplied-credentials"></a><span data-ttu-id="8843a-288">Sağlanan kimlik bilgilerini belirleme ve doğrulama</span><span class="sxs-lookup"><span data-stu-id="8843a-288">Determining and Validating the Supplied Credentials</span></span>

<span data-ttu-id="8843a-289">Kullanıcı tarafından girilen Kullanıcı adı ve parola kimlik bilgilerini öğrenmek için oturum açma denetiminin [`UserName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) ve [`Password` özelliklerini](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) kullanın.</span><span class="sxs-lookup"><span data-stu-id="8843a-289">Use the Login control's [`UserName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) and [`Password` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) to determine the username and password credentials entered by the user.</span></span> <span data-ttu-id="8843a-290">Ek Web denetimlerine girilen değerleri (örneğin, önceki adımda eklediğimiz `Email` metin kutusu) belirleyebilmek için, `ID` özelliği *`controlID`* değerine eşit olan şablonda Web denetimine programlı bir başvuru almak için *`LoginControlID`* `.FindControl`(" *`controlID`* ") kullanın.</span><span class="sxs-lookup"><span data-stu-id="8843a-290">In order to determine the values entered into any additional Web controls (such as the `Email` TextBox we added in the previous step), use *`LoginControlID`*`.FindControl`("*`controlID`*") to obtain a programmatic reference to the Web control in the template whose `ID` property is equal to *`controlID`*.</span></span> <span data-ttu-id="8843a-291">Örneğin, `Email` metin kutusuna bir başvuru almak için aşağıdaki kodu kullanın:</span><span class="sxs-lookup"><span data-stu-id="8843a-291">For example, to get a reference to the `Email` TextBox, use the following code:</span></span>

`TextBox EmailTextBox = myLogin.FindControl("Email") as TextBox;`

<span data-ttu-id="8843a-292">Kullanıcının kimlik bilgilerini doğrulamak için iki şey olması gerekir:</span><span class="sxs-lookup"><span data-stu-id="8843a-292">In order to validate the user's credentials we need to do two things:</span></span>

1. <span data-ttu-id="8843a-293">Belirtilen kullanıcı adının ve parolanın geçerli olduğundan emin olun</span><span class="sxs-lookup"><span data-stu-id="8843a-293">Ensure that the provided username and password are valid</span></span>
2. <span data-ttu-id="8843a-294">Girilen e-posta adresinin, oturum açmaya çalışan kullanıcının dosyadaki e-posta adresiyle eşleştiğinden emin olun</span><span class="sxs-lookup"><span data-stu-id="8843a-294">Ensure that email address entered matches the email address on file for the user attempting to log in</span></span>

<span data-ttu-id="8843a-295">İlk denetimi gerçekleştirmek için, 1. adımda gördüğdiğimiz gibi `Membership.ValidateUser` yöntemi kullanabiliriz.</span><span class="sxs-lookup"><span data-stu-id="8843a-295">To accomplish the first check we can simply use the `Membership.ValidateUser` method like we saw in Step 1.</span></span> <span data-ttu-id="8843a-296">İkinci denetim için kullanıcının e-posta adresini belirlememiz gerekir, böylece metin kutusu denetimine girdiğiniz e-posta adresiyle karşılaştırılmaktadır.</span><span class="sxs-lookup"><span data-stu-id="8843a-296">For the second check, we need to determine the user's email address so that we can compare it to the email address they entered into the TextBox control.</span></span> <span data-ttu-id="8843a-297">Belirli bir kullanıcı hakkında bilgi almak için `Membership` sınıfının [`GetUser` metodunu](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx)kullanın.</span><span class="sxs-lookup"><span data-stu-id="8843a-297">To get information about a particular user, use the `Membership` class's [`GetUser` method](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx).</span></span>

<span data-ttu-id="8843a-298">`GetUser` yönteminde çok sayıda aşırı yükleme vardır.</span><span class="sxs-lookup"><span data-stu-id="8843a-298">The `GetUser` method has a number of overloads.</span></span> <span data-ttu-id="8843a-299">Herhangi bir parametreye geçirilmeden kullanılırsa, o anda oturum açmış olan kullanıcı hakkında bilgi döndürür.</span><span class="sxs-lookup"><span data-stu-id="8843a-299">If used without passing in any parameters, it returns information about the currently logged in user.</span></span> <span data-ttu-id="8843a-300">Belirli bir kullanıcı hakkında bilgi almak için, ' ın Kullanıcı adında geçen `GetUser` çağırın.</span><span class="sxs-lookup"><span data-stu-id="8843a-300">To get information about a particular user, call `GetUser` passing in their username.</span></span> <span data-ttu-id="8843a-301">Her iki durumda da, `GetUser` `UserName`, `Email`, `IsApproved`, `IsOnline`gibi özelliklere sahip [`MembershipUser` nesnesini](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx)döndürür.</span><span class="sxs-lookup"><span data-stu-id="8843a-301">Either way, `GetUser` returns a [`MembershipUser` object](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), which has properties like `UserName`, `Email`, `IsApproved`, `IsOnline`, and so on.</span></span>

<span data-ttu-id="8843a-302">Aşağıdaki kod bu iki denetimi uygular.</span><span class="sxs-lookup"><span data-stu-id="8843a-302">The following code implements these two checks.</span></span> <span data-ttu-id="8843a-303">Her iki geçiş ise `e.Authenticate` `true`olarak ayarlanır, aksi takdirde `false`atanır.</span><span class="sxs-lookup"><span data-stu-id="8843a-303">If both pass, then `e.Authenticate` is set to `true`, otherwise it is assigned `false`.</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample4.cs)]

<span data-ttu-id="8843a-304">Bu kod yerine, doğru Kullanıcı adını, parolayı ve e-posta adresini girerek geçerli bir kullanıcı olarak oturum açmaya çalışın.</span><span class="sxs-lookup"><span data-stu-id="8843a-304">With this code in place, attempt to log in as a valid user, entering the correct username, password, and email address.</span></span> <span data-ttu-id="8843a-305">Yeniden deneyin, ancak bu zaman, bu kez doğru bir e-posta adresi kullanır (bkz. Şekil 10).</span><span class="sxs-lookup"><span data-stu-id="8843a-305">Try it again, but this time purposefully use an incorrect email address (see Figure 10).</span></span> <span data-ttu-id="8843a-306">Son olarak, var olmayan bir Kullanıcı adı kullanarak bunu üçüncü kez deneyin.</span><span class="sxs-lookup"><span data-stu-id="8843a-306">Finally, try it a third time using a non-existent username.</span></span> <span data-ttu-id="8843a-307">İlk durumda, sitede başarıyla oturum açmanız gerekir, ancak son iki durumda oturum açma denetiminin geçersiz kimlik bilgileri iletisini görmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="8843a-307">In the first case you should be successfully logged on to the site, but in the last two cases you should see the Login control's invalid credentials message.</span></span>

<span data-ttu-id="8843a-308">[![Tito, yanlış bir e-posta adresi sağlarken oturum açılamıyor](validating-user-credentials-against-the-membership-user-store-cs/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="8843a-308">[![Tito Cannot Log In When Supplying an Incorrect Email Address](validating-user-credentials-against-the-membership-user-store-cs/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image28.png)</span></span>

<span data-ttu-id="8843a-309">**Şekil 10**: Hatalı bir e-posta adresi ([tam boyutlu görüntüyü görüntülemek Için tıklayın](validating-user-credentials-against-the-membership-user-store-cs/_static/image30.png)) sağlanırken oturum açılamıyor</span><span class="sxs-lookup"><span data-stu-id="8843a-309">**Figure 10**: Tito Cannot Log In When Supplying an Incorrect Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image30.png))</span></span>

> [!NOTE]
> <span data-ttu-id="8843a-310">Üyelik çerçevesinin adım 1 ' de geçersiz oturum açma girişimlerini nasıl Işleyeceği konusunda anlatıldığı gibi `Membership.ValidateUser` yöntemi çağrıldığında ve geçersiz kimlik bilgileri geçirildiğinde, geçersiz oturum açma girişimini izler ve belirtilen zaman penceresinde belirli bir eşik eşiğini aşarsa kullanıcıyı kilitler.</span><span class="sxs-lookup"><span data-stu-id="8843a-310">As discussed in the How the Membership Framework Handles Invalid Login Attempts section in Step 1, when the `Membership.ValidateUser` method is called and passed invalid credentials, it keeps track of the invalid login attempt and locks out the user if they exceed a certain threshold of invalid attempts within a specified time window.</span></span> <span data-ttu-id="8843a-311">Özel kimlik doğrulama mantığımız `ValidateUser` yöntemini çağırdığı için geçerli bir Kullanıcı adı için hatalı bir parola, geçersiz oturum açma denemesi sayacını artırır, ancak Kullanıcı adı ve parolanın geçerli olduğu, ancak e-posta adresinin yanlış olması durumunda bu sayaç artmaz.</span><span class="sxs-lookup"><span data-stu-id="8843a-311">Since our custom authentication logic calls the `ValidateUser` method, an incorrect password for a valid username will increment the invalid login attempt counter, but this counter is not incremented in the case where the username and password are valid, but the email address is incorrect.</span></span> <span data-ttu-id="8843a-312">Bu davranış, bir korsanın Kullanıcı adı ve parolayı bilmesi, ancak kullanıcının e-posta adresini belirlemesi için deneme yanılma tekniklerini kullanması gereken bir olasılıktır.</span><span class="sxs-lookup"><span data-stu-id="8843a-312">Chances are, this behavior is suitable, since it's unlikely that a hacker will know the username and password, but have to use brute force techniques to determine the user's email address.</span></span>

## <a name="step-4-improving-the-login-controls-invalid-credentials-message"></a><span data-ttu-id="8843a-313">4\. Adım: oturum açma denetiminin geçersiz kimlik bilgileri Iletisini geliştirme</span><span class="sxs-lookup"><span data-stu-id="8843a-313">Step 4: Improving the Login Control's Invalid Credentials Message</span></span>

<span data-ttu-id="8843a-314">Kullanıcı geçersiz kimlik bilgileriyle oturum açmaya çalıştığında, oturum açma denetimi, oturum açma girişiminin başarısız olduğunu belirten bir ileti görüntüler.</span><span class="sxs-lookup"><span data-stu-id="8843a-314">When a user attempts to log on with invalid credentials, the Login control displays a message explaining that the login attempt was unsuccessful.</span></span> <span data-ttu-id="8843a-315">Özellikle, denetim, oturum açma girişiminizin varsayılan bir değeri olan [`FailureText` özelliği](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx)tarafından belirtilen iletiyi görüntüler.</span><span class="sxs-lookup"><span data-stu-id="8843a-315">In particular, the control displays the message specified by its [`FailureText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx), which has a default value of Your login attempt was not successful.</span></span> <span data-ttu-id="8843a-316">Lütfen yeniden deneyin.</span><span class="sxs-lookup"><span data-stu-id="8843a-316">Please try again.</span></span>

<span data-ttu-id="8843a-317">Kullanıcının kimlik bilgilerinin geçersiz olmasının birçok nedeni olduğunu unutmayın:</span><span class="sxs-lookup"><span data-stu-id="8843a-317">Recall that there are many reasons why a user's credentials may be invalid:</span></span>

- <span data-ttu-id="8843a-318">Kullanıcı adı mevcut olmayabilir</span><span class="sxs-lookup"><span data-stu-id="8843a-318">The username may not exist</span></span>
- <span data-ttu-id="8843a-319">Kullanıcı adı var, ancak parola geçersiz</span><span class="sxs-lookup"><span data-stu-id="8843a-319">The username exists, but the password is invalid</span></span>
- <span data-ttu-id="8843a-320">Kullanıcı adı ve parola geçerli, ancak kullanıcı henüz onaylanmamış</span><span class="sxs-lookup"><span data-stu-id="8843a-320">The username and password are valid, but the user is not yet approved</span></span>
- <span data-ttu-id="8843a-321">Kullanıcı adı ve parola geçerli, ancak kullanıcı kilitli (büyük olasılıkla belirtilen zaman çerçevesinde geçersiz oturum açma girişimi sayısını aştıkları için)</span><span class="sxs-lookup"><span data-stu-id="8843a-321">The username and password are valid, but the user is locked out (most likely because they exceeded the number of invalid login attempts within the specified time frame)</span></span>

<span data-ttu-id="8843a-322">Ve özel kimlik doğrulama mantığı kullanılırken başka nedenler de olabilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-322">And there may be other reasons when using custom authentication logic.</span></span> <span data-ttu-id="8843a-323">Örneğin, adım 3 ' te yazdığımız kodla, Kullanıcı adı ve parola geçerli olabilir, ancak e-posta adresi hatalı olabilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-323">For example, with the code we wrote in Step 3, the username and password may be valid, but the email address may be incorrect.</span></span>

<span data-ttu-id="8843a-324">Kimlik bilgilerinin neden geçersiz olmasından bağımsız olarak, oturum açma denetimi aynı hata iletisini görüntüler.</span><span class="sxs-lookup"><span data-stu-id="8843a-324">Regardless of why the credentials are invalid, the Login control displays the same error message.</span></span> <span data-ttu-id="8843a-325">Bu geri bildirim olmaması, hesabı henüz onaylanmamış veya kilitlenen bir kullanıcı için kafa karıştırıcı olabilir. Çok az iş sayesinde, oturum açma denetiminin daha uygun bir ileti görüntülemesini de sağlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="8843a-325">This lack of feedback can be confusing for a user whose account has not yet been approved or who has been locked out. With a little bit of work, though, we can have the Login control display a more appropriate message.</span></span>

<span data-ttu-id="8843a-326">Kullanıcı geçersiz kimlik bilgileriyle oturum açma girişiminde bulunduğunda, oturum açma denetimi `LoginError` olayını başlatır.</span><span class="sxs-lookup"><span data-stu-id="8843a-326">Whenever a user attempts to login with invalid credentials the Login control raises its `LoginError` event.</span></span> <span data-ttu-id="8843a-327">Devam edin ve bu olay için bir olay işleyicisi oluşturun ve aşağıdaki kodu ekleyin:</span><span class="sxs-lookup"><span data-stu-id="8843a-327">Go ahead and create an event handler for this event, and add the following code:</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample5.cs)]

<span data-ttu-id="8843a-328">Yukarıdaki kod, oturum açma denetiminin `FailureText` özelliği varsayılan değere ayarlanarak başlatılır (oturum açma denemeniz başarılı olmadı.</span><span class="sxs-lookup"><span data-stu-id="8843a-328">The above code starts by setting the Login control's `FailureText` property to the default value ( Your login attempt was not successful.</span></span> <span data-ttu-id="8843a-329">Lütfen yeniden deneyin).</span><span class="sxs-lookup"><span data-stu-id="8843a-329">Please try again ).</span></span> <span data-ttu-id="8843a-330">Daha sonra sağlanan kullanıcı adının mevcut bir kullanıcı hesabına eşlendiğini kontrol eder.</span><span class="sxs-lookup"><span data-stu-id="8843a-330">It then checks to see if the username supplied maps to an existing user account.</span></span> <span data-ttu-id="8843a-331">Bu durumda, `MembershipUser` nesnenin `IsLockedOut` ve `IsApproved` özelliklerine bakar ve hesabın kilitlenip kilitlenmediğini veya henüz onaylanmadığını belirleyebilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-331">If so, it consults the resulting `MembershipUser` object's `IsLockedOut` and `IsApproved` properties to determine if the account has been locked out or has not yet been approved.</span></span> <span data-ttu-id="8843a-332">Her iki durumda da `FailureText` özelliği karşılık gelen bir değere güncelleştirilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-332">In either case, the `FailureText` property is updated to a corresponding value.</span></span>

<span data-ttu-id="8843a-333">Bu kodu test etmek için,, mevcut bir kullanıcı olarak oturum açmaya çalışır, ancak yanlış bir parola kullanın.</span><span class="sxs-lookup"><span data-stu-id="8843a-333">To test this code, purposefully attempt to log in as an existing user, but use an incorrect password.</span></span> <span data-ttu-id="8843a-334">10 dakikalık bir zaman çerçevesinde bu beş kez bir satırda bunu yapın ve hesap kilitlenir. Şekil 11 ' de gösterildiği gibi, sonraki oturum açma girişimleri her zaman başarısız olur (doğru parolayla bile), ancak artık çok fazla geçersiz oturum açma denemesi nedeniyle hesabınız daha açıklayıcı bir şekilde görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="8843a-334">Do this five times in a row within a 10 minute time frame and the account will be locked out. As Figure 11 shows, subsequent login attempts will always fail (even with the correct password), but will now display the more descriptive Your account has been locked out because of too many invalid login attempts.</span></span> <span data-ttu-id="8843a-335">Hesabınızın kilidi açık olması için lütfen yöneticiye başvurun.</span><span class="sxs-lookup"><span data-stu-id="8843a-335">Please contact the administrator to have your account unlocked message.</span></span>

<span data-ttu-id="8843a-336">[![Tito geçersiz oturum açma girişimi gerçekleştirdi ve kilitlenmiş](validating-user-credentials-against-the-membership-user-store-cs/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="8843a-336">[![Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out](validating-user-credentials-against-the-membership-user-store-cs/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image31.png)</span></span>

<span data-ttu-id="8843a-337">**Şekil 11**: Tito geçersiz oturum açma girişimi gerçekleştirdi ve kilitlendi ([tam boyutlu görüntüyü görüntülemek için tıklayın](validating-user-credentials-against-the-membership-user-store-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="8843a-337">**Figure 11**: Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image33.png))</span></span>

## <a name="summary"></a><span data-ttu-id="8843a-338">Özet</span><span class="sxs-lookup"><span data-stu-id="8843a-338">Summary</span></span>

<span data-ttu-id="8843a-339">Bu öğreticide, oturum açma sayfamız belirtilen kimlik bilgilerini sabit kodlanmış Kullanıcı adı/parola çiftleri listesine göre doğruladı.</span><span class="sxs-lookup"><span data-stu-id="8843a-339">Prior this tutorial, our login page validated the supplied credentials against a hard-coded list of username/password pairs.</span></span> <span data-ttu-id="8843a-340">Bu öğreticide, üyelik çerçevesinde kimlik bilgilerini doğrulamak için sayfayı güncelleştirdik.</span><span class="sxs-lookup"><span data-stu-id="8843a-340">In this tutorial, we updated the page to validate credentials against the Membership framework.</span></span> <span data-ttu-id="8843a-341">1\. adımda `Membership.ValidateUser` yöntemini programlı olarak kullanma hakkında baktık.</span><span class="sxs-lookup"><span data-stu-id="8843a-341">In Step 1 we looked at using the `Membership.ValidateUser` method programmatically.</span></span> <span data-ttu-id="8843a-342">2\. adımda, el ile oluşturulan kullanıcı arabirimimizi ve kodumuzu oturum açma denetimiyle değiştirdik.</span><span class="sxs-lookup"><span data-stu-id="8843a-342">In Step 2 we replaced our manually created user interface and code with the Login control.</span></span>

<span data-ttu-id="8843a-343">Oturum açma denetimi standart bir oturum açma kullanıcı arabirimini işler ve Kullanıcı kimlik bilgilerini üyelik çerçevesine göre otomatik olarak doğrular.</span><span class="sxs-lookup"><span data-stu-id="8843a-343">The Login control renders a standard login user interface and automatically validates the user's credentials against the Membership framework.</span></span> <span data-ttu-id="8843a-344">Ayrıca, geçerli kimlik bilgileri durumunda oturum açma denetimi, Kullanıcı tarafından form kimlik doğrulaması aracılığıyla oturum açar.</span><span class="sxs-lookup"><span data-stu-id="8843a-344">Moreover, in the event of valid credentials, the Login control signs the user in via forms authentication.</span></span> <span data-ttu-id="8843a-345">Kısacası, tam işlevli bir oturum açma kullanıcı deneyimi yalnızca oturum açma denetimini bir sayfaya sürükleyerek, ek bildirime dayalı biçimlendirme veya kod gerekli olmadan kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-345">In short, a fully functional login user experience is available by simply dragging the Login control onto a page, no extra declarative markup or code necessary.</span></span> <span data-ttu-id="8843a-346">Artık, oturum açma denetimi, hem işlenmiş Kullanıcı arabirimi hem de kimlik doğrulama mantığı üzerinde ince bir denetim sağlayan yüksek düzeyde özelleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-346">What's more, the Login control is highly customizable, allowing for a fine degree of control over both the rendered user interface and authentication logic.</span></span>

<span data-ttu-id="8843a-347">Bu noktada, Web sitemizden ziyaretçi yeni bir kullanıcı hesabı oluşturabilir ve sitede oturum açabilir, ancak kimliği doğrulanmış kullanıcıya göre sayfaların erişimini kısıtlama konusunda bakmamız gerekir.</span><span class="sxs-lookup"><span data-stu-id="8843a-347">At this point visitors to our website can create a new user account and log into the site, but we have yet to look at restricting access to pages based on the authenticated user.</span></span> <span data-ttu-id="8843a-348">Şu anda, tüm kullanıcılar, kimliği doğrulanmış veya anonim, sitemizdeki herhangi bir sayfayı görüntüleyebilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-348">Currently, any user, authenticated or anonymous, can view any page on our site.</span></span> <span data-ttu-id="8843a-349">Sitemizdeki sayfalara erişimi denetim altına alarak, işlevselliği kullanıcıya bağlı olan belirli sayfaları da olabilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-349">Along with controlling access to our site's pages on a user-by-user basis, we might have certain pages whose functionality depends on the user.</span></span> <span data-ttu-id="8843a-350">Sonraki öğreticide, oturum açmış kullanıcıya göre erişimin ve sayfa içi işlevlerin nasıl sınırlandırılır.</span><span class="sxs-lookup"><span data-stu-id="8843a-350">The next tutorial looks at how to limit access and in-page functionality based on the logged in user.</span></span>

<span data-ttu-id="8843a-351">Programlamanın kutlu olsun!</span><span class="sxs-lookup"><span data-stu-id="8843a-351">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="8843a-352">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="8843a-352">Further Reading</span></span>

<span data-ttu-id="8843a-353">Bu öğreticide ele alınan konular hakkında daha fazla bilgi için aşağıdaki kaynaklara bakın:</span><span class="sxs-lookup"><span data-stu-id="8843a-353">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="8843a-354">Kilitli ve onaylanmamış kullanıcılara özel Iletiler görüntüleme</span><span class="sxs-lookup"><span data-stu-id="8843a-354">Displaying Custom Messages to Locked Out and Non-Approved Users</span></span>](http://aspnet.4guysfromrolla.com/articles/050306-1.aspx)
- [<span data-ttu-id="8843a-355">ASP.NET 2.0 'ın üyeliğini, rollerini ve profilini İnceleme</span><span class="sxs-lookup"><span data-stu-id="8843a-355">Examining ASP.NET 2.0's Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="8843a-356">Nasıl yapılır: ASP.NET oturum açma sayfası oluşturma</span><span class="sxs-lookup"><span data-stu-id="8843a-356">How To: Create an ASP.NET Login Page</span></span>](https://msdn.microsoft.com/library/ms178331.aspx)
- [<span data-ttu-id="8843a-357">Oturum açma denetimi teknik belgeleri</span><span class="sxs-lookup"><span data-stu-id="8843a-357">Login Control Technical Documentation</span></span>](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx)
- [<span data-ttu-id="8843a-358">Oturum açma denetimlerini kullanma</span><span class="sxs-lookup"><span data-stu-id="8843a-358">Using the Login Controls</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/security/login.aspx)

### <a name="about-the-author"></a><span data-ttu-id="8843a-359">Yazar hakkında</span><span class="sxs-lookup"><span data-stu-id="8843a-359">About the Author</span></span>

<span data-ttu-id="8843a-360">Birden çok ASP/ASP. NET Books ve 4GuysFromRolla.com 'in yazarı Scott Mitchell, 1998 sürümünden bu yana Microsoft Web teknolojileriyle birlikte çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="8843a-360">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="8843a-361">Scott bağımsız danışman, Trainer ve yazıcı olarak çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="8843a-361">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="8843a-362">En son kitabı, *[24 saat içinde ASP.NET 2,0 kendi kendinize eğitim](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)* ister.</span><span class="sxs-lookup"><span data-stu-id="8843a-362">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="8843a-363">Scott 'a [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) veya blogundan [http://ScottOnWriting.NET](http://scottonwriting.net/)üzerinden erişilebilir.</span><span class="sxs-lookup"><span data-stu-id="8843a-363">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="8843a-364">Özel olarak teşekkürler</span><span class="sxs-lookup"><span data-stu-id="8843a-364">Special Thanks To</span></span>

<span data-ttu-id="8843a-365">Bu öğretici serisi birçok yararlı gözden geçirenler tarafından incelendi.</span><span class="sxs-lookup"><span data-stu-id="8843a-365">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="8843a-366">Bu öğreticide lider gözden geçirenler, bir Murphy ve Michael Kayvero.</span><span class="sxs-lookup"><span data-stu-id="8843a-366">Lead reviewers for this tutorial were Teresa Murphy and Michael Olivero.</span></span> <span data-ttu-id="8843a-367">Yaklaşan MSDN makalelerimi gözden geçiriyor musunuz?</span><span class="sxs-lookup"><span data-stu-id="8843a-367">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="8843a-368">Öyleyse, beni [mitchell@4GuysFromRolla.com](mailto:mitchell@4guysfromrolla.com)bir satır bırakın.</span><span class="sxs-lookup"><span data-stu-id="8843a-368">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4guysfromrolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8843a-369">[Önceki](creating-user-accounts-cs.md)
> [İleri](user-based-authorization-cs.md)</span><span class="sxs-lookup"><span data-stu-id="8843a-369">[Previous](creating-user-accounts-cs.md)
[Next](user-based-authorization-cs.md)</span></span>
