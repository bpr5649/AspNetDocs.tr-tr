---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/taking-web-applications-offline-with-web-deploy
title: Web uygulamalarını Web Dağıtımı çevrimdışına alma | Microsoft Docs
author: jrjlee
description: Bu konuda, bir Web uygulamasını Internet Information Services (IIS) Web depl kullanılarak otomatik dağıtım süresince çevrimdışına alma açıklanmaktadır...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 3e9f6e7d-8967-4586-94d5-d3a122f12529
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/taking-web-applications-offline-with-web-deploy
msc.type: authoredcontent
ms.openlocfilehash: ba60664a0c3daa0650cd7e7cfc4ab9da08df3440
ms.sourcegitcommit: e365196c75ce93cd8967412b1cfdc27121816110
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/07/2020
ms.locfileid: "77075144"
---
# <a name="taking-web-applications-offline-with-web-deploy"></a><span data-ttu-id="ef492-103">Web Dağıtımı ile Web Uygulamalarını Çevrimdışı Yapma</span><span class="sxs-lookup"><span data-stu-id="ef492-103">Taking Web Applications Offline with Web Deploy</span></span>

<span data-ttu-id="ef492-104">[Jason Lee](https://github.com/jrjlee) tarafından</span><span class="sxs-lookup"><span data-stu-id="ef492-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="ef492-105">PDF 'YI indir</span><span class="sxs-lookup"><span data-stu-id="ef492-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="ef492-106">Bu konu, Internet Information Services (IIS) Web Dağıtım Aracı (Web Dağıtımı) kullanılarak otomatik dağıtım süresince bir Web uygulamasını çevrimdışına alma işlemini açıklar.</span><span class="sxs-lookup"><span data-stu-id="ef492-106">This topic describes how to take a web application offline for the duration of an automated deployment using the Internet Information Services (IIS) Web Deployment Tool (Web Deploy).</span></span> <span data-ttu-id="ef492-107">Web uygulamasına gözatabilen kullanıcılar, dağıtım tamamlanana kadar *çevrimdışı. htm dosyası\_bir uygulamaya* yeniden yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="ef492-107">Users who browse to the web application are redirected to an *App\_offline.htm* file until the deployment is complete.</span></span>

<span data-ttu-id="ef492-108">Bu konu, Fabrikam, Inc adlı kurgusal bir şirketin Kurumsal Dağıtım gereksinimlerini temel alarak bir öğretici serisinin bir parçasını oluşturur. Bu öğretici serisi, bir ASP.NET MVC&#x2014;3 uygulaması, Windows Communication Foundation (WCF) hizmeti ve bir veritabanı projesi dahil, gerçekçi bir karmaşıklık düzeyine sahip bir Web uygulamasını temsil etmek üzere bir örnek çözüm olan [Contact Manager çözümünü](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;kullanır.</span><span class="sxs-lookup"><span data-stu-id="ef492-108">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="ef492-109">Bu öğreticilerin temelini oluşturan dağıtım yöntemi, derleme işleminin her hedef ortam için uygulanan derleme yönergelerini içeren ve ortama özel yapı ve dağıtım ayarlarını içeren iki proje&#x2014;dosyası tarafından kontrol edilen proje [dosyasını anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md)bölümünde açıklanan bölünmüş proje dosyası yaklaşımını temel alır.</span><span class="sxs-lookup"><span data-stu-id="ef492-109">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="ef492-110">Derleme zamanında, ortama özgü proje dosyası, derleme yönergelerinin tam bir kümesini oluşturmak için ortam agtik proje dosyası ile birleştirilir.</span><span class="sxs-lookup"><span data-stu-id="ef492-110">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="ef492-111">Göreve genel bakış</span><span class="sxs-lookup"><span data-stu-id="ef492-111">Task Overview</span></span>

<span data-ttu-id="ef492-112">Birçok senaryoda, veritabanları veya Web Hizmetleri gibi ilgili bileşenlerde değişiklik yaparken bir Web uygulamasını çevrimdışı duruma getirmek isteyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="ef492-112">In a lot of scenarios, you'll want to take a web application offline while you make changes to related components, like databases or web services.</span></span> <span data-ttu-id="ef492-113">Genellikle IIS ve ASP.NET ' de, IIS Web sitesinin veya Web uygulamasının kök klasöründe, *\_offline. htm* adlı bir dosya yerleştirerek bunu gerçekleştirirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ef492-113">Typically, in IIS and ASP.NET, you accomplish this by placing a file named *App\_offline.htm* in the root folder of the IIS website or web application.</span></span> <span data-ttu-id="ef492-114">*App\_offline. htm* dosyası standart bir HTML dosyasıdır ve genellikle kullanıcıya, bakım nedeniyle sitenin geçici olarak kullanılamadığını bildiren basit bir ileti içerecektir.</span><span class="sxs-lookup"><span data-stu-id="ef492-114">The *App\_offline.htm* file is a standard HTML file and will usually contain a simple message advising the user that the site is temporarily unavailable due to maintenance.</span></span> <span data-ttu-id="ef492-115">*App\_offline. htm* dosyası Web sitesinin kök klasöründe mevcut olsa da IIS, tüm istekleri otomatik olarak dosyaya yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="ef492-115">While the *App\_offline.htm* file exists in the root folder of the website, IIS will automatically redirect any requests to the file.</span></span> <span data-ttu-id="ef492-116">Güncelleştirme yapmayı tamamladığınızda, *uygulamayı çevrimdışı. htm dosyası\_* kaldırırsınız ve Web sitesi her zamanki gibi isteklere hizmet vermeye devam eder.</span><span class="sxs-lookup"><span data-stu-id="ef492-116">When you've finished making updates, you remove the *App\_offline.htm* file and the website resumes serving requests as usual.</span></span>

<span data-ttu-id="ef492-117">Bir hedef ortama otomatik veya tek adımlı dağıtımlar gerçekleştirmek için Web Dağıtımı kullandığınızda, *uygulamayı\_çevrimdışı. htm* dosyasını dağıtım sürecinizde ekleme ve kaldırma dahil etmek isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ef492-117">When you use Web Deploy to perform automated or single-step deployments to a target environment, you may want to incorporate adding and removing the *App\_offline.htm* file into your deployment process.</span></span> <span data-ttu-id="ef492-118">Bunu yapmak için, bu üst düzey görevleri gerçekleştirmeniz gerekir:</span><span class="sxs-lookup"><span data-stu-id="ef492-118">To do this, you'll need to complete these high-level tasks:</span></span>

- <span data-ttu-id="ef492-119">Dağıtım işlemini denetlemek için kullandığınız Microsoft Build Engine (MSBuild) proje dosyasında, herhangi bir dağıtım görevinin başlamadan önce, bir *uygulamayı çevrimdışı. htm dosyasını\_* hedef sunucuya kopyalayan bir MSBuild hedefi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="ef492-119">In the Microsoft Build Engine (MSBuild) project file that you use to control the deployment process, create an MSBuild target that copies an *App\_offline.htm* file to the destination server before any deployment tasks begin.</span></span>
- <span data-ttu-id="ef492-120">Tüm dağıtım görevleri tamamlandığında, uygulamayı hedef sunucudan *\_çevrimdışı. htm* dosyasını kaldıran başka bir MSBuild hedefi ekleyin.</span><span class="sxs-lookup"><span data-stu-id="ef492-120">Add another MSBuild target that removes the *App\_offline.htm* file from the destination server when all deployment tasks are complete.</span></span>
- <span data-ttu-id="ef492-121">Web uygulaması projesinde, Web Dağıtımı çağrıldığında bir *uygulamanın çevrimdışı. htm dosyası\_* dağıtım paketine eklenmesini sağlayan bir *. WPP. targets* dosyası oluşturun.</span><span class="sxs-lookup"><span data-stu-id="ef492-121">In the web application project, create a *.wpp.targets* file that ensures that an *App\_offline.htm* file is added to the deployment package when Web Deploy is invoked.</span></span>

<span data-ttu-id="ef492-122">Bu konu başlığı altında, bu yordamların nasıl gerçekleştirileceği gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="ef492-122">This topic will show you how to perform these procedures.</span></span> <span data-ttu-id="ef492-123">Bu konudaki görevler ve izlenecek yollar, en az bir Web uygulaması projesi içeren bir çözüm oluşturmuş ve [kuruluştaki Web dağıtımında](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md)açıklandığı şekilde dağıtım işlemini denetlemek için özel bir proje dosyası kullandığınız varsayılır.</span><span class="sxs-lookup"><span data-stu-id="ef492-123">The tasks and walkthroughs in this topic assume that you've already created a solution that contains at least one web application project, and that you use a custom project file to control the deployment process as described in [Web Deployment in the Enterprise](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md).</span></span> <span data-ttu-id="ef492-124">Alternatif olarak, konusundaki örnekleri izlemek için [Ilgili Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) örnek çözümünü kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ef492-124">Alternatively, you can use the [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution to follow the examples in the topic.</span></span>

## <a name="adding-an-app_offline-file-to-a-web-application-project"></a><span data-ttu-id="ef492-125">Bir Web uygulaması projesine bir uygulama\_çevrimdışı dosya ekleme</span><span class="sxs-lookup"><span data-stu-id="ef492-125">Adding an App\_Offline File to a Web Application Project</span></span>

<span data-ttu-id="ef492-126">Gerçekleştirmeniz gereken ilk görev, Web uygulaması projenize bir *uygulama\_çevrimdışı* dosya eklemektir:</span><span class="sxs-lookup"><span data-stu-id="ef492-126">The first task you need to complete is to add an *App\_offline* file to your web application project:</span></span>

- <span data-ttu-id="ef492-127">Dosyanın geliştirme süreciyle kesintiye uğramasını engellemek için (uygulamanızın kalıcı olarak çevrimdışı olmasını istemezsiniz), bunu *App\_offline. htm*' den başka bir şekilde çağırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="ef492-127">To prevent the file from interfering with the development process (you don't want your application to be permanently offline), you should call it something other than *App\_offline.htm*.</span></span> <span data-ttu-id="ef492-128">Örneğin, *Offline-Template. htm\_dosya uygulamasını*adlandırın.</span><span class="sxs-lookup"><span data-stu-id="ef492-128">For example, you could name the file *App\_offline-template.htm*.</span></span>
- <span data-ttu-id="ef492-129">Dosyanın olduğu gibi dağıtılmasını engellemek için derleme eylemini **none**olarak ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="ef492-129">To prevent the file from being deployed as-is, you should set the build action to **None**.</span></span>

<span data-ttu-id="ef492-130">**Bir Web uygulaması projesine bir App\_çevrimdışı dosya eklemek için**</span><span class="sxs-lookup"><span data-stu-id="ef492-130">**To add an App\_offline file to a web application project**</span></span>

1. <span data-ttu-id="ef492-131">Çözümünüzü Visual Studio 2010 ' de açın.</span><span class="sxs-lookup"><span data-stu-id="ef492-131">Open your solution in Visual Studio 2010.</span></span>
2. <span data-ttu-id="ef492-132">**Çözüm Gezgini** penceresinde, Web uygulaması projenize sağ tıklayın, **Ekle**' nin üzerine gelin ve ardından **Yeni öğe**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="ef492-132">In the **Solution Explorer** window, right-click your web application project, point to **Add**, and then click **New Item**.</span></span>
3. <span data-ttu-id="ef492-133">**Yeni öğe Ekle** Iletişim kutusunda **HTML sayfası**' nı seçin.</span><span class="sxs-lookup"><span data-stu-id="ef492-133">In the **Add New Item** dialog box, select **HTML Page**.</span></span>
4. <span data-ttu-id="ef492-134">**Ad** kutusuna **App\_offline-Template. htm**yazın ve ardından **Ekle**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="ef492-134">In the **Name** box, type **App\_offline-template.htm**, and then click **Add**.</span></span>

    ![](taking-web-applications-offline-with-web-deploy/_static/image1.png)
5. <span data-ttu-id="ef492-135">Kullanıcılara uygulamanın kullanılamadığını bildirmek için bazı basit HTML ekleyin ve dosyayı kaydedin.</span><span class="sxs-lookup"><span data-stu-id="ef492-135">Add some simple HTML to inform users that the application is unavailable, and then save the file.</span></span> <span data-ttu-id="ef492-136">Herhangi bir sunucu tarafı etiketi (örneğin, "ASP:" önekini kullanan tüm Etiketler) eklemeyin.</span><span class="sxs-lookup"><span data-stu-id="ef492-136">Do not include any server-side tags (for example, any tags that are prefixed with "asp:").</span></span> 

    ![](taking-web-applications-offline-with-web-deploy/_static/image2.png)
6. <span data-ttu-id="ef492-137">**Çözüm Gezgini** penceresinde, yeni dosyaya sağ tıklayın ve ardından **Özellikler**' e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="ef492-137">In the **Solution Explorer** window, right-click the new file, and then click **Properties**.</span></span>
7. <span data-ttu-id="ef492-138">**Özellikler** penceresinde, **derleme eylemi** satırında **hiçbiri**' ni seçin.</span><span class="sxs-lookup"><span data-stu-id="ef492-138">In the **Properties** window, in the **Build Action** row, select **None**.</span></span>

    ![](taking-web-applications-offline-with-web-deploy/_static/image3.png)

## <a name="deploying-and-deleting-an-app_offline-file"></a><span data-ttu-id="ef492-139">Bir uygulama\_çevrimdışı dosya dağıtma ve silme</span><span class="sxs-lookup"><span data-stu-id="ef492-139">Deploying and Deleting an App\_Offline File</span></span>

<span data-ttu-id="ef492-140">Bir sonraki adım, dağıtım mantığının başlangıcında dosyayı hedef sunucuya kopyalamak ve sonunda kaldırmak için dağıtım mantığınızı değiştirmektir.</span><span class="sxs-lookup"><span data-stu-id="ef492-140">The next step is to modify your deployment logic to copy the file to the destination server at the start of the deployment process and remove it at the end.</span></span>

> [!NOTE]
> <span data-ttu-id="ef492-141">Sonraki yordam, [Proje dosyasını anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md)bölümünde açıklandığı gibi, dağıtım işleminizi denetlemek için özel bir MSBuild proje dosyası kullandığınızı varsayar.</span><span class="sxs-lookup"><span data-stu-id="ef492-141">The next procedure assumes that you're using a custom MSBuild project file to control your deployment process, as described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span> <span data-ttu-id="ef492-142">Doğrudan Visual Studio 'dan dağıtım yapıyorsanız, farklı bir yaklaşım kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="ef492-142">If you're deploying direct from Visual Studio, you'll need to use a different approach.</span></span> <span data-ttu-id="ef492-143">Sayıed Ibrat, [Yayımlama sırasında Web uygulamanızı çevrimdışına alma konusunda](http://sedodream.com/2012/01/08/HowToTakeYourWebAppOfflineDuringPublishing.aspx)bu tür bir yaklaşımı açıklar.</span><span class="sxs-lookup"><span data-stu-id="ef492-143">Sayed Ibrahim Hashimi describes one such approach in [How to Take Your Web App Offline During Publishing](http://sedodream.com/2012/01/08/HowToTakeYourWebAppOfflineDuringPublishing.aspx).</span></span>

<span data-ttu-id="ef492-144">Bir *uygulama\_çevrimdışı* dosyayı hedef IIS Web sitesine dağıtmak için, [Web dağıtımı **contentPath** sağlayıcısını](https://technet.microsoft.com/library/dd569034(WS.10).aspx)kullanarak MSDeploy. exe ' yi çağırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="ef492-144">To deploy an *App\_offline* file to a destination IIS website, you need to invoke MSDeploy.exe using the [Web Deploy **contentPath** provider](https://technet.microsoft.com/library/dd569034(WS.10).aspx).</span></span> <span data-ttu-id="ef492-145">**ContentPath** sağlayıcısı hem fiziksel dizin yollarını hem de IIS Web sitesini ya da uygulama yollarını destekler, bu da bir Visual Studio proje klasörü Ile bir IIS Web uygulaması arasında dosya eşitlemek için ideal seçim yapar.</span><span class="sxs-lookup"><span data-stu-id="ef492-145">The **contentPath** provider supports both physical directory paths and IIS website or application paths, which makes it the ideal choice for synchronizing a file between a Visual Studio project folder and an IIS web application.</span></span> <span data-ttu-id="ef492-146">Dosyayı dağıtmak için MSDeploy komutunuz şuna benzemelidir:</span><span class="sxs-lookup"><span data-stu-id="ef492-146">To deploy the file, your MSDeploy command should resemble this:</span></span>

[!code-console[Main](taking-web-applications-offline-with-web-deploy/samples/sample1.cmd)]

<span data-ttu-id="ef492-147">Dağıtım işleminin sonundaki dosyayı hedef siteden kaldırmak için MSDeploy komutunuz şuna benzemelidir:</span><span class="sxs-lookup"><span data-stu-id="ef492-147">To remove the file from the destination site at the end of the deployment process, your MSDeploy command should resemble this:</span></span>

[!code-console[Main](taking-web-applications-offline-with-web-deploy/samples/sample2.cmd)]

<span data-ttu-id="ef492-148">Bu komutları derleme ve dağıtım sürecinin bir parçası olarak otomatikleştirmek için, bunları özel MSBuild proje dosyanıza tümleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="ef492-148">To automate these commands as part of a build and deployment process, you need to integrate them into your custom MSBuild project file.</span></span> <span data-ttu-id="ef492-149">Sonraki yordamda bunun nasıl yapılacağı açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="ef492-149">The next procedure describes how to do this.</span></span>

<span data-ttu-id="ef492-150">**Bir uygulama\_çevrimdışı dosya dağıtmak ve silmek için**</span><span class="sxs-lookup"><span data-stu-id="ef492-150">**To deploy and delete an App\_offline file**</span></span>

1. <span data-ttu-id="ef492-151">Visual Studio 2010 ' de, dağıtım işleminizi denetleyen MSBuild proje dosyasını açın.</span><span class="sxs-lookup"><span data-stu-id="ef492-151">In Visual Studio 2010, open the MSBuild project file that controls your deployment process.</span></span> <span data-ttu-id="ef492-152">[Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) örnek çözümünde, *Publish. proj* dosyasıdır.</span><span class="sxs-lookup"><span data-stu-id="ef492-152">In the [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution, this is the *Publish.proj* file.</span></span>
2. <span data-ttu-id="ef492-153">Kök **Proje** öğesinde, *uygulama\_çevrimdışı* dağıtım için değişkenleri depolamak üzere yeni bir **PropertyGroup** öğesi oluşturun:</span><span class="sxs-lookup"><span data-stu-id="ef492-153">In the root **Project** element, create a new **PropertyGroup** element to store variables for the *App\_offline* deployment:</span></span>

    [!code-xml[Main](taking-web-applications-offline-with-web-deploy/samples/sample3.xml)]
3. <span data-ttu-id="ef492-154">**SourceRoot** özelliği *Publish. proj* dosyasında başka bir yerde tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="ef492-154">The **SourceRoot** property is defined elsewhere in the *Publish.proj* file.</span></span> <span data-ttu-id="ef492-155">Kaynak içeriğin kök klasörünün konumunu, diğer sözcükteki geçerli yola&#x2014;göreli olarak *Publish. proj* dosyasının konumuna göre gösterir.</span><span class="sxs-lookup"><span data-stu-id="ef492-155">It indicates the location of the root folder for the source content relative to the current path&#x2014;in other words, relative to the location of the *Publish.proj* file.</span></span>
4. <span data-ttu-id="ef492-156">**ContentPath** sağlayıcısı göreli dosya yollarını kabul etmez, bu nedenle dağıtmadan önce kaynak dosyanıza Mutlak bir yol almanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="ef492-156">The **contentPath** provider will not accept relative file paths, so you need to get an absolute path to your source file before you can deploy it.</span></span> <span data-ttu-id="ef492-157">Bunu yapmak için [ConvertToAbsolutePath](https://msdn.microsoft.com/library/bb882668.aspx) görevini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ef492-157">You can use the [ConvertToAbsolutePath](https://msdn.microsoft.com/library/bb882668.aspx) task to do this.</span></span>
5. <span data-ttu-id="ef492-158">**GetAppOfflineAbsolutePath**adlı yeni bir **hedef** öğe ekleyin.</span><span class="sxs-lookup"><span data-stu-id="ef492-158">Add a new **Target** element named **GetAppOfflineAbsolutePath**.</span></span> <span data-ttu-id="ef492-159">Bu hedef içinde, proje klasörünüzdeki *çevrimdışı şablon dosyası\_uygulamanın* mutlak yolunu almak için **ConvertToAbsolutePath** görevini kullanın.</span><span class="sxs-lookup"><span data-stu-id="ef492-159">Within this target, use the **ConvertToAbsolutePath** task to get an absolute path to the *App\_offline-template* file in your project folder.</span></span>

    [!code-xml[Main](taking-web-applications-offline-with-web-deploy/samples/sample4.xml)]
6. <span data-ttu-id="ef492-160">Bu hedef, uygulamanın göreli yolunu proje klasörünüzde *çevrimdışı şablon dosyası\_* alır ve yeni bir özelliğe mutlak dosya yolu olarak kaydeder.</span><span class="sxs-lookup"><span data-stu-id="ef492-160">This target takes the relative path to the *App\_offline-template* file in your project folder and saves it to a new property as an absolute file path.</span></span> <span data-ttu-id="ef492-161">**BeforeTargets** özniteliği, bu hedefin, bir sonraki adımda oluşturacağınız **dağıtıcı** hedeften önce yürütmesini istediğinizi belirtir.</span><span class="sxs-lookup"><span data-stu-id="ef492-161">The **BeforeTargets** attribute specifies that you want this target to execute before the **DeployAppOffline** target, which you'll create in the next step.</span></span>
7. <span data-ttu-id="ef492-162">**Dağıtılanın**adlı yeni bir hedef ekleyin.</span><span class="sxs-lookup"><span data-stu-id="ef492-162">Add a new target named **DeployAppOffline**.</span></span> <span data-ttu-id="ef492-163">Bu hedef içinde, *uygulamanızı\_çevrimdışı* dosyayı hedef Web sunucusuna dağıtan MSDeploy. exe komutunu çağırın.</span><span class="sxs-lookup"><span data-stu-id="ef492-163">Within this target, invoke the MSDeploy.exe command that deploys your *App\_offline* file to the destination web server.</span></span>

    [!code-xml[Main](taking-web-applications-offline-with-web-deploy/samples/sample5.xml)]
8. <span data-ttu-id="ef492-164">Bu örnekte, **Contactmanageriispath** özelliği proje dosyasında başka bir yerde tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="ef492-164">In this example, the **ContactManagerIisPath** property is defined elsewhere in the project file.</span></span> <span data-ttu-id="ef492-165">Bu, *[IIS Web sitesi adı]/[uygulama adı]* biçiminde yalnızca bir IIS uygulama yoludur.</span><span class="sxs-lookup"><span data-stu-id="ef492-165">This is simply an IIS application path, in the form *[IIS Website Name]/[Application Name]*.</span></span> <span data-ttu-id="ef492-166">Hedefe bir koşul eklemek, kullanıcıların bir özellik değerini değiştirerek veya bir komut satırı parametresi sağlayarak *uygulama\_çevrimdışı* dağıtım üzerinde geçiş yapmasına olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="ef492-166">Including a condition in the target enables users to switch the *App\_offline* deployment on or off by changing a property value or providing a command-line parameter.</span></span>
9. <span data-ttu-id="ef492-167">**Deleteappoffline**adlı yeni bir hedef ekleyin.</span><span class="sxs-lookup"><span data-stu-id="ef492-167">Add a new target named **DeleteAppOffline**.</span></span> <span data-ttu-id="ef492-168">Bu hedef içinde, hedef Web sunucusundan *uygulamanızı\_çevrimdışı* dosyayı kaldıran MSDeploy. exe komutunu çağırın.</span><span class="sxs-lookup"><span data-stu-id="ef492-168">Within this target, invoke the MSDeploy.exe command that removes your *App\_offline* file from the destination web server.</span></span>

    [!code-xml[Main](taking-web-applications-offline-with-web-deploy/samples/sample6.xml)]
10. <span data-ttu-id="ef492-169">Son görev, proje dosyanızın yürütülmesi sırasında bu yeni hedefleri uygun noktalarda çağırmada kullanılır.</span><span class="sxs-lookup"><span data-stu-id="ef492-169">The final task is to invoke these new targets at appropriate points during the execution of your project file.</span></span> <span data-ttu-id="ef492-170">Bunu çeşitli şekillerde yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ef492-170">You can do this in various ways.</span></span> <span data-ttu-id="ef492-171">Örneğin, *Publish. proj* dosyasında, **Fullpublishbağımlıdson** özelliği, **fullpublish** varsayılan hedefinin çağrıldığı sırada yürütülmesi gereken hedeflerin bir listesini belirtir.</span><span class="sxs-lookup"><span data-stu-id="ef492-171">For example, in the *Publish.proj* file, the **FullPublishDependsOn** property specifies a list of targets that must be executed in order when the **FullPublish** default target is invoked.</span></span>
11. <span data-ttu-id="ef492-172">Yayımlama sürecinde uygun noktalarda **dağıtıcı** ve **deleteappoffline** hedeflerini çağırmak için MSBuild proje dosyanızı değiştirin.</span><span class="sxs-lookup"><span data-stu-id="ef492-172">Modify your MSBuild project file to invoke the **DeployAppOffline** and **DeleteAppOffline** targets at appropriate points in the publishing process.</span></span>

    [!code-xml[Main](taking-web-applications-offline-with-web-deploy/samples/sample7.xml)]

<span data-ttu-id="ef492-173">Özel MSBuild proje dosyanızı çalıştırdığınızda, başarılı bir derlemeden sonra *uygulama\_çevrimdışı* dosya sunucuya hemen dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="ef492-173">When you run your custom MSBuild project file, the *App\_offline* file will be deployed to the server immediately after a successful build.</span></span> <span data-ttu-id="ef492-174">Dağıtım görevlerinin tümü tamamlandıktan sonra sunucudan silinir.</span><span class="sxs-lookup"><span data-stu-id="ef492-174">It will then be deleted from the server once all the deployment tasks are complete.</span></span>

## <a name="adding-an-app_offline-file-to-deployment-packages"></a><span data-ttu-id="ef492-175">Dağıtım paketlerine bir uygulama\_çevrimdışı dosya ekleme</span><span class="sxs-lookup"><span data-stu-id="ef492-175">Adding an App\_Offline File to Deployment Packages</span></span>

<span data-ttu-id="ef492-176">Dağıtımınızı nasıl yapılandırdığınıza bağlı olarak, hedef IIS Web uygulamasındaki&#x2014; *App\_çevrimdışı. htm* &#x2014;gibi herhangi bir içerik, hedefe bir Web paketi dağıttığınızda otomatik olarak silinebilir.</span><span class="sxs-lookup"><span data-stu-id="ef492-176">Depending on how you configure your deployment, any existing content at the destination IIS web application&#x2014;like the *App\_offline.htm* file&#x2014;may be deleted automatically when you deploy a web package to the destination.</span></span> <span data-ttu-id="ef492-177">Dağıtım süresince *App\_offline. htm* dosyasının yerinde kaldığından emin olmak için dosyayı doğrudan dağıtım işleminin başlangıcında dağıtmaya ek olarak Web dağıtım paketinin içine eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="ef492-177">To ensure that the *App\_offline.htm* file remains in place for the duration of the deployment, you need to include the file within the web deployment package itself in addition to deploying the file directly at the start of the deployment process.</span></span>

- <span data-ttu-id="ef492-178">Bu konudaki önceki görevleri izlediyseniz, uygulamayı farklı bir dosya adı altında ( *app\_offline-Template. htm*kullandık) *\_çevrimdışı. htm* dosyasını Web uygulaması projenize **eklediniz.**</span><span class="sxs-lookup"><span data-stu-id="ef492-178">If you've followed the previous tasks in this topic, you'll have added the *App\_offline.htm* file to your web application project under a different filename (we used *App\_offline-template.htm*) and you'll have set the build action to **None**.</span></span> <span data-ttu-id="ef492-179">Bu değişiklikler, dosyanın geliştirme ve hata ayıklama ile kesintiye uğramasını engellemek için gereklidir.</span><span class="sxs-lookup"><span data-stu-id="ef492-179">These changes are necessary to prevent the file from interfering with development and debugging.</span></span> <span data-ttu-id="ef492-180">Sonuç olarak, *uygulama\_çevrimdışı. htm* dosyasının Web dağıtım paketine eklendiğinden emin olmak için Paketleme işlemini özelleştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="ef492-180">As a result, you need to customize the packaging process to ensure that the *App\_offline.htm* file is included in the web deployment package.</span></span>

<span data-ttu-id="ef492-181">Web yayımlama işlem hattı (WPP), Web dağıtım paketine dahil edilecek dosyaların bir listesini oluşturmak için **Filesforpackagingfromproject** adlı bir öğe listesi kullanır.</span><span class="sxs-lookup"><span data-stu-id="ef492-181">The Web Publishing Pipeline (WPP) uses an item list named **FilesForPackagingFromProject** to build a list of files that should be included in the web deployment package.</span></span> <span data-ttu-id="ef492-182">Bu listeye kendi öğelerinizi ekleyerek Web paketlerinizin içeriğini özelleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ef492-182">You can customize the contents of your web packages by adding your own items to this list.</span></span> <span data-ttu-id="ef492-183">Bunu yapmak için, aşağıdaki üst düzey adımları gerçekleştirmeniz gerekir:</span><span class="sxs-lookup"><span data-stu-id="ef492-183">To do this, you need to complete these high-level steps:</span></span>

1. <span data-ttu-id="ef492-184">Proje dosyanız ile aynı klasörde *[proje adı]. WPP. targets* adlı özel bir proje dosyası oluşturun.</span><span class="sxs-lookup"><span data-stu-id="ef492-184">Create a custom project file named *[project name].wpp.targets* in the same folder as your project file.</span></span>

    > [!NOTE]
    > <span data-ttu-id="ef492-185">*. WPP. targets* dosyasının, derleme ve dağıtım işlemini denetlemek için kullandığınız özel proje dosyalarıyla aynı klasörde değil&#x2014; *,* &#x2014;Web uygulaması proje dosyası ile aynı klasöre gitmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="ef492-185">The *.wpp.targets* file needs to go in the same folder as your web application project file&#x2014;for example, *ContactManager.Mvc.csproj*&#x2014;rather than in the same folder as any custom project files you use to control the build and deployment process.</span></span>
2. <span data-ttu-id="ef492-186">*. WPP. targets* dosyasında, **Copyallfilestosinglefolderforpackage** hedefinden *önce* yürütülen yeni bir MSBuild hedefi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="ef492-186">In the *.wpp.targets* file, create a new MSBuild target that executes *before* the **CopyAllFilesToSingleFolderForPackage** target.</span></span> <span data-ttu-id="ef492-187">Bu, pakete eklenecek öğelerin bir listesini oluşturan WPP hedefidir.</span><span class="sxs-lookup"><span data-stu-id="ef492-187">This is the WPP target that builds a list of things to include in the package.</span></span>
3. <span data-ttu-id="ef492-188">Yeni hedefte bir **ItemGroup** öğesi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="ef492-188">In the new target, create an **ItemGroup** element.</span></span>
4. <span data-ttu-id="ef492-189">**ItemGroup** öğesinde bir **Filesforpackagingfromproject** öğesi ekleyin ve *App\_offline. htm* dosyasını belirtin.</span><span class="sxs-lookup"><span data-stu-id="ef492-189">In the **ItemGroup** element, add a **FilesForPackagingFromProject** item and specify the *App\_offline.htm* file.</span></span>

<span data-ttu-id="ef492-190">*. WPP. targets* dosyası şuna benzemelidir:</span><span class="sxs-lookup"><span data-stu-id="ef492-190">The *.wpp.targets* file should resemble this:</span></span>

[!code-xml[Main](taking-web-applications-offline-with-web-deploy/samples/sample8.xml)]

<span data-ttu-id="ef492-191">Bu örnekte notun önemli noktaları bulunmaktadır:</span><span class="sxs-lookup"><span data-stu-id="ef492-191">These are the key points of note in this example:</span></span>

- <span data-ttu-id="ef492-192">**BeforeTargets** özniteliği, **Copyallfilestosinglefolderforpackage** hedefinden hemen önce yürütülmesi GEREKTIĞINI belirterek bu hedefi WPP 'ye ekler.</span><span class="sxs-lookup"><span data-stu-id="ef492-192">The **BeforeTargets** attribute inserts this target into the WPP by specifying that it should be executed immediately before the **CopyAllFilesToSingleFolderForPackage** target.</span></span>
- <span data-ttu-id="ef492-193">**Filesforpackagingfromproject** öğesi, *offline-template. htm\_app* to App\_, listeye eklendikçe dosyayı *çevrimdışı. htm* olarak yeniden adlandırmak için **destinationrelativepath** meta veri değerini kullanır.</span><span class="sxs-lookup"><span data-stu-id="ef492-193">The **FilesForPackagingFromProject** item uses the **DestinationRelativePath** metadata value to rename the file from *App\_offline-template.htm* to *App\_offline.htm* as it's added to the list.</span></span>

<span data-ttu-id="ef492-194">Sonraki yordamda, bu *. WPP. targets* dosyasını bir Web uygulaması projesine nasıl ekleyeceğiniz gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="ef492-194">The next procedure shows you how to add this *.wpp.targets* file to a web application project.</span></span>

<span data-ttu-id="ef492-195">**Bir Web dağıtım paketine. WPP. targets dosyası eklemek için**</span><span class="sxs-lookup"><span data-stu-id="ef492-195">**To add a .wpp.targets file to a web deployment package**</span></span>

1. <span data-ttu-id="ef492-196">Çözümünüzü Visual Studio 2010 ' de açın.</span><span class="sxs-lookup"><span data-stu-id="ef492-196">Open your solution in Visual Studio 2010.</span></span>
2. <span data-ttu-id="ef492-197">**Çözüm Gezgini** penceresinde, Web uygulaması proje düğümünüz (örneğin, **ContactManager. Mvc**) sağ tıklayın, **Ekle**' nin üzerine gelin ve ardından **Yeni öğe**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="ef492-197">In the **Solution Explorer** window, right-click your web application project node (for example, **ContactManager.Mvc**), point to **Add**, and then click **New Item**.</span></span>
3. <span data-ttu-id="ef492-198">**Yeni öğe Ekle** iletişim kutusunda, **XML dosya** şablonunu seçin.</span><span class="sxs-lookup"><span data-stu-id="ef492-198">In the **Add New Item** dialog box, select the **XML File** template.</span></span>
4. <span data-ttu-id="ef492-199">**Ad** kutusuna *[proje adı] \* \* *. WPP. targets** yazın (örneğin, **ContactManager. Mvc. WPP. targets**) ve ardından **Ekle**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="ef492-199">In the **Name** box, type *[project name]\*\*\*.wpp.targets*\* (for example, **ContactManager.Mvc.wpp.targets**), and then click **Add**.</span></span>

    ![](taking-web-applications-offline-with-web-deploy/_static/image4.png)

    > [!NOTE]
    > <span data-ttu-id="ef492-200">Projenin kök düğümüne yeni bir öğe eklerseniz, dosya proje dosyası ile aynı klasörde oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="ef492-200">If you add a new item to the root node of a project, the file is created in the same folder as the project file.</span></span> <span data-ttu-id="ef492-201">Bunu, Windows Gezgini 'nde klasörünü açarak doğrulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ef492-201">You can verify this by opening the folder in Windows Explorer.</span></span>
5. <span data-ttu-id="ef492-202">Dosyasında, daha önce açıklanan MSBuild işaretlemesini ekleyin.</span><span class="sxs-lookup"><span data-stu-id="ef492-202">In the file, add the MSBuild markup described previously.</span></span>

    [!code-xml[Main](taking-web-applications-offline-with-web-deploy/samples/sample9.xml)]
6. <span data-ttu-id="ef492-203">*[Proje adı]. WPP. targets* dosyasını kaydedin ve kapatın.</span><span class="sxs-lookup"><span data-stu-id="ef492-203">Save and close the *[project name].wpp.targets* file.</span></span>

<span data-ttu-id="ef492-204">Web uygulaması projenizi bir sonraki derleme ve paketleme sırasında, WPP *. WPP. targets* dosyasını otomatik olarak algılar.</span><span class="sxs-lookup"><span data-stu-id="ef492-204">The next time you build and package your web application project, the WPP will automatically detect the *.wpp.targets* file.</span></span> <span data-ttu-id="ef492-205">*App\_offline-Template. htm* dosyası, *uygulama\_çevrimdışı. htm*olarak elde edilen Web dağıtım paketine dahil edilecek.</span><span class="sxs-lookup"><span data-stu-id="ef492-205">The *App\_offline-template.htm* file will be included in the resulting web deployment package as *App\_offline.htm*.</span></span>

> [!NOTE]
> <span data-ttu-id="ef492-206">Dağıtımınız başarısız olursa, *App\_offline. htm* dosyası yerinde kalır ve uygulamanız çevrimdışı kalır.</span><span class="sxs-lookup"><span data-stu-id="ef492-206">If your deployment fails, the *App\_offline.htm* file will remain in place and your application will remain offline.</span></span> <span data-ttu-id="ef492-207">Bu genellikle istenen davranıştır.</span><span class="sxs-lookup"><span data-stu-id="ef492-207">This is typically the desired behavior.</span></span> <span data-ttu-id="ef492-208">Uygulamanızı tekrar çevrimiçi duruma getirmek için, uygulamayı Web sunucunuzdaki *çevrimdışı. htm dosyasını\_* silebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="ef492-208">To bring your application back online, you can delete the *App\_offline.htm* file from your web server.</span></span> <span data-ttu-id="ef492-209">Alternatif olarak, tüm hataları düzeltip başarılı bir dağıtım çalıştırırsanız, *App\_offline. htm* dosyası kaldırılır.</span><span class="sxs-lookup"><span data-stu-id="ef492-209">Alternatively, if you correct any errors and run a successful deployment, the *App\_offline.htm* file will be removed.</span></span>

## <a name="conclusion"></a><span data-ttu-id="ef492-210">Sonuç</span><span class="sxs-lookup"><span data-stu-id="ef492-210">Conclusion</span></span>

<span data-ttu-id="ef492-211">Bu konu, dağıtım işleminin başlangıcında bir *App\_çevrimdışı. htm* dosyası yayımlayarak ve bu dosyayı sonda kaldırarak bir dağıtım süresince bir Web uygulamasını çevrimdışına alma hakkında açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="ef492-211">This topic described how to take a web application offline for the duration of a deployment, by publishing an *App\_offline.htm* file to the destination server at the start of the deployment process and removing it at the end.</span></span> <span data-ttu-id="ef492-212">Ayrıca, bir Web dağıtım paketine bir *uygulama\_çevrimdışı. htm* dosyasının nasıl ekleneceğini de kapsar.</span><span class="sxs-lookup"><span data-stu-id="ef492-212">It also covered how to include an *App\_offline.htm* file in a web deployment package.</span></span>

## <a name="further-reading"></a><span data-ttu-id="ef492-213">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="ef492-213">Further Reading</span></span>

<span data-ttu-id="ef492-214">Paketleme ve dağıtım işlemi hakkında daha fazla bilgi için bkz. [Web uygulaması projelerini oluşturma ve paketleme](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md), [Web paketi dağıtımı için parametreleri yapılandırma](../web-deployment-in-the-enterprise/configuring-parameters-for-web-package-deployment.md)ve [Web paketleri dağıtma](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span><span class="sxs-lookup"><span data-stu-id="ef492-214">For more information on the packaging and deployment process, see [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md), [Configuring Parameters for Web Package Deployment](../web-deployment-in-the-enterprise/configuring-parameters-for-web-package-deployment.md), and [Deploying Web Packages](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span></span>

<span data-ttu-id="ef492-215">Web uygulamalarınızı, bu öğreticilerde açıklanan özel MSBuild proje dosyası yaklaşımını kullanmak yerine doğrudan Visual Studio 'dan yayımlarsanız, yayımlama sırasında uygulamanızı çevrimdışına almak için biraz farklı bir yaklaşım kullanmanız gerekir işle.</span><span class="sxs-lookup"><span data-stu-id="ef492-215">If you publish your web applications directly from Visual Studio, rather than using the custom MSBuild project file approach described in these tutorials, you'll need to use a slightly different approach to take your application offline during the publishing process.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ef492-216">[Önceki](excluding-files-and-folders-from-deployment.md)
> [İleri](running-windows-powershell-scripts-from-msbuild-project-files.md)</span><span class="sxs-lookup"><span data-stu-id="ef492-216">[Previous](excluding-files-and-folders-from-deployment.md)
[Next](running-windows-powershell-scripts-from-msbuild-project-files.md)</span></span>
