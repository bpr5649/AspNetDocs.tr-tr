---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments
title: Birden çok ortam için veritabanı dağıtımlarını özelleştirme | Microsoft Docs
author: jrjlee
description: 'Bu konu, bir veritabanına belirli bir hedef ortam özelliklerini dağıtım işleminin bir parçası olarak uyarlamak açıklar. Not: Konu th varsayar...'
ms.author: riande
ms.date: 05/04/2012
ms.assetid: a172979a-1318-4318-a9c6-4f9560d26267
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments
msc.type: authoredcontent
ms.openlocfilehash: 865e901618b48bc4bfdc6d7a3ca4e8868d4cb46b
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/09/2019
ms.locfileid: "59412989"
---
# <a name="customizing-database-deployments-for-multiple-environments"></a><span data-ttu-id="2c8d1-104">Birden Çok Ortam için Veritabanı Dağıtımlarını Özelleştirme</span><span class="sxs-lookup"><span data-stu-id="2c8d1-104">Customizing Database Deployments for Multiple Environments</span></span>

<span data-ttu-id="2c8d1-105">tarafından [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="2c8d1-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="2c8d1-106">PDF'yi indirin</span><span class="sxs-lookup"><span data-stu-id="2c8d1-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="2c8d1-107">Bu konu, bir veritabanına belirli bir hedef ortam özelliklerini dağıtım işleminin bir parçası olarak uyarlamak açıklar.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-107">This topic describes how to tailor the properties of a database to specific target environments as part of the deployment process.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="2c8d1-108">Bu konuda, MSBuild.exe ve VSDBCMD.exe kullanarak bir Visual Studio 2010 veritabanı projesi dağıtıyorsanız varsayılır.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-108">The topic assumes that you're deploying a Visual Studio 2010 database project using MSBuild.exe and VSDBCMD.exe.</span></span> <span data-ttu-id="2c8d1-109">Neden bu yaklaşımı tercih edebileceğiniz daha fazla bilgi için bkz: [Kurumsal Web dağıtımı](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md) ve [veritabanı projeleri dağıtma](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="2c8d1-109">For more information on why you might choose this approach, see [Web Deployment in the Enterprise](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md) and [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span>
> 
> 
> <span data-ttu-id="2c8d1-110">Birden çok hedefe bir veritabanı projesi dağıttığınızda, genellikle her hedef ortam için veritabanı dağıtım özellikleri özelleştirmek isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-110">When you deploy a database project to multiple destinations, you'll often want to customize the database deployment properties for each target environment.</span></span> <span data-ttu-id="2c8d1-111">Hazırlık veya üretim ortamlarında, verilerinizi korumak için artımlı güncelleştirmeler yapmak çok daha büyük olasılıkla olacaktır ancak örneğin, test ortamlarında, genellikle her dağıtım veritabanında yeniden.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-111">For example, in test environments you'd typically recreate the database on every deployment, whereas in staging or production environments you'd be a lot more likely to make incremental updates to preserve your data.</span></span>
> 
> <span data-ttu-id="2c8d1-112">Visual Studio 2010 veritabanı projesi, dağıtım ayarları bir dağıtım yapılandırma (.sqldeployment) dosyası içinde yer alır.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-112">In a Visual Studio 2010 database project, deployment settings are contained within a deployment configuration (.sqldeployment) file.</span></span> <span data-ttu-id="2c8d1-113">Bu konuda, ortama özgü dağıtım yapılandırma dosyaları oluşturma ve VSDBCMD parametre olarak kullanmak istediğiniz bir tane belirtmeniz gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-113">This topic will show you how to create environment-specific deployment configuration files and specify the one you want to use as a VSDBCMD parameter.</span></span>


<span data-ttu-id="2c8d1-114">Bu konuda öğreticileri, Fabrikam, Inc. adlı kurgusal bir şirkete kurumsal dağıtım gereksinimleri bir dizi parçası oluşturur. Bu öğretici serisinin kullanan örnek bir çözüm&#x2014; [Kişi Yöneticisi çözümü](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;karmaşıklık bir ASP.NET MVC 3 uygulama, bir Windows iletişim dahil olmak üzere, gerçekçi bir düzeyi ile bir web uygulaması temsil etmek için Foundation (WCF) hizmet ve bir veritabanı projesi.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-114">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="2c8d1-115">Bu öğreticileri temelini dağıtım yöntemi, açıklanan bölünmüş proje dosyası yaklaşım dayalı [proje dosyasını anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md), hangi yapı işlemi tarafından denetlenir içinde iki proje dosyaları&#x2014;içeren bir Her hedef ortam ve ortama özgü derleme ve dağıtım ayarları içeren bir geçerli yönergeleri oluşturun.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-115">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="2c8d1-116">Derleme sırasında ortama özgü proje dosyası derleme yönergeleri eksiksiz bir kümesini oluşturmak için ortam belirsiz proje dosyasına birleştirilir.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-116">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="2c8d1-117">Görev genel bakış</span><span class="sxs-lookup"><span data-stu-id="2c8d1-117">Task Overview</span></span>

<span data-ttu-id="2c8d1-118">Bu konu başlığı altında olduğunu varsayar:</span><span class="sxs-lookup"><span data-stu-id="2c8d1-118">This topic assumes that:</span></span>

- <span data-ttu-id="2c8d1-119">Çözüm dağıtımı, bölünmüş proje dosyası yaklaşımı açıklandığı gibi kullandığınız [proje dosyasını anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="2c8d1-119">You use the split project file approach to solution deployment, as described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="2c8d1-120">Veritabanı projenizi dağıtmak için proje dosyasından VSDBCMD açıklandığı çağrı [derleme işlemini anlama](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="2c8d1-120">You call VSDBCMD from the project file to deploy your database project, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

<span data-ttu-id="2c8d1-121">Veritabanı dağıtım özelliklerini hedef ortamlar arasında değişen destekleyen bir dağıtım sistemi oluşturmak için ihtiyacınız:</span><span class="sxs-lookup"><span data-stu-id="2c8d1-121">To create a deployment system that supports varying the database deployment properties between target environments, you'll need to:</span></span>

- <span data-ttu-id="2c8d1-122">Her hedef ortam için dağıtım yapılandırma (.sqldeployment) dosyası oluşturun.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-122">Create a deployment configuration (.sqldeployment) file for each target environment.</span></span>
- <span data-ttu-id="2c8d1-123">Dağıtım yapılandırma dosyası bir komut satırı anahtarı belirten bir VSDBCMD komutu oluşturun.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-123">Create a VSDBCMD command that specifies the deployment configuration file as a command-line switch.</span></span>
- <span data-ttu-id="2c8d1-124">VSDBCMD seçenekleri hedef ortam için uygun olacak şekilde bir Microsoft Build Engine (MSBuild) proje dosyasında VSDBCMD komut parametreleştirin.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-124">Parameterize the VSDBCMD command in a Microsoft Build Engine (MSBuild) project file, so that the VSDBCMD options are appropriate to the target environment.</span></span>

<span data-ttu-id="2c8d1-125">Bu konuda, bu yordamların her biri gerçekleştirme gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-125">This topic will show you how to perform each of these procedures.</span></span>

## <a name="creating-environment-specific-deployment-configuration-files"></a><span data-ttu-id="2c8d1-126">Ortama özgü dağıtım yapılandırma dosyaları oluşturma</span><span class="sxs-lookup"><span data-stu-id="2c8d1-126">Creating Environment-Specific Deployment Configuration Files</span></span>

<span data-ttu-id="2c8d1-127">Varsayılan olarak, bir veritabanı projesi adlı tek bir dağıtım yapılandırma dosyasını içeren *Database.sqldeployment*.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-127">By default, a database project contains a single deployment configuration file named *Database.sqldeployment*.</span></span> <span data-ttu-id="2c8d1-128">Visual Studio 2010'da bu dosyayı açmak için kullanabileceğiniz farklı dağıtım seçenekleri görebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="2c8d1-128">If you open this file in Visual Studio 2010, you can see the different deployment options that are available to you:</span></span>

- <span data-ttu-id="2c8d1-129">**Dağıtım karşılaştırma harmanlama**.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-129">**Deployment comparison collation**.</span></span> <span data-ttu-id="2c8d1-130">Bu veritabanı harmanlaması projenizin kullanılıp kullanılmayacağını seçmenize olanak tanır ( *kaynak* harmanlama) ya da hedef veritabanı harmanlaması ( *hedef* harmanlama).</span><span class="sxs-lookup"><span data-stu-id="2c8d1-130">This lets you choose whether to use the database collation of your project (the *source* collation) or the database collation of your destination server (the *target* collation).</span></span> <span data-ttu-id="2c8d1-131">Çoğu durumda, bir geliştirme dağıttığınızda veya test ortamı kaynak harmanlaması kullanmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-131">In most cases, you'll want to use the source collation when you deploy to a development or test environment.</span></span> <span data-ttu-id="2c8d1-132">Bir hazırlık veya üretim ortamına dağıtma yaparken, genellikle hedef harmanlamaya birlikte çalışabilirlik sorunları önlemek için değiştirilmemiş şekilde bırakmak istersiniz.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-132">When you deploy to a staging or production environment, you'll usually want to leave the target collation unchanged to avoid any interoperability issues.</span></span>
- <span data-ttu-id="2c8d1-133">**Veritabanı özellikleri dağıtma**.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-133">**Deploy database properties**.</span></span> <span data-ttu-id="2c8d1-134">Bu veritabanı özelliklerini uygulanıp uygulanmayacağını tanımlandığı şekilde seçmenizi sağlar *Database.sqlsettings* dosya.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-134">This lets you choose whether to apply the database properties, as defined in the *Database.sqlsettings* file.</span></span> <span data-ttu-id="2c8d1-135">Bir veritabanı ilk kez dağıttığınızda, veritabanı özelliklerini dağıtmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-135">When you deploy a database for the first time, you should deploy the database properties.</span></span> <span data-ttu-id="2c8d1-136">Varolan bir veritabanını güncelleştiriyorsanız özellikleri zaten yerinde olmalıdır ve yeniden dağıtmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-136">If you're updating an existing database, the properties should already be in place, and you shouldn't need to deploy them again.</span></span>
- <span data-ttu-id="2c8d1-137">**Veritabanı her zaman yeniden oluştur**.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-137">**Always re-create database**.</span></span> <span data-ttu-id="2c8d1-138">Hedef veritabanı dağıtma veya hedef veritabanı getirmek için artımlı şemanızı ile güncel değişiklikler her zaman yeniden oluşturulup oluşturulmayacağını seçin olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-138">This lets you choose whether to re-create the target database every time you deploy or make incremental changes to bring the target database up to date with your schema.</span></span> <span data-ttu-id="2c8d1-139">Veritabanı yeniden oluşturursanız, tüm veriler var olan veritabanını kaybedersiniz.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-139">If you re-create the database, you'll lose any data in the existing database.</span></span> <span data-ttu-id="2c8d1-140">Bu nedenle, genellikle bu ayar **false** dağıtımları için hazırlık veya üretim ortamları için.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-140">As such, you should usually set this to **false** for deployments to staging or production environments.</span></span>
- <span data-ttu-id="2c8d1-141">**Veri kaybı, artımlı dağıtım Block**.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-141">**Block incremental deployment if data loss might occur**.</span></span> <span data-ttu-id="2c8d1-142">Bu dağıtım veritabanı şeması değişiklik veri kaybına neden olacaksa durdurulup durdurulmayacağını seçmenize olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-142">This lets you choose whether deployment should stop if a change to the database schema will cause the loss of data.</span></span> <span data-ttu-id="2c8d1-143">Genellikle bu ayar **true** müdahale ve tüm önemli verileri korumaya fırsatı sunmak için bir üretim ortamında dağıtılacak.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-143">You typically set this to **true** for a deployment to a production environment, to give you the opportunity to intervene and protect any important data.</span></span> <span data-ttu-id="2c8d1-144">Ayarladıysanız **her zaman yeniden oluştur veritabanı** için **false**, bu ayarın hiçbir etkisi olmaz.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-144">If you have set **Always re-create database** to **false**, this setting will have no effect.</span></span>
- <span data-ttu-id="2c8d1-145">**Tek kullanıcı modunda dağıtım yürütün**.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-145">**Execute deployment in single-user mode**.</span></span> <span data-ttu-id="2c8d1-146">Bu genellikle geliştirme ve test ortamları bir sorun değildir.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-146">This is not usually an issue in development or test environments.</span></span> <span data-ttu-id="2c8d1-147">Ancak, genellikle bu ayar **true** dağıtımları için hazırlık veya üretim ortamları için.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-147">However, you should typically set this to **true** for deployments to staging or production environments.</span></span> <span data-ttu-id="2c8d1-148">Bu, kullanıcıların dağıtım devam ederken veritabanına değişiklikler yapmasını engeller.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-148">This prevents users from making changes to the database while the deployment is underway.</span></span>
- <span data-ttu-id="2c8d1-149">**Dağıtımdan önce veritabanını yedekleme**.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-149">**Back up database before deployment**.</span></span> <span data-ttu-id="2c8d1-150">Genellikle bu ayar **true** veri kaybına karşı önlem olarak, bir üretim ortamına dağıtırken.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-150">You typically set this to **true** when you deploy to a production environment, as a precaution against data loss.</span></span> <span data-ttu-id="2c8d1-151">Ayarlayın isteyebilirsiniz **true** dağıtırken bir hazırlama ortamına hazırlama veritabanınız çok fazla veri içeriyorsa.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-151">You may also want to set it to **true** when you deploy to a staging environment, if your staging database contains a lot of data.</span></span>
- <span data-ttu-id="2c8d1-152">**Hedef veritabanında olan ancak bir veritabanı projesinde olmayan nesneler için bırak deyimleri oluşturmasını**.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-152">**Generate DROP statements for objects that are in the target database but that are not in the database project**.</span></span> <span data-ttu-id="2c8d1-153">Çoğu durumda, bir veritabanına artımlı değişiklikler yapma integral ve önemli bir bölümü budur.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-153">In most cases, this is an integral and essential part of making incremental changes to a database.</span></span> <span data-ttu-id="2c8d1-154">Ayarladıysanız **her zaman yeniden oluştur veritabanı** için **false**, bu ayarın hiçbir etkisi olmaz.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-154">If you have set **Always re-create database** to **false**, this setting will have no effect.</span></span>
- <span data-ttu-id="2c8d1-155">**CLR türlerini güncelleştirmek için ALTER ASSEMBLY deyimleri kullanmayın**.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-155">**Do not use ALTER ASSEMBLY statements to update CLR types**.</span></span> <span data-ttu-id="2c8d1-156">Bu ayar, SQL Server ortak dil çalışma zamanı (CLR) türleri için yeni derleme sürümlerini nasıl güncelleştirmelisiniz belirler.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-156">This setting determines how SQL Server should update common language runtime (CLR) types to newer assembly versions.</span></span> <span data-ttu-id="2c8d1-157">Bu ayarlanmalıdır **false** Çoğu senaryoda.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-157">This should be set to **false** in most scenarios.</span></span>

<span data-ttu-id="2c8d1-158">Bu tabloda, farklı bir hedef ortamları için tipik dağıtım ayarları gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-158">This table shows typical deployment settings for different destination environments.</span></span> <span data-ttu-id="2c8d1-159">Ancak, ayarlarınızı tam gereksinimlerinize bağlı olarak farklı olabilir.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-159">However, your settings may be different depending on your exact requirements.</span></span>

|  | <span data-ttu-id="2c8d1-160">Geliştirici/Test</span><span class="sxs-lookup"><span data-stu-id="2c8d1-160">Developer/Test</span></span> | <span data-ttu-id="2c8d1-161">Hazırlama/tümleştirme</span><span class="sxs-lookup"><span data-stu-id="2c8d1-161">Staging/Integration</span></span> | <span data-ttu-id="2c8d1-162">Üretim</span><span class="sxs-lookup"><span data-stu-id="2c8d1-162">Production</span></span> |
| --- | --- | --- | --- |
| **<span data-ttu-id="2c8d1-163">Dağıtım karşılaştırma harmanlama</span><span class="sxs-lookup"><span data-stu-id="2c8d1-163">Deployment comparison collation</span></span>** | <span data-ttu-id="2c8d1-164">Kaynak</span><span class="sxs-lookup"><span data-stu-id="2c8d1-164">Source</span></span> | <span data-ttu-id="2c8d1-165">Hedef</span><span class="sxs-lookup"><span data-stu-id="2c8d1-165">Target</span></span> | <span data-ttu-id="2c8d1-166">Hedef</span><span class="sxs-lookup"><span data-stu-id="2c8d1-166">Target</span></span> |
| **<span data-ttu-id="2c8d1-167">Veritabanı özellikleri dağıtma</span><span class="sxs-lookup"><span data-stu-id="2c8d1-167">Deploy database properties</span></span>** | <span data-ttu-id="2c8d1-168">Doğru</span><span class="sxs-lookup"><span data-stu-id="2c8d1-168">True</span></span> | <span data-ttu-id="2c8d1-169">Yalnızca ilk kez</span><span class="sxs-lookup"><span data-stu-id="2c8d1-169">First time only</span></span> | <span data-ttu-id="2c8d1-170">Yalnızca ilk kez</span><span class="sxs-lookup"><span data-stu-id="2c8d1-170">First time only</span></span> |
| **<span data-ttu-id="2c8d1-171">Veritabanı her zaman yeniden oluştur</span><span class="sxs-lookup"><span data-stu-id="2c8d1-171">Always re-create database</span></span>** | <span data-ttu-id="2c8d1-172">Doğru</span><span class="sxs-lookup"><span data-stu-id="2c8d1-172">True</span></span> | <span data-ttu-id="2c8d1-173">False</span><span class="sxs-lookup"><span data-stu-id="2c8d1-173">False</span></span> | <span data-ttu-id="2c8d1-174">False</span><span class="sxs-lookup"><span data-stu-id="2c8d1-174">False</span></span> |
| **<span data-ttu-id="2c8d1-175">Veri kaybı, artımlı dağıtım engelle</span><span class="sxs-lookup"><span data-stu-id="2c8d1-175">Block incremental deployment if data loss might occur</span></span>** | <span data-ttu-id="2c8d1-176">False</span><span class="sxs-lookup"><span data-stu-id="2c8d1-176">False</span></span> | <span data-ttu-id="2c8d1-177">Belki de</span><span class="sxs-lookup"><span data-stu-id="2c8d1-177">Maybe</span></span> | <span data-ttu-id="2c8d1-178">Doğru</span><span class="sxs-lookup"><span data-stu-id="2c8d1-178">True</span></span> |
| **<span data-ttu-id="2c8d1-179">Tek kullanıcı modunda dağıtım betiği yürütün</span><span class="sxs-lookup"><span data-stu-id="2c8d1-179">Execute deployment script in single-user mode</span></span>** | <span data-ttu-id="2c8d1-180">False</span><span class="sxs-lookup"><span data-stu-id="2c8d1-180">False</span></span> | <span data-ttu-id="2c8d1-181">Doğru</span><span class="sxs-lookup"><span data-stu-id="2c8d1-181">True</span></span> | <span data-ttu-id="2c8d1-182">Doğru</span><span class="sxs-lookup"><span data-stu-id="2c8d1-182">True</span></span> |
| **<span data-ttu-id="2c8d1-183">Dağıtımdan önce veritabanını yedekleyin</span><span class="sxs-lookup"><span data-stu-id="2c8d1-183">Back up database before deployment</span></span>** | <span data-ttu-id="2c8d1-184">False</span><span class="sxs-lookup"><span data-stu-id="2c8d1-184">False</span></span> | <span data-ttu-id="2c8d1-185">Belki de</span><span class="sxs-lookup"><span data-stu-id="2c8d1-185">Maybe</span></span> | <span data-ttu-id="2c8d1-186">Doğru</span><span class="sxs-lookup"><span data-stu-id="2c8d1-186">True</span></span> |
| **<span data-ttu-id="2c8d1-187">Hedef veritabanında olan ancak bir veritabanı projesinde olmayan nesneler için bırak deyimleri oluştur</span><span class="sxs-lookup"><span data-stu-id="2c8d1-187">Generate DROP statements for objects that are in the target database but that are not in the database project</span></span>** | <span data-ttu-id="2c8d1-188">False</span><span class="sxs-lookup"><span data-stu-id="2c8d1-188">False</span></span> | <span data-ttu-id="2c8d1-189">Doğru</span><span class="sxs-lookup"><span data-stu-id="2c8d1-189">True</span></span> | <span data-ttu-id="2c8d1-190">Doğru</span><span class="sxs-lookup"><span data-stu-id="2c8d1-190">True</span></span> |
| **<span data-ttu-id="2c8d1-191">CLR türlerini güncelleştirmek için ALTER ASSEMBLY deyimleri kullanmayın</span><span class="sxs-lookup"><span data-stu-id="2c8d1-191">Do not use ALTER ASSEMBLY statements to update CLR types</span></span>** | <span data-ttu-id="2c8d1-192">False</span><span class="sxs-lookup"><span data-stu-id="2c8d1-192">False</span></span> | <span data-ttu-id="2c8d1-193">False</span><span class="sxs-lookup"><span data-stu-id="2c8d1-193">False</span></span> | <span data-ttu-id="2c8d1-194">False</span><span class="sxs-lookup"><span data-stu-id="2c8d1-194">False</span></span> |
  

> [!NOTE]
> <span data-ttu-id="2c8d1-195">Veritabanı dağıtım özellikleri ve ortam konuları hakkında daha fazla bilgi için bkz. [bir genel bakış, veritabanı projenizin ayarlarının](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx), [nasıl yapılır: Özellikleri yapılandırmak için dağıtım ayrıntıları](https://msdn.microsoft.com/library/dd172125.aspx), [oluşturmak ve veritabanı için bir yalıtılmış bir geliştirme ortamı dağıtmak](https://msdn.microsoft.com/library/dd193409.aspx), ve [oluşturun ve bir hazırlık veya üretim ortamınaveritabanlarıdağıtma](https://msdn.microsoft.com/library/dd193413.aspx).</span><span class="sxs-lookup"><span data-stu-id="2c8d1-195">For more information on database deployment properties and environment considerations, see [An Overview of Database Project Settings](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx), [How to: Configure Properties for Deployment Details](https://msdn.microsoft.com/library/dd172125.aspx), [Build and Deploy Database to an Isolated Development Environment](https://msdn.microsoft.com/library/dd193409.aspx), and [Build and Deploy Databases to a Staging or Production Environment](https://msdn.microsoft.com/library/dd193413.aspx).</span></span>


<span data-ttu-id="2c8d1-196">Veritabanı projesi birden fazla hedefe dağıtımını desteklemek için her hedef ortam için dağıtım yapılandırma dosyası oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-196">To support the deployment of a database project to multiple destinations, you should create a deployment configuration file for each target environment.</span></span>

**<span data-ttu-id="2c8d1-197">Bir ortama özgü yapılandırma dosyası oluşturmak için</span><span class="sxs-lookup"><span data-stu-id="2c8d1-197">To create an environment-specific configuration file</span></span>**

1. <span data-ttu-id="2c8d1-198">Visual Studio 2010 içinde **Çözüm Gezgini** penceresinde veritabanı projenize sağ tıklayın ve ardından **özellikleri**.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-198">In Visual Studio 2010, in the **Solution Explorer** window, right-click your database project, and then click **Properties**.</span></span>
2. <span data-ttu-id="2c8d1-199">Veritabanı Proje özellikleri sayfasında, üzerinde **Dağıt** sekmesinde **dağıtım yapılandırma dosyası** satır, tıklayın **yeni**.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-199">On the database project properties page, on the **Deploy** tab, in the **Deployment configuration file** row, click **New**.</span></span>

    ![](customizing-database-deployments-for-multiple-environments/_static/image1.png)
3. <span data-ttu-id="2c8d1-200">İçinde **yeni bir dağıtım yapılandırma dosyası** iletişim kutusunda, dosyayı anlamlı bir ad verin (örneğin, **TestEnvironment.sqldeployment**) ve ardından **Kaydet**.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-200">In the **New Deployment Configuration File** dialog box, give the file a meaningful name (for example, **TestEnvironment.sqldeployment**), and then click **Save**.</span></span>
4. <span data-ttu-id="2c8d1-201">Üzerinde *[Filename] \*\*\* .sqldeployment*\* sayfasında, hedef ortamınızın gereksinimlerini karşılamak için dağıtım özellikleri ayarlayın ve ardından dosyayı kaydedin.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-201">On the *[Filename]\*\*\*.sqldeployment*\* page, set the deployment properties to match the requirements of your destination environment, and then save the file.</span></span>

    ![](customizing-database-deployments-for-multiple-environments/_static/image2.png)
5. <span data-ttu-id="2c8d1-202">Veritabanı projenizde özellikleri klasörüne yeni dosya eklenir dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-202">Notice that the new file is added to the Properties folder in your database project.</span></span>

    ![](customizing-database-deployments-for-multiple-environments/_static/image3.png)

## <a name="specifying-the-deployment-configuration-file-in-vsdbcmd"></a><span data-ttu-id="2c8d1-203">Dağıtım yapılandırma dosyası içinde VSDBCMD belirtme</span><span class="sxs-lookup"><span data-stu-id="2c8d1-203">Specifying the Deployment Configuration File in VSDBCMD</span></span>

<span data-ttu-id="2c8d1-204">Visual Studio 2010 içinden çözüm yapılandırmaları (örneğin, hata ayıklama ve yayın) kullandığınızda, dağıtım yapılandırma dosyası her bir yapılandırma ile ilişkilendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-204">When you use solution configurations (like Debug and Release) within Visual Studio 2010, you can associate a deployment configuration file with each configuration.</span></span> <span data-ttu-id="2c8d1-205">Belirli bir yapılandırma derlerken, derleme işlemi yapılandırmaya özgü dağıtım yapılandırma dosyasına işaret eden özel yapılandırma dağıtım bildirimi dosyası oluşturur.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-205">When you build a particular configuration, the build process generates a configuration-specific deployment manifest file that points to the configuration-specific deployment configuration file.</span></span> <span data-ttu-id="2c8d1-206">Ancak, bu öğreticilerde açıklanan dağıtım yaklaşımı ana amaçları kişiler Visual Studio 2010 ve çözüm yapılandırmaları kullanmadan dağıtım işlemi denetleme olanağı vermek için biridir.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-206">However, one of the main aims of the approach to deployment described in these tutorials is to give people the ability to control the deployment process without using Visual Studio 2010 and solution configurations.</span></span> <span data-ttu-id="2c8d1-207">Bu yaklaşımda, çözüm yapılandırması hedef dağıtım ortamı bağımsız olarak aynıdır.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-207">In this approach, the solution configuration is the same regardless of the target deployment environment.</span></span> <span data-ttu-id="2c8d1-208">Belirli bir hedef ortam için veritabanı dağıtımınızı uyarlamak için dağıtım yapılandırma dosyası belirtmek için VSDBCMD komut satırı seçeneklerini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-208">To tailor your database deployment to a specific destination environment, you can use the VSDBCMD command-line options to specify your deployment configuration file.</span></span>

<span data-ttu-id="2c8d1-209">İçinde VSDBCMD bir dağıtım yapılandırma dosyası belirtmek için kullanın **p:/DeploymentConfigurationFile** geçin ve dosyanızı tam yolunu belirtin.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-209">To specify a deployment configuration file in your VSDBCMD, use the **p:/DeploymentConfigurationFile** switch and provide the full path to your file.</span></span> <span data-ttu-id="2c8d1-210">Bu, dağıtım bildirimini tanımlayan dağıtım yapılandırma dosyası geçersiz kılar.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-210">This will override the deployment configuration file that the deployment manifest identifies.</span></span> <span data-ttu-id="2c8d1-211">Örneğin, dağıtmak için bu VSDBCMD komut kullanabilirsiniz **ContactManager** veritabanı bir test ortamı için:</span><span class="sxs-lookup"><span data-stu-id="2c8d1-211">For example, you could use this VSDBCMD command to deploy the **ContactManager** database to a test environment:</span></span>


[!code-console[Main](customizing-database-deployments-for-multiple-environments/samples/sample1.cmd)]


> [!NOTE]
> <span data-ttu-id="2c8d1-212">Dosyayı çıkış dizinine kopyalarken yapı işlemi .sqldeployment dosyanızı yeniden unutmayın.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-212">Note that the build process may rename your .sqldeployment file when it copies the file to the output directory.</span></span>


<span data-ttu-id="2c8d1-213">Dağıtım öncesi veya dağıtım sonrası SQL betiğinizde SQL komutu değişkenleri kullanırsanız dağıtımınıza bir ortama özgü .sqlcmdvars dosyasını ilişkilendirmek için benzer bir yaklaşım kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-213">If you use SQL command variables in your pre-deployment or post-deployment SQL scripts, you can use a similar approach to associate an environment-specific .sqlcmdvars file with your deployment.</span></span> <span data-ttu-id="2c8d1-214">Bu durumda, kullandığınız **p:/SqlCommandVariablesFile** .sqlcmdvars dosyanızı tanımlamak için anahtar.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-214">In this case, you use the **p:/SqlCommandVariablesFile** switch to identify your .sqlcmdvars file.</span></span>

## <a name="running-the-vsdbcmd-command-from-an-msbuild-project-file"></a><span data-ttu-id="2c8d1-215">Bir MSBuild proje dosyasından VSDBCMD komutu çalıştırılıyor</span><span class="sxs-lookup"><span data-stu-id="2c8d1-215">Running the VSDBCMD Command from an MSBuild Project File</span></span>

<span data-ttu-id="2c8d1-216">Kullanarak bir MSBuild proje dosyası VSDBCMD komuttan çağırabilirsiniz bir **Exec** görev içinde bir MSBuild hedefi.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-216">You can invoke a VSDBCMD command from an MSBuild project file by using an **Exec** task within an MSBuild target.</span></span> <span data-ttu-id="2c8d1-217">En basit şekliyle, onu şöyle görünebilir:</span><span class="sxs-lookup"><span data-stu-id="2c8d1-217">In its simplest form, it would look like this:</span></span>


[!code-xml[Main](customizing-database-deployments-for-multiple-environments/samples/sample2.xml)]


- <span data-ttu-id="2c8d1-218">Uygulamada, proje dosyalarınızı okuma ve yeniden kullanmak, daha kolay hale getirmek için çeşitli komut satırı parametreleri depolamak için özellikler oluşturmak istersiniz.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-218">In practice, to make your project files easy to read and reuse, you'll want to create properties to store the various command-line parameters.</span></span> <span data-ttu-id="2c8d1-219">Bu, kullanıcılar bir ortama özgü proje dosyasında özellik değerlerini belirtin veya MSBuild komut satırından varsayılan değerlerini geçersiz kılması için kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-219">This makes it easier for users to provide property values in an environment-specific project file or to override default values from the MSBuild command line.</span></span> <span data-ttu-id="2c8d1-220">Açıklanan bölünmüş proje dosyası yaklaşımı kullanırsanız [proje dosyasını anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md), derleme yönergeleri ve iki dosya arasında özellikleri uygun şekilde bölme:</span><span class="sxs-lookup"><span data-stu-id="2c8d1-220">If you use the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), you should divide your build instructions and properties between the two files accordingly:</span></span>
- <span data-ttu-id="2c8d1-221">Dağıtım yapılandırma dosya adı, veritabanı bağlantı dizesi ve hedef veritabanı adı gibi ortama özgü ayarları ortama özgü proje dosyasında gitmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-221">Environment-specific settings, like the deployment configuration filename, the database connection string, and the target database name, should go in the environment-specific project file.</span></span>
- <span data-ttu-id="2c8d1-222">Evrensel bir proje dosyasında VSDBCMD komutu, Evrensel özeliklerini VSDBCMD yürütülebilir dosya konumunu gibi birlikte çalışan MSBuild hedefi gitmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-222">The MSBuild target that runs the VSDBCMD command, together with any universal properties like the location of the VSDBCMD executable, should go in the universal project file.</span></span>

<span data-ttu-id="2c8d1-223">Ayrıca, böylece oluşturulmuş ve kullanılmaya hazır .deploymanifest dosyasıdır VSDBCMD çağırma önce veritabanı projesini derleme emin olmalısınız.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-223">You should also ensure that you build the database project before you invoke VSDBCMD so that the .deploymanifest file is created and ready to use.</span></span> <span data-ttu-id="2c8d1-224">Bu yaklaşımın konusunda tam bir örnek gördüğünüz [derleme işlemini anlama](../web-deployment-in-the-enterprise/understanding-the-build-process.md), yol gösterir proje dosyalarında aracılığıyla [Kişi Yöneticisi örnek çözüm](../web-deployment-in-the-enterprise/the-contact-manager-solution.md).</span><span class="sxs-lookup"><span data-stu-id="2c8d1-224">You can see a full example of this approach in the topic [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), which walks you through the project files in the [Contact Manager sample solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="2c8d1-225">Sonuç</span><span class="sxs-lookup"><span data-stu-id="2c8d1-225">Conclusion</span></span>

<span data-ttu-id="2c8d1-226">MSBuild ve VSDBCMD kullanarak veritabanı projeleri dağıtırken farklı hedef ortamlarında veritabanı özelliklerini nasıl uyarlayabileceğiniz bu konuda açıklanan.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-226">This topic described how you can tailor database properties to different destination environments when you deploy database projects using MSBuild and VSDBCMD.</span></span> <span data-ttu-id="2c8d1-227">Bu yaklaşım, daha büyük, kurumsal sınıf çözümler bir parçası olarak veritabanı projeleri dağıtmak istediğinizde yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-227">This approach is useful when you need to deploy database projects as part of larger, enterprise-scale solutions.</span></span> <span data-ttu-id="2c8d1-228">Bu çözümler genellikle korumalı geliştirme ve test ortamları, hazırlama veya tümleştirme platformları ve üretim veya canlı ortamları gibi birden fazla hedefe dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-228">These solutions are often deployed to multiple destinations, like sandboxed development or test environments, staging or integration platforms, and production or live environments.</span></span> <span data-ttu-id="2c8d1-229">Bu hedef ortamların her birinde, genellikle bir dizi benzersiz veritabanı dağıtım özellikleri gerektirir.</span><span class="sxs-lookup"><span data-stu-id="2c8d1-229">Each of these target environments typically requires a unique set of database deployment properties.</span></span>

## <a name="further-reading"></a><span data-ttu-id="2c8d1-230">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="2c8d1-230">Further Reading</span></span>

<span data-ttu-id="2c8d1-231">Veritabanı projeleri VSDBCMD.exe kullanarak dağıtma hakkında daha fazla bilgi için bkz. [veritabanı projeleri dağıtma](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="2c8d1-231">For more information on deploying database projects using VSDBCMD.exe, see [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span> <span data-ttu-id="2c8d1-232">Dağıtım işlemini denetlemek için özel MSBuild proje dosyalarını kullanma hakkında daha fazla bilgi için bkz. [proje dosyasını anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md) ve [derleme işlemini anlama](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="2c8d1-232">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

<span data-ttu-id="2c8d1-233">Bu makaleler MSDN'de veritabanı dağıtımı hakkında daha fazla genel rehberlik sağlar:</span><span class="sxs-lookup"><span data-stu-id="2c8d1-233">These articles on MSDN provide more general guidance on database deployment:</span></span>

- [<span data-ttu-id="2c8d1-234">Veritabanı Proje ayarlarına genel bakış</span><span class="sxs-lookup"><span data-stu-id="2c8d1-234">An Overview of Database Project Settings</span></span>](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx)
- [<span data-ttu-id="2c8d1-235">Nasıl yapılır: Özellikleri yapılandırmak için dağıtım ayrıntıları</span><span class="sxs-lookup"><span data-stu-id="2c8d1-235">How to: Configure Properties for Deployment Details</span></span>](https://msdn.microsoft.com/library/dd172125.aspx)
- [<span data-ttu-id="2c8d1-236">Derleme ve veritabanlarını bir yalıtılmış geliştirme ortamına dağıtma</span><span class="sxs-lookup"><span data-stu-id="2c8d1-236">Build and Deploy Databases to an Isolated Development Environment</span></span>](https://msdn.microsoft.com/library/dd193409.aspx)
- [<span data-ttu-id="2c8d1-237">Derleme ve veritabanları için bir hazırlık veya üretim ortamına dağıtma</span><span class="sxs-lookup"><span data-stu-id="2c8d1-237">Build and Deploy Databases to a Staging or Production Environment</span></span>](https://msdn.microsoft.com/library/dd193413.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="2c8d1-238">[Önceki](performing-a-what-if-deployment.md)
> [İleri](deploying-database-role-memberships-to-test-environments.md)</span><span class="sxs-lookup"><span data-stu-id="2c8d1-238">[Previous](performing-a-what-if-deployment.md)
[Next](deploying-database-role-memberships-to-test-environments.md)</span></span>
