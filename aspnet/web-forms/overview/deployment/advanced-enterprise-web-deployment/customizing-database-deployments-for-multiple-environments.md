---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments
title: Birden çok ortam için veritabanı dağıtımlarını özelleştirme | Microsoft Docs
author: jrjlee
description: 'Bu konu, dağıtım sürecinin bir parçası olarak bir veritabanının özelliklerinin belirli hedef ortamlara nasıl yapılandırılacağını açıklamaktadır. Note: konu başlığı...'
ms.author: riande
ms.date: 05/04/2012
ms.assetid: a172979a-1318-4318-a9c6-4f9560d26267
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments
msc.type: authoredcontent
ms.openlocfilehash: 8ae8cb1a322afb95c5d2e8d5e73c7825c7b2fe5a
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78604029"
---
# <a name="customizing-database-deployments-for-multiple-environments"></a><span data-ttu-id="97386-104">Birden Çok Ortam için Veritabanı Dağıtımlarını Özelleştirme</span><span class="sxs-lookup"><span data-stu-id="97386-104">Customizing Database Deployments for Multiple Environments</span></span>

<span data-ttu-id="97386-105">[Jason Lee](https://github.com/jrjlee) tarafından</span><span class="sxs-lookup"><span data-stu-id="97386-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="97386-106">PDF 'YI indir</span><span class="sxs-lookup"><span data-stu-id="97386-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="97386-107">Bu konu, dağıtım sürecinin bir parçası olarak bir veritabanının özelliklerinin belirli hedef ortamlara nasıl yapılandırılacağını açıklamaktadır.</span><span class="sxs-lookup"><span data-stu-id="97386-107">This topic describes how to tailor the properties of a database to specific target environments as part of the deployment process.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="97386-108">Bu konuda, MSBuild. exe ve VSDBCMD. exe kullanarak bir Visual Studio 2010 veritabanı projesi dağıttığınız varsayılmaktadır.</span><span class="sxs-lookup"><span data-stu-id="97386-108">The topic assumes that you're deploying a Visual Studio 2010 database project using MSBuild.exe and VSDBCMD.exe.</span></span> <span data-ttu-id="97386-109">Bu yaklaşımı neden seçebilecek hakkında daha fazla bilgi için bkz. [Enterprise 'Ta Web dağıtımı](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md) ve [veritabanı projelerini dağıtma](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="97386-109">For more information on why you might choose this approach, see [Web Deployment in the Enterprise](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md) and [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span>
> 
> 
> <span data-ttu-id="97386-110">Birden çok hedefe bir veritabanı projesi dağıttığınızda, genellikle her bir hedef ortam için veritabanı dağıtım özelliklerini özelleştirmek isteyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="97386-110">When you deploy a database project to multiple destinations, you'll often want to customize the database deployment properties for each target environment.</span></span> <span data-ttu-id="97386-111">Örneğin, test ortamlarında veritabanını her dağıtımda genellikle yeniden oluşturmanız gerekir, hazırlık veya üretim ortamlarında verilerinizi korumak için artımlı güncelleştirmeler yapmanız çok daha olasıdır.</span><span class="sxs-lookup"><span data-stu-id="97386-111">For example, in test environments you'd typically recreate the database on every deployment, whereas in staging or production environments you'd be a lot more likely to make incremental updates to preserve your data.</span></span>
> 
> <span data-ttu-id="97386-112">Visual Studio 2010 veritabanı projesinde, dağıtım ayarları bir dağıtım yapılandırma (. sqldeployment) dosyası içinde yer alır.</span><span class="sxs-lookup"><span data-stu-id="97386-112">In a Visual Studio 2010 database project, deployment settings are contained within a deployment configuration (.sqldeployment) file.</span></span> <span data-ttu-id="97386-113">Bu konu, ortama özel dağıtım yapılandırma dosyalarını nasıl oluşturacağınız ve VSDBCMD parametresi olarak kullanmak istediğiniz bir parametreyi nasıl belirtmektir.</span><span class="sxs-lookup"><span data-stu-id="97386-113">This topic will show you how to create environment-specific deployment configuration files and specify the one you want to use as a VSDBCMD parameter.</span></span>

<span data-ttu-id="97386-114">Bu konu, Fabrikam, Inc adlı kurgusal bir şirketin Kurumsal Dağıtım gereksinimlerini temel alarak bir öğretici serisinin bir parçasını oluşturur. Bu öğretici serisi, bir ASP.NET MVC&#x2014;3 uygulaması, Windows Communication Foundation (WCF) hizmeti ve bir veritabanı projesi dahil, gerçekçi bir karmaşıklık düzeyine sahip bir Web uygulamasını temsil etmek üzere bir örnek çözüm olan [Contact Manager çözümünü](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;kullanır.</span><span class="sxs-lookup"><span data-stu-id="97386-114">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="97386-115">Bu öğreticilerin temelini oluşturan dağıtım yöntemi, derleme işleminin her hedef ortam için uygulanan derleme yönergelerini içeren ve ortama özel yapı ve dağıtım ayarlarını içeren iki proje&#x2014;dosyası tarafından kontrol edilen proje [dosyasını anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md)bölümünde açıklanan bölünmüş proje dosyası yaklaşımını temel alır.</span><span class="sxs-lookup"><span data-stu-id="97386-115">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="97386-116">Derleme zamanında, ortama özgü proje dosyası, derleme yönergelerinin tam bir kümesini oluşturmak için ortam agtik proje dosyası ile birleştirilir.</span><span class="sxs-lookup"><span data-stu-id="97386-116">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="97386-117">Göreve genel bakış</span><span class="sxs-lookup"><span data-stu-id="97386-117">Task Overview</span></span>

<span data-ttu-id="97386-118">Bu konuda aşağıdakiler varsayılmaktadır:</span><span class="sxs-lookup"><span data-stu-id="97386-118">This topic assumes that:</span></span>

- <span data-ttu-id="97386-119">Proje [dosyasını anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md)bölümünde açıklandığı gibi, çözüm dağıtımına bölünmüş proje dosyası yaklaşımını kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97386-119">You use the split project file approach to solution deployment, as described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="97386-120">[Yapı sürecini anlama](../web-deployment-in-the-enterprise/understanding-the-build-process.md)bölümünde açıklandığı gibi, veritabanı projenizi dağıtmak için, proje dosyasından VSDBCMD ' i çağırın.</span><span class="sxs-lookup"><span data-stu-id="97386-120">You call VSDBCMD from the project file to deploy your database project, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

<span data-ttu-id="97386-121">Hedef ortamlar arasında veritabanı dağıtım özelliklerini farklı şekilde destekleyen bir dağıtım sistemi oluşturmak için şunları yapmanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="97386-121">To create a deployment system that supports varying the database deployment properties between target environments, you'll need to:</span></span>

- <span data-ttu-id="97386-122">Her hedef ortam için bir dağıtım yapılandırma (. sqldeployment) dosyası oluşturun.</span><span class="sxs-lookup"><span data-stu-id="97386-122">Create a deployment configuration (.sqldeployment) file for each target environment.</span></span>
- <span data-ttu-id="97386-123">Dağıtım yapılandırma dosyasını bir komut satırı anahtarı olarak belirten bir VSDBCMD komutu oluşturun.</span><span class="sxs-lookup"><span data-stu-id="97386-123">Create a VSDBCMD command that specifies the deployment configuration file as a command-line switch.</span></span>
- <span data-ttu-id="97386-124">Bir Microsoft Build Engine (MSBuild) proje dosyasında VSDBCMD komutunu parametreleştirin, böylece VSDBCMD seçeneklerinin hedef ortama uygun olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="97386-124">Parameterize the VSDBCMD command in a Microsoft Build Engine (MSBuild) project file, so that the VSDBCMD options are appropriate to the target environment.</span></span>

<span data-ttu-id="97386-125">Bu konu, bu yordamların her birini nasıl gerçekleştirekullanacağınızı gösterir.</span><span class="sxs-lookup"><span data-stu-id="97386-125">This topic will show you how to perform each of these procedures.</span></span>

## <a name="creating-environment-specific-deployment-configuration-files"></a><span data-ttu-id="97386-126">Ortama özel dağıtım yapılandırma dosyaları oluşturma</span><span class="sxs-lookup"><span data-stu-id="97386-126">Creating Environment-Specific Deployment Configuration Files</span></span>

<span data-ttu-id="97386-127">Varsayılan olarak, bir veritabanı projesi *Database. sqldeployment*adlı tek bir dağıtım yapılandırma dosyası içerir.</span><span class="sxs-lookup"><span data-stu-id="97386-127">By default, a database project contains a single deployment configuration file named *Database.sqldeployment*.</span></span> <span data-ttu-id="97386-128">Bu dosyayı Visual Studio 2010 ' de açarsanız, kullanabileceğiniz farklı dağıtım seçeneklerini görebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="97386-128">If you open this file in Visual Studio 2010, you can see the different deployment options that are available to you:</span></span>

- <span data-ttu-id="97386-129">**Dağıtım karşılaştırma harmanlaması**.</span><span class="sxs-lookup"><span data-stu-id="97386-129">**Deployment comparison collation**.</span></span> <span data-ttu-id="97386-130">Bu, projenizin veritabanı harmanlamasını ( *kaynak* harmanlama) veya hedef sunucunuzun veritabanı harmanlamasını ( *hedef* harmanlama) kullanmayı seçmenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="97386-130">This lets you choose whether to use the database collation of your project (the *source* collation) or the database collation of your destination server (the *target* collation).</span></span> <span data-ttu-id="97386-131">Çoğu durumda, bir geliştirme veya test ortamına dağıtırken kaynak harmanlamayı kullanmak isteyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="97386-131">In most cases, you'll want to use the source collation when you deploy to a development or test environment.</span></span> <span data-ttu-id="97386-132">Bir hazırlık veya üretim ortamına dağıtırken, birlikte çalışabilirlik sorunlarından kaçınmak için genellikle hedef harmanlamanın değişmeden kalmasını istersiniz.</span><span class="sxs-lookup"><span data-stu-id="97386-132">When you deploy to a staging or production environment, you'll usually want to leave the target collation unchanged to avoid any interoperability issues.</span></span>
- <span data-ttu-id="97386-133">**Veritabanı özelliklerini dağıtın**.</span><span class="sxs-lookup"><span data-stu-id="97386-133">**Deploy database properties**.</span></span> <span data-ttu-id="97386-134">Bu, Database *. sqlsettings* dosyasında tanımlandığı şekilde veritabanı özelliklerinin uygulanıp uygulanmayacağını seçmenize olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="97386-134">This lets you choose whether to apply the database properties, as defined in the *Database.sqlsettings* file.</span></span> <span data-ttu-id="97386-135">Bir veritabanını ilk kez dağıttığınızda, veritabanı özelliklerini dağıtmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="97386-135">When you deploy a database for the first time, you should deploy the database properties.</span></span> <span data-ttu-id="97386-136">Var olan bir veritabanını güncelleştiriyorsanız özellikler zaten yerinde olmalıdır ve bunları yeniden dağıtmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="97386-136">If you're updating an existing database, the properties should already be in place, and you shouldn't need to deploy them again.</span></span>
- <span data-ttu-id="97386-137">**Veritabanını her zaman yeniden oluşturun**.</span><span class="sxs-lookup"><span data-stu-id="97386-137">**Always re-create database**.</span></span> <span data-ttu-id="97386-138">Bu, hedef veritabanını her dağıttığınız zaman yeniden oluşturmayı seçmenizi veya hedef veritabanını şemanıza göre güncel hale getirmek için artımlı değişiklikler yapmanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="97386-138">This lets you choose whether to re-create the target database every time you deploy or make incremental changes to bring the target database up to date with your schema.</span></span> <span data-ttu-id="97386-139">Veritabanını yeniden oluşturursanız, var olan veritabanındaki tüm verileri kaybedersiniz.</span><span class="sxs-lookup"><span data-stu-id="97386-139">If you re-create the database, you'll lose any data in the existing database.</span></span> <span data-ttu-id="97386-140">Bu nedenle, hazırlık veya üretim ortamları için dağıtımları genellikle **false** olarak ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="97386-140">As such, you should usually set this to **false** for deployments to staging or production environments.</span></span>
- <span data-ttu-id="97386-141">**Veri kaybı oluşmayabilir, artımlı dağıtımı engelleyin**.</span><span class="sxs-lookup"><span data-stu-id="97386-141">**Block incremental deployment if data loss might occur**.</span></span> <span data-ttu-id="97386-142">Bu, veritabanı şemasında yapılan bir değişiklik veri kaybına neden olursa dağıtımın durdurulup durdurulmayacağını seçmenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="97386-142">This lets you choose whether deployment should stop if a change to the database schema will cause the loss of data.</span></span> <span data-ttu-id="97386-143">Genellikle bunu bir üretim ortamına dağıtım için **doğru** olarak ayarlarsanız, önemli verileri müdahale etmek ve korumak için bir fırsat sağlar.</span><span class="sxs-lookup"><span data-stu-id="97386-143">You typically set this to **true** for a deployment to a production environment, to give you the opportunity to intervene and protect any important data.</span></span> <span data-ttu-id="97386-144">**Veritabanını her zaman false olarak yeniden oluşturursanız** , bu ayarınhiçbir etkisi olmayacaktır.</span><span class="sxs-lookup"><span data-stu-id="97386-144">If you have set **Always re-create database** to **false**, this setting will have no effect.</span></span>
- <span data-ttu-id="97386-145">**Dağıtımı tek kullanıcı modunda yürütün**.</span><span class="sxs-lookup"><span data-stu-id="97386-145">**Execute deployment in single-user mode**.</span></span> <span data-ttu-id="97386-146">Bu genellikle geliştirme veya test ortamlarındaki bir sorun değildir.</span><span class="sxs-lookup"><span data-stu-id="97386-146">This is not usually an issue in development or test environments.</span></span> <span data-ttu-id="97386-147">Ancak, hazırlık veya üretim ortamları için dağıtım için genellikle bunu **true** olarak ayarlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="97386-147">However, you should typically set this to **true** for deployments to staging or production environments.</span></span> <span data-ttu-id="97386-148">Bu, dağıtım devam ederken kullanıcıların veritabanında değişiklik yapmalarını önler.</span><span class="sxs-lookup"><span data-stu-id="97386-148">This prevents users from making changes to the database while the deployment is underway.</span></span>
- <span data-ttu-id="97386-149">**Dağıtımdan önce veritabanını yedekleyin**.</span><span class="sxs-lookup"><span data-stu-id="97386-149">**Back up database before deployment**.</span></span> <span data-ttu-id="97386-150">Bunu, veri kaybına karşı bir önlem olarak bir üretim ortamına dağıtırken, genellikle **doğru** olarak ayarlarsınız.</span><span class="sxs-lookup"><span data-stu-id="97386-150">You typically set this to **true** when you deploy to a production environment, as a precaution against data loss.</span></span> <span data-ttu-id="97386-151">Hazırlama veritabanınız çok miktarda veri içeriyorsa, hazırlama ortamına dağıtırken bunu **true** olarak ayarlamak da isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97386-151">You may also want to set it to **true** when you deploy to a staging environment, if your staging database contains a lot of data.</span></span>
- <span data-ttu-id="97386-152">**Hedef veritabanındaki, ancak veritabanı projesinde olmayan nesneler IÇIN drop deyimleri üretin**.</span><span class="sxs-lookup"><span data-stu-id="97386-152">**Generate DROP statements for objects that are in the target database but that are not in the database project**.</span></span> <span data-ttu-id="97386-153">Çoğu durumda bu, bir veritabanında artımlı değişiklikler yapmanın tam ve önemli bir parçasıdır.</span><span class="sxs-lookup"><span data-stu-id="97386-153">In most cases, this is an integral and essential part of making incremental changes to a database.</span></span> <span data-ttu-id="97386-154">**Veritabanını her zaman false olarak yeniden oluşturursanız** , bu ayarınhiçbir etkisi olmayacaktır.</span><span class="sxs-lookup"><span data-stu-id="97386-154">If you have set **Always re-create database** to **false**, this setting will have no effect.</span></span>
- <span data-ttu-id="97386-155">**CLR türlerini güncelleştirmek IÇIN alter assembly deyimlerini kullanmayın**.</span><span class="sxs-lookup"><span data-stu-id="97386-155">**Do not use ALTER ASSEMBLY statements to update CLR types**.</span></span> <span data-ttu-id="97386-156">Bu ayar, SQL Server ortak dil çalışma zamanı (CLR) türlerini daha yeni derleme sürümlerine güncelleştirme şeklini belirler.</span><span class="sxs-lookup"><span data-stu-id="97386-156">This setting determines how SQL Server should update common language runtime (CLR) types to newer assembly versions.</span></span> <span data-ttu-id="97386-157">Çoğu senaryoda bu, **false** olarak ayarlanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="97386-157">This should be set to **false** in most scenarios.</span></span>

<span data-ttu-id="97386-158">Bu tabloda, farklı hedef ortamları için tipik dağıtım ayarları gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="97386-158">This table shows typical deployment settings for different destination environments.</span></span> <span data-ttu-id="97386-159">Ancak, ayarlarınız tam gereksinimlerinize bağlı olarak farklı olabilir.</span><span class="sxs-lookup"><span data-stu-id="97386-159">However, your settings may be different depending on your exact requirements.</span></span>

|  | <span data-ttu-id="97386-160">Geliştirici/test</span><span class="sxs-lookup"><span data-stu-id="97386-160">Developer/Test</span></span> | <span data-ttu-id="97386-161">Hazırlama/tümleştirme</span><span class="sxs-lookup"><span data-stu-id="97386-161">Staging/Integration</span></span> | <span data-ttu-id="97386-162">Üretim</span><span class="sxs-lookup"><span data-stu-id="97386-162">Production</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="97386-163">**Dağıtım karşılaştırma harmanlama**</span><span class="sxs-lookup"><span data-stu-id="97386-163">**Deployment comparison collation**</span></span> | <span data-ttu-id="97386-164">Kaynak</span><span class="sxs-lookup"><span data-stu-id="97386-164">Source</span></span> | <span data-ttu-id="97386-165">Hedef</span><span class="sxs-lookup"><span data-stu-id="97386-165">Target</span></span> | <span data-ttu-id="97386-166">Hedef</span><span class="sxs-lookup"><span data-stu-id="97386-166">Target</span></span> |
| <span data-ttu-id="97386-167">**Veritabanı özelliklerini dağıtma**</span><span class="sxs-lookup"><span data-stu-id="97386-167">**Deploy database properties**</span></span> | <span data-ttu-id="97386-168">Doğru</span><span class="sxs-lookup"><span data-stu-id="97386-168">True</span></span> | <span data-ttu-id="97386-169">Yalnızca ilk kez</span><span class="sxs-lookup"><span data-stu-id="97386-169">First time only</span></span> | <span data-ttu-id="97386-170">Yalnızca ilk kez</span><span class="sxs-lookup"><span data-stu-id="97386-170">First time only</span></span> |
| <span data-ttu-id="97386-171">**Veritabanını her zaman yeniden oluştur**</span><span class="sxs-lookup"><span data-stu-id="97386-171">**Always re-create database**</span></span> | <span data-ttu-id="97386-172">Doğru</span><span class="sxs-lookup"><span data-stu-id="97386-172">True</span></span> | <span data-ttu-id="97386-173">False</span><span class="sxs-lookup"><span data-stu-id="97386-173">False</span></span> | <span data-ttu-id="97386-174">False</span><span class="sxs-lookup"><span data-stu-id="97386-174">False</span></span> |
| <span data-ttu-id="97386-175">**Veri kaybı oluşmayabilir, artımlı Dağıtımı engelle**</span><span class="sxs-lookup"><span data-stu-id="97386-175">**Block incremental deployment if data loss might occur**</span></span> | <span data-ttu-id="97386-176">False</span><span class="sxs-lookup"><span data-stu-id="97386-176">False</span></span> | <span data-ttu-id="97386-177">Belki de</span><span class="sxs-lookup"><span data-stu-id="97386-177">Maybe</span></span> | <span data-ttu-id="97386-178">Doğru</span><span class="sxs-lookup"><span data-stu-id="97386-178">True</span></span> |
| <span data-ttu-id="97386-179">**Dağıtım betiğini tek kullanıcılı modda yürütme**</span><span class="sxs-lookup"><span data-stu-id="97386-179">**Execute deployment script in single-user mode**</span></span> | <span data-ttu-id="97386-180">False</span><span class="sxs-lookup"><span data-stu-id="97386-180">False</span></span> | <span data-ttu-id="97386-181">Doğru</span><span class="sxs-lookup"><span data-stu-id="97386-181">True</span></span> | <span data-ttu-id="97386-182">Doğru</span><span class="sxs-lookup"><span data-stu-id="97386-182">True</span></span> |
| <span data-ttu-id="97386-183">**Dağıtımdan önce veritabanını yedekleme**</span><span class="sxs-lookup"><span data-stu-id="97386-183">**Back up database before deployment**</span></span> | <span data-ttu-id="97386-184">False</span><span class="sxs-lookup"><span data-stu-id="97386-184">False</span></span> | <span data-ttu-id="97386-185">Belki de</span><span class="sxs-lookup"><span data-stu-id="97386-185">Maybe</span></span> | <span data-ttu-id="97386-186">Doğru</span><span class="sxs-lookup"><span data-stu-id="97386-186">True</span></span> |
| <span data-ttu-id="97386-187">**Hedef veritabanındaki, ancak veritabanı projesinde olmayan nesneler için DROP deyimleri oluşturma**</span><span class="sxs-lookup"><span data-stu-id="97386-187">**Generate DROP statements for objects that are in the target database but that are not in the database project**</span></span> | <span data-ttu-id="97386-188">False</span><span class="sxs-lookup"><span data-stu-id="97386-188">False</span></span> | <span data-ttu-id="97386-189">Doğru</span><span class="sxs-lookup"><span data-stu-id="97386-189">True</span></span> | <span data-ttu-id="97386-190">Doğru</span><span class="sxs-lookup"><span data-stu-id="97386-190">True</span></span> |
| <span data-ttu-id="97386-191">**ALTER ASSEMBLY deyimlerini kullanarak CLR türlerini güncelleştirme**</span><span class="sxs-lookup"><span data-stu-id="97386-191">**Do not use ALTER ASSEMBLY statements to update CLR types**</span></span> | <span data-ttu-id="97386-192">False</span><span class="sxs-lookup"><span data-stu-id="97386-192">False</span></span> | <span data-ttu-id="97386-193">False</span><span class="sxs-lookup"><span data-stu-id="97386-193">False</span></span> | <span data-ttu-id="97386-194">False</span><span class="sxs-lookup"><span data-stu-id="97386-194">False</span></span> |

> [!NOTE]
> <span data-ttu-id="97386-195">Veritabanı dağıtım özellikleri ve ortam konuları hakkında daha fazla bilgi için, bkz. [veritabanı proje ayarlarına genel bakış](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx), [nasıl yapılır: dağıtım ayrıntıları için özellikleri yapılandırma](https://msdn.microsoft.com/library/dd172125.aspx), [yalıtılmış bir geliştirme ortamında veritabanı oluşturma ve dağıtma](https://msdn.microsoft.com/library/dd193409.aspx)ve [veritabanlarını bir hazırlama veya üretim ortamında yapılandırma ve dağıtma](https://msdn.microsoft.com/library/dd193413.aspx).</span><span class="sxs-lookup"><span data-stu-id="97386-195">For more information on database deployment properties and environment considerations, see [An Overview of Database Project Settings](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx), [How to: Configure Properties for Deployment Details](https://msdn.microsoft.com/library/dd172125.aspx), [Build and Deploy Database to an Isolated Development Environment](https://msdn.microsoft.com/library/dd193409.aspx), and [Build and Deploy Databases to a Staging or Production Environment](https://msdn.microsoft.com/library/dd193413.aspx).</span></span>

<span data-ttu-id="97386-196">Bir veritabanı projesinin birden çok hedefe dağıtımını desteklemek için, her hedef ortam için bir dağıtım yapılandırma dosyası oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="97386-196">To support the deployment of a database project to multiple destinations, you should create a deployment configuration file for each target environment.</span></span>

<span data-ttu-id="97386-197">**Ortama özgü bir yapılandırma dosyası oluşturmak için**</span><span class="sxs-lookup"><span data-stu-id="97386-197">**To create an environment-specific configuration file**</span></span>

1. <span data-ttu-id="97386-198">Visual Studio 2010 ' de, **Çözüm Gezgini** penceresinde, veritabanı projenize sağ tıklayın ve ardından **Özellikler**' e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="97386-198">In Visual Studio 2010, in the **Solution Explorer** window, right-click your database project, and then click **Properties**.</span></span>
2. <span data-ttu-id="97386-199">Veritabanı projesi özellikleri sayfasında, **Dağıt** sekmesinde, **dağıtım yapılandırma dosyası** satırında **Yeni**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="97386-199">On the database project properties page, on the **Deploy** tab, in the **Deployment configuration file** row, click **New**.</span></span>

    ![](customizing-database-deployments-for-multiple-environments/_static/image1.png)
3. <span data-ttu-id="97386-200">**Yeni dağıtım yapılandırma dosyası** iletişim kutusunda dosyaya anlamlı bir ad verin (örneğin, **TestEnvironment. sqldeployment**) ve ardından **Kaydet**' e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="97386-200">In the **New Deployment Configuration File** dialog box, give the file a meaningful name (for example, **TestEnvironment.sqldeployment**), and then click **Save**.</span></span>
4. <span data-ttu-id="97386-201">*[Filename] \* \* *. sqldeployment** sayfasında, dağıtım özelliklerini hedef ortamınızın gereksinimleriyle eşleşecek şekilde ayarlayın ve dosyayı kaydedin.</span><span class="sxs-lookup"><span data-stu-id="97386-201">On the *[Filename]\*\*\*.sqldeployment*\* page, set the deployment properties to match the requirements of your destination environment, and then save the file.</span></span>

    ![](customizing-database-deployments-for-multiple-environments/_static/image2.png)
5. <span data-ttu-id="97386-202">Yeni dosya, veritabanı projenizdeki Özellikler klasörüne eklendiğine dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="97386-202">Notice that the new file is added to the Properties folder in your database project.</span></span>

    ![](customizing-database-deployments-for-multiple-environments/_static/image3.png)

## <a name="specifying-the-deployment-configuration-file-in-vsdbcmd"></a><span data-ttu-id="97386-203">VSDBCMD 'de dağıtım yapılandırma dosyasını belirtme</span><span class="sxs-lookup"><span data-stu-id="97386-203">Specifying the Deployment Configuration File in VSDBCMD</span></span>

<span data-ttu-id="97386-204">Visual Studio 2010 içinde çözüm yapılandırmalarını (hata ayıklama ve yayın gibi) kullandığınızda, bir dağıtım yapılandırma dosyasını her yapılandırmayla ilişkilendirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97386-204">When you use solution configurations (like Debug and Release) within Visual Studio 2010, you can associate a deployment configuration file with each configuration.</span></span> <span data-ttu-id="97386-205">Belirli bir yapılandırma oluşturduğunuzda, yapı işlemi yapılandırmaya özgü dağıtım yapılandırma dosyasını işaret eden yapılandırmaya özgü bir dağıtım bildirim dosyası oluşturur.</span><span class="sxs-lookup"><span data-stu-id="97386-205">When you build a particular configuration, the build process generates a configuration-specific deployment manifest file that points to the configuration-specific deployment configuration file.</span></span> <span data-ttu-id="97386-206">Bununla birlikte, bu öğreticilerde açıklanan, dağıtıma yönelik yaklaşımlardan biri, kişilere Visual Studio 2010 ve çözüm yapılandırmalarına gerek kalmadan dağıtım sürecini denetleme olanağı vermektir.</span><span class="sxs-lookup"><span data-stu-id="97386-206">However, one of the main aims of the approach to deployment described in these tutorials is to give people the ability to control the deployment process without using Visual Studio 2010 and solution configurations.</span></span> <span data-ttu-id="97386-207">Bu yaklaşımda, çözüm yapılandırması, hedef dağıtım ortamından bağımsız olarak aynıdır.</span><span class="sxs-lookup"><span data-stu-id="97386-207">In this approach, the solution configuration is the same regardless of the target deployment environment.</span></span> <span data-ttu-id="97386-208">Veritabanı dağıtımınızı belirli bir hedef ortama uyarlamak için, dağıtım yapılandırma dosyanızı belirtmek üzere VSDBCMD komut satırı seçeneklerini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97386-208">To tailor your database deployment to a specific destination environment, you can use the VSDBCMD command-line options to specify your deployment configuration file.</span></span>

<span data-ttu-id="97386-209">VSDBCMD dosyanızda bir dağıtım yapılandırma dosyası belirtmek için **p:/DeploymentConfigurationFile** anahtarını kullanın ve dosyanızın tam yolunu sağlayın.</span><span class="sxs-lookup"><span data-stu-id="97386-209">To specify a deployment configuration file in your VSDBCMD, use the **p:/DeploymentConfigurationFile** switch and provide the full path to your file.</span></span> <span data-ttu-id="97386-210">Bu, dağıtım bildiriminin tanımladığı dağıtım yapılandırma dosyasını geçersiz kılar.</span><span class="sxs-lookup"><span data-stu-id="97386-210">This will override the deployment configuration file that the deployment manifest identifies.</span></span> <span data-ttu-id="97386-211">Örneğin, **ContactManager** veritabanını bir test ortamına dağıtmak IÇIN bu VSDBCMD komutunu kullanabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="97386-211">For example, you could use this VSDBCMD command to deploy the **ContactManager** database to a test environment:</span></span>

[!code-console[Main](customizing-database-deployments-for-multiple-environments/samples/sample1.cmd)]

> [!NOTE]
> <span data-ttu-id="97386-212">Yapı işleminin dosyayı çıkış dizinine kopyaladığında. sqldeployment dosyanızı yeniden adlandırabileceğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="97386-212">Note that the build process may rename your .sqldeployment file when it copies the file to the output directory.</span></span>

<span data-ttu-id="97386-213">Dağıtım öncesi veya dağıtım sonrası SQL betiklerinizde SQL komut değişkenlerini kullanırsanız, ortama özgü bir. sqlcmdvars dosyasını dağıtımınızla ilişkilendirmek için benzer bir yaklaşım kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97386-213">If you use SQL command variables in your pre-deployment or post-deployment SQL scripts, you can use a similar approach to associate an environment-specific .sqlcmdvars file with your deployment.</span></span> <span data-ttu-id="97386-214">Bu durumda,. sqlcmdvars dosyanızı tanımlamak için **p:/SqlCommandVariablesFile** anahtarını kullanın.</span><span class="sxs-lookup"><span data-stu-id="97386-214">In this case, you use the **p:/SqlCommandVariablesFile** switch to identify your .sqlcmdvars file.</span></span>

## <a name="running-the-vsdbcmd-command-from-an-msbuild-project-file"></a><span data-ttu-id="97386-215">Bir MSBuild proje dosyasından VSDBCMD komutunu çalıştırma</span><span class="sxs-lookup"><span data-stu-id="97386-215">Running the VSDBCMD Command from an MSBuild Project File</span></span>

<span data-ttu-id="97386-216">MSBuild hedefi içindeki bir **Exec** görevi kullanarak MSBuild proje dosyasından VSDBCMD komutunu çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97386-216">You can invoke a VSDBCMD command from an MSBuild project file by using an **Exec** task within an MSBuild target.</span></span> <span data-ttu-id="97386-217">En basit biçiminde şöyle görünür:</span><span class="sxs-lookup"><span data-stu-id="97386-217">In its simplest form, it would look like this:</span></span>

[!code-xml[Main](customizing-database-deployments-for-multiple-environments/samples/sample2.xml)]

- <span data-ttu-id="97386-218">Uygulamada, proje dosyalarınızın okunmasını ve yeniden kullanılmasını kolaylaştırmak için çeşitli komut satırı parametrelerini depolamak üzere özellikler oluşturmak isteyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="97386-218">In practice, to make your project files easy to read and reuse, you'll want to create properties to store the various command-line parameters.</span></span> <span data-ttu-id="97386-219">Bu, kullanıcıların ortama özgü bir proje dosyasında özellik değerleri sağlamasını veya varsayılan değerleri MSBuild komut satırından geçersiz kılmasını kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="97386-219">This makes it easier for users to provide property values in an environment-specific project file or to override default values from the MSBuild command line.</span></span> <span data-ttu-id="97386-220">[Proje dosyasını anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md)bölümünde açıklanan bölünmüş proje dosyası yaklaşımını kullanırsanız, derleme yönergelerinizi ve özelliklerini iki Dosya arasında uygun şekilde bölmeniz gerekir:</span><span class="sxs-lookup"><span data-stu-id="97386-220">If you use the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), you should divide your build instructions and properties between the two files accordingly:</span></span>
- <span data-ttu-id="97386-221">Dağıtım yapılandırma dosya adı, veritabanı bağlantı dizesi ve hedef veritabanı adı gibi ortama özgü ayarların ortama özgü proje dosyasında olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="97386-221">Environment-specific settings, like the deployment configuration filename, the database connection string, and the target database name, should go in the environment-specific project file.</span></span>
- <span data-ttu-id="97386-222">VSDBCMD komutunu çalıştıran MSBuild hedefi, VSDBCMD yürütülebilir dosyasının konumu gibi evrensel özelliklerle birlikte, evrensel proje dosyasına gitmelidir.</span><span class="sxs-lookup"><span data-stu-id="97386-222">The MSBuild target that runs the VSDBCMD command, together with any universal properties like the location of the VSDBCMD executable, should go in the universal project file.</span></span>

<span data-ttu-id="97386-223">Ayrıca,. DeployManifest dosyasının oluşturulup kullanıma hazırlanabilmesi için VSDBCMD ' i çağırmadan önce veritabanı projesini oluşturduğunuzdan emin olmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="97386-223">You should also ensure that you build the database project before you invoke VSDBCMD so that the .deploymanifest file is created and ready to use.</span></span> <span data-ttu-id="97386-224">Bu yaklaşımın tam bir örneğini, [Contact Manager örnek çözümünde](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)proje dosyaları boyunca size yol gösteren [derleme işlemini anlama](../web-deployment-in-the-enterprise/understanding-the-build-process.md)konusunda görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="97386-224">You can see a full example of this approach in the topic [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), which walks you through the project files in the [Contact Manager sample solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="97386-225">Sonuç</span><span class="sxs-lookup"><span data-stu-id="97386-225">Conclusion</span></span>

<span data-ttu-id="97386-226">Bu konu, MSBuild ve VSDBCMD kullanarak veritabanı projelerini dağıtırken veritabanı özelliklerini farklı hedef ortamlara nasıl özelleştirebileceğiniz açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="97386-226">This topic described how you can tailor database properties to different destination environments when you deploy database projects using MSBuild and VSDBCMD.</span></span> <span data-ttu-id="97386-227">Bu yaklaşım, daha büyük, kurumsal ölçekli çözümlerin parçası olarak veritabanı projelerini dağıtmanız gerektiğinde faydalıdır.</span><span class="sxs-lookup"><span data-stu-id="97386-227">This approach is useful when you need to deploy database projects as part of larger, enterprise-scale solutions.</span></span> <span data-ttu-id="97386-228">Bu çözümler genellikle korumalı geliştirme veya test ortamları, hazırlama veya tümleştirme platformları, üretim veya canlı ortamlar gibi birden çok hedefe dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="97386-228">These solutions are often deployed to multiple destinations, like sandboxed development or test environments, staging or integration platforms, and production or live environments.</span></span> <span data-ttu-id="97386-229">Bu hedef ortamların her biri genellikle benzersiz bir veritabanı dağıtım özellikleri kümesi gerektirir.</span><span class="sxs-lookup"><span data-stu-id="97386-229">Each of these target environments typically requires a unique set of database deployment properties.</span></span>

## <a name="further-reading"></a><span data-ttu-id="97386-230">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="97386-230">Further Reading</span></span>

<span data-ttu-id="97386-231">VSDBCMD. exe ' yi kullanarak veritabanı projelerini dağıtma hakkında daha fazla bilgi için bkz. [veritabanı projelerini dağıtma](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="97386-231">For more information on deploying database projects using VSDBCMD.exe, see [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span> <span data-ttu-id="97386-232">Dağıtım işlemini denetlemek için özel MSBuild proje dosyalarını kullanma hakkında daha fazla bilgi için bkz. [Proje dosyasını anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md) ve [derleme sürecini anlama](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="97386-232">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

<span data-ttu-id="97386-233">MSDN 'deki Bu makaleler veritabanı dağıtımı hakkında daha genel rehberlik sağlar:</span><span class="sxs-lookup"><span data-stu-id="97386-233">These articles on MSDN provide more general guidance on database deployment:</span></span>

- <span data-ttu-id="97386-234">[Veritabanı proje ayarlarına genel bakış](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx)</span><span class="sxs-lookup"><span data-stu-id="97386-234">[An Overview of Database Project Settings](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx)</span></span>
- [<span data-ttu-id="97386-235">Nasıl yapılır: dağıtım ayrıntıları için özellikleri yapılandırma</span><span class="sxs-lookup"><span data-stu-id="97386-235">How to: Configure Properties for Deployment Details</span></span>](https://msdn.microsoft.com/library/dd172125.aspx)
- [<span data-ttu-id="97386-236">Yalıtılmış bir geliştirme ortamına veritabanları oluşturun ve dağıtın</span><span class="sxs-lookup"><span data-stu-id="97386-236">Build and Deploy Databases to an Isolated Development Environment</span></span>](https://msdn.microsoft.com/library/dd193409.aspx)
- [<span data-ttu-id="97386-237">Hazırlama veya üretim ortamına veritabanları oluşturun ve dağıtın</span><span class="sxs-lookup"><span data-stu-id="97386-237">Build and Deploy Databases to a Staging or Production Environment</span></span>](https://msdn.microsoft.com/library/dd193413.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="97386-238">[Önceki](performing-a-what-if-deployment.md)
> [İleri](deploying-database-role-memberships-to-test-environments.md)</span><span class="sxs-lookup"><span data-stu-id="97386-238">[Previous](performing-a-what-if-deployment.md)
[Next](deploying-database-role-memberships-to-test-environments.md)</span></span>
