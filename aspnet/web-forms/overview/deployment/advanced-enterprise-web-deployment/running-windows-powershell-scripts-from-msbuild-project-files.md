---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/running-windows-powershell-scripts-from-msbuild-project-files
title: MSBuild proje dosyalarından Windows PowerShell betikleri çalıştırma | Microsoft Docs
author: jrjlee
description: Bu konu, bir Windows PowerShell betiğini derleme ve dağıtım sürecinin bir parçası olarak nasıl çalıştıracağınızı açıklar. Bir betiği yerel olarak (diğer bir deyişle, b üzerinde) çalıştırabilirsiniz.
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 55f1ae45-fcb5-43a9-8415-fa5b935fc9c9
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/running-windows-powershell-scripts-from-msbuild-project-files
msc.type: authoredcontent
ms.openlocfilehash: 7b09c07b8b7c2a61ca534f7a66a929593f3d04ca
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78548512"
---
# <a name="running-windows-powershell-scripts-from-msbuild-project-files"></a><span data-ttu-id="41380-104">MSBuild Proje Dosyalarından Windows PowerShell Betikleri Çalıştırma</span><span class="sxs-lookup"><span data-stu-id="41380-104">Running Windows PowerShell Scripts from MSBuild Project Files</span></span>

<span data-ttu-id="41380-105">[Jason Lee](https://github.com/jrjlee) tarafından</span><span class="sxs-lookup"><span data-stu-id="41380-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="41380-106">PDF 'YI indir</span><span class="sxs-lookup"><span data-stu-id="41380-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="41380-107">Bu konu, bir Windows PowerShell betiğini derleme ve dağıtım sürecinin bir parçası olarak nasıl çalıştıracağınızı açıklar.</span><span class="sxs-lookup"><span data-stu-id="41380-107">This topic describes how to run a Windows PowerShell script as part of a build and deployment process.</span></span> <span data-ttu-id="41380-108">Bir betiği yerel olarak (diğer bir deyişle, yapı sunucusunda) veya uzaktan bir hedef Web sunucusu ya da veritabanı sunucusu gibi uzak bir şekilde çalıştırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="41380-108">You can run a script locally (in other words, on the build server) or remotely, like on a destination web server or database server.</span></span>
> 
> <span data-ttu-id="41380-109">Dağıtım sonrası bir Windows PowerShell Betiği çalıştırmak isteyebileceğiniz birçok neden vardır.</span><span class="sxs-lookup"><span data-stu-id="41380-109">There are lots of reasons why you might want to run a post-deployment Windows PowerShell script.</span></span> <span data-ttu-id="41380-110">Örneğin, şunları yapmak isteyebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="41380-110">For example, you might want to:</span></span>
> 
> - <span data-ttu-id="41380-111">Kayıt defterine özel bir olay kaynağı ekleyin.</span><span class="sxs-lookup"><span data-stu-id="41380-111">Add a custom event source to the registry.</span></span>
> - <span data-ttu-id="41380-112">Karşıya yüklemeler için bir dosya sistemi dizini oluşturun.</span><span class="sxs-lookup"><span data-stu-id="41380-112">Generate a file system directory for uploads.</span></span>
> - <span data-ttu-id="41380-113">Yapı dizinlerini temizleyin.</span><span class="sxs-lookup"><span data-stu-id="41380-113">Clean up build directories.</span></span>
> - <span data-ttu-id="41380-114">Girişleri özel bir günlük dosyasına yazın.</span><span class="sxs-lookup"><span data-stu-id="41380-114">Write entries to a custom log file.</span></span>
> - <span data-ttu-id="41380-115">Kullanıcıları yeni sağlanan bir Web uygulamasına davet eden e-postalar gönderin.</span><span class="sxs-lookup"><span data-stu-id="41380-115">Send emails inviting users to a newly provisioned web application.</span></span>
> - <span data-ttu-id="41380-116">Uygun izinlere sahip kullanıcı hesapları oluşturun.</span><span class="sxs-lookup"><span data-stu-id="41380-116">Create user accounts with the appropriate permissions.</span></span>
> - <span data-ttu-id="41380-117">SQL Server örnekleri arasında çoğaltmayı yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="41380-117">Configure replication between SQL Server instances.</span></span>
> 
> <span data-ttu-id="41380-118">Bu konu, bir Microsoft Build Engine (MSBuild) proje dosyasındaki özel bir hedeften yerel olarak ve Uzaktan Windows PowerShell betiklerini nasıl çalıştıracağınızı gösterir.</span><span class="sxs-lookup"><span data-stu-id="41380-118">This topic will show you how to run Windows PowerShell scripts both locally and remotely from a custom target in a Microsoft Build Engine (MSBuild) project file.</span></span>

<span data-ttu-id="41380-119">Bu konu, Fabrikam, Inc adlı kurgusal bir şirketin Kurumsal Dağıtım gereksinimlerini temel alarak bir öğretici serisinin bir parçasını oluşturur. Bu öğretici serisi, bir ASP.NET MVC&#x2014;3 uygulaması, Windows Communication Foundation (WCF) hizmeti ve bir veritabanı projesi dahil, gerçekçi bir karmaşıklık düzeyine sahip bir Web uygulamasını temsil etmek üzere bir örnek çözüm olan [Contact Manager çözümünü](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;kullanır.</span><span class="sxs-lookup"><span data-stu-id="41380-119">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="41380-120">Bu öğreticilerin temelini oluşturan dağıtım yöntemi, derleme işleminin her hedef ortam için uygulanan derleme yönergelerini içeren ve ortama özel yapı ve dağıtım ayarlarını içeren iki proje&#x2014;dosyası tarafından kontrol edilen proje [dosyasını anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md)bölümünde açıklanan bölünmüş proje dosyası yaklaşımını temel alır.</span><span class="sxs-lookup"><span data-stu-id="41380-120">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="41380-121">Derleme zamanında, ortama özgü proje dosyası, derleme yönergelerinin tam bir kümesini oluşturmak için ortam agtik proje dosyası ile birleştirilir.</span><span class="sxs-lookup"><span data-stu-id="41380-121">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="41380-122">Göreve genel bakış</span><span class="sxs-lookup"><span data-stu-id="41380-122">Task Overview</span></span>

<span data-ttu-id="41380-123">Bir Windows PowerShell betiğini otomatik veya tek adımlı dağıtım sürecinin bir parçası olarak çalıştırmak için, bu üst düzey görevleri gerçekleştirmeniz gerekir:</span><span class="sxs-lookup"><span data-stu-id="41380-123">To run a Windows PowerShell script as part of an automated or single-step deployment process, you'll need to complete these high-level tasks:</span></span>

- <span data-ttu-id="41380-124">Windows PowerShell betiğini çözümünüze ve kaynak denetimine ekleyin.</span><span class="sxs-lookup"><span data-stu-id="41380-124">Add the Windows PowerShell script to your solution and to source control.</span></span>
- <span data-ttu-id="41380-125">Windows PowerShell betiğinizi çağıran bir komut oluşturun.</span><span class="sxs-lookup"><span data-stu-id="41380-125">Create a command that invokes your Windows PowerShell script.</span></span>
- <span data-ttu-id="41380-126">Komutunuz tüm ayrılmış XML karakterlerini kaçış.</span><span class="sxs-lookup"><span data-stu-id="41380-126">Escape any reserved XML characters in your command.</span></span>
- <span data-ttu-id="41380-127">Özel MSBuild proje dosyanızda bir hedef oluşturun ve komutunu çalıştırmak için **Exec** görevini kullanın.</span><span class="sxs-lookup"><span data-stu-id="41380-127">Create a target in your custom MSBuild project file and use the **Exec** task to run your command.</span></span>

<span data-ttu-id="41380-128">Bu konu başlığı altında, bu yordamların nasıl gerçekleştirileceği gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="41380-128">This topic will show you how to perform these procedures.</span></span> <span data-ttu-id="41380-129">Bu konudaki görevler ve izlenecek yollar, MSBuild hedefleri ve özellikleri hakkında zaten bilgi sahibi olduğunuzu ve bir derleme ve dağıtım işlemini sağlamak için özel bir MSBuild proje dosyası kullanmayı anladığınızı varsayar.</span><span class="sxs-lookup"><span data-stu-id="41380-129">The tasks and walkthroughs in this topic assume that you're already familiar with MSBuild targets and properties, and that you understand how to use a custom MSBuild project file to drive a build and deployment process.</span></span> <span data-ttu-id="41380-130">Daha fazla bilgi için bkz. [Proje dosyasını anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md) ve [derleme sürecini anlama](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="41380-130">For more information, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

## <a name="creating-and-adding-windows-powershell-scripts"></a><span data-ttu-id="41380-131">Windows PowerShell betikleri oluşturma ve ekleme</span><span class="sxs-lookup"><span data-stu-id="41380-131">Creating and Adding Windows PowerShell Scripts</span></span>

<span data-ttu-id="41380-132">Bu konudaki görevler, MSBuild 'ten komut dosyalarının nasıl çalıştırılacağını göstermek için **Logdeploy. ps1** adlı örnek bir Windows PowerShell betiği kullanır.</span><span class="sxs-lookup"><span data-stu-id="41380-132">The tasks in this topic use a sample Windows PowerShell script named **LogDeploy.ps1** to illustrate how to run scripts from MSBuild.</span></span> <span data-ttu-id="41380-133">**Logdeploy. ps1** betiği, bir günlük dosyasına tek satırlık bir girdi yazan basit bir işlev içerir:</span><span class="sxs-lookup"><span data-stu-id="41380-133">The **LogDeploy.ps1** script contains a simple function that writes a single-line entry to a log file:</span></span>

[!code-powershell[Main](running-windows-powershell-scripts-from-msbuild-project-files/samples/sample1.ps1)]

<span data-ttu-id="41380-134">**Logdeploy. ps1** betiği iki parametreyi kabul eder.</span><span class="sxs-lookup"><span data-stu-id="41380-134">The **LogDeploy.ps1** script accepts two parameters.</span></span> <span data-ttu-id="41380-135">İlk parametre, giriş eklemek istediğiniz günlük dosyasının tam yolunu temsil eder ve ikinci parametre günlük dosyasında kaydetmek istediğiniz dağıtım hedefini temsil eder.</span><span class="sxs-lookup"><span data-stu-id="41380-135">The first parameter represents the full path to the log file to which you want to add an entry, and the second parameter represents the deployment destination that you want to record in the log file.</span></span> <span data-ttu-id="41380-136">Betiği çalıştırdığınızda bu biçimdeki günlük dosyasına bir satır ekler:</span><span class="sxs-lookup"><span data-stu-id="41380-136">When you run the script, it adds a line to the log file in this format:</span></span>

[!code-html[Main](running-windows-powershell-scripts-from-msbuild-project-files/samples/sample2.html)]

<span data-ttu-id="41380-137">**Logdeploy. ps1** betiğini MSBuild için kullanılabilir hale getirmek için şunları yapmanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="41380-137">To make the **LogDeploy.ps1** script available to MSBuild, you need to:</span></span>

- <span data-ttu-id="41380-138">Betiği kaynak denetimine ekleyin.</span><span class="sxs-lookup"><span data-stu-id="41380-138">Add the script to source control.</span></span>
- <span data-ttu-id="41380-139">Visual Studio 2010 ' de çözümünüze betiği ekleyin.</span><span class="sxs-lookup"><span data-stu-id="41380-139">Add the script to your solution in Visual Studio 2010.</span></span>

<span data-ttu-id="41380-140">Betiği derleme sunucusunda mi yoksa uzak bir bilgisayarda mı çalıştırmayı planladığınızdan bağımsız olarak çözüm içeriklerinizi dağıtmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="41380-140">You don't need to deploy the script with your solution content, regardless of whether you plan to run the script on the build server or on a remote computer.</span></span> <span data-ttu-id="41380-141">Bir seçenek, betiği bir çözüm klasörüne eklemektir.</span><span class="sxs-lookup"><span data-stu-id="41380-141">One option is to add the script to a solution folder.</span></span> <span data-ttu-id="41380-142">Iletişim Yöneticisi örneğinde, dağıtım işleminin bir parçası olarak Windows PowerShell betiğini kullanmak istiyorsanız, betiği Publish Solution klasörüne eklemek mantıklı olur.</span><span class="sxs-lookup"><span data-stu-id="41380-142">In the Contact Manager example, because you want to use the Windows PowerShell script as part of the deployment process, it makes sense to add the script to the Publish solution folder.</span></span>

![](running-windows-powershell-scripts-from-msbuild-project-files/_static/image1.png)

<span data-ttu-id="41380-143">Çözüm klasörlerinin içerikleri, derleme sunucularına kaynak malzeme olarak kopyalanır.</span><span class="sxs-lookup"><span data-stu-id="41380-143">The contents of solution folders are copied to build servers as source material.</span></span> <span data-ttu-id="41380-144">Ancak, herhangi bir proje çıkışının hiçbir parçasını oluşturmazlar.</span><span class="sxs-lookup"><span data-stu-id="41380-144">However, they form no part of any project output.</span></span>

## <a name="executing-a-windows-powershell-script-on-the-build-server"></a><span data-ttu-id="41380-145">Yapı sunucusunda Windows PowerShell betiği yürütme</span><span class="sxs-lookup"><span data-stu-id="41380-145">Executing a Windows PowerShell Script on the Build Server</span></span>

<span data-ttu-id="41380-146">Bazı senaryolarda, projelerinizi oluşturan bilgisayarda Windows PowerShell betikleri çalıştırmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="41380-146">In some scenarios, you may want to run Windows PowerShell scripts on the computer that builds your projects.</span></span> <span data-ttu-id="41380-147">Örneğin, yapı klasörlerini temizlemek veya girdileri özel bir günlük dosyasına yazmak için bir Windows PowerShell betiği kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="41380-147">For example, you might use a Windows PowerShell script to clean up build folders or write entries to a custom log file.</span></span>

<span data-ttu-id="41380-148">Sözdizimi açısından, bir MSBuild proje dosyasından Windows PowerShell betiğini çalıştırmak, düzenli bir komut isteminden bir Windows PowerShell betiği çalıştırma ile aynıdır.</span><span class="sxs-lookup"><span data-stu-id="41380-148">In terms of syntax, running a Windows PowerShell script from an MSBuild project file is the same as running a Windows PowerShell script from a regular command prompt.</span></span> <span data-ttu-id="41380-149">PowerShell. exe yürütülebilir dosyasını çağırmanız ve Windows PowerShell 'in çalıştırmasını istediğiniz komutları sağlamak için **– komut** anahtarını kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="41380-149">You need to invoke the powershell.exe executable and use the **–command** switch to provide the commands you want Windows PowerShell to run.</span></span> <span data-ttu-id="41380-150">(Windows PowerShell V2 'de, **– File** anahtarını da kullanabilirsiniz).</span><span class="sxs-lookup"><span data-stu-id="41380-150">(In Windows PowerShell v2, you can also use the **–file** switch).</span></span> <span data-ttu-id="41380-151">Komutun şu biçimde olması gerekir:</span><span class="sxs-lookup"><span data-stu-id="41380-151">The command should take this format:</span></span>

[!code-console[Main](running-windows-powershell-scripts-from-msbuild-project-files/samples/sample3.cmd)]

<span data-ttu-id="41380-152">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="41380-152">For example:</span></span>

[!code-console[Main](running-windows-powershell-scripts-from-msbuild-project-files/samples/sample4.cmd)]

<span data-ttu-id="41380-153">Betiğinizin yolu boşluk içeriyorsa, dosya yolunu tek tırnak içine almanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="41380-153">If the path to your script includes spaces, you need to enclose the file path in single quotes preceded by an ampersand.</span></span> <span data-ttu-id="41380-154">Şu komutu içerecek şekilde zaten kullanmış olduğunuzdan çift tırnak işareti kullanamazsınız:</span><span class="sxs-lookup"><span data-stu-id="41380-154">You can't use double quotes, because you've already used them to enclose the command:</span></span>

[!code-console[Main](running-windows-powershell-scripts-from-msbuild-project-files/samples/sample5.cmd)]

<span data-ttu-id="41380-155">MSBuild 'ten bu komutu çağırdığınızda dikkat etmeniz gereken bazı ek durumlar vardır.</span><span class="sxs-lookup"><span data-stu-id="41380-155">There are a few additional considerations when you invoke this command from MSBuild.</span></span> <span data-ttu-id="41380-156">İlk olarak, komut dosyasının sessizce yürütüldüğünü sağlamak için **– etkileşimsiz** bayrağını dahil etmelisiniz.</span><span class="sxs-lookup"><span data-stu-id="41380-156">First, you should include the **–NonInteractive** flag to ensure that the script executes quietly.</span></span> <span data-ttu-id="41380-157">Ardından, **– ExecutionPolicy** bayrağını uygun bir bağımsız değişken değeriyle birlikte eklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="41380-157">Next, you should include the **–ExecutionPolicy** flag with an appropriate argument value.</span></span> <span data-ttu-id="41380-158">Bu, Windows PowerShell 'in betiğinizi uygulayabileceği Yürütme ilkesini belirtir ve varsayılan yürütme ilkesini geçersiz kılmanızı sağlar. Bu, betiğinizin yürütülmesini engelleyebilir.</span><span class="sxs-lookup"><span data-stu-id="41380-158">This specifies the execution policy that Windows PowerShell will apply to your script and allows you to override the default execution policy, which may prevent execution of your script.</span></span> <span data-ttu-id="41380-159">Bu bağımsız değişken değerleri arasından seçim yapabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="41380-159">You can choose from these argument values:</span></span>

- <span data-ttu-id="41380-160">**Kısıtlanmamış** bir değer, komut dosyasının imzalanıp Imzalanmadığına bakılmaksızın Windows PowerShell 'in betiğinizi yürütmesine izin verir.</span><span class="sxs-lookup"><span data-stu-id="41380-160">A value of **Unrestricted** will allow Windows PowerShell to execute your script, regardless of whether the script is signed.</span></span>
- <span data-ttu-id="41380-161">**RemoteSigned** değeri, Windows PowerShell 'in yerel makinede oluşturulan imzasız betikleri yürütmesine izin verir.</span><span class="sxs-lookup"><span data-stu-id="41380-161">A value of **RemoteSigned** will allow Windows PowerShell to execute unsigned scripts that were created on the local machine.</span></span> <span data-ttu-id="41380-162">Ancak, başka bir yerde oluşturulan betikler imzalanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="41380-162">However, scripts that were created elsewhere must be signed.</span></span> <span data-ttu-id="41380-163">(Uygulamada, bir yapı sunucusunda yerel olarak bir Windows PowerShell betiği oluşturmuş olmanız çok düşüktür).</span><span class="sxs-lookup"><span data-stu-id="41380-163">(In practice, you're very unlikely to have created a Windows PowerShell script locally on a build server).</span></span>
- <span data-ttu-id="41380-164">**AllSigned** değeri, Windows PowerShell 'in yalnızca imzalı betikleri yürütmesine izin verir.</span><span class="sxs-lookup"><span data-stu-id="41380-164">A value of **AllSigned** will allow Windows PowerShell to execute signed scripts only.</span></span>

<span data-ttu-id="41380-165">Varsayılan yürütme ilkesi, Windows PowerShell 'in herhangi bir betik dosyasını çalıştırmasını önleyen **kısıtlanmıştır**.</span><span class="sxs-lookup"><span data-stu-id="41380-165">The default execution policy is **Restricted**, which prevents Windows PowerShell from running any script files.</span></span>

<span data-ttu-id="41380-166">Son olarak, Windows PowerShell komutunuz içinde oluşan tüm ayrılmış XML karakterlerini atlamanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="41380-166">Finally, you need to escape any reserved XML characters that occur in your Windows PowerShell command:</span></span>

- <span data-ttu-id="41380-167">Tek tırnak **&amp;apos;** ile Değiştir</span><span class="sxs-lookup"><span data-stu-id="41380-167">Replace single quotes with **&amp;apos;**</span></span>
- <span data-ttu-id="41380-168">Çift tırnak **&amp;quot;** ile Değiştir</span><span class="sxs-lookup"><span data-stu-id="41380-168">Replace double quotes with **&amp;quot;**</span></span>
- <span data-ttu-id="41380-169">Yer işaretleri **&amp;amp** ile Değiştir</span><span class="sxs-lookup"><span data-stu-id="41380-169">Replace ampersands with **&amp;amp;**</span></span>

- <span data-ttu-id="41380-170">Bu değişiklikleri yaptığınızda komutunuz şuna benzeyecektir:</span><span class="sxs-lookup"><span data-stu-id="41380-170">When you make these changes, your command will resemble this:</span></span>

[!code-console[Main](running-windows-powershell-scripts-from-msbuild-project-files/samples/sample6.cmd)]

<span data-ttu-id="41380-171">Özel MSBuild proje dosyanız içinde, yeni bir hedef oluşturabilir ve bu komutu çalıştırmak için **Exec** görevini kullanabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="41380-171">Within your custom MSBuild project file, you can create a new target and use the **Exec** task to run this command:</span></span>

[!code-xml[Main](running-windows-powershell-scripts-from-msbuild-project-files/samples/sample7.xml)]

<span data-ttu-id="41380-172">Bu örnekte şunları unutmayın:</span><span class="sxs-lookup"><span data-stu-id="41380-172">In this example, note that:</span></span>

- <span data-ttu-id="41380-173">Parametre değerleri ve Windows PowerShell yürütülebilir dosyasının konumu gibi tüm değişkenler, MSBuild özellikleri olarak bildirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="41380-173">Any variables, like parameter values and the location of the Windows PowerShell executable, are declared as MSBuild properties.</span></span>
- <span data-ttu-id="41380-174">Kullanıcıların bu değerleri komut satırından geçersiz kılmasını sağlamak için koşullar dahildir.</span><span class="sxs-lookup"><span data-stu-id="41380-174">Conditions are included to enable users to override these values from the command line.</span></span>
- <span data-ttu-id="41380-175">**Msdeploycomputername** özelliği proje dosyasında başka bir yerde bildirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="41380-175">The **MSDeployComputerName** property is declared elsewhere in the project file.</span></span>

<span data-ttu-id="41380-176">Yapı işleminizin bir parçası olarak bu hedefi yürüttüğünüzde, Windows PowerShell, komutunuzu çalıştırır ve belirttiğiniz dosyaya bir günlük girdisi yazar.</span><span class="sxs-lookup"><span data-stu-id="41380-176">When you execute this target as part of your build process, Windows PowerShell will run your command and write a log entry to the file you specified.</span></span>

## <a name="executing-a-windows-powershell-script-on-a-remote-computer"></a><span data-ttu-id="41380-177">Uzak bilgisayarda Windows PowerShell betiğini yürütme</span><span class="sxs-lookup"><span data-stu-id="41380-177">Executing a Windows PowerShell Script on a Remote Computer</span></span>

<span data-ttu-id="41380-178">Windows PowerShell, [Windows Uzaktan Yönetimi](https://msdn.microsoft.com/library/windows/desktop/aa384426.aspx) (WinRM) aracılığıyla uzak bilgisayarlarda komut dosyalarını çalıştırabilme özelliğine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="41380-178">Windows PowerShell is capable of running scripts on remote computers through [Windows Remote Management](https://msdn.microsoft.com/library/windows/desktop/aa384426.aspx) (WinRM).</span></span> <span data-ttu-id="41380-179">Bunu yapmak için [Invoke-Command](https://technet.microsoft.com/library/dd347578.aspx) cmdlet 'ini kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="41380-179">To do this, you need to use the [Invoke-Command](https://technet.microsoft.com/library/dd347578.aspx) cmdlet.</span></span> <span data-ttu-id="41380-180">Bu, betiği uzak bilgisayarlara kopyalamadan bir veya daha fazla uzak bilgisayara karşı komut dosyanızı yürütmenize olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="41380-180">This lets you execute your script against one or more remote computers without copying the script to the remote computers.</span></span> <span data-ttu-id="41380-181">Tüm sonuçlar, betiği çalıştırdığınız yerel bilgisayara döndürülür.</span><span class="sxs-lookup"><span data-stu-id="41380-181">Any results are returned to the local computer from which you ran the script.</span></span>

> [!NOTE]
> <span data-ttu-id="41380-182">Windows PowerShell komut dosyalarını uzak bir bilgisayarda yürütmek için **Invoke-Command** cmdlet 'ini kullanmadan önce, uzak iletileri kabul etmek Için bir WinRM dinleyicisi yapılandırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="41380-182">Before you use the **Invoke-Command** cmdlet to execute Windows PowerShell scripts on a remote computer, you need to configure a WinRM listener to accept remote messages.</span></span> <span data-ttu-id="41380-183">Bunu, uzak bilgisayarda **winrm quickconfig** komutunu çalıştırarak yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="41380-183">You can do this by running the command **winrm quickconfig** on the remote computer.</span></span> <span data-ttu-id="41380-184">Daha fazla bilgi için bkz. [Windows Uzaktan Yönetimi Için yükleme ve yapılandırma](https://msdn.microsoft.com/library/windows/desktop/aa384372(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="41380-184">For more information, see [Installation and Configuration for Windows Remote Management](https://msdn.microsoft.com/library/windows/desktop/aa384372(v=vs.85).aspx).</span></span>

<span data-ttu-id="41380-185">Bir Windows PowerShell penceresinden, uzak bir bilgisayarda **Logdeploy. ps1** betiğini çalıştırmak için bu sözdizimini kullanın:</span><span class="sxs-lookup"><span data-stu-id="41380-185">From a Windows PowerShell window, you'd use this syntax to run the **LogDeploy.ps1** script on a remote computer:</span></span>

[!code-powershell[Main](running-windows-powershell-scripts-from-msbuild-project-files/samples/sample8.ps1)]

> [!NOTE]
> <span data-ttu-id="41380-186">Komut dosyasını çalıştırmak için **Invoke-Command** kullanmanın farklı diğer yolları vardır ancak bu yaklaşım, parametre değerleri sağlamanız ve boşluklar içeren yolları yönetmeniz gerektiğinde en basittir.</span><span class="sxs-lookup"><span data-stu-id="41380-186">There are various other ways of using **Invoke-Command** to run a script file, but this approach is the most straightforward when you need to provide parameter values and manage paths with spaces.</span></span>

<span data-ttu-id="41380-187">Bunu bir komut isteminden çalıştırdığınızda, Windows PowerShell yürütülebilirini çağırmanız ve yönergelerinizi sağlamak için **– komut** parametresini kullanmanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="41380-187">When you run this from a command prompt, you need to invoke the Windows PowerShell executable and use the **–command** parameter to provide your instructions:</span></span>

[!code-console[Main](running-windows-powershell-scripts-from-msbuild-project-files/samples/sample9.cmd)]

<span data-ttu-id="41380-188">Daha önce olduğu gibi, MSBuild 'ten komutunu çalıştırdığınızda bazı ek anahtarlar sağlamanız ve ayrılmış XML karakterlerinin önüne kaçış yapmanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="41380-188">As before, you need to provide some additional switches and escape any reserved XML characters when you run the command from MSBuild:</span></span>

[!code-console[Main](running-windows-powershell-scripts-from-msbuild-project-files/samples/sample10.cmd)]

<span data-ttu-id="41380-189">Son olarak, daha önce olduğu gibi, komutunu yürütmek için özel bir MSBuild hedefi içindeki **Exec** görevini kullanabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="41380-189">Finally, as before, you can use the **Exec** task within a custom MSBuild target to execute your command:</span></span>

[!code-xml[Main](running-windows-powershell-scripts-from-msbuild-project-files/samples/sample11.xml)]

<span data-ttu-id="41380-190">Yapı işleminizin bir parçası olarak bu hedefi yürüttüğünüzde, Windows PowerShell, komut dosyanızı **– ComputerName** bağımsız değişkeninde belirttiğiniz bilgisayarda çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="41380-190">When you execute this target as part of your build process, Windows PowerShell will run your script on the computer you specified in the **–computername** argument.</span></span>

## <a name="conclusion"></a><span data-ttu-id="41380-191">Sonuç</span><span class="sxs-lookup"><span data-stu-id="41380-191">Conclusion</span></span>

<span data-ttu-id="41380-192">Bu konu, bir MSBuild proje dosyasından Windows PowerShell komut dosyasının nasıl çalıştırılacağını açıklamaktadır.</span><span class="sxs-lookup"><span data-stu-id="41380-192">This topic described how to run a Windows PowerShell script from an MSBuild project file.</span></span> <span data-ttu-id="41380-193">Bu yaklaşımı, bir otomatik veya tek adımlı derleme ve dağıtım sürecinin bir parçası olarak yerel olarak veya uzak bir bilgisayarda Windows PowerShell betiğini çalıştırmak için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="41380-193">You can use this approach to run a Windows PowerShell script, either locally or on a remote computer, as part of an automated or single-step build and deployment process.</span></span>

## <a name="further-reading"></a><span data-ttu-id="41380-194">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="41380-194">Further Reading</span></span>

<span data-ttu-id="41380-195">Windows PowerShell betikleri imzalama ve yürütme ilkelerini yönetme hakkında rehberlik için bkz. [Windows PowerShell betiklerini çalıştırma](https://technet.microsoft.com/library/ee176949.aspx).</span><span class="sxs-lookup"><span data-stu-id="41380-195">For guidance on signing Windows PowerShell scripts and managing execution policies, see [Running Windows PowerShell Scripts](https://technet.microsoft.com/library/ee176949.aspx).</span></span> <span data-ttu-id="41380-196">Windows PowerShell komutlarını uzak bir bilgisayardan çalıştırmaya ilişkin yönergeler için bkz. [uzak komutları çalıştırma](https://technet.microsoft.com/library/dd819505.aspx).</span><span class="sxs-lookup"><span data-stu-id="41380-196">For guidance on running Windows PowerShell commands from a remote computer, see [Running Remote Commands](https://technet.microsoft.com/library/dd819505.aspx).</span></span>

<span data-ttu-id="41380-197">Dağıtım işlemini denetlemek için özel MSBuild proje dosyalarını kullanma hakkında daha fazla bilgi için bkz. [Proje dosyasını anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md) ve [derleme sürecini anlama](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="41380-197">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="41380-198">[Önceki](taking-web-applications-offline-with-web-deploy.md)
> [İleri](troubleshooting-the-packaging-process.md)</span><span class="sxs-lookup"><span data-stu-id="41380-198">[Previous](taking-web-applications-offline-with-web-deploy.md)
[Next](troubleshooting-the-packaging-process.md)</span></span>
