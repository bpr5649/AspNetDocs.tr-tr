---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
title: Kurumsal ortamlara üyelik veritabanları dağıtma | Microsoft Docs
author: jrjlee
description: Bu konuda, ASP.NET uygulama hizmetleri veritabanları sağladığınızda (daha yaygın...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 3cf765df-d311-4f68-a295-c9685ceea830
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
msc.type: authoredcontent
ms.openlocfilehash: 50f49af502b75aa5ad52756a76a5e7340aca53f7
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78526007"
---
# <a name="deploying-membership-databases-to-enterprise-environments"></a><span data-ttu-id="75029-103">Kurumsal Ortamlara Üyelik Veritabanları Dağıtma</span><span class="sxs-lookup"><span data-stu-id="75029-103">Deploying Membership Databases to Enterprise Environments</span></span>

<span data-ttu-id="75029-104">[Jason Lee](https://github.com/jrjlee) tarafından</span><span class="sxs-lookup"><span data-stu-id="75029-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="75029-105">PDF 'YI indir</span><span class="sxs-lookup"><span data-stu-id="75029-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="75029-106">Bu konuda, test, hazırlama veya üretim ortamlarında ASP.NET uygulama hizmetleri veritabanları (üyelik veritabanları olarak da bilinir) sağladığınızda aşmaya ihtiyacınız olan önemli noktalar ve güçlükler açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="75029-106">This topic explains the key considerations and challenges you'll need to overcome when you provision ASP.NET application services databases (more commonly referred to as membership databases) in test, staging, or production environments.</span></span> <span data-ttu-id="75029-107">Ayrıca, bu zorlukları karşılamak için kullanabileceğiniz yaklaşımları açıklar.</span><span class="sxs-lookup"><span data-stu-id="75029-107">It also describes approaches you can use to meet these challenges.</span></span>

<span data-ttu-id="75029-108">Bu konu, Fabrikam, Inc adlı kurgusal bir şirketin Kurumsal Dağıtım gereksinimlerini temel alarak bir öğretici serisinin bir parçasını oluşturur. Bu öğretici serisi, bir ASP.NET MVC&#x2014;3 uygulaması, Windows Communication Foundation (WCF) hizmeti ve bir veritabanı projesi dahil, gerçekçi bir karmaşıklık düzeyine sahip bir Web uygulamasını temsil etmek üzere bir örnek çözüm olan [Contact Manager çözümünü](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;kullanır.</span><span class="sxs-lookup"><span data-stu-id="75029-108">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="75029-109">Bu öğreticilerin temelini oluşturan dağıtım yöntemi, derleme işleminin her hedef ortam için uygulanan derleme yönergelerini içeren ve ortama özel yapı ve dağıtım ayarlarını içeren iki proje&#x2014;dosyası tarafından kontrol edilen proje [dosyasını anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md)bölümünde açıklanan bölünmüş proje dosyası yaklaşımını temel alır.</span><span class="sxs-lookup"><span data-stu-id="75029-109">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="75029-110">Derleme zamanında, ortama özgü proje dosyası, derleme yönergelerinin tam bir kümesini oluşturmak için ortam agtik proje dosyası ile birleştirilir.</span><span class="sxs-lookup"><span data-stu-id="75029-110">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="what-are-the-issues-when-you-deploy-a-membership-database"></a><span data-ttu-id="75029-111">Üyelik veritabanını dağıtırken sorunlar nelerdir?</span><span class="sxs-lookup"><span data-stu-id="75029-111">What Are the Issues When You Deploy a Membership Database?</span></span>

<span data-ttu-id="75029-112">Çoğu durumda, bir veritabanı için bir dağıtım stratejisi devetiniz varsa, dikkate almanız gereken ilk şey, hangi verileri dağıtmaktır.</span><span class="sxs-lookup"><span data-stu-id="75029-112">In most cases, when you devise a deployment strategy for a database, the first thing you need to consider is what data you want to deploy.</span></span> <span data-ttu-id="75029-113">Geliştirme veya test ortamında, hızlı ve kolay testi kolaylaştırmak için Kullanıcı hesabı verilerini dağıtmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="75029-113">In a development or test environment, you might want to deploy user account data to facilitate quick and easy testing.</span></span> <span data-ttu-id="75029-114">Hazırlama veya üretim ortamında, Kullanıcı hesabı verilerini dağıtmak istemeniz çok düşüktür.</span><span class="sxs-lookup"><span data-stu-id="75029-114">In a staging or production environment, it's very unlikely that you'd want to deploy user account data.</span></span>

<span data-ttu-id="75029-115">Ne yazık ki ASP.NET üyelik veritabanları, bu kararı çok daha karmaşık hale getirmek için bazı özel güçlükleri ortaya çıkarabilir:</span><span class="sxs-lookup"><span data-stu-id="75029-115">Unfortunately, ASP.NET membership databases introduce some specific challenges that make this decision a lot more complex:</span></span>

- <span data-ttu-id="75029-116">Yalnızca şemadan oluşan bir dağıtım, üyelik veritabanını işlemsel olmayan bir durumda bırakır.</span><span class="sxs-lookup"><span data-stu-id="75029-116">A schema-only deployment will leave the membership database in a non-operational state.</span></span> <span data-ttu-id="75029-117">Bunun nedeni, üyelik veritabanının, veritabanının çalışması için ihtiyaç duyduğu bazı yapılandırma verilerini ( **aspnet\_SchemaVersions** tablosunda) içermesidir.</span><span class="sxs-lookup"><span data-stu-id="75029-117">This is because the membership database includes some configuration data (in the **aspnet\_SchemaVersions** table) that the database requires in order to function.</span></span> <span data-ttu-id="75029-118">Bu nedenle, Kullanıcı hesabı verilerini dışlamak üzere üyelik veritabanınızın yalnızca şema dağıtımını gerçekleştirirseniz, temel yapılandırma verilerini eklemek için bir dağıtım sonrası betiği çalıştırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="75029-118">As such, if you perform a schema-only deployment of your membership database in order to exclude user account data, you'll need to run a post-deployment script to add the essential configuration data.</span></span>
- <span data-ttu-id="75029-119">Üyelik veritabanınızın nasıl yapılandırıldığına bağlı olarak, üyelik sağlayıcısı, parolaları şifrelemek ve veritabanında depolamak için makine anahtarını kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="75029-119">Depending on how your membership database is configured, the membership provider may use the machine key to encrypt passwords and store them in the database.</span></span> <span data-ttu-id="75029-120">Bu durumda, veritabanıyla dağıttığınız tüm Kullanıcı hesabı verileri hedef sunucuda kullanılamaz hale gelir.</span><span class="sxs-lookup"><span data-stu-id="75029-120">In this case, any user account data you deploy with the database will become unusable on the destination server.</span></span> <span data-ttu-id="75029-121">Bu nedenle, Kullanıcı hesabı verilerinin dağıtımı desteklenen bir senaryo değildir.</span><span class="sxs-lookup"><span data-stu-id="75029-121">For this reason, deploying user account data is not a supported scenario.</span></span>

## <a name="choosing-a-membership-database-strategy"></a><span data-ttu-id="75029-122">Üyelik veritabanı stratejisi seçme</span><span class="sxs-lookup"><span data-stu-id="75029-122">Choosing a Membership Database Strategy</span></span>

<span data-ttu-id="75029-123">Bir kurumsal sunucu ortamında üyelik veritabanının nasıl sağlanacağını seçerken bu yönergeleri kullanın:</span><span class="sxs-lookup"><span data-stu-id="75029-123">Use these guidelines when you choose how to provision a membership database in an enterprise server environment:</span></span>

- <span data-ttu-id="75029-124">Mümkün olan yerlerde, üyelik veritabanlarını dağıtmayın.</span><span class="sxs-lookup"><span data-stu-id="75029-124">Wherever possible, do not deploy membership databases.</span></span> <span data-ttu-id="75029-125">Bunun yerine, hedef veritabanı sunucusunda üyelik veritabanını el ile oluşturun.</span><span class="sxs-lookup"><span data-stu-id="75029-125">Instead, create the membership database manually on the target database server.</span></span> <span data-ttu-id="75029-126">Üyelik veritabanı şemanızı özelleştirmediyseniz, [ASP.NET SQL Server kayıt aracı 'nı (aspnet\_regsql. exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx)kullanarak hedefte SITU 'da yeni bir tane oluşturmanız yeterlidir.</span><span class="sxs-lookup"><span data-stu-id="75029-126">If you haven't customized your membership database schema, you can simply create a new one in situ at the destination using the [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span></span>
- <span data-ttu-id="75029-127">Bir üyelik veritabanını dağıtmak istiyorsanız, ancak bir üyelik veritabanı&#x2014;dağıtmak istiyorsanız, veritabanı şemasında&#x2014;kapsamlı değişiklikler yaptıysanız, Kullanıcı hesabı verilerini hariç tutmak için üyelik veritabanının yalnızca şema bir dağıtımını gerçekleştirmeniz, sonra gerekli yapılandırma verilerini eklemek için dağıtım sonrası bir betik çalıştırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="75029-127">If you have no option but to deploy a membership database&#x2014;for example, if you've made extensive modifications to the database schema&#x2014;you should perform a schema-only deployment of the membership database, to exclude user account data, and then run a post-deployment script to add any required configuration data.</span></span> <span data-ttu-id="75029-128">[Nasıl yapılır: ASP.NET üyelik veritabanını Kullanıcı hesapları dahil etmeden dağıtma](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx)konusunda şu yaklaşımlar hakkında geniş kapsamlı yönergeler bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="75029-128">You can find broad guidance on these approaches in [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span></span>

<span data-ttu-id="75029-129">*Üyelik veritabanınızın şemasının büyük olasılıkla oldukça statik*olduğunu unutmamak önemlidir.</span><span class="sxs-lookup"><span data-stu-id="75029-129">It's important to remember that *the schema of your membership database is likely to be fairly static*.</span></span> <span data-ttu-id="75029-130">Üyelik veritabanını özelleştirmiş olsanız bile, şemayı düzenli&#x2014;olarak güncelleştirmeniz gerekecektir. Bu, bir Web uygulamasındaki kodla veya bir veritabanı projesinde aynı sıklıkta değiştirilmeyeceğidir.</span><span class="sxs-lookup"><span data-stu-id="75029-130">Even if you've customized the membership database, it's unlikely that you'll need to update the schema on a regular basis&#x2014;it's not going to change with the same frequency as the code in a web application or a database project.</span></span> <span data-ttu-id="75029-131">Bu nedenle, herhangi bir otomatik veya tek adımlı dağıtım işlemlerine üyelik veritabanını eklemeniz gerekmez.</span><span class="sxs-lookup"><span data-stu-id="75029-131">As such, you shouldn't need to include the membership database in any automated or single-step deployment processes.</span></span>

## <a name="using-vsdbcmd-to-update-a-membership-database-schema"></a><span data-ttu-id="75029-132">VSDBCMD kullanarak bir üyelik veritabanı şemasını güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="75029-132">Using VSDBCMD to Update a Membership Database Schema</span></span>

<span data-ttu-id="75029-133">İlk dağıtımdan sonra üyelik veritabanınızın yapısını değiştirirseniz, veritabanını yeniden dağıtmak için Internet Information Services (IIS) Web Dağıtım aracı 'nı (Web Dağıtımı) kullanmak istemeyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="75029-133">If you modify the structure of your membership database after your first deployment, you may not want to use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to redeploy the database.</span></span> <span data-ttu-id="75029-134">Web Dağıtımı ' deki veritabanı dağıtım işlevleri, bir hedef veritabanına&#x2014;değişiklik güncellemeleri yapma özelliğini içermez, bu da veritabanını bırakıp yeniden oluşturmanız gerekir Web dağıtımı.</span><span class="sxs-lookup"><span data-stu-id="75029-134">The database deployment functionality in Web Deploy doesn't include the capability to make differential updates to a destination database&#x2014;instead, Web Deploy must drop and re-create the database.</span></span> <span data-ttu-id="75029-135">Bu, genellikle hazırlama veya üretim ortamlarında istenmeyen olan mevcut kullanıcı hesabı verilerinin kaybedilmediği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="75029-135">This means that you lose any existing user account data, which is typically undesirable in staging or production environments.</span></span>

<span data-ttu-id="75029-136">Alternatif, VSDBCMD yardımcı programını kullanarak hedef veritabanınızın şemasını güncelleştirebilir.</span><span class="sxs-lookup"><span data-stu-id="75029-136">The alternative is to use the VSDBCMD utility to update the schema of your destination database.</span></span> <span data-ttu-id="75029-137">VSDBCMD iki önemli özelliği içerir.</span><span class="sxs-lookup"><span data-stu-id="75029-137">VSDBCMD includes two important capabilities.</span></span> <span data-ttu-id="75029-138">İlk olarak, var olan bir veritabanının şemasını bir. dbschema dosyasına aktarabilir.</span><span class="sxs-lookup"><span data-stu-id="75029-138">First, it can import the schema of an existing database into a .dbschema file.</span></span> <span data-ttu-id="75029-139">İkinci olarak, bir. dbschema dosyasını varolan bir veritabanına fark güncelleştirmesi olarak dağıtabilir, bu da yalnızca hedef veritabanını güncel hale getirmek için gerekli değişiklikleri yaptığı ve herhangi bir veri kaybetmemeniz anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="75029-139">Second, it can deploy a .dbschema file to an existing database as a differential update, which means that it only makes the changes required to bring the target database up to date and you don't lose any data.</span></span>

<span data-ttu-id="75029-140">Bu üst düzey adımları, bir üyelik veritabanı şemasını güncelleştirmek için kullanabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="75029-140">You can use these high-level steps to update a membership database schema:</span></span>

1. <span data-ttu-id="75029-141">Kaynak üyelik veritabanınız için bir. dbschema dosyası oluşturmak üzere VSDBCMD **Import** eylemini kullanın.</span><span class="sxs-lookup"><span data-stu-id="75029-141">Use the VSDBCMD **Import** action to generate a .dbschema file for your source membership database.</span></span> <span data-ttu-id="75029-142">Bu yordam, [komut Isteminden nasıl yapılır: bir şemayı Içeri aktarma](https://msdn.microsoft.com/library/dd172135.aspx)konusunda açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="75029-142">This procedure is described in [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/library/dd172135.aspx).</span></span>
2. <span data-ttu-id="75029-143">. Dbschema dosyasını hedef üyelik veritabanınıza dağıtmak için VSDBCMD **Deploy** eylemini kullanın.</span><span class="sxs-lookup"><span data-stu-id="75029-143">Use the VSDBCMD **Deploy** action to deploy the .dbschema file to your destination membership database.</span></span> <span data-ttu-id="75029-144">Bu yordam, [VSDBCMD Için komut satırı başvurusunda açıklanmıştır. EXE (dağıtım ve şema Içeri aktarma)](https://msdn.microsoft.com/library/dd193283.aspx).</span><span class="sxs-lookup"><span data-stu-id="75029-144">This procedure is described in [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="75029-145">Sonuç</span><span class="sxs-lookup"><span data-stu-id="75029-145">Conclusion</span></span>

<span data-ttu-id="75029-146">Bu konuda, çeşitli hedef ortamlarda ASP.NET üyelik veritabanları sağlamanız gerektiğinde karşılaşabileceğiniz bazı sorunlar açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="75029-146">This topic described some of the challenges you may face when you need to provision ASP.NET membership databases in various target environments.</span></span> <span data-ttu-id="75029-147">Özellikle, yalnızca şema dağıtımlarının üyelik veritabanını işlemsel olmayan bir durumda bırakacağı ve Kullanıcı hesabı verilerinin dağıtılmasının neden desteklenmediği açıklanmıştı.</span><span class="sxs-lookup"><span data-stu-id="75029-147">In particular, it explained why schema-only deployments will leave the membership database in a non-operational state and why deploying user account data is not supported.</span></span> <span data-ttu-id="75029-148">Bu konu başlığı altında, üyelik veritabanlarının farklı senaryolarda nasıl sağlanması, dağıtılması ve güncelleştirilmesi konusunda yönergeler de sunulmuştur.</span><span class="sxs-lookup"><span data-stu-id="75029-148">The topic also presented guidance on how to provision, deploy, and update membership databases in different scenarios.</span></span>

## <a name="further-reading"></a><span data-ttu-id="75029-149">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="75029-149">Further Reading</span></span>

<span data-ttu-id="75029-150">VSDBCMD kullanma hakkında daha fazla bilgi ve örnek için bkz [. VSDBCMD Için komut satırı başvurusu. EXE (dağıtım ve şema Içeri aktarma)](https://msdn.microsoft.com/library/dd193283.aspx) ve [nasıl yapılır: bir şemayı komut Isteminden içeri aktarma](https://msdn.microsoft.com/library/dd172135.aspx).</span><span class="sxs-lookup"><span data-stu-id="75029-150">For more guidance and examples of how to use VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) and [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/library/dd172135.aspx).</span></span> <span data-ttu-id="75029-151">ASPNET\_regsql. exe ' yi kullanarak üyelik veritabanları oluşturma hakkında daha fazla bilgi için bkz. [ASP.NET SQL Server kayıt aracı (aspnet\_regsql. exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="75029-151">For more information on using aspnet\_regsql.exe to create membership databases, see [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span></span> <span data-ttu-id="75029-152">Üyelik veritabanlarının dağıtımı hakkında daha fazla genel bilgi için, bkz. [nasıl yapılır: ASP.NET üyelik veritabanını Kullanıcı hesapları dahil etmeden dağıtma](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="75029-152">For more general guidance on deploying membership databases, see [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="75029-153">[Önceki](deploying-database-role-memberships-to-test-environments.md)
> [İleri](excluding-files-and-folders-from-deployment.md)</span><span class="sxs-lookup"><span data-stu-id="75029-153">[Previous](deploying-database-role-memberships-to-test-environments.md)
[Next](excluding-files-and-folders-from-deployment.md)</span></span>
