---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
title: Veritabanı projelerini dağıtma | Microsoft Docs
author: jrjlee
description: 'Note: birçok kurumsal dağıtım senaryosunda, dağıtılmış bir veritabanına artımlı güncelleştirmeler yayımlama yeteneğinin olması gerekir. Alternatif yeniden oluşturmak...'
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 832f226a-1aa3-4093-8c29-ce4196793259
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
msc.type: authoredcontent
ms.openlocfilehash: 221808758492aedb8e8329364e511df28fd11105
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78634269"
---
# <a name="deploying-database-projects"></a><span data-ttu-id="656e4-104">Veritabanı Projeleri Dağıtma</span><span class="sxs-lookup"><span data-stu-id="656e4-104">Deploying Database Projects</span></span>

<span data-ttu-id="656e4-105">[Jason Lee](https://github.com/jrjlee) tarafından</span><span class="sxs-lookup"><span data-stu-id="656e4-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="656e4-106">PDF 'YI indir</span><span class="sxs-lookup"><span data-stu-id="656e4-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> [!NOTE]
> <span data-ttu-id="656e4-107">Birçok kurumsal dağıtım senaryosunda, dağıtılmış bir veritabanına artımlı güncelleştirmeler yayımlama yeteneğinin olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="656e4-107">In lots of enterprise deployment scenarios, you need the ability to publish incremental updates to a deployed database.</span></span> <span data-ttu-id="656e4-108">Diğer bir deyişle, veritabanını her dağıtımda yeniden oluşturmak, bu da var olan veritabanındaki tüm verileri kaybetmeniz anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="656e4-108">The alternative is to recreate the database on every deployment, which means you lose any data in the existing database.</span></span> <span data-ttu-id="656e4-109">Visual Studio 2010 ile çalışırken, VSDBCMD kullanmak, artımlı veritabanı yayımlaması için önerilen yaklaşımdır.</span><span class="sxs-lookup"><span data-stu-id="656e4-109">When you work with Visual Studio 2010, using VSDBCMD is the recommended approach to incremental database publishing.</span></span> <span data-ttu-id="656e4-110">Ancak, Visual Studio 'nun sonraki sürümü ve Web yayımlama işlem hattı (WPP) doğrudan artımlı yayımlamayı destekleyen araçları içerir.</span><span class="sxs-lookup"><span data-stu-id="656e4-110">However, the next version of Visual Studio and the Web Publishing Pipeline (WPP) will include tooling that supports incremental publishing directly.</span></span>

<span data-ttu-id="656e4-111">Visual Studio 2010 ' de Contact Manager örnek çözümünü açarsanız, veritabanı projesinin dört dosya içeren bir Özellikler klasörü içerdiğini görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="656e4-111">If you open the Contact Manager sample solution in Visual Studio 2010, you'll see that the database project includes a Properties folder that contains four files.</span></span>

![](deploying-database-projects/_static/image1.png)

<span data-ttu-id="656e4-112">Proje dosyasıyla birlikte (Bu durumda*ContactManager. Database. dbproj* ), bu dosyalar derleme ve dağıtım sürecinin çeşitli yönlerini denetler:</span><span class="sxs-lookup"><span data-stu-id="656e4-112">Together with the project file (*ContactManager.Database.dbproj* in this case), these files control various aspects of the build and deployment process:</span></span>

- <span data-ttu-id="656e4-113">*Database. sqlcmdvars* dosyası, projeyi dağıtırken kullandığınız HERHANGI bir sqlcmd değişkeni için değerler sağlar.</span><span class="sxs-lookup"><span data-stu-id="656e4-113">The *Database.sqlcmdvars* file provides values for any SQLCMD variables you use when you deploy the project.</span></span> <span data-ttu-id="656e4-114">Her çözüm yapılandırması (örneğin, hata ayıklama ve yayın) farklı bir. sqlcmdvars dosyası belirtebilir.</span><span class="sxs-lookup"><span data-stu-id="656e4-114">Each solution configuration (for example, debug and release) can specify a different .sqlcmdvars file.</span></span>
- <span data-ttu-id="656e4-115">*Database. sqldeployment* dosyası, projenizde tanımlanan harmanlamayı ya da hedef sunucunun harmanlamasını kullanmak, hedef veritabanının her seferinde yeniden oluşturulup oluşturulmayacağını veya mevcut veritabanını güncel hale getirmek için bu şekilde değişiklik yapıp kılmayacağını, dağıtıma özgü ayarlar sağlar.</span><span class="sxs-lookup"><span data-stu-id="656e4-115">The *Database.sqldeployment* file provides deployment-specific settings, like whether to use the collation defined in your project or the collation of the destination server, whether to recreate the destination database every time or simply amend the existing database to bring it up to date, and so on.</span></span> <span data-ttu-id="656e4-116">Her çözüm yapılandırması, farklı bir. sqldeployment dosyası belirtebilir.</span><span class="sxs-lookup"><span data-stu-id="656e4-116">Each solution configuration can specify a different .sqldeployment file.</span></span>
- <span data-ttu-id="656e4-117">*Database. sqlpermissions* dosyası, hedef veritabanına eklemek istediğiniz izinleri tanımlamak için KULLANABILECEĞINIZ bir XML belgesidir.</span><span class="sxs-lookup"><span data-stu-id="656e4-117">The *Database.sqlpermissions* file is an XML document that you can use to define any permissions you want to add to the target database.</span></span> <span data-ttu-id="656e4-118">Tüm çözüm konfigürasyonları aynı. sqlpermissions dosyasını paylaşır.</span><span class="sxs-lookup"><span data-stu-id="656e4-118">All solution configurations share the same .sqlpermissions file.</span></span>
- <span data-ttu-id="656e4-119">*Database. sqlsettings* dosyası, veritabanı oluşturulurken kullanılacak harmanlama, karşılaştırma işleçleri davranışı vb. gibi veritabanı düzeyinde özellikleri belirtir.</span><span class="sxs-lookup"><span data-stu-id="656e4-119">The *Database.sqlsettings* file specifies the database-level properties to use when creating the database, like the collation to use, the behavior of comparison operators, and so on.</span></span> <span data-ttu-id="656e4-120">Tüm çözüm konfigürasyonları aynı. sqlsettings dosyasını paylaşır.</span><span class="sxs-lookup"><span data-stu-id="656e4-120">All solution configurations share the same .sqlsettings file.</span></span>

<span data-ttu-id="656e4-121">Bu dosyaların Visual Studio 'da açılması ve içerikleri öğrenmeniz bir süre harcamaktır.</span><span class="sxs-lookup"><span data-stu-id="656e4-121">It's worth taking a moment to open these files in Visual Studio and familiarize yourself with the contents.</span></span>

<span data-ttu-id="656e4-122">Bir veritabanı projesi oluşturduğunuzda, yapı işlemi iki dosya oluşturur:</span><span class="sxs-lookup"><span data-stu-id="656e4-122">When you build a database project, the build process creates two files:</span></span>

- <span data-ttu-id="656e4-123">Bir *veritabanı şeması* (. dbschema dosyası).</span><span class="sxs-lookup"><span data-stu-id="656e4-123">A *database schema* (.dbschema file).</span></span> <span data-ttu-id="656e4-124">Bu, XML biçiminde oluşturmak istediğiniz veritabanının şemasını açıklar.</span><span class="sxs-lookup"><span data-stu-id="656e4-124">This describes the schema of the database you want to create in XML format.</span></span>
- <span data-ttu-id="656e4-125">*Dağıtım bildirimi* (. DeployManifest dosyası).</span><span class="sxs-lookup"><span data-stu-id="656e4-125">A *deployment manifest* (.deploymanifest file).</span></span> <span data-ttu-id="656e4-126">Bu, veritabanınızı oluşturmak ve dağıtmak için gereken tüm bilgileri içerir.</span><span class="sxs-lookup"><span data-stu-id="656e4-126">This contains all the information required to create and deploy your database.</span></span> <span data-ttu-id="656e4-127">Dağıtım yönergeleri (. sqldeployment dosyası) ve dağıtım öncesi veya dağıtım sonrası SQL betikleri gibi diğer kaynaklarla birlikte. dbschema dosyasına başvurur.</span><span class="sxs-lookup"><span data-stu-id="656e4-127">It references the .dbschema file along with other resources, like the deployment instructions (the .sqldeployment file) and any pre-deployment or post-deployment SQL scripts.</span></span>

<span data-ttu-id="656e4-128">Bu kaynaklar arasındaki ilişkiyi gösterir:</span><span class="sxs-lookup"><span data-stu-id="656e4-128">This shows the relationship between these resources:</span></span>

![](deploying-database-projects/_static/image2.png)

<span data-ttu-id="656e4-129">Gördüğünüz gibi,. sqlsettings dosyası ve. sqlpermissions dosyası yapı işlemine yönelik girişlerdir.</span><span class="sxs-lookup"><span data-stu-id="656e4-129">As you can see, the .sqlsettings file and the .sqlpermissions file are inputs to the build process.</span></span> <span data-ttu-id="656e4-130">Veritabanı proje dosyası ile birlikte, bu dosyalar veritabanı şeması dosyasını oluşturmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="656e4-130">Along with the database project file, these files are used to create the database schema file.</span></span> <span data-ttu-id="656e4-131">. Sqldeployment dosyası ve. sqlcmdvars dosyası, yapı işlemi değiştirilmeden geçer.</span><span class="sxs-lookup"><span data-stu-id="656e4-131">The .sqldeployment file and the .sqlcmdvars file pass through the build process unchanged.</span></span> <span data-ttu-id="656e4-132">Dağıtım bildirimi, veritabanı şemasının konumunu,. sqldeployment dosyasını,. sqlcmdvars dosyasını ve dağıtım öncesi veya dağıtım sonrası SQL betiklerini gösterir.</span><span class="sxs-lookup"><span data-stu-id="656e4-132">The deployment manifest indicates the location of the database schema, the .sqldeployment file, the .sqlcmdvars file, and any pre-deployment or post-deployment SQL scripts.</span></span>

## <a name="why-use-vsdbcmd-to-deploy-a-database-project"></a><span data-ttu-id="656e4-133">Bir veritabanı projesini dağıtmak için neden VSDBCMD kullanılmalıdır?</span><span class="sxs-lookup"><span data-stu-id="656e4-133">Why Use VSDBCMD to Deploy a Database Project?</span></span>

<span data-ttu-id="656e4-134">Veritabanı projelerini dağıtmaya yönelik çeşitli farklı yaklaşımlar vardır.</span><span class="sxs-lookup"><span data-stu-id="656e4-134">There are various different approaches to deploying database projects.</span></span> <span data-ttu-id="656e4-135">Ancak, bunların hepsi bir veritabanı projesini kurumsal bir ortamdaki uzak sunuculara dağıtmak için uygun değildir.</span><span class="sxs-lookup"><span data-stu-id="656e4-135">However, not all of them are suitable for deploying a database project to remote servers in an enterprise environment.</span></span> <span data-ttu-id="656e4-136">Veritabanı projesi dağıtımından istediğinizi göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="656e4-136">Consider what you want from a database project deployment.</span></span> <span data-ttu-id="656e4-137">Kurumsal dağıtım senaryolarında, muhtemelen şunları yapmak isteyebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="656e4-137">In enterprise deployment scenarios, you're likely to want:</span></span>

- <span data-ttu-id="656e4-138">Veritabanı projesini uzak bir konumdan dağıtma özelliği.</span><span class="sxs-lookup"><span data-stu-id="656e4-138">The ability to deploy the database project from a remote location.</span></span>
- <span data-ttu-id="656e4-139">Var olan bir veritabanında artımlı güncelleştirmeler yapma özelliği.</span><span class="sxs-lookup"><span data-stu-id="656e4-139">The ability to make incremental updates to an existing database.</span></span>
- <span data-ttu-id="656e4-140">Dağıtım öncesi betikleri veya dağıtım sonrası betikleri ekleme özelliği.</span><span class="sxs-lookup"><span data-stu-id="656e4-140">The ability to include pre-deployment scripts or post-deployment scripts.</span></span>
- <span data-ttu-id="656e4-141">Dağıtımı birden çok hedef ortama uyarlayabilme özelliği.</span><span class="sxs-lookup"><span data-stu-id="656e4-141">The ability to tailor the deployment to multiple destination environments.</span></span>
- <span data-ttu-id="656e4-142">Veritabanı projesini daha büyük, genellikle komut dosyalı, tek adımlı bir çözüm dağıtımının parçası olarak dağıtma özelliği.</span><span class="sxs-lookup"><span data-stu-id="656e4-142">The ability to deploy the database project as part of a larger, typically scripted, single-step solution deployment.</span></span>

<span data-ttu-id="656e4-143">Bir veritabanı projesini dağıtmak için kullanabileceğiniz üç ana yaklaşım vardır:</span><span class="sxs-lookup"><span data-stu-id="656e4-143">There are three main approaches you can use to deploy a database project:</span></span>

- <span data-ttu-id="656e4-144">Visual Studio 2010 ' de veritabanı proje türüyle dağıtım işlevselliğini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="656e4-144">You can use the deployment functionality with the database project type in Visual Studio 2010.</span></span> <span data-ttu-id="656e4-145">Visual Studio 2010 ' de bir veritabanı projesi derleyip dağıtırken, dağıtım işlemi, derleme yapılandırmasına özel bir SQL tabanlı dağıtım dosyası oluşturmak için dağıtım bildirimini kullanır.</span><span class="sxs-lookup"><span data-stu-id="656e4-145">When you build and deploy a database project in Visual Studio 2010, the deployment process uses the deployment manifest to generate a SQL-based deployment file specific to the build configuration.</span></span> <span data-ttu-id="656e4-146">Bu, zaten mevcut değilse veritabanını oluşturur veya zaten varsa veritabanında gerekli değişiklikleri yapar.</span><span class="sxs-lookup"><span data-stu-id="656e4-146">This will create the database if it doesn't already exist or make any necessary changes to the database if it does already exist.</span></span> <span data-ttu-id="656e4-147">Bu dosyayı hedef sunucunuzda çalıştırmak için SQLCMD. exe ' yi kullanabilir veya Visual Studio 'Yu dosyayı oluşturmak ve çalıştırmak için ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="656e4-147">You can use SQLCMD.exe to run this file on your destination server, or you can set Visual Studio to create and run the file.</span></span> <span data-ttu-id="656e4-148">Bu yaklaşımın dezavantajı, dağıtım ayarları üzerinde yalnızca sınırlı denetim sahibi olmanız olabilir.</span><span class="sxs-lookup"><span data-stu-id="656e4-148">The disadvantage of this approach is that you have only limited control over the deployment settings.</span></span> <span data-ttu-id="656e4-149">Ayrıca, ortama özgü değişken değerleri sağlamak için SQL dağıtım dosyasını da değiştirmeniz gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="656e4-149">You may often also need to modify the SQL deployment file to provide environment-specific variable values.</span></span> <span data-ttu-id="656e4-150">Bu yaklaşımı yalnızca Visual Studio 2010 yüklü bir bilgisayardan kullanabilirsiniz ve geliştiricinin tüm hedef ortamlar için bağlantı dizelerini ve kimlik bilgilerini bilmeleri ve sağlaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="656e4-150">You can only use this approach from a computer with Visual Studio 2010 installed, and the developer would need to know and provide connection strings and credentials for all destination environments.</span></span>
- <span data-ttu-id="656e4-151">Bir [veritabanını bir Web uygulaması projesinin parçası olarak dağıtmak](https://msdn.microsoft.com/library/dd465343.aspx)için Internet INFORMATION SERVICES (IIS) Web Dağıtım aracı 'nı (Web dağıtımı) kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="656e4-151">You can use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to [deploy a database as part of a web application project](https://msdn.microsoft.com/library/dd465343.aspx).</span></span> <span data-ttu-id="656e4-152">Ancak, bir hedef sunucuda var olan bir yerel veritabanını çoğaltmak yerine bir veritabanı projesi dağıtmak istiyorsanız bu yaklaşım çok daha karmaşıktır.</span><span class="sxs-lookup"><span data-stu-id="656e4-152">However, this approach is a lot more complex if you want to deploy a database project rather than simply replicate an existing local database on a destination server.</span></span> <span data-ttu-id="656e4-153">Veritabanı projesinin oluşturduğu SQL dağıtım betiğini çalıştırmak için Web Dağıtımı yapılandırabilirsiniz, ancak bunu yapmak için, Web uygulaması projeniz için özel bir WPP hedef dosyası oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="656e4-153">You can configure Web Deploy to run the SQL deployment script that the database project generates, but in order to do this, you need to create a custom WPP targets file for your web application project.</span></span> <span data-ttu-id="656e4-154">Bu, dağıtım işlemine önemli miktarda karmaşıklık ekler.</span><span class="sxs-lookup"><span data-stu-id="656e4-154">This adds a substantial amount of complexity to the deployment process.</span></span> <span data-ttu-id="656e4-155">Ayrıca, Web Dağıtımı var olan veritabanlarına Artımlı güncelleştirmeleri doğrudan desteklemez.</span><span class="sxs-lookup"><span data-stu-id="656e4-155">In addition, Web Deploy does not directly support incremental updates to existing databases.</span></span> <span data-ttu-id="656e4-156">Bu yaklaşım hakkında daha fazla bilgi için bkz. [Web yayımlama işlem hattını paketlemek için veritabanı projesi DAĞıTıLAN SQL dosyasını genişletme](https://go.microsoft.com/?linkid=9805121).</span><span class="sxs-lookup"><span data-stu-id="656e4-156">For more information on this approach, see [Extending the Web Publishing Pipeline to package database project deployed SQL file](https://go.microsoft.com/?linkid=9805121).</span></span>
- <span data-ttu-id="656e4-157">Veritabanı şemasını ya da dağıtım bildirimini kullanarak veritabanını dağıtmak için VSDBCMD yardımcı programını kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="656e4-157">You can use the VSDBCMD utility to deploy the database, using either the database schema or the deployment manifest.</span></span> <span data-ttu-id="656e4-158">VSDBCMD. exe ' yi, daha büyük, komut dosyalı dağıtım sürecinin bir parçası olarak veritabanlarını yayımlamanıza olanak tanıyan bir MSBuild hedefinden çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="656e4-158">You can call VSDBCMD.exe from an MSBuild target, which lets you publish databases as part of a larger, scripted deployment process.</span></span> <span data-ttu-id="656e4-159">. Sqlcmdvars dosyanızdaki ve diğer veritabanı özelliklerindeki değişkenleri, birden çok derleme yapılandırması oluşturmadan farklı ortamlarda dağıtımınızı özelleştirmenizi sağlayan bir VSDBCMD komutundan geçersiz kılabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="656e4-159">You can override the variables in your .sqlcmdvars file and lots of other database properties from a VSDBCMD command, which allows you to customize your deployment for different environments without creating multiple build configurations.</span></span> <span data-ttu-id="656e4-160">VSDBCMD, fark eden işlevsellik sağlar, yani yalnızca hedef veritabanını veritabanı şemanıza göre hizalamak için gerekli değişiklikleri yapar.</span><span class="sxs-lookup"><span data-stu-id="656e4-160">VSDBCMD provides differentiation functionality, which means it will make only the necessary changes to align a destination database with your database schema.</span></span> <span data-ttu-id="656e4-161">VSDBCMD, dağıtım işlemi üzerinde ayrıntılı denetim sağlayan çok çeşitli komut satırı seçenekleri de sunmaktadır.</span><span class="sxs-lookup"><span data-stu-id="656e4-161">VSDBCMD also offers a wide range of command-line options, which give you fine-grained control over the deployment process.</span></span>

<span data-ttu-id="656e4-162">Bu genel bakışta, genel bir kurumsal dağıtım senaryosuna en uygun yaklaşım olan VSDBCMD ' yi MSBuild ile birlikte kullanma makalesine bakabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="656e4-162">From this overview, you can see that using VSDBCMD with MSBuild is the approach best suited to a typical enterprise deployment scenario:</span></span>

|  | <span data-ttu-id="656e4-163">Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="656e4-163">Visual Studio 2010</span></span> | <span data-ttu-id="656e4-164">Web Deploy 2.0</span><span class="sxs-lookup"><span data-stu-id="656e4-164">Web Deploy 2.0</span></span> | <span data-ttu-id="656e4-165">VSDBCMD.exe</span><span class="sxs-lookup"><span data-stu-id="656e4-165">VSDBCMD.exe</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="656e4-166">Uzaktan dağıtımı destekliyor mu?</span><span class="sxs-lookup"><span data-stu-id="656e4-166">Supports remote deployment?</span></span> | <span data-ttu-id="656e4-167">Evet</span><span class="sxs-lookup"><span data-stu-id="656e4-167">Yes</span></span> | <span data-ttu-id="656e4-168">Evet</span><span class="sxs-lookup"><span data-stu-id="656e4-168">Yes</span></span> | <span data-ttu-id="656e4-169">Evet</span><span class="sxs-lookup"><span data-stu-id="656e4-169">Yes</span></span> |
| <span data-ttu-id="656e4-170">Artımlı güncelleştirmeler destekleniyor mu?</span><span class="sxs-lookup"><span data-stu-id="656e4-170">Supports incremental updates?</span></span> | <span data-ttu-id="656e4-171">Evet</span><span class="sxs-lookup"><span data-stu-id="656e4-171">Yes</span></span> | <span data-ttu-id="656e4-172">Hayır</span><span class="sxs-lookup"><span data-stu-id="656e4-172">No</span></span> | <span data-ttu-id="656e4-173">Evet</span><span class="sxs-lookup"><span data-stu-id="656e4-173">Yes</span></span> |
| <span data-ttu-id="656e4-174">Dağıtım öncesi/dağıtım sonrası betikleri destekliyor mu?</span><span class="sxs-lookup"><span data-stu-id="656e4-174">Supports pre/post-deployment scripts?</span></span> | <span data-ttu-id="656e4-175">Evet</span><span class="sxs-lookup"><span data-stu-id="656e4-175">Yes</span></span> | <span data-ttu-id="656e4-176">Evet</span><span class="sxs-lookup"><span data-stu-id="656e4-176">Yes</span></span> | <span data-ttu-id="656e4-177">Evet</span><span class="sxs-lookup"><span data-stu-id="656e4-177">Yes</span></span> |
| <span data-ttu-id="656e4-178">Çok ortamlı dağıtımı destekliyor mu?</span><span class="sxs-lookup"><span data-stu-id="656e4-178">Supports multi-environment deployment?</span></span> | <span data-ttu-id="656e4-179">Sınırlı</span><span class="sxs-lookup"><span data-stu-id="656e4-179">Limited</span></span> | <span data-ttu-id="656e4-180">Sınırlı</span><span class="sxs-lookup"><span data-stu-id="656e4-180">Limited</span></span> | <span data-ttu-id="656e4-181">Evet</span><span class="sxs-lookup"><span data-stu-id="656e4-181">Yes</span></span> |
| <span data-ttu-id="656e4-182">Betikleştirilmiş dağıtımı destekliyor mu?</span><span class="sxs-lookup"><span data-stu-id="656e4-182">Supports scripted deployment?</span></span> | <span data-ttu-id="656e4-183">Sınırlı</span><span class="sxs-lookup"><span data-stu-id="656e4-183">Limited</span></span> | <span data-ttu-id="656e4-184">Evet</span><span class="sxs-lookup"><span data-stu-id="656e4-184">Yes</span></span> | <span data-ttu-id="656e4-185">Evet</span><span class="sxs-lookup"><span data-stu-id="656e4-185">Yes</span></span> |

<span data-ttu-id="656e4-186">Bu konunun geri kalanında, veritabanı projelerini dağıtmak için VSDBCMD ' nin MSBuild ile kullanımı açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="656e4-186">The remainder of this topic describes the use of VSDBCMD with MSBuild to deploy database projects.</span></span>

## <a name="understanding-the-deployment-process"></a><span data-ttu-id="656e4-187">Dağıtım sürecini anlama</span><span class="sxs-lookup"><span data-stu-id="656e4-187">Understanding the Deployment Process</span></span>

<span data-ttu-id="656e4-188">VSDBCMD yardımcı programı veritabanı şemasını (. dbschema dosyası) veya dağıtım bildirimini (. DeployManifest dosyası) kullanarak bir veritabanını dağıtmanıza olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="656e4-188">The VSDBCMD utility lets you deploy a database using either the database schema (the .dbschema file) or the deployment manifest (the .deploymanifest file).</span></span> <span data-ttu-id="656e4-189">Uygulamada, dağıtım bildirimi, çeşitli dağıtım özellikleri için varsayılan değerler sağlamanıza ve dağıtım öncesi veya dağıtım sonrası SQL betikleri çalıştırmak istediğinizi belirleyebilmenizi sağlayan dağıtım bildirimini neredeyse her zaman kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="656e4-189">In practice, you'll almost always use the deployment manifest, as the deployment manifest lets you provide default values for various deployment properties and identify any pre-deployment or post-deployment SQL scripts you want to run.</span></span> <span data-ttu-id="656e4-190">Örneğin, bu VSDBCMD komutu, **ContactManager** veritabanını bir test ortamındaki veritabanı sunucusuna dağıtmak için kullanılır:</span><span class="sxs-lookup"><span data-stu-id="656e4-190">For example, this VSDBCMD command is used to deploy the **ContactManager** database to a database server in a test environment:</span></span>

[!code-console[Main](deploying-database-projects/samples/sample1.cmd)]

<span data-ttu-id="656e4-191">Bu durumda:</span><span class="sxs-lookup"><span data-stu-id="656e4-191">In this case:</span></span>

- <span data-ttu-id="656e4-192">**/A** (veya **/Action**) anahtarı, VSDBCMD ' nin ne yapmak istediğinizi belirtir.</span><span class="sxs-lookup"><span data-stu-id="656e4-192">The **/a** (or **/Action**) switch specifies what you want VSDBCMD to do.</span></span> <span data-ttu-id="656e4-193">Bunu **içeri** veya **dağıtıma**ayarlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="656e4-193">You can set this to **Import** or **Deploy**.</span></span> <span data-ttu-id="656e4-194">**Içeri aktarma** seçeneği, var olan bir veritabanından bir. dbschema dosyası oluşturmak için kullanılır ve **Deploy** seçeneği bir. dbschema dosyasını hedef veritabanına dağıtmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="656e4-194">The **Import** option is used to generate a .dbschema file from an existing database, and the **Deploy** option is used to deploy a .dbschema file to a target database.</span></span>
- <span data-ttu-id="656e4-195">**/MANIFEST** (veya **/ManifestFile**) anahtarı, dağıtmak istediğiniz. DeployManifest dosyasını tanımlar.</span><span class="sxs-lookup"><span data-stu-id="656e4-195">The **/manifest** (or **/ManifestFile**) switch identifies the .deploymanifest file you want to deploy.</span></span> <span data-ttu-id="656e4-196">Bunun yerine. dbschema dosyasını kullanmak isterseniz, **/model** (veya **/ModelFile**) anahtarını kullanın.</span><span class="sxs-lookup"><span data-stu-id="656e4-196">If you wanted to use the .dbschema file instead, you'd use the **/model** (or **/ModelFile**) switch.</span></span>
- <span data-ttu-id="656e4-197">**/CS** (veya **/ConnectionString**) anahtarı, hedef veritabanı sunucusu için bağlantı dizesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="656e4-197">The **/cs** (or **/ConnectionString**) switch provides the connection string for the target database server.</span></span> <span data-ttu-id="656e4-198">Bunun veritabanı oluşturmak için, VSDBCMD veritabanının&#x2014;adını içermediğinden sunucuya bağlanması gerektiğini unutmayın; tek bir veritabanına bağlanması gerekmez.</span><span class="sxs-lookup"><span data-stu-id="656e4-198">Note that this doesn't include the name of the database&#x2014;VSDBCMD needs to connect to the server to create the database; it doesn't need to connect to an individual database.</span></span> <span data-ttu-id="656e4-199">. DeployManifest dosyanız bir bağlantı dizesi içeriyorsa, bu anahtarı atlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="656e4-199">If your .deploymanifest file includes a connection string, you can omit this switch.</span></span> <span data-ttu-id="656e4-200">Anahtarı yine de kullanırsanız, anahtar değeri. DeployManifest değerini geçersiz kılar.</span><span class="sxs-lookup"><span data-stu-id="656e4-200">If you use the switch anyway, the switch value will override the .deploymanifest value.</span></span>
- <span data-ttu-id="656e4-201"><strong>/P: TargetDatabase</strong> özelliği, oluşturma sırasında hedef veritabanına atamak istediğiniz adı sağlar.</span><span class="sxs-lookup"><span data-stu-id="656e4-201">The <strong>/p:TargetDatabase</strong> property provides the name you want to assign to the target database on creation.</span></span> <span data-ttu-id="656e4-202">Bu,. DeployManifest dosyasındaki <strong>TargetDatabase</strong> özelliğinin değerini geçersiz kılar.</span><span class="sxs-lookup"><span data-stu-id="656e4-202">This overrides the value of the <strong>TargetDatabase</strong> property in the .deploymanifest file.</span></span> <span data-ttu-id="656e4-203">Çok çeşitli dağıtım özellikleri ayarlamak ve. sqlcmdvars dosyanızda belirtilen tüm SQLCMD değişkenlerini geçersiz kılmak için <strong>/p:</strong> <em>[Property Name]</em>sözdizimini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="656e4-203">You can use the <strong>/p:</strong> <em>[property name]</em>syntax to set a wide variety of deployment properties and to override any SQLCMD variables declared in your .sqlcmdvars file.</span></span>
- <span data-ttu-id="656e4-204">**/Dd +** (veya **/DeployToDatabase +** ) anahtarı, bir dağıtım oluşturup hedef ortama dağıtmak istediğinizi belirtir.</span><span class="sxs-lookup"><span data-stu-id="656e4-204">The **/dd+** (or **/DeployToDatabase+**) switch indicates that you want to create a deployment and deploy it to the target environment.</span></span> <span data-ttu-id="656e4-205">**/Dd-** belirtirseniz veya anahtarı atlarsanız, VSDBCMD bir dağıtım betiği oluşturur, ancak bunu hedef ortama dağıtmaz.</span><span class="sxs-lookup"><span data-stu-id="656e4-205">If you specify **/dd-**, or omit the switch, VSDBCMD will generate a deployment script but will not deploy it to the target environment.</span></span> <span data-ttu-id="656e4-206">Bu anahtar genellikle karışıklık kaynağıdır ve sonraki bölümde daha ayrıntılı olarak açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="656e4-206">This switch is often the source of confusion and is explained in more detail in the next section.</span></span>
- <span data-ttu-id="656e4-207">**/Script** (veya **/DeploymentScriptFile**) anahtarı, dağıtım betiğini nerede oluşturmak istediğinizi belirtir.</span><span class="sxs-lookup"><span data-stu-id="656e4-207">The **/script** (or **/DeploymentScriptFile**) switch specifies where you want to generate the deployment script.</span></span> <span data-ttu-id="656e4-208">Bu değer dağıtım sürecini etkilemez.</span><span class="sxs-lookup"><span data-stu-id="656e4-208">This value does not affect the deployment process.</span></span>

<span data-ttu-id="656e4-209">VSDBCMD hakkında daha fazla bilgi için bkz [. VSDBCMD Için komut satırı başvurusu. EXE (dağıtım ve şema Içeri aktarma)](https://msdn.microsoft.com/library/dd193283.aspx) ve [nasıl yapılır: VSDBCMD kullanarak bir veritabanını bir komut Isteminden dağıtıma hazırlama. EXE](https://msdn.microsoft.com/library/dd193258.aspx).</span><span class="sxs-lookup"><span data-stu-id="656e4-209">For more information on VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) and [How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE](https://msdn.microsoft.com/library/dd193258.aspx).</span></span>

<span data-ttu-id="656e4-210">VSDBCMD 'yi MSBuild proje dosyasından nasıl kullanabileceğiniz hakkında bir örnek için bkz. [Yapı sürecini anlama](understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="656e4-210">For an example of how you can use VSDBCMD from an MSBuild project file, see [Understanding the Build Process](understanding-the-build-process.md).</span></span> <span data-ttu-id="656e4-211">Birden çok ortam için veritabanı dağıtım ayarlarını yapılandırma örnekleri için bkz. [birden çok ortam Için veritabanı dağıtımlarını özelleştirme](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="656e4-211">For examples of how to configure database deployment settings for multiple environments, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="understanding-the-deploytodatabase-switch"></a><span data-ttu-id="656e4-212">DeployToDatabase anahtarını anlama</span><span class="sxs-lookup"><span data-stu-id="656e4-212">Understanding the DeployToDatabase Switch</span></span>

<span data-ttu-id="656e4-213">**/Dd** veya **/DeployToDatabase** anahtarının davranışı, VSDBCMD 'yi bir. dbschema dosyası veya. DeployManifest dosyası ile kullanıp kullanmayacağınızı bağlıdır.</span><span class="sxs-lookup"><span data-stu-id="656e4-213">The behavior of the **/dd** or **/DeployToDatabase** switch depends on whether you're using VSDBCMD with a .dbschema file or a .deploymanifest file.</span></span> <span data-ttu-id="656e4-214">Bir. dbschema dosyası kullanıyorsanız, davranış oldukça basittir:</span><span class="sxs-lookup"><span data-stu-id="656e4-214">If you're using a .dbschema file, the behavior is fairly straightforward:</span></span>

- <span data-ttu-id="656e4-215">**/Dd +** veya **/dd**belirtirseniz, VSDBCMD bir dağıtım betiği oluşturacak ve veritabanını dağıtacaktır.</span><span class="sxs-lookup"><span data-stu-id="656e4-215">If you specify **/dd+** or **/dd**, VSDBCMD will generate a deployment script and deploy the database.</span></span>
- <span data-ttu-id="656e4-216">**/DDI** belirtirseniz veya anahtarı atlarsanız, VSDBCMD yalnızca bir dağıtım betiği oluşturacaktır.</span><span class="sxs-lookup"><span data-stu-id="656e4-216">If you specify **/dd-** or omit the switch, VSDBCMD will generate a deployment script only.</span></span>

<span data-ttu-id="656e4-217">. DeployManifest dosyası kullanıyorsanız, davranış çok daha karmaşıktır.</span><span class="sxs-lookup"><span data-stu-id="656e4-217">If you're using a .deploymanifest file, the behavior is a lot more complicated.</span></span> <span data-ttu-id="656e4-218">Bunun nedeni. DeployManifest dosyasında, veritabanının dağıtılıp dağıtılmadığını da belirleyen bir **DeployToDatabase** Özellik adı içerir.</span><span class="sxs-lookup"><span data-stu-id="656e4-218">This is because the .deploymanifest file contains a property name **DeployToDatabase** that also determines whether the database is deployed.</span></span>

[!code-xml[Main](deploying-database-projects/samples/sample2.xml)]

<span data-ttu-id="656e4-219">Bu özelliğin değeri, veritabanı projesinin özelliklerine göre ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="656e4-219">The value of this property is set according to the properties of the database project.</span></span> <span data-ttu-id="656e4-220">**Dağıtım betiği (. SQL) oluşturmak**için **Dağıt eylemini** ayarlarsanız, değer **false**olur.</span><span class="sxs-lookup"><span data-stu-id="656e4-220">If you set the **Deploy action** to **Create a deployment script (.sql)**, the value will be **False**.</span></span> <span data-ttu-id="656e4-221">**Dağıtım betiği (. SQL) oluşturmak ve veritabanına dağıtmak**için **Dağıt eylemini** ayarlarsanız değer **true**olur.</span><span class="sxs-lookup"><span data-stu-id="656e4-221">If you set the **Deploy action** to **Create a deployment script (.sql) and deploy to the database**, the value will be **True**.</span></span>

> [!NOTE]
> <span data-ttu-id="656e4-222">Bu ayarlar, belirli bir yapı yapılandırması ve platformu ile ilişkilendirilir.</span><span class="sxs-lookup"><span data-stu-id="656e4-222">These settings are associated with a specific build configuration and platform.</span></span> <span data-ttu-id="656e4-223">Örneğin, **hata ayıklama** yapılandırması için ayarları yapılandırır ve ardından **Sürüm** yapılandırması ' nı kullanarak yayımlarsanız, ayarlarınız kullanılmaz.</span><span class="sxs-lookup"><span data-stu-id="656e4-223">For example, if you configure settings for the **Debug** configuration and then publish using the **Release** configuration, your settings will not be used.</span></span>

![](deploying-database-projects/_static/image3.png)

> [!NOTE]
> <span data-ttu-id="656e4-224">Bu senaryoda, Visual Studio 2010 ' ın veritabanınızı dağıtmasını istemediğiniz için dağıtım **eylemi** her zaman **bir dağıtım betiği (. SQL) oluşturmak**üzere ayarlanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="656e4-224">In this scenario, the **Deploy action** should always be set to **Create a deployment script (.sql)**, because you don't want Visual Studio 2010 to deploy your database.</span></span> <span data-ttu-id="656e4-225">Diğer bir deyişle, **DeployToDatabase** özelliği her zaman **false**olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="656e4-225">In other words, the **DeployToDatabase** property should always be **False**.</span></span>

<span data-ttu-id="656e4-226">Bir **DeployToDatabase** özelliği belirtildiğinde, **/dd** anahtarı yalnızca özellik değeri **false**olduğunda özelliği geçersiz kılar:</span><span class="sxs-lookup"><span data-stu-id="656e4-226">When a **DeployToDatabase** property is specified, the **/dd** switch will only override the property if the property value is **false**:</span></span>

- <span data-ttu-id="656e4-227">**DeployToDatabase** özelliği **false**ise ve **/dd +** ya da **/dd**belirtirseniz VSDBCMD, **DeployToDatabase** özelliğini geçersiz kılar ve veritabanını dağıtır.</span><span class="sxs-lookup"><span data-stu-id="656e4-227">If the **DeployToDatabase** property is **False**, and you specify **/dd+** or **/dd**, VSDBCMD will override the **DeployToDatabase** property and deploy the database.</span></span>
- <span data-ttu-id="656e4-228">**DeployToDatabase** özelliği **false**ise ve **/DDI** belirtirseniz veya anahtarı atlarsanız, VSDBCMD veritabanını dağıtmaz.</span><span class="sxs-lookup"><span data-stu-id="656e4-228">If the **DeployToDatabase** property is **False**, and you specify **/dd-** or omit the switch, VSDBCMD will not deploy the database.</span></span>
- <span data-ttu-id="656e4-229">**DeployToDatabase** özelliği **true**ise, VSDBCMD bu anahtarı yoksayar ve veritabanını dağıtır.</span><span class="sxs-lookup"><span data-stu-id="656e4-229">If the **DeployToDatabase** property is **True**, VSDBCMD will ignore the switch and deploy the database.</span></span>
- <span data-ttu-id="656e4-230">Her durumda, veritabanını dağıtıp dağıtmaktan bağımsız olarak bir dağıtım betiği oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="656e4-230">A deployment script is generated in each case, regardless of whether you're deploying the database as well.</span></span>

## <a name="conclusion"></a><span data-ttu-id="656e4-231">Sonuç</span><span class="sxs-lookup"><span data-stu-id="656e4-231">Conclusion</span></span>

<span data-ttu-id="656e4-232">Bu konu, Visual Studio 2010 ' deki veritabanı projelerine yönelik derleme ve dağıtım sürecine genel bir bakış sağlamıştır.</span><span class="sxs-lookup"><span data-stu-id="656e4-232">This topic provided an overview of the build and deployment process for database projects in Visual Studio 2010.</span></span> <span data-ttu-id="656e4-233">Ayrıca, kurumsal ölçekte veritabanı dağıtımını desteklemek için VSDBCMD. exe ' yi MSBuild ile nasıl kullanabileceğinizi da açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="656e4-233">It also described how you can use VSDBCMD.exe with MSBuild to support enterprise-scale database deployment.</span></span>

<span data-ttu-id="656e4-234">Bu uygulamada nasıl çalıştığı hakkında daha fazla bilgi için bkz. [birden çok ortam Için veritabanı dağıtımlarını özelleştirme](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="656e4-234">For more information on how this works in practice, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="further-reading"></a><span data-ttu-id="656e4-235">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="656e4-235">Further Reading</span></span>

<span data-ttu-id="656e4-236">Her ortam için ayrı bir dağıtım yapılandırma dosyası oluşturarak veritabanı dağıtımlarını özelleştirme hakkında daha fazla bilgi için bkz. [birden çok ortam Için veritabanı dağıtımlarını özelleştirme](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="656e4-236">For information on how to customize database deployments by creating a separate deployment configuration file for each environment, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="656e4-237">Dağıtım sonrası betiği çalıştırarak veritabanı rolü üyeliklerini yapılandırma hakkında yönergeler için bkz. [test ortamlarına veritabanı rolü üyelikleri dağıtma](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span><span class="sxs-lookup"><span data-stu-id="656e4-237">For guidance on how to configure database role memberships by running a post-deployment script, see [Deploying Database Role Memberships to Test Environments](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span></span> <span data-ttu-id="656e4-238">Üyelik veritabanlarının getirmesindeki bazı benzersiz güçlükleri yönetme hakkında yönergeler için bkz. [Üyelik veritabanlarını kurumsal ortamlara dağıtma](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span><span class="sxs-lookup"><span data-stu-id="656e4-238">For guidance on managing some of the unique challenges that membership databases impose, see [Deploying Membership Databases to Enterprise Environments](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span></span>

<span data-ttu-id="656e4-239">MSDN 'deki bu konular, Visual Studio veritabanı projeleri ve veritabanı dağıtım işlemi hakkında daha geniş yönergeler ve arka plan bilgileri sağlar:</span><span class="sxs-lookup"><span data-stu-id="656e4-239">These topics on MSDN provide broader guidance and background information on Visual Studio database projects and the database deployment process:</span></span>

- [<span data-ttu-id="656e4-240">Visual Studio 2010 SQL Server veritabanı projeleri</span><span class="sxs-lookup"><span data-stu-id="656e4-240">Visual Studio 2010 SQL Server Database Projects</span></span>](https://msdn.microsoft.com/library/ff678491.aspx)
- [<span data-ttu-id="656e4-241">Veritabanı değişikliğini yönetme</span><span class="sxs-lookup"><span data-stu-id="656e4-241">Managing Database Change</span></span>](https://msdn.microsoft.com/library/aa833404.aspx)
- [<span data-ttu-id="656e4-242">Nasıl yapılır: VSDBCMD kullanarak bir veritabanını bir komut Isteminden dağıtıma hazırlama. EXE</span><span class="sxs-lookup"><span data-stu-id="656e4-242">How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE</span></span>](https://msdn.microsoft.com/library/dd193258.aspx)
- [<span data-ttu-id="656e4-243">Veritabanına genel bakış Derleme ve Dağıtım</span><span class="sxs-lookup"><span data-stu-id="656e4-243">An Overview of Database Build and Deployment</span></span>](https://msdn.microsoft.com/library/aa833165.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="656e4-244">[Önceki](deploying-web-packages.md)
> [İleri](creating-and-running-a-deployment-command-file.md)</span><span class="sxs-lookup"><span data-stu-id="656e4-244">[Previous](deploying-web-packages.md)
[Next](creating-and-running-a-deployment-command-file.md)</span></span>
