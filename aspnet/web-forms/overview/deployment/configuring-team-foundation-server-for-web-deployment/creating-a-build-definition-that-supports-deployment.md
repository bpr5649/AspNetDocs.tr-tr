---
uid: web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
title: Dağıtımı destekleyen bir derleme tanımı oluşturma | Microsoft Docs
author: jrjlee
description: Team Foundation Server (TFS) 2010 ' de herhangi bir tür derlemeyi gerçekleştirmek istiyorsanız, takım projeniz içinde bir yapı tanımı oluşturmanız gerekir. Bu konu,...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: fe47a018-f6d0-4979-80e7-5b1fa75a5865
msc.legacyurl: /web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
msc.type: authoredcontent
ms.openlocfilehash: e11c91a824446572aaf0b3bc6954b9b8ffb4eaff
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78604001"
---
# <a name="creating-a-build-definition-that-supports-deployment"></a><span data-ttu-id="27c86-104">Dağıtımı Destekleyen Bir Derleme Tanımı Oluşturma</span><span class="sxs-lookup"><span data-stu-id="27c86-104">Creating a Build Definition That Supports Deployment</span></span>

<span data-ttu-id="27c86-105">[Jason Lee](https://github.com/jrjlee) tarafından</span><span class="sxs-lookup"><span data-stu-id="27c86-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="27c86-106">PDF 'YI indir</span><span class="sxs-lookup"><span data-stu-id="27c86-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="27c86-107">Team Foundation Server (TFS) 2010 ' de herhangi bir tür derlemeyi gerçekleştirmek istiyorsanız, takım projeniz içinde bir yapı tanımı oluşturmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="27c86-107">If you want to perform any kind of build in Team Foundation Server (TFS) 2010, you need to create a build definition within your team project.</span></span> <span data-ttu-id="27c86-108">Bu konu, TFS 'de yeni bir derleme tanımı oluşturmayı ve takım derlemesi içindeki derleme işleminin bir parçası olarak Web dağıtımını denetlemeyi açıklar.</span><span class="sxs-lookup"><span data-stu-id="27c86-108">This topic describes how to create a new build definition in TFS and how to control web deployment as part of the build process in Team Build.</span></span>

<span data-ttu-id="27c86-109">Bu konu, Fabrikam, Inc adlı kurgusal bir şirketin Kurumsal Dağıtım gereksinimlerini temel alarak bir öğretici serisinin bir parçasını oluşturur. Bu öğretici serisi, bir ASP.NET MVC&#x2014;3 uygulaması, Windows Communication Foundation (WCF) hizmeti ve bir veritabanı projesi dahil, gerçekçi bir karmaşıklık düzeyine sahip bir Web uygulamasını temsil etmek üzere bir örnek çözüm olan [Contact Manager çözümünü](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;kullanır.</span><span class="sxs-lookup"><span data-stu-id="27c86-109">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="27c86-110">Bu öğreticilerin temelini oluşturan dağıtım yöntemi, derleme ve dağıtım sürecinin, her hedef ortam için uygulanan derleme yönergelerini içeren iki proje&#x2014;dosyası tarafından denetlendiği ve ortama özgü derleme ve dağıtım ayarlarını içeren, proje [dosyasını anlama](../web-deployment-in-the-enterprise/understanding-the-project-file.md)bölümünde açıklanan bölünmüş proje dosyası yaklaşımını temel alır.</span><span class="sxs-lookup"><span data-stu-id="27c86-110">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build and deployment process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="27c86-111">Derleme zamanında, ortama özgü proje dosyası, derleme yönergelerinin tam bir kümesini oluşturmak için ortam agtik proje dosyası ile birleştirilir.</span><span class="sxs-lookup"><span data-stu-id="27c86-111">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="27c86-112">Göreve genel bakış</span><span class="sxs-lookup"><span data-stu-id="27c86-112">Task Overview</span></span>

<span data-ttu-id="27c86-113">Yapı tanımı, TFS 'deki takım projeleri için derlemelerin nasıl ve ne zaman gerçekleşeceğini denetleyen mekanizmadır.</span><span class="sxs-lookup"><span data-stu-id="27c86-113">A build definition is the mechanism that controls how and when builds occur for team projects in TFS.</span></span> <span data-ttu-id="27c86-114">Her derleme tanımı şunları belirtir:</span><span class="sxs-lookup"><span data-stu-id="27c86-114">Each build definition specifies:</span></span>

- <span data-ttu-id="27c86-115">Visual Studio çözüm dosyaları veya özel Microsoft Build Engine (MSBuild) proje dosyaları gibi derlemek istediğiniz şeyler.</span><span class="sxs-lookup"><span data-stu-id="27c86-115">The things you want to build, like Visual Studio solution files or custom Microsoft Build Engine (MSBuild) project files.</span></span>
- <span data-ttu-id="27c86-116">El ile Tetikleyiciler, sürekli tümleştirme (CI) veya geçişli iadeler gibi bir yapı ne zaman gerçekleşmesi gerektiğini belirleme ölçütleri.</span><span class="sxs-lookup"><span data-stu-id="27c86-116">The criteria that determine when a build should take place, like manual triggers, continuous integration (CI), or gated check-ins.</span></span>
- <span data-ttu-id="27c86-117">Ekip derlemesinin, Web paketleri ve veritabanı betikleri gibi dağıtım yapıtları dahil olmak üzere derleme çıktıları göndereceği konum.</span><span class="sxs-lookup"><span data-stu-id="27c86-117">The location to which Team Build should send build outputs, including deployment artifacts like web packages and database scripts.</span></span>
- <span data-ttu-id="27c86-118">Her bir yapılandırmanın korunması gereken süre miktarı.</span><span class="sxs-lookup"><span data-stu-id="27c86-118">The amount of time that each build should be retained.</span></span>
- <span data-ttu-id="27c86-119">Yapı sürecinin diğer çeşitli parametreleri.</span><span class="sxs-lookup"><span data-stu-id="27c86-119">Various other parameters of the build process.</span></span>

> [!NOTE]
> <span data-ttu-id="27c86-120">Derleme tanımları hakkında daha fazla bilgi için bkz. [Yapı Işleminizi tanımlama](https://msdn.microsoft.com/library/ms181715.aspx).</span><span class="sxs-lookup"><span data-stu-id="27c86-120">For more information on build definitions, see [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span>

<span data-ttu-id="27c86-121">Bu konuda, bir geliştirici yeni içerikte denetlediğinde bir derlemeyi tetiklenmesi için CI kullanan bir yapı tanımı oluşturma işlemi gösterilir.</span><span class="sxs-lookup"><span data-stu-id="27c86-121">This topic will show you how to create a build definition that uses CI, so that a build is triggered when a developer checks in new content.</span></span> <span data-ttu-id="27c86-122">Oluşturma işlemi başarılı olursa, yapı hizmeti çözümü bir test ortamına dağıtmak için özel bir proje dosyası çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="27c86-122">If the build succeeds, the build service runs a custom project file to deploy the solution to a test environment.</span></span>

<span data-ttu-id="27c86-123">Bir derlemeyi tetiklemeniz durumunda, bu eylemlerin olması gerekir:</span><span class="sxs-lookup"><span data-stu-id="27c86-123">When you trigger a build, these actions need to happen:</span></span>

- <span data-ttu-id="27c86-124">İlk olarak, takım derlemesinin çözümü oluşturması gerekir.</span><span class="sxs-lookup"><span data-stu-id="27c86-124">First, Team Build should build the solution.</span></span> <span data-ttu-id="27c86-125">Bu işlemin bir parçası olarak, takım derlemesi, çözümdeki Web uygulaması projelerinin her biri için Web dağıtım paketleri oluşturmak üzere Web yayımlama işlem hattını (WPP) çağırır.</span><span class="sxs-lookup"><span data-stu-id="27c86-125">As part of this process, Team Build will invoke the Web Publishing Pipeline (WPP) to generate web deployment packages for each of the web application projects in the solution.</span></span> <span data-ttu-id="27c86-126">Ekip derlemesi, Çözümle ilişkili tüm birim testlerini de çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="27c86-126">Team Build will also run any unit tests associated with the solution.</span></span>
- <span data-ttu-id="27c86-127">Çözüm derlemesi başarısız olursa, takım derlemesinin başka bir eylem yapması gerekmez.</span><span class="sxs-lookup"><span data-stu-id="27c86-127">If the solution build fails, Team Build should take no further action.</span></span> <span data-ttu-id="27c86-128">Birim testi hataları derleme hatası olarak değerlendirilmelidir.</span><span class="sxs-lookup"><span data-stu-id="27c86-128">Unit test failures should be treated as a build failure.</span></span>
- <span data-ttu-id="27c86-129">Çözüm derlemesi başarılı olursa, takım derlemesi çözümün dağıtımını denetleyen özel proje dosyasını çalıştırmalıdır.</span><span class="sxs-lookup"><span data-stu-id="27c86-129">If the solution build succeeds, Team Build should run the custom project file that controls the deployment of the solution.</span></span> <span data-ttu-id="27c86-130">Bu işlemin bir parçası olarak, takım derlemesi paketlenmiş Web uygulamalarını hedef Web sunucularına yüklemek için Internet Information Services (IIS) Web Dağıtım aracı 'nı (Web Dağıtımı) çağırır ve veritabanı oluşturmayı çalıştırmak için VSDBCMD. exe yardımcı programını çağıracaktır hedef veritabanı sunucularındaki betikler.</span><span class="sxs-lookup"><span data-stu-id="27c86-130">As part of this process, Team Build will invoke the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to install the packaged web applications on the destination web servers, and it will invoke the VSDBCMD.exe utility to run database creation scripts on the destination database servers.</span></span>

<span data-ttu-id="27c86-131">Bu işlem gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="27c86-131">This illustrates the process:</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image1.png)

<span data-ttu-id="27c86-132">[Ilgili kişi Yöneticisi](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) örnek çözümü, MSBuild veya takım derlemesi 'nden çalıştırabileceğiniz, *Publish. proj*adlı özel bir MSBuild proje dosyası içerir.</span><span class="sxs-lookup"><span data-stu-id="27c86-132">The [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution includes a custom MSBuild project file, *Publish.proj*, that you can run from MSBuild or Team Build.</span></span> <span data-ttu-id="27c86-133">Bu proje dosyası, [Yapı sürecini anlama](../web-deployment-in-the-enterprise/understanding-the-build-process.md)bölümünde açıklandığı gibi, Web paketlerinizi ve veritabanlarınızı bir hedef ortama dağıtan mantığı tanımlar.</span><span class="sxs-lookup"><span data-stu-id="27c86-133">As described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), this project file defines the logic that deploys your web packages and databases to a target environment.</span></span> <span data-ttu-id="27c86-134">Dosya, ekip derlemesinde çalışıyorsa yalnızca dağıtım görevlerinin çalıştırılmasını terk eden oluşturma ve paketleme sürecini atlalayan mantığı içerir.</span><span class="sxs-lookup"><span data-stu-id="27c86-134">The file includes logic that omits the building and packaging process if it's running in Team Build, leaving just the deployment tasks to run.</span></span> <span data-ttu-id="27c86-135">Bunun nedeni, dağıtımı bu şekilde otomatikleştirdiğiniz için genellikle çözümün başarıyla oluşturulduğundan ve dağıtım işlemi yapılmadan önce herhangi bir birim testini geçirdiğinden emin olmak isteyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="27c86-135">This is because when you automate deployment in this way, you'll typically want to ensure that the solution builds successfully and passes any unit tests before the deployment process commences.</span></span>

<span data-ttu-id="27c86-136">Sonraki bölümde, yeni bir derleme tanımı oluşturarak bu işlemin nasıl uygulanacağı açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="27c86-136">The next section explains how to implement this process by creating a new build definition.</span></span>

> [!NOTE]
> <span data-ttu-id="27c86-137">Tek bir&#x2014;otomatik işlemin bir çözüm&#x2014;derlemesi, testleri ve dağıttığı bu yordam, test ortamlarına dağıtıma en uygun olasılıktır.</span><span class="sxs-lookup"><span data-stu-id="27c86-137">This procedure&#x2014;in which a single automated process builds, tests, and deploys a solution&#x2014;is likely to be most suited to deployment to test environments.</span></span> <span data-ttu-id="27c86-138">Hazırlama ve üretim ortamları için bir test ortamında önceden doğrulamış ve doğruladığınız önceki bir derlemeden içerik dağıtmak istemeniz çok daha olasıdır.</span><span class="sxs-lookup"><span data-stu-id="27c86-138">For staging and production environments you're a lot more likely to want to deploy content from a previous build that you've already verified and validated in a test environment.</span></span> <span data-ttu-id="27c86-139">Bu yaklaşım, [belirli bir derlemeyi dağıtmaya yönelik bir](deploying-a-specific-build.md)sonraki konu başlığında açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="27c86-139">This approach is described in the next topic, [Deploying a Specific Build](deploying-a-specific-build.md).</span></span>

### <a name="who-performs-this-procedure"></a><span data-ttu-id="27c86-140">Bu yordamı kim gerçekleştiriyor?</span><span class="sxs-lookup"><span data-stu-id="27c86-140">Who Performs This Procedure?</span></span>

<span data-ttu-id="27c86-141">Genellikle, bir TFS Yöneticisi bu yordamı gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="27c86-141">Typically, a TFS administrator performs this procedure.</span></span> <span data-ttu-id="27c86-142">Bazı durumlarda, bir geliştirici ekibi lideri TFS 'deki takım projesi koleksiyonu için sorumluluk alabilir.</span><span class="sxs-lookup"><span data-stu-id="27c86-142">In some cases, a developer team leader may take responsibility for the team project collection in TFS.</span></span> <span data-ttu-id="27c86-143">Yeni bir derleme tanımı oluşturmak için çözümünüzü içeren takım projesi koleksiyonu için **proje koleksiyonu derleme yöneticileri** grubunun bir üyesi olmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="27c86-143">In order to create a new build definition, you need to be a member of the **Project Collection Build Administrators** group for the team project collection that contains your solution.</span></span>

## <a name="create-a-build-definition-for-ci-and-deployment"></a><span data-ttu-id="27c86-144">CI ve dağıtım için derleme tanımı oluşturma</span><span class="sxs-lookup"><span data-stu-id="27c86-144">Create a Build Definition for CI and Deployment</span></span>

<span data-ttu-id="27c86-145">Sonraki yordamda, CI 'nin tetiklediği derleme tanımının nasıl oluşturulacağı açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="27c86-145">The next procedure describes how to create a build definition that CI triggers.</span></span> <span data-ttu-id="27c86-146">Yapı başarılı olursa çözüm, özel bir MSBuild proje dosyasındaki mantığı kullanılarak dağıtılır.</span><span class="sxs-lookup"><span data-stu-id="27c86-146">If the build succeeds, the solution is deployed using the logic in a custom MSBuild project file.</span></span>

<span data-ttu-id="27c86-147">**CI ve dağıtım için bir derleme tanımı oluşturmak için**</span><span class="sxs-lookup"><span data-stu-id="27c86-147">**To create a build definition for CI and deployment**</span></span>

1. <span data-ttu-id="27c86-148">Visual Studio 2010 ' de, **Takım Gezgini** penceresinde, takım projesi düğümünüz ' ı genişletin, **yapılar**' a sağ tıklayın ve ardından **Yeni derleme tanımı**' na tıklayın.</span><span class="sxs-lookup"><span data-stu-id="27c86-148">In Visual Studio 2010, in the **Team Explorer** window, expand your team project node, right-click **Builds**, and then click **New Build Definition**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image2.png)
2. <span data-ttu-id="27c86-149">**Genel** sekmesinde, derleme tanımına bir ad (örneğin, **deploytotest**) ve isteğe bağlı bir açıklama verin.</span><span class="sxs-lookup"><span data-stu-id="27c86-149">On the **General** tab, give the build definition a name (for example, **DeployToTest**) and an optional description.</span></span>
3. <span data-ttu-id="27c86-150">**Tetikleyici** sekmesinde, yeni bir derlemeyi tetiklemek istediğiniz ölçütü seçin.</span><span class="sxs-lookup"><span data-stu-id="27c86-150">On the **Trigger** tab, select the criteria on which you want to trigger a new build.</span></span> <span data-ttu-id="27c86-151">Örneğin, çözümü derlemek ve bir geliştirici yeni kodu her denetlediğinde test ortamına dağıtmak istiyorsanız **sürekli tümleştirme**' i seçin.</span><span class="sxs-lookup"><span data-stu-id="27c86-151">For example, if you want to build the solution and deploy to the test environment every time a developer checks in new code, select **Continuous Integration**.</span></span>
4. <span data-ttu-id="27c86-152">**Derleme Varsayılanları** sekmesinde, **derleme çıkışını aşağıdaki bırakma klasörüne kopyala** kutusuna bırakma klasörünüzün evrensel adlandırma kuralı (UNC) yolunu yazın (örneğin, **tfsbuild\bırakı\\** ).</span><span class="sxs-lookup"><span data-stu-id="27c86-152">On the **Build Defaults** tab, in the **Copy build output to the following drop folder** box, type the Universal Naming Convention (UNC) path of your drop folder (for example, **\\TFSBUILD\Drops**).</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image3.png)

    > [!NOTE]
    > <span data-ttu-id="27c86-153">Bu bırakma konumu, yapılandırdığınız bekletme ilkesine bağlı olarak çeşitli derlemeler depolar.</span><span class="sxs-lookup"><span data-stu-id="27c86-153">This drop location stores several builds, depending on the retention policy you configure.</span></span> <span data-ttu-id="27c86-154">Belirli bir derlemeden hazırlama veya üretim ortamına dağıtım yapıtları yayınlamak istediğinizde, burada bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="27c86-154">When you want to publish deployment artifacts from a specific build to a staging or production environment, this is where you'll find them.</span></span>
5. <span data-ttu-id="27c86-155">**İşlem** sekmesinde, **işlem dosyası oluştur** açılır listesinde **DefaultTemplate. xaml** ' i seçili bırakın.</span><span class="sxs-lookup"><span data-stu-id="27c86-155">On the **Process** tab, in the **Build process file** dropdown list, leave **DefaultTemplate.xaml** selected.</span></span> <span data-ttu-id="27c86-156">Bu, tüm yeni takım projelerine eklenen varsayılan yapı işlem şablonlarından biridir.</span><span class="sxs-lookup"><span data-stu-id="27c86-156">This is one of the default build process templates that get added to all new team projects.</span></span>
6. <span data-ttu-id="27c86-157">**Yapı işlemi parametreleri** tablosunda, oluşturulacak **öğeler** satırına tıklayın ve ardından **üç nokta** düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="27c86-157">In the **Build process parameters** table, click in the **Items to Build** row, and then click the **ellipsis** button.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image4.png)
7. <span data-ttu-id="27c86-158">**Derlenecek Öğeler** Iletişim kutusunda **Ekle**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="27c86-158">In the **Items to Build** dialog box, click **Add**.</span></span>
8. <span data-ttu-id="27c86-159">Çözüm dosyanızın konumuna gidin ve ardından **Tamam**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="27c86-159">Browse to the location of your solution file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image5.png)
9. <span data-ttu-id="27c86-160">**Derlenecek Öğeler** Iletişim kutusunda **Ekle**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="27c86-160">In the **Items to Build** dialog box, click **Add**.</span></span>
10. <span data-ttu-id="27c86-161">**Tür öğeleri** açılan listesinde **MSBuild proje dosyaları**' nı seçin.</span><span class="sxs-lookup"><span data-stu-id="27c86-161">In the **Items of type** dropdown list, select **MSBuild Project files**.</span></span>
11. <span data-ttu-id="27c86-162">Dağıtım işlemini denetlediğiniz özel proje dosyasının konumuna gidin, dosyayı seçin ve ardından **Tamam**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="27c86-162">Browse to the location of the custom project file with which you control the deployment process, select the file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image6.png)
12. <span data-ttu-id="27c86-163">**Oluşturulacak öğeler** iletişim kutusunda artık iki öğe gösterilmelidir.</span><span class="sxs-lookup"><span data-stu-id="27c86-163">The **Items to Build** dialog box should now show two items.</span></span> <span data-ttu-id="27c86-164">**Tamam**’a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="27c86-164">Click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image7.png)
13. <span data-ttu-id="27c86-165">**İşlem** sekmesinde, **Yapı işlemi parametreleri** tablosunda, **Gelişmiş** bölümünü genişletin.</span><span class="sxs-lookup"><span data-stu-id="27c86-165">On the **Process** tab, in the **Build process parameters** table, expand the **Advanced** section.</span></span>
14. <span data-ttu-id="27c86-166">**MSBuild bağımsız değişkenleri** satırında, oluşturulacak öğelerinizin *her biri için gereken MSBuild* komut satırı bağımsız değişkenlerini ekleyin.</span><span class="sxs-lookup"><span data-stu-id="27c86-166">In the **MSBuild Arguments** row, add any MSBuild command-line arguments that *either* of your items to build requires.</span></span> <span data-ttu-id="27c86-167">Contact Manager çözüm senaryosunda, bu bağımsız değişkenler gereklidir:</span><span class="sxs-lookup"><span data-stu-id="27c86-167">In the Contact Manager solution scenario, these arguments are required:</span></span>

    [!code-console[Main](creating-a-build-definition-that-supports-deployment/samples/sample1.cmd)]

    ![](creating-a-build-definition-that-supports-deployment/_static/image8.png)
15. <span data-ttu-id="27c86-168">Bu örnekte:</span><span class="sxs-lookup"><span data-stu-id="27c86-168">In this example:</span></span>

    1. <span data-ttu-id="27c86-169">Contact Manager çözümünü oluştururken **Deployonbuild = true** ve **deploytarget = paket** bağımsız değişkenleri gereklidir.</span><span class="sxs-lookup"><span data-stu-id="27c86-169">The **DeployOnBuild=true** and **DeployTarget=package** arguments are required when you build the Contact Manager solution.</span></span> <span data-ttu-id="27c86-170">Bu, Web [uygulaması projelerini oluşturma ve paketleme](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md)bölümünde açıklandığı gibi, her bir Web uygulaması projesini derlemeden sonra Web dağıtım paketleri oluşturmayı MSBuild 'e söyler.</span><span class="sxs-lookup"><span data-stu-id="27c86-170">This instructs MSBuild to create web deployment packages after building each web application project, as described in [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span></span>
    2. <span data-ttu-id="27c86-171">*Publish. proj* dosyasını oluşturduğunuzda **Targetenvpropsfile** bağımsız değişkeni gereklidir.</span><span class="sxs-lookup"><span data-stu-id="27c86-171">The **TargetEnvPropsFile** argument is required when you build the *Publish.proj* file.</span></span> <span data-ttu-id="27c86-172">Bu özellik, [Yapı sürecini anlama](../web-deployment-in-the-enterprise/understanding-the-build-process.md)bölümünde açıklandığı gibi ortama özgü yapılandırma dosyasının konumunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="27c86-172">This property indicates the location of the environment-specific configuration file, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>
16. <span data-ttu-id="27c86-173">**Bekletme ilkesi** sekmesinde, her bir türün kaç tane türünü gerektiği şekilde saklamak istediğinizi yapılandırın.</span><span class="sxs-lookup"><span data-stu-id="27c86-173">On the **Retention Policy** tab, configure how many builds of each type you want to retain as required.</span></span>
17. <span data-ttu-id="27c86-174">**Kaydet**'e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="27c86-174">Click **Save**.</span></span>

## <a name="queue-a-build"></a><span data-ttu-id="27c86-175">Bir Derlemeyi Sıraya Koyma</span><span class="sxs-lookup"><span data-stu-id="27c86-175">Queue a Build</span></span>

<span data-ttu-id="27c86-176">Bu noktada, en az bir yeni derleme tanımı oluşturdunuz.</span><span class="sxs-lookup"><span data-stu-id="27c86-176">At this point, you have created at least one new build definition.</span></span> <span data-ttu-id="27c86-177">Tanımladığınız derleme işlemi artık derleme tanımında belirttiğiniz tetikleyicilere göre çalışacaktır.</span><span class="sxs-lookup"><span data-stu-id="27c86-177">The build process you defined will now run according to the triggers you specified in the build definition.</span></span>

<span data-ttu-id="27c86-178">Derleme tanımınızı CI kullanacak şekilde yapılandırdıysanız, derleme tanımınızı iki şekilde test edebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="27c86-178">If you've configured your build definition to use CI, you can test your build definition in two ways:</span></span>

- <span data-ttu-id="27c86-179">Bir otomatik derlemeyi tetiklemek için takım projesine bazı içerikleri iade edin.</span><span class="sxs-lookup"><span data-stu-id="27c86-179">Check in some content to the team project to trigger an automatic build.</span></span>
- <span data-ttu-id="27c86-180">Derlemeyi el ile sıraya koyun.</span><span class="sxs-lookup"><span data-stu-id="27c86-180">Queue a build manually.</span></span>

<span data-ttu-id="27c86-181">**Bir derlemeyi el ile sıraya alma**</span><span class="sxs-lookup"><span data-stu-id="27c86-181">**To queue a build manually**</span></span>

1. <span data-ttu-id="27c86-182">**Takım Gezgini** penceresinde, derleme tanımına sağ tıklayın ve sonra **yeni derlemeyi kuyruğa al**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="27c86-182">In the **Team Explorer** window, right-click the build definition, and then click **Queue New Build**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image9.png)
2. <span data-ttu-id="27c86-183">**Derlemeyi kuyruğa al** iletişim kutusunda derleme özelliklerini gözden geçirin ve ardından **kuyruk**' ı tıklatın.</span><span class="sxs-lookup"><span data-stu-id="27c86-183">In the **Queue Build** dialog box, review the build properties, and then click **Queue**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image10.png)

<span data-ttu-id="27c86-184">Bir derlemeyi el ile mi tetiklediğini ne olursa olsun&#x2014;, bir derleme sonucunu gözden geçirmek için **Takım Gezgini** penceresinde&#x2014;yapı tanımına otomatik olarak çift tıklayın.</span><span class="sxs-lookup"><span data-stu-id="27c86-184">To review the progress and the outcome of a build&#x2014;regardless of whether it was triggered manually or automatically&#x2014;double-click the build definition in the **Team Explorer** window.</span></span> <span data-ttu-id="27c86-185">Bu, bir **Yapı Gezgini** sekmesi açar.</span><span class="sxs-lookup"><span data-stu-id="27c86-185">This will open a **Build Explorer** tab.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image11.png)

<span data-ttu-id="27c86-186">Buradan başarısız olan derlemelerin sorunlarını giderebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="27c86-186">From here, you can troubleshoot failed builds.</span></span> <span data-ttu-id="27c86-187">Tek bir yapıya çift tıklarsanız Özet bilgilerini görüntüleyebilir ve ayrıntılı günlük dosyalarına tıklayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="27c86-187">If you double-click an individual build, you can view summary information and click through to detailed log files.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image12.png)

<span data-ttu-id="27c86-188">Bu bilgileri, başka bir derlemeyi denemeden önce başarısız yapıların sorunlarını gidermek ve sorunları gidermek için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="27c86-188">You can use this information to troubleshoot failed builds and address any problems before you attempt another build.</span></span>

> [!NOTE]
> <span data-ttu-id="27c86-189">Dağıtım mantığını çalıştıran derlemeler, yapı sunucusuna hedef ortamda gerekli izinleri verene kadar başarısız olabilir.</span><span class="sxs-lookup"><span data-stu-id="27c86-189">Builds that execute deployment logic are likely to fail until you have granted the build server any permissions required in the destination environment.</span></span> <span data-ttu-id="27c86-190">Daha fazla bilgi için bkz. [Takım derleme dağıtımı Için Izinleri yapılandırma](configuring-permissions-for-team-build-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="27c86-190">For more information, see [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md).</span></span>

## <a name="monitor-the-build-process"></a><span data-ttu-id="27c86-191">Yapı Işlemini izleme</span><span class="sxs-lookup"><span data-stu-id="27c86-191">Monitor the Build Process</span></span>

<span data-ttu-id="27c86-192">TFS, yapı sürecini izlemenize yardımcı olacak çok çeşitli işlevler sağlar.</span><span class="sxs-lookup"><span data-stu-id="27c86-192">TFS provides a broad range of functionality to help you monitor the build process.</span></span> <span data-ttu-id="27c86-193">Örneğin, TFS size bir e-posta gönderebilir veya bir derleme tamamlandığında görev çubuğu bildirim alanında uyarılar görüntüleyebilir.</span><span class="sxs-lookup"><span data-stu-id="27c86-193">For example, TFS can send you an email or display alerts in your taskbar notification area when a build has completed.</span></span> <span data-ttu-id="27c86-194">Daha fazla bilgi için bkz. [derlemeleri çalıştırma ve izleme](https://msdn.microsoft.com/library/ms181721.aspx).</span><span class="sxs-lookup"><span data-stu-id="27c86-194">For more information, see [Run and Monitor Builds](https://msdn.microsoft.com/library/ms181721.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="27c86-195">Sonuç</span><span class="sxs-lookup"><span data-stu-id="27c86-195">Conclusion</span></span>

<span data-ttu-id="27c86-196">Bu konu, TFS 'de bir derleme tanımının nasıl oluşturulacağını açıklamaktadır.</span><span class="sxs-lookup"><span data-stu-id="27c86-196">This topic described how to create a build definition in TFS.</span></span> <span data-ttu-id="27c86-197">Derleme tanımı CI için yapılandırılmıştır, bu nedenle derleme işlemi bir geliştirici takım projesine içerik iade ettiğinde çalışır.</span><span class="sxs-lookup"><span data-stu-id="27c86-197">The build definition is configured for CI, so the build process runs whenever a developer checks in content to the team project.</span></span> <span data-ttu-id="27c86-198">Derleme tanımı, Web paketleri ve veritabanı betikleri için bir hedef sunucu ortamına dağıtmak üzere özel bir MSBuild proje dosyası yürütür.</span><span class="sxs-lookup"><span data-stu-id="27c86-198">The build definition executes a custom MSBuild project file to deploy web packages and database scripts to a target server environment.</span></span>

<span data-ttu-id="27c86-199">Otomatik dağıtımın bir yapı sürecinin bir parçası olarak başarılı olması için, hedef Web sunucularındaki ve hedef veritabanı sunucusundaki yapı hizmeti hesabına uygun izinleri vermeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="27c86-199">In order for an automated deployment to succeed as part of a build process, you'll need to grant appropriate permissions to the build service account on the target web servers and the target database server.</span></span> <span data-ttu-id="27c86-200">Bu öğreticideki son konu, [ekip derleme dağıtımı Için Izinleri yapılandırırken](configuring-permissions-for-team-build-deployment.md), bir Team Build Server 'dan otomatik dağıtım için gerekli izinlerin nasıl belirleneceğini ve yapılandırılacağını açıklar.</span><span class="sxs-lookup"><span data-stu-id="27c86-200">The final topic in this tutorial, [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md), describes how to identify and configure the permissions required for automated deployment from a Team Build server.</span></span>

## <a name="further-reading"></a><span data-ttu-id="27c86-201">Daha Fazla Bilgi</span><span class="sxs-lookup"><span data-stu-id="27c86-201">Further Reading</span></span>

<span data-ttu-id="27c86-202">Derleme tanımları oluşturma hakkında daha fazla bilgi için bkz. [temel yapı tanımı oluşturma](https://msdn.microsoft.com/library/ms181716.aspx) ve [derleme işleminizi tanımlama](https://msdn.microsoft.com/library/ms181715.aspx).</span><span class="sxs-lookup"><span data-stu-id="27c86-202">For more information on creating build definitions, see [Create a Basic Build Definition](https://msdn.microsoft.com/library/ms181716.aspx) and [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span> <span data-ttu-id="27c86-203">Yapıları sıraya alma hakkında daha fazla bilgi için bkz. [bir derlemeyi sıraya](https://msdn.microsoft.com/library/ms181722.aspx)alma.</span><span class="sxs-lookup"><span data-stu-id="27c86-203">For more guidance on queuing builds, see [Queue a Build](https://msdn.microsoft.com/library/ms181722.aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="27c86-204">[Önceki](configuring-a-tfs-build-server-for-web-deployment.md)
> [İleri](deploying-a-specific-build.md)</span><span class="sxs-lookup"><span data-stu-id="27c86-204">[Previous](configuring-a-tfs-build-server-for-web-deployment.md)
[Next](deploying-a-specific-build.md)</span></span>
