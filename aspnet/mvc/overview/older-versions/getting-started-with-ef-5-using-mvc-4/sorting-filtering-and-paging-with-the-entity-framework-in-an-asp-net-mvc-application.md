---
uid: mvc/overview/older-versions/getting-started-with-ef-5-using-mvc-4/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application
title: Sıralama, filtreleme ve (3 10) ASP.NET MVC uygulamasındaki Entity Framework ile sayfalama | Microsoft Docs
author: tdykstra
description: Contoso University örnek web uygulaması Entity Framework 5 Code First ve Visual Studio kullanarak ASP.NET MVC 4 uygulamalarının nasıl oluşturulacağını gösterir...
ms.author: riande
ms.date: 07/30/2013
ms.assetid: 8af630e0-fffa-4110-9eca-c96e201b2724
msc.legacyurl: /mvc/overview/older-versions/getting-started-with-ef-5-using-mvc-4/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application
msc.type: authoredcontent
ms.openlocfilehash: afd1551d72fa3a5b925d7499c86731db4b6f0b61
ms.sourcegitcommit: 289e051cc8a90e8f7127e239fda73047bde4de12
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/25/2019
ms.locfileid: "58422018"
---
<a name="sorting-filtering-and-paging-with-the-entity-framework-in-an-aspnet-mvc-application-3-of-10"></a><span data-ttu-id="f02a5-103">Sıralama, filtreleme ve (3 10) ASP.NET MVC uygulamasındaki Entity Framework ile sayfalama</span><span class="sxs-lookup"><span data-stu-id="f02a5-103">Sorting, Filtering, and Paging with the Entity Framework in an ASP.NET MVC Application (3 of 10)</span></span>
====================
<span data-ttu-id="f02a5-104">tarafından [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="f02a5-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="f02a5-105">Projeyi yükle</span><span class="sxs-lookup"><span data-stu-id="f02a5-105">Download Completed Project</span></span>](http://code.msdn.microsoft.com/Getting-Started-with-dd0e2ed8)

> <span data-ttu-id="f02a5-106">Contoso University örnek web uygulaması Entity Framework 5 Code First ve Visual Studio 2012 kullanarak ASP.NET MVC 4 uygulamalarının nasıl oluşturulacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-106">The Contoso University sample web application demonstrates how to create ASP.NET MVC 4 applications using the Entity Framework 5 Code First and Visual Studio 2012.</span></span> <span data-ttu-id="f02a5-107">Öğretici serisinin hakkında daha fazla bilgi için bkz. [serideki ilk öğreticide](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="f02a5-107">For information about the tutorial series, see [the first tutorial in the series](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span> <span data-ttu-id="f02a5-108">Öğretici serisinin en baştan başlayın veya [Bu bölüm için bir başlangıç projesi indirme](building-the-ef5-mvc4-chapter-downloads.md) ve buradan başlayın.</span><span class="sxs-lookup"><span data-stu-id="f02a5-108">You can start the tutorial series from the beginning or [download a starter project for this chapter](building-the-ef5-mvc4-chapter-downloads.md) and start here.</span></span>
> 
> > [!NOTE] 
> > 
> > <span data-ttu-id="f02a5-109">Çözümleyemiyor, bir sorunla karşılaştıysanız [tamamlanmış bölüm indirme](building-the-ef5-mvc4-chapter-downloads.md) ve sorununuzu yeniden oluşturmaya çalışın.</span><span class="sxs-lookup"><span data-stu-id="f02a5-109">If you run into a problem you can't resolve, [download the completed chapter](building-the-ef5-mvc4-chapter-downloads.md) and try to reproduce your problem.</span></span> <span data-ttu-id="f02a5-110">Tamamlanan kodu kodunuza karşılaştırarak, sorunun çözümünü genellikle bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f02a5-110">You can generally find the solution to the problem by comparing your code to the completed code.</span></span> <span data-ttu-id="f02a5-111">Bazı yaygın hatalar ve bunları çözmek nasıl için bkz: [hatalarını ve geçici çözümleri bulabilirsiniz.](advanced-entity-framework-scenarios-for-an-mvc-web-application.md#errors)</span><span class="sxs-lookup"><span data-stu-id="f02a5-111">For some common errors and how to solve them, see [Errors and Workarounds.](advanced-entity-framework-scenarios-for-an-mvc-web-application.md#errors)</span></span>


<span data-ttu-id="f02a5-112">Önceki öğreticide, bir dizi web sayfaları için temel CRUD işlemleri için uygulanan `Student` varlıklar.</span><span class="sxs-lookup"><span data-stu-id="f02a5-112">In the previous tutorial you implemented a set of web pages for basic CRUD operations for `Student` entities.</span></span> <span data-ttu-id="f02a5-113">Bu öğreticide, sıralama, filtreleme ve sayfalama işlevselliğinin ekleyeceksiniz **Öğrenciler** dizin sayfası.</span><span class="sxs-lookup"><span data-stu-id="f02a5-113">In this tutorial you'll add sorting, filtering, and paging functionality to the **Students** Index page.</span></span> <span data-ttu-id="f02a5-114">Basit gruplandırma yapan bir sayfa da oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="f02a5-114">You'll also create a page that does simple grouping.</span></span>

<span data-ttu-id="f02a5-115">Aşağıdaki çizim, hazır olduğunuzda sayfanın nasıl görüneceğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-115">The following illustration shows what the page will look like when you're done.</span></span> <span data-ttu-id="f02a5-116">Sütun başlıkları, kullanıcının sütuna göre sıralamak için tıklayabileceği bağlantılar verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-116">The column headings are links that the user can click to sort by that column.</span></span> <span data-ttu-id="f02a5-117">Bir sütun başlığına tekrar tekrar tıklayarak, artan veya azalan sıralama düzeni arasında geçiş yapar.</span><span class="sxs-lookup"><span data-stu-id="f02a5-117">Clicking a column heading repeatedly toggles between ascending and descending sort order.</span></span>

![Students_Index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image1.png)

## <a name="add-column-sort-links-to-the-students-index-page"></a><span data-ttu-id="f02a5-119">Öğrenciler dizin sayfasına Sütun sıralama bağlantılar ekleme</span><span class="sxs-lookup"><span data-stu-id="f02a5-119">Add Column Sort Links to the Students Index Page</span></span>

<span data-ttu-id="f02a5-120">Öğrenci dizin sayfasına sıralama eklemek için değiştireceksiniz `Index` yöntemi `Student` denetleyicisi ve kodu ekleyin `Student` dizin görünümü.</span><span class="sxs-lookup"><span data-stu-id="f02a5-120">To add sorting to the Student Index page, you'll change the `Index` method of the `Student` controller and add code to the `Student` Index view.</span></span>

### <a name="add-sorting-functionality-to-the-index-method"></a><span data-ttu-id="f02a5-121">Index yöntemi işlevsellik sıralama Ekle</span><span class="sxs-lookup"><span data-stu-id="f02a5-121">Add Sorting Functionality to the Index Method</span></span>

<span data-ttu-id="f02a5-122">İçinde *Controllers\StudentController.cs*, değiştirin `Index` yöntemini aşağıdaki kod ile:</span><span class="sxs-lookup"><span data-stu-id="f02a5-122">In *Controllers\StudentController.cs*, replace the `Index` method with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample1.cs)]

<span data-ttu-id="f02a5-123">Bu kod alır bir `sortOrder` URL'ye sorgu dizesi parametresi.</span><span class="sxs-lookup"><span data-stu-id="f02a5-123">This code receives a `sortOrder` parameter from the query string in the URL.</span></span> <span data-ttu-id="f02a5-124">Sorgu dizesi değerini eylem yönteminin bir parametresi olarak ASP.NET MVC tarafından sağlanır.</span><span class="sxs-lookup"><span data-stu-id="f02a5-124">The query string value is provided by ASP.NET MVC as a parameter to the action method.</span></span> <span data-ttu-id="f02a5-125">Parametre "Name" veya "Tarih", ardından isteğe bağlı olarak bir alt çizgi ve azalan düzende belirtmek için "desc" dizesi bir dize olur.</span><span class="sxs-lookup"><span data-stu-id="f02a5-125">The parameter will be a string that's either "Name" or "Date", optionally followed by an underscore and the string "desc" to specify descending order.</span></span> <span data-ttu-id="f02a5-126">Varsayılan sıralama artan düzendedir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-126">The default sort order is ascending.</span></span>

<span data-ttu-id="f02a5-127">Dizin Sayfası istendi, ilk kez hiçbir sorgu dizesi yoktur.</span><span class="sxs-lookup"><span data-stu-id="f02a5-127">The first time the Index page is requested, there's no query string.</span></span> <span data-ttu-id="f02a5-128">Öğrenciler tarafından artan düzende görüntülenen `LastName`, başarısızlık durumunda tarafından belirlenen varsayılan değerdir `switch` deyimi.</span><span class="sxs-lookup"><span data-stu-id="f02a5-128">The students are displayed in ascending order by `LastName`, which is the default as established by the fall-through case in the `switch` statement.</span></span> <span data-ttu-id="f02a5-129">Kullanıcı uygun sütun başlığına köprü tıkladığında `sortOrder` değeri, sorgu dizesinde sağlanır.</span><span class="sxs-lookup"><span data-stu-id="f02a5-129">When the user clicks a column heading hyperlink, the appropriate `sortOrder` value is provided in the query string.</span></span>

<span data-ttu-id="f02a5-130">İki `ViewBag` görünüm sütun başlığı köprüler uygun sorgu dizesi değerleri yapılandırabilirsiniz. böylece değişkenler kullanılır:</span><span class="sxs-lookup"><span data-stu-id="f02a5-130">The two `ViewBag` variables are used so that the view can configure the column heading hyperlinks with the appropriate query string values:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample2.cs)]

<span data-ttu-id="f02a5-131">Üçlü deyimleri şunlardır.</span><span class="sxs-lookup"><span data-stu-id="f02a5-131">These are ternary statements.</span></span> <span data-ttu-id="f02a5-132">Olmadığını birincinin belirtir `sortOrder` parametresi null veya boş `ViewBag.NameSortParm` ayarlanması gerekir "adı\_desc"; Aksi takdirde boş bir dize olarak ayarlanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-132">The first one specifies that if the `sortOrder` parameter is null or empty, `ViewBag.NameSortParm` should be set to "name\_desc"; otherwise, it should be set to an empty string.</span></span> <span data-ttu-id="f02a5-133">Bu iki deyimden sütun başlığı köprüler şu şekilde ayarlayın görünümün etkinleştir:</span><span class="sxs-lookup"><span data-stu-id="f02a5-133">These two statements enable the view to set the column heading hyperlinks as follows:</span></span>

| <span data-ttu-id="f02a5-134">Geçerli bir sıralama düzeni</span><span class="sxs-lookup"><span data-stu-id="f02a5-134">Current sort order</span></span> | <span data-ttu-id="f02a5-135">Son adı köprü</span><span class="sxs-lookup"><span data-stu-id="f02a5-135">Last Name Hyperlink</span></span> | <span data-ttu-id="f02a5-136">Tarih köprü</span><span class="sxs-lookup"><span data-stu-id="f02a5-136">Date Hyperlink</span></span> |
| --- | --- | --- |
| <span data-ttu-id="f02a5-137">Adı artan en son</span><span class="sxs-lookup"><span data-stu-id="f02a5-137">Last Name ascending</span></span> | <span data-ttu-id="f02a5-138">descending</span><span class="sxs-lookup"><span data-stu-id="f02a5-138">descending</span></span> | <span data-ttu-id="f02a5-139">ascending</span><span class="sxs-lookup"><span data-stu-id="f02a5-139">ascending</span></span> |
| <span data-ttu-id="f02a5-140">Son azalan düzende ad</span><span class="sxs-lookup"><span data-stu-id="f02a5-140">Last Name descending</span></span> | <span data-ttu-id="f02a5-141">ascending</span><span class="sxs-lookup"><span data-stu-id="f02a5-141">ascending</span></span> | <span data-ttu-id="f02a5-142">ascending</span><span class="sxs-lookup"><span data-stu-id="f02a5-142">ascending</span></span> |
| <span data-ttu-id="f02a5-143">Artan tarihi</span><span class="sxs-lookup"><span data-stu-id="f02a5-143">Date ascending</span></span> | <span data-ttu-id="f02a5-144">ascending</span><span class="sxs-lookup"><span data-stu-id="f02a5-144">ascending</span></span> | <span data-ttu-id="f02a5-145">descending</span><span class="sxs-lookup"><span data-stu-id="f02a5-145">descending</span></span> |
| <span data-ttu-id="f02a5-146">Azalan düzende tarihi</span><span class="sxs-lookup"><span data-stu-id="f02a5-146">Date descending</span></span> | <span data-ttu-id="f02a5-147">ascending</span><span class="sxs-lookup"><span data-stu-id="f02a5-147">ascending</span></span> | <span data-ttu-id="f02a5-148">ascending</span><span class="sxs-lookup"><span data-stu-id="f02a5-148">ascending</span></span> |

<span data-ttu-id="f02a5-149">Yöntemini kullanan [LINQ to Entities](https://msdn.microsoft.com/library/bb386964.aspx) göre sıralamak için sütun belirtmek için.</span><span class="sxs-lookup"><span data-stu-id="f02a5-149">The method uses [LINQ to Entities](https://msdn.microsoft.com/library/bb386964.aspx) to specify the column to sort by.</span></span> <span data-ttu-id="f02a5-150">Kod oluşturur bir [Iqueryable](https://msdn.microsoft.com/library/bb351562.aspx) önce değişken `switch` ifadesi, değiştiren içinde `switch` deyimi ve çağrılarını `ToList` sonrasına `switch` deyimi.</span><span class="sxs-lookup"><span data-stu-id="f02a5-150">The code creates an [IQueryable](https://msdn.microsoft.com/library/bb351562.aspx) variable before the `switch` statement, modifies it in the `switch` statement, and calls the `ToList` method after the `switch` statement.</span></span> <span data-ttu-id="f02a5-151">Ne zaman oluşturma ve değiştirme `IQueryable` değişkenleri, sorgu veritabanına gönderilir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-151">When you create and modify `IQueryable` variables, no query is sent to the database.</span></span> <span data-ttu-id="f02a5-152">Sorgu, dönüştürmek kadar yürütülmez `IQueryable` nesne gibi bir yöntem çağırarak koleksiyonuna `ToList`.</span><span class="sxs-lookup"><span data-stu-id="f02a5-152">The query is not executed until you convert the `IQueryable` object into a collection by calling a method such as `ToList`.</span></span> <span data-ttu-id="f02a5-153">Bu nedenle, bu kod, kadar yürütülmez tek bir sorgu sonuçları `return View` deyimi.</span><span class="sxs-lookup"><span data-stu-id="f02a5-153">Therefore, this code results in a single query that is not executed until the `return View` statement.</span></span>

### <a name="add-column-heading-hyperlinks-to-the-student-index-view"></a><span data-ttu-id="f02a5-154">Sütun başlığı köprüler Öğrenci dizini görünümü ekleme</span><span class="sxs-lookup"><span data-stu-id="f02a5-154">Add Column Heading Hyperlinks to the Student Index View</span></span>

<span data-ttu-id="f02a5-155">İçinde *Views\Student\Index.cshtml*, değiştirin `<tr>` ve `<th>` vurgulanmış kodu başlık satırı için öğeleri:</span><span class="sxs-lookup"><span data-stu-id="f02a5-155">In *Views\Student\Index.cshtml*, replace the `<tr>` and `<th>` elements for the heading row with the highlighted code:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample3.cshtml?highlight=5-15)]

<span data-ttu-id="f02a5-156">Bilgiler, bu kodu kullanan `ViewBag` uygun sorgu köprülerle ayarlamak için özellikler dize değerleri.</span><span class="sxs-lookup"><span data-stu-id="f02a5-156">This code uses the information in the `ViewBag` properties to set up hyperlinks with the appropriate query string values.</span></span>

<span data-ttu-id="f02a5-157">Sayfayı çalıştırın ve tıklayın **Soyadı** ve **kayıt tarihi** sütun başlıkları, sıralama doğrulamak için çalışır.</span><span class="sxs-lookup"><span data-stu-id="f02a5-157">Run the page and click the **Last Name** and **Enrollment Date** column headings to verify that sorting works.</span></span>

![Students_Index_page_with_sort_hyperlinks](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image2.png)

<span data-ttu-id="f02a5-159">Tıkladıktan sonra **Soyadı** başlığı Öğrenciler soyadına göre azalan düzende görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-159">After you click the **Last Name** heading, students are displayed in descending last name order.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image3.png)

## <a name="add-a-search-box-to-the-students-index-page"></a><span data-ttu-id="f02a5-160">Bir arama kutusu Öğrenciler dizin sayfasına ekleme</span><span class="sxs-lookup"><span data-stu-id="f02a5-160">Add a Search Box to the Students Index Page</span></span>

<span data-ttu-id="f02a5-161">Öğrenciler dizin sayfasına filtre eklemek için görünümü için metin kutusu ve bir Gönder düğmesi ekleyin ve karşılık gelen değişiklik `Index` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="f02a5-161">To add filtering to the Students Index page, you'll add a text box and a submit button to the view and make corresponding changes in the `Index` method.</span></span> <span data-ttu-id="f02a5-162">Metin kutusunda, ad ve soyadı alanları aramak için bir dize girin olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="f02a5-162">The text box will let you enter a string to search for in the first name and last name fields.</span></span>

### <a name="add-filtering-functionality-to-the-index-method"></a><span data-ttu-id="f02a5-163">Filtreleme işlevselliği dizin yöntemine ekleyin.</span><span class="sxs-lookup"><span data-stu-id="f02a5-163">Add Filtering Functionality to the Index Method</span></span>

<span data-ttu-id="f02a5-164">İçinde *Controllers\StudentController.cs*, değiştirin `Index` yöntemini aşağıdaki kodla (değişiklikleri vurgulanır):</span><span class="sxs-lookup"><span data-stu-id="f02a5-164">In *Controllers\StudentController.cs*, replace the `Index` method with the following code (the changes are highlighted):</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample4.cs?highlight=1,7-11)]

<span data-ttu-id="f02a5-165">Eklediğiniz bir `searchString` parametresi `Index` yöntemi.</span><span class="sxs-lookup"><span data-stu-id="f02a5-165">You've added a `searchString` parameter to the `Index` method.</span></span> <span data-ttu-id="f02a5-166">LINQ deyime ayrıca eklediğiniz bir `where` yan tümcesi yalnızca Öğrenciler, ad ve Soyadı arama dizesini içeren seçer.</span><span class="sxs-lookup"><span data-stu-id="f02a5-166">You've also added to the LINQ statement a `where` clause that selects only students whose first name or last name contains the search string.</span></span> <span data-ttu-id="f02a5-167">Dizin görünümüne ekleyeceksiniz bir metin kutusundan arama dizesi değeri alındı. Ekler deyimi [burada](https://msdn.microsoft.com/library/bb535040.aspx) yan tümcesi yalnızca aramak için bir değer ise yürütülür.</span><span class="sxs-lookup"><span data-stu-id="f02a5-167">The search string value is received from a text box that you'll add to the Index view.The statement that adds the [where](https://msdn.microsoft.com/library/bb535040.aspx) clause is executed only if there's a value to search for.</span></span>

> [!NOTE]
> <span data-ttu-id="f02a5-168">Çoğu durumda bir Entity Framework varlık kümesini veya bir bellek içi koleksiyonunda bir genişletme yöntemi olarak aynı yöntemi çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f02a5-168">In many cases you can call the same method either on an Entity Framework entity set or as an extension method on an in-memory collection.</span></span> <span data-ttu-id="f02a5-169">Sonuçları normalde aynıdır, ancak bazı durumlarda farklı olabilir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-169">The results are normally the same but in some cases may be different.</span></span> <span data-ttu-id="f02a5-170">Örneğin, .NET Framework uygulamasını `Contains` yöntem boş bir dizeyi geçirmek, ancak SQL Server Compact 4.0 için Entity Framework sağlayıcısı boş dizeler için sıfır satır döndürür. tüm satırları döndürür.</span><span class="sxs-lookup"><span data-stu-id="f02a5-170">For example, the .NET Framework implementation of the `Contains` method returns all rows when you pass an empty string to it, but the Entity Framework provider for SQL Server Compact 4.0 returns zero rows for empty strings.</span></span> <span data-ttu-id="f02a5-171">Bu nedenle örnek kodu (yerleştirme `Where` deyimi içinde bir `if` deyimi) tüm SQL Server sürümleri için aynı sonuçları elde emin olur.</span><span class="sxs-lookup"><span data-stu-id="f02a5-171">Therefore the code in the example (putting the `Where` statement inside an `if` statement) makes sure that you get the same results for all versions of SQL Server.</span></span> <span data-ttu-id="f02a5-172">Ayrıca, .NET Framework uygulamasını `Contains` yöntemi varsayılan olarak büyük küçük harfe duyarlı bir karşılaştırma gerçekleştirir, ancak varsayılan olarak Entity Framework SQL Server sağlayıcıları gerçekleştirmek büyük küçük harf duyarsız karşılaştırmalar.</span><span class="sxs-lookup"><span data-stu-id="f02a5-172">Also, the .NET Framework implementation of the `Contains` method performs a case-sensitive comparison by default, but Entity Framework SQL Server providers perform case-insensitive comparisons by default.</span></span> <span data-ttu-id="f02a5-173">Bu nedenle, çağırma `ToUpper` test açıkça duyarlı hale getirmek için yöntem sağlar döndüreceği bir depoyu daha sonra kullanmak için kodu değiştirdiğinizde sonuçları değiştirmeyin bir `IEnumerable` koleksiyonu yerine bir `IQueryable` nesne.</span><span class="sxs-lookup"><span data-stu-id="f02a5-173">Therefore, calling the `ToUpper` method to make the test explicitly case-insensitive ensures that results do not change when you change the code later to use a repository, which will return an `IEnumerable` collection instead of an `IQueryable` object.</span></span> <span data-ttu-id="f02a5-174">(Çağırdığınızda `Contains` metodunda bir `IEnumerable` koleksiyonu, .NET Framework uygulaması alın; çağırdığınızda, üzerinde bir `IQueryable` nesne veritabanı sağlayıcısı uygulamasını edinin.)</span><span class="sxs-lookup"><span data-stu-id="f02a5-174">(When you call the `Contains` method on an `IEnumerable` collection, you get the .NET Framework implementation; when you call it on an `IQueryable` object, you get the database provider implementation.)</span></span>


### <a name="add-a-search-box-to-the-student-index-view"></a><span data-ttu-id="f02a5-175">Bir arama kutusu Öğrenci dizini görünümü ekleme</span><span class="sxs-lookup"><span data-stu-id="f02a5-175">Add a Search Box to the Student Index View</span></span>

<span data-ttu-id="f02a5-176">İçinde *Views\Student\Index.cshtml*, açmadan önce hemen vurgulanmış kodu ekleyin `table` resim yazısı, bir metin kutusu oluşturmak için etiket ve **arama** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="f02a5-176">In *Views\Student\Index.cshtml*, add the highlighted code immediately before the opening `table` tag in order to create a caption, a text box, and a **Search** button.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample5.cshtml?highlight=5-10)]

<span data-ttu-id="f02a5-177">Çalıştırırsanız, bir arama dizesi girin ve tıklayın **arama** filtreleme çalıştığını doğrulayın.</span><span class="sxs-lookup"><span data-stu-id="f02a5-177">Run the page, enter a search string, and click **Search** to verify that filtering is working.</span></span>

![Students_Index_page_with_search_box](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image4.png)

<span data-ttu-id="f02a5-179">Bu sayfaya yer işareti, yer işareti kullandığınızda, filtrelenmiş liste vermeyecektir, yani "bir" arama dizesi, URL içermiyor dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="f02a5-179">Notice the URL doesn't contain the "an" search string, which means that if you bookmark this page, you won't get the filtered list when you use the bookmark.</span></span> <span data-ttu-id="f02a5-180">Değiştireceksiniz **arama** sorgu dizeleri için filtre ölçütlerini öğreticinin ilerleyen bölümlerinde kullanmak için düğme.</span><span class="sxs-lookup"><span data-stu-id="f02a5-180">You'll change the **Search** button to use query strings for filter criteria later in the tutorial.</span></span>

## <a name="add-paging-to-the-students-index-page"></a><span data-ttu-id="f02a5-181">Disk belleği Öğrenciler dizin sayfasına ekleme</span><span class="sxs-lookup"><span data-stu-id="f02a5-181">Add Paging to the Students Index Page</span></span>

<span data-ttu-id="f02a5-182">Disk belleği Öğrenciler dizin sayfasına eklemek için yükleyerek başlayacaksınız **PagedList.Mvc** NuGet paketi.</span><span class="sxs-lookup"><span data-stu-id="f02a5-182">To add paging to the Students Index page, you'll start by installing the **PagedList.Mvc** NuGet package.</span></span> <span data-ttu-id="f02a5-183">Sonra ek değişiklik yapacaksınız `Index` yöntemi ve disk belleği bağlantılar ekleme `Index` görünümü.</span><span class="sxs-lookup"><span data-stu-id="f02a5-183">Then you'll make additional changes in the `Index` method and add paging links to the `Index` view.</span></span> <span data-ttu-id="f02a5-184">**PagedList.Mvc** birçok iyi sayfalama ve paketler için ASP.NET MVC sıralamayı biridir ve kullanımını burada yalnızca diğer seçenekleri üzerinde onun için bir öneri olarak değil, örnek olarak tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="f02a5-184">**PagedList.Mvc** is one of many good paging and sorting packages for ASP.NET MVC, and its use here is intended only as an example, not as a recommendation for it over other options.</span></span> <span data-ttu-id="f02a5-185">Aşağıdaki çizimde, disk belleği bağlantılarını gösterir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-185">The following illustration shows the paging links.</span></span>

![Students_index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image5.png)

### <a name="install-the-pagedlistmvc-nuget-package"></a><span data-ttu-id="f02a5-187">PagedList.MVC NuGet paketini yükle</span><span class="sxs-lookup"><span data-stu-id="f02a5-187">Install the PagedList.MVC NuGet Package</span></span>

<span data-ttu-id="f02a5-188">NuGet **PagedList.Mvc** paket otomatik olarak yükler **PagedList** paketi bir bağımlılık olarak.</span><span class="sxs-lookup"><span data-stu-id="f02a5-188">The NuGet **PagedList.Mvc** package automatically installs the **PagedList** package as a dependency.</span></span> <span data-ttu-id="f02a5-189">**PagedList** paketini yükler bir `PagedList` için koleksiyon türü ve uzantısı yöntemleri `IQueryable` ve `IEnumerable` koleksiyonları.</span><span class="sxs-lookup"><span data-stu-id="f02a5-189">The **PagedList** package installs a `PagedList` collection type and extension methods for `IQueryable` and `IEnumerable` collections.</span></span> <span data-ttu-id="f02a5-190">Genişletme yöntemleri verilerin tek bir sayfa oluşturmak bir `PagedList` koleksiyon dışı, `IQueryable` veya `IEnumerable`ve `PagedList` koleksiyonu çeşitli özellikler ve disk belleği kolaylaştıran yöntemler sağlar.</span><span class="sxs-lookup"><span data-stu-id="f02a5-190">The extension methods create a single page of data in a `PagedList` collection out of your `IQueryable` or `IEnumerable`, and the `PagedList` collection provides several properties and methods that facilitate paging.</span></span> <span data-ttu-id="f02a5-191">**PagedList.Mvc** paket sayfalama düğmeleri görüntüleyen bir disk belleği Yardımcısı yükler.</span><span class="sxs-lookup"><span data-stu-id="f02a5-191">The **PagedList.Mvc** package installs a paging helper that displays the paging buttons.</span></span>

<span data-ttu-id="f02a5-192">Gelen **Araçları** menüsünde **NuGet Paket Yöneticisi** ardından **çözüm için NuGet paketlerini Yönet**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-192">From the **Tools** menu, select **NuGet Package Manager** and then **Manage NuGet Packages for Solution**.</span></span>

<span data-ttu-id="f02a5-193">İçinde **NuGet paketlerini Yönet** iletişim kutusu, tıklayın **çevrimiçi** soldaki sekmesinde ve arama kutusuna "disk belleğine alınan" girin.</span><span class="sxs-lookup"><span data-stu-id="f02a5-193">In the **Manage NuGet Packages** dialog box, click the **Online** tab on the left and then enter "paged" in the search box.</span></span> <span data-ttu-id="f02a5-194">Gördüğünüzde **PagedList.Mvc** paketini, tıklayın **yükleme**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-194">When you see the **PagedList.Mvc** package, click **Install**.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image6.png)

<span data-ttu-id="f02a5-195">İçinde **projeleri seçin** kutusunun **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-195">In the **Select Projects** box, click **OK**.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image7.png)

### <a name="add-paging-functionality-to-the-index-method"></a><span data-ttu-id="f02a5-196">Sayfalama işlevselliğinin dizin yöntemine ekleyin.</span><span class="sxs-lookup"><span data-stu-id="f02a5-196">Add Paging Functionality to the Index Method</span></span>

<span data-ttu-id="f02a5-197">İçinde *Controllers\StudentController.cs*, ekleme bir `using` bildirimi `PagedList` ad alanı:</span><span class="sxs-lookup"><span data-stu-id="f02a5-197">In *Controllers\StudentController.cs*, add a `using` statement for the `PagedList` namespace:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample6.cs)]

<span data-ttu-id="f02a5-198">Değiştirin `Index` yöntemini aşağıdaki kod ile:</span><span class="sxs-lookup"><span data-stu-id="f02a5-198">Replace the `Index` method with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample7.cs)]

<span data-ttu-id="f02a5-199">Bu kod ekleyen bir `page` parametresi, geçerli bir sıralama sipariş parametresi ve yöntem imzası, burada gösterildiği gibi geçerli bir filtre parametresi:</span><span class="sxs-lookup"><span data-stu-id="f02a5-199">This code adds a `page` parameter, a current sort order parameter, and a current filter parameter to the method signature, as shown here:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample8.cs)]

<span data-ttu-id="f02a5-200">Kullanıcı bir disk belleği veya bağlantı sıralama taşınmadığından seçeneğine tıkladıysanız, tüm parametreleri null veya ilk kez sayfası görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-200">The first time the page is displayed, or if the user hasn't clicked a paging or sorting link, all the parameters will be null.</span></span> <span data-ttu-id="f02a5-201">Disk belleği bağlantıya tıkladıysanız `page` değişkeni görüntülemek için sayfa numarasını içerir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-201">If a paging link is clicked, the `page` variable will contain the page number to display.</span></span>

<span data-ttu-id="f02a5-202">`A ViewBag` Bu disk belleği bağlantıları sıralama sırasında disk belleği aynı tutulabilmesi için eklenmesi gerekir çünkü geçerli sıralama düzenini görünümüyle özelliği sağlar:</span><span class="sxs-lookup"><span data-stu-id="f02a5-202">`A ViewBag` property provides the view with the current sort order, because this must be included in the paging links in order to keep the sort order the same while paging:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample9.cs)]

<span data-ttu-id="f02a5-203">Başka bir özellik `ViewBag.CurrentFilter`, geçerli bir filtre dizesi ile görünümü sağlar.</span><span class="sxs-lookup"><span data-stu-id="f02a5-203">Another property, `ViewBag.CurrentFilter`, provides the view with the current filter string.</span></span> <span data-ttu-id="f02a5-204">Bu değer sırasında disk belleği filtre ayarlarını sürdürmek için disk belleği bağlantıları eklenmelidir ve sayfası görüntülendiğinde, metin kutusuna geri yüklenmelidir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-204">This value must be included in the paging links in order to maintain the filter settings during paging, and it must be restored to the text box when the page is redisplayed.</span></span> <span data-ttu-id="f02a5-205">Arama dizesi sırasında disk belleği değiştirilirse, yeni filtre görüntülemek için farklı veri kaybına neden çünkü sayfa 1'e sıfırlanması gereken.</span><span class="sxs-lookup"><span data-stu-id="f02a5-205">If the search string is changed during paging, the page has to be reset to 1, because the new filter can result in different data to display.</span></span> <span data-ttu-id="f02a5-206">Arama dizesi, metin kutusuna girilen değer ve Gönder düğmesine basıldığında değiştirilir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-206">The search string is changed when a value is entered in the text box and the submit button is pressed.</span></span> <span data-ttu-id="f02a5-207">Bu durumda, `searchString` parametresi null değil.</span><span class="sxs-lookup"><span data-stu-id="f02a5-207">In that case, the `searchString` parameter is not null.</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample10.cs)]

<span data-ttu-id="f02a5-208">Yönteminin sonuna `ToPagedList` Öğrenciler genişletme yöntemini `IQueryable` nesne disk belleği destekleyen bir koleksiyon türü Öğrenci tek sayfalık Öğrenci sorgu dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="f02a5-208">At the end of the method, the `ToPagedList` extension method on the students `IQueryable` object converts the student query to a single page of students in a collection type that supports paging.</span></span> <span data-ttu-id="f02a5-209">Öğrenciler, tek sayfalık sonra görünümüne geçirilir:</span><span class="sxs-lookup"><span data-stu-id="f02a5-209">That single page of students is then passed to the view:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample11.cs)]

<span data-ttu-id="f02a5-210">`ToPagedList` Yöntemi, bir sayfa numarasını alır.</span><span class="sxs-lookup"><span data-stu-id="f02a5-210">The `ToPagedList` method takes a page number.</span></span> <span data-ttu-id="f02a5-211">İki soru işareti temsil [null birleşim işleci](https://msdn.microsoft.com/library/ms173224.aspx).</span><span class="sxs-lookup"><span data-stu-id="f02a5-211">The two question marks represent the [null-coalescing operator](https://msdn.microsoft.com/library/ms173224.aspx).</span></span> <span data-ttu-id="f02a5-212">Boş değer atanabilir bir tür için varsayılan bir değer null birleşim işleci tanımlar; ifade `(page ?? 1)` anlamına gelir dönüş değerini `page` bir değere sahip veya 1 döndürür, `page` null.</span><span class="sxs-lookup"><span data-stu-id="f02a5-212">The null-coalescing operator defines a default value for a nullable type; the expression `(page ?? 1)` means return the value of `page` if it has a value, or return 1 if `page` is null.</span></span>

### <a name="add-paging-links-to-the-student-index-view"></a><span data-ttu-id="f02a5-213">Öğrenci dizin görünümüne sayfalama bağlantılar ekleme</span><span class="sxs-lookup"><span data-stu-id="f02a5-213">Add Paging Links to the Student Index View</span></span>

<span data-ttu-id="f02a5-214">İçinde *Views\Student\Index.cshtml*, mevcut kodu şu kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="f02a5-214">In *Views\Student\Index.cshtml*, replace the existing code with the following code:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample12.cshtml?highlight=6,9,14-20,56-58)]

<span data-ttu-id="f02a5-215">`@model` Sayfanın üstündeki deyimi belirtir görünüme artık alır bir `PagedList` yerine Nesne bir `List` nesne.</span><span class="sxs-lookup"><span data-stu-id="f02a5-215">The `@model` statement at the top of the page specifies that the view now gets a `PagedList` object instead of a `List` object.</span></span>

<span data-ttu-id="f02a5-216">`using` Bildirimi `PagedList.Mvc` erişimi verir MVC yardımcıya için disk belleği düğmeleri.</span><span class="sxs-lookup"><span data-stu-id="f02a5-216">The `using` statement for `PagedList.Mvc` gives access to the MVC helper for the paging buttons.</span></span>

<span data-ttu-id="f02a5-217">Kod bir aşırı yüklemesini kullanır [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) belirtmek üzere sağlayan [FormMethod.Get](https://msdn.microsoft.com/library/system.web.mvc.formmethod(v=vs.100).aspx/css).</span><span class="sxs-lookup"><span data-stu-id="f02a5-217">The code uses an overload of [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) that allows it to specify [FormMethod.Get](https://msdn.microsoft.com/library/system.web.mvc.formmethod(v=vs.100).aspx/css).</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample13.cshtml?highlight=1)]

<span data-ttu-id="f02a5-218">Varsayılan [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) parametreleri HTTP ileti gövdesini ve URL'yi içinde değil sorgu dizeleri geçirilir, yani bir GÖNDERİ ile form verileri gönderir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-218">The default [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) submits form data with a POST, which means that parameters are passed in the HTTP message body and not in the URL as query strings.</span></span> <span data-ttu-id="f02a5-219">HTTP GET belirttiğinizde, form verilerini URL'ye sorgu dizeleri kullanıcıların yer işareti URL'si sağlayan geçirilir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-219">When you specify HTTP GET, the form data is passed in the URL as query strings, which enables users to bookmark the URL.</span></span> <span data-ttu-id="f02a5-220">[HTTP GET kullanımı için W3C yönergeleri](http://www.w3.org/2001/tag/doc/whenToUseGet.html) eylemi bir güncelleştirme olarak sonuçlanmaz olduğunda GET kullanması gerektiğini belirtin.</span><span class="sxs-lookup"><span data-stu-id="f02a5-220">The [W3C guidelines for the use of HTTP GET](http://www.w3.org/2001/tag/doc/whenToUseGet.html) specify that you should use GET when the action does not result in an update.</span></span>

<span data-ttu-id="f02a5-221">Yeni bir sayfa tıkladığınızda geçerli arama dizesinin görebilmeniz için metin kutusuna geçerli bir arama dizesi ile başlatılır.</span><span class="sxs-lookup"><span data-stu-id="f02a5-221">The text box is initialized with the current search string so when you click a new page you can see the current search string.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample14.cshtml?highlight=1)]

<span data-ttu-id="f02a5-222">Sütun üst bilgisi bağlantıları, kullanıcının içinde filtre sonuçlarını sıralayabilirsiniz, böylece geçerli arama dizesinin denetleyiciye geçirilecek sorgu dizesi kullanın:</span><span class="sxs-lookup"><span data-stu-id="f02a5-222">The column header links use the query string to pass the current search string to the controller so that the user can sort within filter results:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample15.cshtml?highlight=1)]

<span data-ttu-id="f02a5-223">Geçerli sayfayı ve toplam sayfa sayısı görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-223">The current page and total number of pages are displayed.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample16.cshtml)]

<span data-ttu-id="f02a5-224">Görüntülenecek sayfa varsa, "Sayfası 0 0" gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-224">If there are no pages to display, "Page 0 of 0" is shown.</span></span> <span data-ttu-id="f02a5-225">(Bu durumda sayfa numarası sayfanın sayısından büyük olduğundan `Model.PageNumber` 1 ' dir ve `Model.PageCount` 0'dır.)</span><span class="sxs-lookup"><span data-stu-id="f02a5-225">(In that case the page number is greater than the page count because `Model.PageNumber` is 1, and `Model.PageCount` is 0.)</span></span>

<span data-ttu-id="f02a5-226">Disk belleği düğme tarafından görüntülenen `PagedListPager` yardımcı:</span><span class="sxs-lookup"><span data-stu-id="f02a5-226">The paging buttons are displayed by the `PagedListPager` helper:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample17.cshtml)]

<span data-ttu-id="f02a5-227">`PagedListPager` Yardımcısı, özelleştirebileceğiniz, stil ve URL'leri dahil olmak üzere birkaç seçenek sağlar.</span><span class="sxs-lookup"><span data-stu-id="f02a5-227">The `PagedListPager` helper provides a number of options that you can customize, including URLs and styling.</span></span> <span data-ttu-id="f02a5-228">Daha fazla bilgi için [TroyGoode / PagedList](https://github.com/TroyGoode/PagedList) GitHub sitesinde.</span><span class="sxs-lookup"><span data-stu-id="f02a5-228">For more information, see [TroyGoode / PagedList](https://github.com/TroyGoode/PagedList) on the GitHub site.</span></span>

<span data-ttu-id="f02a5-229">Sayfayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="f02a5-229">Run the page.</span></span>

![Students_index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image8.png)

<span data-ttu-id="f02a5-231">Disk belleği works emin olmak için farklı sıralamalar sayfalama bağlantıları tıklatın.</span><span class="sxs-lookup"><span data-stu-id="f02a5-231">Click the paging links in different sort orders to make sure paging works.</span></span> <span data-ttu-id="f02a5-232">Ardından bir arama dizesi girin ve yeniden disk belleği de doğru sıralama ve filtreleme ile çalıştığını doğrulamak için disk belleği'ni deneyin.</span><span class="sxs-lookup"><span data-stu-id="f02a5-232">Then enter a search string and try paging again to verify that paging also works correctly with sorting and filtering.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image9.png)

## <a name="create-an-about-page-that-shows-student-statistics"></a><span data-ttu-id="f02a5-233">Oluşturma bir öğrenci istatistiklerini gösteren bir sayfa hakkında</span><span class="sxs-lookup"><span data-stu-id="f02a5-233">Create an About Page That Shows Student Statistics</span></span>

<span data-ttu-id="f02a5-234">Contoso University sitesinin için sayfa hakkında kaç Öğrenciler her kayıt tarihi için kayıtlı olan görüntüleyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="f02a5-234">For the Contoso University website's About page, you'll display how many students have enrolled for each enrollment date.</span></span> <span data-ttu-id="f02a5-235">Bu gruplar üzerinde gruplandırma ve basit hesaplama gerektirir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-235">This requires grouping and simple calculations on the groups.</span></span> <span data-ttu-id="f02a5-236">Bunu yapmak için aşağıdakileri:</span><span class="sxs-lookup"><span data-stu-id="f02a5-236">To accomplish this, you'll do the following:</span></span>

- <span data-ttu-id="f02a5-237">Görünüme iletmek için gereken verileri için bir görünüm modeli sınıfı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="f02a5-237">Create a view model class for the data that you need to pass to the view.</span></span>
- <span data-ttu-id="f02a5-238">Değiştirme `About` yönteminde `Home` denetleyicisi.</span><span class="sxs-lookup"><span data-stu-id="f02a5-238">Modify the `About` method in the `Home` controller.</span></span>
- <span data-ttu-id="f02a5-239">Değiştirme `About` görünümü.</span><span class="sxs-lookup"><span data-stu-id="f02a5-239">Modify the `About` view.</span></span>

### <a name="create-the-view-model"></a><span data-ttu-id="f02a5-240">Görünüm modeli oluşturun</span><span class="sxs-lookup"><span data-stu-id="f02a5-240">Create the View Model</span></span>

<span data-ttu-id="f02a5-241">Oluşturma bir *Viewmodel'lar* klasör.</span><span class="sxs-lookup"><span data-stu-id="f02a5-241">Create a *ViewModels* folder.</span></span> <span data-ttu-id="f02a5-242">Bu klasörde bir sınıf dosyası ekleyin *EnrollmentDateGroup.cs* ve varolan kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="f02a5-242">In that folder, add a class file *EnrollmentDateGroup.cs* and replace the existing code with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample18.cs)]

### <a name="modify-the-home-controller"></a><span data-ttu-id="f02a5-243">Giriş denetleyicisini değiştirmek</span><span class="sxs-lookup"><span data-stu-id="f02a5-243">Modify the Home Controller</span></span>

<span data-ttu-id="f02a5-244">İçinde *HomeController.cs*, aşağıdaki `using` deyimini dosyanın üst:</span><span class="sxs-lookup"><span data-stu-id="f02a5-244">In *HomeController.cs*, add the following `using` statements at the top of the file:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample19.cs)]

<span data-ttu-id="f02a5-245">Hemen sınıfı için açılış kaşlı ayracından sonra veritabanı bağlamı için bir sınıf değişkeni ekleyin:</span><span class="sxs-lookup"><span data-stu-id="f02a5-245">Add a class variable for the database context immediately after the opening curly brace for the class:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample20.cs?highlight=3)]

<span data-ttu-id="f02a5-246">Değiştirin `About` yöntemini aşağıdaki kod ile:</span><span class="sxs-lookup"><span data-stu-id="f02a5-246">Replace the `About` method with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample21.cs)]

<span data-ttu-id="f02a5-247">LINQ deyiminden Öğrenci varlıkları kayıt tarihe göre gruplar, her grupta varlık sayısını hesaplar ve sonuçları bir koleksiyonda depolar `EnrollmentDateGroup` model nesneleri görüntüleyin.</span><span class="sxs-lookup"><span data-stu-id="f02a5-247">The LINQ statement groups the student entities by enrollment date, calculates the number of entities in each group, and stores the results in a collection of `EnrollmentDateGroup` view model objects.</span></span>

<span data-ttu-id="f02a5-248">Ekleme bir `Dispose` yöntemi:</span><span class="sxs-lookup"><span data-stu-id="f02a5-248">Add a `Dispose` method:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample22.cs)]

### <a name="modify-the-about-view"></a><span data-ttu-id="f02a5-249">Değiştirme görünümü hakkında</span><span class="sxs-lookup"><span data-stu-id="f02a5-249">Modify the About View</span></span>

<span data-ttu-id="f02a5-250">Değiştirin *Views\Home\About.cshtml* dosyasındaki kodu aşağıdaki kodla:</span><span class="sxs-lookup"><span data-stu-id="f02a5-250">Replace the code in the *Views\Home\About.cshtml* file with the following code:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample23.cshtml)]

<span data-ttu-id="f02a5-251">Uygulamayı çalıştırın ve tıklayın **hakkında** bağlantı.</span><span class="sxs-lookup"><span data-stu-id="f02a5-251">Run the app and click the **About** link.</span></span> <span data-ttu-id="f02a5-252">Bir tablodaki her kayıt tarihi için Öğrenci sayısı görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-252">The count of students for each enrollment date is displayed in a table.</span></span>

![About_page](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image10.png)

## <a name="optional-deploy-the-app-to-windows-azure"></a><span data-ttu-id="f02a5-254">İsteğe bağlı: Uygulamayı Windows Azure'a dağıtma</span><span class="sxs-lookup"><span data-stu-id="f02a5-254">Optional: Deploy the app to Windows Azure</span></span>

<span data-ttu-id="f02a5-255">Şu ana kadar uygulamanızı yerel olarak IIS Express'te URL'i geliştirme bilgisayarınızda çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="f02a5-255">So far your application has been running locally in IIS Express on your development computer.</span></span> <span data-ttu-id="f02a5-256">Internet üzerinden diğer kullanıcılar için kullanılabilir hale getirmek için bir web barındırma sağlayıcısına dağıtmak zorunda.</span><span class="sxs-lookup"><span data-stu-id="f02a5-256">To make it available for other people to use over the Internet, you have to deploy it to a web hosting provider.</span></span> <span data-ttu-id="f02a5-257">Öğreticinin Bu isteğe bağlı bölümde bir Windows Azure Web sitesine dağıtacaksınız.</span><span class="sxs-lookup"><span data-stu-id="f02a5-257">In this optional section of the tutorial you'll deploy it to a Windows Azure Web Site.</span></span>

### <a name="using-code-first-migrations-to-deploy-the-database"></a><span data-ttu-id="f02a5-258">Veritabanını dağıtmak için Code First Migrations'ı kullanma</span><span class="sxs-lookup"><span data-stu-id="f02a5-258">Using Code First Migrations to Deploy the Database</span></span>

<span data-ttu-id="f02a5-259">Veritabanını dağıtmak için Code First Migrations kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="f02a5-259">To deploy the database you'll use Code First Migrations.</span></span> <span data-ttu-id="f02a5-260">Visual Studio'dan dağıtmak için ayarları yapılandırmak için kullandığınız yayımlama profili oluşturduğunuzda, etiketli onay kutusunu seçersiniz **yürütme Code First Migrations (uygulama başlatılırken çalışır)**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-260">When you create the publish profile that you use to configure settings for deploying from Visual Studio, you'll select a check box that is labeled **Execute Code First Migrations (runs on application start)**.</span></span> <span data-ttu-id="f02a5-261">Bu ayar uygulamayı otomatik olarak yapılandırmak dağıtım işlemini neden *Web.config* Code First kullanmasını sağlayacak şekilde hedef sunucuda dosya `MigrateDatabaseToLatestVersion` Başlatıcı sınıfı.</span><span class="sxs-lookup"><span data-stu-id="f02a5-261">This setting causes the deployment process to automatically configure the application *Web.config* file on the destination server so that Code First uses the `MigrateDatabaseToLatestVersion` initializer class.</span></span>

<span data-ttu-id="f02a5-262">Visual Studio dağıtım işlemi sırasında veritabanı ile herhangi bir şey yapmaz.</span><span class="sxs-lookup"><span data-stu-id="f02a5-262">Visual Studio does not do anything with the database during the deployment process.</span></span> <span data-ttu-id="f02a5-263">Dağıtılan uygulamayı ilk kez dağıtımdan sonra veritabanına eriştiğinde, Code First otomatik olarak veritabanı oluşturur veya veritabanı şeması en son sürüme güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-263">When the deployed application accesses the database for the first time after deployment, Code First automatically creates the database or updates the database schema to the latest version.</span></span> <span data-ttu-id="f02a5-264">Uygulama bir geçişleri uyguluyorsa `Seed` yöntemi, veritabanı oluşturulur veya şema güncelleştirildikten sonra yöntemi çalışır.</span><span class="sxs-lookup"><span data-stu-id="f02a5-264">If the application implements a Migrations `Seed` method, the method runs after the database is created or the schema is updated.</span></span>

<span data-ttu-id="f02a5-265">Geçiş `Seed` yöntemi test verilerini ekler.</span><span class="sxs-lookup"><span data-stu-id="f02a5-265">Your Migrations `Seed` method inserts test data.</span></span> <span data-ttu-id="f02a5-266">Bir üretim ortamına dağıtma, değişikliği yapmanız gerekir `Seed` BT'nin yalnızca üretim veritabanınız eklenmesini istediğiniz verileri ekler için yöntemi.</span><span class="sxs-lookup"><span data-stu-id="f02a5-266">If you were deploying to a production environment, you would have to change the `Seed` method so that it only inserts data that you want to be inserted into your production database.</span></span> <span data-ttu-id="f02a5-267">Örneğin, geçerli veri modelinizde gerçek kursları ancak kurgusal Öğrenciler geliştirme veritabanında sahip olmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f02a5-267">For example, in your current data model you might want to have real courses but fictional students in the development database.</span></span> <span data-ttu-id="f02a5-268">Yazabileceğiniz bir `Seed` hem de geliştirme yüklemek ve üretim ortamına dağıtmadan önce kurgusal Öğrenciler yorum yapmak için yöntem.</span><span class="sxs-lookup"><span data-stu-id="f02a5-268">You can write a `Seed` method to load both in development, and then comment out the fictional students before you deploy to production.</span></span> <span data-ttu-id="f02a5-269">Veya yazabileceğiniz bir `Seed` yalnızca kursları yüklenip kurgusal Öğrenciler uygulamanın kullanıcı arabirimini kullanarak test veritabanında el ile girin. yöntemi.</span><span class="sxs-lookup"><span data-stu-id="f02a5-269">Or you can write a `Seed` method to load only courses, and enter the fictional students in the test database manually by using the application's UI.</span></span>

### <a name="get-a-windows-azure-account"></a><span data-ttu-id="f02a5-270">Bir Windows Azure hesabı edinin</span><span class="sxs-lookup"><span data-stu-id="f02a5-270">Get a Windows Azure account</span></span>

<span data-ttu-id="f02a5-271">Bir Windows Azure hesabınızın olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-271">You'll need a Windows Azure account.</span></span> <span data-ttu-id="f02a5-272">Zaten yoksa, yalnızca birkaç dakika içinde ücretsiz bir deneme hesabı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f02a5-272">If you don't already have one, you can create a free trial account in just a couple of minutes.</span></span> <span data-ttu-id="f02a5-273">Ayrıntılar için bkz [Windows Azure ücretsiz deneme sürümü](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).</span><span class="sxs-lookup"><span data-stu-id="f02a5-273">For details, see [Windows Azure Free Trial](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).</span></span>

### <a name="create-a-web-site-and-a-sql-database-in-windows-azure"></a><span data-ttu-id="f02a5-274">Windows Azure'da bir web sitesi ve SQL veritabanı oluşturma</span><span class="sxs-lookup"><span data-stu-id="f02a5-274">Create a web site and a SQL database in Windows Azure</span></span>

<span data-ttu-id="f02a5-275">Windows Azure Web sitenizi, diğer Windows Azure istemcilerle paylaşılan sanal makineler (VM) üzerinde çalıştığı anlamına gelir. paylaşılan bir barındırma ortamında çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="f02a5-275">Your Windows Azure Web Site will run in a shared hosting environment, which means it runs on virtual machines (VMs) that are shared with other Windows Azure clients.</span></span> <span data-ttu-id="f02a5-276">Paylaşılan bir barındırma ortamı, bulutta kullanmaya başlamak için bir düşük maliyetli yoludur.</span><span class="sxs-lookup"><span data-stu-id="f02a5-276">A shared hosting environment is a low-cost way to get started in the cloud.</span></span> <span data-ttu-id="f02a5-277">Daha sonra web trafiğiniz arttıkça, uygulama ayrılmış sanal makineler üzerinde çalıştırarak gereksinimini karşılayacak şekilde ölçeklendirilebilir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-277">Later, if your web traffic increases, the application can scale to meet the need by running on dedicated VMs.</span></span> <span data-ttu-id="f02a5-278">Daha karmaşık bir mimari gerekiyorsa, bir Windows Azure bulut hizmetine geçirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f02a5-278">If you need a more complex architecture, you can migrate to a Windows Azure Cloud Service.</span></span> <span data-ttu-id="f02a5-279">Bulut Hizmetleri, sizin ihtiyaçlarınıza göre yapılandırabileceğiniz özel VM'ler üzerinde çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="f02a5-279">Cloud services run on dedicated VMs that you can configure according to your needs.</span></span>

<span data-ttu-id="f02a5-280">Windows Azure SQL veritabanı, SQL Server teknolojileri üzerine kurulmuş bir bulut tabanlı bir ilişkisel veritabanı hizmetidir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-280">Windows Azure SQL Database is a cloud-based relational database service that is built on SQL Server technologies.</span></span> <span data-ttu-id="f02a5-281">Araçları ve SQL Server ile çalışan uygulamalar SQL veritabanı ile de çalışır.</span><span class="sxs-lookup"><span data-stu-id="f02a5-281">Tools and applications that work with SQL Server also work with SQL Database.</span></span>

1. <span data-ttu-id="f02a5-282">İçinde [Windows Azure Yönetim Portalı](https://manage.windowsazure.com/), tıklayın **Web siteleri** sol sekmesini ve ardından **yeni**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-282">In the [Windows Azure Management Portal](https://manage.windowsazure.com/), click **Web Sites** in the left tab, and then click **New**.</span></span>

    ![Yönetim Portalı'nda yeni düğme](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image11.png)
2. <span data-ttu-id="f02a5-284">Tıklayın **özel Oluştur**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-284">Click **CUSTOM CREATE**.</span></span>

    ![Yönetim Portalı'nda veritabanı bağlantısı oluşturma](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image12.png)

   <span data-ttu-id="f02a5-286">**Yeni Web sitesi - özel Oluştur** Sihirbazı açılır.</span><span class="sxs-lookup"><span data-stu-id="f02a5-286">The **New Web Site - Custom Create** wizard opens.</span></span>
3. <span data-ttu-id="f02a5-287">İçinde **yeni Web sitesi** adım Sihirbazı'nın bir dize girin **URL** kutusunu uygulamanız için benzersiz bir URL olarak kullanın.</span><span class="sxs-lookup"><span data-stu-id="f02a5-287">In the **New Web Site** step of the wizard, enter a string in the **URL** box to use as the unique URL for your application.</span></span> <span data-ttu-id="f02a5-288">Tam URL ne buraya girdiğiniz ve metin kutusunun yanındaki gördüğünüz bir son eke oluşur.</span><span class="sxs-lookup"><span data-stu-id="f02a5-288">The complete URL will consist of what you enter here plus the suffix that you see next to the text box.</span></span> <span data-ttu-id="f02a5-289">"ConU" çizimde gösterilmektedir, ancak farklı bir parola seçmeniz gerekecektir. Bu nedenle söz konusu URL büyük olasılıkla alınır.</span><span class="sxs-lookup"><span data-stu-id="f02a5-289">The illustration shows "ConU", but that URL is probably taken so you will have to choose a different one.</span></span>

    ![Yönetim Portalı'nda veritabanı bağlantısı oluşturma](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image13.png)
4. <span data-ttu-id="f02a5-291">İçinde **bölge** aşağı açılan listesinde, size yakın bir bölge seçin.</span><span class="sxs-lookup"><span data-stu-id="f02a5-291">In the **Region** drop-down list, choose a region close to you.</span></span> <span data-ttu-id="f02a5-292">Bu ayar, web siteniz çalışır veri merkezini belirtir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-292">This setting specifies which data center your web site will run in.</span></span>
5. <span data-ttu-id="f02a5-293">İçinde **veritabanı** aşağı açılan listesinde **ücretsiz 20 MB SQL veritabanı oluşturma**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-293">In the **Database** drop-down list, choose **Create a free 20 MB SQL database**.</span></span>

    ![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image14.png)
6. <span data-ttu-id="f02a5-294">İçinde **DB bağlantı DİZESİ adı**, girin *SchoolContext*.</span><span class="sxs-lookup"><span data-stu-id="f02a5-294">In the **DB CONNECTION STRING NAME**, enter *SchoolContext*.</span></span>

    ![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image15.png)
7. <span data-ttu-id="f02a5-295">İşaret kutusunun altındaki sağ oka tıklayın.</span><span class="sxs-lookup"><span data-stu-id="f02a5-295">Click the arrow that points to the right at the bottom of the box.</span></span> <span data-ttu-id="f02a5-296">Sihirbaz ilerler **veritabanı ayarlarını** adım.</span><span class="sxs-lookup"><span data-stu-id="f02a5-296">The wizard advances to the **Database Settings** step.</span></span>
8. <span data-ttu-id="f02a5-297">İçinde **adı** kutusuna *ContosoUniversityDB*.</span><span class="sxs-lookup"><span data-stu-id="f02a5-297">In the **Name** box, enter *ContosoUniversityDB*.</span></span>
9. <span data-ttu-id="f02a5-298">İçinde **sunucu** kutusunda **yeni SQL veritabanı sunucusu**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-298">In the **Server** box, select **New SQL Database server**.</span></span> <span data-ttu-id="f02a5-299">Alternatif olarak, daha önce bir sunucu oluşturduysanız, aşağı açılan listeden bu sunucuyu seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f02a5-299">Alternatively, if you previously created a server, you can select that server from the drop-down list.</span></span>
10. <span data-ttu-id="f02a5-300">Yönetici girin **oturum açma adı** ve **parola**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-300">Enter an administrator **LOGIN NAME** and **PASSWORD**.</span></span> <span data-ttu-id="f02a5-301">Seçtiyseniz **yeni SQL veritabanı sunucusu** mevcut bir ad ve burada parolayı girmezsiniz, yeni bir ad ve daha sonra veritabanına eriştiğinizde kullanmak üzere şimdi tanımlayacağınız parolayı girersiniz.</span><span class="sxs-lookup"><span data-stu-id="f02a5-301">If you selected **New SQL Database server** you aren't entering an existing name and password here, you're entering a new name and password that you're defining now to use later when you access the database.</span></span> <span data-ttu-id="f02a5-302">Daha önce oluşturduğunuz bir sunucuyu seçtiyseniz, bu sunucu için kimlik bilgilerini girmenizi isteriz.</span><span class="sxs-lookup"><span data-stu-id="f02a5-302">If you selected a server that you created previously, you'll enter credentials for that server.</span></span> <span data-ttu-id="f02a5-303">Bu öğretici için seçtiğiniz olmaz ***Gelişmiş*** onay kutusu.</span><span class="sxs-lookup"><span data-stu-id="f02a5-303">For this tutorial, you won't select the ***Advanced*** check box.</span></span> <span data-ttu-id="f02a5-304">***Gelişmiş*** seçeneklerini veritabanı etkinleştirme [harmanlama](https://msdn.microsoft.com/library/aa174903(v=SQL.80).aspx).</span><span class="sxs-lookup"><span data-stu-id="f02a5-304">The ***Advanced*** options enable you to set the database [collation](https://msdn.microsoft.com/library/aa174903(v=SQL.80).aspx).</span></span>
11. <span data-ttu-id="f02a5-305">Aynı seçin **bölge** web sitesi için seçtiğiniz.</span><span class="sxs-lookup"><span data-stu-id="f02a5-305">Choose the same **Region** that you chose for the web site.</span></span>
12. <span data-ttu-id="f02a5-306">Tamamlanmış göstermek için sağ kutusunun altındaki onay işaretine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="f02a5-306">Click the check mark at the bottom right of the box to indicate that you're finished.</span></span>   
  
    ![Veritabanı ayarları adım, yeni Web sitesi - Veritabanı Sihirbazı](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image16.png)  

    <span data-ttu-id="f02a5-308">Aşağıdaki resimde, bir var olan SQL Server ve oturum açma kullanma gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-308">The following image shows using an existing SQL Server and Login.</span></span>   
  
    ![Veritabanı ayarları adım, yeni Web sitesi - Veritabanı Sihirbazı](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image17.png)  
  
    <span data-ttu-id="f02a5-310">Yönetim Portalı Web siteleri sayfasına döndürür ve **durumu** sütun site oluşturulduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-310">The Management Portal returns to the Web Sites page, and the **Status** column shows that the site is being created.</span></span> <span data-ttu-id="f02a5-311">(Genellikle bir dakikadan az), bir süre sonra **durumu** sütunda görüntülenir sitesi başarıyla oluşturuldu.</span><span class="sxs-lookup"><span data-stu-id="f02a5-311">After a while (typically less than a minute), the **Status** column shows that the site was successfully created.</span></span> <span data-ttu-id="f02a5-312">Sol gezinti çubuğunda, hesabınızda kullandığınız sitelerin sayısı yanında görünür **Web siteleri** simgesi ve veritabanlarının sayısını yanında görünüyorsa **SQL veritabanları** simgesi.</span><span class="sxs-lookup"><span data-stu-id="f02a5-312">In the navigation bar at the left, the number of sites you have in your account appears next to the **Web Sites** icon, and the number of databases appears next to the **SQL Databases** icon.</span></span>

## <a name="deploy-the-application-to-windows-azure"></a><span data-ttu-id="f02a5-313">Uygulamayı Windows azure'a dağıtma</span><span class="sxs-lookup"><span data-stu-id="f02a5-313">Deploy the application to Windows Azure</span></span>

1. <span data-ttu-id="f02a5-314">Visual Studio'da projeye sağ **Çözüm Gezgini** seçip **Yayımla** bağlam menüsünden.</span><span class="sxs-lookup"><span data-stu-id="f02a5-314">In Visual Studio, right-click the project in **Solution Explorer** and select **Publish** from the context menu.</span></span>  
  
    ![Proje bağlam menüsünde Yayımla](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image18.png)
2. <span data-ttu-id="f02a5-316">İçinde **profili** sekmesinde **Web'i Yayımla** Sihirbazı'nı tıklatın **alma**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-316">In the **Profile** tab of the **Publish Web** wizard, click **Import**.</span></span>  
  
    ![Yayımlama ayarlarını İçeri Aktar](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image19.png)
3. <span data-ttu-id="f02a5-318">Windows Azure aboneliğinizi Visual Studio'da daha önce eklemediyseniz, aşağıdaki adımları gerçekleştirin.</span><span class="sxs-lookup"><span data-stu-id="f02a5-318">If you have not previously added your Windows Azure subscription in Visual Studio, perform the following steps.</span></span> <span data-ttu-id="f02a5-319">Bu adımlarda açılır listesi altında olacak şekilde, abonelik Ekle **bir Windows Azure web sitesinden içeri aktarma** web sitenizi içerecektir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-319">In these steps you add your subscription so that the drop-down list under **Import from a Windows Azure web site** will include your web site.</span></span>

    <span data-ttu-id="f02a5-320">a.</span><span class="sxs-lookup"><span data-stu-id="f02a5-320">a.</span></span> <span data-ttu-id="f02a5-321">İçinde **yayımlama profilini içeri aktarma** iletişim kutusu, tıklayın **bir Windows Azure web sitesinden içeri aktarma**ve ardından **Ekle Windows Azure abonelik**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-321">In the **Import Publish Profile** dialog box, click **Import from a Windows Azure web site**, and then click **Add Windows Azure subscription**.</span></span>

    ![Windows Azure aboneliği ekleme](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image20.png)

    <span data-ttu-id="f02a5-323">b.</span><span class="sxs-lookup"><span data-stu-id="f02a5-323">b.</span></span> <span data-ttu-id="f02a5-324">İçinde **alma Windows Azure abonelikleri** iletişim kutusu, tıklayın **indirme abonelik dosyası**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-324">In the **Import Windows Azure Subscriptions** dialog box, click **Download subscription file**.</span></span>

    ![Abonelik dosyasını indir](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image21.png)

    <span data-ttu-id="f02a5-326">c.</span><span class="sxs-lookup"><span data-stu-id="f02a5-326">c.</span></span> <span data-ttu-id="f02a5-327">Tarayıcı pencerenizde Kaydet *.publishsettings* dosya.</span><span class="sxs-lookup"><span data-stu-id="f02a5-327">In your browser window, save the *.publishsettings* file.</span></span>

    ![.publishsettings dosyasını indirin](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image22.png)

    > [!WARNING]
    > <span data-ttu-id="f02a5-329">Güvenlik - *publishsettings* dosyası, Windows Azure abonelik ve hizmetleri yönetmek için kullanılan (kodlanmamış), kimlik bilgilerini içerir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-329">Security - The *publishsettings* file contains your credentials (unencoded) that are used to administer your Windows Azure subscriptions and services.</span></span> <span data-ttu-id="f02a5-330">Dışında kaynak dizinleri geçici olarak depolamak için bu dosya için en iyi güvenlik uygulaması olan (örneğin *Libraries\Documents* klasör) ve içeri aktarma tamamlandıktan sonra silebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f02a5-330">The security best practice for this file is to store it temporarily outside your source directories (for example in the *Libraries\Documents* folder), and then delete it once the import has completed.</span></span> <span data-ttu-id="f02a5-331">Erişim kazanır kötü niyetli bir kullanıcının `.publishsettings` dosya düzenleme, oluşturabilir ve Windows Azure hizmetlerinizi silin.</span><span class="sxs-lookup"><span data-stu-id="f02a5-331">A malicious user who gains access to the `.publishsettings` file can edit, create, and delete your Windows Azure services.</span></span>

    <span data-ttu-id="f02a5-332">d.</span><span class="sxs-lookup"><span data-stu-id="f02a5-332">d.</span></span> <span data-ttu-id="f02a5-333">İçinde **alma Windows Azure abonelikleri** iletişim kutusu, tıklayın **Gözat** gidin *.publishsettings* dosya.</span><span class="sxs-lookup"><span data-stu-id="f02a5-333">In the **Import Windows Azure Subscriptions** dialog box, click **Browse** and navigate to the *.publishsettings* file.</span></span>

    ![Sub indirin](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image23.png)

    <span data-ttu-id="f02a5-335">e.</span><span class="sxs-lookup"><span data-stu-id="f02a5-335">e.</span></span> <span data-ttu-id="f02a5-336">**İçeri aktar**'a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="f02a5-336">Click **Import**.</span></span>

    ![içeri aktar](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image24.png)
4. <span data-ttu-id="f02a5-338">İçinde **yayımlama profilini içeri aktarma** iletişim kutusunda **bir Windows Azure web sitesinden içeri aktarma**aşağı açılan listeden web sitenizi seçin ve ardından **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-338">In the **Import Publish Profile** dialog box, select **Import from a Windows Azure web site**, select your web site from the drop-down list, and then click **OK**.</span></span>  
  
    ![Yayımlama profili içeri aktar](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image25.png)
5. <span data-ttu-id="f02a5-340">İçinde **bağlantı** sekmesinde **bağlantıyı doğrula** ayarlarının doğru olduğundan emin olmak için.</span><span class="sxs-lookup"><span data-stu-id="f02a5-340">In the **Connection** tab, click **Validate Connection** to make sure that the settings are correct.</span></span>  
  
    ![Bağlantısını doğrulama](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image26.png)
6. <span data-ttu-id="f02a5-342">Bağlantı doğrulandı, yeşil bir onay işareti yanında gösterilen **bağlantıyı doğrula** düğmesi.</span><span class="sxs-lookup"><span data-stu-id="f02a5-342">When the connection has been validated, a green check mark is shown next to the **Validate Connection** button.</span></span> <span data-ttu-id="f02a5-343">**İleri**'ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="f02a5-343">Click **Next**.</span></span>  
  
    ![Bağlantı başarıyla doğrulandı](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image27.png)
7. <span data-ttu-id="f02a5-345">Açık **uzak bağlantı dizesi** altındaki aşağı açılan listeden **SchoolContext** ve oluşturduğunuz veritabanı bağlantı dizesini seçin.</span><span class="sxs-lookup"><span data-stu-id="f02a5-345">Open the **Remote connection string** drop-down list under **SchoolContext** and select the connection string for the database you created.</span></span>
8. <span data-ttu-id="f02a5-346">Seçin **yürütme Code First Migrations (uygulama başlatılırken çalışır)**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-346">Select **Execute Code First Migrations (runs on application start)**.</span></span>
9. <span data-ttu-id="f02a5-347">Onay kutusunu temizleyin **çalışma zamanında Bu bağlantı dizesini kullan** için **UserContext (DefaultConnection)**, bu uygulama, üyelik veritabanının kullanmadığından.</span><span class="sxs-lookup"><span data-stu-id="f02a5-347">Uncheck **Use this connection string at runtime** for the **UserContext (DefaultConnection)**, since this application is not using the membership database.</span></span>   
  
    ![Ayarlar sekmesi](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image28.png)
10. <span data-ttu-id="f02a5-349">**İleri**'ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="f02a5-349">Click **Next**.</span></span>
11. <span data-ttu-id="f02a5-350">İçinde **Önizleme** sekmesinde **önizlemeyi Başlat**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-350">In the **Preview** tab, click **Start Preview**.</span></span>  
  
    ![Önizleme sekmesini StartPreview düğmesi](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image29.png)  
  
    <span data-ttu-id="f02a5-352">Sekme sunucuya kopyalanacak dosyaların bir listesini görüntüler.</span><span class="sxs-lookup"><span data-stu-id="f02a5-352">The tab displays a list of the files that will be copied to the server.</span></span> <span data-ttu-id="f02a5-353">Önizleme görüntüleme uygulamayı yayımlamak için gerekli değildir, ancak dikkat edilmesi gereken yararlı bir işlevdir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-353">Displaying the preview isn't required to publish the application but is a useful function to be aware of.</span></span> <span data-ttu-id="f02a5-354">Bu durumda, görüntülenen dosyaların listesini içeren herhangi bir şey yapmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="f02a5-354">In this case, you don't need to do anything with the list of files that is displayed.</span></span> <span data-ttu-id="f02a5-355">Bu uygulamayı dağıtmadan sonraki açışınızda değişmiş olan dosyaları bu listede yer alacaktır.</span><span class="sxs-lookup"><span data-stu-id="f02a5-355">The next time you deploy this application, only the files that have changed will be in this list.</span></span>  
  
    ![StartPreview dosya çıktısı](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image30.png)
12. <span data-ttu-id="f02a5-357">Tıklayın **yayımlama**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-357">Click **Publish**.</span></span>  
    <span data-ttu-id="f02a5-358">Visual Studio, dosyalar Windows Azure sunucusuna kopyalama işlemi başlar.</span><span class="sxs-lookup"><span data-stu-id="f02a5-358">Visual Studio begins the process of copying the files to the Windows Azure server.</span></span>
13. <span data-ttu-id="f02a5-359">**Çıkış** penceresi hangi dağıtım eylemlerinin gerçekleştirildiğini gösterir ve dağıtımın başarılı olarak tamamlanmasına bildirir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-359">The **Output** window shows what deployment actions were taken and reports successful completion of the deployment.</span></span>  
  
    ![Çıkış penceresinde dağıtımın başarılı olduğunu bildiren](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image31.png)
14. <span data-ttu-id="f02a5-361">Başarılı dağıtımdan sonra varsayılan tarayıcı otomatik olarak dağıtılan web sitesinin URL'sini açar.</span><span class="sxs-lookup"><span data-stu-id="f02a5-361">Upon successful deployment, the default browser automatically opens to the URL of the deployed web site.</span></span>  
    <span data-ttu-id="f02a5-362">Oluşturduğunuz uygulama artık bulutta çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="f02a5-362">The application you created is now running in the cloud.</span></span> <span data-ttu-id="f02a5-363">Öğrenciler sekmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="f02a5-363">Click the Students tab.</span></span>  
  
    ![Students_index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image32.png)

<span data-ttu-id="f02a5-365">Bu noktada, *SchoolContext* veritabanı seçtiğiniz için Windows Azure SQL veritabanı'nda oluşturuldu **yürütme Code First Migrations (uygulama başlatılırken çalışır)**.</span><span class="sxs-lookup"><span data-stu-id="f02a5-365">At this point your *SchoolContext* database has been created in the Windows Azure SQL Database because you selected **Execute Code First Migrations (runs on app start)**.</span></span> <span data-ttu-id="f02a5-366">*Web.config* web sitesi dağıtıldı dosyasında değiştirildi böylece [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) Başlatıcı Kodunuzu okuyan veya veritabanına veri Yazar ilk kez çalıştırma (Bu Seçtiğiniz zaman oldu **Öğrenciler** sekmesi):</span><span class="sxs-lookup"><span data-stu-id="f02a5-366">The *Web.config* file in the deployed web site has been changed so that the [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) initializer would run the first time your code reads or writes data in the database (which happened when you selected the **Students** tab):</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image33.png)

<span data-ttu-id="f02a5-367">Dağıtım işlemi de oluşturulan yeni bir bağlantı dizesi *(SchoolContext\_DatabasePublish*) için Code First Migrations'veritabanı şeması güncelleştiriliyor ve veritabanında dengeli dağıtım için kullanılacak.</span><span class="sxs-lookup"><span data-stu-id="f02a5-367">The deployment process also created a new connection string *(SchoolContext\_DatabasePublish*) for Code First Migrations to use for updating the database schema and seeding the database.</span></span>

![Database_Publish bağlantı dizesi](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image34.png)

<span data-ttu-id="f02a5-369">*DefaultConnection* (Bu öğreticide kullanmıyorsanız) bir üyelik veritabanı bağlantı dizesi içindir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-369">The *DefaultConnection* connection string is for the membership database (which we are not using in this tutorial).</span></span> <span data-ttu-id="f02a5-370">*SchoolContext* bağlantı dizesi için ContosoUniversity veritabanıdır.</span><span class="sxs-lookup"><span data-stu-id="f02a5-370">The *SchoolContext* connection string is for the ContosoUniversity database.</span></span>

<span data-ttu-id="f02a5-371">Web.config dosyasının içinde kendi bilgisayarınıza dağıtılmış sürümünde bulabilirsiniz *ContosoUniversity\obj\Release\Package\PackageTmp\Web.config*. Dağıtılan erişim *Web.config* kendisini FTP kullanarak dosya.</span><span class="sxs-lookup"><span data-stu-id="f02a5-371">You can find the deployed version of the Web.config file on your own computer in *ContosoUniversity\obj\Release\Package\PackageTmp\Web.config*. You can access the deployed *Web.config* file itself by using FTP.</span></span> <span data-ttu-id="f02a5-372">Yönergeler için [Visual Studio kullanarak ASP.NET Web Dağıtımı: Kod güncelleştirmesi dağıtma](../../../../web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update.md).</span><span class="sxs-lookup"><span data-stu-id="f02a5-372">For instructions, see [ASP.NET Web Deployment using Visual Studio: Deploying a Code Update](../../../../web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update.md).</span></span> <span data-ttu-id="f02a5-373">İle başlayan yönergeleri "bir FTP aracını kullanmak için üç şeyi gerekir: FTP URL'si, kullanıcı adı ve parola."</span><span class="sxs-lookup"><span data-stu-id="f02a5-373">Follow the instructions that start with "To use an FTP tool, you need three things: the FTP URL, the user name, and the password."</span></span>

> [!NOTE]
> <span data-ttu-id="f02a5-374">URL bulur herkes veri değiştirebilmeniz için web uygulaması güvenlik uygulamaz.</span><span class="sxs-lookup"><span data-stu-id="f02a5-374">The web app doesn't implement security, so anyone who finds the URL can change the data.</span></span> <span data-ttu-id="f02a5-375">Web sitesini güvenli hale getirmek yönergeler için bkz: [üyelik, OAuth ve SQL veritabanı ile güvenli bir ASP.NET MVC uygulaması bir Windows Azure Web sitesine dağıtma](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data).</span><span class="sxs-lookup"><span data-stu-id="f02a5-375">For instructions on how to secure the web site, see [Deploy a Secure ASP.NET MVC app with Membership, OAuth, and SQL Database to a Windows Azure Web Site](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data).</span></span> <span data-ttu-id="f02a5-376">Windows Azure Yönetim Portalı'nı kullanarak site kullanarak diğer kişilerin engelleyebilir veya **Sunucu Gezgini** siteyi durdurmak için Visual Studio'da.</span><span class="sxs-lookup"><span data-stu-id="f02a5-376">You can prevent other people from using the site by using the Windows Azure Management Portal or **Server Explorer** in Visual Studio to stop the site.</span></span>


![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image35.png)

## <a name="code-first-initializers"></a><span data-ttu-id="f02a5-377">Kod ilk başlatıcıları</span><span class="sxs-lookup"><span data-stu-id="f02a5-377">Code First Initializers</span></span>

<span data-ttu-id="f02a5-378">Dağıtım bölümünde gördüğünüz [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) kullanılan başlatıcı.</span><span class="sxs-lookup"><span data-stu-id="f02a5-378">In the deployment section you saw the [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) initializer being used.</span></span> <span data-ttu-id="f02a5-379">Kod ilk, dahil olmak üzere kullanabileceğiniz diğer başlatıcılar ayrıca sağlar [Createdatabaseıfnotexists](https://msdn.microsoft.com/library/gg679221(v=vs.103).aspx) (varsayılan), [DropCreateDatabaseIfModelChanges](https://msdn.microsoft.com/library/gg679604(v=VS.103).aspx) ve [ DropCreateDatabaseAlways](https://msdn.microsoft.com/library/gg679506(v=VS.103).aspx).</span><span class="sxs-lookup"><span data-stu-id="f02a5-379">Code First also provides other initializers that you can use, including [CreateDatabaseIfNotExists](https://msdn.microsoft.com/library/gg679221(v=vs.103).aspx) (the default), [DropCreateDatabaseIfModelChanges](https://msdn.microsoft.com/library/gg679604(v=VS.103).aspx) and [DropCreateDatabaseAlways](https://msdn.microsoft.com/library/gg679506(v=VS.103).aspx).</span></span> <span data-ttu-id="f02a5-380">`DropCreateAlways` Başlatıcı birim testleri için koşullar ayarlamak için yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="f02a5-380">The `DropCreateAlways` initializer can be useful for setting up conditions for unit tests.</span></span> <span data-ttu-id="f02a5-381">Ayrıca, kendi başlatıcılar yazabilirsiniz ve uygulama okur veya veritabanına yazar beklemek istemiyorsanız, bir başlatıcı açıkça çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f02a5-381">You can also write your own initializers, and you can call an initializer explicitly if you don't want to wait until the application reads from or writes to the database.</span></span> <span data-ttu-id="f02a5-382">Bölüm 6 kitabın başlatıcılar kapsamlı bir açıklama için bkz [Entity Framework programlama: Code First](http://shop.oreilly.com/product/0636920022220.do) Julie Lerman ve Rowan Miller.</span><span class="sxs-lookup"><span data-stu-id="f02a5-382">For a comprehensive explanation of initializers, see chapter 6 of the book [Programming Entity Framework: Code First](http://shop.oreilly.com/product/0636920022220.do) by Julie Lerman and Rowan Miller.</span></span>

## <a name="summary"></a><span data-ttu-id="f02a5-383">Özet</span><span class="sxs-lookup"><span data-stu-id="f02a5-383">Summary</span></span>

<span data-ttu-id="f02a5-384">Bu öğreticide bir veri modeli oluşturma ve sıralama, filtreleme, sayfalama ve gruplandırma işlevi temel CRUD uygulama gördünüz.</span><span class="sxs-lookup"><span data-stu-id="f02a5-384">In this tutorial you've seen how to create a data model and implement basic CRUD, sorting, filtering, paging, and grouping functionality.</span></span> <span data-ttu-id="f02a5-385">Sonraki öğreticide veri modelini genişleterek daha ileri seviyeli konulara arama başlarsınız.</span><span class="sxs-lookup"><span data-stu-id="f02a5-385">In the next tutorial you'll begin looking at more advanced topics by expanding the data model.</span></span>

<span data-ttu-id="f02a5-386">Entity Framework diğer kaynakların bağlantılarını bulunabilir [ASP.NET Data Access içerik haritası](../../../../whitepapers/aspnet-data-access-content-map.md).</span><span class="sxs-lookup"><span data-stu-id="f02a5-386">Links to other Entity Framework resources can be found in the [ASP.NET Data Access Content Map](../../../../whitepapers/aspnet-data-access-content-map.md).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f02a5-387">[Önceki](implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application.md)
> [İleri](creating-a-more-complex-data-model-for-an-asp-net-mvc-application.md)</span><span class="sxs-lookup"><span data-stu-id="f02a5-387">[Previous](implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application.md)
[Next](creating-a-more-complex-data-model-for-an-asp-net-mvc-application.md)</span></span>
