---
uid: mvc/overview/older-versions/getting-started-with-ef-5-using-mvc-4/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application
title: ASP.NET MVC uygulamasındaki Entity Framework sıralama, filtreleme ve sayfalama (3/10) | Microsoft Docs
author: tdykstra
description: Contoso Üniversitesi örnek Web uygulaması, Entity Framework 5 Code First ve Visual Studio kullanarak nasıl ASP.NET MVC 4 uygulamaları oluşturacağınızı gösterir...
ms.author: riande
ms.date: 07/30/2013
ms.assetid: 8af630e0-fffa-4110-9eca-c96e201b2724
msc.legacyurl: /mvc/overview/older-versions/getting-started-with-ef-5-using-mvc-4/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application
msc.type: authoredcontent
ms.openlocfilehash: 48938b378a741a0f1c351c2cb1d33b5140c6cf93
ms.sourcegitcommit: 8d34fb54e790cfba2d64097afc8276da5b22283e
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 06/27/2020
ms.locfileid: "85484703"
---
# <a name="sorting-filtering-and-paging-with-the-entity-framework-in-an-aspnet-mvc-application-3-of-10"></a><span data-ttu-id="23a74-103">ASP.NET MVC uygulamasındaki Entity Framework sıralama, filtreleme ve sayfalama (3/10)</span><span class="sxs-lookup"><span data-stu-id="23a74-103">Sorting, Filtering, and Paging with the Entity Framework in an ASP.NET MVC Application (3 of 10)</span></span>

<span data-ttu-id="23a74-104">[Tom Dykstra](https://github.com/tdykstra) tarafından</span><span class="sxs-lookup"><span data-stu-id="23a74-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="23a74-105">Tamamlanmış projeyi indir</span><span class="sxs-lookup"><span data-stu-id="23a74-105">Download Completed Project</span></span>](https://code.msdn.microsoft.com/Getting-Started-with-dd0e2ed8)

> <span data-ttu-id="23a74-106">Contoso Üniversitesi örnek Web uygulaması, Entity Framework 5 Code First ve Visual Studio 2012 kullanarak nasıl ASP.NET MVC 4 uygulamaları oluşturacağınızı gösterir.</span><span class="sxs-lookup"><span data-stu-id="23a74-106">The Contoso University sample web application demonstrates how to create ASP.NET MVC 4 applications using the Entity Framework 5 Code First and Visual Studio 2012.</span></span> <span data-ttu-id="23a74-107">Öğretici serisi hakkında daha fazla bilgi için, [serideki ilk öğreticiye](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md)bakın.</span><span class="sxs-lookup"><span data-stu-id="23a74-107">For information about the tutorial series, see [the first tutorial in the series](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span> <span data-ttu-id="23a74-108">Öğretici serisini başlangıçtan başlatabilir veya [Bu bölüm için bir başlangıç projesi indirebilir](building-the-ef5-mvc4-chapter-downloads.md) ve buradan başlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-108">You can start the tutorial series from the beginning or [download a starter project for this chapter](building-the-ef5-mvc4-chapter-downloads.md) and start here.</span></span>
> 
> > [!NOTE] 
> > 
> > <span data-ttu-id="23a74-109">Giderebileceğiniz bir sorunla karşılaşırsanız, [Tamamlanan bölümü indirin](building-the-ef5-mvc4-chapter-downloads.md) ve sorununuzu yeniden oluşturmaya çalışın.</span><span class="sxs-lookup"><span data-stu-id="23a74-109">If you run into a problem you can't resolve, [download the completed chapter](building-the-ef5-mvc4-chapter-downloads.md) and try to reproduce your problem.</span></span> <span data-ttu-id="23a74-110">Sorunu, kodunuzun tamamlanan kodla karşılaştırarak genellikle soruna çözüm olarak ulaşabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-110">You can generally find the solution to the problem by comparing your code to the completed code.</span></span> <span data-ttu-id="23a74-111">Bazı yaygın hatalar ve bunların nasıl çözüleceği için bkz [. hatalar ve geçici çözümler.](advanced-entity-framework-scenarios-for-an-mvc-web-application.md#errors)</span><span class="sxs-lookup"><span data-stu-id="23a74-111">For some common errors and how to solve them, see [Errors and Workarounds.](advanced-entity-framework-scenarios-for-an-mvc-web-application.md#errors)</span></span>

<span data-ttu-id="23a74-112">Önceki öğreticide, varlıkların temel CRUD işlemleri için bir dizi Web sayfası uyguladık `Student` .</span><span class="sxs-lookup"><span data-stu-id="23a74-112">In the previous tutorial you implemented a set of web pages for basic CRUD operations for `Student` entities.</span></span> <span data-ttu-id="23a74-113">Bu öğreticide, **öğrenciler** dizin sayfasına sıralama, filtreleme ve sayfalama işlevselliği ekleyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-113">In this tutorial you'll add sorting, filtering, and paging functionality to the **Students** Index page.</span></span> <span data-ttu-id="23a74-114">Ayrıca basit gruplandırma yapan bir sayfa oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="23a74-114">You'll also create a page that does simple grouping.</span></span>

<span data-ttu-id="23a74-115">Aşağıdaki çizimde, işiniz bittiğinde sayfanın nasıl görüneceği gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="23a74-115">The following illustration shows what the page will look like when you're done.</span></span> <span data-ttu-id="23a74-116">Sütun başlıkları, kullanıcının sütuna göre sıralamak için tıkladığı bağlantılardır.</span><span class="sxs-lookup"><span data-stu-id="23a74-116">The column headings are links that the user can click to sort by that column.</span></span> <span data-ttu-id="23a74-117">Sütun başlığına tıklanması artan ve azalan sıralama düzeni arasında sürekli olarak geçiş yapar.</span><span class="sxs-lookup"><span data-stu-id="23a74-117">Clicking a column heading repeatedly toggles between ascending and descending sort order.</span></span>

![Students_Index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image1.png)

## <a name="add-column-sort-links-to-the-students-index-page"></a><span data-ttu-id="23a74-119">Öğrenciler dizin sayfasına sütun sıralama bağlantıları Ekle</span><span class="sxs-lookup"><span data-stu-id="23a74-119">Add Column Sort Links to the Students Index Page</span></span>

<span data-ttu-id="23a74-120">Öğrenci dizini sayfasına sıralama eklemek için `Index` denetleyicinin yöntemini değiştirecek `Student` ve `Student` Dizin görünümüne kod ekleyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-120">To add sorting to the Student Index page, you'll change the `Index` method of the `Student` controller and add code to the `Student` Index view.</span></span>

### <a name="add-sorting-functionality-to-the-index-method"></a><span data-ttu-id="23a74-121">Dizin yöntemine sıralama Işlevi ekleme</span><span class="sxs-lookup"><span data-stu-id="23a74-121">Add Sorting Functionality to the Index Method</span></span>

<span data-ttu-id="23a74-122">*Controllers\studentcontroller.cs*içinde, `Index` yöntemi aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="23a74-122">In *Controllers\StudentController.cs*, replace the `Index` method with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample1.cs)]

<span data-ttu-id="23a74-123">Bu kod `sortOrder` , URL 'deki sorgu dizesinden bir parametre alır.</span><span class="sxs-lookup"><span data-stu-id="23a74-123">This code receives a `sortOrder` parameter from the query string in the URL.</span></span> <span data-ttu-id="23a74-124">Sorgu dizesi değeri, ASP.NET MVC tarafından eylem yöntemine bir parametre olarak sağlanır.</span><span class="sxs-lookup"><span data-stu-id="23a74-124">The query string value is provided by ASP.NET MVC as a parameter to the action method.</span></span> <span data-ttu-id="23a74-125">Parametresi, "Name" veya "Date" adlı bir dize, isteğe bağlı olarak bir alt çizgi ve azalan sıralama belirtmek için "desc" dizesi olacaktır.</span><span class="sxs-lookup"><span data-stu-id="23a74-125">The parameter will be a string that's either "Name" or "Date", optionally followed by an underscore and the string "desc" to specify descending order.</span></span> <span data-ttu-id="23a74-126">Varsayılan sıralama düzeni artan.</span><span class="sxs-lookup"><span data-stu-id="23a74-126">The default sort order is ascending.</span></span>

<span data-ttu-id="23a74-127">Dizin sayfası ilk kez istendiğinde sorgu dizesi yoktur.</span><span class="sxs-lookup"><span data-stu-id="23a74-127">The first time the Index page is requested, there's no query string.</span></span> <span data-ttu-id="23a74-128">Öğrenciler, `LastName` bildiriminde, bildirimde bulunan durum ile belirlenen varsayılan değer olan artan sırada görüntülenir `switch` .</span><span class="sxs-lookup"><span data-stu-id="23a74-128">The students are displayed in ascending order by `LastName`, which is the default as established by the fall-through case in the `switch` statement.</span></span> <span data-ttu-id="23a74-129">Kullanıcı bir sütun başlığı köprüsüne tıkladığında, `sortOrder` sorgu dizesinde uygun değer sağlanır.</span><span class="sxs-lookup"><span data-stu-id="23a74-129">When the user clicks a column heading hyperlink, the appropriate `sortOrder` value is provided in the query string.</span></span>

<span data-ttu-id="23a74-130">İki `ViewBag` değişken, görünümün sütun başlığı köprülerini uygun sorgu dizesi değerleriyle yapılandırabilmesi için kullanılır:</span><span class="sxs-lookup"><span data-stu-id="23a74-130">The two `ViewBag` variables are used so that the view can configure the column heading hyperlinks with the appropriate query string values:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample2.cs)]

<span data-ttu-id="23a74-131">Bunlar Üçlü ifadelerdir.</span><span class="sxs-lookup"><span data-stu-id="23a74-131">These are ternary statements.</span></span> <span data-ttu-id="23a74-132">Birincisi, `sortOrder` parametre null veya boş ise `ViewBag.NameSortParm` "ad desc" olarak ayarlanması gerektiğini belirtir \_ ; Aksi takdirde, boş bir dizeye ayarlanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="23a74-132">The first one specifies that if the `sortOrder` parameter is null or empty, `ViewBag.NameSortParm` should be set to "name\_desc"; otherwise, it should be set to an empty string.</span></span> <span data-ttu-id="23a74-133">Bu iki deyim, görünümün sütun başlığı köprülerini şu şekilde ayarlamaya olanak tanır:</span><span class="sxs-lookup"><span data-stu-id="23a74-133">These two statements enable the view to set the column heading hyperlinks as follows:</span></span>

| <span data-ttu-id="23a74-134">Geçerli sıralama düzeni</span><span class="sxs-lookup"><span data-stu-id="23a74-134">Current sort order</span></span> | <span data-ttu-id="23a74-135">Son ad Köprüsü</span><span class="sxs-lookup"><span data-stu-id="23a74-135">Last Name Hyperlink</span></span> | <span data-ttu-id="23a74-136">Tarih Köprüsü</span><span class="sxs-lookup"><span data-stu-id="23a74-136">Date Hyperlink</span></span> |
| --- | --- | --- |
| <span data-ttu-id="23a74-137">Artan son ad</span><span class="sxs-lookup"><span data-stu-id="23a74-137">Last Name ascending</span></span> | <span data-ttu-id="23a74-138">descending</span><span class="sxs-lookup"><span data-stu-id="23a74-138">descending</span></span> | <span data-ttu-id="23a74-139">ascending</span><span class="sxs-lookup"><span data-stu-id="23a74-139">ascending</span></span> |
| <span data-ttu-id="23a74-140">Azalan son ad</span><span class="sxs-lookup"><span data-stu-id="23a74-140">Last Name descending</span></span> | <span data-ttu-id="23a74-141">ascending</span><span class="sxs-lookup"><span data-stu-id="23a74-141">ascending</span></span> | <span data-ttu-id="23a74-142">ascending</span><span class="sxs-lookup"><span data-stu-id="23a74-142">ascending</span></span> |
| <span data-ttu-id="23a74-143">Artan Tarih</span><span class="sxs-lookup"><span data-stu-id="23a74-143">Date ascending</span></span> | <span data-ttu-id="23a74-144">ascending</span><span class="sxs-lookup"><span data-stu-id="23a74-144">ascending</span></span> | <span data-ttu-id="23a74-145">descending</span><span class="sxs-lookup"><span data-stu-id="23a74-145">descending</span></span> |
| <span data-ttu-id="23a74-146">Azalan Tarih</span><span class="sxs-lookup"><span data-stu-id="23a74-146">Date descending</span></span> | <span data-ttu-id="23a74-147">ascending</span><span class="sxs-lookup"><span data-stu-id="23a74-147">ascending</span></span> | <span data-ttu-id="23a74-148">ascending</span><span class="sxs-lookup"><span data-stu-id="23a74-148">ascending</span></span> |

<span data-ttu-id="23a74-149">Yöntemi, sıralama yapılacak sütunu belirtmek için [LINQ to Entities](https://msdn.microsoft.com/library/bb386964.aspx) kullanır.</span><span class="sxs-lookup"><span data-stu-id="23a74-149">The method uses [LINQ to Entities](https://msdn.microsoft.com/library/bb386964.aspx) to specify the column to sort by.</span></span> <span data-ttu-id="23a74-150">Kod, deyimden önce bir [IQueryable](https://msdn.microsoft.com/library/bb351562.aspx) değişkeni oluşturur `switch` , `switch` deyimde değiştirir ve `ToList` deyimden sonra yöntemi çağırır `switch` .</span><span class="sxs-lookup"><span data-stu-id="23a74-150">The code creates an [IQueryable](https://msdn.microsoft.com/library/bb351562.aspx) variable before the `switch` statement, modifies it in the `switch` statement, and calls the `ToList` method after the `switch` statement.</span></span> <span data-ttu-id="23a74-151">Değişkenleri oluşturup değiştirirken `IQueryable` veritabanına hiçbir sorgu gönderilmez.</span><span class="sxs-lookup"><span data-stu-id="23a74-151">When you create and modify `IQueryable` variables, no query is sent to the database.</span></span> <span data-ttu-id="23a74-152">Sorgu, `IQueryable` gibi bir yöntemi çağırarak nesne bir koleksiyona dönüştürülene kadar yürütülmez `ToList` .</span><span class="sxs-lookup"><span data-stu-id="23a74-152">The query is not executed until you convert the `IQueryable` object into a collection by calling a method such as `ToList`.</span></span> <span data-ttu-id="23a74-153">Bu nedenle, bu kod, ifadeye kadar Yürütülmeyen tek bir sorgu ile sonuçlanır `return View` .</span><span class="sxs-lookup"><span data-stu-id="23a74-153">Therefore, this code results in a single query that is not executed until the `return View` statement.</span></span>

### <a name="add-column-heading-hyperlinks-to-the-student-index-view"></a><span data-ttu-id="23a74-154">Öğrenci dizini görünümüne sütun başlığı köprüleri ekleme</span><span class="sxs-lookup"><span data-stu-id="23a74-154">Add Column Heading Hyperlinks to the Student Index View</span></span>

<span data-ttu-id="23a74-155">*Views\student\ındex.cshtml*içinde, `<tr>` `<th>` başlık satırı için ve öğelerini vurgulanan kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="23a74-155">In *Views\Student\Index.cshtml*, replace the `<tr>` and `<th>` elements for the heading row with the highlighted code:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample3.cshtml?highlight=5-15)]

<span data-ttu-id="23a74-156">Bu kod, `ViewBag` uygun sorgu dizesi değerleriyle köprüler ayarlamak için özelliklerindeki bilgileri kullanır.</span><span class="sxs-lookup"><span data-stu-id="23a74-156">This code uses the information in the `ViewBag` properties to set up hyperlinks with the appropriate query string values.</span></span>

<span data-ttu-id="23a74-157">Sıralamayı doğrulamak için sayfayı çalıştırın ve **son ad** ve **kayıt tarihi** sütun başlıklarına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-157">Run the page and click the **Last Name** and **Enrollment Date** column headings to verify that sorting works.</span></span>

![Students_Index_page_with_sort_hyperlinks](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image2.png)

<span data-ttu-id="23a74-159">**Son ad** başlığına tıkladıktan sonra, öğrenciler azalan son ad sırasıyla görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="23a74-159">After you click the **Last Name** heading, students are displayed in descending last name order.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image3.png)

## <a name="add-a-search-box-to-the-students-index-page"></a><span data-ttu-id="23a74-160">Öğrenciler dizin sayfasına bir arama kutusu ekleyin</span><span class="sxs-lookup"><span data-stu-id="23a74-160">Add a Search Box to the Students Index Page</span></span>

<span data-ttu-id="23a74-161">Öğrenciler dizin sayfasına filtre eklemek için, görünüme bir metin kutusu ve Gönder düğmesi ekleyeceksiniz ve yöntemde ilgili değişiklikleri yapmanız gerekir `Index` .</span><span class="sxs-lookup"><span data-stu-id="23a74-161">To add filtering to the Students Index page, you'll add a text box and a submit button to the view and make corresponding changes in the `Index` method.</span></span> <span data-ttu-id="23a74-162">Metin kutusu, ilk adı ve soyadı alanlarını aramak için bir dize girmenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="23a74-162">The text box will let you enter a string to search for in the first name and last name fields.</span></span>

### <a name="add-filtering-functionality-to-the-index-method"></a><span data-ttu-id="23a74-163">Dizin yöntemine filtreleme Işlevi ekleme</span><span class="sxs-lookup"><span data-stu-id="23a74-163">Add Filtering Functionality to the Index Method</span></span>

<span data-ttu-id="23a74-164">*Controllers\studentcontroller.cs*içinde, `Index` yöntemi aşağıdaki kodla değiştirin (değişiklikler vurgulanır):</span><span class="sxs-lookup"><span data-stu-id="23a74-164">In *Controllers\StudentController.cs*, replace the `Index` method with the following code (the changes are highlighted):</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample4.cs?highlight=1,7-11)]

<span data-ttu-id="23a74-165">Yöntemine bir parametre eklediniz `searchString` `Index` .</span><span class="sxs-lookup"><span data-stu-id="23a74-165">You've added a `searchString` parameter to the `Index` method.</span></span> <span data-ttu-id="23a74-166">Ayrıca, `where` yalnızca adı veya soyadı arama dizesini içeren öğrencileri seçen LINQ deyimi a yan tümcesine de eklendiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-166">You've also added to the LINQ statement a `where` clause that selects only students whose first name or last name contains the search string.</span></span> <span data-ttu-id="23a74-167">Arama dizesi değeri, dizin görünümüne ekleyeceğiniz bir metin kutusundan alınır. [WHERE](https://msdn.microsoft.com/library/bb535040.aspx) yan tümcesini ekleyen deyimi, yalnızca aranacak bir değer varsa yürütülür.</span><span class="sxs-lookup"><span data-stu-id="23a74-167">The search string value is received from a text box that you'll add to the Index view.The statement that adds the [where](https://msdn.microsoft.com/library/bb535040.aspx) clause is executed only if there's a value to search for.</span></span>

> [!NOTE]
> <span data-ttu-id="23a74-168">Çoğu durumda, bir Entity Framework varlık kümesinde veya bir bellek içi koleksiyonda uzantı yöntemi olarak aynı yöntemi çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-168">In many cases you can call the same method either on an Entity Framework entity set or as an extension method on an in-memory collection.</span></span> <span data-ttu-id="23a74-169">Sonuçlar normalde aynıdır, ancak bazı durumlarda farklı olabilir.</span><span class="sxs-lookup"><span data-stu-id="23a74-169">The results are normally the same but in some cases may be different.</span></span> <span data-ttu-id="23a74-170">Örneğin, yöntemin .NET Framework uygulanması `Contains` boş bir dize geçirdiğinizde tüm satırları döndürür, ancak SQL Server Compact 4,0 Entity Framework sağlayıcısı boş dizeler için sıfır satır döndürür.</span><span class="sxs-lookup"><span data-stu-id="23a74-170">For example, the .NET Framework implementation of the `Contains` method returns all rows when you pass an empty string to it, but the Entity Framework provider for SQL Server Compact 4.0 returns zero rows for empty strings.</span></span> <span data-ttu-id="23a74-171">Bu nedenle örnekteki kod (deyimin `Where` içinde deyimin yerleştirilmesi `if` ) tüm SQL Server sürümleri için aynı sonuçları almanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="23a74-171">Therefore the code in the example (putting the `Where` statement inside an `if` statement) makes sure that you get the same results for all versions of SQL Server.</span></span> <span data-ttu-id="23a74-172">Ayrıca, yöntemi .NET Framework uygulama `Contains` Varsayılan olarak büyük/küçük harfe duyarlı bir karşılaştırma gerçekleştirir, ancak Entity Framework SQL Server sağlayıcılar varsayılan olarak büyük/küçük harfe duyarsız karşılaştırmalar yapar.</span><span class="sxs-lookup"><span data-stu-id="23a74-172">Also, the .NET Framework implementation of the `Contains` method performs a case-sensitive comparison by default, but Entity Framework SQL Server providers perform case-insensitive comparisons by default.</span></span> <span data-ttu-id="23a74-173">Bu nedenle, `ToUpper` testi açık büyük/küçük harfe duyarsız hale getirmek için yöntemini çağırmak, daha sonra kodu bir nesne yerine bir koleksiyon döndürecek şekilde değiştirdiğinizde sonuçların değişmemesini sağlar `IEnumerable` `IQueryable` .</span><span class="sxs-lookup"><span data-stu-id="23a74-173">Therefore, calling the `ToUpper` method to make the test explicitly case-insensitive ensures that results do not change when you change the code later to use a repository, which will return an `IEnumerable` collection instead of an `IQueryable` object.</span></span> <span data-ttu-id="23a74-174">( `Contains` Bir koleksiyonda yöntemini çağırdığınızda `IEnumerable` .NET Framework uygulamasını alırsınız; bir nesne üzerinde çağırdığınızda `IQueryable` , veritabanı sağlayıcısı uygulamasını alırsınız.)</span><span class="sxs-lookup"><span data-stu-id="23a74-174">(When you call the `Contains` method on an `IEnumerable` collection, you get the .NET Framework implementation; when you call it on an `IQueryable` object, you get the database provider implementation.)</span></span>

### <a name="add-a-search-box-to-the-student-index-view"></a><span data-ttu-id="23a74-175">Öğrenci dizini görünümüne arama kutusu ekleme</span><span class="sxs-lookup"><span data-stu-id="23a74-175">Add a Search Box to the Student Index View</span></span>

<span data-ttu-id="23a74-176">*Views\student\ındex.cshtml*içinde, `table` bir başlık, metin kutusu ve bir **arama** düğmesi oluşturmak için, açılan etiketten hemen önce vurgulanan kodu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="23a74-176">In *Views\Student\Index.cshtml*, add the highlighted code immediately before the opening `table` tag in order to create a caption, a text box, and a **Search** button.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample5.cshtml?highlight=5-10)]

<span data-ttu-id="23a74-177">Sayfayı çalıştırın, bir arama dizesi girin ve filtreleme 'nin çalıştığını doğrulamak için **Ara** ' ya tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-177">Run the page, enter a search string, and click **Search** to verify that filtering is working.</span></span>

![Students_Index_page_with_search_box](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image4.png)

<span data-ttu-id="23a74-179">URL 'nin "bir" arama dizesi içermediğini, yani bu sayfaya yer işareti eklerseniz, yer işaretini kullandığınızda filtrelenmiş listeyi almadığına dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="23a74-179">Notice the URL doesn't contain the "an" search string, which means that if you bookmark this page, you won't get the filtered list when you use the bookmark.</span></span> <span data-ttu-id="23a74-180">**Arama** düğmesini daha sonra öğreticide daha sonra filtre ölçütlerine yönelik Sorgu dizelerini kullanacak şekilde değiştirirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-180">You'll change the **Search** button to use query strings for filter criteria later in the tutorial.</span></span>

## <a name="add-paging-to-the-students-index-page"></a><span data-ttu-id="23a74-181">Öğrenciler dizin sayfasına sayfalama ekleme</span><span class="sxs-lookup"><span data-stu-id="23a74-181">Add Paging to the Students Index Page</span></span>

<span data-ttu-id="23a74-182">Öğrenciler dizin sayfasına sayfalama eklemek için **Pagedlist. Mvc** NuGet paketini yükleyerek başlayacaksınız.</span><span class="sxs-lookup"><span data-stu-id="23a74-182">To add paging to the Students Index page, you'll start by installing the **PagedList.Mvc** NuGet package.</span></span> <span data-ttu-id="23a74-183">Daha sonra, yöntemde ek değişiklikler yapar `Index` ve görünüme sayfalama bağlantıları ekleyebilirsiniz `Index` .</span><span class="sxs-lookup"><span data-stu-id="23a74-183">Then you'll make additional changes in the `Index` method and add paging links to the `Index` view.</span></span> <span data-ttu-id="23a74-184">**Pagedlist. Mvc** , ASP.NET MVC için çok iyi sayfalama ve sıralama paketlerinden biridir ve burada kullanılması, diğer seçeneklerin bir önerisi olarak değil yalnızca örnek olarak tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="23a74-184">**PagedList.Mvc** is one of many good paging and sorting packages for ASP.NET MVC, and its use here is intended only as an example, not as a recommendation for it over other options.</span></span> <span data-ttu-id="23a74-185">Aşağıdaki çizimde sayfalama bağlantıları gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="23a74-185">The following illustration shows the paging links.</span></span>

![Students_index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image5.png)

### <a name="install-the-pagedlistmvc-nuget-package"></a><span data-ttu-id="23a74-187">PagedList. MVC NuGet paketini yükler</span><span class="sxs-lookup"><span data-stu-id="23a74-187">Install the PagedList.MVC NuGet Package</span></span>

<span data-ttu-id="23a74-188">NuGet **pagedlist. Mvc** paketi, **pagedlist** paketini otomatik olarak bir bağımlılık olarak yüklüyor.</span><span class="sxs-lookup"><span data-stu-id="23a74-188">The NuGet **PagedList.Mvc** package automatically installs the **PagedList** package as a dependency.</span></span> <span data-ttu-id="23a74-189">**Pagedlist** paketi, `PagedList` ve koleksiyonları için bir koleksiyon türü ve uzantı yöntemleri yüklüyor `IQueryable` `IEnumerable` .</span><span class="sxs-lookup"><span data-stu-id="23a74-189">The **PagedList** package installs a `PagedList` collection type and extension methods for `IQueryable` and `IEnumerable` collections.</span></span> <span data-ttu-id="23a74-190">Uzantı yöntemleri, veya dışında bir koleksiyondaki verilerin tek bir sayfasını oluşturur `PagedList` `IQueryable` `IEnumerable` ve `PagedList` koleksiyon, sayfalama işlemini kolaylaştıran çeşitli özellikler ve yöntemler sağlar.</span><span class="sxs-lookup"><span data-stu-id="23a74-190">The extension methods create a single page of data in a `PagedList` collection out of your `IQueryable` or `IEnumerable`, and the `PagedList` collection provides several properties and methods that facilitate paging.</span></span> <span data-ttu-id="23a74-191">**Pagedlist. Mvc** paketi, sayfalama düğmelerini görüntüleyen bir sayfalama Yardımcısı yüklüyor.</span><span class="sxs-lookup"><span data-stu-id="23a74-191">The **PagedList.Mvc** package installs a paging helper that displays the paging buttons.</span></span>

<span data-ttu-id="23a74-192">**Araçlar** menüsünde, **NuGet Paket Yöneticisi** ' ni ve ardından **çözüm için NuGet Paketlerini Yönet**' i seçin.</span><span class="sxs-lookup"><span data-stu-id="23a74-192">From the **Tools** menu, select **NuGet Package Manager** and then **Manage NuGet Packages for Solution**.</span></span>

<span data-ttu-id="23a74-193">**NuGet Paketlerini Yönet** iletişim kutusunda, sol taraftaki **çevrimiçi** sekmesine tıklayın ve ardından arama kutusuna "Sayfalanmış" yazın.</span><span class="sxs-lookup"><span data-stu-id="23a74-193">In the **Manage NuGet Packages** dialog box, click the **Online** tab on the left and then enter "paged" in the search box.</span></span> <span data-ttu-id="23a74-194">**Pagedlist. Mvc** paketini gördüğünüzde, **yükler**' e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-194">When you see the **PagedList.Mvc** package, click **Install**.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image6.png)

<span data-ttu-id="23a74-195">**Projeleri Seç** kutusunda **Tamam**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-195">In the **Select Projects** box, click **OK**.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image7.png)

### <a name="add-paging-functionality-to-the-index-method"></a><span data-ttu-id="23a74-196">Dizin yöntemine sayfalama Işlevselliği ekleme</span><span class="sxs-lookup"><span data-stu-id="23a74-196">Add Paging Functionality to the Index Method</span></span>

<span data-ttu-id="23a74-197">*Controllers\studentcontroller.cs*içinde, `using` ad alanı için bir ifade ekleyin `PagedList` :</span><span class="sxs-lookup"><span data-stu-id="23a74-197">In *Controllers\StudentController.cs*, add a `using` statement for the `PagedList` namespace:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample6.cs)]

<span data-ttu-id="23a74-198">`Index` yöntemini aşağıdaki kod ile değiştirin:</span><span class="sxs-lookup"><span data-stu-id="23a74-198">Replace the `Index` method with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample7.cs)]

<span data-ttu-id="23a74-199">Bu kod, `page` burada gösterildiği gibi bir parametre, geçerli bir sıralama düzeni parametresi ve Yöntem imzasına geçerli bir filtre parametresi ekler:</span><span class="sxs-lookup"><span data-stu-id="23a74-199">This code adds a `page` parameter, a current sort order parameter, and a current filter parameter to the method signature, as shown here:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample8.cs)]

<span data-ttu-id="23a74-200">Sayfa ilk kez görüntülenirken veya Kullanıcı bir sayfalama veya sıralama bağlantısına tıklamamışsa, tüm parametreler null olur.</span><span class="sxs-lookup"><span data-stu-id="23a74-200">The first time the page is displayed, or if the user hasn't clicked a paging or sorting link, all the parameters will be null.</span></span> <span data-ttu-id="23a74-201">Bir sayfalama bağlantısına tıklandıysanız, `page` değişken görüntülenecek sayfa numarasını içerir.</span><span class="sxs-lookup"><span data-stu-id="23a74-201">If a paging link is clicked, the `page` variable will contain the page number to display.</span></span>

<span data-ttu-id="23a74-202">`A ViewBag`özelliği geçerli sıralama düzeni ile görünüm sağlar, çünkü bu sıralama sırasını sayfalama sırasında aynı tutmak için disk belleği bağlantılarına dahil edilmesi gerekir:</span><span class="sxs-lookup"><span data-stu-id="23a74-202">`A ViewBag` property provides the view with the current sort order, because this must be included in the paging links in order to keep the sort order the same while paging:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample9.cs)]

<span data-ttu-id="23a74-203">Başka bir özellik, `ViewBag.CurrentFilter` geçerli filtre dizesiyle görünüm sağlar.</span><span class="sxs-lookup"><span data-stu-id="23a74-203">Another property, `ViewBag.CurrentFilter`, provides the view with the current filter string.</span></span> <span data-ttu-id="23a74-204">Bu değer, disk belleği sırasında filtre ayarlarını korumak için disk belleği bağlantılarına dahil olmalıdır ve sayfa yeniden görüntülenirken metin kutusuna geri yüklenmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="23a74-204">This value must be included in the paging links in order to maintain the filter settings during paging, and it must be restored to the text box when the page is redisplayed.</span></span> <span data-ttu-id="23a74-205">Arama dizesi sayfalama sırasında değiştirilmişse, yeni filtre farklı verilerin görüntülenmesini sağladığından sayfanın 1 olarak sıfırlanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="23a74-205">If the search string is changed during paging, the page has to be reset to 1, because the new filter can result in different data to display.</span></span> <span data-ttu-id="23a74-206">Metin kutusuna bir değer girildiğinde ve Gönder düğmesine basıldığında arama dizesi değişir.</span><span class="sxs-lookup"><span data-stu-id="23a74-206">The search string is changed when a value is entered in the text box and the submit button is pressed.</span></span> <span data-ttu-id="23a74-207">Bu durumda, `searchString` parametre null değil.</span><span class="sxs-lookup"><span data-stu-id="23a74-207">In that case, the `searchString` parameter is not null.</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample10.cs)]

<span data-ttu-id="23a74-208">Yöntemin sonunda, `ToPagedList` öğrenciler nesnesindeki genişletme yöntemi `IQueryable` öğrenci sorgusunu, sayfalama destekleyen bir koleksiyon türünde tek bir öğrenciye dönüştürür.</span><span class="sxs-lookup"><span data-stu-id="23a74-208">At the end of the method, the `ToPagedList` extension method on the students `IQueryable` object converts the student query to a single page of students in a collection type that supports paging.</span></span> <span data-ttu-id="23a74-209">Bu tek bir öğrenci sayfası daha sonra görünüme geçirilir:</span><span class="sxs-lookup"><span data-stu-id="23a74-209">That single page of students is then passed to the view:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample11.cs)]

<span data-ttu-id="23a74-210">`ToPagedList`Yöntemi bir sayfa numarası alır.</span><span class="sxs-lookup"><span data-stu-id="23a74-210">The `ToPagedList` method takes a page number.</span></span> <span data-ttu-id="23a74-211">İki soru işareti, [null birleşim işlecini](https://msdn.microsoft.com/library/ms173224.aspx)temsil eder.</span><span class="sxs-lookup"><span data-stu-id="23a74-211">The two question marks represent the [null-coalescing operator](https://msdn.microsoft.com/library/ms173224.aspx).</span></span> <span data-ttu-id="23a74-212">Null birleşim işleci, Nullable bir tür için varsayılan değeri tanımlar; ifade `(page ?? 1)` `page` bir değer içeriyorsa değerini döndürür veya null ise 1 döndürür `page` .</span><span class="sxs-lookup"><span data-stu-id="23a74-212">The null-coalescing operator defines a default value for a nullable type; the expression `(page ?? 1)` means return the value of `page` if it has a value, or return 1 if `page` is null.</span></span>

### <a name="add-paging-links-to-the-student-index-view"></a><span data-ttu-id="23a74-213">Öğrenci dizini görünümüne sayfalama bağlantıları ekleme</span><span class="sxs-lookup"><span data-stu-id="23a74-213">Add Paging Links to the Student Index View</span></span>

<span data-ttu-id="23a74-214">*Views\student\ındex.cshtml*içinde, mevcut kodu şu kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="23a74-214">In *Views\Student\Index.cshtml*, replace the existing code with the following code:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample12.cshtml?highlight=6,9,14-20,56-58)]

<span data-ttu-id="23a74-215">`@model`Sayfanın üst kısmındaki ifade, görünümün artık nesne yerine bir nesne aldığından emin olarak belirtir `PagedList` `List` .</span><span class="sxs-lookup"><span data-stu-id="23a74-215">The `@model` statement at the top of the page specifies that the view now gets a `PagedList` object instead of a `List` object.</span></span>

<span data-ttu-id="23a74-216">`using`İçin deyimleri, `PagedList.Mvc` SAYFALAMA düğmelerinin MVC Yardımcısı 'na erişim sağlar.</span><span class="sxs-lookup"><span data-stu-id="23a74-216">The `using` statement for `PagedList.Mvc` gives access to the MVC helper for the paging buttons.</span></span>

<span data-ttu-id="23a74-217">Kod, bir [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) aşırı yüklemesi kullanarak [FormMethod. Get](https://msdn.microsoft.com/library/system.web.mvc.formmethod(v=vs.100).aspx/css)belirlemesine izin verir.</span><span class="sxs-lookup"><span data-stu-id="23a74-217">The code uses an overload of [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) that allows it to specify [FormMethod.Get](https://msdn.microsoft.com/library/system.web.mvc.formmethod(v=vs.100).aspx/css).</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample13.cshtml?highlight=1)]

<span data-ttu-id="23a74-218">Varsayılan [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) , form VERILERINI bir gönderiyle gönderir, yani Parametreler, URL 'de sorgu dizeleri olarak değil http ileti gövdesinde geçirilir.</span><span class="sxs-lookup"><span data-stu-id="23a74-218">The default [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) submits form data with a POST, which means that parameters are passed in the HTTP message body and not in the URL as query strings.</span></span> <span data-ttu-id="23a74-219">HTTP GET belirttiğinizde, form verileri URL 'ye sorgu dizeleri olarak geçirilir ve bu da kullanıcıların URL 'ye yer işareti eklemesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="23a74-219">When you specify HTTP GET, the form data is passed in the URL as query strings, which enables users to bookmark the URL.</span></span> <span data-ttu-id="23a74-220">[Http get kullanımı Için W3C yönergeleri](http://www.w3.org/2001/tag/doc/whenToUseGet.html) , eylem bir güncelleştirme ile sonuçlanmayan Get ' i kullanmanız gerektiğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="23a74-220">The [W3C guidelines for the use of HTTP GET](http://www.w3.org/2001/tag/doc/whenToUseGet.html) specify that you should use GET when the action does not result in an update.</span></span>

<span data-ttu-id="23a74-221">Metin kutusu geçerli arama dizesiyle başlatılır, böylece yeni bir sayfaya tıkladığınızda geçerli arama dizesini görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-221">The text box is initialized with the current search string so when you click a new page you can see the current search string.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample14.cshtml?highlight=1)]

<span data-ttu-id="23a74-222">Sütun üst bilgisi bağlantıları, kullanıcının filtre sonuçları içinde sıralama yapabilmesi için geçerli arama dizesini denetleyiciye geçirmek için sorgu dizesini kullanır:</span><span class="sxs-lookup"><span data-stu-id="23a74-222">The column header links use the query string to pass the current search string to the controller so that the user can sort within filter results:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample15.cshtml?highlight=1)]

<span data-ttu-id="23a74-223">Geçerli sayfa ve toplam sayfa sayısı görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="23a74-223">The current page and total number of pages are displayed.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample16.cshtml)]

<span data-ttu-id="23a74-224">Görüntülenecek sayfa yoksa, "sayfa 0/0" görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="23a74-224">If there are no pages to display, "Page 0 of 0" is shown.</span></span> <span data-ttu-id="23a74-225">(Bu durumda, 1 olan ve 0 olduğu için sayfa numarası sayfa sayısından daha büyük olur `Model.PageNumber` `Model.PageCount` .)</span><span class="sxs-lookup"><span data-stu-id="23a74-225">(In that case the page number is greater than the page count because `Model.PageNumber` is 1, and `Model.PageCount` is 0.)</span></span>

<span data-ttu-id="23a74-226">Sayfalama düğmeleri yardımcı tarafından görüntülenir `PagedListPager` :</span><span class="sxs-lookup"><span data-stu-id="23a74-226">The paging buttons are displayed by the `PagedListPager` helper:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample17.cshtml)]

<span data-ttu-id="23a74-227">`PagedListPager`Yardımcı, URL 'ler ve stil oluşturma da dahil olmak üzere özelleştirebilmeniz gereken birkaç seçenek sağlar.</span><span class="sxs-lookup"><span data-stu-id="23a74-227">The `PagedListPager` helper provides a number of options that you can customize, including URLs and styling.</span></span> <span data-ttu-id="23a74-228">Daha fazla bilgi için GitHub sitesindeki [Troyıgocode/PagedList](https://github.com/TroyGoode/PagedList) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="23a74-228">For more information, see [TroyGoode / PagedList](https://github.com/TroyGoode/PagedList) on the GitHub site.</span></span>

<span data-ttu-id="23a74-229">Sayfayı çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="23a74-229">Run the page.</span></span>

![Students_index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image8.png)

<span data-ttu-id="23a74-231">Disk belleğinin çalıştığından emin olmak için farklı sıralama emirlerindeki disk belleği bağlantılarına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-231">Click the paging links in different sort orders to make sure paging works.</span></span> <span data-ttu-id="23a74-232">Daha sonra bir arama dizesi girin ve sayfalama ve filtreleme ile doğru şekilde çalıştığını doğrulamak için sayfalama işlemi yeniden deneyin.</span><span class="sxs-lookup"><span data-stu-id="23a74-232">Then enter a search string and try paging again to verify that paging also works correctly with sorting and filtering.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image9.png)

## <a name="create-an-about-page-that-shows-student-statistics"></a><span data-ttu-id="23a74-233">Öğrenci Istatistiklerini gösteren bir hakkında sayfa oluşturun</span><span class="sxs-lookup"><span data-stu-id="23a74-233">Create an About Page That Shows Student Statistics</span></span>

<span data-ttu-id="23a74-234">Contoso Üniversitesi web sitesinin hakkında sayfasında, her bir kayıt tarihi için kaç öğrenciye kaydolduğunu görüntüleyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-234">For the Contoso University website's About page, you'll display how many students have enrolled for each enrollment date.</span></span> <span data-ttu-id="23a74-235">Bu, gruplar üzerinde gruplandırma ve basit hesaplamalar gerektirir.</span><span class="sxs-lookup"><span data-stu-id="23a74-235">This requires grouping and simple calculations on the groups.</span></span> <span data-ttu-id="23a74-236">Bunu gerçekleştirmek için aşağıdakileri yapmanız gerekir:</span><span class="sxs-lookup"><span data-stu-id="23a74-236">To accomplish this, you'll do the following:</span></span>

- <span data-ttu-id="23a74-237">Görünüme geçirmeniz gereken veriler için bir görünüm modeli sınıfı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="23a74-237">Create a view model class for the data that you need to pass to the view.</span></span>
- <span data-ttu-id="23a74-238">`About`Denetleyicisindeki yöntemi değiştirin `Home` .</span><span class="sxs-lookup"><span data-stu-id="23a74-238">Modify the `About` method in the `Home` controller.</span></span>
- <span data-ttu-id="23a74-239">Görünümü değiştirin `About` .</span><span class="sxs-lookup"><span data-stu-id="23a74-239">Modify the `About` view.</span></span>

### <a name="create-the-view-model"></a><span data-ttu-id="23a74-240">Görünüm modeli oluşturma</span><span class="sxs-lookup"><span data-stu-id="23a74-240">Create the View Model</span></span>

<span data-ttu-id="23a74-241">*Viewmodeller* klasörü oluşturun.</span><span class="sxs-lookup"><span data-stu-id="23a74-241">Create a *ViewModels* folder.</span></span> <span data-ttu-id="23a74-242">Bu klasörde, *EnrollmentDateGroup.cs* bir sınıf dosyası ekleyin ve mevcut kodu şu kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="23a74-242">In that folder, add a class file *EnrollmentDateGroup.cs* and replace the existing code with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample18.cs)]

### <a name="modify-the-home-controller"></a><span data-ttu-id="23a74-243">Ana denetleyiciyi değiştirme</span><span class="sxs-lookup"><span data-stu-id="23a74-243">Modify the Home Controller</span></span>

<span data-ttu-id="23a74-244">*HomeController.cs*' de, `using` dosyanın en üstüne aşağıdaki deyimleri ekleyin:</span><span class="sxs-lookup"><span data-stu-id="23a74-244">In *HomeController.cs*, add the following `using` statements at the top of the file:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample19.cs)]

<span data-ttu-id="23a74-245">Sınıf için açma küme ayracından hemen sonra veritabanı bağlamı için bir sınıf değişkeni ekleyin:</span><span class="sxs-lookup"><span data-stu-id="23a74-245">Add a class variable for the database context immediately after the opening curly brace for the class:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample20.cs?highlight=3)]

<span data-ttu-id="23a74-246">`About` yöntemini aşağıdaki kod ile değiştirin:</span><span class="sxs-lookup"><span data-stu-id="23a74-246">Replace the `About` method with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample21.cs)]

<span data-ttu-id="23a74-247">LINQ beyanı, öğrenci varlıklarını kayıt tarihine göre gruplandırır, her bir gruptaki varlıkların sayısını hesaplar ve sonuçları bir `EnrollmentDateGroup` görünüm modeli nesneleri koleksiyonunda depolar.</span><span class="sxs-lookup"><span data-stu-id="23a74-247">The LINQ statement groups the student entities by enrollment date, calculates the number of entities in each group, and stores the results in a collection of `EnrollmentDateGroup` view model objects.</span></span>

<span data-ttu-id="23a74-248">Bir `Dispose` Yöntem ekleyin:</span><span class="sxs-lookup"><span data-stu-id="23a74-248">Add a `Dispose` method:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample22.cs)]

### <a name="modify-the-about-view"></a><span data-ttu-id="23a74-249">Hakkında görünümünü değiştirme</span><span class="sxs-lookup"><span data-stu-id="23a74-249">Modify the About View</span></span>

<span data-ttu-id="23a74-250">*Views\home\about.exe* dosyasındaki kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="23a74-250">Replace the code in the *Views\Home\About.cshtml* file with the following code:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample23.cshtml)]

<span data-ttu-id="23a74-251">Uygulamayı çalıştırın ve **hakkında** bağlantısına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-251">Run the app and click the **About** link.</span></span> <span data-ttu-id="23a74-252">Her kayıt tarihi için öğrenci sayısı bir tabloda görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="23a74-252">The count of students for each enrollment date is displayed in a table.</span></span>

![About_page](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image10.png)

## <a name="optional-deploy-the-app-to-windows-azure"></a><span data-ttu-id="23a74-254">İsteğe bağlı: uygulamayı Microsoft Azure 'a dağıtma</span><span class="sxs-lookup"><span data-stu-id="23a74-254">Optional: Deploy the app to Windows Azure</span></span>

<span data-ttu-id="23a74-255">Bu nedenle, uygulamanız geliştirme bilgisayarınızda IIS Express yerel olarak çalışıyor.</span><span class="sxs-lookup"><span data-stu-id="23a74-255">So far your application has been running locally in IIS Express on your development computer.</span></span> <span data-ttu-id="23a74-256">Diğer kişilerin Internet üzerinden kullanmasını sağlamak için, bir Web barındırma sağlayıcısına dağıtmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="23a74-256">To make it available for other people to use over the Internet, you have to deploy it to a web hosting provider.</span></span> <span data-ttu-id="23a74-257">Öğreticinin isteğe bağlı bu bölümünde, Windows Azure Web sitesine dağıtırsınız.</span><span class="sxs-lookup"><span data-stu-id="23a74-257">In this optional section of the tutorial you'll deploy it to a Windows Azure Web Site.</span></span>

### <a name="using-code-first-migrations-to-deploy-the-database"></a><span data-ttu-id="23a74-258">Veritabanını dağıtmak için Code First Migrations kullanma</span><span class="sxs-lookup"><span data-stu-id="23a74-258">Using Code First Migrations to Deploy the Database</span></span>

<span data-ttu-id="23a74-259">Veritabanını dağıtmak için Code First Migrations kullanırsınız.</span><span class="sxs-lookup"><span data-stu-id="23a74-259">To deploy the database you'll use Code First Migrations.</span></span> <span data-ttu-id="23a74-260">Visual Studio 'dan dağıtma ayarlarını yapılandırmak için kullandığınız yayımlama profilini oluşturduğunuzda, yürütme Code First Migrations etiketli bir onay kutusunu **(uygulama başlatıldığında çalışır)** seçersiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-260">When you create the publish profile that you use to configure settings for deploying from Visual Studio, you'll select a check box that is labeled **Execute Code First Migrations (runs on application start)**.</span></span> <span data-ttu-id="23a74-261">Bu ayar dağıtım işleminin, Code First Başlatıcı sınıfını kullanması için hedef sunucudaki uygulama *Web.config* dosyasını otomatik olarak yapılandırmasına neden olur `MigrateDatabaseToLatestVersion` .</span><span class="sxs-lookup"><span data-stu-id="23a74-261">This setting causes the deployment process to automatically configure the application *Web.config* file on the destination server so that Code First uses the `MigrateDatabaseToLatestVersion` initializer class.</span></span>

<span data-ttu-id="23a74-262">Visual Studio, dağıtım işlemi sırasında veritabanıyla hiçbir şey yapmaz.</span><span class="sxs-lookup"><span data-stu-id="23a74-262">Visual Studio does not do anything with the database during the deployment process.</span></span> <span data-ttu-id="23a74-263">Dağıtılan uygulama dağıtımdan sonra veritabanına ilk kez eriştiğinde, Code First otomatik olarak veritabanını oluşturur veya veritabanı şemasını en son sürüme güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="23a74-263">When the deployed application accesses the database for the first time after deployment, Code First automatically creates the database or updates the database schema to the latest version.</span></span> <span data-ttu-id="23a74-264">Uygulama bir geçişler yöntemi uygularsa `Seed` , yöntem veritabanı oluşturulduktan sonra veya şema güncelleştirildikten sonra çalışır.</span><span class="sxs-lookup"><span data-stu-id="23a74-264">If the application implements a Migrations `Seed` method, the method runs after the database is created or the schema is updated.</span></span>

<span data-ttu-id="23a74-265">Geçişler `Seed` yönteminiz test verileri ekler.</span><span class="sxs-lookup"><span data-stu-id="23a74-265">Your Migrations `Seed` method inserts test data.</span></span> <span data-ttu-id="23a74-266">Bir üretim ortamına dağıtım yapıyorsanız, `Seed` yöntemi yalnızca üretim veritabanınıza eklemek istediğiniz verileri içerecek şekilde değiştirmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="23a74-266">If you were deploying to a production environment, you would have to change the `Seed` method so that it only inserts data that you want to be inserted into your production database.</span></span> <span data-ttu-id="23a74-267">Örneğin, geçerli veri modelinizde gerçek kurslar olmasını, ancak geliştirme veritabanında öğrenci öğrencilerine sahip olmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-267">For example, in your current data model you might want to have real courses but fictional students in the development database.</span></span> <span data-ttu-id="23a74-268">`Seed`Geliştirme sırasında her ikisini de yüklemek için bir yöntem yazabilir ve ardından üretime dağıtmadan önce kurgusal öğrencileri açıklama olarak girebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-268">You can write a `Seed` method to load both in development, and then comment out the fictional students before you deploy to production.</span></span> <span data-ttu-id="23a74-269">Ya da `Seed` yalnızca kursları yüklemek için bir yöntem yazabilir ve uygulamanın kullanıcı arabirimini kullanarak test veritabanına kurgusal öğrencileri el ile girebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-269">Or you can write a `Seed` method to load only courses, and enter the fictional students in the test database manually by using the application's UI.</span></span>

### <a name="get-a-windows-azure-account"></a><span data-ttu-id="23a74-270">Bir Windows Azure hesabı alın</span><span class="sxs-lookup"><span data-stu-id="23a74-270">Get a Windows Azure account</span></span>

<span data-ttu-id="23a74-271">Bir Windows Azure hesabınız olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="23a74-271">You'll need a Windows Azure account.</span></span> <span data-ttu-id="23a74-272">Henüz bir hesabınız yoksa yalnızca birkaç dakika içinde ücretsiz bir deneme hesabı oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-272">If you don't already have one, you can create a free trial account in just a couple of minutes.</span></span> <span data-ttu-id="23a74-273">Ayrıntılar için bkz. [Windows Azure Ücretsiz deneme](https://azure.microsoft.com/free/dotnet/).</span><span class="sxs-lookup"><span data-stu-id="23a74-273">For details, see [Windows Azure Free Trial](https://azure.microsoft.com/free/dotnet/).</span></span>

### <a name="create-a-web-site-and-a-sql-database-in-windows-azure"></a><span data-ttu-id="23a74-274">Microsoft Azure 'da bir Web sitesi ve SQL veritabanı oluşturma</span><span class="sxs-lookup"><span data-stu-id="23a74-274">Create a web site and a SQL database in Windows Azure</span></span>

<span data-ttu-id="23a74-275">Windows Azure Web siteniz, paylaşılan bir barındırma ortamında çalışacak ve bu, diğer Windows Azure istemcileriyle paylaşılan sanal makinelerde (VM) çalıştığı anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="23a74-275">Your Windows Azure Web Site will run in a shared hosting environment, which means it runs on virtual machines (VMs) that are shared with other Windows Azure clients.</span></span> <span data-ttu-id="23a74-276">Paylaşılan barındırma ortamı, buluta başlamak için düşük maliyetli bir yoldur.</span><span class="sxs-lookup"><span data-stu-id="23a74-276">A shared hosting environment is a low-cost way to get started in the cloud.</span></span> <span data-ttu-id="23a74-277">Daha sonra, Web trafiğiniz arttıkça, uygulama adanmış VM 'lerde çalışırken ihtiyacı karşılayacak şekilde ölçeklendirebilir.</span><span class="sxs-lookup"><span data-stu-id="23a74-277">Later, if your web traffic increases, the application can scale to meet the need by running on dedicated VMs.</span></span> <span data-ttu-id="23a74-278">Daha karmaşık bir mimariye ihtiyacınız varsa, bir Windows Azure bulut hizmetine geçiş yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-278">If you need a more complex architecture, you can migrate to a Windows Azure Cloud Service.</span></span> <span data-ttu-id="23a74-279">Bulut Hizmetleri, gereksinimlerinize göre yapılandırabileceğiniz adanmış VM 'lerde çalışır.</span><span class="sxs-lookup"><span data-stu-id="23a74-279">Cloud services run on dedicated VMs that you can configure according to your needs.</span></span>

<span data-ttu-id="23a74-280">Microsoft Azure SQL veritabanı, SQL Server teknolojileri üzerinde geliştirilen bulut tabanlı bir ilişkisel veritabanı hizmetidir.</span><span class="sxs-lookup"><span data-stu-id="23a74-280">Windows Azure SQL Database is a cloud-based relational database service that is built on SQL Server technologies.</span></span> <span data-ttu-id="23a74-281">SQL Server ile birlikte çalışan araçlar ve uygulamalar SQL veritabanı ile de çalışır.</span><span class="sxs-lookup"><span data-stu-id="23a74-281">Tools and applications that work with SQL Server also work with SQL Database.</span></span>

1. <span data-ttu-id="23a74-282">[Windows Azure yönetim portalı](https://manage.windowsazure.com/)sol sekmedeki **Web siteleri** ' ne ve ardından **Yeni**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-282">In the [Windows Azure Management Portal](https://manage.windowsazure.com/), click **Web Sites** in the left tab, and then click **New**.</span></span>

    ![Yönetim Portalı yeni düğme](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image11.png)
2. <span data-ttu-id="23a74-284">**Özel oluştur**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-284">Click **CUSTOM CREATE**.</span></span>

    ![Yönetim Portalı veritabanı bağlantısıyla oluştur](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image12.png)

   <span data-ttu-id="23a74-286">**Yeni Web sitesi-özel oluşturma** Sihirbazı açılır.</span><span class="sxs-lookup"><span data-stu-id="23a74-286">The **New Web Site - Custom Create** wizard opens.</span></span>
3. <span data-ttu-id="23a74-287">Sihirbazın **Yeni Web sitesi** adımında, **URL** kutusuna uygulamanızın benzersiz URL 'si olarak kullanılacak bir dize girin.</span><span class="sxs-lookup"><span data-stu-id="23a74-287">In the **New Web Site** step of the wizard, enter a string in the **URL** box to use as the unique URL for your application.</span></span> <span data-ttu-id="23a74-288">URL 'nin tamamı buraya girdiklerinize ve metin kutusunun yanında gördüğünüz sonekine sahip olacaktır.</span><span class="sxs-lookup"><span data-stu-id="23a74-288">The complete URL will consist of what you enter here plus the suffix that you see next to the text box.</span></span> <span data-ttu-id="23a74-289">Çizimde "ConU" gösterilir, ancak bu URL büyük olasılıkla başka bir tane seçmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="23a74-289">The illustration shows "ConU", but that URL is probably taken so you will have to choose a different one.</span></span>

    ![Yönetim Portalı veritabanı bağlantısıyla oluştur](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image13.png)
4. <span data-ttu-id="23a74-291">**Bölge** açılan listesinde, size yakın bir bölge seçin.</span><span class="sxs-lookup"><span data-stu-id="23a74-291">In the **Region** drop-down list, choose a region close to you.</span></span> <span data-ttu-id="23a74-292">Bu ayar, Web sitenizin çalışacağı veri merkezini belirtir.</span><span class="sxs-lookup"><span data-stu-id="23a74-292">This setting specifies which data center your web site will run in.</span></span>
5. <span data-ttu-id="23a74-293">**Veritabanı** açılan listesinde, **ÜCRETSIZ 20 MB SQL veritabanı oluştur**' u seçin.</span><span class="sxs-lookup"><span data-stu-id="23a74-293">In the **Database** drop-down list, choose **Create a free 20 MB SQL database**.</span></span>

    ![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image14.png)
6. <span data-ttu-id="23a74-294">**DB bağlantı DIZESI adı**alanına *SchoolContext*girin.</span><span class="sxs-lookup"><span data-stu-id="23a74-294">In the **DB CONNECTION STRING NAME**, enter *SchoolContext*.</span></span>

    ![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image15.png)
7. <span data-ttu-id="23a74-295">Kutunun altındaki sağ tarafına işaret eden oka tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-295">Click the arrow that points to the right at the bottom of the box.</span></span> <span data-ttu-id="23a74-296">Sihirbaz **veritabanı ayarları** adımına ilerletir.</span><span class="sxs-lookup"><span data-stu-id="23a74-296">The wizard advances to the **Database Settings** step.</span></span>
8. <span data-ttu-id="23a74-297">**Ad** kutusuna *Contosoevrensıtydb*yazın.</span><span class="sxs-lookup"><span data-stu-id="23a74-297">In the **Name** box, enter *ContosoUniversityDB*.</span></span>
9. <span data-ttu-id="23a74-298">**Sunucu** kutusunda **Yeni SQL veritabanı sunucusu**' nu seçin.</span><span class="sxs-lookup"><span data-stu-id="23a74-298">In the **Server** box, select **New SQL Database server**.</span></span> <span data-ttu-id="23a74-299">Alternatif olarak, daha önce bir sunucu oluşturduysanız, bu sunucuyu açılan listeden seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-299">Alternatively, if you previously created a server, you can select that server from the drop-down list.</span></span>
10. <span data-ttu-id="23a74-300">Yönetici **oturum açma adı** ve **parolası**girin.</span><span class="sxs-lookup"><span data-stu-id="23a74-300">Enter an administrator **LOGIN NAME** and **PASSWORD**.</span></span> <span data-ttu-id="23a74-301">**Yeni SQL Veritabanı sunucusu** öğesini seçtiyseniz buraya mevcut bir ad ve parola girmezsiniz, daha sonra veritabanına eriştiğinizde kullanmak üzere şimdi tanımlayacağınız yeni adı ve parolayı girersiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-301">If you selected **New SQL Database server** you aren't entering an existing name and password here, you're entering a new name and password that you're defining now to use later when you access the database.</span></span> <span data-ttu-id="23a74-302">Daha önce oluşturduğunuz bir sunucu seçtiyseniz, bu sunucunun kimlik bilgilerini girersiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-302">If you selected a server that you created previously, you'll enter credentials for that server.</span></span> <span data-ttu-id="23a74-303">Bu öğreticide, ***Gelişmiş*** onay kutusunu seçemezsiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-303">For this tutorial, you won't select the ***Advanced*** check box.</span></span> <span data-ttu-id="23a74-304">***Gelişmiş*** seçenekler veritabanı [harmanlamasını](https://msdn.microsoft.com/library/aa174903(v=SQL.80).aspx)ayarlamanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="23a74-304">The ***Advanced*** options enable you to set the database [collation](https://msdn.microsoft.com/library/aa174903(v=SQL.80).aspx).</span></span>
11. <span data-ttu-id="23a74-305">Web sitesi için seçtiğiniz **bölgeyi** seçin.</span><span class="sxs-lookup"><span data-stu-id="23a74-305">Choose the same **Region** that you chose for the web site.</span></span>
12. <span data-ttu-id="23a74-306">Bittiğini göstermek için kutunun sağ alt kısmındaki onay işaretine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-306">Click the check mark at the bottom right of the box to indicate that you're finished.</span></span>   
  
    ![Yeni Web sitesinin veritabanı ayarları adımı-veritabanı ile oluşturma Sihirbazı](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image16.png)  

    <span data-ttu-id="23a74-308">Aşağıdaki görüntüde, mevcut bir SQL Server ve oturum açmanın kullanılması gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="23a74-308">The following image shows using an existing SQL Server and Login.</span></span>   
  
    ![Yeni Web sitesinin veritabanı ayarları adımı-veritabanı ile oluşturma Sihirbazı](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image17.png)  
  
    <span data-ttu-id="23a74-310">Yönetim Portalı Web siteleri sayfasına döner ve **durum** sütunu sitenin oluşturulduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="23a74-310">The Management Portal returns to the Web Sites page, and the **Status** column shows that the site is being created.</span></span> <span data-ttu-id="23a74-311">Bir süre sonra (genellikle bir dakikadan kısa), **durum** sütunu sitenin başarıyla oluşturulduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="23a74-311">After a while (typically less than a minute), the **Status** column shows that the site was successfully created.</span></span> <span data-ttu-id="23a74-312">Sol taraftaki Gezinti çubuğunda, hesabınızda bulunan sitelerin sayısı **Web siteleri** simgesinin yanında görünür ve **SQL veritabanları** simgesinin yanında veritabanı sayısı görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="23a74-312">In the navigation bar at the left, the number of sites you have in your account appears next to the **Web Sites** icon, and the number of databases appears next to the **SQL Databases** icon.</span></span>

## <a name="deploy-the-application-to-windows-azure"></a><span data-ttu-id="23a74-313">Uygulamayı Windows Azure 'a dağıtma</span><span class="sxs-lookup"><span data-stu-id="23a74-313">Deploy the application to Windows Azure</span></span>

1. <span data-ttu-id="23a74-314">Visual Studio 'da **Çözüm Gezgini** projeye sağ tıklayın ve bağlam menüsünden **Yayımla** ' yı seçin.</span><span class="sxs-lookup"><span data-stu-id="23a74-314">In Visual Studio, right-click the project in **Solution Explorer** and select **Publish** from the context menu.</span></span>  
  
    ![Projede Yayımla bağlam menüsü](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image18.png)
2. <span data-ttu-id="23a74-316">**Web 'ı Yayımla** sihirbazının **profil** sekmesinde **içeri aktar**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-316">In the **Profile** tab of the **Publish Web** wizard, click **Import**.</span></span>  
  
    ![Yayımlama ayarlarını içeri aktar](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image19.png)
3. <span data-ttu-id="23a74-318">Microsoft Azure aboneliğinizi Visual Studio 'Ya daha önce eklemediyseniz, aşağıdaki adımları uygulayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-318">If you have not previously added your Windows Azure subscription in Visual Studio, perform the following steps.</span></span> <span data-ttu-id="23a74-319">Bu adımlarda, **bir Windows Azure Web sitesinden Içeri aktarma** bölümündeki açılır listenin Web sitenizi içermesini sağlamak için aboneliğinizi eklersiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-319">In these steps you add your subscription so that the drop-down list under **Import from a Windows Azure web site** will include your web site.</span></span>

    <span data-ttu-id="23a74-320">a.</span><span class="sxs-lookup"><span data-stu-id="23a74-320">a.</span></span> <span data-ttu-id="23a74-321">**Yayımlama profilini Içeri aktar** iletişim kutusunda, **bir Windows Azure Web sitesinden içeri aktar ' a**tıklayın ve ardından **Windows Azure aboneliği Ekle**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-321">In the **Import Publish Profile** dialog box, click **Import from a Windows Azure web site**, and then click **Add Windows Azure subscription**.</span></span>

    ![Windows Azure aboneliği Ekle](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image20.png)

    <span data-ttu-id="23a74-323">b.</span><span class="sxs-lookup"><span data-stu-id="23a74-323">b.</span></span> <span data-ttu-id="23a74-324">**Windows Azure aboneliklerini Içeri aktar** iletişim kutusunda **abonelik dosyasını indir**' e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-324">In the **Import Windows Azure Subscriptions** dialog box, click **Download subscription file**.</span></span>

    ![abonelik dosyasını indir](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image21.png)

    <span data-ttu-id="23a74-326">c.</span><span class="sxs-lookup"><span data-stu-id="23a74-326">c.</span></span> <span data-ttu-id="23a74-327">Tarayıcı pencerenizde *. publishsettings* dosyasını kaydedin.</span><span class="sxs-lookup"><span data-stu-id="23a74-327">In your browser window, save the *.publishsettings* file.</span></span>

    ![. publishsettings dosyasını indirin](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image22.png)

    > [!WARNING]
    > <span data-ttu-id="23a74-329">Güvenlik- *publishsettings* dosyası, Windows Azure aboneliklerinizi ve hizmetlerinizi yönetmek için kullanılan kimlik bilgilerinizi (Kodlanmamış) içerir.</span><span class="sxs-lookup"><span data-stu-id="23a74-329">Security - The *publishsettings* file contains your credentials (unencoded) that are used to administer your Windows Azure subscriptions and services.</span></span> <span data-ttu-id="23a74-330">Bu dosya için en iyi güvenlik uygulaması, kaynak dizinlerinizin dışında (örneğin, *Kütüphanaries\belgeler* klasöründe) geçici olarak depolanması ve içeri aktarma tamamlandıktan sonra onu silmektir.</span><span class="sxs-lookup"><span data-stu-id="23a74-330">The security best practice for this file is to store it temporarily outside your source directories (for example in the *Libraries\Documents* folder), and then delete it once the import has completed.</span></span> <span data-ttu-id="23a74-331">Dosyaya erişimi olan kötü niyetli bir Kullanıcı `.publishsettings` , Windows Azure hizmetlerinizi düzenleyebilir, oluşturabilir ve silebilir.</span><span class="sxs-lookup"><span data-stu-id="23a74-331">A malicious user who gains access to the `.publishsettings` file can edit, create, and delete your Windows Azure services.</span></span>

    <span data-ttu-id="23a74-332">d.</span><span class="sxs-lookup"><span data-stu-id="23a74-332">d.</span></span> <span data-ttu-id="23a74-333">**Windows Azure aboneliklerini Içeri aktar** iletişim kutusunda, **Araştır** ' a tıklayın ve *. publishsettings* dosyasına gidin.</span><span class="sxs-lookup"><span data-stu-id="23a74-333">In the **Import Windows Azure Subscriptions** dialog box, click **Browse** and navigate to the *.publishsettings* file.</span></span>

    ![İndir alt](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image23.png)

    <span data-ttu-id="23a74-335">e.</span><span class="sxs-lookup"><span data-stu-id="23a74-335">e.</span></span> <span data-ttu-id="23a74-336">**İçeri Aktar**’a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-336">Click **Import**.</span></span>

    ![içeri aktar](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image24.png)
4. <span data-ttu-id="23a74-338">**Yayımlama profilini Içeri aktar** iletişim kutusunda, **bir Windows Azure Web sitesinden içeri aktar**' ı seçin, açılan listeden Web sitenizi seçin ve ardından **Tamam**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-338">In the **Import Publish Profile** dialog box, select **Import from a Windows Azure web site**, select your web site from the drop-down list, and then click **OK**.</span></span>  
  
    ![Yayımlama profilini içeri aktar](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image25.png)
5. <span data-ttu-id="23a74-340">**Bağlantı** sekmesinde, ayarların doğru olduğundan emin olmak Için **bağlantıyı doğrula** ' ya tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-340">In the **Connection** tab, click **Validate Connection** to make sure that the settings are correct.</span></span>  
  
    ![Bağlantıyı doğrula](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image26.png)
6. <span data-ttu-id="23a74-342">Bağlantı doğrulandıktan sonra **bağlantıyı doğrula** düğmesinin yanında yeşil bir onay işareti görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="23a74-342">When the connection has been validated, a green check mark is shown next to the **Validate Connection** button.</span></span> <span data-ttu-id="23a74-343">**İleri**’ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-343">Click **Next**.</span></span>  
  
    ![Bağlantı başarıyla onaylandı](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image27.png)
7. <span data-ttu-id="23a74-345">**SchoolContext** altındaki **uzak bağlantı dizesi** açılan listesini açın ve oluşturduğunuz veritabanı için bağlantı dizesini seçin.</span><span class="sxs-lookup"><span data-stu-id="23a74-345">Open the **Remote connection string** drop-down list under **SchoolContext** and select the connection string for the database you created.</span></span>
8. <span data-ttu-id="23a74-346">**Code First Migrations Yürüt ' ü seçin (uygulama başlatma üzerinde çalışır)**.</span><span class="sxs-lookup"><span data-stu-id="23a74-346">Select **Execute Code First Migrations (runs on application start)**.</span></span>
9. <span data-ttu-id="23a74-347">Bu uygulama üyelik veritabanını kullanmıyor olduğundan, bu bağlantı dizesini **UserContext (DefaultConnection)** için **çalışma zamanında kullan** seçeneğinin işaretini kaldırın.</span><span class="sxs-lookup"><span data-stu-id="23a74-347">Uncheck **Use this connection string at runtime** for the **UserContext (DefaultConnection)**, since this application is not using the membership database.</span></span>   
  
    ![Ayarlar sekmesi](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image28.png)
10. <span data-ttu-id="23a74-349">**İleri**’ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-349">Click **Next**.</span></span>
11. <span data-ttu-id="23a74-350">**Önizleme** sekmesinde **önizlemeyi Başlat**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-350">In the **Preview** tab, click **Start Preview**.</span></span>  
  
    ![Önizleme sekmesinde StartPreview düğmesi](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image29.png)  
  
    <span data-ttu-id="23a74-352">Bu sekmede, sunucuya kopyalanacak dosyaların bir listesi görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="23a74-352">The tab displays a list of the files that will be copied to the server.</span></span> <span data-ttu-id="23a74-353">Önizleme görüntüleme, uygulamayı yayımlamak için gerekli değildir, ancak farkında olmak üzere yararlı bir işlevdir.</span><span class="sxs-lookup"><span data-stu-id="23a74-353">Displaying the preview isn't required to publish the application but is a useful function to be aware of.</span></span> <span data-ttu-id="23a74-354">Bu durumda, görüntülenen dosyaların listesiyle herhangi bir şey yapmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="23a74-354">In this case, you don't need to do anything with the list of files that is displayed.</span></span> <span data-ttu-id="23a74-355">Bu uygulamayı bir daha dağıttığınızda, yalnızca değiştirilen dosyalar bu listede yer alacak.</span><span class="sxs-lookup"><span data-stu-id="23a74-355">The next time you deploy this application, only the files that have changed will be in this list.</span></span>  
  
    ![StartPreview dosyası çıkışı](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image30.png)
12. <span data-ttu-id="23a74-357">**Yayımla**’ta tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-357">Click **Publish**.</span></span>  
    <span data-ttu-id="23a74-358">Visual Studio, dosyaları Microsoft Azure sunucusuna kopyalama işlemini başlatır.</span><span class="sxs-lookup"><span data-stu-id="23a74-358">Visual Studio begins the process of copying the files to the Windows Azure server.</span></span>
13. <span data-ttu-id="23a74-359">**Çıkış** penceresinde hangi dağıtım eylemlerinin alındığı ve dağıtımın başarılı bir şekilde tamamlandığını raporlayan görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="23a74-359">The **Output** window shows what deployment actions were taken and reports successful completion of the deployment.</span></span>  
  
    ![Çıkış penceresi başarılı dağıtımı bildiriyor](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image31.png)
14. <span data-ttu-id="23a74-361">Dağıtım başarılı olduğunda, varsayılan tarayıcı otomatik olarak dağıtılan Web sitesinin URL 'SI olarak açılır.</span><span class="sxs-lookup"><span data-stu-id="23a74-361">Upon successful deployment, the default browser automatically opens to the URL of the deployed web site.</span></span>  
    <span data-ttu-id="23a74-362">Oluşturduğunuz uygulama artık bulutta çalışmaktadır.</span><span class="sxs-lookup"><span data-stu-id="23a74-362">The application you created is now running in the cloud.</span></span> <span data-ttu-id="23a74-363">Öğrenciler sekmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="23a74-363">Click the Students tab.</span></span>  
  
    ![Students_index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image32.png)

<span data-ttu-id="23a74-365">Bu noktada, **Execute Code First Migrations (uygulama başlangıcında çalışır) '** yi seçtiğinizden *SchoolContext* veritabanınız Windows Azure SQL veritabanında oluşturulmuştur.</span><span class="sxs-lookup"><span data-stu-id="23a74-365">At this point your *SchoolContext* database has been created in the Windows Azure SQL Database because you selected **Execute Code First Migrations (runs on app start)**.</span></span> <span data-ttu-id="23a74-366">Dağıtılan Web sitesindeki *Web.config* dosyası, kodlarınızın veritabanına veri okuması veya yazması ( **öğrenciler** sekmesini seçtiğinizde meydana gelir) Için, [Migratedatabasetolatestversion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) başlatıcısı 'nın ilk kez çalışmasını sağlayacak şekilde değiştirilmiştir:</span><span class="sxs-lookup"><span data-stu-id="23a74-366">The *Web.config* file in the deployed web site has been changed so that the [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) initializer would run the first time your code reads or writes data in the database (which happened when you selected the **Students** tab):</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image33.png)

<span data-ttu-id="23a74-367">Dağıtım işlemi ayrıca, veritabanı şemasını güncelleştirmek ve veritabanını dengeli yapmak için Code First Migrations için yeni bir bağlantı dizesi *(SchoolContext \_ databasepublish*) oluşturmuştur.</span><span class="sxs-lookup"><span data-stu-id="23a74-367">The deployment process also created a new connection string *(SchoolContext\_DatabasePublish*) for Code First Migrations to use for updating the database schema and seeding the database.</span></span>

![Database_Publish bağlantı dizesi](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image34.png)

<span data-ttu-id="23a74-369">*DefaultConnection* bağlantı dizesi, üyelik veritabanına (Bu öğreticide kullanmadığınız) yöneliktir.</span><span class="sxs-lookup"><span data-stu-id="23a74-369">The *DefaultConnection* connection string is for the membership database (which we are not using in this tutorial).</span></span> <span data-ttu-id="23a74-370">*SchoolContext* bağlantı dizesi contosouniversity veritabanı içindir.</span><span class="sxs-lookup"><span data-stu-id="23a74-370">The *SchoolContext* connection string is for the ContosoUniversity database.</span></span>

<span data-ttu-id="23a74-371">Web.config dosyanın dağıtılan sürümünü *ContosoUniversity\obj\Release\Package\PackageTmp\Web.config*kendi bilgisayarınızda bulabilirsiniz. Dağıtılan *Web.config* dosyasına FTP kullanarak erişebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-371">You can find the deployed version of the Web.config file on your own computer in *ContosoUniversity\obj\Release\Package\PackageTmp\Web.config*. You can access the deployed *Web.config* file itself by using FTP.</span></span> <span data-ttu-id="23a74-372">Yönergeler için bkz. [Visual Studio kullanarak ASP.NET Web dağıtımı: kod güncelleştirme dağıtma](../../../../web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update.md).</span><span class="sxs-lookup"><span data-stu-id="23a74-372">For instructions, see [ASP.NET Web Deployment using Visual Studio: Deploying a Code Update](../../../../web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update.md).</span></span> <span data-ttu-id="23a74-373">"FTP aracını kullanmak Için" ile başlayan yönergeleri izleyin: FTP URL 'SI, Kullanıcı adı ve parola. "</span><span class="sxs-lookup"><span data-stu-id="23a74-373">Follow the instructions that start with "To use an FTP tool, you need three things: the FTP URL, the user name, and the password."</span></span>

> [!NOTE]
> <span data-ttu-id="23a74-374">Web uygulaması güvenlik uygulamaz, böylece URL 'YI bulan herkes verileri değiştirebilir.</span><span class="sxs-lookup"><span data-stu-id="23a74-374">The web app doesn't implement security, so anyone who finds the URL can change the data.</span></span> <span data-ttu-id="23a74-375">Web sitesinin güvenliğini sağlama hakkında yönergeler için bkz. Membership, [OAuth ve SQL veritabanı Ile güvenli bir ASP.NET MVC uygulamasını Windows Azure Web sitesine dağıtma](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data).</span><span class="sxs-lookup"><span data-stu-id="23a74-375">For instructions on how to secure the web site, see [Deploy a Secure ASP.NET MVC app with Membership, OAuth, and SQL Database to a Windows Azure Web Site](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data).</span></span> <span data-ttu-id="23a74-376">Siteyi durdurmak için Microsoft Azure Yönetim Portalı veya Visual Studio 'da **Sunucu Gezgini** kullanarak diğer kişilerin siteyi kullanmasını engelleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-376">You can prevent other people from using the site by using the Windows Azure Management Portal or **Server Explorer** in Visual Studio to stop the site.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image35.png)

## <a name="code-first-initializers"></a><span data-ttu-id="23a74-377">Code First başlatıcıları</span><span class="sxs-lookup"><span data-stu-id="23a74-377">Code First Initializers</span></span>

<span data-ttu-id="23a74-378">Dağıtım bölümünde, kullanılmakta olan [Migratedatabasetolatestversion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) başlatıcısı 'nı gördünüz.</span><span class="sxs-lookup"><span data-stu-id="23a74-378">In the deployment section you saw the [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) initializer being used.</span></span> <span data-ttu-id="23a74-379">Code First Ayrıca, [Createdatabaseifnotexists](https://msdn.microsoft.com/library/gg679221(v=vs.103).aspx) (varsayılan), [Dropcreatedatabaseifmodelchanges](https://msdn.microsoft.com/library/gg679604(v=VS.103).aspx) ve [dropcreatedatabaseher zaman](https://msdn.microsoft.com/library/gg679506(v=VS.103).aspx)dahil olmak üzere kullanabileceğiniz diğer başlatıcıları da sağlar.</span><span class="sxs-lookup"><span data-stu-id="23a74-379">Code First also provides other initializers that you can use, including [CreateDatabaseIfNotExists](https://msdn.microsoft.com/library/gg679221(v=vs.103).aspx) (the default), [DropCreateDatabaseIfModelChanges](https://msdn.microsoft.com/library/gg679604(v=VS.103).aspx) and [DropCreateDatabaseAlways](https://msdn.microsoft.com/library/gg679506(v=VS.103).aspx).</span></span> <span data-ttu-id="23a74-380">`DropCreateAlways`Başlatıcı, birim testlerine yönelik koşulları ayarlamak için yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="23a74-380">The `DropCreateAlways` initializer can be useful for setting up conditions for unit tests.</span></span> <span data-ttu-id="23a74-381">Ayrıca kendi başlatıcılarınızı yazabilir ve uygulamanın veritabanından okuma veya veritabanına yazma işlemlerini beklemek istemiyorsanız bir başlatıcıyı açıkça çağırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="23a74-381">You can also write your own initializers, and you can call an initializer explicitly if you don't want to wait until the application reads from or writes to the database.</span></span> <span data-ttu-id="23a74-382">Başlatıcılar hakkında kapsamlı bir açıklama için, bkz. Bölüm 6, kitap [programlama Entity Framework:](http://shop.oreilly.com/product/0636920022220.do) Julie Lerman ve Rowan Miller tarafından Code First.</span><span class="sxs-lookup"><span data-stu-id="23a74-382">For a comprehensive explanation of initializers, see chapter 6 of the book [Programming Entity Framework: Code First](http://shop.oreilly.com/product/0636920022220.do) by Julie Lerman and Rowan Miller.</span></span>

## <a name="summary"></a><span data-ttu-id="23a74-383">Özet</span><span class="sxs-lookup"><span data-stu-id="23a74-383">Summary</span></span>

<span data-ttu-id="23a74-384">Bu öğreticide, bir veri modeli oluşturmayı ve temel CRUD, sıralama, filtreleme, sayfalama ve gruplama işlevlerini nasıl uygulayacağınızı gördünüz.</span><span class="sxs-lookup"><span data-stu-id="23a74-384">In this tutorial you've seen how to create a data model and implement basic CRUD, sorting, filtering, paging, and grouping functionality.</span></span> <span data-ttu-id="23a74-385">Sonraki öğreticide, veri modelini genişleterek daha gelişmiş konulara bakmaya başlayacaksınız.</span><span class="sxs-lookup"><span data-stu-id="23a74-385">In the next tutorial you'll begin looking at more advanced topics by expanding the data model.</span></span>

<span data-ttu-id="23a74-386">Diğer Entity Framework kaynaklarına bağlantılar [ASP.NET veri erişimi Içerik haritasında](../../../../whitepapers/aspnet-data-access-content-map.md)bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="23a74-386">Links to other Entity Framework resources can be found in the [ASP.NET Data Access Content Map](../../../../whitepapers/aspnet-data-access-content-map.md).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="23a74-387">[Önceki](implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application.md) 
>  [Sonraki](creating-a-more-complex-data-model-for-an-asp-net-mvc-application.md)</span><span class="sxs-lookup"><span data-stu-id="23a74-387">[Previous](implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application.md)
[Next](creating-a-more-complex-data-model-for-an-asp-net-mvc-application.md)</span></span>
