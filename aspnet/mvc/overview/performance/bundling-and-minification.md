---
uid: mvc/overview/performance/bundling-and-minification
title: Paketleme ve küçültmeye yönelik | Microsoft Docs
author: Rick-Anderson
description: Paketleme ve küçültme, ASP.NET 4,5 içinde, istek yükleme süresini geliştirmek için kullanabileceğiniz iki tekniklerdir. Paketleme ve küçültme, reducin ile yükleme süresini iyileştirir...
ms.author: riande
ms.date: 08/23/2012
ms.assetid: 5894dc13-5d45-4dad-8096-136499120f1d
msc.legacyurl: /mvc/overview/performance/bundling-and-minification
msc.type: authoredcontent
ms.openlocfilehash: 239980d747c6e0d6be1e9b4fe0371e276e37cf21
ms.sourcegitcommit: 88fc80e3f65aebdf61ec9414810ddbc31c543f04
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/22/2020
ms.locfileid: "76519290"
---
# <a name="bundling-and-minification"></a><span data-ttu-id="a8704-104">Paketleme ve Küçültme</span><span class="sxs-lookup"><span data-stu-id="a8704-104">Bundling and Minification</span></span>

<span data-ttu-id="a8704-105">[Rick Anderson]((https://twitter.com/RickAndMSFT)) tarafından</span><span class="sxs-lookup"><span data-stu-id="a8704-105">by [Rick Anderson]((https://twitter.com/RickAndMSFT))</span></span>

> <span data-ttu-id="a8704-106">Paketleme ve küçültme, ASP.NET 4,5 içinde, istek yükleme süresini geliştirmek için kullanabileceğiniz iki tekniklerdir.</span><span class="sxs-lookup"><span data-stu-id="a8704-106">Bundling and minification are two techniques you can use in ASP.NET 4.5 to improve request load time.</span></span> <span data-ttu-id="a8704-107">Paketleme ve minbirleşme, sunucuya yapılan istek sayısını azaltarak ve istenen varlıkların boyutunu azaltarak (CSS ve JavaScript gibi) yükleme süresini geliştirir.</span><span class="sxs-lookup"><span data-stu-id="a8704-107">Bundling and minification improves load time by reducing the number of requests to the server and reducing the size of requested assets (such as CSS and JavaScript.)</span></span>

<span data-ttu-id="a8704-108">Geçerli büyük tarayıcıların çoğu her ana bilgisayar için [eşzamanlı bağlantı](http://www.browserscope.org/?category=network) sayısını altı olarak sınırlar.</span><span class="sxs-lookup"><span data-stu-id="a8704-108">Most of the current major browsers limit the number of [simultaneous connections](http://www.browserscope.org/?category=network) per each hostname to six.</span></span> <span data-ttu-id="a8704-109">Bu, altı isteğin işlendiği sırada bir konaktaki varlık isteklerinin tarayıcı tarafından kuyruğa alınıp işlenemeyeceği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="a8704-109">That means that while six requests are being processed, additional requests for assets on a host will be queued by the browser.</span></span> <span data-ttu-id="a8704-110">Aşağıdaki görüntüde, IE F12 geliştirici araçları ağ sekmeleri, örnek bir uygulamanın hakkında bilgi görünümü tarafından istenen varlıkların zamanlamasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="a8704-110">In the image below, the IE F12 developer tools network tabs shows the timing for assets required by the About view of a sample application.</span></span>

![B/M](bundling-and-minification/_static/image1.png)

<span data-ttu-id="a8704-112">Gri çubuklar, isteğin tarayıcı tarafından Sıradaki, altı bağlantı sınırının beklediği süreyi gösterir.</span><span class="sxs-lookup"><span data-stu-id="a8704-112">The gray bars show the time the request is queued by the browser waiting on the six connection limit.</span></span> <span data-ttu-id="a8704-113">Sarı çubuk, ilk bayta olan istek süresi, diğer bir deyişle, isteği göndermek ve sunucudan ilk yanıtı almak için geçen süredir.</span><span class="sxs-lookup"><span data-stu-id="a8704-113">The yellow bar is the request time to first byte, that is, the time taken to send the request and receive the first response from the server.</span></span> <span data-ttu-id="a8704-114">Mavi çubuklar sunucudan yanıt verilerinin alınması için geçen süreyi gösterir.</span><span class="sxs-lookup"><span data-stu-id="a8704-114">The blue bars show the time taken to receive the response data from the server.</span></span> <span data-ttu-id="a8704-115">Ayrıntılı zamanlama bilgileri almak için bir varlığa çift tıklayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a8704-115">You can double-click on an asset to get detailed timing information.</span></span> <span data-ttu-id="a8704-116">Örneğin, aşağıdaki görüntüde */Scripts/myscripts/javascript6.js* dosyasını yüklemek için zamanlama ayrıntıları gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="a8704-116">For example, the following image shows the timing details for loading the */Scripts/MyScripts/JavaScript6.js* file.</span></span>

![](bundling-and-minification/_static/image2.png)

<span data-ttu-id="a8704-117">Önceki görüntüde, tarayıcı eşzamanlı bağlantı sayısını kısıtlayacağından, isteğin sıraya alındığı saati veren **Başlangıç** olayı gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="a8704-117">The preceding image shows the **Start** event, which gives the time the request was queued because of the browser limit the number of simultaneous connections.</span></span> <span data-ttu-id="a8704-118">Bu durumda, başka bir isteğin tamamlanmasını bekleyen 46 milisaniye için istek sıraya alındı.</span><span class="sxs-lookup"><span data-stu-id="a8704-118">In this case, the request was queued for 46 milliseconds waiting for another request to complete.</span></span>

## <a name="bundling"></a><span data-ttu-id="a8704-119">Paketleme</span><span class="sxs-lookup"><span data-stu-id="a8704-119">Bundling</span></span>

<span data-ttu-id="a8704-120">Paketleme, ASP.NET 4,5 ' deki yeni bir özelliktir ve birden çok dosyayı tek bir dosyada birleştirmeyi veya paketlemeyi kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="a8704-120">Bundling is a new feature in ASP.NET 4.5 that makes it easy to combine or bundle multiple files into a single file.</span></span> <span data-ttu-id="a8704-121">CSS, JavaScript ve diğer paketleri de oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a8704-121">You can create CSS, JavaScript and other bundles.</span></span> <span data-ttu-id="a8704-122">Daha az sayıda dosya daha az HTTP isteği ve ilk sayfa yükleme performansını iyileştirebilirler.</span><span class="sxs-lookup"><span data-stu-id="a8704-122">Fewer files means fewer HTTP requests and that can improve first page load performance.</span></span>

<span data-ttu-id="a8704-123">Aşağıdaki görüntüde, daha önce gösterilen hakkında bilgi için aynı zamanlama Görünümü gösterilmektedir, ancak bu kez paketleme ve küçültmeye karşı etkin.</span><span class="sxs-lookup"><span data-stu-id="a8704-123">The following image shows the same timing view of the About view shown previously, but this time with bundling and minification enabled.</span></span>

![](bundling-and-minification/_static/image3.png)

## <a name="minification"></a><span data-ttu-id="a8704-124">Küçültme</span><span class="sxs-lookup"><span data-stu-id="a8704-124">Minification</span></span>

<span data-ttu-id="a8704-125">Minbirleşme, gereksiz beyaz boşluğu ve açıklamaları kaldırma ve değişken adlarını tek bir karaktere kısaltma gibi betiklere veya CSS 'ye yönelik çeşitli kod iyileştirmeleri uygular.</span><span class="sxs-lookup"><span data-stu-id="a8704-125">Minification performs a variety of different code optimizations to scripts or css, such as removing unnecessary white space and comments and shortening variable names to one character.</span></span> <span data-ttu-id="a8704-126">Aşağıdaki JavaScript işlevini göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="a8704-126">Consider the following JavaScript function.</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample1.js)]

<span data-ttu-id="a8704-127">Minbirleşme sonrasında, işlev aşağıdakilere düşürülür:</span><span class="sxs-lookup"><span data-stu-id="a8704-127">After minification, the function is reduced to the following:</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample2.js)]

<span data-ttu-id="a8704-128">Açıklamaları ve gereksiz boşlukları kaldırmanın yanı sıra, aşağıdaki parametreler ve değişken adları (kısaltılmış) aşağıdaki gibi yeniden adlandırıldı:</span><span class="sxs-lookup"><span data-stu-id="a8704-128">In addition to removing the comments and unnecessary whitespace, the following parameters and variable names were renamed (shortened) as follows:</span></span>

| <span data-ttu-id="a8704-129">**Özgün**</span><span class="sxs-lookup"><span data-stu-id="a8704-129">**Original**</span></span> | <span data-ttu-id="a8704-130">**İsim**</span><span class="sxs-lookup"><span data-stu-id="a8704-130">**Renamed**</span></span> |
| --- | --- |
| <span data-ttu-id="a8704-131">imageTagAndImageID</span><span class="sxs-lookup"><span data-stu-id="a8704-131">imageTagAndImageID</span></span> | <span data-ttu-id="a8704-132">n</span><span class="sxs-lookup"><span data-stu-id="a8704-132">n</span></span> |
| <span data-ttu-id="a8704-133">imageContext</span><span class="sxs-lookup"><span data-stu-id="a8704-133">imageContext</span></span> | <span data-ttu-id="a8704-134">t</span><span class="sxs-lookup"><span data-stu-id="a8704-134">t</span></span> |
| <span data-ttu-id="a8704-135">imageElement</span><span class="sxs-lookup"><span data-stu-id="a8704-135">imageElement</span></span> | <span data-ttu-id="a8704-136">ı</span><span class="sxs-lookup"><span data-stu-id="a8704-136">i</span></span> |

## <a name="impact-of-bundling-and-minification"></a><span data-ttu-id="a8704-137">Paketleme ve küçültmeye yönelik etkileri</span><span class="sxs-lookup"><span data-stu-id="a8704-137">Impact of Bundling and Minification</span></span>

<span data-ttu-id="a8704-138">Aşağıdaki tabloda, örnek programda tüm varlıkların tek tek listelenmesi ve paketleme ve minlıle (B/M) kullanılarak çeşitli önemli farklılıklar gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="a8704-138">The following table shows several important differences between listing all the assets individually and using bundling and minification (B/M) in the sample program.</span></span>

|  | <span data-ttu-id="a8704-139">**B/M kullanma**</span><span class="sxs-lookup"><span data-stu-id="a8704-139">**Using B/M**</span></span> | <span data-ttu-id="a8704-140">**B/M olmadan**</span><span class="sxs-lookup"><span data-stu-id="a8704-140">**Without B/M**</span></span> | <span data-ttu-id="a8704-141">**Değişebilir**</span><span class="sxs-lookup"><span data-stu-id="a8704-141">**Change**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="a8704-142">**Dosya Istekleri**</span><span class="sxs-lookup"><span data-stu-id="a8704-142">**File Requests**</span></span> | <span data-ttu-id="a8704-143">9</span><span class="sxs-lookup"><span data-stu-id="a8704-143">9</span></span> | <span data-ttu-id="a8704-144">34</span><span class="sxs-lookup"><span data-stu-id="a8704-144">34</span></span> | <span data-ttu-id="a8704-145">256%</span><span class="sxs-lookup"><span data-stu-id="a8704-145">256%</span></span> |
| <span data-ttu-id="a8704-146">**KB gönderildi**</span><span class="sxs-lookup"><span data-stu-id="a8704-146">**KB Sent**</span></span> | <span data-ttu-id="a8704-147">3.26</span><span class="sxs-lookup"><span data-stu-id="a8704-147">3.26</span></span> | <span data-ttu-id="a8704-148">11.92</span><span class="sxs-lookup"><span data-stu-id="a8704-148">11.92</span></span> | <span data-ttu-id="a8704-149">266%</span><span class="sxs-lookup"><span data-stu-id="a8704-149">266%</span></span> |
| <span data-ttu-id="a8704-150">**KB alındı**</span><span class="sxs-lookup"><span data-stu-id="a8704-150">**KB Received**</span></span> | <span data-ttu-id="a8704-151">388.51</span><span class="sxs-lookup"><span data-stu-id="a8704-151">388.51</span></span> | <span data-ttu-id="a8704-152">530</span><span class="sxs-lookup"><span data-stu-id="a8704-152">530</span></span> | <span data-ttu-id="a8704-153">36%</span><span class="sxs-lookup"><span data-stu-id="a8704-153">36%</span></span> |
| <span data-ttu-id="a8704-154">**Yükleme saati**</span><span class="sxs-lookup"><span data-stu-id="a8704-154">**Load Time**</span></span> | <span data-ttu-id="a8704-155">510 MS</span><span class="sxs-lookup"><span data-stu-id="a8704-155">510 MS</span></span> | <span data-ttu-id="a8704-156">780 MS</span><span class="sxs-lookup"><span data-stu-id="a8704-156">780 MS</span></span> | <span data-ttu-id="a8704-157">53%</span><span class="sxs-lookup"><span data-stu-id="a8704-157">53%</span></span> |

<span data-ttu-id="a8704-158">Gönderilen Baytlar, tarayıcılar üzerinde uygulanan HTTP üst bilgilerinde oldukça ayrıntılıdır.</span><span class="sxs-lookup"><span data-stu-id="a8704-158">The bytes sent had a significant reduction with bundling as browsers are fairly verbose with the HTTP headers they apply on requests.</span></span> <span data-ttu-id="a8704-159">En büyük dosyalar (*betikler\\jQuery-ui-1.8.11. min. js* ve *betikler\\jQuery-1.7.1. min. js*) zaten küçültülmüş olduğundan, alınan baytların azaltılması büyük değil.</span><span class="sxs-lookup"><span data-stu-id="a8704-159">The received bytes reduction is not as large because the largest files (*Scripts\\jquery-ui-1.8.11.min.js* and *Scripts\\jquery-1.7.1.min.js*) are already minified.</span></span> <span data-ttu-id="a8704-160">Note: örnek programdaki zamanlamalar yavaş bir ağın benzetimini yapmak için [Fiddler](http://www.fiddler2.com/fiddler2/) aracını kullandı.</span><span class="sxs-lookup"><span data-stu-id="a8704-160">Note: The timings on the sample program used the [Fiddler](http://www.fiddler2.com/fiddler2/) tool to simulate a slow network.</span></span> <span data-ttu-id="a8704-161">(Fiddler **kuralları** menüsünde, **performans** ' ı seçin ve ardından **modem hızlarından benzetim**yapın.)</span><span class="sxs-lookup"><span data-stu-id="a8704-161">(From the Fiddler **Rules** menu, select **Performance** then **Simulate Modem Speeds**.)</span></span>

## <a name="debugging-bundled-and-minified-javascript"></a><span data-ttu-id="a8704-162">Paketlenmiş ve küçültülmüş JavaScript hatalarını ayıklama</span><span class="sxs-lookup"><span data-stu-id="a8704-162">Debugging Bundled and Minified JavaScript</span></span>

<span data-ttu-id="a8704-163">JavaScript dosyaları paketlenmiş veya küçültülmüş olmadığından, *Web. config* dosyasındaki [derleme öğesinin](https://msdn.microsoft.com/library/s10awwz0.aspx) `debug="true"`) olarak ayarlandığı bir geliştirme ortamında JavaScript 'te hata ayıklaması kolaydır.</span><span class="sxs-lookup"><span data-stu-id="a8704-163">It's easy to debug your JavaScript in a development environment (where the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx) in the *Web.config* file is set to `debug="true"` ) because the JavaScript files are not bundled or minified.</span></span> <span data-ttu-id="a8704-164">Ayrıca, JavaScript dosyalarınızın paketlenmiş ve küçültülmüş olduğu bir yayın derlemesinde hata ayıklayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a8704-164">You can also debug a release build where your JavaScript files are bundled and minified.</span></span> <span data-ttu-id="a8704-165">IE F12 geliştirici araçlarını kullanarak, mini kullanılan bir pakete eklenen bir JavaScript işlevinde aşağıdaki yaklaşımı kullanarak hata ayıklaması yapabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="a8704-165">Using the IE F12 developer tools, you debug a JavaScript function included in a minified bundle using the following approach:</span></span>

1. <span data-ttu-id="a8704-166">**Betik** sekmesini seçin ve ardından **hata ayıklamayı Başlat** düğmesini seçin.</span><span class="sxs-lookup"><span data-stu-id="a8704-166">Select the **Script** tab and then select the **Start debugging** button.</span></span>
2. <span data-ttu-id="a8704-167">Varlıklar düğmesini kullanarak hata ayıklamak istediğiniz JavaScript işlevini içeren paketi seçin.</span><span class="sxs-lookup"><span data-stu-id="a8704-167">Select the bundle containing the JavaScript function you want to debug using the assets button.</span></span>  
    ![](bundling-and-minification/_static/image4.png)
3. <span data-ttu-id="a8704-168">**Yapılandırma düğmesini** ![](bundling-and-minification/_static/image5.png)seçip **JavaScript Biçimlendir**' i seçerek küçültülmüş JavaScript 'i biçimlendirin.</span><span class="sxs-lookup"><span data-stu-id="a8704-168">Format the minified JavaScript by selecting the **Configuration button** ![](bundling-and-minification/_static/image5.png), and then selecting **Format JavaScript**.</span></span>
4. <span data-ttu-id="a8704-169">**Arama betiği** giriş kutusunda, hata ayıklamak istediğiniz işlevin adını seçin.</span><span class="sxs-lookup"><span data-stu-id="a8704-169">In the **Search Script** input box, select the name of the function you want to debug.</span></span> <span data-ttu-id="a8704-170">Aşağıdaki görüntüde, **arama betiği** giriş kutusuna **Addalttoimg** girildi.</span><span class="sxs-lookup"><span data-stu-id="a8704-170">In the following image, **AddAltToImg** was entered in the **Search Script** input box.</span></span>  
    ![](bundling-and-minification/_static/image6.png)

<span data-ttu-id="a8704-171">F12 geliştirici araçlarıyla hata ayıklama hakkında daha fazla bilgi için, [JavaScript hatalarında hata ayıklama Için F12 geliştirici araçları kullanarak](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx)MSDN makalesine bakın.</span><span class="sxs-lookup"><span data-stu-id="a8704-171">For more information on debugging with the F12 developer tools, see the MSDN article [Using the F12 Developer Tools to Debug JavaScript Errors](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span></span>

## <a name="controlling-bundling-and-minification"></a><span data-ttu-id="a8704-172">Paketlemeyi ve küçültmeye göre denetleme</span><span class="sxs-lookup"><span data-stu-id="a8704-172">Controlling Bundling and Minification</span></span>

<span data-ttu-id="a8704-173">*Web. config* dosyasındaki [derleme öğesinde](https://msdn.microsoft.com/library/s10awwz0.aspx) hata ayıklama özniteliğinin değeri ayarlanarak paketleme ve minbirleşme etkin veya devre dışı bırakılmıştır.</span><span class="sxs-lookup"><span data-stu-id="a8704-173">Bundling and minification is enabled or disabled by setting the value of the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file.</span></span> <span data-ttu-id="a8704-174">Aşağıdaki XML 'de, paketleme ve minbirleşme devre dışı olduğundan `debug` true olarak ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="a8704-174">In the following XML, `debug` is set to true so bundling and minification is disabled.</span></span>

[!code-xml[Main](bundling-and-minification/samples/sample3.xml?highlight=2)]

<span data-ttu-id="a8704-175">Paketlemeyi ve küçültmeye olanak tanımak için `debug` değerini "false" olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="a8704-175">To enable bundling and minification, set the `debug` value to "false".</span></span> <span data-ttu-id="a8704-176">*Web. config* ayarını `BundleTable` sınıfındaki `EnableOptimizations` özelliği ile geçersiz kılabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a8704-176">You can override the *Web.config* setting with the `EnableOptimizations` property on the `BundleTable` class.</span></span> <span data-ttu-id="a8704-177">Aşağıdaki kod, paketlemeyi ve küçültmeye izin verebilir ve *Web. config* dosyasındaki herhangi bir ayarı geçersiz kılar.</span><span class="sxs-lookup"><span data-stu-id="a8704-177">The following code enables bundling and minification and overrides any setting in the *Web.config* file.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample4.cs?highlight=7)]

> [!NOTE]
> <span data-ttu-id="a8704-178">`EnableOptimizations` `true` veya *Web. config* dosyasındaki [derleme öğesinde](https://msdn.microsoft.com/library/s10awwz0.aspx) hata ayıklama özniteliği `false`olarak ayarlı değilse, dosyalar paketlenmiş veya küçültülmüş olmayacaktır.</span><span class="sxs-lookup"><span data-stu-id="a8704-178">Unless `EnableOptimizations` is `true` or the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file is set to `false`, files will not be bundled or minified.</span></span> <span data-ttu-id="a8704-179">Ayrıca, dosyaların. min sürümü kullanılmayacak, tam hata ayıklama sürümleri seçilecek.</span><span class="sxs-lookup"><span data-stu-id="a8704-179">Additionally, the .min version of files will not be used, the full debug versions will be selected.</span></span> <span data-ttu-id="a8704-180">`EnableOptimizations`, *Web. config* dosyasındaki [derleme öğesinde](https://msdn.microsoft.com/library/s10awwz0.aspx) hata ayıklama özniteliğini geçersiz kılar</span><span class="sxs-lookup"><span data-stu-id="a8704-180">`EnableOptimizations` overrides the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file</span></span>

## <a name="using-bundling-and-minification-with-aspnet-web-forms-and-web-pages"></a><span data-ttu-id="a8704-181">ASP.NET Web Forms ve Web sayfaları ile paketleme ve küçültmeye yönelik kullanma</span><span class="sxs-lookup"><span data-stu-id="a8704-181">Using Bundling and Minification with ASP.NET Web Forms and Web Pages</span></span>

- <span data-ttu-id="a8704-182">Web sayfaları için Web [sayfaları sitesine Web Iyileştirmesi ekleme](https://docs.microsoft.com/archive/blogs/rickandy/adding-web-optimization-to-a-web-pages-site)Blog girdisine bakın.</span><span class="sxs-lookup"><span data-stu-id="a8704-182">For Web Pages, see the blog entry [Adding Web Optimization to a Web Pages Site](https://docs.microsoft.com/archive/blogs/rickandy/adding-web-optimization-to-a-web-pages-site).</span></span>
- <span data-ttu-id="a8704-183">Web Forms için, [Web Forms Için paketleme ve küçültmeye ekleme](https://docs.microsoft.com/archive/blogs/rickandy/adding-bundling-and-minification-to-web-forms)başlıklı blog girişine bakın.</span><span class="sxs-lookup"><span data-stu-id="a8704-183">For Web Forms, see the blog entry [Adding Bundling and Minification to Web Forms](https://docs.microsoft.com/archive/blogs/rickandy/adding-bundling-and-minification-to-web-forms).</span></span>

## <a name="using-bundling-and-minification-with-aspnet-mvc"></a><span data-ttu-id="a8704-184">ASP.NET MVC ile paketleme ve küçültmeye yönelik kullanma</span><span class="sxs-lookup"><span data-stu-id="a8704-184">Using Bundling and Minification with ASP.NET MVC</span></span>

<span data-ttu-id="a8704-185">Bu bölümde, paketleme ve küçültmeye yönelik İnceleme için bir ASP.NET MVC projesi oluşturacağız.</span><span class="sxs-lookup"><span data-stu-id="a8704-185">In this section we will create an ASP.NET MVC project to examine bundling and minification.</span></span> <span data-ttu-id="a8704-186">İlk olarak, varsayılan değerleri değiştirmeden **Mvcbm** adlı yeni BIR ASP.NET MVC Internet projesi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="a8704-186">First, create a new ASP.NET MVC internet project named **MvcBM** without changing any of the defaults.</span></span>

<span data-ttu-id="a8704-187">*Uygulama\\açın \_\\BundleConfig.cs dosyasını başlatın* ve paketleri oluşturmak, kaydettirmek ve yapılandırmak için kullanılan `RegisterBundles` yöntemini inceleyin.</span><span class="sxs-lookup"><span data-stu-id="a8704-187">Open the *App\\\_Start\\BundleConfig.cs* file and examine the `RegisterBundles` method which is used to create, register and configure bundles.</span></span> <span data-ttu-id="a8704-188">Aşağıdaki kod `RegisterBundles` yönteminin bir bölümünü gösterir.</span><span class="sxs-lookup"><span data-stu-id="a8704-188">The following code shows a portion of the `RegisterBundles` method.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample5.cs)]

<span data-ttu-id="a8704-189">Yukarıdaki kod, tüm uygun (hata ayıklama veya küçültülmüş, ancak değil) içeren *~/paketles/jQuery* adlı yeni bir JavaScript paketi oluşturur. *vsdoc*) dosyaları *komut* dosyaları klasöründe "~/Scripts/jQuery-{Version}.exe" olan joker karakter dizesiyle eşleşir.</span><span class="sxs-lookup"><span data-stu-id="a8704-189">The  preceding code creates a new JavaScript bundle named *~/bundles/jquery* that includes all the appropriate (that is debug or minified but not .*vsdoc*) files in the *Scripts* folder that match the wild card string "~/Scripts/jquery-{version}.js".</span></span> <span data-ttu-id="a8704-190">ASP.NET MVC 4 için bu bir hata ayıklama yapılandırması, *jQuery-1.7.1. js* dosyası pakete eklenecektir.</span><span class="sxs-lookup"><span data-stu-id="a8704-190">For ASP.NET MVC 4, this means with a debug configuration, the file *jquery-1.7.1.js* will be added to the bundle.</span></span> <span data-ttu-id="a8704-191">Bir sürüm yapılandırmasında, *jQuery-1.7.1. min. js* eklenecektir.</span><span class="sxs-lookup"><span data-stu-id="a8704-191">In a release configuration, *jquery-1.7.1.min.js* will be added.</span></span> <span data-ttu-id="a8704-192">Paketleme çerçevesi aşağıdaki gibi çeşitli yaygın kurallara sahiptir:</span><span class="sxs-lookup"><span data-stu-id="a8704-192">The bundling framework follows several common conventions such as:</span></span>

- <span data-ttu-id="a8704-193">*FileX. min. js* ve *FileX. js* olduğunda yayın için ". min" dosyası seçiliyor.</span><span class="sxs-lookup"><span data-stu-id="a8704-193">Selecting ".min" file for release when *FileX.min.js* and *FileX.js* exist.</span></span>
- <span data-ttu-id="a8704-194">Hata ayıklama için ". min" sürümü seçiliyor.</span><span class="sxs-lookup"><span data-stu-id="a8704-194">Selecting the non ".min" version for debug.</span></span>
- <span data-ttu-id="a8704-195">Yalnızca IntelliSense tarafından kullanılan "-vsdoc" dosyaları (örneğin, *jQuery-1.7.1-vsdoc. js*) yoksayılıyor.</span><span class="sxs-lookup"><span data-stu-id="a8704-195">Ignoring "-vsdoc" files (such as *jquery-1.7.1-vsdoc.js*), which are used only by IntelliSense.</span></span>

<span data-ttu-id="a8704-196">Yukarıda gösterilen `{version}` joker karakter eşleştirme kartı, *komut dosyaları* klasörünüzdeki jQuery 'in uygun sürümüyle otomatik olarak jQuery paketi oluşturmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="a8704-196">The `{version}` wild card matching shown above is used to automatically create a jQuery bundle with the appropriate version of jQuery in your *Scripts* folder.</span></span> <span data-ttu-id="a8704-197">Bu örnekte, bir joker karakter kullanmak aşağıdaki avantajları sağlar:</span><span class="sxs-lookup"><span data-stu-id="a8704-197">In this example, using a wild card provides the following benefits:</span></span>

- <span data-ttu-id="a8704-198">, Görünüm sayfalarınızda önceki paketleme kodunu veya jQuery başvurularını değiştirmeden daha yeni bir jQuery sürümüne güncelleştirme yapmak için NuGet 'i kullanmanıza olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="a8704-198">Allows you to use NuGet to update to a newer jQuery version without changing the preceding bundling code or jQuery references in your view pages.</span></span>
- <span data-ttu-id="a8704-199">, Hata ayıklama yapılandırmalarının tam sürümünü ve sürüm derlemeleri için ". min" sürümünü otomatik olarak seçer.</span><span class="sxs-lookup"><span data-stu-id="a8704-199">Automatically selects the full version for debug configurations and the ".min" version for release builds.</span></span>

## <a name="using-a-cdn"></a><span data-ttu-id="a8704-200">CDN kullanma</span><span class="sxs-lookup"><span data-stu-id="a8704-200">Using a CDN</span></span>

 <span data-ttu-id="a8704-201">Takip kodu yerel jQuery paketinin yerini bir CDN jQuery paketiyle değiştirir.</span><span class="sxs-lookup"><span data-stu-id="a8704-201">The follow code replaces the local jQuery bundle with a CDN jQuery bundle.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample6.cs)]

<span data-ttu-id="a8704-202">Yukarıdaki kodda, yayın modundayken CDN 'den ve hata ayıklama sürümü yerel olarak hata ayıklama modunda getirilecektir.</span><span class="sxs-lookup"><span data-stu-id="a8704-202">In the code above, jQuery will be requested from the CDN while in release mode and the debug version of jQuery will be fetched locally in debug mode.</span></span> <span data-ttu-id="a8704-203">CDN kullanırken, CDN isteğinin başarısız olması durumunda bir geri dönüş mekanizmasına sahip olmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="a8704-203">When using a CDN, you should have a fallback mechanism in case the CDN request fails.</span></span> <span data-ttu-id="a8704-204">Düzen dosyasının sonundaki aşağıdaki biçimlendirme parçası, CDN 'nin başarısız olmasına neden olan komut dosyasını gösterir.</span><span class="sxs-lookup"><span data-stu-id="a8704-204">The following markup fragment from the end of the layout file shows script added to request jQuery should the CDN fail.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample7.cshtml?highlight=5-13)]

## <a name="creating-a-bundle"></a><span data-ttu-id="a8704-205">Paket oluşturma</span><span class="sxs-lookup"><span data-stu-id="a8704-205">Creating a Bundle</span></span>

<span data-ttu-id="a8704-206">[Paket](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) sınıfı `Include` yöntemi, her bir dizenin kaynağa bir sanal yol olduğu dizeler dizisini alır.</span><span class="sxs-lookup"><span data-stu-id="a8704-206">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `Include` method takes an array of strings, where each string is a virtual path to resource.</span></span> <span data-ttu-id="a8704-207">Uygulama\\`RegisterBundles` yönteminden aşağıdaki kod *\_başlat\\BundleConfig.cs* dosyası bir pakete birden çok dosya eklendiğini gösterir:</span><span class="sxs-lookup"><span data-stu-id="a8704-207">The following code from the `RegisterBundles` method in the *App\\\_Start\\BundleConfig.cs* file shows how multiple files are added to a bundle:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample8.cs)]

<span data-ttu-id="a8704-208">[Paket](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) sınıfı `IncludeDirectory` yöntemi, bir arama düzeniyle eşleşen bir dizindeki tüm dosyaları (ve isteğe bağlı olarak tüm alt dizinleri) eklemek için sağlanır.</span><span class="sxs-lookup"><span data-stu-id="a8704-208">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` method is provided to add all the files in a directory (and optionally all subdirectories) which match a search pattern.</span></span> <span data-ttu-id="a8704-209">[Paket](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) sınıfı `IncludeDirectory` API 'si aşağıda gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="a8704-209">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` API is shown below:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample9.cs)]

<span data-ttu-id="a8704-210">Paketlerde, Işleme yöntemi kullanılarak görünümlerde başvurulur (CSS için`Styles.Render` ve JavaScript için `Scripts.Render`).</span><span class="sxs-lookup"><span data-stu-id="a8704-210">Bundles are referenced in views using the Render method, (`Styles.Render` for CSS and `Scripts.Render` for JavaScript).</span></span> <span data-ttu-id="a8704-211">*Görünümler\\paylaşılan\\\_Layout. cshtml* dosyasında bulunan aşağıdaki biçimlendirme, varsayılan ASP.net Internet projesinin nasıl BAŞVURULACAĞıNı CSS ve JavaScript demeti gösterir.</span><span class="sxs-lookup"><span data-stu-id="a8704-211">The following markup from the *Views\\Shared\\\_Layout.cshtml* file shows how the default ASP.NET internet project views reference CSS and JavaScript bundles.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample10.cshtml?highlight=5-6,11)]

<span data-ttu-id="a8704-212">Işleme metotlarının bir dize dizisi aldığını ve bir kod satırında birden çok paket ekleyebilmesini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="a8704-212">Notice the Render methods takes an array of strings, so you can add multiple bundles in one line of code.</span></span> <span data-ttu-id="a8704-213">Genellikle varlığa başvurmak için gerekli HTML 'yi oluşturan render yöntemlerini kullanmak isteyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="a8704-213">You will generally want to use the Render methods which create the necessary HTML to reference the asset.</span></span> <span data-ttu-id="a8704-214">Varlığa başvurmak için gereken biçimlendirme olmaksızın varlığın URL 'sini oluşturmak için `Url` yöntemini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a8704-214">You can use the `Url` method to generate the URL to the asset without the markup needed to reference the asset.</span></span> <span data-ttu-id="a8704-215">Yeni HTML5 [Async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) özniteliğini kullanmayı istediğinizi varsayalım.</span><span class="sxs-lookup"><span data-stu-id="a8704-215">Suppose you wanted to use the new HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) attribute.</span></span> <span data-ttu-id="a8704-216">Aşağıdaki kod, `Url` yöntemi kullanılarak modernize 'a nasıl başvurulacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="a8704-216">The following code shows how to reference modernizr using the `Url` method.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample11.cshtml?highlight=11)]

## <a name="using-the--wildcard-character-to-select-files"></a><span data-ttu-id="a8704-217">Dosyaları seçmek için "\*" joker karakterini kullanma</span><span class="sxs-lookup"><span data-stu-id="a8704-217">Using the "\*" Wildcard Character to Select Files</span></span>

<span data-ttu-id="a8704-218">`Include` yönteminde belirtilen sanal yol ve `IncludeDirectory` yönteminde arama deseninin en son yol kesimindeki bir ön ek veya sonek olarak bir "\*" joker karakteri kabul edebilir.</span><span class="sxs-lookup"><span data-stu-id="a8704-218">The virtual path specified in the `Include` method and the search pattern in the `IncludeDirectory` method can accept one "\*" wildcard character as a prefix or suffix to in the last path segment.</span></span> <span data-ttu-id="a8704-219">Arama dizesi büyük/küçük harfe duyarlıdır.</span><span class="sxs-lookup"><span data-stu-id="a8704-219">The search string is case insensitive.</span></span> <span data-ttu-id="a8704-220">`IncludeDirectory` yönteminde alt dizinler aranıyor seçeneği vardır.</span><span class="sxs-lookup"><span data-stu-id="a8704-220">The `IncludeDirectory` method has the option of searching subdirectories.</span></span>

<span data-ttu-id="a8704-221">Aşağıdaki JavaScript dosyalarıyla bir proje düşünün:</span><span class="sxs-lookup"><span data-stu-id="a8704-221">Consider a project with the following JavaScript files:</span></span>

- <span data-ttu-id="a8704-222">*Betikler\\ortak\\AddAltToImg. js*</span><span class="sxs-lookup"><span data-stu-id="a8704-222">*Scripts\\Common\\AddAltToImg.js*</span></span>
- <span data-ttu-id="a8704-223">*Betikler\\ortak\\ToggleDiv. js*</span><span class="sxs-lookup"><span data-stu-id="a8704-223">*Scripts\\Common\\ToggleDiv.js*</span></span>
- <span data-ttu-id="a8704-224">*Betikler\\ortak\\ToggleImg. js*</span><span class="sxs-lookup"><span data-stu-id="a8704-224">*Scripts\\Common\\ToggleImg.js*</span></span>
- <span data-ttu-id="a8704-225">*Betikler\\ortak\\sub1\\ToggleLinks. js*</span><span class="sxs-lookup"><span data-stu-id="a8704-225">*Scripts\\Common\\Sub1\\ToggleLinks.js*</span></span>

![dır imag](bundling-and-minification/_static/image7.png)

<span data-ttu-id="a8704-227">Aşağıdaki tabloda gösterildiği gibi joker karakter kullanılarak bir pakete eklenen dosyalar gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="a8704-227">The following table shows the files added to a bundle using the wildcard as shown:</span></span>

| <span data-ttu-id="a8704-228">**Çağrı**</span><span class="sxs-lookup"><span data-stu-id="a8704-228">**Call**</span></span> | <span data-ttu-id="a8704-229">**Eklenen veya özel durum oluşturulan dosya**</span><span class="sxs-lookup"><span data-stu-id="a8704-229">**Files Added or Exception Raised**</span></span> |
| --- | --- |
| <span data-ttu-id="a8704-230">Dahil et ("~/Scripts/Common/\*. js")</span><span class="sxs-lookup"><span data-stu-id="a8704-230">Include("~/Scripts/Common/\*.js")</span></span> | <span data-ttu-id="a8704-231">*AddAltToImg.js*, *ToggleDiv.js*, *ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="a8704-231">*AddAltToImg.js*, *ToggleDiv.js*, *ToggleImg.js*</span></span> |
| <span data-ttu-id="a8704-232">Dahil et ("~/Scripts/Common/T\*. js")</span><span class="sxs-lookup"><span data-stu-id="a8704-232">Include("~/Scripts/Common/T\*.js")</span></span> | <span data-ttu-id="a8704-233">Geçersiz model özel durumu.</span><span class="sxs-lookup"><span data-stu-id="a8704-233">Invalid pattern exception.</span></span> <span data-ttu-id="a8704-234">Joker karaktere yalnızca önek veya sonek üzerinde izin verilir.</span><span class="sxs-lookup"><span data-stu-id="a8704-234">The wildcard character is only allowed on the prefix or suffix.</span></span> |
| <span data-ttu-id="a8704-235">Dahil et ("~/Scripts/Common/\*OG.\*")</span><span class="sxs-lookup"><span data-stu-id="a8704-235">Include("~/Scripts/Common/\*og.\*")</span></span> | <span data-ttu-id="a8704-236">Geçersiz model özel durumu.</span><span class="sxs-lookup"><span data-stu-id="a8704-236">Invalid pattern exception.</span></span> <span data-ttu-id="a8704-237">Yalnızca bir joker karaktere izin verilir.</span><span class="sxs-lookup"><span data-stu-id="a8704-237">Only one wildcard character is allowed.</span></span> |
| <span data-ttu-id="a8704-238">Dahil et ("~/Scripts/Common/T\*")</span><span class="sxs-lookup"><span data-stu-id="a8704-238">Include("~/Scripts/Common/T\*")</span></span> | <span data-ttu-id="a8704-239">*Togglediv. js*, *toggleimg. js*</span><span class="sxs-lookup"><span data-stu-id="a8704-239">*ToggleDiv.js*, *ToggleImg.js*</span></span> |
| <span data-ttu-id="a8704-240">Dahil et ("~/Scripts/Common/\*")</span><span class="sxs-lookup"><span data-stu-id="a8704-240">Include("~/Scripts/Common/\*")</span></span> | <span data-ttu-id="a8704-241">Geçersiz model özel durumu.</span><span class="sxs-lookup"><span data-stu-id="a8704-241">Invalid pattern exception.</span></span> <span data-ttu-id="a8704-242">Saf joker karakter segmenti geçerli değil.</span><span class="sxs-lookup"><span data-stu-id="a8704-242">A pure wildcard segment is not valid.</span></span> |
| <span data-ttu-id="a8704-243">Includedirectory ("~/Scripts/Common", "T\*")</span><span class="sxs-lookup"><span data-stu-id="a8704-243">IncludeDirectory("~/Scripts/Common", "T\*")</span></span> | <span data-ttu-id="a8704-244">*Togglediv. js*, *toggleimg. js*</span><span class="sxs-lookup"><span data-stu-id="a8704-244">*ToggleDiv.js*, *ToggleImg.js*</span></span> |
| <span data-ttu-id="a8704-245">Includedirectory ("~/Scripts/Common", "T\*", true)</span><span class="sxs-lookup"><span data-stu-id="a8704-245">IncludeDirectory("~/Scripts/Common", "T\*", true)</span></span> | <span data-ttu-id="a8704-246">*Togglediv. js*, *toggleimg. js*, *togglelinks. js*</span><span class="sxs-lookup"><span data-stu-id="a8704-246">*ToggleDiv.js*, *ToggleImg.js*, *ToggleLinks.js*</span></span> |

<span data-ttu-id="a8704-247">Her bir dosyayı bir pakete açıkça eklemek, genellikle dosyaların aşağıdaki nedenlerle joker karakter yüklemesi üzerinde tercih edilir:</span><span class="sxs-lookup"><span data-stu-id="a8704-247">Explicitly adding each file to a bundle is generally the preferred over wildcard loading of files for the following reasons:</span></span>

- <span data-ttu-id="a8704-248">Joker karaktere göre komut dosyaları eklemek, genellikle istediğiniz şekilde değil, alfabetik sırada yükleme yapar.</span><span class="sxs-lookup"><span data-stu-id="a8704-248">Adding scripts by wildcard defaults to loading them in alphabetical order, which is typically not what you want.</span></span> <span data-ttu-id="a8704-249">CSS ve JavaScript dosyalarının sıklıkla belirli (alfabetik olmayan) bir sıraya eklenmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="a8704-249">CSS and JavaScript files frequently need to be added in a specific (non-alphabetic) order.</span></span> <span data-ttu-id="a8704-250">Özel bir [ıpaketleme Liorderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) uygulaması ekleyerek bu riski azaltabilirsiniz, ancak her bir dosyanın açıkça eklenmesi daha az hataya açıktır.</span><span class="sxs-lookup"><span data-stu-id="a8704-250">You can mitigate this risk by adding a custom [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation, but explicitly adding each file is less error prone.</span></span> <span data-ttu-id="a8704-251">Örneğin, gelecekteki bir klasöre yeni varlıklar ekleyebilirsiniz ve bu da, [ıpaketleyici](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) uygulamanızı değiştirmenizi gerektirebilir.</span><span class="sxs-lookup"><span data-stu-id="a8704-251">For example, you might add new assets to a folder in the future which might require you to modify your [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation.</span></span>
- <span data-ttu-id="a8704-252">Joker karakter yükleme kullanılarak bir dizine eklenen belirli dosyaları görüntüleme, bu pakete başvuran tüm görünümlere eklenebilir.</span><span class="sxs-lookup"><span data-stu-id="a8704-252">View specific files added to a directory using wild card loading can be included in all views referencing that bundle.</span></span> <span data-ttu-id="a8704-253">Belirli bir betiğe görüntüle bir pakete eklenirse, pakete başvuran diğer görünümlerde JavaScript hatası alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a8704-253">If the view specific script is added to a bundle, you may get a JavaScript error on other views that reference the bundle.</span></span>
- <span data-ttu-id="a8704-254">Diğer dosyaları içeri alan CSS dosyaları, içeri aktarılan dosyaların iki kez yüklendiği sonucu.</span><span class="sxs-lookup"><span data-stu-id="a8704-254">CSS files that import other files result in the imported files loaded twice.</span></span> <span data-ttu-id="a8704-255">Örneğin, aşağıdaki kod, jQuery kullanıcı arabirimi teması CSS dosyalarının çoğunu iki kez yüklemiş bir paket oluşturur.</span><span class="sxs-lookup"><span data-stu-id="a8704-255">For example, the following code creates a bundle with most of the jQuery UI theme CSS files loaded twice.</span></span> 

    [!code-csharp[Main](bundling-and-minification/samples/sample12.cs)]

  <span data-ttu-id="a8704-256">"\*. css" joker karakter Seçicisi, *içerik\\temaları\\temel\\jQuery. UI. ALL. css* dosyası dahil olmak üzere, klasördeki her bir CSS dosyasını getirir.</span><span class="sxs-lookup"><span data-stu-id="a8704-256">The wild card selector "\*.css" brings in each CSS file in the folder, including the *Content\\themes\\base\\jquery.ui.all.css* file.</span></span> <span data-ttu-id="a8704-257">*JQuery. UI. ALL. css* dosyası diğer CSS dosyalarını içeri aktarır.</span><span class="sxs-lookup"><span data-stu-id="a8704-257">The *jquery.ui.all.css* file imports other CSS files.</span></span>

## <a name="bundle-caching"></a><span data-ttu-id="a8704-258">Paket önbelleğe alma</span><span class="sxs-lookup"><span data-stu-id="a8704-258">Bundle Caching</span></span>

<span data-ttu-id="a8704-259">Paketler, Paket oluşturulduğu zaman bir yıl boyunca HTTP Expires üst bilgisini ayarlar.</span><span class="sxs-lookup"><span data-stu-id="a8704-259">Bundles set the HTTP Expires Header one year from when the bundle is created.</span></span> <span data-ttu-id="a8704-260">Daha önce görüntülenen bir sayfaya gittiğinizde, Fiddler, paket için koşullu bir istek yapmaz, yani bu, paketteki paketleri için bir HTTP GET isteği ve sunucudan HTTP 304 yanıtı yoktur.</span><span class="sxs-lookup"><span data-stu-id="a8704-260">If you navigate to a previously viewed page, Fiddler shows IE does not make a conditional request for the bundle, that is, there are no HTTP GET requests from IE for the bundles and no HTTP 304 responses from the server.</span></span> <span data-ttu-id="a8704-261">Her paket için F5 tuşuyla koşullu bir istek oluşturmak üzere IE 'yi zorlayabilirsiniz (her paket için bir HTTP 304 yanıtı ile sonuçlanır).</span><span class="sxs-lookup"><span data-stu-id="a8704-261">You can force IE to make a conditional request for each bundle with the F5 key (resulting in a HTTP 304 response for each bundle).</span></span> <span data-ttu-id="a8704-262">^ F5 kullanarak tam yenilemeyi zorlayabilirsiniz (her paket için bir HTTP 200 yanıtına neden olur.)</span><span class="sxs-lookup"><span data-stu-id="a8704-262">You can force a full refresh by using ^F5 (resulting in a HTTP 200 response for each bundle.)</span></span>

<span data-ttu-id="a8704-263">Aşağıdaki görüntüde Fiddler yanıt bölmesinin **önbelleğe alma** sekmesi gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="a8704-263">The following image shows the **Caching** tab of the Fiddler response pane:</span></span>

![Fiddler önbelleğe alma resmi](bundling-and-minification/_static/image8.png)

<span data-ttu-id="a8704-265">İstek</span><span class="sxs-lookup"><span data-stu-id="a8704-265">The request</span></span>   
`http://localhost/MvcBM_time/bundles/AllMyScripts?v=r0sLDicvP58AIXN_mc3QdyVvVj5euZNzdsa2N1PKvb81`  
 <span data-ttu-id="a8704-266">, Grup olarak **Allmyscripts** ve bir sorgu dizesi çifti **v = R0sLDicvP58AIXN\\\_mc3QdyVvVj5euZNzdsa2N1PKvb81**içerir.</span><span class="sxs-lookup"><span data-stu-id="a8704-266">is for the bundle **AllMyScripts** and contains a query string pair **v=r0sLDicvP58AIXN\\\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span></span> <span data-ttu-id="a8704-267">Sorgu dizesi **v** , önbelleğe alma için kullanılan benzersiz bir tanımlayıcı olan bir değer belirtecine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="a8704-267">The query string **v** has a value token that is a unique identifier used for caching.</span></span> <span data-ttu-id="a8704-268">Paket değişmedikçe, ASP.NET uygulaması bu belirteci kullanarak **Allmyscripts** paketini ister.</span><span class="sxs-lookup"><span data-stu-id="a8704-268">As long as the bundle doesn't change, the ASP.NET application will request the **AllMyScripts** bundle using this token.</span></span> <span data-ttu-id="a8704-269">Paketteki herhangi bir dosya değişirse, ASP.NET iyileştirme çerçevesi yeni bir belirteç oluşturur ve bu, paket için tarayıcı isteklerinin en son paketi almasını garanti eder.</span><span class="sxs-lookup"><span data-stu-id="a8704-269">If any file in the bundle changes, the ASP.NET optimization framework will generate a new token, guaranteeing that browser requests for the bundle will get the latest bundle.</span></span>

<span data-ttu-id="a8704-270">IE9 F12 geliştirici araçlarını çalıştırırsanız ve daha önce yüklenmiş bir sayfaya gittiğinizde, IE, her bir pakete ve HTTP 304 ' i döndüren sunucuya yapılan koşullu GET isteklerini yanlış gösterir.</span><span class="sxs-lookup"><span data-stu-id="a8704-270">If you run the IE9 F12 developer tools and navigate to a previously loaded page, IE incorrectly shows conditional GET requests made to each bundle and the server returning HTTP 304.</span></span> <span data-ttu-id="a8704-271">IE9 'in, CDNs kullanarak blog girişinde koşullu bir istek olup olmadığını [ve Web sitesi performansını geliştirmek Için süresinin dolacağını anlamak için](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx)nasıl sorun olduğunu bulabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="a8704-271">You can read why IE9 has problems determining if a conditional request was made in the blog entry [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

## <a name="less-coffeescript-scss-sass-bundling"></a><span data-ttu-id="a8704-272">LESS, CoffeeScript, SCSS, Sass paketleme.</span><span class="sxs-lookup"><span data-stu-id="a8704-272">LESS, CoffeeScript, SCSS, Sass Bundling.</span></span>

<span data-ttu-id="a8704-273">Paketleme ve küçültmeye yönelik Framework, [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [Less](http://www.dotlesscss.org/) veya [CoffeeScript](http://coffeescript.org/)gibi ara dilleri işlemek için bir mekanizma sağlar ve sonuçta elde edilen pakete minbirleşme gibi dönüşümler uygular.</span><span class="sxs-lookup"><span data-stu-id="a8704-273">The bundling and minification framework provides a mechanism to process intermediate languages such as [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [LESS](http://www.dotlesscss.org/) or [Coffeescript](http://coffeescript.org/), and apply transforms such as minification to the resulting bundle.</span></span> <span data-ttu-id="a8704-274">Örneğin, MVC 4 projenize [. Less](http://www.dotlesscss.org/) dosyaları eklemek için:</span><span class="sxs-lookup"><span data-stu-id="a8704-274">For example, to add [.less](http://www.dotlesscss.org/) files to your MVC 4 project:</span></span>

1. <span data-ttu-id="a8704-275">DAHA az içeriğiniz için bir klasör oluşturun.</span><span class="sxs-lookup"><span data-stu-id="a8704-275">Create a folder for your LESS content.</span></span> <span data-ttu-id="a8704-276">Aşağıdaki örnek, *MyLess klasörünü\\içeriği* kullanır.</span><span class="sxs-lookup"><span data-stu-id="a8704-276">The following example uses the *Content\\MyLess* folder.</span></span>
2. <span data-ttu-id="a8704-277">Projenize noktasız [. Less](http://www.dotlesscss.org/) NuGet paketini ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a8704-277">Add the [.less](http://www.dotlesscss.org/) NuGet package **dotless** to your project.</span></span>  
    <span data-ttu-id="a8704-278">![, bir NuGet noktasız yüklemeyi](bundling-and-minification/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="a8704-278">![NuGet dotless install](bundling-and-minification/_static/image9.png)</span></span>
3. <span data-ttu-id="a8704-279">[Ipaketleme Tatransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) arabirimini uygulayan bir sınıf ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a8704-279">Add a class that implements the [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) interface.</span></span> <span data-ttu-id="a8704-280">. Less dönüştürmesi için aşağıdaki kodu projenize ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a8704-280">For the .less transform, add the following code to your project.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample13.cs)]
4. <span data-ttu-id="a8704-281">`LessTransform` ve [Cssminbelirt](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) DÖNÜŞÜMÜYLE daha az dosya paketi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="a8704-281">Create a bundle of LESS files with the `LessTransform` and the [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) transform.</span></span> <span data-ttu-id="a8704-282">Aşağıdaki kodu *uygulama\\_Start\\BundleConfig.cs* dosyası `RegisterBundles` yöntemine ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a8704-282">Add the following code to the `RegisterBundles` method in the *App\\_Start\\BundleConfig.cs* file.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample14.cs)]
5. <span data-ttu-id="a8704-283">Aşağıdaki kodu, daha az pakete başvuran görünümlere ekleyin.</span><span class="sxs-lookup"><span data-stu-id="a8704-283">Add the following code to any views which references the LESS bundle.</span></span>

    [!code-cshtml[Main](bundling-and-minification/samples/sample15.cshtml)]

## <a name="bundle-considerations"></a><span data-ttu-id="a8704-284">Paket konuları</span><span class="sxs-lookup"><span data-stu-id="a8704-284">Bundle Considerations</span></span>

<span data-ttu-id="a8704-285">Paket oluştururken izlenmesi uygun bir kural, paket adına ön ek olarak "paket oluşturma" ekler.</span><span class="sxs-lookup"><span data-stu-id="a8704-285">A good convention to follow when creating bundles is to include "bundle" as a prefix in the bundle name.</span></span> <span data-ttu-id="a8704-286">Bu, olası bir [yönlendirme çakışmasını](https://forums.asp.net/post/5012037.aspx)engeller.</span><span class="sxs-lookup"><span data-stu-id="a8704-286">This will prevent a possible [routing conflict](https://forums.asp.net/post/5012037.aspx).</span></span>

<span data-ttu-id="a8704-287">Bir paketteki bir dosyayı güncelleştirdikten sonra, paket sorgu dizesi parametresi için yeni bir belirteç oluşturulur ve istemci paket içeren bir sayfa istediğinde tam paket indirilmelidir.</span><span class="sxs-lookup"><span data-stu-id="a8704-287">Once you update one file in a bundle, a new token is generated for the bundle query string parameter and the full bundle must be downloaded the next time a client requests a page containing the bundle.</span></span> <span data-ttu-id="a8704-288">Her varlığın ayrı olarak listelendiği geleneksel biçimlendirmede yalnızca değiştirilen dosya indirilir.</span><span class="sxs-lookup"><span data-stu-id="a8704-288">In traditional markup where each asset is listed individually, only the changed file would be downloaded.</span></span> <span data-ttu-id="a8704-289">Sık değişen varlıklar, paketleme için iyi aday olmayabilir.</span><span class="sxs-lookup"><span data-stu-id="a8704-289">Assets that change frequently may not be good candidates for bundling.</span></span>

<span data-ttu-id="a8704-290">Paketleme ve minbirleştirmesi birincil olarak ilk sayfa isteği yükleme süresini geliştirir.</span><span class="sxs-lookup"><span data-stu-id="a8704-290">Bundling and minification primarily improve the first page request load time.</span></span> <span data-ttu-id="a8704-291">Bir Web sayfası istendiğinde, tarayıcı varlıkları (JavaScript, CSS ve görüntüler) önbelleğe alır, böylece paketleme ve küçültme, aynı sayfayı veya aynı varlıkları talep eden aynı sitedeki sayfaları talep etmek için herhangi bir performans artışı sağlamaz.</span><span class="sxs-lookup"><span data-stu-id="a8704-291">Once a webpage has been requested, the browser caches the assets (JavaScript, CSS and images) so bundling and minification won't provide any performance boost when requesting the same page, or pages on the same site requesting the same assets.</span></span> <span data-ttu-id="a8704-292">Kullanım süresi üst bilgisini varlıklarınızda doğru ayarlamazsanız ve paketleme ve küçültme 'yı kullanmıyorsanız, tarayıcıların yeniliği buluşsal yöntemler, varlıkları birkaç günden sonra eski olarak işaretleyecek ve tarayıcı her varlık için bir doğrulama isteği gerektirecektir.</span><span class="sxs-lookup"><span data-stu-id="a8704-292">If you don't set the expires header correctly on your assets, and you don't use bundling and minification, the browsers freshness heuristics will mark the assets stale after a few days and the browser will require a validation request for each asset.</span></span> <span data-ttu-id="a8704-293">Bu durumda, paketleme ve minbirleşme, ilk sayfa isteğinden sonra bir performans artışı sağlar.</span><span class="sxs-lookup"><span data-stu-id="a8704-293">In this case, bundling and minification provide a performance increase after the first page request.</span></span> <span data-ttu-id="a8704-294">Ayrıntılar için bkz. [CDNs kullanarak blog ve Web sitesi performansını geliştirmek Için süre sonu](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="a8704-294">For details, see the blog [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

<span data-ttu-id="a8704-295">Her konak adı için aynı anda altı bağlantının tarayıcı sınırlaması bir [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx)kullanılarak azaltılabilir.</span><span class="sxs-lookup"><span data-stu-id="a8704-295">The browser limitation of six simultaneous connections per each hostname can be mitigated by using a [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span> <span data-ttu-id="a8704-296">CDN, barındırma sitenizden farklı bir ana bilgisayar adına sahip olduğundan, CDN 'den gelen varlık istekleri barındırma ortamınıza altı eşzamanlı bağlantı sınırına göre sayılmaz.</span><span class="sxs-lookup"><span data-stu-id="a8704-296">Because the CDN will have a different hostname than your hosting site, asset requests from the CDN will not count against the six simultaneous connections limit to your hosting environment.</span></span> <span data-ttu-id="a8704-297">CDN ayrıca ortak paket önbelleğe alma ve uç önbelleğe alma avantajları da sağlayabilir.</span><span class="sxs-lookup"><span data-stu-id="a8704-297">A CDN can also provide common package caching and edge caching advantages.</span></span>

<span data-ttu-id="a8704-298">Paketler, gereken sayfalarla bölümlendirilmelidir.</span><span class="sxs-lookup"><span data-stu-id="a8704-298">Bundles should be partitioned by pages that need them.</span></span> <span data-ttu-id="a8704-299">Örneğin, bir Internet uygulaması için varsayılan ASP.NET MVC şablonu jQuery 'tan ayrı bir jQuery doğrulama paketi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="a8704-299">For example, the default ASP.NET MVC template for an internet application creates a jQuery Validation bundle separate from jQuery.</span></span> <span data-ttu-id="a8704-300">Oluşturulan varsayılan görünümlerin girişi olmadığından ve değer göndermediğinden, doğrulama paketini içermez.</span><span class="sxs-lookup"><span data-stu-id="a8704-300">Because the default views created have no input and do not post values, they don't include the validation bundle.</span></span>

<span data-ttu-id="a8704-301">`System.Web.Optimization` ad alanı *System. Web. Optimization. dll*' de uygulanır.</span><span class="sxs-lookup"><span data-stu-id="a8704-301">The `System.Web.Optimization` namespace is implemented in *System.Web.Optimization.dll*.</span></span> <span data-ttu-id="a8704-302">Daha sonra *Antlr3. Runtime. dll*' yi kullanan, minlıme özellikleri için WebGrease kitaplığından (*WebGrease. dll*) yararlanır.</span><span class="sxs-lookup"><span data-stu-id="a8704-302">It leverages the WebGrease library (*WebGrease.dll*) for minification capabilities, which in turn uses *Antlr3.Runtime.dll*.</span></span>

<span data-ttu-id="a8704-303">*Hızlı postalar oluşturmak ve bağlantı paylaşmak Için Twitter kullanıyorum. Twitter tanıtıcım*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="a8704-303">*I use Twitter to make quick posts and share links. My Twitter handle is*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="a8704-304">Ek kaynaklar</span><span class="sxs-lookup"><span data-stu-id="a8704-304">Additional resources</span></span>

- <span data-ttu-id="a8704-305">Video: [barındırma](https://twitter.com/#!/howard_dierking) ile[paketleme ve iyileştirme](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing)</span><span class="sxs-lookup"><span data-stu-id="a8704-305">Video:[Bundling and Optimizing](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) by [Howard Dierking](https://twitter.com/#!/howard_dierking)</span></span>
- <span data-ttu-id="a8704-306">Web [sayfaları sitesine Web Iyileştirmesi ekleme](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="a8704-306">[Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="a8704-307">[Web Forms paketleme ve küçültmeye yönelik ekleme](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="a8704-307">[Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>
- <span data-ttu-id="a8704-308">[Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk) [Web 'e göz atmaya yönelik paketleme ve küçültmeye yönelik performans etkileri](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx)</span><span class="sxs-lookup"><span data-stu-id="a8704-308">[Performance Implications of Bundling and Minification on Web Browsing](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) by [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span></span>
- <span data-ttu-id="a8704-309">Rick Anderson ile [Web sitesi performansını geliştirmek Için CDNs kullanma ve süresi doluyor](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="a8704-309">[Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) by Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span></span>
- [<span data-ttu-id="a8704-310">RTT 'yi Küçült (gidiş dönüş süreleri)</span><span class="sxs-lookup"><span data-stu-id="a8704-310">Minimize RTT (round-trip times)</span></span>](https://developers.google.com/speed/docs/best-practices/rtt)

## <a name="contributors"></a><span data-ttu-id="a8704-311">Katkıda Bulunanlar</span><span class="sxs-lookup"><span data-stu-id="a8704-311">Contributors</span></span>

- <span data-ttu-id="a8704-312">Hao Kung</span><span class="sxs-lookup"><span data-stu-id="a8704-312">Hao Kung</span></span>
- [<span data-ttu-id="a8704-313">Howard Dierking</span><span class="sxs-lookup"><span data-stu-id="a8704-313">Howard Dierking</span></span>](https://twitter.com/#!/howard_dierking)
- <span data-ttu-id="a8704-314">Diana Lagül</span><span class="sxs-lookup"><span data-stu-id="a8704-314">Diana LaRose</span></span>
