---
uid: mvc/overview/getting-started/database-first-development/setting-up-database
title: 'Öğretici: MVC 5 kullanarak EF ile çalışmaya başlama Database First'
description: Bu öğretici, mevcut bir veritabanıyla nasıl başlayacağınızı ve kullanıcıların verilerle etkileşime geçmesini sağlayan bir Web uygulamasını hızlıca oluşturmayı gösterir.
author: Rick-Anderson
ms.author: riande
ms.date: 01/15/2019
ms.topic: tutorial
ms.assetid: 095abad4-3bfe-4f06-b092-ae6a735b7e49
msc.legacyurl: /mvc/overview/getting-started/database-first-development/setting-up-database
msc.type: authoredcontent
ms.openlocfilehash: a760767839a834a9c7e9fe358a3fd806a833261f
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78583526"
---
# <a name="tutorial-get-started-with-ef-database-first-using-mvc-5"></a><span data-ttu-id="aab47-103">Öğretici: MVC 5 kullanarak EF ile çalışmaya başlama Database First</span><span class="sxs-lookup"><span data-stu-id="aab47-103">Tutorial: Get started with EF Database First using MVC 5</span></span>

<span data-ttu-id="aab47-104">MVC, Entity Framework ve ASP.NET Scafkatı kullanarak var olan bir veritabanına arabirim sağlayan bir Web uygulaması oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aab47-104">Using MVC, Entity Framework, and ASP.NET Scaffolding, you can create a web application that provides an interface to an existing database.</span></span> <span data-ttu-id="aab47-105">Bu öğretici serisinde, kullanıcıların bir veritabanı tablosunda yer alan verileri görüntülemesini, düzenlemesini, oluşturmasını ve silmesini sağlayan nasıl otomatik olarak kod üretileyeceğiniz gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="aab47-105">This tutorial series shows you how to automatically generate code that enables users to display, edit, create, and delete data that resides in a database table.</span></span> <span data-ttu-id="aab47-106">Oluşturulan kod, veritabanı tablosundaki sütunlara karşılık gelir.</span><span class="sxs-lookup"><span data-stu-id="aab47-106">The generated code corresponds to the columns in the database table.</span></span> <span data-ttu-id="aab47-107">Serinin son bölümünde, doğrulama gereksinimlerini belirtmek ve biçimlendirmeyi göstermek için veri modeline veri açıklamalarını ekleme hakkında bilgi edineceksiniz.</span><span class="sxs-lookup"><span data-stu-id="aab47-107">In the last part of the series, you learn how add data annotations to the data model to specify validation requirements and display formatting.</span></span> <span data-ttu-id="aab47-108">İşiniz bittiğinde, Azure App Service için bir .NET uygulaması ve SQL veritabanı dağıtmayı öğrenmek üzere bir Azure makalesine ilerleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aab47-108">When you're done, you can advance to an Azure article to learn how to deploy a .NET app and SQL database to Azure App Service.</span></span>

<span data-ttu-id="aab47-109">Bu öğretici, mevcut bir veritabanıyla nasıl başlayacağınızı ve kullanıcıların verilerle etkileşime geçmesini sağlayan bir Web uygulamasını hızlıca oluşturmayı gösterir.</span><span class="sxs-lookup"><span data-stu-id="aab47-109">This tutorial shows how to start with an existing database and quickly create a web application that enables users to interact with the data.</span></span> <span data-ttu-id="aab47-110">Web uygulamasını derlemek için 6 ve MVC 5 Entity Framework kullanır.</span><span class="sxs-lookup"><span data-stu-id="aab47-110">It uses the Entity Framework 6 and MVC 5 to build the web application.</span></span> <span data-ttu-id="aab47-111">ASP.NET Scafkatlama özelliği, verileri görüntülemek, güncelleştirmek, oluşturmak ve silmek için otomatik olarak kod üretmenizi sağlar.</span><span class="sxs-lookup"><span data-stu-id="aab47-111">The ASP.NET Scaffolding feature enables you to automatically generate code for displaying, updating, creating and deleting data.</span></span> <span data-ttu-id="aab47-112">Visual Studio 'da yayımlama araçlarını kullanarak, siteyi ve veritabanını kolayca Azure 'a dağıtabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aab47-112">Using the publishing tools within Visual Studio, you can easily deploy the site and database to Azure.</span></span>

<span data-ttu-id="aab47-113">Serinin bu bölümü, veritabanı oluşturmaya ve verilerle doldurmaya odaklanır.</span><span class="sxs-lookup"><span data-stu-id="aab47-113">This part of the series focuses on creating a database and populating it with data.</span></span>

<span data-ttu-id="aab47-114">Bu seri, Tom Dykstra ve Rick Anderson ' den katkılarla yazılmıştır.</span><span class="sxs-lookup"><span data-stu-id="aab47-114">This series was written with contributions from Tom Dykstra and Rick Anderson.</span></span> <span data-ttu-id="aab47-115">Yorumlar bölümünde kullanıcılardan gelen geri bildirimlere göre geliştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="aab47-115">It was improved based on feedback from users in the comments section.</span></span>

<span data-ttu-id="aab47-116">Bu öğreticide şunları yaptınız:</span><span class="sxs-lookup"><span data-stu-id="aab47-116">In this tutorial, you:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="aab47-117">Veritabanını ayarlama</span><span class="sxs-lookup"><span data-stu-id="aab47-117">Set up the database</span></span>

## <a name="prerequisites"></a><span data-ttu-id="aab47-118">Önkoşullar</span><span class="sxs-lookup"><span data-stu-id="aab47-118">Prerequisites</span></span>

[<span data-ttu-id="aab47-119">Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="aab47-119">Visual Studio 2017</span></span>](https://visualstudio.microsoft.com/downloads/)

## <a name="set-up-the-database"></a><span data-ttu-id="aab47-120">Veritabanını ayarlama</span><span class="sxs-lookup"><span data-stu-id="aab47-120">Set up the database</span></span>

<span data-ttu-id="aab47-121">Var olan bir veritabanına sahip olma ortamını taklit etmek için, önce önceden doldurulan bazı verileri içeren bir veritabanı oluşturun ve sonra veritabanına bağlanan Web uygulamanızı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="aab47-121">To mimic the environment of having an existing database, you will first create a database with some pre-filled data, and then create your web application that connects to the database.</span></span>

<span data-ttu-id="aab47-122">Bu öğretici, Visual Studio 2017 ile LocalDB kullanılarak geliştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="aab47-122">This tutorial was developed using LocalDB with Visual Studio 2017.</span></span> <span data-ttu-id="aab47-123">LocalDB yerine var olan bir veritabanı sunucusunu kullanabilirsiniz, ancak Visual Studio sürümünüze ve veritabanı türüne bağlı olarak, Visual Studio 'daki tüm veri araçları desteklenmeyebilir.</span><span class="sxs-lookup"><span data-stu-id="aab47-123">You can use an existing database server instead of LocalDB, but depending on your version of Visual Studio and your type of database, all of the data tools in Visual Studio might not be supported.</span></span> <span data-ttu-id="aab47-124">Araçlar veritabanınız için kullanılabilir değilse, veritabanınızın yönetim paketi içindeki bazı veritabanına özgü adımlardan bazılarını gerçekleştirmeniz gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="aab47-124">If the tools are not available for your database, you may need to perform some of the database-specific steps within the management suite for your database.</span></span>

<span data-ttu-id="aab47-125">Visual Studio sürümünüzde veritabanı araçlarıyla ilgili bir sorununuz varsa, veritabanı araçlarının en son sürümünü yüklediğinizden emin olun.</span><span class="sxs-lookup"><span data-stu-id="aab47-125">If you have a problem with the database tools in your version of Visual Studio, make sure you have installed the latest version of the database tools.</span></span> <span data-ttu-id="aab47-126">Veritabanı araçları 'nı güncelleştirme veya yükleme hakkında bilgi için bkz. [Microsoft SQL Server Data Tools](https://msdn.microsoft.com/data/hh297027).</span><span class="sxs-lookup"><span data-stu-id="aab47-126">For information about updating or installing the database tools, see [Microsoft SQL Server Data Tools](https://msdn.microsoft.com/data/hh297027).</span></span>

<span data-ttu-id="aab47-127">Visual Studio 'Yu başlatın ve bir **SQL Server veritabanı projesi**oluşturun.</span><span class="sxs-lookup"><span data-stu-id="aab47-127">Launch Visual Studio and create a **SQL Server Database Project**.</span></span> <span data-ttu-id="aab47-128">Projeyi **Contososıtydata**olarak adlandırın.</span><span class="sxs-lookup"><span data-stu-id="aab47-128">Name the project **ContosoUniversityData**.</span></span>

![veritabanı projesi oluştur](setting-up-database/_static/image1.png)

<span data-ttu-id="aab47-130">Artık boş bir veritabanı projeniz var.</span><span class="sxs-lookup"><span data-stu-id="aab47-130">You now have an empty database project.</span></span> <span data-ttu-id="aab47-131">Bu veritabanını Azure 'a dağıtabilmeniz için, Azure SQL veritabanı 'nı projenin hedef platformu olarak ayarlarsınız.</span><span class="sxs-lookup"><span data-stu-id="aab47-131">To make sure that you can deploy this database to Azure, you'll set Azure SQL Database as the target platform for the project.</span></span> <span data-ttu-id="aab47-132">Hedef platformun ayarlanması aslında veritabanını dağıtmaz; yalnızca veritabanı projesinin hedef platformla uyumlu olduğunu doğrulayacağı anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="aab47-132">Setting the target platform does not actually deploy the database; it only means that the database project will verify that the database design is compatible with the target platform.</span></span> <span data-ttu-id="aab47-133">Hedef platformu ayarlamak için, projenin **özelliklerini** açın ve hedef platform için **Microsoft Azure SQL veritabanı** seçin.</span><span class="sxs-lookup"><span data-stu-id="aab47-133">To set the target platform, open the **Properties** for the project and select **Microsoft Azure SQL Database** for the target platform.</span></span>

<span data-ttu-id="aab47-134">Tabloları tanımlayan SQL betikleri ekleyerek, bu öğretici için gereken tabloları oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aab47-134">You can create the tables needed for this tutorial by adding SQL scripts that define the tables.</span></span> <span data-ttu-id="aab47-135">Projenize sağ tıklayın ve yeni bir öğe ekleyin.</span><span class="sxs-lookup"><span data-stu-id="aab47-135">Right-click your project and add a new item.</span></span> <span data-ttu-id="aab47-136">**Tablolar ve görünümler** > **tablosu** seçin ve *öğrenci*olarak adlandırın.</span><span class="sxs-lookup"><span data-stu-id="aab47-136">Select **Tables and Views** > **Table** and name it *Student*.</span></span>

<span data-ttu-id="aab47-137">Tablo dosyasında, tabloyu oluşturmak için T-SQL komutunu aşağıdaki kodla değiştirin.</span><span class="sxs-lookup"><span data-stu-id="aab47-137">In the table file, replace the T-SQL command with the following code to create the table.</span></span>

[!code-sql[Main](setting-up-database/samples/sample1.sql)]

<span data-ttu-id="aab47-138">Tasarım penceresinin kodla otomatik olarak eşitlendiğine dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="aab47-138">Notice that the design window automatically synchronizes with the code.</span></span> <span data-ttu-id="aab47-139">Kod ya da tasarımcı ile çalışabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aab47-139">You can work with either the code or designer.</span></span>

![kodu ve tasarımı göster](setting-up-database/_static/image5.png)

<span data-ttu-id="aab47-141">Başka bir tablo ekleyin.</span><span class="sxs-lookup"><span data-stu-id="aab47-141">Add another table.</span></span> <span data-ttu-id="aab47-142">Bu kez kurs yapın ve aşağıdaki T-SQL komutunu kullanın.</span><span class="sxs-lookup"><span data-stu-id="aab47-142">This time name it Course and use the following T-SQL command.</span></span>

[!code-sql[Main](setting-up-database/samples/sample2.sql)]

<span data-ttu-id="aab47-143">Ve kayıt adlı bir tablo oluşturmak için bir kez daha tekrarlayın.</span><span class="sxs-lookup"><span data-stu-id="aab47-143">And, repeat one more time to create a table named Enrollment.</span></span>

[!code-sql[Main](setting-up-database/samples/sample3.sql)]

<span data-ttu-id="aab47-144">Veritabanınızı, veritabanı dağıtıldıktan sonra çalıştırılan bir betik aracılığıyla verilerle doldurabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aab47-144">You can populate your database with data through a script that is run after the database is deployed.</span></span> <span data-ttu-id="aab47-145">Projeye bir dağıtım sonrası betiği ekleyin.</span><span class="sxs-lookup"><span data-stu-id="aab47-145">Add a Post-Deployment Script to the project.</span></span> <span data-ttu-id="aab47-146">Projenize sağ tıklayın ve yeni bir öğe ekleyin.</span><span class="sxs-lookup"><span data-stu-id="aab47-146">Right-click your project and add a new item.</span></span> <span data-ttu-id="aab47-147">**Dağıtım sonrası betiği** > **Kullanıcı betikleri** ' ni seçin.</span><span class="sxs-lookup"><span data-stu-id="aab47-147">Select **User Scripts** > **Post-Deployment Script**.</span></span> <span data-ttu-id="aab47-148">Varsayılan adı kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aab47-148">You can use the default name.</span></span>

<span data-ttu-id="aab47-149">Dağıtım sonrası betiğine aşağıdaki T-SQL kodunu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="aab47-149">Add the following T-SQL code to the post-deployment script.</span></span> <span data-ttu-id="aab47-150">Bu betik, eşleşen bir kayıt bulunduğunda veritabanına veri ekler.</span><span class="sxs-lookup"><span data-stu-id="aab47-150">This script simply adds data to the database when no matching record is found.</span></span> <span data-ttu-id="aab47-151">Veritabanına girmiş olduğunuz herhangi bir veriyi üzerine yazmaz veya silmez.</span><span class="sxs-lookup"><span data-stu-id="aab47-151">It does not overwrite or delete any data you may have entered into the database.</span></span>

[!code-sql[Main](setting-up-database/samples/sample4.sql)]

<span data-ttu-id="aab47-152">Veritabanı projenizi her dağıttığınızda dağıtım sonrası komut dosyasının çalıştırıldığını unutmayın.</span><span class="sxs-lookup"><span data-stu-id="aab47-152">It is important to note that the post-deployment script is run every time you deploy your database project.</span></span> <span data-ttu-id="aab47-153">Bu nedenle, bu betiği yazarken gereksinimlerinize dikkatlice göz önüne almanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="aab47-153">Therefore, you need to carefully consider your requirements when writing this script.</span></span> <span data-ttu-id="aab47-154">Bazı durumlarda, projenin her dağıtılışında bilinen bir veri kümesinden baştan başlamak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aab47-154">In some cases, you may wish to start over from a known set of data every time the project is deployed.</span></span> <span data-ttu-id="aab47-155">Diğer durumlarda, mevcut verileri dilediğiniz şekilde değiştirmek istemeyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aab47-155">In other cases, you may not want to alter the existing data in any way.</span></span> <span data-ttu-id="aab47-156">Gereksinimlerinize bağlı olarak, dağıtım sonrası bir betik veya betiğe dahil etmek için gerekenler hakkında karar verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="aab47-156">Based on your requirements, you can decide whether you need a post-deployment script or what you need to include in the script.</span></span> <span data-ttu-id="aab47-157">Veritabanınızı bir dağıtım sonrası betiği ile doldurma hakkında daha fazla bilgi için, [SQL Server veritabanı projesine veri ekleme](https://blogs.msdn.com/b/ssdt/archive/2012/02/02/including-data-in-an-sql-server-database-project.aspx)bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="aab47-157">For more information about populating your database with a post-deployment script, see [Including Data in a SQL Server Database Project](https://blogs.msdn.com/b/ssdt/archive/2012/02/02/including-data-in-an-sql-server-database-project.aspx).</span></span>

<span data-ttu-id="aab47-158">Artık 4 SQL betik dosyasına sahipsiniz ancak gerçek tablo yok.</span><span class="sxs-lookup"><span data-stu-id="aab47-158">You now have 4 SQL script files but no actual tables.</span></span> <span data-ttu-id="aab47-159">Veritabanı projenizi LocalDB 'ye dağıtmaya hazırlanıyor.</span><span class="sxs-lookup"><span data-stu-id="aab47-159">You are ready to deploy your database project to localdb.</span></span> <span data-ttu-id="aab47-160">Visual Studio 'da, veritabanı projenizi derlemek ve dağıtmak için Başlat düğmesine (veya F5) tıklayın.</span><span class="sxs-lookup"><span data-stu-id="aab47-160">In Visual Studio, click the Start button (or F5) to build and deploy your database project.</span></span> <span data-ttu-id="aab47-161">Derleme ve dağıtımın başarılı olduğunu doğrulamak için **Çıkış** sekmesini kontrol edin.</span><span class="sxs-lookup"><span data-stu-id="aab47-161">Check the **Output** tab to verify that the build and deployment succeeded.</span></span>

<span data-ttu-id="aab47-162">Yeni veritabanının oluşturulduğunu görmek için **SQL Server Nesne Gezgini** açın ve projenin adını doğru yerel veritabanı sunucusunda (Bu durumda **(LocalDB) \ProjectsV13**) arayın.</span><span class="sxs-lookup"><span data-stu-id="aab47-162">To see that the new database has been created, open **SQL Server Object Explorer** and look for the name of the project in the correct local database server (in this case **(localdb)\ProjectsV13**).</span></span>

<span data-ttu-id="aab47-163">Tabloların verilerle doldurulduğunu görmek için bir tabloya sağ tıklayın ve **verileri görüntüle**' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="aab47-163">To see that the tables are populated with data, right-click a table, and select **View Data**.</span></span>

![tablo verilerini göster](setting-up-database/_static/image9.png)

<span data-ttu-id="aab47-165">Tablo verilerinin düzenlenebilir bir görünümü görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="aab47-165">An editable view of the table data is displayed.</span></span> <span data-ttu-id="aab47-166">Örneğin, **tablo** > **dbo. kurs** > **verileri görüntüle**' yi seçerseniz, üç sütunlu (**Kurs**, **başlık**ve **krediler**) ve dört satır içeren bir tablo görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="aab47-166">For example, if you select **Tables** > **dbo.course** > **View Data**, you see a table with three columns (**Course**, **Title**, and **Credits**) and four rows.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="aab47-167">Ek kaynaklar</span><span class="sxs-lookup"><span data-stu-id="aab47-167">Additional resources</span></span>

<span data-ttu-id="aab47-168">Code First geliştirmenin açıklayıcı bir örneği için bkz. [ASP.NET MVC 5 Ile çalışmaya](../introduction/getting-started.md)başlama.</span><span class="sxs-lookup"><span data-stu-id="aab47-168">For an introductory example of Code First development, see [Getting Started with ASP.NET MVC 5](../introduction/getting-started.md).</span></span> <span data-ttu-id="aab47-169">Daha gelişmiş bir örnek için bkz. [ASP.NET MVC 4 uygulaması için Entity Framework veri modeli oluşturma](../getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="aab47-169">For a more advanced example, see [Creating an Entity Framework Data Model for an ASP.NET MVC 4 App](../getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span>

<span data-ttu-id="aab47-170">Hangi Entity Framework yaklaşımın kullanılacağını seçme kılavuzu için, bkz. [Entity Framework geliştirme yaklaşımları](https://msdn.microsoft.com/library/ms178359.aspx#dbfmfcf).</span><span class="sxs-lookup"><span data-stu-id="aab47-170">For guidance on selecting which Entity Framework approach to use, see [Entity Framework Development Approaches](https://msdn.microsoft.com/library/ms178359.aspx#dbfmfcf).</span></span>

## <a name="next-steps"></a><span data-ttu-id="aab47-171">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="aab47-171">Next steps</span></span>

<span data-ttu-id="aab47-172">Bu öğreticide şunları yaptınız:</span><span class="sxs-lookup"><span data-stu-id="aab47-172">In this tutorial, you:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="aab47-173">Veritabanını ayarlama</span><span class="sxs-lookup"><span data-stu-id="aab47-173">Set up the database</span></span>

<span data-ttu-id="aab47-174">Web uygulaması ve veri modelleri oluşturmayı öğrenmek için bir sonraki öğreticiye ilerleyin.</span><span class="sxs-lookup"><span data-stu-id="aab47-174">Advance to the next tutorial to learn how to create the web application and data models.</span></span>
> [!div class="nextstepaction"]
> [<span data-ttu-id="aab47-175">Web uygulaması ve veri modellerini oluşturma</span><span class="sxs-lookup"><span data-stu-id="aab47-175">Create the web application and data models</span></span>](creating-the-web-application.md)
