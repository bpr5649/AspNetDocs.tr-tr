---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
title: 'Yineleme #6 – Test odaklı geliştirme (C#) kullanın | Microsoft Dokümanlar'
author: rick-anderson
description: Bu altıncı yinelemede, önce birim testleri yazarak ve birim testlerine karşı kod yazarak uygulamamıza yeni işlevler ekliyoruz. Bu yinelemede,...
ms.author: riande
ms.date: 02/20/2009
ms.assetid: 013c3c26-7dc3-41d1-8064-f233c86008b5
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
msc.type: authoredcontent
ms.openlocfilehash: d0e8f30a075cc79c7410ffe1b8bf02da2bd44443
ms.sourcegitcommit: 022f79dbc1350e0c6ffaa1e7e7c6e850cdabf9af
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/17/2020
ms.locfileid: "81542332"
---
# <a name="iteration-6--use-test-driven-development-c"></a><span data-ttu-id="9d089-104">6. Yineleme – Test odaklı geliştirme kullanma (C#)</span><span class="sxs-lookup"><span data-stu-id="9d089-104">Iteration #6 – Use test-driven development (C#)</span></span>

<span data-ttu-id="9d089-105">[Microsoft](https://github.com/microsoft) tarafından</span><span class="sxs-lookup"><span data-stu-id="9d089-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="9d089-106">İndirme Kodu</span><span class="sxs-lookup"><span data-stu-id="9d089-106">Download Code</span></span>](iteration-6-use-test-driven-development-cs/_static/contactmanager_6_cs1.zip)

> <span data-ttu-id="9d089-107">Bu altıncı yinelemede, önce birim testleri yazarak ve birim testlerine karşı kod yazarak uygulamamıza yeni işlevler ekliyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="9d089-108">Bu yinelemeye kişi grupları ekliyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-108">In this iteration, we add contact groups.</span></span>

## <a name="building-a-contact-management-aspnet-mvc-application-c"></a><span data-ttu-id="9d089-109">MVC Uygulaması ASP.NET İletişim Yönetimi Oluşturma (C#)</span><span class="sxs-lookup"><span data-stu-id="9d089-109">Building a Contact Management ASP.NET MVC Application (C#)</span></span>

<span data-ttu-id="9d089-110">Öğreticiler bu dizi, biz baştan sona tüm Bir İletişim Yönetimi uygulaması oluşturmak.</span><span class="sxs-lookup"><span data-stu-id="9d089-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="9d089-111">İletişim Yöneticisi uygulaması, kişi listesi için kişi bilgilerini (adlar, telefon numaraları ve e-posta adresleri) depolamanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="9d089-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="9d089-112">Uygulamayı birden çok yineleme üzerine oluşturuyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="9d089-113">Her yineleme ile, yavaş yavaş uygulama geliştirmek.</span><span class="sxs-lookup"><span data-stu-id="9d089-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="9d089-114">Bu çoklu yineleme yaklaşımının amacı, her değişikliğin nedenini anlamanızı sağlamaktır.</span><span class="sxs-lookup"><span data-stu-id="9d089-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="9d089-115">Yineleme #1 - Uygulamayı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="9d089-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="9d089-116">İlk yinelemede, İletişim Yöneticisi'ni mümkün olan en basit şekilde oluştururuz.</span><span class="sxs-lookup"><span data-stu-id="9d089-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="9d089-117">Temel veritabanı işlemleri için destek ekliyoruz: Oluşturma, Okuma, Güncelleme ve Sil (CRUD).</span><span class="sxs-lookup"><span data-stu-id="9d089-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="9d089-118">Yineleme #2 - Uygulama güzel görünmesini sağlamak.</span><span class="sxs-lookup"><span data-stu-id="9d089-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="9d089-119">Bu yinelemede, varsayılan ASP.NET MVC görünüm ana sayfasını ve basamaklı stil sayfasını değiştirerek uygulamanın görünümünü iyileştiriyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="9d089-120">Yineleme #3 - Form doğrulama ekleyin.</span><span class="sxs-lookup"><span data-stu-id="9d089-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="9d089-121">Üçüncü yinelemede, temel form doğrulamasını ekleriz.</span><span class="sxs-lookup"><span data-stu-id="9d089-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="9d089-122">İnsanların gerekli form alanlarını tamamlamadan form göndermelerini engelliyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="9d089-123">Ayrıca e-posta adreslerini ve telefon numaralarını da doğrularız.</span><span class="sxs-lookup"><span data-stu-id="9d089-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="9d089-124">Yineleme #4 - Uygulamayı gevşek bir şekilde biraraya getirin.</span><span class="sxs-lookup"><span data-stu-id="9d089-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="9d089-125">Bu dördüncü yinelemede, İletişim Yöneticisi uygulamasını korumayı ve değiştirmeyi kolaylaştırmak için çeşitli yazılım tasarım desenlerinden yararlanıyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="9d089-126">Örneğin, uygulamamızı Depo deseni ve Bağımlılık Enjeksiyonu modelini kullanmak üzere yeniden düzenlemeyiz.</span><span class="sxs-lookup"><span data-stu-id="9d089-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="9d089-127">Yineleme #5 - Birim testleri oluşturun.</span><span class="sxs-lookup"><span data-stu-id="9d089-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="9d089-128">Beşinci yinelemede, birim testleri ekleyerek uygulamamızın korunmasını ve değiştirilmesini kolaylaştırıyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="9d089-129">Veri modeli sınıflarımızla alay ediyoruz ve denetleyicilerimiz ve doğrulama mantığımız için birim testleri oluşturuyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="9d089-130">Yineleme #6 - Test odaklı geliştirme yi kullanın.</span><span class="sxs-lookup"><span data-stu-id="9d089-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="9d089-131">Bu altıncı yinelemede, önce birim testleri yazarak ve birim testlerine karşı kod yazarak uygulamamıza yeni işlevler ekliyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="9d089-132">Bu yinelemeye kişi grupları ekliyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="9d089-133">Yineleme #7 - Ajax işlevselliği ekleyin.</span><span class="sxs-lookup"><span data-stu-id="9d089-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="9d089-134">Yedinci yinelemede, Ajax'a destek ekleyerek uygulamamızın duyarlılığını ve performansını artırıyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="9d089-135">Bu Yineleme</span><span class="sxs-lookup"><span data-stu-id="9d089-135">This Iteration</span></span>

<span data-ttu-id="9d089-136">Contact Manager uygulamasının önceki yinelemesinde, kodumuz için bir güvenlik ağı sağlamak için birim testleri oluşturduk.</span><span class="sxs-lookup"><span data-stu-id="9d089-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="9d089-137">Birim testleri oluşturmanın motivasyonu kodumuzu değiştirmeye karşı daha esnek hale getirmekti.</span><span class="sxs-lookup"><span data-stu-id="9d089-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="9d089-138">Birim testleri devreye girince, kodumuzda herhangi bir değişiklik yapabilir ve mevcut işlevleri bozup bozmadığımızı hemen anlayabiliriz.</span><span class="sxs-lookup"><span data-stu-id="9d089-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="9d089-139">Bu yinelemede, birim testlerini tamamen farklı bir amaç için kullanırız.</span><span class="sxs-lookup"><span data-stu-id="9d089-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="9d089-140">Bu yinelemede, birim testleri *test odaklı geliştirme*adı verilen bir uygulama tasarım felsefesinin bir parçası olarak kullanırız.</span><span class="sxs-lookup"><span data-stu-id="9d089-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="9d089-141">Test odaklı geliştirme alıştırması yaptığınızda, önce testleri yazar, ardından testlere karşı kod yazarsınız.</span><span class="sxs-lookup"><span data-stu-id="9d089-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="9d089-142">Daha doğrusu, test odaklı geliştirme uygularken, kod oluştururken tamamladığınız üç adım vardır (Kırmızı/ Yeşil/Refactor):</span><span class="sxs-lookup"><span data-stu-id="9d089-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="9d089-143">Başarısız olan bir birim testi yazma (Kırmızı)</span><span class="sxs-lookup"><span data-stu-id="9d089-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="9d089-144">Birim testini geçen kod yazma (Yeşil)</span><span class="sxs-lookup"><span data-stu-id="9d089-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="9d089-145">Kodunuzu yeniden düzenleme (Refactor)</span><span class="sxs-lookup"><span data-stu-id="9d089-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="9d089-146">Önce birim testini yazarsın.</span><span class="sxs-lookup"><span data-stu-id="9d089-146">First, you write the unit test.</span></span> <span data-ttu-id="9d089-147">Birim testi, kodunuzu nasıl beklediğinize yönelik niyetinizi ifade etmelidir.</span><span class="sxs-lookup"><span data-stu-id="9d089-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="9d089-148">Birim testini ilk oluşturduğunuzda, birim testi başarısız olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="9d089-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="9d089-149">Testi karşılayan herhangi bir uygulama kodu henüz yazmadığınız için test başarısız olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="9d089-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="9d089-150">Sonra, birim testinin geçmesi için yeterli kod yazarsınız.</span><span class="sxs-lookup"><span data-stu-id="9d089-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="9d089-151">Amaç, kodu mümkün olan en tembel, en özensiz ve en hızlı şekilde yazmaktır.</span><span class="sxs-lookup"><span data-stu-id="9d089-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="9d089-152">Uygulamanızın mimarisi ni düşünerek zaman kaybetmemelisiniz.</span><span class="sxs-lookup"><span data-stu-id="9d089-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="9d089-153">Bunun yerine, birim testi tarafından ifade edilen niyeti karşılamak için gereken en az kod miktarını yazmaya odaklanmalısınız.</span><span class="sxs-lookup"><span data-stu-id="9d089-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="9d089-154">Son olarak, yeterli kod yazdıktan sonra geri adım atabilir ve uygulamanızın genel mimarisini göz önünde bulundurabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="9d089-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="9d089-155">Bu adımda, kodunuzu daha iyi koruyabilmek için yazılım tasarım desenlerinden (depo deseni gibi) yararlanarak kodunuzu yeniden yazar (yeniden tasarlarsınız).</span><span class="sxs-lookup"><span data-stu-id="9d089-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="9d089-156">Kodunuz birim testleri kapsamında olduğundan, bu adımda korkusuzca kodunuzu yeniden yazabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="9d089-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="9d089-157">Test odaklı geliştirme uygulama sonucu birçok faydası vardır.</span><span class="sxs-lookup"><span data-stu-id="9d089-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="9d089-158">İlk olarak, test odaklı geliştirme sizi gerçekten yazılması gereken koda odaklanmaya zorlar.</span><span class="sxs-lookup"><span data-stu-id="9d089-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="9d089-159">Sürekli olarak belirli bir testi geçmek için yeterli kod yazmaya odaklandığınız için, asla kullanamayacağınız büyük miktarda kod yazmak için izniniçine girmeniz ve yazmanız engellenir.</span><span class="sxs-lookup"><span data-stu-id="9d089-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="9d089-160">İkinci olarak, "önce test edin" tasarım metodolojisi sizi kodunuzu nasıl kullanılacağı açısından kod yazmaya zorlar.</span><span class="sxs-lookup"><span data-stu-id="9d089-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="9d089-161">Başka bir deyişle, test odaklı geliştirme uygularken, testlerinizi sürekli olarak kullanıcı açısından yazarsınız.</span><span class="sxs-lookup"><span data-stu-id="9d089-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="9d089-162">Bu nedenle, test odaklı geliştirme daha temiz ve daha anlaşılır API'ler neden olabilir.</span><span class="sxs-lookup"><span data-stu-id="9d089-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="9d089-163">Son olarak, test odaklı geliştirme, bir uygulama yazma normal sürecinin bir parçası olarak birim testleri yazmaya zorlar.</span><span class="sxs-lookup"><span data-stu-id="9d089-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="9d089-164">Bir proje son tarih yaklaştıkça, sınama genellikle pencereden dışarı gider ilk şeydir.</span><span class="sxs-lookup"><span data-stu-id="9d089-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="9d089-165">Diğer taraftan, test odaklı geliştirme yi uygularken birim testleri yazma konusunda erdemli olma olasılığınız daha yüksektir, çünkü test odaklı geliştirme birim testlerini bir uygulama oluşturma sürecinin merkezinde yapar.</span><span class="sxs-lookup"><span data-stu-id="9d089-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="9d089-166">Test odaklı geliştirme hakkında daha fazla bilgi edinmek için, Michael Feathers'ın **Legacy Code ile Etkili Bir Şekilde Çalışma**kitabını okumanızı öneririm.</span><span class="sxs-lookup"><span data-stu-id="9d089-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>

<span data-ttu-id="9d089-167">Bu yinelemede, İletişim Yöneticisi uygulamamıza yeni bir özellik ekliyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="9d089-168">İletişim Grupları için destek ekliyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-168">We add support for Contact Groups.</span></span> <span data-ttu-id="9d089-169">Kişi Grupları'nı, kişilerinizi İş ve Arkadaş grupları gibi kategorilerhalinde düzenlemek için kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="9d089-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="9d089-170">Bu yeni işlevselliği, test odaklı bir geliştirme sürecini izleyerek uygulamamıza ekleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="9d089-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="9d089-171">Önce birim testlerimizi yazacağız ve tüm kodlarımızı bu testlere karşı yazacağız.</span><span class="sxs-lookup"><span data-stu-id="9d089-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="9d089-172">Ne Test Gets</span><span class="sxs-lookup"><span data-stu-id="9d089-172">What Gets Tested</span></span>

<span data-ttu-id="9d089-173">Önceki yinelemede de belirttiğimiz gibi, genellikle veri erişim mantığı veya görünüm mantığı için birim testleri yazmayın.</span><span class="sxs-lookup"><span data-stu-id="9d089-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="9d089-174">Veritabanına erişmek nispeten yavaş bir işlem olduğundan, veri erişim mantığı için birim testleri yazmazsınız.</span><span class="sxs-lookup"><span data-stu-id="9d089-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="9d089-175">Görünüm mantığı için birim testleri yazmazsınız, çünkü bir görünüme erişmek nispeten yavaş bir işlem olan bir web sunucusunu döndürmeyi gerektirir.</span><span class="sxs-lookup"><span data-stu-id="9d089-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="9d089-176">Test tekrar tekrar çok hızlı yürütülmedikçe bir birim testi yazmamalısınız</span><span class="sxs-lookup"><span data-stu-id="9d089-176">You shouldn't write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="9d089-177">Test odaklı geliştirme birim testleri tarafından yürütüldüğünden, başlangıçta denetleyici ve işman manılığına odaklanılır.</span><span class="sxs-lookup"><span data-stu-id="9d089-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="9d089-178">Veritabanına veya görünüme dokunmaktan kaçınıyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-178">We avoid touching the database or views.</span></span> <span data-ttu-id="9d089-179">Bu eğitimin sonuna kadar veritabanını değiştirmeyecek veya görünümlerimizi oluşturmayacağız.</span><span class="sxs-lookup"><span data-stu-id="9d089-179">We won't modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="9d089-180">Test edilebilenlerle başlıyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="9d089-181">Kullanıcı Hikayeleri Oluşturma</span><span class="sxs-lookup"><span data-stu-id="9d089-181">Creating User Stories</span></span>

<span data-ttu-id="9d089-182">Test odaklı geliştirme pratiği yaparken, her zaman bir test yazarak başlarsınız.</span><span class="sxs-lookup"><span data-stu-id="9d089-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="9d089-183">Bu hemen şu soruyu gündeme getiriyor: İlk olarak hangi testi yazacağına nasıl karar verebilirsiniz?</span><span class="sxs-lookup"><span data-stu-id="9d089-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="9d089-184">Bu soruyu yanıtlamak için, bir dizi [**kullanıcı hikayesi**](http://en.wikipedia.org/wiki/User_stories)yazmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="9d089-184">To answer this question, you should write a set of [**user stories**](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="9d089-185">Kullanıcı hikayesi, yazılım gereksiniminin çok kısa (genellikle tek cümle) açıklamasıdır.</span><span class="sxs-lookup"><span data-stu-id="9d089-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="9d089-186">Kullanıcı açısından yazılmış bir gereksinimin teknik olmayan bir açıklaması olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="9d089-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="9d089-187">Burada, yeni Kişi Grubu işlevinin gerektirdiği özellikleri açıklayan kullanıcı öyküleri kümesi verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="9d089-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="9d089-188">Kullanıcı kişi gruplarının listesini görüntüleyebilir.</span><span class="sxs-lookup"><span data-stu-id="9d089-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="9d089-189">Kullanıcı yeni bir kişi grubu oluşturabilir.</span><span class="sxs-lookup"><span data-stu-id="9d089-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="9d089-190">Kullanıcı varolan bir kişi grubunu silebilir.</span><span class="sxs-lookup"><span data-stu-id="9d089-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="9d089-191">Kullanıcı, yeni bir kişi oluştururken bir kişi grubu seçebilir.</span><span class="sxs-lookup"><span data-stu-id="9d089-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="9d089-192">Kullanıcı, varolan bir kişi düzenlerken bir kişi grubu seçebilir.</span><span class="sxs-lookup"><span data-stu-id="9d089-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="9d089-193">Dizin görünümünde kişi gruplarının listesi görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="9d089-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="9d089-194">Bir kullanıcı bir kişi grubunu tıklattığında, eşleşen kişilerin listesi görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="9d089-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="9d089-195">Bu kullanıcı hikayeleri listesinin bir müşteri tarafından tamamen anlaşılabilir olduğuna dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="9d089-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="9d089-196">Teknik uygulama detaylarından söz edilememektedir.</span><span class="sxs-lookup"><span data-stu-id="9d089-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="9d089-197">Uygulamanızı oluşturma sürecinde yken, kullanıcı öyküleri kümesi daha rafine hale gelebilir.</span><span class="sxs-lookup"><span data-stu-id="9d089-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="9d089-198">Bir kullanıcı hikayesini birden çok öyküye (gereksinimlere) kırabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="9d089-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="9d089-199">Örneğin, yeni bir kişi grubu oluşturmanın doğrulama içermesi gerektiğine karar verebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="9d089-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="9d089-200">Adsız bir kişi grubu göndermek bir doğrulama hatası döndürmelidir.</span><span class="sxs-lookup"><span data-stu-id="9d089-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="9d089-201">Kullanıcı öykülerinin bir listesini oluşturduktan sonra, ilk birim testinizi yazmaya hazırsınız.</span><span class="sxs-lookup"><span data-stu-id="9d089-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="9d089-202">Kişi gruplarının listesini görüntülemek için bir birim testi oluşturarak başlayacağız.</span><span class="sxs-lookup"><span data-stu-id="9d089-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="9d089-203">Kişi Gruplarını Listeleme</span><span class="sxs-lookup"><span data-stu-id="9d089-203">Listing Contact Groups</span></span>

<span data-ttu-id="9d089-204">İlk kullanıcı hikayemiz, bir kullanıcının kişi gruplarının listesini görebilmeleridir.</span><span class="sxs-lookup"><span data-stu-id="9d089-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="9d089-205">Bu hikayeyi bir testle ifade etmeliyiz.</span><span class="sxs-lookup"><span data-stu-id="9d089-205">We need to express this story with a test.</span></span>

<span data-ttu-id="9d089-206">ContactManager.Tests projesinde Denetleyiciler klasörüne sağ tıklayarak, **Ekle, Yeni Test'i**seçerek ve **Birim Testi** şablonuna bakarak yeni bir birim testi oluşturun (Bkz. Şekil 1).</span><span class="sxs-lookup"><span data-stu-id="9d089-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="9d089-207">Yeni birim testinin GroupControllerTest.cs ve **Tamam** düğmesini tıklatın.</span><span class="sxs-lookup"><span data-stu-id="9d089-207">Name the new unit test GroupControllerTest.cs and click the **OK** button.</span></span>

<span data-ttu-id="9d089-208">[![GroupControllerTest birim testi ekleme](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="9d089-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span></span>

<span data-ttu-id="9d089-209">**Şekil 01**: GroupControllerTest birim testinin eklenmesi([Tam boyutlu görüntüyü görüntülemek için tıklayınız](iteration-6-use-test-driven-development-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="9d089-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image2.png))</span></span>

<span data-ttu-id="9d089-210">İlk ünite testimiz Listeleme 1'de yer almaktadır.</span><span class="sxs-lookup"><span data-stu-id="9d089-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="9d089-211">Bu test, Grup denetleyicisinin Dizin() yönteminin bir grup kümesini döndürür olduğunu doğrular.</span><span class="sxs-lookup"><span data-stu-id="9d089-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="9d089-212">Test, görünüm verilerinde gruplar koleksiyonunun döndürüldettiğini doğrular.</span><span class="sxs-lookup"><span data-stu-id="9d089-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="9d089-213">**Listeleme 1 - Denetleyiciler\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="9d089-213">**Listing 1 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample1.cs)]

<span data-ttu-id="9d089-214">Visual Studio'da Liste 1'e kodu ilk yazdığınızda, çok sayıda kırmızı kıvrımlı çizgi alırsınız.</span><span class="sxs-lookup"><span data-stu-id="9d089-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="9d089-215">GroupController veya Grup sınıflarını oluşturmadık.</span><span class="sxs-lookup"><span data-stu-id="9d089-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="9d089-216">Bu noktada, uygulamamızı bile oluşturamıyorduk, bu yüzden ilk birim testimizi uygulayabiliyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="9d089-217">Bu iyi.</span><span class="sxs-lookup"><span data-stu-id="9d089-217">That s good.</span></span> <span data-ttu-id="9d089-218">Bu başarısız bir test sayılır.</span><span class="sxs-lookup"><span data-stu-id="9d089-218">That counts as a failing test.</span></span> <span data-ttu-id="9d089-219">Bu nedenle, artık uygulama kodu yazmaya başlamak için iznimiz vardır.</span><span class="sxs-lookup"><span data-stu-id="9d089-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="9d089-220">Testimizi uygulamak için yeterli kod yazmamız gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="9d089-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="9d089-221">Listeleme 2'deki Grup denetleyici sınıfı, birim testini geçmek için gereken minimum kodu içerir.</span><span class="sxs-lookup"><span data-stu-id="9d089-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="9d089-222">Index() eylemi, statik olarak kodlanmış gruplar listesini döndürür (Grup sınıfı Listeleme 3'te tanımlanır).</span><span class="sxs-lookup"><span data-stu-id="9d089-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="9d089-223">**Listeleme 2 - Denetleyiciler\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="9d089-223">**Listing 2 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample2.cs)]

<span data-ttu-id="9d089-224">**Listeleme 3 - Modeller\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="9d089-224">**Listing 3 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample3.cs)]

<span data-ttu-id="9d089-225">GroupController ve Grup sınıflarını projemize ekledikten sonra, ilk ünite testimiz başarıyla tamamlar (Bkz. Şekil 2).</span><span class="sxs-lookup"><span data-stu-id="9d089-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="9d089-226">Testi geçmek için gereken minimum işi yaptık.</span><span class="sxs-lookup"><span data-stu-id="9d089-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="9d089-227">Kutlama zamanı.</span><span class="sxs-lookup"><span data-stu-id="9d089-227">It is time to celebrate.</span></span>

<span data-ttu-id="9d089-228">[![Başarı!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="9d089-228">[![Success!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span></span>

<span data-ttu-id="9d089-229">**Şekil 02**: Başarı! ([Tam boyutlu görüntüyü görüntülemek için tıklayın](iteration-6-use-test-driven-development-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="9d089-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image4.png))</span></span>

## <a name="creating-contact-groups"></a><span data-ttu-id="9d089-230">Kişi Grupları Oluşturma</span><span class="sxs-lookup"><span data-stu-id="9d089-230">Creating Contact Groups</span></span>

<span data-ttu-id="9d089-231">Şimdi ikinci kullanıcı hikayesine geçebiliriz.</span><span class="sxs-lookup"><span data-stu-id="9d089-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="9d089-232">Yeni kişi grupları oluşturabilmelidir.</span><span class="sxs-lookup"><span data-stu-id="9d089-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="9d089-233">Bu niyeti bir testle ifade etmeliyiz.</span><span class="sxs-lookup"><span data-stu-id="9d089-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="9d089-234">Listeleme 4'teki test, Yeni Bir Grupla Oluştur() yöntemini aramanın Grubu Dizin() yöntemiyle döndürülen Gruplar listesine eklediği doğrular.</span><span class="sxs-lookup"><span data-stu-id="9d089-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="9d089-235">Başka bir deyişle, yeni bir grup oluşturursam, yeni Grubu Index() yöntemiyle döndürülen Gruplar listesinden geri alabiliyorum.</span><span class="sxs-lookup"><span data-stu-id="9d089-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="9d089-236">**Listeleme 4 - Denetleyiciler\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="9d089-236">**Listing 4 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample4.cs)]

<span data-ttu-id="9d089-237">Listeleme 4'teki test, Grup denetleyicisi Oluşturma() yöntemini yeni bir kişi Grubu ile çağırır.</span><span class="sxs-lookup"><span data-stu-id="9d089-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="9d089-238">Daha sonra, test Grup denetleyicisi Index() yöntemini aramanın görünüm verilerinde yeni Grubu döndürür doğrular.</span><span class="sxs-lookup"><span data-stu-id="9d089-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="9d089-239">Listeleme 5'teki değiştirilmiş Grup denetleyicisi, yeni testi geçmek için gereken en az değişikliği içerir.</span><span class="sxs-lookup"><span data-stu-id="9d089-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="9d089-240">**Listeleme 5 - Denetleyiciler\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="9d089-240">**Listing 5 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample5.cs)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="9d089-241">Listeleme 5'teki Grup denetleyicisinin yeni bir Oluşturma() eylemi vardır.</span><span class="sxs-lookup"><span data-stu-id="9d089-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="9d089-242">Bu eylem, Gruplar koleksiyonuna bir Grup ekler.</span><span class="sxs-lookup"><span data-stu-id="9d089-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="9d089-243">Gruplar koleksiyonunun içeriğini döndürmek için Index() eyleminin değiştirildiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="9d089-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="9d089-244">Bir kez daha, birim testini geçmek için gereken minimum iş miktarını gerçekleştirdik.</span><span class="sxs-lookup"><span data-stu-id="9d089-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="9d089-245">Grup denetleyicisi için bu değişiklikleri yaptıktan sonra, tüm birim testlerimiz geçer.</span><span class="sxs-lookup"><span data-stu-id="9d089-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="9d089-246">Doğrulama Ekleme</span><span class="sxs-lookup"><span data-stu-id="9d089-246">Adding Validation</span></span>

<span data-ttu-id="9d089-247">Bu gereksinim kullanıcı hikayesinde açıkça belirtilmemiştir.</span><span class="sxs-lookup"><span data-stu-id="9d089-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="9d089-248">Ancak, bir Grubun bir adı olmasını istemek makuldür.</span><span class="sxs-lookup"><span data-stu-id="9d089-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="9d089-249">Aksi takdirde, kişileri Gruplar halinde düzenlemek çok yararlı olmaz.</span><span class="sxs-lookup"><span data-stu-id="9d089-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="9d089-250">Listeleme 6 bu niyeti ifade eden yeni bir test içerir.</span><span class="sxs-lookup"><span data-stu-id="9d089-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="9d089-251">Bu sınama, ad sağlamadan bir Grup oluşturmaya çalışırken model durumunda bir doğrulama hatası iletisi ile sonuçladığını doğrular.</span><span class="sxs-lookup"><span data-stu-id="9d089-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="9d089-252">**Listeleme 6 - Denetleyiciler\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="9d089-252">**Listing 6 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample6.cs)]

<span data-ttu-id="9d089-253">Bu testi karşılamak için, Grup sınıfımıza bir Ad özelliği eklememiz gerekir (bkz.</span><span class="sxs-lookup"><span data-stu-id="9d089-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="9d089-254">Ayrıca, Grup denetleyicimiz Create() eylemine biraz doğrulama mantığı eklememiz gerekir (bkz.</span><span class="sxs-lookup"><span data-stu-id="9d089-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="9d089-255">**Listeleme 7 - Modeller\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="9d089-255">**Listing 7 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample7.cs)]

<span data-ttu-id="9d089-256">**Listeleme 8 - Denetleyiciler\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="9d089-256">**Listing 8 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample8.cs)]

<span data-ttu-id="9d089-257">Grup denetleyicisi Create() eyleminin artık hem doğrulama hem de veritabanı mantığı içerdiğine dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="9d089-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="9d089-258">Şu anda, Grup denetleyicisi tarafından kullanılan veritabanı bellek içi bir koleksiyondan başka bir şey oluşturmaz.</span><span class="sxs-lookup"><span data-stu-id="9d089-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="9d089-259">Refactor Zamanı</span><span class="sxs-lookup"><span data-stu-id="9d089-259">Time to Refactor</span></span>

<span data-ttu-id="9d089-260">Kırmızı / Yeşil / Refactor üçüncü adım Refactor parçasıdır.</span><span class="sxs-lookup"><span data-stu-id="9d089-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="9d089-261">Bu noktada, kodumuzdan geri adım atmalıyız ve tasarımını geliştirmek için uygulamamızı nasıl yeniden değerlendirebileceğimizi düşünmeliyiz.</span><span class="sxs-lookup"><span data-stu-id="9d089-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="9d089-262">Refactor aşaması, yazılım tasarım ilke ve desenlerini uygulamanın en iyi yolu hakkında çok düşündüğümüz aşamadır.</span><span class="sxs-lookup"><span data-stu-id="9d089-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="9d089-263">Kodumuzu, kodun tasarımını geliştirmek için seçtiğimiz herhangi bir şekilde değiştirmekte özgüruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="9d089-264">Mevcut işlevleri kırmamızı engelleyen bir güvenlik birimi testağına sahibiz.</span><span class="sxs-lookup"><span data-stu-id="9d089-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="9d089-265">Şu anda, Bizim Grup denetleyiciiyi yazılım tasarımı açısından bir karmaşa olduğunu.</span><span class="sxs-lookup"><span data-stu-id="9d089-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="9d089-266">Grup denetleyicisi doğrulama ve veri erişim kodu karışık bir karmaşa içerir.</span><span class="sxs-lookup"><span data-stu-id="9d089-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="9d089-267">Tek Sorumluluk İlkesi'ni ihlal etmekten kaçınmak için, bu endişeleri farklı sınıflara ayırmamız gerekir.</span><span class="sxs-lookup"><span data-stu-id="9d089-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="9d089-268">Refactored Grup denetleyici sınıfımız Listeleme 9'da yer almaktadır.</span><span class="sxs-lookup"><span data-stu-id="9d089-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="9d089-269">Denetleyici, ContactManager hizmet katmanını kullanacak şekilde değiştirildi.</span><span class="sxs-lookup"><span data-stu-id="9d089-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="9d089-270">Bu, İletişim denetleyicisi ile kullandığımız hizmet katmanıdır.</span><span class="sxs-lookup"><span data-stu-id="9d089-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="9d089-271">Liste 10, doğrulamayı, listelemeyi ve grupları oluşturmak için ContactManager hizmet katmanına eklenen yeni yöntemleri içerir.</span><span class="sxs-lookup"><span data-stu-id="9d089-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="9d089-272">IContactManagerService arabirimi yeni yöntemleri içerecek şekilde güncelleştirildi.</span><span class="sxs-lookup"><span data-stu-id="9d089-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="9d089-273">Listeleme 11, IContactManagerRepository arabirimini uygulayan yeni bir FakeContactManagerRepository sınıfı içerir.</span><span class="sxs-lookup"><span data-stu-id="9d089-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="9d089-274">Ayrıca IContactManagerRepository arabirimini uygulayan EntityContactManagerRepository sınıfının aksine, yeni FakeContactManagerRepository sınıfımız veritabanı ile iletişim kurmaz.</span><span class="sxs-lookup"><span data-stu-id="9d089-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="9d089-275">FakeContactManagerRepository sınıf veritabanı için bir proxy olarak bellek koleksiyonu kullanır.</span><span class="sxs-lookup"><span data-stu-id="9d089-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="9d089-276">Bu sınıfı birim testlerimizde sahte depo katmanı olarak kullanacağız.</span><span class="sxs-lookup"><span data-stu-id="9d089-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="9d089-277">**Listeleme 9 - Denetleyiciler\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="9d089-277">**Listing 9 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample9.cs)]

<span data-ttu-id="9d089-278">**Listeleme 10 - Denetleyiciler\ContactManagerService.cs**</span><span class="sxs-lookup"><span data-stu-id="9d089-278">**Listing 10 - Controllers\ContactManagerService.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample10.cs)]

<span data-ttu-id="9d089-279">**Listeleme 11 - Denetleyiciler\FakeContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="9d089-279">**Listing 11 - Controllers\FakeContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample11.cs)]

<span data-ttu-id="9d089-280">IContactManagerRepository arabiriminin değiştirilmesi, EntityContactManagerRepository sınıfında CreateGroup() ve ListGroups() yöntemlerini uygulamak için kullanım gerektirir.</span><span class="sxs-lookup"><span data-stu-id="9d089-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="9d089-281">Bunu yapmanın en tembel ve en hızlı yolu şuna benzeyen saplama yöntemleri eklemektir:</span><span class="sxs-lookup"><span data-stu-id="9d089-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>   

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample12.cs)]

<span data-ttu-id="9d089-282">Son olarak, uygulamamızın tasarımında yapılan bu değişiklikler, birim testlerimizde bazı değişiklikler yapmamızı gerektirmektedir.</span><span class="sxs-lookup"><span data-stu-id="9d089-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="9d089-283">Şimdi birim testleri yaparken FakeContactManagerRepository kullanmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="9d089-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="9d089-284">Güncelleştirilmiş GroupControllerTest sınıfı Listeleme 12'de bulunur.</span><span class="sxs-lookup"><span data-stu-id="9d089-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="9d089-285">**Listeleme 12 - Denetleyiciler\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="9d089-285">**Listing 12 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample13.cs)]

<span data-ttu-id="9d089-286">Tüm bu değişiklikleri yaptıktan sonra, bir kez daha, tüm birim testlerimiz geçer.</span><span class="sxs-lookup"><span data-stu-id="9d089-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="9d089-287">Kırmızı/Yeşil/Refactor döngüsünün tamamını tamamladık.</span><span class="sxs-lookup"><span data-stu-id="9d089-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="9d089-288">İlk iki kullanıcı öykülerini uyguladık.</span><span class="sxs-lookup"><span data-stu-id="9d089-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="9d089-289">Artık kullanıcı hikayelerinde ifade edilen gereksinimler için destekleyici birim testlerine sahibiz.</span><span class="sxs-lookup"><span data-stu-id="9d089-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="9d089-290">Kullanıcı öykülerinin geri kalanının uygulanması, aynı Kırmızı/Yeşil/Refactor döngüsünü yinelemeyi içerir.</span><span class="sxs-lookup"><span data-stu-id="9d089-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="9d089-291">Veritabanımızı Değiştirme</span><span class="sxs-lookup"><span data-stu-id="9d089-291">Modifying our Database</span></span>

<span data-ttu-id="9d089-292">Ne yazık ki, birim testlerimizin ifade ettiği tüm gereklilikleri yerine getirmiş olsak da, çalışmalarımız bitmedi.</span><span class="sxs-lookup"><span data-stu-id="9d089-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="9d089-293">Hala veritabanımızı değiştirmemiz gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="9d089-293">We still need to modify our database.</span></span>

<span data-ttu-id="9d089-294">Yeni bir Grup veritabanı tablosu oluşturmamız gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="9d089-294">We need to create a new Group database table.</span></span> <span data-ttu-id="9d089-295">Şu adımları uygulayın:</span><span class="sxs-lookup"><span data-stu-id="9d089-295">Follow these steps:</span></span>

1. <span data-ttu-id="9d089-296">Server Explorer penceresinde, Tablolar klasörüne sağ tıklayın ve **Yeni Tablo Ekle**seçeneğini seçin.</span><span class="sxs-lookup"><span data-stu-id="9d089-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="9d089-297">Tablo Tasarımcısı'nda aşağıda açıklanan iki sütunu girin.</span><span class="sxs-lookup"><span data-stu-id="9d089-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="9d089-298">Kimlik sütununu birincil anahtar ve Kimlik sütunu olarak işaretleyin.</span><span class="sxs-lookup"><span data-stu-id="9d089-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="9d089-299">Disket simgesini tıklatarak ad Grupları ile yeni tablokaydedin.</span><span class="sxs-lookup"><span data-stu-id="9d089-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.11_table01"></a>

| <span data-ttu-id="9d089-300">**Sütun Adı**</span><span class="sxs-lookup"><span data-stu-id="9d089-300">**Column Name**</span></span> | <span data-ttu-id="9d089-301">**Veri Türü**</span><span class="sxs-lookup"><span data-stu-id="9d089-301">**Data Type**</span></span> | <span data-ttu-id="9d089-302">**Nulls'a İzin Ver**</span><span class="sxs-lookup"><span data-stu-id="9d089-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9d089-303">Kimlik</span><span class="sxs-lookup"><span data-stu-id="9d089-303">Id</span></span> | <span data-ttu-id="9d089-304">int</span><span class="sxs-lookup"><span data-stu-id="9d089-304">int</span></span> | <span data-ttu-id="9d089-305">False</span><span class="sxs-lookup"><span data-stu-id="9d089-305">False</span></span> |
| <span data-ttu-id="9d089-306">Adı</span><span class="sxs-lookup"><span data-stu-id="9d089-306">Name</span></span> | <span data-ttu-id="9d089-307">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="9d089-307">nvarchar(50)</span></span> | <span data-ttu-id="9d089-308">False</span><span class="sxs-lookup"><span data-stu-id="9d089-308">False</span></span> |

<span data-ttu-id="9d089-309">Ardından, Kişiler tablosundaki tüm verileri silmemiz gerekir (aksi takdirde Kişiler ve Gruplar tabloları arasında bir ilişki oluşturamayız).</span><span class="sxs-lookup"><span data-stu-id="9d089-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won't be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="9d089-310">Şu adımları uygulayın:</span><span class="sxs-lookup"><span data-stu-id="9d089-310">Follow these steps:</span></span>

1. <span data-ttu-id="9d089-311">Kişiler tablosuna sağ tıklayın ve **Tablo Verilerini Göster**menüsü seçeneğini seçin.</span><span class="sxs-lookup"><span data-stu-id="9d089-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="9d089-312">Tüm satırları silin.</span><span class="sxs-lookup"><span data-stu-id="9d089-312">Delete all of the rows.</span></span>

<span data-ttu-id="9d089-313">Ardından, Gruplar veritabanı tablosu ile varolan Kişiler veritabanı tablosu arasında bir ilişki tanımlamamız gerekir.</span><span class="sxs-lookup"><span data-stu-id="9d089-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="9d089-314">Şu adımları uygulayın:</span><span class="sxs-lookup"><span data-stu-id="9d089-314">Follow these steps:</span></span>

1. <span data-ttu-id="9d089-315">Tablo Tasarımcısı'nı açmak için Sunucu Gezgini penceresindeki Kişiler tablosunu çift tıklatın.</span><span class="sxs-lookup"><span data-stu-id="9d089-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="9d089-316">Kişiler tablosuna GroupId adlı yeni bir tamsayı sütunu ekleyin.</span><span class="sxs-lookup"><span data-stu-id="9d089-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="9d089-317">Yabancı Anahtar İlişkileri iletişim kutusunu açmak için İlişki düğmesini tıklatın (Bkz. Şekil 3).</span><span class="sxs-lookup"><span data-stu-id="9d089-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="9d089-318">Ekle düğmesini tıklatın.</span><span class="sxs-lookup"><span data-stu-id="9d089-318">Click the Add button.</span></span>
5. <span data-ttu-id="9d089-319">Tablo ve Sütunlar Belirtimi düğmesinin yanında görünen elips düğmesini tıklatın.</span><span class="sxs-lookup"><span data-stu-id="9d089-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="9d089-320">Tablolar ve Sütunlar iletişim kutusunda, birincil anahtar tablosu olarak Gruplar'ı ve birincil anahtar sütun olarak Id'yi seçin.</span><span class="sxs-lookup"><span data-stu-id="9d089-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="9d089-321">Kişiler'i yabancı anahtar tablosu olarak seçin ve groupid yabancı anahtar sütunu olarak (Bkz. Şekil 4).</span><span class="sxs-lookup"><span data-stu-id="9d089-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="9d089-322">Tamam düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="9d089-322">Click the OK button.</span></span>
7. <span data-ttu-id="9d089-323">**INSERT ve UPDATE Belirtimi**altında, **Silme Kuralı**için **Basamaklı** değeri seçin.</span><span class="sxs-lookup"><span data-stu-id="9d089-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="9d089-324">Yabancı Anahtar İlişkileri iletişim kutusunu kapatmak için Kapat düğmesini tıklatın.</span><span class="sxs-lookup"><span data-stu-id="9d089-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="9d089-325">Kişiler tablosundaki değişiklikleri kaydetmek için Kaydet düğmesini tıklatın.</span><span class="sxs-lookup"><span data-stu-id="9d089-325">Click the Save button to save the changes to the Contacts table.</span></span>

<span data-ttu-id="9d089-326">[![Veritabanı tablo ilişkisi oluşturma](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="9d089-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span></span>

<span data-ttu-id="9d089-327">**Şekil 03**: Veritabanı tablosu ilişkisi oluşturma ([Tam boyutlu görüntüyü görüntülemek için tıklayınız](iteration-6-use-test-driven-development-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="9d089-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image6.png))</span></span>

<span data-ttu-id="9d089-328">[![Tablo ilişkilerini belirtme](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="9d089-328">[![Specifying table relationships](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span></span>

<span data-ttu-id="9d089-329">**Şekil 04**: Tablo ilişkilerini belirtme([Tam boyutlu görüntüyü görüntülemek için tıklayınız](iteration-6-use-test-driven-development-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="9d089-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image8.png))</span></span>

### <a name="updating-our-data-model"></a><span data-ttu-id="9d089-330">Veri Modelimizi Güncelleme</span><span class="sxs-lookup"><span data-stu-id="9d089-330">Updating our Data Model</span></span>

<span data-ttu-id="9d089-331">Ardından, yeni veritabanı tablosunu temsil etmek için veri modelimizi güncelleştirmemiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="9d089-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="9d089-332">Şu adımları uygulayın:</span><span class="sxs-lookup"><span data-stu-id="9d089-332">Follow these steps:</span></span>

1. <span data-ttu-id="9d089-333">Entity Designer'ı açmak için Modeller klasöründeki ContactManagerModel.edmx dosyasını çift tıklatın.</span><span class="sxs-lookup"><span data-stu-id="9d089-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="9d089-334">Designer yüzeyine sağ tıklayın ve Veritabanından Menü seçeneği **Güncelleştirme Modelini**seçin.</span><span class="sxs-lookup"><span data-stu-id="9d089-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="9d089-335">Güncelleştirme Sihirbazı'nda Gruplar tablosunu seçin ve Bitiş düğmesini tıklatın (Bkz. Şekil 5).</span><span class="sxs-lookup"><span data-stu-id="9d089-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="9d089-336">Gruplar varlığına sağ tıklayın ve menü seçeneğini yeniden **adlandır'ı**seçin.</span><span class="sxs-lookup"><span data-stu-id="9d089-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="9d089-337">*Gruplar* varlığının adını *Grup* (tekil) olarak değiştirin.</span><span class="sxs-lookup"><span data-stu-id="9d089-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="9d089-338">İlgili Kişi varlığının alt kısmında görünen Gruplar gezinti özelliğini sağ tıklatın.</span><span class="sxs-lookup"><span data-stu-id="9d089-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="9d089-339">*Gruplar* gezinti özelliğinin adını *Grup* (tekil) olarak değiştirin.</span><span class="sxs-lookup"><span data-stu-id="9d089-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>

<span data-ttu-id="9d089-340">[![Varlık Çerçevesi modelini veritabanından güncelleştirme](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="9d089-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span></span>

<span data-ttu-id="9d089-341">**Şekil 05**: Varlık Çerçevesi modelini veritabanından güncelleştirme ([Tam boyutlu görüntüyü görüntülemek için tıklayınız](iteration-6-use-test-driven-development-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="9d089-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image10.png))</span></span>

<span data-ttu-id="9d089-342">Bu adımları tamamladıktan sonra, veri modeliniz hem Kişiler hem de Gruplar tablolarını temsil edecektir.</span><span class="sxs-lookup"><span data-stu-id="9d089-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="9d089-343">Varlık Tasarımcısı her iki varlığı da göstermelidir (bkz. Şekil 6).</span><span class="sxs-lookup"><span data-stu-id="9d089-343">The Entity Designer should show both entities (see Figure 6).</span></span>

<span data-ttu-id="9d089-344">[![Grup ve İlgili Kişi Görüntüleme Entity Designer](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="9d089-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span></span>

<span data-ttu-id="9d089-345">**Şekil 06**: Grup ve İletişim'i görüntüleyen Varlık Tasarımcısı([Tam boyutlu görüntüyü görüntülemek için tıklayınız)](iteration-6-use-test-driven-development-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="9d089-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image12.png))</span></span>

### <a name="creating-our-repository-classes"></a><span data-ttu-id="9d089-346">Depo Sınıflarımızı Oluşturma</span><span class="sxs-lookup"><span data-stu-id="9d089-346">Creating our Repository Classes</span></span>

<span data-ttu-id="9d089-347">Sonra, depo sınıfımızı uygulamamız gerekiyor.</span><span class="sxs-lookup"><span data-stu-id="9d089-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="9d089-348">Bu yineleme boyunca, birim testlerimizi karşılamak için kod yazarken IContactManagerRepository arabirimine birkaç yeni yöntem ekledik.</span><span class="sxs-lookup"><span data-stu-id="9d089-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="9d089-349">iContactManagerRepository arabiriminin son sürümü Listeleme 14'te bulunur.</span><span class="sxs-lookup"><span data-stu-id="9d089-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="9d089-350">**Listeleme 14 - Modeller\IContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="9d089-350">**Listing 14 - Models\IContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample14.cs)]

<span data-ttu-id="9d089-351">Aslında temas gruplarıyla çalışma yla ilgili yöntemlerin hiçbirini uygulamadık.</span><span class="sxs-lookup"><span data-stu-id="9d089-351">We haven't actually implemented any of the methods related to working with contact groups.</span></span> <span data-ttu-id="9d089-352">Şu anda EntityContactManagerRepository sınıfı, IContactManagerRepository arabiriminde listelenen kişi grubu yöntemlerinin her biri için saplama yöntemlerine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="9d089-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="9d089-353">Örneğin, ListGroups() yöntemi şu anda şu şekilde görünür:</span><span class="sxs-lookup"><span data-stu-id="9d089-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample15.cs)]

<span data-ttu-id="9d089-354">Saplama yöntemleri uygulamamızı derlememizi ve birim testlerini geçmemizi sağladı.</span><span class="sxs-lookup"><span data-stu-id="9d089-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="9d089-355">Ancak, şimdi aslında bu yöntemleri uygulamak için zamanı.</span><span class="sxs-lookup"><span data-stu-id="9d089-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="9d089-356">EntityContactManagerRepository sınıfının son sürümü Listeleme 13'te yer almaktadır.</span><span class="sxs-lookup"><span data-stu-id="9d089-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="9d089-357">**Listeleme 13 - Modeller\EntityContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="9d089-357">**Listing 13 - Models\EntityContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample16.cs)]

### <a name="creating-the-views"></a><span data-ttu-id="9d089-358">Görünümleri Oluşturma</span><span class="sxs-lookup"><span data-stu-id="9d089-358">Creating the Views</span></span>

<span data-ttu-id="9d089-359">Varsayılan ASP.NET görünüm altyapısını kullandığınızda MVC uygulamasını ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="9d089-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="9d089-360">Bu nedenle, belirli bir birim testine yanıt olarak görünüm oluşturmazsınız.</span><span class="sxs-lookup"><span data-stu-id="9d089-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="9d089-361">Ancak, bir uygulama görünümler olmadan yararsız olacağından, İletişim Yöneticisi uygulamasında bulunan görünümleri oluşturmadan ve değiştirmeden bu yinelemeyi tamamlayamayız.</span><span class="sxs-lookup"><span data-stu-id="9d089-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="9d089-362">Kişi gruplarını yönetmek için aşağıdaki yeni görünümleri oluşturmamız gerekir (Bkz. Şekil 7):</span><span class="sxs-lookup"><span data-stu-id="9d089-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="9d089-363">Görünümler\Group\Index.aspx - Kişi gruplarının listesini görüntüler</span><span class="sxs-lookup"><span data-stu-id="9d089-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="9d089-364">Görünümler\Grup\Delete.aspx - Kişi grubunu silmek için onay formunu görüntüler</span><span class="sxs-lookup"><span data-stu-id="9d089-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>

<span data-ttu-id="9d089-365">[![Grup Dizini görünümü](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="9d089-365">[![The Group Index view](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span></span>

<span data-ttu-id="9d089-366">**Şekil 07**: Grup Dizini görünümü([Tam boyutlu görüntüyü görüntülemek için tıklayınız](iteration-6-use-test-driven-development-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="9d089-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image14.png))</span></span>

<span data-ttu-id="9d089-367">Aşağıdaki varolan görünümleri, kişi gruplarını içerecek şekilde değiştirmemiz gerekir:</span><span class="sxs-lookup"><span data-stu-id="9d089-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="9d089-368">Görünümler\Ana Sayfa\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="9d089-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="9d089-369">Görünümler\Ana Sayfa\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="9d089-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="9d089-370">Görünümler\Ana Sayfa\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="9d089-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="9d089-371">Bu öğreticiye eşlik eden Visual Studio uygulamasına bakarak değiştirilmiş görünümleri görebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="9d089-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="9d089-372">Örneğin, Şekil 8 Kişi Dizini görünümünü göstermektedir.</span><span class="sxs-lookup"><span data-stu-id="9d089-372">For example, Figure 8 illustrates the Contact Index view.</span></span>

<span data-ttu-id="9d089-373">[![Kişi Dizini görünümü](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="9d089-373">[![The Contact Index view](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span></span>

<span data-ttu-id="9d089-374">**Şekil 08**: İletişim Dizini görünümü([Tam boyutlu görüntüyü görüntülemek için tıklayınız](iteration-6-use-test-driven-development-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="9d089-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image16.png))</span></span>

## <a name="summary"></a><span data-ttu-id="9d089-375">Özet</span><span class="sxs-lookup"><span data-stu-id="9d089-375">Summary</span></span>

<span data-ttu-id="9d089-376">Bu yinelemede, test odaklı geliştirme uygulama tasarım metodolojisini izleyerek Contact Manager uygulamamıza yeni işlevler ekledik.</span><span class="sxs-lookup"><span data-stu-id="9d089-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="9d089-377">Bir dizi kullanıcı hikayesi oluşturarak başladık.</span><span class="sxs-lookup"><span data-stu-id="9d089-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="9d089-378">Kullanıcı hikayeleri tarafından ifade edilen gereksinimlere karşılık gelen bir birim testleri kümesi oluşturduk.</span><span class="sxs-lookup"><span data-stu-id="9d089-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="9d089-379">Son olarak, birim testleri tarafından ifade edilen gereksinimleri karşılamak için yeterli kod yazdı.</span><span class="sxs-lookup"><span data-stu-id="9d089-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="9d089-380">Birim testleri tarafından ifade edilen gereksinimleri karşılayacak kadar kod yazmayı bitirdikten sonra, veritabanımızı ve görünümlerimizi güncelledik.</span><span class="sxs-lookup"><span data-stu-id="9d089-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="9d089-381">Veritabanımıza yeni bir Gruplar tablosu ekledik ve Varlık Çerçeve Veri Modelimizi güncelledik.</span><span class="sxs-lookup"><span data-stu-id="9d089-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="9d089-382">Ayrıca bir dizi görünüm oluşturduk ve değiştirdik.</span><span class="sxs-lookup"><span data-stu-id="9d089-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="9d089-383">Bir sonraki yinelemede -- son yinelemede -- Ajax'tan yararlanmak için başvurumuzu yeniden yazıyoruz.</span><span class="sxs-lookup"><span data-stu-id="9d089-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="9d089-384">Ajax'tan yararlanarak, Contact Manager uygulamasının yanıt verme yeteneğini ve performansını artıracağız.</span><span class="sxs-lookup"><span data-stu-id="9d089-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="9d089-385">[Önceki](iteration-5-create-unit-tests-cs.md)
> [Sonraki](iteration-7-add-ajax-functionality-cs.md)</span><span class="sxs-lookup"><span data-stu-id="9d089-385">[Previous](iteration-5-create-unit-tests-cs.md)
[Next](iteration-7-add-ajax-functionality-cs.md)</span></span>
