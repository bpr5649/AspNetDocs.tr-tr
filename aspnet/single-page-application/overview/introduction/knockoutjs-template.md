---
uid: single-page-application/overview/introduction/knockoutjs-template
title: 'Tek Sayfalı Uygulama: KnockoutJS şablonu | Microsoft Docs'
author: MikeWasson
description: Knockout şablonu
ms.author: riande
ms.date: 01/30/2013
ms.assetid: f9c07af0-4b20-4b08-af8f-47fc3df169a2
msc.legacyurl: /single-page-application/overview/introduction/knockoutjs-template
msc.type: authoredcontent
ms.openlocfilehash: 20d2d4412345399acdde1535447cc18b6611b572
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/09/2019
ms.locfileid: "59412859"
---
# <a name="single-page-application-knockoutjs-template"></a><span data-ttu-id="f26d9-103">Tek Sayfalı Uygulama: KnockoutJS şablonu</span><span class="sxs-lookup"><span data-stu-id="f26d9-103">Single Page Application: KnockoutJS template</span></span>

<span data-ttu-id="f26d9-104">tarafından [Mike Wasson](https://github.com/MikeWasson)</span><span class="sxs-lookup"><span data-stu-id="f26d9-104">by [Mike Wasson](https://github.com/MikeWasson)</span></span>

> <span data-ttu-id="f26d9-105">Knockout MVC şablonu ASP.NET ve Web Araçları 2012.2 parçasıdır</span><span class="sxs-lookup"><span data-stu-id="f26d9-105">The Knockout MVC Template is part of ASP.NET and Web Tools 2012.2</span></span>
> 
> [<span data-ttu-id="f26d9-106">ASP.NET ve Web Araçları 2012.2 indirin</span><span class="sxs-lookup"><span data-stu-id="f26d9-106">Download ASP.NET and Web Tools 2012.2</span></span>](https://go.microsoft.com/fwlink/?LinkId=282650)


<span data-ttu-id="f26d9-107">ASP.NET ve Web Araçları 2012.2 güncelleştirme, ASP.NET MVC 4 için bir tek sayfalı uygulama (SPA) şablonu içerir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-107">The ASP.NET and Web Tools 2012.2 update includes a Single-Page Application (SPA) template for ASP.NET MVC 4.</span></span> <span data-ttu-id="f26d9-108">Bu şablon, etkileşimli istemci tarafı web uygulamaları hızlı bir şekilde oluşturmaya başlamanıza yardımcı olmak için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-108">This template is designed to get you started quickly building interactive client-side web apps.</span></span>

<span data-ttu-id="f26d9-109">"Tek sayfalı uygulama" (SPA) olduğundan tek bir HTML sayfası yükler ve ardından sayfanın dinamik olarak yeni sayfa yükleniyor yerine güncelleştiren bir web uygulaması için genel bir terimdir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-109">"Single-page application" (SPA) is the general term for a web application that loads a single HTML page and then updates the page dynamically, instead of loading new pages.</span></span> <span data-ttu-id="f26d9-110">Başlangıç sayfası yükleme sonrası AJAX istekleri aracılığıyla sunucusuyla SPA anlatıyor.</span><span class="sxs-lookup"><span data-stu-id="f26d9-110">After the initial page load, the SPA talks with the server through AJAX requests.</span></span>

![](knockoutjs-template/_static/image1.png)

<span data-ttu-id="f26d9-111">AJAX yeni bir şey değildir, ancak bugün oluşturun ve büyük ve karmaşık bir SPA uygulama sürdürmek kolaylaştıran yeni JavaScript çerçevesi vardır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-111">AJAX is nothing new, but today there are JavaScript frameworks that make it easier to build and maintain a large sophisticated SPA application.</span></span> <span data-ttu-id="f26d9-112">Ayrıca, HTML 5 ve CSS3 zengin kullanıcı arabirimleri oluşturmak kolaylaşır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-112">Also, HTML 5 and CSS3 are making it easier to create rich UIs.</span></span>

<span data-ttu-id="f26d9-113">Başlamanıza yardımcı olmak için örnek bir "Yapılacaklar listesi" uygulama SPA şablon oluşturur.</span><span class="sxs-lookup"><span data-stu-id="f26d9-113">To get you started, the SPA template creates a sample "To-do list" application.</span></span> <span data-ttu-id="f26d9-114">Bu öğreticide, biz şablonu Kılavuzlu tura katılın.</span><span class="sxs-lookup"><span data-stu-id="f26d9-114">In this tutorial, we'll take a guided tour of the template.</span></span> <span data-ttu-id="f26d9-115">İlk biz Yapılacaklar listesi uygulaması kendisini arayın ve ardından bu hizmetin çalışmasını sağlayan teknolojiyi parçaları inceleyin.</span><span class="sxs-lookup"><span data-stu-id="f26d9-115">First we'll look at the To-do list application itself, then examine the technology pieces that make it work.</span></span>

## <a name="create-a-new-spa-template-project"></a><span data-ttu-id="f26d9-116">Yeni bir SPA şablonu projesi oluşturma</span><span class="sxs-lookup"><span data-stu-id="f26d9-116">Create a New SPA Template Project</span></span>

<span data-ttu-id="f26d9-117">Gereksinimler:</span><span class="sxs-lookup"><span data-stu-id="f26d9-117">Requirements:</span></span>

- <span data-ttu-id="f26d9-118">Visual Studio 2012 veya Visual Studio Web için Express 2012</span><span class="sxs-lookup"><span data-stu-id="f26d9-118">Visual Studio 2012 or Visual Studio Express 2012 for Web</span></span>
- <span data-ttu-id="f26d9-119">ASP.NET Web Araçları 2012.2 güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="f26d9-119">ASP.NET Web Tools 2012.2 update.</span></span> <span data-ttu-id="f26d9-120">Güncelleştirmeyi yüklemeniz [burada](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2).</span><span class="sxs-lookup"><span data-stu-id="f26d9-120">You can install the update [here](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2).</span></span>

<span data-ttu-id="f26d9-121">Visual Studio'yu başlatın ve seçin **yeni proje** başlangıç sayfasından.</span><span class="sxs-lookup"><span data-stu-id="f26d9-121">Start Visual Studio and select **New Project** from the Start page.</span></span> <span data-ttu-id="f26d9-122">Veya **dosya** menüsünde **yeni** ardından **proje**.</span><span class="sxs-lookup"><span data-stu-id="f26d9-122">Or, from the **File** menu, select **New** and then **Project**.</span></span>

<span data-ttu-id="f26d9-123">İçinde **şablonları** bölmesinde **yüklü şablonlar** genişletin **Visual C#** düğümü.</span><span class="sxs-lookup"><span data-stu-id="f26d9-123">In the **Templates** pane, select **Installed Templates** and expand the **Visual C#** node.</span></span> <span data-ttu-id="f26d9-124">Altında **Visual C#** seçin **Web**.</span><span class="sxs-lookup"><span data-stu-id="f26d9-124">Under **Visual C#**, select **Web**.</span></span> <span data-ttu-id="f26d9-125">Proje şablonları listesinde seçin **ASP.NET MVC 4 Web uygulaması**.</span><span class="sxs-lookup"><span data-stu-id="f26d9-125">In the list of project templates, select **ASP.NET MVC 4 Web Application**.</span></span> <span data-ttu-id="f26d9-126">Projeyi adlandırın ve tıklayın **Tamam**.</span><span class="sxs-lookup"><span data-stu-id="f26d9-126">Name the project and click **OK**.</span></span>

![](knockoutjs-template/_static/image2.png)

<span data-ttu-id="f26d9-127">İçinde **yeni proje** seçin **tek sayfalı uygulama**.</span><span class="sxs-lookup"><span data-stu-id="f26d9-127">In the **New Project** wizard, select **Single Page Application**.</span></span>

![](knockoutjs-template/_static/image3.png)

<span data-ttu-id="f26d9-128">Derleme ve uygulamayı çalıştırmak için F5 tuşuna basın.</span><span class="sxs-lookup"><span data-stu-id="f26d9-128">Press F5 to build and run the application.</span></span> <span data-ttu-id="f26d9-129">Uygulamayı ilk kez çalıştırdığında, oturum açma ekranını görüntüler.</span><span class="sxs-lookup"><span data-stu-id="f26d9-129">When the application first runs, it displays a login screen.</span></span>

![](knockoutjs-template/_static/image4.png)

<span data-ttu-id="f26d9-130">Tıklayın &quot;kaydolun&quot; bağlayın ve yeni bir kullanıcı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="f26d9-130">Click the &quot;Sign up&quot; link and create a new user.</span></span>

![](knockoutjs-template/_static/image5.png)

<span data-ttu-id="f26d9-131">Oturum açtıktan sonra uygulama ile iki öğe varsayılan Yapılacaklar listesi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="f26d9-131">After you log in, the application creates a default Todo list with two items.</span></span> <span data-ttu-id="f26d9-132">"Yapılacaklar Listesi Ekle" tıklayarak yeni bir liste eklemek için.</span><span class="sxs-lookup"><span data-stu-id="f26d9-132">You can click "Add Todo list" to add a new list.</span></span>

![](knockoutjs-template/_static/image6.png)

<span data-ttu-id="f26d9-133">Listeyi yeniden adlandırma, listeye öğe eklemek ve onay kutusunu temizleyin.</span><span class="sxs-lookup"><span data-stu-id="f26d9-133">Rename the list, add items to the list, and check them off.</span></span> <span data-ttu-id="f26d9-134">Öğeleri silin veya listesinin tamamını silin.</span><span class="sxs-lookup"><span data-stu-id="f26d9-134">You can also delete items or delete an entire list.</span></span> <span data-ttu-id="f26d9-135">Değişiklikleri otomatik olarak sunucuda bir veritabanına kalıcı (aslında LocalDB bu noktada, uygulamayı yerel olarak çalıştığından).</span><span class="sxs-lookup"><span data-stu-id="f26d9-135">The changes are automatically persisted to a database on the server (actually LocalDB at this point, because you are running the application locally).</span></span>

![](knockoutjs-template/_static/image7.png)

## <a name="architecture-of-the-spa-template"></a><span data-ttu-id="f26d9-136">SPA şablonu mimarisi</span><span class="sxs-lookup"><span data-stu-id="f26d9-136">Architecture of the SPA Template</span></span>

<span data-ttu-id="f26d9-137">Bu diyagram, uygulama için temel yapı taşlarını gösterir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-137">This diagram shows the main building blocks for the application.</span></span>

![](knockoutjs-template/_static/image8.png)

<span data-ttu-id="f26d9-138">Sunucu tarafında, ASP.NET MVC HTML işlevi görür ve form tabanlı kimlik doğrulaması da işler.</span><span class="sxs-lookup"><span data-stu-id="f26d9-138">On the server side, ASP.NET MVC serves the HTML and also handles forms-based authentication.</span></span>

<span data-ttu-id="f26d9-139">ASP.NET Web API ToDoLists ve Todoıtems, alma, oluşturma, güncelleştirme ve silme de dahil olmak üzere ilgili tüm istekleri işler.</span><span class="sxs-lookup"><span data-stu-id="f26d9-139">ASP.NET Web API handles all requests that relate to the ToDoLists and ToDoItems, including getting, creating, updating and deleting.</span></span> <span data-ttu-id="f26d9-140">İstemci Web API'si ile verileri JSON biçiminde birbiriyle değiştirir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-140">The client exchanges data with Web API in JSON format.</span></span>

<span data-ttu-id="f26d9-141">Entity Framework (EF), O/RM katmanıdır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-141">Entity Framework (EF) is the O/RM layer.</span></span> <span data-ttu-id="f26d9-142">Bu, ASP.NET nesne odaklı dünyası ve temel alınan veritabanı arasında aracılık.</span><span class="sxs-lookup"><span data-stu-id="f26d9-142">It mediates between the object-oriented world of ASP.NET and the underlying database.</span></span> <span data-ttu-id="f26d9-143">LocalDB veritabanını kullanır ancak bu Web.config dosyasında değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f26d9-143">The database uses LocalDB but you can change this in the Web.config file.</span></span> <span data-ttu-id="f26d9-144">Genellikle, LocalDB yerel geliştirme için kullanın ve ardından bir SQL veritabanı sunucusunda, EF code first geçiş kullanarak dağıtın.</span><span class="sxs-lookup"><span data-stu-id="f26d9-144">Typically you would use LocalDB for local development and then deploy to a SQL database on the server, using EF code-first migration.</span></span>

<span data-ttu-id="f26d9-145">İstemci tarafında Knockout.js kitaplığı Sayfa güncelleştirmelerini AJAX istekleri işler.</span><span class="sxs-lookup"><span data-stu-id="f26d9-145">On the client side, the Knockout.js library handles page updates from AJAX requests.</span></span> <span data-ttu-id="f26d9-146">Knockout veri bağlamayı sayfanın en son verileri eşitlemek için kullanır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-146">Knockout uses data binding to synchronize the page with the latest data.</span></span> <span data-ttu-id="f26d9-147">Böylece, herhangi bir JSON verilerini aracılığıyla size yol gösterir ve DOM güncelleştiren kod yazmanız gerekmez</span><span class="sxs-lookup"><span data-stu-id="f26d9-147">That way, you don't have to write any of the code that walks through the JSON data and updates the DOM.</span></span> <span data-ttu-id="f26d9-148">Bunun yerine, Boşaltılan veri sunma hakkında bilgi HTML dosyasındaki bildirim temelli öznitelikleri yerleştirin.</span><span class="sxs-lookup"><span data-stu-id="f26d9-148">Instead, you put declarative attributes in the HTML that tell Knockout how to present the data.</span></span>

<span data-ttu-id="f26d9-149">Bu mimarinin büyük bir avantajı, kendisini sunu katmanı uygulama mantığından ayıran olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-149">A big advantage of this architecture is that it separates the presentation layer from the application logic.</span></span> <span data-ttu-id="f26d9-150">Web API bölümü, web sayfanızın nasıl görüneceğini ilgili hiçbir şeyi bilmeden oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f26d9-150">You can create the Web API portion without knowing anything about how your web page will look.</span></span> <span data-ttu-id="f26d9-151">İstemci tarafında için "Görünüm modeli" oluşturma verileri temsil eder ve HTML olarak bağlamak için Knockout görünüm modeli kullanır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-151">On the client side, you create a "view model" to represent that data, and the view model uses Knockout to bind to the HTML.</span></span> <span data-ttu-id="f26d9-152">Bu görünüm modeli değiştirmeden HTML kolayca değiştirmenize olanak tanır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-152">That lets you easily change the HTML without changing the view model.</span></span> <span data-ttu-id="f26d9-153">(Knockout biraz daha göz atacağız.)</span><span class="sxs-lookup"><span data-stu-id="f26d9-153">(We'll look at Knockout a bit later.)</span></span>

## <a name="models"></a><span data-ttu-id="f26d9-154">Modeller</span><span class="sxs-lookup"><span data-stu-id="f26d9-154">Models</span></span>

<span data-ttu-id="f26d9-155">Visual Studio projesinde, sunucu tarafında kullanılan modelleri modeller klasörü içerir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-155">In the Visual Studio project, the Models folder contains the models that are used on the server side.</span></span> <span data-ttu-id="f26d9-156">(İstemci tarafında da modeli vardır; biz onlara alırsınız.)</span><span class="sxs-lookup"><span data-stu-id="f26d9-156">(There are also models on the client side; we'll get to those.)</span></span>

![](knockoutjs-template/_static/image9.png)

**<span data-ttu-id="f26d9-157">Todoıtem, yapılacaklar listesi</span><span class="sxs-lookup"><span data-stu-id="f26d9-157">TodoItem, TodoList</span></span>**

<span data-ttu-id="f26d9-158">Veritabanı için Entity Framework Code First modelleri şunlardır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-158">These are the database models for Entity Framework Code First.</span></span> <span data-ttu-id="f26d9-159">Bu modeller birbirine noktası özellikleri olduğunu fark edeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="f26d9-159">Notice that these models have properties that point to each other.</span></span> `ToDoList` <span data-ttu-id="f26d9-160">Todoıtems ve her bir koleksiyonunu içeren `ToDoItem` ToDoList üst geri bir başvuru içeriyor.</span><span class="sxs-lookup"><span data-stu-id="f26d9-160">contains a collection of ToDoItems, and each `ToDoItem` has a reference back to its parent ToDoList.</span></span> <span data-ttu-id="f26d9-161">Bu özellik Gezinti özellikleri olarak adlandırılır ve bire çok ilişkisi bir Yapılacaklar listesi ve kendi Yapılacaklar öğelerini gösterir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-161">These properties are called navigation properties, and they represent the one-to-many relation a to-do list and its to-do items.</span></span>

<span data-ttu-id="f26d9-162">`ToDoItem` Sınıfı da kullandığı **[ForeignKey]** belirtmek için öznitelik `ToDoListId` içine bir yabancı anahtar `ToDoList` tablo.</span><span class="sxs-lookup"><span data-stu-id="f26d9-162">The `ToDoItem` class also uses the **[ForeignKey]** attribute to specify that `ToDoListId` is a foreign key into the `ToDoList` table.</span></span> <span data-ttu-id="f26d9-163">Bu, bir FOREIGN key kısıtlaması veritabanına eklemek için EF bildirir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-163">This tells EF to add a foreign-key constraint to the database.</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample1.cs)]

**<span data-ttu-id="f26d9-164">TodoItemDto, TodoListDto</span><span class="sxs-lookup"><span data-stu-id="f26d9-164">TodoItemDto, TodoListDto</span></span>**

<span data-ttu-id="f26d9-165">Bu sınıfların istemciye gönderilecek verileri tanımlar.</span><span class="sxs-lookup"><span data-stu-id="f26d9-165">These classes define the data that will be sent to the client.</span></span> <span data-ttu-id="f26d9-166">"DTO" "için veri aktarımı nesnesi." anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-166">"DTO" stands for "data transfer object."</span></span> <span data-ttu-id="f26d9-167">DTO nasıl varlıkları JSON'a seri hale tanımlar.</span><span class="sxs-lookup"><span data-stu-id="f26d9-167">The DTO defines how the entities will be serialized into JSON.</span></span> <span data-ttu-id="f26d9-168">Genel olarak, Dto'lar kullanmak için birkaç nedeni vardır:</span><span class="sxs-lookup"><span data-stu-id="f26d9-168">In general, there are several reasons to use DTOs:</span></span>

- <span data-ttu-id="f26d9-169">Denetlemek için hangi özelliklerin serileştirilir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-169">To control which properties are serialized.</span></span> <span data-ttu-id="f26d9-170">Bir etki alanı modelinden özellik alt kümesi DTO içerir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-170">The DTO can contain a subset of the properties from the domain model.</span></span> <span data-ttu-id="f26d9-171">Güvenlik nedenleriyle (hassas verileri gizlemek) ya da yalnızca bunu yapabilirsiniz, gönderdiğiniz veri miktarını azaltmak için.</span><span class="sxs-lookup"><span data-stu-id="f26d9-171">You might do this for security reasons (to hide sensitive data) or simply to reduce the amount of data that you send.</span></span>
- <span data-ttu-id="f26d9-172">Örneğin veri – şeklini değiştirmek için daha karmaşık bir veri yapı düzleştirmektir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-172">To change the shape of the data – e.g. to flatten a more complex data structure.</span></span>
- <span data-ttu-id="f26d9-173">İş mantığı DTO (ayrımı nettir) dışında tutulacak.</span><span class="sxs-lookup"><span data-stu-id="f26d9-173">To keep any business logic out of the DTO (separation of concerns).</span></span>
- <span data-ttu-id="f26d9-174">Herhangi bir nedenden dolayı etki alanı Modellerinizi seri hale getirilemez</span><span class="sxs-lookup"><span data-stu-id="f26d9-174">If your domain models cannot be serialized for some reason.</span></span> <span data-ttu-id="f26d9-175">Var olan bir nesne seri olduğunda, döngüsel başvurular Web API'sindeki bu sorunu gidermek için yol sorunlara yol açabilir (bkz [işleme döngüsel nesne başvuruları](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); ancak bir DTO kullanarak yalnızca önler sorunu tamamen.</span><span class="sxs-lookup"><span data-stu-id="f26d9-175">For example, circular references can cause problems when you serialize an object There are ways to handle this problem in Web API (see [Handling Circular Object References](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); but using a DTO simply avoids the problem altogether.</span></span>

<span data-ttu-id="f26d9-176">SPA şablonunda etki alanı modellerini aynı verileri Dto içerir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-176">In the SPA template, the DTOs contains the same data as the domain models.</span></span> <span data-ttu-id="f26d9-177">Ancak, bunlar bunlar Gezinti özelliklerinden döngüsel başvurulardan kaçının ve bunlar genel DTO Düzen göstermek için hala faydalıdır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-177">However, they are still useful because they avoid circular references from the navigation properties, and they demonstrate the general DTO pattern.</span></span>

**<span data-ttu-id="f26d9-178">AccountModels.cs</span><span class="sxs-lookup"><span data-stu-id="f26d9-178">AccountModels.cs</span></span>**

<span data-ttu-id="f26d9-179">Bu dosya, site üyeliği modellerini içerir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-179">This file contains models for site membership.</span></span> <span data-ttu-id="f26d9-180">`UserProfile` Sınıfı üyelik DB kullanıcı profilleri için şema tanımlar.</span><span class="sxs-lookup"><span data-stu-id="f26d9-180">The `UserProfile` class defines the schema for user profiles in the membership DB.</span></span> <span data-ttu-id="f26d9-181">(Bu durumda, yalnızca kullanıcı kimliği ve kullanıcı adıdır.) Bu dosyadaki diğer model sınıfları, kullanıcı kayıt ve oturum açma formlar oluşturmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-181">(In this case, the only information is the user ID and the user name.) The other model classes in this file are used to create the user registration and login forms.</span></span>

## <a name="entity-framework"></a><span data-ttu-id="f26d9-182">Varlık Çerçevesi</span><span class="sxs-lookup"><span data-stu-id="f26d9-182">Entity Framework</span></span>

<span data-ttu-id="f26d9-183">SPA şablon EF Code First kullanır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-183">The SPA template uses EF Code First.</span></span> <span data-ttu-id="f26d9-184">Code First geliştirme modelleri kodda önce tanımlayın ve ardından veritabanını oluşturmak için model EF kullanır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-184">In Code First development, you define the models first in code, and then EF uses the model to create the database.</span></span> <span data-ttu-id="f26d9-185">Var olan bir veritabanı EF de kullanabilirsiniz ([veritabanı ilk](https://msdn.microsoft.com/data/jj206878.aspx)).</span><span class="sxs-lookup"><span data-stu-id="f26d9-185">You can also use EF with an existing database ([Database First](https://msdn.microsoft.com/data/jj206878.aspx)).</span></span>

<span data-ttu-id="f26d9-186">`TodoItemContext` Modeller klasörü sınıfında türetilir **DbContext**.</span><span class="sxs-lookup"><span data-stu-id="f26d9-186">The `TodoItemContext` class in the Models folder derives from **DbContext**.</span></span> <span data-ttu-id="f26d9-187">Bu sınıf, model ve EF arasında "Yapıştırıcı" sağlar.</span><span class="sxs-lookup"><span data-stu-id="f26d9-187">This class provides the "glue" between the models and EF.</span></span> <span data-ttu-id="f26d9-188">`TodoItemContext` Tutan bir `ToDoItem` koleksiyonu ve `TodoList` koleksiyonu.</span><span class="sxs-lookup"><span data-stu-id="f26d9-188">The `TodoItemContext` holds a `ToDoItem` collection and a `TodoList` collection.</span></span> <span data-ttu-id="f26d9-189">Veritabanını sorgulamak için yalnızca bu koleksiyonlara yönelik bir LINQ Sorgu yazın.</span><span class="sxs-lookup"><span data-stu-id="f26d9-189">To query the database, you simply write a LINQ query against these collections.</span></span> <span data-ttu-id="f26d9-190">Örneğin, işte, tüm yapılacaklar listesi "Gamze adlı" kullanıcı için nasıl seçebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="f26d9-190">For example, here is how you can select all of the to-do lists for user "Alice":</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample2.cs)]

<span data-ttu-id="f26d9-191">Ayrıca koleksiyona yeni öğeler eklemek, öğeleri güncelleştirme veya öğeleri koleksiyondan silebilir ve veritabanına değişiklikleri kalıcı hale getirmek.</span><span class="sxs-lookup"><span data-stu-id="f26d9-191">You can also add new items to the collection, update items, or delete items from the collection, and persist the changes to the database.</span></span>

## <a name="aspnet-web-api-controllers"></a><span data-ttu-id="f26d9-192">ASP.NET Web API denetleyicisi</span><span class="sxs-lookup"><span data-stu-id="f26d9-192">ASP.NET Web API Controllers</span></span>

<span data-ttu-id="f26d9-193">ASP.NET Web API'de HTTP isteklerini işleyen nesneleri denetleyicileridir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-193">In ASP.NET Web API, controllers are objects that handle HTTP requests.</span></span> <span data-ttu-id="f26d9-194">SPA şablon Web API belirtildiği gibi CRUD işlemleri etkinleştirmek için kullanır. `ToDoList` ve `ToDoItem` örnekleri.</span><span class="sxs-lookup"><span data-stu-id="f26d9-194">As mentioned, the SPA template uses Web API to enable CRUD operations on `ToDoList` and `ToDoItem` instances.</span></span> <span data-ttu-id="f26d9-195">Denetleyicileri çözüm denetleyicileri klasöründe bulunur.</span><span class="sxs-lookup"><span data-stu-id="f26d9-195">The controllers are located in the Controllers folder of the solution.</span></span>

![](knockoutjs-template/_static/image10.png)

- `TodoController`<span data-ttu-id="f26d9-196">: Yapılacak iş öğeleri için HTTP isteklerini işler</span><span class="sxs-lookup"><span data-stu-id="f26d9-196">: Handles HTTP requests for to-do items</span></span>
- `TodoListController`<span data-ttu-id="f26d9-197">: Yapılacaklar listesi için HTTP isteklerini işler.</span><span class="sxs-lookup"><span data-stu-id="f26d9-197">: Handles HTTP requests for to-do lists.</span></span>

<span data-ttu-id="f26d9-198">Web API denetleyici adının URI yolu ile eşleştiği için bu adlar önemlidir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-198">These names are significant, because Web API matches the URI path to the controller name.</span></span> <span data-ttu-id="f26d9-199">(Web API HTTP isteklerini denetleyicilerine nasıl yönlendirdiğini bilgi edinmek için [ASP.NET Web API'de yönlendirme](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span><span class="sxs-lookup"><span data-stu-id="f26d9-199">(To learn how Web API routes HTTP requests to controllers, see [Routing in ASP.NET Web API](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span></span>

<span data-ttu-id="f26d9-200">Bakalım `ToDoListController` sınıfı.</span><span class="sxs-lookup"><span data-stu-id="f26d9-200">Let's look at the `ToDoListController` class.</span></span> <span data-ttu-id="f26d9-201">Bir tek veri üyesi aşağıdakileri içerir:</span><span class="sxs-lookup"><span data-stu-id="f26d9-201">It contains a single data member:</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample3.cs)]

<span data-ttu-id="f26d9-202">`TodoItemContext` Daha önce açıklandığı gibi EF ile iletişim kurmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-202">The `TodoItemContext` is used to communicate with EF, as described earlier.</span></span> <span data-ttu-id="f26d9-203">Denetleyici üzerinde yöntemleri CRUD işlemleri uygular.</span><span class="sxs-lookup"><span data-stu-id="f26d9-203">The methods on the controller implement the CRUD operations.</span></span> <span data-ttu-id="f26d9-204">Web API denetleyici yöntemlerinde, istemciden gelen HTTP isteklerini şu şekilde eşlenir:</span><span class="sxs-lookup"><span data-stu-id="f26d9-204">Web API maps HTTP requests from the client to controller methods, as follows:</span></span>

| <span data-ttu-id="f26d9-205">HTTP isteği</span><span class="sxs-lookup"><span data-stu-id="f26d9-205">HTTP Request</span></span> | <span data-ttu-id="f26d9-206">Denetleyici yöntemi</span><span class="sxs-lookup"><span data-stu-id="f26d9-206">Controller Method</span></span> | <span data-ttu-id="f26d9-207">Açıklama</span><span class="sxs-lookup"><span data-stu-id="f26d9-207">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="f26d9-208">/Api/TODO Al</span><span class="sxs-lookup"><span data-stu-id="f26d9-208">GET /api/todo</span></span> | `GetTodoLists` | <span data-ttu-id="f26d9-209">Yapılacak işler listelerinin bir koleksiyonunu alır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-209">Gets a collection of to-do lists.</span></span> |
| <span data-ttu-id="f26d9-210">GET/API'sitodo/*kimliği*</span><span class="sxs-lookup"><span data-stu-id="f26d9-210">GET /api/todo/*id*</span></span> | `GetTodoList` | <span data-ttu-id="f26d9-211">Kimliğe göre bir Yapılacaklar listesi alır</span><span class="sxs-lookup"><span data-stu-id="f26d9-211">Gets a to-do list by ID</span></span> |
| <span data-ttu-id="f26d9-212">PUT/API'si/todo/*kimliği*</span><span class="sxs-lookup"><span data-stu-id="f26d9-212">PUT /api/todo/*id*</span></span> | `PutTodoList` | <span data-ttu-id="f26d9-213">Yapılacaklar listesini güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-213">Updates a to-do list.</span></span> |
| <span data-ttu-id="f26d9-214">Todo/api/gönderin</span><span class="sxs-lookup"><span data-stu-id="f26d9-214">POST /api/todo</span></span> | `PostTodoList` | <span data-ttu-id="f26d9-215">Yeni bir Yapılacaklar listesi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="f26d9-215">Creates a new to-do list.</span></span> |
| <span data-ttu-id="f26d9-216">SİLME/API'sitodo/*kimliği*</span><span class="sxs-lookup"><span data-stu-id="f26d9-216">DELETE /api/todo/*id*</span></span> | `DeleteTodoList` | <span data-ttu-id="f26d9-217">Bir Yapılacaklar listesi siler.</span><span class="sxs-lookup"><span data-stu-id="f26d9-217">Deletes a TODO list.</span></span> |

<span data-ttu-id="f26d9-218">Bazı işlemleri için bir URI'leri kimlik değerini yer tutucuları içeren dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="f26d9-218">Notice that the URIs for some operations contain placeholders for the ID value.</span></span> <span data-ttu-id="f26d9-219">Örneğin, bir-listeye 42 kimliği silmek için URI değil `/api/todo/42`.</span><span class="sxs-lookup"><span data-stu-id="f26d9-219">For example, to delete a to-list with an ID of 42, the URI is `/api/todo/42`.</span></span>

<span data-ttu-id="f26d9-220">CRUD işlemleri için Web API kullanma hakkında daha fazla bilgi edinmek için [bu destekler CRUD işlemleri bir Web API'si oluşturma](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span><span class="sxs-lookup"><span data-stu-id="f26d9-220">To learn more about using Web API for CRUD operations, see [Creating a Web API that Supports CRUD Operations](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span></span> <span data-ttu-id="f26d9-221">Bu denetleyici için kod oldukça basittir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-221">The code for this controller is fairly straightforward.</span></span> <span data-ttu-id="f26d9-222">Bazı ilginç noktaları şunlardır:</span><span class="sxs-lookup"><span data-stu-id="f26d9-222">Here are some interesting points:</span></span>

- <span data-ttu-id="f26d9-223">`GetTodoLists` Yöntemi bir LINQ Sorgu sonuçlarını oturum açmış kullanıcı Kimliğine göre filtrelemek için kullanır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-223">The `GetTodoLists` method uses a LINQ query to filter the results by the ID of the logged-in user.</span></span> <span data-ttu-id="f26d9-224">Bu şekilde, bir kullanıcı yalnızca gitmesini ait verileri görür.</span><span class="sxs-lookup"><span data-stu-id="f26d9-224">That way, a user only sees the data that belongs to him or her.</span></span> <span data-ttu-id="f26d9-225">Ayrıca, bir Select deyimi dönüştürmek için kullanılır fark `ToDoList` içine örnekler `TodoListDto` örnekleri.</span><span class="sxs-lookup"><span data-stu-id="f26d9-225">Also, notice that a Select statement is used to convert the `ToDoList` instances into `TodoListDto` instances.</span></span>
- <span data-ttu-id="f26d9-226">PUT ve POST yöntemleri, veritabanı değiştirmeden önce model durumunu kontrol edin.</span><span class="sxs-lookup"><span data-stu-id="f26d9-226">The PUT and POST methods check the model state before modifying the database.</span></span> <span data-ttu-id="f26d9-227">Varsa **ModelState.IsValid** yanlış, bu yöntemler, HTTP 400 Hatalı istek döndürür.</span><span class="sxs-lookup"><span data-stu-id="f26d9-227">If **ModelState.IsValid** is false, these methods return HTTP 400, Bad Request.</span></span> <span data-ttu-id="f26d9-228">Sırasında Web API'de model doğrulama hakkında daha fazla bilgiyi [Model doğrulama](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span><span class="sxs-lookup"><span data-stu-id="f26d9-228">Read more about model validation in Web API at [Model Validation](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span></span>
- <span data-ttu-id="f26d9-229">Denetleyici sınıfı da ile donatılmış **[Authorize]** özniteliği.</span><span class="sxs-lookup"><span data-stu-id="f26d9-229">The controller class is also decorated with the **[Authorize]** attribute.</span></span> <span data-ttu-id="f26d9-230">Bu öznitelik, HTTP isteği kimlik doğrulaması olup olmadığını denetler.</span><span class="sxs-lookup"><span data-stu-id="f26d9-230">This attribute checks whether the HTTP request is authenticated.</span></span> <span data-ttu-id="f26d9-231">İstek Kimliği doğrulanmazsa, HTTP 401, istemci aldıktan yetkisiz.</span><span class="sxs-lookup"><span data-stu-id="f26d9-231">If the request is not authenticated, the client receives HTTP 401, Unauthorized.</span></span> <span data-ttu-id="f26d9-232">Kimlik doğrulama hakkında daha fazla bilgiyi [kimlik doğrulama ve yetkilendirme ASP.NET Web API](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span><span class="sxs-lookup"><span data-stu-id="f26d9-232">Read more about authentication at [Authentication and Authorization in ASP.NET Web API](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span></span>

<span data-ttu-id="f26d9-233">`TodoController` Sınıftır çok benzer `TodoListController`.</span><span class="sxs-lookup"><span data-stu-id="f26d9-233">The `TodoController` class is very similar to `TodoListController`.</span></span> <span data-ttu-id="f26d9-234">En büyük fark herhangi bir GET yöntemi tanımlamaz istemci her bir Yapılacaklar listesi ile birlikte Yapılacaklar öğelerini alırsınız olmasıdır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-234">The biggest difference is that it does not define any GET methods, because the client will get the to-do items along with each to-do list.</span></span>

## <a name="mvc-controllers-and-views"></a><span data-ttu-id="f26d9-235">MVC denetleyicileri ve görünümleri</span><span class="sxs-lookup"><span data-stu-id="f26d9-235">MVC Controllers and Views</span></span>

<span data-ttu-id="f26d9-236">MVC denetleyicileri da çözümün denetleyicileri klasöründe bulunur.</span><span class="sxs-lookup"><span data-stu-id="f26d9-236">The MVC controllers are also located in the Controllers folder of the solution.</span></span> `HomeController` <span data-ttu-id="f26d9-237">uygulama için ana HTML işler.</span><span class="sxs-lookup"><span data-stu-id="f26d9-237">renders the main HTML for the application.</span></span> <span data-ttu-id="f26d9-238">Giriş denetleyicisine görünümünü Views/Home/Index.cshtml içinde tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-238">The view for the Home controller is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="f26d9-239">Giriş görünümü, kullanıcının oturum açtığı bağlı olarak farklı içerik işler:</span><span class="sxs-lookup"><span data-stu-id="f26d9-239">The Home view renders different content depending on whether the user is logged in:</span></span>

[!code-cshtml[Main](knockoutjs-template/samples/sample4.cshtml)]

<span data-ttu-id="f26d9-240">Kullanıcılar oturum açtığında, ana UI görürler.</span><span class="sxs-lookup"><span data-stu-id="f26d9-240">When users are logged in, they see the main UI.</span></span> <span data-ttu-id="f26d9-241">Aksi halde, oturum açma paneli bakın.</span><span class="sxs-lookup"><span data-stu-id="f26d9-241">Otherwise, they see the login panel.</span></span> <span data-ttu-id="f26d9-242">Bu koşullu işleme sunucu tarafında olacağını unutmayın.</span><span class="sxs-lookup"><span data-stu-id="f26d9-242">Note that this conditional rendering happens on the server side.</span></span> <span data-ttu-id="f26d9-243">İstemci tarafında hassas içerik gizlemek hiçbir zaman deneyin&#8212;bir HTTP yanıtında gönderdiğiniz herhangi bir şey ham HTTP iletileri izliyor birine görünür.</span><span class="sxs-lookup"><span data-stu-id="f26d9-243">Never try to hide sensitive content on the client side&#8212;anything that you send in an HTTP response is visible to someone who is watching the raw HTTP messages.</span></span>

## <a name="client-side-javascript-and-knockoutjs"></a><span data-ttu-id="f26d9-244">İstemci tarafı JavaScript ve Knockout.js</span><span class="sxs-lookup"><span data-stu-id="f26d9-244">Client-Side JavaScript and Knockout.js</span></span>

<span data-ttu-id="f26d9-245">Artık istemci uygulamaya sunucu tarafındaki dönelim.</span><span class="sxs-lookup"><span data-stu-id="f26d9-245">Now let's turn from the server side of the application to the client.</span></span> <span data-ttu-id="f26d9-246">SPA şablon, jQuery ve Knockout.js kesintisiz etkileşimli bir kullanıcı Arabirimi oluşturmak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-246">The SPA template uses a combination of jQuery and Knockout.js to create a smooth, interactive UI.</span></span> <span data-ttu-id="f26d9-247">Knockout.js HTML veri bağlama kolaylaştıran bir JavaScript kitaplıktır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-247">Knockout.js is a JavaScript library that makes it easy to bind HTML to data.</span></span> <span data-ttu-id="f26d9-248">Knockout.js "Model-View-ViewModel." adlı bir desen kullanır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-248">Knockout.js uses a pattern called "Model-View-ViewModel."</span></span>

- <span data-ttu-id="f26d9-249">Etki alanı verileri (ToDo listeler ve ToDo öğeleri) modelidir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-249">The model is the domain data (ToDo lists and ToDo items).</span></span>
- <span data-ttu-id="f26d9-250">HTML belgesi görünümüdür.</span><span class="sxs-lookup"><span data-stu-id="f26d9-250">The view is the HTML document.</span></span>
- <span data-ttu-id="f26d9-251">Görünüm modeli model verileri tutan bir JavaScript nesnesidir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-251">The view-model is a JavaScript object that holds the model data.</span></span> <span data-ttu-id="f26d9-252">Görünüm modeli, kullanıcı arabiriminin bir kod soyutlamadır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-252">The view-model is a code abstraction of the UI.</span></span> <span data-ttu-id="f26d9-253">HTML gösteriminin bilgisi var.</span><span class="sxs-lookup"><span data-stu-id="f26d9-253">It has no knowledge of the HTML representation.</span></span> <span data-ttu-id="f26d9-254">Bunun yerine, Özet görünümü "Yapılacaklar listesi" gibi özelliklerini temsil eder.</span><span class="sxs-lookup"><span data-stu-id="f26d9-254">Instead, it represents abstract features of the view, such as "a list of ToDo items".</span></span>

<span data-ttu-id="f26d9-255">Görünüm veri görünüm modeline bağlı.</span><span class="sxs-lookup"><span data-stu-id="f26d9-255">The view is data-bound to the view-model.</span></span> <span data-ttu-id="f26d9-256">Görünüm modeli güncelleştirmeler Görünümü'nde otomatik olarak yansıtılır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-256">Updates to the view-model are automatically reflected in the view.</span></span> <span data-ttu-id="f26d9-257">Bağlamalar ve diğer yöndeki de çalışır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-257">Bindings work the other direction as well.</span></span> <span data-ttu-id="f26d9-258">Olayları DOM (tıkladığında gibi) verilere işlevleri için Görünüm modeli üzerinde AJAX çağrıları tetiklemek, bağlı.</span><span class="sxs-lookup"><span data-stu-id="f26d9-258">Events in the DOM (such as clicks) are data-bound to functions on the view model, which trigger AJAX calls.</span></span>

<span data-ttu-id="f26d9-259">SPA şablon istemci tarafı JavaScript üç katmanlara göre düzenler:</span><span class="sxs-lookup"><span data-stu-id="f26d9-259">The SPA template organizes the client-side JavaScript into three layers:</span></span>

- <span data-ttu-id="f26d9-260">todo.datacontext.js: AJAX isteği gönderir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-260">todo.datacontext.js: Sends AJAX requests.</span></span>
- <span data-ttu-id="f26d9-261">todo.model.js: Modelleri tanımlar.</span><span class="sxs-lookup"><span data-stu-id="f26d9-261">todo.model.js: Defines the models.</span></span>
- <span data-ttu-id="f26d9-262">TODO.ViewModel.js: Görünüm modeli tanımlar.</span><span class="sxs-lookup"><span data-stu-id="f26d9-262">todo.viewmodel.js: Defines the view model.</span></span>

![](knockoutjs-template/_static/image11.png)

<span data-ttu-id="f26d9-263">Bu komut dosyaları, çözümün betikleri/uygulama klasöründe bulunur.</span><span class="sxs-lookup"><span data-stu-id="f26d9-263">These script files are located in the Scripts/app folder of the solution.</span></span>

![](knockoutjs-template/_static/image12.png)

<span data-ttu-id="f26d9-264">**TODO.DataContext** Web APİ'si denetleyicilerinin tüm AJAX çağrıları işler.</span><span class="sxs-lookup"><span data-stu-id="f26d9-264">**todo.datacontext** handles all AJAX calls to the Web API controllers.</span></span> <span data-ttu-id="f26d9-265">(Oturum açma için AJAX çağrıları başka bir yerde ajaxlogin.js içinde tanımlanır.)</span><span class="sxs-lookup"><span data-stu-id="f26d9-265">(The AJAX calls for logging in are defined elsewhere, in ajaxlogin.js.)</span></span>

<span data-ttu-id="f26d9-266">**TODO.model.js** yapılacak işler listelerinin için istemci tarafı (tarayıcı) modelleri tanımlar.</span><span class="sxs-lookup"><span data-stu-id="f26d9-266">**todo.model.js** defines the client-side (browser) models for the to-do lists.</span></span> <span data-ttu-id="f26d9-267">İki model sınıfı vardır: Todoıtem ve yapılacaklar listesi.</span><span class="sxs-lookup"><span data-stu-id="f26d9-267">There are two model classes: todoItem and todoList.</span></span>

<span data-ttu-id="f26d9-268">Model sınıfları özelliklerin birçoğu "ko.observable" türüdür.</span><span class="sxs-lookup"><span data-stu-id="f26d9-268">Many of the properties in the model classes are of type "ko.observable".</span></span> <span data-ttu-id="f26d9-269">Gözlemlenenler Knockout kendi Sihirli nasıl yaptığını ' dir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-269">Observables are how Knockout does its magic.</span></span> <span data-ttu-id="f26d9-270">Gelen [Knockout belgeleri](http://knockoutjs.com/documentation/introduction.html): Observable "aboneleri değişiklikleri bildiren bir JavaScript nesne" dir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-270">From the [Knockout documentation](http://knockoutjs.com/documentation/introduction.html): An observable is a "JavaScript object that can notify subscribers about changes."</span></span> <span data-ttu-id="f26d9-271">Observable değerini değiştirdiğinde bu gözlemlenenler için ilişkili HTML öğelerinin Knockout güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-271">When the value of an observable changes, Knockout updates any HTML elements that are bound to those observables.</span></span> <span data-ttu-id="f26d9-272">Örneğin, Todoıtem gözlemlenenler başlık ve isDone özelliklerine sahiptir:</span><span class="sxs-lookup"><span data-stu-id="f26d9-272">For example, todoItem has observables for the title and isDone properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample5.js)]

<span data-ttu-id="f26d9-273">Observable kod için abone olabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="f26d9-273">You can also subscribe to an observable in code.</span></span> <span data-ttu-id="f26d9-274">Örneğin, "isDone" ve "title" özelliklerindeki değişiklikler Todoıtem sınıfı kaydeder:</span><span class="sxs-lookup"><span data-stu-id="f26d9-274">For example, the todoItem class subscribes to changes in the "isDone" and "title" properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample6.js)]

**<span data-ttu-id="f26d9-275">Görünüm modeli</span><span class="sxs-lookup"><span data-stu-id="f26d9-275">View Model</span></span>**

<span data-ttu-id="f26d9-276">Görünüm modeli todo.viewmodel.js içinde tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-276">The view model is defined in todo.viewmodel.js.</span></span> <span data-ttu-id="f26d9-277">Görünüm modeli, burada da HTML sayfası öğeleri uygulama etki alanı verilere bağlar merkezi noktasıdır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-277">The view model is the central point where the application binds the HTML page elements to the domain data.</span></span> <span data-ttu-id="f26d9-278">SPA şablonunda todoLists gözlemlenebilir bir dizi görünüm modeli içerir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-278">In the SPA template, the view model contains an observable array of todoLists.</span></span> <span data-ttu-id="f26d9-279">Görünüm modeli aşağıdaki kodda bağlamaları uygulamak için Knockout bildirir:</span><span class="sxs-lookup"><span data-stu-id="f26d9-279">The following code in the view model tells Knockout to apply the bindings:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample7.js)]

## <a name="html-and-data-binding"></a><span data-ttu-id="f26d9-280">HTML ve veri bağlama</span><span class="sxs-lookup"><span data-stu-id="f26d9-280">HTML and Data Binding</span></span>

<span data-ttu-id="f26d9-281">Ana HTML sayfası için Views/Home/Index.cshtml içinde tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-281">The main HTML for the page is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="f26d9-282">Veri bağlama de kullandığınızdan, HTML ne gerçekten işlenen için yalnızca bir şablonudur.</span><span class="sxs-lookup"><span data-stu-id="f26d9-282">Because we are using data-binding, the HTML is only a template for what actually gets rendered.</span></span> <span data-ttu-id="f26d9-283">Knockout kullanan *bildirim temelli* bağlar.</span><span class="sxs-lookup"><span data-stu-id="f26d9-283">Knockout uses *declarative* bindings.</span></span> <span data-ttu-id="f26d9-284">"Data-bind" özniteliği öğeye ekleyerek sayfa öğeleri verilere bağlayın.</span><span class="sxs-lookup"><span data-stu-id="f26d9-284">You bind page elements to data by adding a "data-bind" attribute to the element.</span></span> <span data-ttu-id="f26d9-285">Knockout belgelerinden geçen çok basit bir örneği aşağıda verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="f26d9-285">Here is a very simple example, taken from the Knockout documentation:</span></span>

[!code-html[Main](knockoutjs-template/samples/sample8.html)]

<span data-ttu-id="f26d9-286">Bu örnekte, Knockout içeriğini güncelleştirir **&lt;span&gt;** değerini öğeyle `myItems.count()`.</span><span class="sxs-lookup"><span data-stu-id="f26d9-286">In this example, Knockout updates the contents of the **&lt;span&gt;** element with the value of `myItems.count()`.</span></span> <span data-ttu-id="f26d9-287">Bu değer değiştiğinde Knockout belgeyi güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-287">Whenever this value changes, Knockout updates the document.</span></span>

<span data-ttu-id="f26d9-288">Knockout birkaç farklı bağlama türleri sağlar.</span><span class="sxs-lookup"><span data-stu-id="f26d9-288">Knockout provides a number of different binding types.</span></span> <span data-ttu-id="f26d9-289">SPA şablonunda kullanılan bağlamaları bazıları şunlardır:</span><span class="sxs-lookup"><span data-stu-id="f26d9-289">Here are some of the bindings used in the SPA template:</span></span>

- <span data-ttu-id="f26d9-290">**foreach**: Bir döngü yinelemek ve listedeki her öğeye aynı biçimlendirme uygulamak olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="f26d9-290">**foreach**: Lets you iterate through a loop and apply the same markup to each item in the list.</span></span> <span data-ttu-id="f26d9-291">Bu yapılacaklar listesi ve yapılacaklar öğelerini işlemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-291">This is used to render the to-do lists and to-do items.</span></span> <span data-ttu-id="f26d9-292">İçinde **foreach**, bağlamaları liste öğelerine uygulanır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-292">Within the **foreach**, the bindings are applied to the elements of the list.</span></span>
- <span data-ttu-id="f26d9-293">**görünür**: Görünürlüğü değiştirmek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-293">**visible**: Used to toggle visibility.</span></span> <span data-ttu-id="f26d9-294">Bir koleksiyon boş olduğunda biçimlendirme gizleyebilir veya hata iletisi görünür yapın.</span><span class="sxs-lookup"><span data-stu-id="f26d9-294">Hide markup when a collection is empty, or make the error message visible.</span></span>
- <span data-ttu-id="f26d9-295">**Değer**: Form değerleri doldurmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-295">**value**: Used to populate form values.</span></span>
- <span data-ttu-id="f26d9-296">**tıklayın**: Bir tıklama olayı bir işlev bir görünüm modeli bağlar.</span><span class="sxs-lookup"><span data-stu-id="f26d9-296">**click**: Binds a click event to a function on the view model.</span></span>

## <a name="anti-csrf-protection"></a><span data-ttu-id="f26d9-297">Anti-CSRF koruması</span><span class="sxs-lookup"><span data-stu-id="f26d9-297">Anti-CSRF Protection</span></span>

<span data-ttu-id="f26d9-298">Siteler arası istek sahteciliği (CSRF), burada bir kötü niyetli site burada kullanıcı şu anda oturum savunmasız sitesine bir istek gönderir bir saldırıdır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-298">Cross-Site Request Forgery (CSRF) is an attack where a malicious site sends a request to a vulnerable site where the user is currently logged in.</span></span> <span data-ttu-id="f26d9-299">CSRF saldırılarını önlemeye yardımcı olmak için ASP.NET MVC kullanan *sahteciliğe karşı koruma belirteçleri*, istek doğrulama belirteçleri olarak da bilinir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-299">To help prevent CSRF attacks, ASP.NET MVC uses *anti-forgery tokens*, also called request verification tokens.</span></span> <span data-ttu-id="f26d9-300">Sunucu web sayfasına rastgele oluşturulmuş bir belirteç geçirir olur.</span><span class="sxs-lookup"><span data-stu-id="f26d9-300">The idea is that the server puts a randomly generated token into a web page.</span></span> <span data-ttu-id="f26d9-301">İstemcinin sunucuya veri gönderdiğinde, bu değer istek iletisinde içermelidir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-301">When the client submits data to the server, it must include this value in the request message.</span></span>

<span data-ttu-id="f26d9-302">Sahteciliğe karşı koruma belirteçleri çalışır, çünkü kötü amaçlı sayfası aynı çıkış noktası ilkeleri nedeniyle kullanıcının belirteçleri okunamıyor.</span><span class="sxs-lookup"><span data-stu-id="f26d9-302">Anti-forgery tokens work because the malicious page cannot read the user's tokens, due to same-origin policies.</span></span> <span data-ttu-id="f26d9-303">(Aynı çıkış noktası ilkeler birbirlerinin içeriğe erişmesini iki farklı sitelerde barındırılan belge önler.)</span><span class="sxs-lookup"><span data-stu-id="f26d9-303">(Same-origin policies prevent documents hosted on two different sites from accessing each other's content.)</span></span>

<span data-ttu-id="f26d9-304">ASP.NET MVC ile sahteciliğe karşı koruma belirteçleri için yerleşik destek sağlar [AntiForgery](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx) sınıfı ve [[ValidateAntiForgeryToken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx) özniteliği.</span><span class="sxs-lookup"><span data-stu-id="f26d9-304">ASP.NET MVC provides built-in support for anti-forgery tokens, through the [AntiForgery](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx) class and the [[ValidateAntiForgeryToken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx) attribute.</span></span> <span data-ttu-id="f26d9-305">Şu anda bu işlevselliği'den sonra Web API oluşturulmadı.</span><span class="sxs-lookup"><span data-stu-id="f26d9-305">Currently, this functionality is not built into Web API.</span></span> <span data-ttu-id="f26d9-306">Ancak SPA şablonu, Web API'si için özel bir uygulamasını içerir.</span><span class="sxs-lookup"><span data-stu-id="f26d9-306">However, the SPA template includes a custom implementation for Web API.</span></span> <span data-ttu-id="f26d9-307">Bu kod tanımlanan `ValidateHttpAntiForgeryTokenAttribute` çözümün filtreleri klasöründe bulunan sınıfı.</span><span class="sxs-lookup"><span data-stu-id="f26d9-307">This code is defined in the `ValidateHttpAntiForgeryTokenAttribute` class, which is located in the Filters folder of the solution.</span></span> <span data-ttu-id="f26d9-308">Anti-CSRF Web API hakkında daha fazla bilgi için bkz: [önleme siteler arası istek sahteciliği (CSRF) saldırılarını](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span><span class="sxs-lookup"><span data-stu-id="f26d9-308">To learn more about anti-CSRF in Web API, see [Preventing Cross-Site Request Forgery (CSRF) Attacks](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="f26d9-309">Sonuç</span><span class="sxs-lookup"><span data-stu-id="f26d9-309">Conclusion</span></span>

<span data-ttu-id="f26d9-310">SPA şablonu, hızlı bir şekilde modern, etkileşimli web uygulamaları yazmaya başlamanıza yardımcı olmak üzere tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-310">The SPA template is designed to get you started quickly writing modern, interactive web applications.</span></span> <span data-ttu-id="f26d9-311">Knockout.js kitaplığı, veri ve uygulama mantığı (HTML biçimlendirmeyi) sunudan ayırmak için kullanır.</span><span class="sxs-lookup"><span data-stu-id="f26d9-311">It uses the Knockout.js library to separate presentation (HTML markup) from the data and application logic.</span></span> <span data-ttu-id="f26d9-312">Ancak, Knockout bir SPA oluşturmak için kullanabileceğiniz tek bir JavaScript kitaplığı değil.</span><span class="sxs-lookup"><span data-stu-id="f26d9-312">But Knockout is not the only JavaScript library you can use to create a SPA.</span></span> <span data-ttu-id="f26d9-313">Diğer bir seçenek keşfetmek istiyorsanız, bir göz atın [topluluk tarafından oluşturulan SPA şablonlarını](../templates/index.md).</span><span class="sxs-lookup"><span data-stu-id="f26d9-313">If you want to explore some other options, take a look at the [community-created SPA templates](../templates/index.md).</span></span>
