---
uid: single-page-application/overview/introduction/knockoutjs-template
title: 'Tek sayfalı uygulama: altını gizleme Koutjs şablonu | Microsoft Docs'
author: MikeWasson
description: Altını gizleme şablonu
ms.author: riande
ms.date: 01/30/2013
ms.assetid: f9c07af0-4b20-4b08-af8f-47fc3df169a2
msc.legacyurl: /single-page-application/overview/introduction/knockoutjs-template
msc.type: authoredcontent
ms.openlocfilehash: 3a551db1caa9636eb7f2e04c287d3ef371263584
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78578696"
---
# <a name="single-page-application-knockoutjs-template"></a><span data-ttu-id="6962d-103">Tek Sayfalı Uygulama: KnockoutJS şablonu</span><span class="sxs-lookup"><span data-stu-id="6962d-103">Single Page Application: KnockoutJS template</span></span>

<span data-ttu-id="6962d-104">, [Mike te son](https://github.com/MikeWasson)</span><span class="sxs-lookup"><span data-stu-id="6962d-104">by [Mike Wasson](https://github.com/MikeWasson)</span></span>

> <span data-ttu-id="6962d-105">Altını gizleme MVC şablonu, ASP.NET and Web Tools 2012,2 parçasıdır</span><span class="sxs-lookup"><span data-stu-id="6962d-105">The Knockout MVC Template is part of ASP.NET and Web Tools 2012.2</span></span>
> 
> [<span data-ttu-id="6962d-106">2012,2 ASP.NET and Web Tools indirin</span><span class="sxs-lookup"><span data-stu-id="6962d-106">Download ASP.NET and Web Tools 2012.2</span></span>](https://go.microsoft.com/fwlink/?LinkId=282650)

<span data-ttu-id="6962d-107">ASP.NET and Web Tools 2012,2 güncelleştirmesi, ASP.NET MVC 4 için tek sayfalı uygulama (SPA) şablonu içerir.</span><span class="sxs-lookup"><span data-stu-id="6962d-107">The ASP.NET and Web Tools 2012.2 update includes a Single-Page Application (SPA) template for ASP.NET MVC 4.</span></span> <span data-ttu-id="6962d-108">Bu şablon, etkileşimli istemci tarafı Web uygulamalarını hızlıca oluşturmaya başlamanızı sağlamak için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="6962d-108">This template is designed to get you started quickly building interactive client-side web apps.</span></span>

<span data-ttu-id="6962d-109">"Tek sayfalı uygulama" (SPA), tek bir HTML sayfası yükleyen bir Web uygulaması için genel bir terimdir ve sonra yeni sayfalar yüklemek yerine sayfayı dinamik olarak güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="6962d-109">"Single-page application" (SPA) is the general term for a web application that loads a single HTML page and then updates the page dynamically, instead of loading new pages.</span></span> <span data-ttu-id="6962d-110">İlk sayfa yüklendikten sonra, SPA, AJAX istekleri aracılığıyla sunucuyla iletişim kuran bir iletişim yükler.</span><span class="sxs-lookup"><span data-stu-id="6962d-110">After the initial page load, the SPA talks with the server through AJAX requests.</span></span>

![](knockoutjs-template/_static/image1.png)

<span data-ttu-id="6962d-111">AJAX yeni bir şey değildir, ancak bugün büyük bir Gelişmiş SPA uygulaması oluşturmayı ve bakımını kolaylaştıran JavaScript çerçeveleri vardır.</span><span class="sxs-lookup"><span data-stu-id="6962d-111">AJAX is nothing new, but today there are JavaScript frameworks that make it easier to build and maintain a large sophisticated SPA application.</span></span> <span data-ttu-id="6962d-112">Ayrıca, HTML 5 ve CSS3 zengin Usıs oluşturmayı kolaylaştırır.</span><span class="sxs-lookup"><span data-stu-id="6962d-112">Also, HTML 5 and CSS3 are making it easier to create rich UIs.</span></span>

<span data-ttu-id="6962d-113">Bu işlemi kullanmaya başlamak için, SPA şablonu örnek bir "yapılacaklar listesi" uygulaması oluşturur.</span><span class="sxs-lookup"><span data-stu-id="6962d-113">To get you started, the SPA template creates a sample "To-do list" application.</span></span> <span data-ttu-id="6962d-114">Bu öğreticide, şablona yönelik kılavuzlu bir tura çıkacağız.</span><span class="sxs-lookup"><span data-stu-id="6962d-114">In this tutorial, we'll take a guided tour of the template.</span></span> <span data-ttu-id="6962d-115">İlk olarak yapılacaklar listesi uygulamasının kendisine bakacağız ve sonra çalışmasını sağlayan teknoloji parçalarını incelemektir.</span><span class="sxs-lookup"><span data-stu-id="6962d-115">First we'll look at the To-do list application itself, then examine the technology pieces that make it work.</span></span>

## <a name="create-a-new-spa-template-project"></a><span data-ttu-id="6962d-116">Yeni bir SPA şablonu projesi oluştur</span><span class="sxs-lookup"><span data-stu-id="6962d-116">Create a New SPA Template Project</span></span>

<span data-ttu-id="6962d-117">Gereksinimler:</span><span class="sxs-lookup"><span data-stu-id="6962d-117">Requirements:</span></span>

- <span data-ttu-id="6962d-118">Web için Visual Studio 2012 veya Visual Studio Express 2012</span><span class="sxs-lookup"><span data-stu-id="6962d-118">Visual Studio 2012 or Visual Studio Express 2012 for Web</span></span>
- <span data-ttu-id="6962d-119">ASP.NET Web araçları 2012,2 güncelleştirmesi.</span><span class="sxs-lookup"><span data-stu-id="6962d-119">ASP.NET Web Tools 2012.2 update.</span></span> <span data-ttu-id="6962d-120">Güncelleştirmeyi [buraya](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2)yükleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6962d-120">You can install the update [here](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2).</span></span>

<span data-ttu-id="6962d-121">Visual Studio 'Yu başlatın ve başlangıç sayfasından **Yeni proje** ' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="6962d-121">Start Visual Studio and select **New Project** from the Start page.</span></span> <span data-ttu-id="6962d-122">Ya da **Dosya** menüsünde **Yeni** ' yi ve ardından **Proje**' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="6962d-122">Or, from the **File** menu, select **New** and then **Project**.</span></span>

<span data-ttu-id="6962d-123">**Şablonlar** bölmesinde, **yüklü şablonlar** ' ı seçin ve **görsel C#**  düğümünü genişletin.</span><span class="sxs-lookup"><span data-stu-id="6962d-123">In the **Templates** pane, select **Installed Templates** and expand the **Visual C#** node.</span></span> <span data-ttu-id="6962d-124">**Görsel C#** bölümünde **Web**' i seçin.</span><span class="sxs-lookup"><span data-stu-id="6962d-124">Under **Visual C#**, select **Web**.</span></span> <span data-ttu-id="6962d-125">Proje şablonları listesinde **ASP.NET MVC 4 Web uygulaması**' nı seçin.</span><span class="sxs-lookup"><span data-stu-id="6962d-125">In the list of project templates, select **ASP.NET MVC 4 Web Application**.</span></span> <span data-ttu-id="6962d-126">Projeyi adlandırın ve **Tamam**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="6962d-126">Name the project and click **OK**.</span></span>

![](knockoutjs-template/_static/image2.png)

<span data-ttu-id="6962d-127">**Yeni proje** sihirbazında **tek sayfalı uygulama**' yı seçin.</span><span class="sxs-lookup"><span data-stu-id="6962d-127">In the **New Project** wizard, select **Single Page Application**.</span></span>

![](knockoutjs-template/_static/image3.png)

<span data-ttu-id="6962d-128">Uygulamayı derleyip çalıştırmak için F5'e basın.</span><span class="sxs-lookup"><span data-stu-id="6962d-128">Press F5 to build and run the application.</span></span> <span data-ttu-id="6962d-129">Uygulama ilk kez çalıştırıldığında, oturum açma ekranını görüntüler.</span><span class="sxs-lookup"><span data-stu-id="6962d-129">When the application first runs, it displays a login screen.</span></span>

![](knockoutjs-template/_static/image4.png)

<span data-ttu-id="6962d-130">&quot;&quot; bağlantısı ' na tıklayın ve yeni bir kullanıcı oluşturun.</span><span class="sxs-lookup"><span data-stu-id="6962d-130">Click the &quot;Sign up&quot; link and create a new user.</span></span>

![](knockoutjs-template/_static/image5.png)

<span data-ttu-id="6962d-131">Oturum açtıktan sonra, uygulama iki öğe ile varsayılan bir yapılacaklar listesi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="6962d-131">After you log in, the application creates a default Todo list with two items.</span></span> <span data-ttu-id="6962d-132">Yeni bir liste eklemek için "yapılacaklar listesi ekle" seçeneğine tıklayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6962d-132">You can click "Add Todo list" to add a new list.</span></span>

![](knockoutjs-template/_static/image6.png)

<span data-ttu-id="6962d-133">Listeyi yeniden adlandırın, listeye öğe ekleyin ve bunları kapatın.</span><span class="sxs-lookup"><span data-stu-id="6962d-133">Rename the list, add items to the list, and check them off.</span></span> <span data-ttu-id="6962d-134">Ayrıca, öğeleri silebilir veya bir listenin tamamını silebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6962d-134">You can also delete items or delete an entire list.</span></span> <span data-ttu-id="6962d-135">Değişiklikler, uygulamayı yerel olarak çalıştırdığınız için sunucudaki bir veritabanında otomatik olarak kalıcı hale getirilir (Bu noktada aslında Yereldb).</span><span class="sxs-lookup"><span data-stu-id="6962d-135">The changes are automatically persisted to a database on the server (actually LocalDB at this point, because you are running the application locally).</span></span>

![](knockoutjs-template/_static/image7.png)

## <a name="architecture-of-the-spa-template"></a><span data-ttu-id="6962d-136">SPA şablonunun mimarisi</span><span class="sxs-lookup"><span data-stu-id="6962d-136">Architecture of the SPA Template</span></span>

<span data-ttu-id="6962d-137">Bu diyagramda uygulamanın ana yapı taşları gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="6962d-137">This diagram shows the main building blocks for the application.</span></span>

![](knockoutjs-template/_static/image8.png)

<span data-ttu-id="6962d-138">Sunucu tarafında, ASP.NET MVC HTML 'yi sunar ve ayrıca form tabanlı kimlik doğrulamasını da işler.</span><span class="sxs-lookup"><span data-stu-id="6962d-138">On the server side, ASP.NET MVC serves the HTML and also handles forms-based authentication.</span></span>

<span data-ttu-id="6962d-139">ASP.NET Web API 'SI, ToDoLists ve Todoıtems ile ilgili tüm istekleri (alma, oluşturma, güncelleştirme ve silme dahil) işler.</span><span class="sxs-lookup"><span data-stu-id="6962d-139">ASP.NET Web API handles all requests that relate to the ToDoLists and ToDoItems, including getting, creating, updating and deleting.</span></span> <span data-ttu-id="6962d-140">İstemci verileri JSON biçiminde Web API 'SI ile değiş tokuş eder.</span><span class="sxs-lookup"><span data-stu-id="6962d-140">The client exchanges data with Web API in JSON format.</span></span>

<span data-ttu-id="6962d-141">Entity Framework (EF), O/RM katmanıdır.</span><span class="sxs-lookup"><span data-stu-id="6962d-141">Entity Framework (EF) is the O/RM layer.</span></span> <span data-ttu-id="6962d-142">ASP.NET 'ın nesne odaklı dünyası ve temel alınan veritabanı arasında ortalaştırır.</span><span class="sxs-lookup"><span data-stu-id="6962d-142">It mediates between the object-oriented world of ASP.NET and the underlying database.</span></span> <span data-ttu-id="6962d-143">Veritabanı LocalDB kullanır, ancak bunu Web. config dosyasında değiştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6962d-143">The database uses LocalDB but you can change this in the Web.config file.</span></span> <span data-ttu-id="6962d-144">Genellikle Yereldb 'yi yerel geliştirme için kullanacaksınız ve sonra EF Code-First geçişini kullanarak sunucuda bir SQL veritabanına dağıtmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="6962d-144">Typically you would use LocalDB for local development and then deploy to a SQL database on the server, using EF code-first migration.</span></span>

<span data-ttu-id="6962d-145">İstemci tarafında, altını gizleme. js kitaplığı, AJAX isteklerindeki sayfa güncelleştirmelerini işler.</span><span class="sxs-lookup"><span data-stu-id="6962d-145">On the client side, the Knockout.js library handles page updates from AJAX requests.</span></span> <span data-ttu-id="6962d-146">Altını gizleme sayfayı en son verilerle eşleştirmek için veri bağlamayı kullanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-146">Knockout uses data binding to synchronize the page with the latest data.</span></span> <span data-ttu-id="6962d-147">Bu şekilde, JSON verilerinde izlenecek ve DOM güncelleştiren koddan herhangi birini yazmanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="6962d-147">That way, you don't have to write any of the code that walks through the JSON data and updates the DOM.</span></span> <span data-ttu-id="6962d-148">Bunun yerine, bildirime dayalı öznitelikleri, verileri nasıl sunacaklarını belirten HTML 'ye yerleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6962d-148">Instead, you put declarative attributes in the HTML that tell Knockout how to present the data.</span></span>

<span data-ttu-id="6962d-149">Bu mimarinin büyük bir avantajı, sunu katmanını uygulama mantığından ayırmadır.</span><span class="sxs-lookup"><span data-stu-id="6962d-149">A big advantage of this architecture is that it separates the presentation layer from the application logic.</span></span> <span data-ttu-id="6962d-150">Web sayfanızın nasıl görüneceğine ilişkin hiçbir şey bilmeden Web API bölümünü oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6962d-150">You can create the Web API portion without knowing anything about how your web page will look.</span></span> <span data-ttu-id="6962d-151">İstemci tarafında, bu verileri temsil etmek için bir "model görüntüle" oluşturursunuz ve görünüm modeli HTML 'e bağlamak için altını gizleme kullanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-151">On the client side, you create a "view model" to represent that data, and the view model uses Knockout to bind to the HTML.</span></span> <span data-ttu-id="6962d-152">Bu, görünüm modelini değiştirmeden HTML 'yi kolayca değiştirmenize olanak sağlar.</span><span class="sxs-lookup"><span data-stu-id="6962d-152">That lets you easily change the HTML without changing the view model.</span></span> <span data-ttu-id="6962d-153">(Daha sonra bir bit altını gizleme bölümüne bakacağız.)</span><span class="sxs-lookup"><span data-stu-id="6962d-153">(We'll look at Knockout a bit later.)</span></span>

## <a name="models"></a><span data-ttu-id="6962d-154">Modeller</span><span class="sxs-lookup"><span data-stu-id="6962d-154">Models</span></span>

<span data-ttu-id="6962d-155">Visual Studio projesinde modeller klasörü, sunucu tarafında kullanılan modelleri içerir.</span><span class="sxs-lookup"><span data-stu-id="6962d-155">In the Visual Studio project, the Models folder contains the models that are used on the server side.</span></span> <span data-ttu-id="6962d-156">(Ayrıca, istemci tarafında modeller de vardır; bunlar için de bir alan olacaktır.)</span><span class="sxs-lookup"><span data-stu-id="6962d-156">(There are also models on the client side; we'll get to those.)</span></span>

![](knockoutjs-template/_static/image9.png)

<span data-ttu-id="6962d-157">**TodoItem, TodoList**</span><span class="sxs-lookup"><span data-stu-id="6962d-157">**TodoItem, TodoList**</span></span>

<span data-ttu-id="6962d-158">Bunlar, Entity Framework Code First için veritabanı modelleridir.</span><span class="sxs-lookup"><span data-stu-id="6962d-158">These are the database models for Entity Framework Code First.</span></span> <span data-ttu-id="6962d-159">Bu modellerin birbirini işaret eden özellikleri olduğunu unutmayın.</span><span class="sxs-lookup"><span data-stu-id="6962d-159">Notice that these models have properties that point to each other.</span></span> <span data-ttu-id="6962d-160">`ToDoList` bir Todoıtems koleksiyonu içerir ve her `ToDoItem` üst ToDoList geri başvurusu vardır.</span><span class="sxs-lookup"><span data-stu-id="6962d-160">`ToDoList` contains a collection of ToDoItems, and each `ToDoItem` has a reference back to its parent ToDoList.</span></span> <span data-ttu-id="6962d-161">Bu özelliklere, gezinti özellikleri adı verilir ve tek-çok ilişkisini ve yapılacaklar listesini ve yapılacaklar öğelerini temsil eder.</span><span class="sxs-lookup"><span data-stu-id="6962d-161">These properties are called navigation properties, and they represent the one-to-many relation a to-do list and its to-do items.</span></span>

<span data-ttu-id="6962d-162">`ToDoItem` sınıfı, `ToDoListId` `ToDoList` tabloya yabancı anahtar olduğunu belirtmek için **[Yabancıkey]** özniteliğini de kullanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-162">The `ToDoItem` class also uses the **[ForeignKey]** attribute to specify that `ToDoListId` is a foreign key into the `ToDoList` table.</span></span> <span data-ttu-id="6962d-163">Bu, veritabanına yabancı anahtar kısıtlaması ekleneceğini söyler.</span><span class="sxs-lookup"><span data-stu-id="6962d-163">This tells EF to add a foreign-key constraint to the database.</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample1.cs)]

<span data-ttu-id="6962d-164">**TodoItemDto, TodoListDto**</span><span class="sxs-lookup"><span data-stu-id="6962d-164">**TodoItemDto, TodoListDto**</span></span>

<span data-ttu-id="6962d-165">Bu sınıflar istemciye gönderilecek verileri tanımlar.</span><span class="sxs-lookup"><span data-stu-id="6962d-165">These classes define the data that will be sent to the client.</span></span> <span data-ttu-id="6962d-166">"DTO", "veri aktarımı nesnesi" anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="6962d-166">"DTO" stands for "data transfer object."</span></span> <span data-ttu-id="6962d-167">CTO, varlıkların JSON olarak nasıl serileştirilme şeklini tanımlar.</span><span class="sxs-lookup"><span data-stu-id="6962d-167">The DTO defines how the entities will be serialized into JSON.</span></span> <span data-ttu-id="6962d-168">Genel olarak, DTOs kullanmanın birkaç nedeni vardır:</span><span class="sxs-lookup"><span data-stu-id="6962d-168">In general, there are several reasons to use DTOs:</span></span>

- <span data-ttu-id="6962d-169">Hangi özelliklerin serileştirildiği denetlemek için.</span><span class="sxs-lookup"><span data-stu-id="6962d-169">To control which properties are serialized.</span></span> <span data-ttu-id="6962d-170">DTO, etki alanı modelinden özelliklerin bir alt kümesini içerebilir.</span><span class="sxs-lookup"><span data-stu-id="6962d-170">The DTO can contain a subset of the properties from the domain model.</span></span> <span data-ttu-id="6962d-171">Bunu güvenlik nedenleriyle (hassas verileri gizlemek için) veya yalnızca göndereceğiniz veri miktarını azaltmak için yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6962d-171">You might do this for security reasons (to hide sensitive data) or simply to reduce the amount of data that you send.</span></span>
- <span data-ttu-id="6962d-172">Verilerin şeklini değiştirmek için: Örneğin, daha karmaşık bir veri yapısını düzleştirmek için.</span><span class="sxs-lookup"><span data-stu-id="6962d-172">To change the shape of the data – e.g. to flatten a more complex data structure.</span></span>
- <span data-ttu-id="6962d-173">Herhangi bir iş mantığını DTO dışında tutmak için (kaygıları ayrımı).</span><span class="sxs-lookup"><span data-stu-id="6962d-173">To keep any business logic out of the DTO (separation of concerns).</span></span>
- <span data-ttu-id="6962d-174">Etki alanı modelleriniz bazı nedenlerle serileştirilemiyor.</span><span class="sxs-lookup"><span data-stu-id="6962d-174">If your domain models cannot be serialized for some reason.</span></span> <span data-ttu-id="6962d-175">Örneğin, bir nesneyi seri hale getirmek istediğinizde döngüsel başvurular soruna neden olabilir (bkz. [Döngüsel nesne başvurularını işleme](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); Ancak, bir DFOR kullanarak sorunu tamamen önler.</span><span class="sxs-lookup"><span data-stu-id="6962d-175">For example, circular references can cause problems when you serialize an object There are ways to handle this problem in Web API (see [Handling Circular Object References](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); but using a DTO simply avoids the problem altogether.</span></span>

<span data-ttu-id="6962d-176">SPA şablonunda DTOs, etki alanı modelleriyle aynı verileri içerir.</span><span class="sxs-lookup"><span data-stu-id="6962d-176">In the SPA template, the DTOs contains the same data as the domain models.</span></span> <span data-ttu-id="6962d-177">Ancak, gezinti özelliklerinden döngüsel başvuruları önlemediği ve genel DTO düzenlerini gösterdikleri için bunlar hala yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="6962d-177">However, they are still useful because they avoid circular references from the navigation properties, and they demonstrate the general DTO pattern.</span></span>

<span data-ttu-id="6962d-178">**AccountModels.cs**</span><span class="sxs-lookup"><span data-stu-id="6962d-178">**AccountModels.cs**</span></span>

<span data-ttu-id="6962d-179">Bu dosya, site üyeliği için modeller içerir.</span><span class="sxs-lookup"><span data-stu-id="6962d-179">This file contains models for site membership.</span></span> <span data-ttu-id="6962d-180">`UserProfile` sınıfı, üyelik VERITABANıNDAKI Kullanıcı profillerinin şemasını tanımlar.</span><span class="sxs-lookup"><span data-stu-id="6962d-180">The `UserProfile` class defines the schema for user profiles in the membership DB.</span></span> <span data-ttu-id="6962d-181">(Bu durumda, tek bilgi Kullanıcı KIMLIĞI ve kullanıcı adıdır.) Bu dosyadaki diğer model sınıfları, Kullanıcı kaydı ve oturum açma formları oluşturmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="6962d-181">(In this case, the only information is the user ID and the user name.) The other model classes in this file are used to create the user registration and login forms.</span></span>

## <a name="entity-framework"></a><span data-ttu-id="6962d-182">Varlık Çerçevesi</span><span class="sxs-lookup"><span data-stu-id="6962d-182">Entity Framework</span></span>

<span data-ttu-id="6962d-183">SPA şablonu EF Code First kullanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-183">The SPA template uses EF Code First.</span></span> <span data-ttu-id="6962d-184">Code First geliştirmek için, önce kod içinde modelleri tanımlar, sonra EF veritabanını oluşturmak için modeli kullanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-184">In Code First development, you define the models first in code, and then EF uses the model to create the database.</span></span> <span data-ttu-id="6962d-185">Aynı zamanda var olan bir veritabanı ([Database First](https://msdn.microsoft.com/data/jj206878.aspx)) ile EF de kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6962d-185">You can also use EF with an existing database ([Database First](https://msdn.microsoft.com/data/jj206878.aspx)).</span></span>

<span data-ttu-id="6962d-186">Modeller klasöründeki `TodoItemContext` sınıfı **DbContext**'ten türetiliyor.</span><span class="sxs-lookup"><span data-stu-id="6962d-186">The `TodoItemContext` class in the Models folder derives from **DbContext**.</span></span> <span data-ttu-id="6962d-187">Bu sınıf modeller ve EF arasında "tutkalla" sağlar.</span><span class="sxs-lookup"><span data-stu-id="6962d-187">This class provides the "glue" between the models and EF.</span></span> <span data-ttu-id="6962d-188">`TodoItemContext`, bir `ToDoItem` koleksiyonu ve bir `TodoList` koleksiyonu barındırır.</span><span class="sxs-lookup"><span data-stu-id="6962d-188">The `TodoItemContext` holds a `ToDoItem` collection and a `TodoList` collection.</span></span> <span data-ttu-id="6962d-189">Veritabanını sorgulamak için, bu koleksiyonlara yönelik bir LINQ sorgusu yazmanız yeterlidir.</span><span class="sxs-lookup"><span data-stu-id="6962d-189">To query the database, you simply write a LINQ query against these collections.</span></span> <span data-ttu-id="6962d-190">Örneğin, "Gamze" kullanıcısı için tüm yapılacaklar listelerini nasıl seçebileceğiniz aşağıda verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="6962d-190">For example, here is how you can select all of the to-do lists for user "Alice":</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample2.cs)]

<span data-ttu-id="6962d-191">Ayrıca, koleksiyona yeni öğeler ekleyebilir, öğeleri güncelleştirebilir veya öğeleri koleksiyondan silebilir ve değişiklikleri veritabanında kalıcı hale getirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6962d-191">You can also add new items to the collection, update items, or delete items from the collection, and persist the changes to the database.</span></span>

## <a name="aspnet-web-api-controllers"></a><span data-ttu-id="6962d-192">ASP.NET Web API 'SI denetleyicileri</span><span class="sxs-lookup"><span data-stu-id="6962d-192">ASP.NET Web API Controllers</span></span>

<span data-ttu-id="6962d-193">ASP.NET Web API 'sinde, denetleyiciler HTTP isteklerini işleyen nesnelerdir.</span><span class="sxs-lookup"><span data-stu-id="6962d-193">In ASP.NET Web API, controllers are objects that handle HTTP requests.</span></span> <span data-ttu-id="6962d-194">Belirtildiği gibi, SPA şablonu, `ToDoList` ve `ToDoItem` örneklerine CRUD işlemlerini etkinleştirmek için Web API kullanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-194">As mentioned, the SPA template uses Web API to enable CRUD operations on `ToDoList` and `ToDoItem` instances.</span></span> <span data-ttu-id="6962d-195">Denetleyiciler, çözümün denetleyiciler klasöründe bulunur.</span><span class="sxs-lookup"><span data-stu-id="6962d-195">The controllers are located in the Controllers folder of the solution.</span></span>

![](knockoutjs-template/_static/image10.png)

- <span data-ttu-id="6962d-196">`TodoController`: Yapılacaklar öğeleri için HTTP isteklerini Işler</span><span class="sxs-lookup"><span data-stu-id="6962d-196">`TodoController`: Handles HTTP requests for to-do items</span></span>
- <span data-ttu-id="6962d-197">`TodoListController`: Yapılacaklar listeleri için HTTP isteklerini Işler.</span><span class="sxs-lookup"><span data-stu-id="6962d-197">`TodoListController`: Handles HTTP requests for to-do lists.</span></span>

<span data-ttu-id="6962d-198">Web API 'SI, denetleyici adı URI yoluyla eşleştiğinden, bu adlar önemlidir.</span><span class="sxs-lookup"><span data-stu-id="6962d-198">These names are significant, because Web API matches the URI path to the controller name.</span></span> <span data-ttu-id="6962d-199">(Web API 'sinin denetleyicilere HTTP isteklerini nasıl yönlendirdiğini öğrenmek için bkz. [ASP.NET Web API 'de yönlendirme](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span><span class="sxs-lookup"><span data-stu-id="6962d-199">(To learn how Web API routes HTTP requests to controllers, see [Routing in ASP.NET Web API](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span></span>

<span data-ttu-id="6962d-200">`ToDoListController` sınıfına bakalım.</span><span class="sxs-lookup"><span data-stu-id="6962d-200">Let's look at the `ToDoListController` class.</span></span> <span data-ttu-id="6962d-201">Tek bir veri üyesi içerir:</span><span class="sxs-lookup"><span data-stu-id="6962d-201">It contains a single data member:</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample3.cs)]

<span data-ttu-id="6962d-202">`TodoItemContext`, daha önce açıklandığı gibi EF ile iletişim kurmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="6962d-202">The `TodoItemContext` is used to communicate with EF, as described earlier.</span></span> <span data-ttu-id="6962d-203">Denetleyicideki Yöntemler CRUD işlemlerini uygular.</span><span class="sxs-lookup"><span data-stu-id="6962d-203">The methods on the controller implement the CRUD operations.</span></span> <span data-ttu-id="6962d-204">Web API 'SI, istemciden denetleyici yöntemlerine HTTP isteklerini aşağıdaki gibi eşleştirir:</span><span class="sxs-lookup"><span data-stu-id="6962d-204">Web API maps HTTP requests from the client to controller methods, as follows:</span></span>

| <span data-ttu-id="6962d-205">HTTP Isteği</span><span class="sxs-lookup"><span data-stu-id="6962d-205">HTTP Request</span></span> | <span data-ttu-id="6962d-206">Controller yöntemi</span><span class="sxs-lookup"><span data-stu-id="6962d-206">Controller Method</span></span> | <span data-ttu-id="6962d-207">Açıklama</span><span class="sxs-lookup"><span data-stu-id="6962d-207">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="6962d-208">/Api/TODO Al</span><span class="sxs-lookup"><span data-stu-id="6962d-208">GET /api/todo</span></span> | `GetTodoLists` | <span data-ttu-id="6962d-209">Yapılacaklar listelerinin koleksiyonunu alır.</span><span class="sxs-lookup"><span data-stu-id="6962d-209">Gets a collection of to-do lists.</span></span> |
| <span data-ttu-id="6962d-210">/Api/Todo/*KIMLIĞI* al</span><span class="sxs-lookup"><span data-stu-id="6962d-210">GET /api/todo/*id*</span></span> | `GetTodoList` | <span data-ttu-id="6962d-211">KIMLIĞE göre yapılacaklar listesini alır</span><span class="sxs-lookup"><span data-stu-id="6962d-211">Gets a to-do list by ID</span></span> |
| <span data-ttu-id="6962d-212">/Api/Todo/*ID* koy</span><span class="sxs-lookup"><span data-stu-id="6962d-212">PUT /api/todo/*id*</span></span> | `PutTodoList` | <span data-ttu-id="6962d-213">Yapılacaklar listesini güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="6962d-213">Updates a to-do list.</span></span> |
| <span data-ttu-id="6962d-214">Todo/api/gönderin</span><span class="sxs-lookup"><span data-stu-id="6962d-214">POST /api/todo</span></span> | `PostTodoList` | <span data-ttu-id="6962d-215">Yeni bir yapılacaklar listesi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="6962d-215">Creates a new to-do list.</span></span> |
| <span data-ttu-id="6962d-216">/Api/Todo/*KIMLIĞINI* Sil</span><span class="sxs-lookup"><span data-stu-id="6962d-216">DELETE /api/todo/*id*</span></span> | `DeleteTodoList` | <span data-ttu-id="6962d-217">YAPıLACAKLAR listesini siler.</span><span class="sxs-lookup"><span data-stu-id="6962d-217">Deletes a TODO list.</span></span> |

<span data-ttu-id="6962d-218">Bazı işlemler için URI 'Lerin ID değeri için yer tutucular içerdiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="6962d-218">Notice that the URIs for some operations contain placeholders for the ID value.</span></span> <span data-ttu-id="6962d-219">Örneğin, KIMLIĞI 42 olan bir yapılacaklar listesini silmek için URI `/api/todo/42`.</span><span class="sxs-lookup"><span data-stu-id="6962d-219">For example, to delete a to-list with an ID of 42, the URI is `/api/todo/42`.</span></span>

<span data-ttu-id="6962d-220">CRUD işlemleri için Web API kullanma hakkında daha fazla bilgi edinmek için bkz. [CRUD Işlemlerini destekleyen bir Web API 'Si oluşturma](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span><span class="sxs-lookup"><span data-stu-id="6962d-220">To learn more about using Web API for CRUD operations, see [Creating a Web API that Supports CRUD Operations](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span></span> <span data-ttu-id="6962d-221">Bu denetleyicinin kodu oldukça basittir.</span><span class="sxs-lookup"><span data-stu-id="6962d-221">The code for this controller is fairly straightforward.</span></span> <span data-ttu-id="6962d-222">İşte bazı ilginç noktaları:</span><span class="sxs-lookup"><span data-stu-id="6962d-222">Here are some interesting points:</span></span>

- <span data-ttu-id="6962d-223">`GetTodoLists` yöntemi, oturum açmış kullanıcının KIMLIĞINE göre sonuçları filtrelemek için bir LINQ sorgusu kullanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-223">The `GetTodoLists` method uses a LINQ query to filter the results by the ID of the logged-in user.</span></span> <span data-ttu-id="6962d-224">Bu şekilde, bir Kullanıcı yalnızca kendisine ait olan verileri görür.</span><span class="sxs-lookup"><span data-stu-id="6962d-224">That way, a user only sees the data that belongs to him or her.</span></span> <span data-ttu-id="6962d-225">Ayrıca, `ToDoList` örneklerini `TodoListDto` örneklerine dönüştürmek için SELECT ifadesinin kullanıldığına dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="6962d-225">Also, notice that a Select statement is used to convert the `ToDoList` instances into `TodoListDto` instances.</span></span>
- <span data-ttu-id="6962d-226">PUT ve POST yöntemleri, veritabanını değiştirmeden önce model durumunu denetler.</span><span class="sxs-lookup"><span data-stu-id="6962d-226">The PUT and POST methods check the model state before modifying the database.</span></span> <span data-ttu-id="6962d-227">**ModelState. IsValid** yanlış ise, bu yöntemler HTTP 400, hatalı istek döndürür.</span><span class="sxs-lookup"><span data-stu-id="6962d-227">If **ModelState.IsValid** is false, these methods return HTTP 400, Bad Request.</span></span> <span data-ttu-id="6962d-228">[Model doğrulamasında](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md)Web API 'sinde model doğrulama hakkında daha fazla bilgi edinin.</span><span class="sxs-lookup"><span data-stu-id="6962d-228">Read more about model validation in Web API at [Model Validation](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span></span>
- <span data-ttu-id="6962d-229">Denetleyici sınıfı, **[Yetkilendir]** özniteliğiyle de donatılmış.</span><span class="sxs-lookup"><span data-stu-id="6962d-229">The controller class is also decorated with the **[Authorize]** attribute.</span></span> <span data-ttu-id="6962d-230">Bu öznitelik, HTTP isteğinin kimlik doğrulamasının yapılıp yapılmayacağını denetler.</span><span class="sxs-lookup"><span data-stu-id="6962d-230">This attribute checks whether the HTTP request is authenticated.</span></span> <span data-ttu-id="6962d-231">İsteğin kimliği doğrulanmıyorsa, istemci HTTP 401, yetkisiz olarak alır.</span><span class="sxs-lookup"><span data-stu-id="6962d-231">If the request is not authenticated, the client receives HTTP 401, Unauthorized.</span></span> <span data-ttu-id="6962d-232">[ASP.NET Web API 'Sinde kimlik doğrulaması ve yetkilendirme](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md)hakkında daha fazla bilgi edinin.</span><span class="sxs-lookup"><span data-stu-id="6962d-232">Read more about authentication at [Authentication and Authorization in ASP.NET Web API](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span></span>

<span data-ttu-id="6962d-233">`TodoController` sınıfı `TodoListController`çok benzer.</span><span class="sxs-lookup"><span data-stu-id="6962d-233">The `TodoController` class is very similar to `TodoListController`.</span></span> <span data-ttu-id="6962d-234">En büyük fark, her bir GET yöntemini tanımlamaz çünkü istemci her yapılacaklar listesi ile birlikte yapılacaklar öğelerini alır.</span><span class="sxs-lookup"><span data-stu-id="6962d-234">The biggest difference is that it does not define any GET methods, because the client will get the to-do items along with each to-do list.</span></span>

## <a name="mvc-controllers-and-views"></a><span data-ttu-id="6962d-235">MVC denetleyicileri ve görünümleri</span><span class="sxs-lookup"><span data-stu-id="6962d-235">MVC Controllers and Views</span></span>

<span data-ttu-id="6962d-236">MVC denetleyicileri çözümün denetleyiciler klasöründe de bulunur.</span><span class="sxs-lookup"><span data-stu-id="6962d-236">The MVC controllers are also located in the Controllers folder of the solution.</span></span> <span data-ttu-id="6962d-237">`HomeController` uygulama için ana HTML 'i işler.</span><span class="sxs-lookup"><span data-stu-id="6962d-237">`HomeController` renders the main HTML for the application.</span></span> <span data-ttu-id="6962d-238">Ana denetleyicinin görünümü Görünümler/Home/Index. cshtml içinde tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-238">The view for the Home controller is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="6962d-239">Giriş görünümü, kullanıcının oturum açmış olmasına bağlı olarak farklı içerikleri işler:</span><span class="sxs-lookup"><span data-stu-id="6962d-239">The Home view renders different content depending on whether the user is logged in:</span></span>

[!code-cshtml[Main](knockoutjs-template/samples/sample4.cshtml)]

<span data-ttu-id="6962d-240">Kullanıcılar oturum açtığında, ana Kullanıcı arabirimini görürler.</span><span class="sxs-lookup"><span data-stu-id="6962d-240">When users are logged in, they see the main UI.</span></span> <span data-ttu-id="6962d-241">Aksi takdirde, oturum açma paneli görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="6962d-241">Otherwise, they see the login panel.</span></span> <span data-ttu-id="6962d-242">Bu Koşullu işleme sunucu tarafında gerçekleştiğine unutmayın.</span><span class="sxs-lookup"><span data-stu-id="6962d-242">Note that this conditional rendering happens on the server side.</span></span> <span data-ttu-id="6962d-243">İstemci tarafında&#8212;gizli içeriği gizlemeyi hiçbir şey, ham http iletilerini izleyen bir kişiye görünür.</span><span class="sxs-lookup"><span data-stu-id="6962d-243">Never try to hide sensitive content on the client side&#8212;anything that you send in an HTTP response is visible to someone who is watching the raw HTTP messages.</span></span>

## <a name="client-side-javascript-and-knockoutjs"></a><span data-ttu-id="6962d-244">İstemci tarafı JavaScript ve altını gizleme. js</span><span class="sxs-lookup"><span data-stu-id="6962d-244">Client-Side JavaScript and Knockout.js</span></span>

<span data-ttu-id="6962d-245">Şimdi uygulamanın sunucu tarafını istemciye etkinleştirelim.</span><span class="sxs-lookup"><span data-stu-id="6962d-245">Now let's turn from the server side of the application to the client.</span></span> <span data-ttu-id="6962d-246">SPA şablonu, sorunsuz ve etkileşimli bir kullanıcı arabirimi oluşturmak için jQuery ve altını gizleme. js birleşimini kullanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-246">The SPA template uses a combination of jQuery and Knockout.js to create a smooth, interactive UI.</span></span> <span data-ttu-id="6962d-247">Altını gizleme. js, HTML 'yi verilere bağlamayı kolaylaştıran bir JavaScript kitaplığıdır.</span><span class="sxs-lookup"><span data-stu-id="6962d-247">Knockout.js is a JavaScript library that makes it easy to bind HTML to data.</span></span> <span data-ttu-id="6962d-248">Altını gizleme. js, "Model-View-ViewModel" adlı bir model kullanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-248">Knockout.js uses a pattern called "Model-View-ViewModel."</span></span>

- <span data-ttu-id="6962d-249">Model, etki alanı verileri (ToDo listeleri ve Yapılacaklar öğeleri).</span><span class="sxs-lookup"><span data-stu-id="6962d-249">The model is the domain data (ToDo lists and ToDo items).</span></span>
- <span data-ttu-id="6962d-250">Görünüm HTML belgesidir.</span><span class="sxs-lookup"><span data-stu-id="6962d-250">The view is the HTML document.</span></span>
- <span data-ttu-id="6962d-251">View-model, model verilerini tutan bir JavaScript nesnesidir.</span><span class="sxs-lookup"><span data-stu-id="6962d-251">The view-model is a JavaScript object that holds the model data.</span></span> <span data-ttu-id="6962d-252">View-model, Kullanıcı arabiriminin kod soyutlamasıdır.</span><span class="sxs-lookup"><span data-stu-id="6962d-252">The view-model is a code abstraction of the UI.</span></span> <span data-ttu-id="6962d-253">HTML temsili bilgisine sahip değildir.</span><span class="sxs-lookup"><span data-stu-id="6962d-253">It has no knowledge of the HTML representation.</span></span> <span data-ttu-id="6962d-254">Bunun yerine, görünümün soyut özelliklerini temsil eder, örneğin "ToDo öğeleri listesi".</span><span class="sxs-lookup"><span data-stu-id="6962d-254">Instead, it represents abstract features of the view, such as "a list of ToDo items".</span></span>

<span data-ttu-id="6962d-255">Görünüm, görünüm modeline veri ile bağlanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-255">The view is data-bound to the view-model.</span></span> <span data-ttu-id="6962d-256">Görünüm modeli güncelleştirmeleri otomatik olarak görünüme yansıtılır.</span><span class="sxs-lookup"><span data-stu-id="6962d-256">Updates to the view-model are automatically reflected in the view.</span></span> <span data-ttu-id="6962d-257">Bağlamalar diğer yönle de çalışır.</span><span class="sxs-lookup"><span data-stu-id="6962d-257">Bindings work the other direction as well.</span></span> <span data-ttu-id="6962d-258">DOM 'daki Olaylar (tıklama gibi), AJAX çağrılarını tetikleyen görünüm modelindeki işlevlere veri bağımlıdır.</span><span class="sxs-lookup"><span data-stu-id="6962d-258">Events in the DOM (such as clicks) are data-bound to functions on the view model, which trigger AJAX calls.</span></span>

<span data-ttu-id="6962d-259">SPA şablonu, istemci tarafı JavaScript 'ı üç katmana düzenler:</span><span class="sxs-lookup"><span data-stu-id="6962d-259">The SPA template organizes the client-side JavaScript into three layers:</span></span>

- <span data-ttu-id="6962d-260">Todo. DataContext. js: AJAX istekleri gönderir.</span><span class="sxs-lookup"><span data-stu-id="6962d-260">todo.datacontext.js: Sends AJAX requests.</span></span>
- <span data-ttu-id="6962d-261">Todo. model. js: modelleri tanımlar.</span><span class="sxs-lookup"><span data-stu-id="6962d-261">todo.model.js: Defines the models.</span></span>
- <span data-ttu-id="6962d-262">Todo. ViewModel. js: görünüm modelini tanımlar.</span><span class="sxs-lookup"><span data-stu-id="6962d-262">todo.viewmodel.js: Defines the view model.</span></span>

![](knockoutjs-template/_static/image11.png)

<span data-ttu-id="6962d-263">Bu betik dosyaları, çözümün betikler/App klasöründe bulunur.</span><span class="sxs-lookup"><span data-stu-id="6962d-263">These script files are located in the Scripts/app folder of the solution.</span></span>

![](knockoutjs-template/_static/image12.png)

<span data-ttu-id="6962d-264">**Todo. DataContext** , Web API denetleyicilerine YÖNELIK tüm Ajax çağrılarını işler.</span><span class="sxs-lookup"><span data-stu-id="6962d-264">**todo.datacontext** handles all AJAX calls to the Web API controllers.</span></span> <span data-ttu-id="6962d-265">(Oturum açma için AJAX çağrıları, başka bir yerde, ajaxLogin. js ' de tanımlanır.)</span><span class="sxs-lookup"><span data-stu-id="6962d-265">(The AJAX calls for logging in are defined elsewhere, in ajaxlogin.js.)</span></span>

<span data-ttu-id="6962d-266">**Todo. model. js** Yapılacaklar listeleri için istemci tarafı (tarayıcı) modellerini tanımlar.</span><span class="sxs-lookup"><span data-stu-id="6962d-266">**todo.model.js** defines the client-side (browser) models for the to-do lists.</span></span> <span data-ttu-id="6962d-267">İki model sınıfı vardır: TodoItem ve todoList.</span><span class="sxs-lookup"><span data-stu-id="6962d-267">There are two model classes: todoItem and todoList.</span></span>

<span data-ttu-id="6962d-268">Model sınıflarında birçok özellik "Ko. Observable" türündedir.</span><span class="sxs-lookup"><span data-stu-id="6962d-268">Many of the properties in the model classes are of type "ko.observable".</span></span> <span data-ttu-id="6962d-269">Gözlemlenenler, altını gizleme 'nin Magic 'i nasıl yapar.</span><span class="sxs-lookup"><span data-stu-id="6962d-269">Observables are how Knockout does its magic.</span></span> <span data-ttu-id="6962d-270">[Gizleme belgelerinden](http://knockoutjs.com/documentation/introduction.html): bir observable, abonelere değişiklikler hakkında bildirimde bulunan bir "JavaScript nesnesidir".</span><span class="sxs-lookup"><span data-stu-id="6962d-270">From the [Knockout documentation](http://knockoutjs.com/documentation/introduction.html): An observable is a "JavaScript object that can notify subscribers about changes."</span></span> <span data-ttu-id="6962d-271">Bir observable değeri değiştiğinde, altını gizleme bu gözlemlenenler ilişkili HTML öğelerini güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="6962d-271">When the value of an observable changes, Knockout updates any HTML elements that are bound to those observables.</span></span> <span data-ttu-id="6962d-272">Örneğin, TodoItem başlık ve Isdone özellikleri için gözlemlenenler sahiptir:</span><span class="sxs-lookup"><span data-stu-id="6962d-272">For example, todoItem has observables for the title and isDone properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample5.js)]

<span data-ttu-id="6962d-273">Ayrıca, koddaki bir observable 'a abone olabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6962d-273">You can also subscribe to an observable in code.</span></span> <span data-ttu-id="6962d-274">Örneğin, TodoItem sınıfı "Isdone" ve "title" özelliklerindeki değişikliklere abone olur:</span><span class="sxs-lookup"><span data-stu-id="6962d-274">For example, the todoItem class subscribes to changes in the "isDone" and "title" properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample6.js)]

<span data-ttu-id="6962d-275">**Modeli görüntüle**</span><span class="sxs-lookup"><span data-stu-id="6962d-275">**View Model**</span></span>

<span data-ttu-id="6962d-276">Görünüm modeli Todo. ViewModel. js ' de tanımlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="6962d-276">The view model is defined in todo.viewmodel.js.</span></span> <span data-ttu-id="6962d-277">Görünüm modeli, uygulamanın HTML sayfası öğelerini etki alanı verilerine bağlandığı merkezi bir noktasıdır.</span><span class="sxs-lookup"><span data-stu-id="6962d-277">The view model is the central point where the application binds the HTML page elements to the domain data.</span></span> <span data-ttu-id="6962d-278">SPA şablonunda, görünüm modeli bir todoLists observable dizisi içerir.</span><span class="sxs-lookup"><span data-stu-id="6962d-278">In the SPA template, the view model contains an observable array of todoLists.</span></span> <span data-ttu-id="6962d-279">Görünüm modelinde aşağıdaki kod, bağlamaları uygulamak için altını gizlemeyi söyler:</span><span class="sxs-lookup"><span data-stu-id="6962d-279">The following code in the view model tells Knockout to apply the bindings:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample7.js)]

## <a name="html-and-data-binding"></a><span data-ttu-id="6962d-280">HTML ve veri bağlama</span><span class="sxs-lookup"><span data-stu-id="6962d-280">HTML and Data Binding</span></span>

<span data-ttu-id="6962d-281">Sayfa için ana HTML, görünümler/Home/Index. cshtml içinde tanımlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="6962d-281">The main HTML for the page is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="6962d-282">Veri bağlamayı kullandığımızda, HTML yalnızca gerçekten işlenmiş olan şablona yönelik bir şablondur.</span><span class="sxs-lookup"><span data-stu-id="6962d-282">Because we are using data-binding, the HTML is only a template for what actually gets rendered.</span></span> <span data-ttu-id="6962d-283">Altını gizleme *bildirim temelli* bağlamaları kullanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-283">Knockout uses *declarative* bindings.</span></span> <span data-ttu-id="6962d-284">Öğeye bir "Data-bind" özniteliği ekleyerek sayfa öğelerini verilere bağlarsınız.</span><span class="sxs-lookup"><span data-stu-id="6962d-284">You bind page elements to data by adding a "data-bind" attribute to the element.</span></span> <span data-ttu-id="6962d-285">Altını gizleme belgelerinden alınan çok basit bir örnek aşağıda verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="6962d-285">Here is a very simple example, taken from the Knockout documentation:</span></span>

[!code-html[Main](knockoutjs-template/samples/sample8.html)]

<span data-ttu-id="6962d-286">Bu örnekte, altını gizleme **&lt;span&gt;** öğesinin içeriğini `myItems.count()`değeriyle güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="6962d-286">In this example, Knockout updates the contents of the **&lt;span&gt;** element with the value of `myItems.count()`.</span></span> <span data-ttu-id="6962d-287">Bu değer değiştiğinde, altını gizleme belgeyi güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="6962d-287">Whenever this value changes, Knockout updates the document.</span></span>

<span data-ttu-id="6962d-288">Altını gizleme birçok farklı bağlama türü sağlar.</span><span class="sxs-lookup"><span data-stu-id="6962d-288">Knockout provides a number of different binding types.</span></span> <span data-ttu-id="6962d-289">SPA şablonunda kullanılan bağlamalardan bazıları şunlardır:</span><span class="sxs-lookup"><span data-stu-id="6962d-289">Here are some of the bindings used in the SPA template:</span></span>

- <span data-ttu-id="6962d-290">**foreach**: bir döngüde yineleme yapmanızı sağlar ve listedeki her öğeye aynı biçimlendirmeyi uygulayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="6962d-290">**foreach**: Lets you iterate through a loop and apply the same markup to each item in the list.</span></span> <span data-ttu-id="6962d-291">Bu, yapılacaklar listelerini ve yapılacaklar öğelerini işlemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="6962d-291">This is used to render the to-do lists and to-do items.</span></span> <span data-ttu-id="6962d-292">**Foreach**içinde bağlamalar, listenin öğelerine uygulanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-292">Within the **foreach**, the bindings are applied to the elements of the list.</span></span>
- <span data-ttu-id="6962d-293">**görünür**: Görünürlüğü değiştirmek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="6962d-293">**visible**: Used to toggle visibility.</span></span> <span data-ttu-id="6962d-294">Bir koleksiyon boş olduğunda işaretlemeyi gizleyin veya hata iletisini görünür hale getirin.</span><span class="sxs-lookup"><span data-stu-id="6962d-294">Hide markup when a collection is empty, or make the error message visible.</span></span>
- <span data-ttu-id="6962d-295">**değer**: form değerlerini doldurmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="6962d-295">**value**: Used to populate form values.</span></span>
- <span data-ttu-id="6962d-296">**tıklama**: bir tıklama olayını görünüm modelinde bir işleve bağlar.</span><span class="sxs-lookup"><span data-stu-id="6962d-296">**click**: Binds a click event to a function on the view model.</span></span>

## <a name="anti-csrf-protection"></a><span data-ttu-id="6962d-297">Anti-CSRF koruması</span><span class="sxs-lookup"><span data-stu-id="6962d-297">Anti-CSRF Protection</span></span>

<span data-ttu-id="6962d-298">Siteler arası Istek forgery (CSRF), kötü niyetli bir sitenin kullanıcının şu anda oturum açtığı bir güvenlik açığı olan siteye istek gönderdiği bir saldırıya neden olur.</span><span class="sxs-lookup"><span data-stu-id="6962d-298">Cross-Site Request Forgery (CSRF) is an attack where a malicious site sends a request to a vulnerable site where the user is currently logged in.</span></span> <span data-ttu-id="6962d-299">ASP.NET MVC, CSRF saldırılarını önlemeye yardımcı olmak için, istek doğrulama belirteçleri olarak da adlandırılan, güvenlik *yumuşatma belirteçlerini*kullanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-299">To help prevent CSRF attacks, ASP.NET MVC uses *anti-forgery tokens*, also called request verification tokens.</span></span> <span data-ttu-id="6962d-300">Fikir, sunucunun rastgele oluşturulmuş bir belirteci bir Web sayfasına yerleştirmesinden yarar.</span><span class="sxs-lookup"><span data-stu-id="6962d-300">The idea is that the server puts a randomly generated token into a web page.</span></span> <span data-ttu-id="6962d-301">İstemci sunucuya veri gönderdiğinde, istek iletisinde bu değeri içermesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="6962d-301">When the client submits data to the server, it must include this value in the request message.</span></span>

<span data-ttu-id="6962d-302">Kötü amaçlı sayfa, aynı kaynak ilkeleri nedeniyle kullanıcının belirteçlerini okuyamadığı için, karşı koruma belirteçleri çalışır.</span><span class="sxs-lookup"><span data-stu-id="6962d-302">Anti-forgery tokens work because the malicious page cannot read the user's tokens, due to same-origin policies.</span></span> <span data-ttu-id="6962d-303">(Aynı kaynak ilkeleri, iki farklı sitede barındırılan belgelerin birbirlerinin içeriğine erişmesini önler.)</span><span class="sxs-lookup"><span data-stu-id="6962d-303">(Same-origin policies prevent documents hosted on two different sites from accessing each other's content.)</span></span>

<span data-ttu-id="6962d-304">ASP.NET MVC, [antiforgery](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx) sınıfı ve [[Validateantiforgeryıtoken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx) özniteliği aracılığıyla, korsanlığa karşı koruma belirteçleri için yerleşik destek sağlar.</span><span class="sxs-lookup"><span data-stu-id="6962d-304">ASP.NET MVC provides built-in support for anti-forgery tokens, through the [AntiForgery](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx) class and the [[ValidateAntiForgeryToken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx) attribute.</span></span> <span data-ttu-id="6962d-305">Şu anda bu işlev Web API 'sinde yerleşik değildir.</span><span class="sxs-lookup"><span data-stu-id="6962d-305">Currently, this functionality is not built into Web API.</span></span> <span data-ttu-id="6962d-306">Ancak, SPA şablonu, Web API 'SI için özel bir uygulama içerir.</span><span class="sxs-lookup"><span data-stu-id="6962d-306">However, the SPA template includes a custom implementation for Web API.</span></span> <span data-ttu-id="6962d-307">Bu kod, çözümün Filters klasöründe bulunan `ValidateHttpAntiForgeryTokenAttribute` sınıfında tanımlanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-307">This code is defined in the `ValidateHttpAntiForgeryTokenAttribute` class, which is located in the Filters folder of the solution.</span></span> <span data-ttu-id="6962d-308">Web API 'sindeki Anti-CSRF hakkında daha fazla bilgi edinmek için bkz. [siteler arası Istek forgery (CSRF) saldırılarını önleme](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span><span class="sxs-lookup"><span data-stu-id="6962d-308">To learn more about anti-CSRF in Web API, see [Preventing Cross-Site Request Forgery (CSRF) Attacks](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="6962d-309">Sonuç</span><span class="sxs-lookup"><span data-stu-id="6962d-309">Conclusion</span></span>

<span data-ttu-id="6962d-310">SPA şablonu, modern ve etkileşimli Web uygulamalarını hızlı bir şekilde yazmaya başlamanızı sağlayacak şekilde tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="6962d-310">The SPA template is designed to get you started quickly writing modern, interactive web applications.</span></span> <span data-ttu-id="6962d-311">Veri ve uygulama mantığındaki sunumu (HTML biçimlendirmesi) ayırmak için altını gizleme. js kitaplığını kullanır.</span><span class="sxs-lookup"><span data-stu-id="6962d-311">It uses the Knockout.js library to separate presentation (HTML markup) from the data and application logic.</span></span> <span data-ttu-id="6962d-312">Ancak altını gizleme, SPA oluşturmak için kullanabileceğiniz tek JavaScript kitaplığı değildir.</span><span class="sxs-lookup"><span data-stu-id="6962d-312">But Knockout is not the only JavaScript library you can use to create a SPA.</span></span> <span data-ttu-id="6962d-313">Diğer bazı seçenekleri araştırmak istiyorsanız [topluluk tarafından oluşturulan Spa şablonlarına](../templates/index.md)göz atın.</span><span class="sxs-lookup"><span data-stu-id="6962d-313">If you want to explore some other options, take a look at the [community-created SPA templates](../templates/index.md).</span></span>
