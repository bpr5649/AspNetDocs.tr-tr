---
uid: web-pages/overview/data/5-working-with-data
title: ASP.NET Web Pages (Razor) sitelerindeki bir veritabanıyla çalışmaya giriş | Microsoft Docs
author: Rick-Anderson
description: Bu bölümde, bir veritabanından verilere erişme ve ASP.NET Web sayfaları kullanılarak görüntüleme açıklanmaktadır.
ms.author: riande
ms.date: 02/18/2014
ms.assetid: 673d502f-2c16-4a6f-bb63-dbfd9a77ef47
msc.legacyurl: /web-pages/overview/data/5-working-with-data
msc.type: authoredcontent
ms.openlocfilehash: 45e988d037465e59ad352bb9444af2c69fd3cd70
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78586536"
---
# <a name="introduction-to-working-with-a-database-in-aspnet-web-pages-razor-sites"></a><span data-ttu-id="3a7c1-103">ASP.NET Web Pages (Razor) sitelerindeki bir veritabanıyla çalışmaya giriş</span><span class="sxs-lookup"><span data-stu-id="3a7c1-103">Introduction to Working with a Database in ASP.NET Web Pages (Razor) Sites</span></span>

<span data-ttu-id="3a7c1-104">[Tom FitzMacken](https://github.com/tfitzmac) tarafından</span><span class="sxs-lookup"><span data-stu-id="3a7c1-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="3a7c1-105">Bu makalede, bir ASP.NET Web Pages (Razor) Web sitesinde veritabanı oluşturmak için Microsoft WebMatrix araçları 'nın nasıl kullanılacağı ve verileri görüntüleme, ekleme, düzenleme ve silme gibi sayfalar oluşturma işlemlerinin nasıl yapılacağı açıklanır.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-105">This article describes how to use Microsoft WebMatrix tools to create a database in an ASP.NET Web Pages (Razor) website, and how to create pages that let you display, add, edit, and delete data.</span></span>
> 
> <span data-ttu-id="3a7c1-106">**Şunları öğreneceksiniz:**</span><span class="sxs-lookup"><span data-stu-id="3a7c1-106">**What you'll learn:**</span></span> 
> 
> - <span data-ttu-id="3a7c1-107">Veritabanı oluşturma.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-107">How to create a database.</span></span>
> - <span data-ttu-id="3a7c1-108">Veritabanına bağlanma.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-108">How to connect to a database.</span></span>
> - <span data-ttu-id="3a7c1-109">Verileri bir Web sayfasında görüntüleme.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-109">How to display data in a web page.</span></span>
> - <span data-ttu-id="3a7c1-110">Veritabanı kayıtlarını ekleme, güncelleştirme ve silme.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-110">How to insert, update, and delete database records.</span></span>
> 
> <span data-ttu-id="3a7c1-111">Makalesinde sunulan özellikler şunlardır:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-111">These are the features introduced in the article:</span></span>
> 
> - <span data-ttu-id="3a7c1-112">Microsoft SQL Server Compact Edition veritabanıyla çalışma.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-112">Working with a Microsoft SQL Server Compact Edition database.</span></span>
> - <span data-ttu-id="3a7c1-113">SQL sorgularıyla çalışma.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-113">Working with SQL queries.</span></span>
> - <span data-ttu-id="3a7c1-114">`Database` sınıfı.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-114">The `Database` class.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="3a7c1-115">Öğreticide kullanılan yazılım sürümleri</span><span class="sxs-lookup"><span data-stu-id="3a7c1-115">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="3a7c1-116">ASP.NET Web sayfaları (Razor) 2</span><span class="sxs-lookup"><span data-stu-id="3a7c1-116">ASP.NET Web Pages (Razor) 2</span></span>
> - <span data-ttu-id="3a7c1-117">WebMatrix 2</span><span class="sxs-lookup"><span data-stu-id="3a7c1-117">WebMatrix 2</span></span>
>   
> 
> <span data-ttu-id="3a7c1-118">Bu öğretici WebMatrix 3 ile de kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-118">This tutorial also works with WebMatrix 3.</span></span> <span data-ttu-id="3a7c1-119">ASP.NET Web sayfaları 3 ve Visual Studio 2013 (veya Web için Visual Studio Express 2013) kullanabilirsiniz; Ancak, Kullanıcı arabirimi farklı olacaktır.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-119">You can use ASP.NET Web Pages 3 and Visual Studio 2013 (or Visual Studio Express 2013 for Web); however, the user interface will be different.</span></span>

## <a name="introduction-to-databases"></a><span data-ttu-id="3a7c1-120">Veritabanlarına giriş</span><span class="sxs-lookup"><span data-stu-id="3a7c1-120">Introduction to Databases</span></span>

<span data-ttu-id="3a7c1-121">Tipik bir adres kitabı düşünün.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-121">Imagine a typical address book.</span></span> <span data-ttu-id="3a7c1-122">Adres defterindeki her giriş için (yani, her bir kişi için) adı, soyadı, adresi, e-posta adresi ve telefon numarası gibi çeşitli bilgi parçaları vardır.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-122">For each entry in the address book (that is, for each person) you have several pieces of information such as first name, last name, address, email address, and phone number.</span></span>

<span data-ttu-id="3a7c1-123">Bu gibi verileri resimlerin tipik bir yolu, satırlar ve sütunlar içeren bir tablo gibidir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-123">A typical way to picture data like this is as a table with rows and columns.</span></span> <span data-ttu-id="3a7c1-124">Veritabanı koşullarında, her satır genellikle kayıt olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-124">In database terms, each row is often referred to as a record.</span></span> <span data-ttu-id="3a7c1-125">Her bir sütun (bazen alan olarak adlandırılır) her veri türü için bir değer içerir: adı, soyadı ve benzeri.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-125">Each column (sometimes referred to as fields) contains a value for each type of data: first name, last name, and so on.</span></span>

| <span data-ttu-id="3a7c1-126">**ID**</span><span class="sxs-lookup"><span data-stu-id="3a7c1-126">**ID**</span></span> | <span data-ttu-id="3a7c1-127">**FirstName**</span><span class="sxs-lookup"><span data-stu-id="3a7c1-127">**FirstName**</span></span> | <span data-ttu-id="3a7c1-128">**Soyadı**</span><span class="sxs-lookup"><span data-stu-id="3a7c1-128">**LastName**</span></span> | <span data-ttu-id="3a7c1-129">**Adrestir**</span><span class="sxs-lookup"><span data-stu-id="3a7c1-129">**Address**</span></span> | <span data-ttu-id="3a7c1-130">**E-posta**</span><span class="sxs-lookup"><span data-stu-id="3a7c1-130">**Email**</span></span> | <span data-ttu-id="3a7c1-131">**Numarası**</span><span class="sxs-lookup"><span data-stu-id="3a7c1-131">**Phone**</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="3a7c1-132">1\.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-132">1</span></span> | <span data-ttu-id="3a7c1-133">Jim</span><span class="sxs-lookup"><span data-stu-id="3a7c1-133">Jim</span></span> | <span data-ttu-id="3a7c1-134">Abrus</span><span class="sxs-lookup"><span data-stu-id="3a7c1-134">Abrus</span></span> | <span data-ttu-id="3a7c1-135">210 lük St Orca WA 98031</span><span class="sxs-lookup"><span data-stu-id="3a7c1-135">210 100th St SE Orcas WA 98031</span></span> | jim@contoso.com | <span data-ttu-id="3a7c1-136">555 0100</span><span class="sxs-lookup"><span data-stu-id="3a7c1-136">555 0100</span></span> |
| <span data-ttu-id="3a7c1-137">2</span><span class="sxs-lookup"><span data-stu-id="3a7c1-137">2</span></span> | <span data-ttu-id="3a7c1-138">Terry</span><span class="sxs-lookup"><span data-stu-id="3a7c1-138">Terry</span></span> | <span data-ttu-id="3a7c1-139">Adams</span><span class="sxs-lookup"><span data-stu-id="3a7c1-139">Adams</span></span> | <span data-ttu-id="3a7c1-140">1234 Main St. Seattle WA 99011</span><span class="sxs-lookup"><span data-stu-id="3a7c1-140">1234 Main St. Seattle WA 99011</span></span> | terry@cohowinery.com | <span data-ttu-id="3a7c1-141">555 0101</span><span class="sxs-lookup"><span data-stu-id="3a7c1-141">555 0101</span></span> |

<span data-ttu-id="3a7c1-142">Çoğu veritabanı tablolarında, tabloda, bir müşteri numarası, hesap numarası vb. gibi benzersiz bir tanımlayıcı içeren bir sütun olması gerekir. Bu, tablonun *birincil anahtarı*olarak bilinir ve tablodaki her satırı tanımlamak için kullanırsınız.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-142">For most database tables, the table has to have a column that contains a unique identifier, like a customer number, account number, etc. This is known as the table's *primary key*, and you use it to identify each row in the table.</span></span> <span data-ttu-id="3a7c1-143">Örnekte, KIMLIK sütunu, adres defterinin birincil anahtarıdır.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-143">In the example, the ID column is the primary key for the address book.</span></span>

<span data-ttu-id="3a7c1-144">Veritabanlarının bu temel olarak anlaşılmasından sonra basit bir veritabanı oluşturmayı ve veri ekleme, değiştirme ve silme gibi işlemleri yapmayı öğrenirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-144">With this basic understanding of databases, you're ready to learn how to create a simple database and perform operations such as adding, modifying, and deleting data.</span></span>

> [!TIP] 
> 
> <span data-ttu-id="3a7c1-145">**İlişkisel veritabanları**</span><span class="sxs-lookup"><span data-stu-id="3a7c1-145">**Relational Databases**</span></span>
> 
> <span data-ttu-id="3a7c1-146">Metin dosyaları ve elektronik tablolar dahil olmak üzere çok çeşitli yollarla verileri saklayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-146">You can store data in lots of ways, including text files and spreadsheets.</span></span> <span data-ttu-id="3a7c1-147">Çoğu iş için, veriler ilişkisel bir veritabanında depolanır.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-147">For most business uses, though, data is stored in a relational database.</span></span>
> 
> <span data-ttu-id="3a7c1-148">Bu makale, veritabanlarına çok daha fazla gidemez.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-148">This article doesn't go very deeply into databases.</span></span> <span data-ttu-id="3a7c1-149">Ancak, bunlar hakkında biraz bilgi edinmek için yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-149">However, you might find it useful to understand a little about them.</span></span> <span data-ttu-id="3a7c1-150">İlişkisel bir veritabanında, bilgiler mantıksal olarak ayrı tablolara bölünür.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-150">In a relational database, information is logically divided into separate tables.</span></span> <span data-ttu-id="3a7c1-151">Örneğin, okul için bir veritabanı öğrenciler ve sınıf teklifleri için ayrı tablolar içerebilir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-151">For example, a database for a school might contain separate tables for students and for class offerings.</span></span> <span data-ttu-id="3a7c1-152">Veritabanı yazılımı (örneğin SQL Server), tablolar arasındaki ilişkileri dinamik olarak oluşturmanıza imkan tanıyan güçlü komutları destekler.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-152">The database software (such as SQL Server) supports powerful commands that let you dynamically establish relationships between the tables.</span></span> <span data-ttu-id="3a7c1-153">Örneğin, bir zamanlama oluşturmak için öğrenciler ve sınıflar arasında mantıksal bir ilişki oluşturmak üzere ilişkisel veritabanını kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-153">For example, you can use the relational database to establish a logical relationship between students and classes in order to create a schedule.</span></span> <span data-ttu-id="3a7c1-154">Verileri ayrı tablolarda depolamak tablo yapısının karmaşıklığını azaltır ve gereksiz verileri tablolarda saklama gereksinimini azaltır.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-154">Storing data in separate tables reduces the complexity of the table structure and reduces the need to keep redundant data in tables.</span></span>

## <a name="creating-a-database"></a><span data-ttu-id="3a7c1-155">Veritabanı Oluşturma</span><span class="sxs-lookup"><span data-stu-id="3a7c1-155">Creating a Database</span></span>

<span data-ttu-id="3a7c1-156">Bu yordamda, WebMatrix 'e dahil olan SQL Server Compact veritabanı tasarım aracını kullanarak Smallbakarate adlı bir veritabanının nasıl oluşturulacağı gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-156">This procedure shows you how to create a database named SmallBakery by using the SQL Server Compact Database design tool that's included in WebMatrix.</span></span> <span data-ttu-id="3a7c1-157">Kod kullanarak bir veritabanı oluşturabilseniz de, WebMatrix gibi bir tasarım aracı kullanarak veritabanı ve veritabanı tablolarını oluşturmak daha normaldir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-157">Although you can create a database using code, it's more typical to create the database and database tables using a design tool like WebMatrix.</span></span>

1. <span data-ttu-id="3a7c1-158">WebMatrix 'i başlatın ve hızlı başlangıç sayfasında, **şablondan site**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-158">Start WebMatrix, and on the Quick Start page, click **Site From Template**.</span></span>
2. <span data-ttu-id="3a7c1-159">**Boş site**' yi seçin ve **site adı** kutusuna "smallbakgir" yazın ve ardından **Tamam**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-159">Select **Empty Site**, and in the **Site Name** box enter "SmallBakery" and then click **OK**.</span></span> <span data-ttu-id="3a7c1-160">Site, WebMatrix 'te oluşturulur ve görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-160">The site is created and displayed in WebMatrix.</span></span>
3. <span data-ttu-id="3a7c1-161">Sol bölmede **veritabanları** çalışma alanına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-161">In the left pane, click the **Databases** workspace.</span></span>
4. <span data-ttu-id="3a7c1-162">Şeritte **Yeni veritabanı**' na tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-162">In the ribbon, click **New Database**.</span></span> <span data-ttu-id="3a7c1-163">Siteniz ile aynı adda boş bir veritabanı oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-163">An empty database is created with the same name as your site.</span></span>
5. <span data-ttu-id="3a7c1-164">Sol bölmede, **Smallbakmes. sdf** düğümünü genişletin ve **Tablolar**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-164">In the left pane, expand the **SmallBakery.sdf** node and then click **Tables**.</span></span>
6. <span data-ttu-id="3a7c1-165">Şeritte **Yeni tablo**' ya tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-165">In the ribbon, click **New Table**.</span></span> <span data-ttu-id="3a7c1-166">WebMatrix tablo tasarımcısını açar.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-166">WebMatrix opens the table designer.</span></span>

    ![görüntüyle](5-working-with-data/_static/image1.jpg)
7. <span data-ttu-id="3a7c1-168">**Ad** sütununa tıklayın ve &quot;kimliği&quot;girin.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-168">Click in the **Name** column and enter &quot;Id&quot;.</span></span>
8. <span data-ttu-id="3a7c1-169">**Veri türü** sütununda **int**' i seçin.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-169">In the **Data Type** column, select **int**.</span></span>
9. <span data-ttu-id="3a7c1-170">**Birincil anahtar mı yapılsın** ? seçenekleri **Evet**olarak **belirleyin** .</span><span class="sxs-lookup"><span data-stu-id="3a7c1-170">Set the **Is Primary Key?** and **Is Identify?** options to **Yes**.</span></span>

    <span data-ttu-id="3a7c1-171">Adından da anlaşılacağı gibi, **birincil anahtar** veritabanına bunun tablonun birincil anahtarı olacağını söyler.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-171">As the name suggests, **Is Primary Key** tells the database that this will be the table's primary key.</span></span> <span data-ttu-id="3a7c1-172">**Kimliği** , veritabanına her yeni kayıt için otomatik olarak bir kimlik numarası oluşturmasını ve bir sonraki ardışık numarayı (1 ' den başlayarak) atamasını söyler.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-172">**Is Identity** tells the database to automatically create an ID number for every new record and to assign it the next sequential number (starting at 1).</span></span>
10. <span data-ttu-id="3a7c1-173">Sonraki satıra tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-173">Click in the next row.</span></span> <span data-ttu-id="3a7c1-174">Düzenleyici yeni bir sütun tanımı başlatır.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-174">The editor starts a new column definition.</span></span>
11. <span data-ttu-id="3a7c1-175">Ad değeri için &quot;ad&quot;girin.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-175">For the Name value, enter &quot;Name&quot;.</span></span>
12. <span data-ttu-id="3a7c1-176">**Veri türü**için &quot;nvarchar&quot; seçin ve uzunluğu 50 olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-176">For **Data Type**, choose &quot;nvarchar&quot; and set the length to 50.</span></span> <span data-ttu-id="3a7c1-177">`nvarchar` 'ın *var* olan bölümü veritabanına bu sütundaki verilerin boyutu, kaydın kaydına göre değişebilen bir dize olacağını söyler.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-177">The *var* part of `nvarchar` tells the database that the data for this column will be a string whose size might vary from record to record.</span></span> <span data-ttu-id="3a7c1-178">( *N* ön eki, alanın, Unicode verileri tutan herhangi bir alfabeyi veya yazma sistemini &#8212; temsil eden karakter verilerini tutabileceğini gösteren *Ulusal*temsil eder.)</span><span class="sxs-lookup"><span data-stu-id="3a7c1-178">(The *n* prefix represents *national*, indicating that the field can hold character data that represents any alphabet or writing system &#8212; that is, that the field holds Unicode data.)</span></span>
13. <span data-ttu-id="3a7c1-179">**Null değerlere Izin ver** seçeneğini **Hayır**olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-179">Set the **Allow Nulls** option to **No**.</span></span> <span data-ttu-id="3a7c1-180">Bu, *ad* sütununun boş bırakılmadığından zorlanır.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-180">This will enforce that the *Name* column is not left blank.</span></span>
14. <span data-ttu-id="3a7c1-181">Aynı işlemi kullanarak, *Açıklama*adlı bir sütun oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-181">Using this same process, create a column named *Description*.</span></span> <span data-ttu-id="3a7c1-182">**Veri türü** değerini "nvarchar" ve 50 olarak ayarlayın ve **null değerlere izin ver** değerini false olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-182">Set **Data Type** to "nvarchar" and 50 for the length, and set **Allow Nulls** to false.</span></span>
15. <span data-ttu-id="3a7c1-183">*Price*adlı bir sütun oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-183">Create a column named *Price*.</span></span> <span data-ttu-id="3a7c1-184">**Veri türünü "para" olarak** ayarlayın ve **null değerlere izin ver** değerini false olarak ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-184">Set **Data Type to "money"** and set **Allow Nulls** to false.</span></span>
16. <span data-ttu-id="3a7c1-185">Üstteki kutuya &quot;ürün&quot;adını adlandırın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-185">In the box at the top, name the table &quot;Product&quot;.</span></span>

    <span data-ttu-id="3a7c1-186">İşiniz bittiğinde, tanım şöyle görünür:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-186">When you're done, the definition will look like this:</span></span>

    ![görüntüyle](5-working-with-data/_static/image2.png)
17. <span data-ttu-id="3a7c1-188">Tabloyu kaydetmek için CTRL + S tuşlarına basın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-188">Press Ctrl+S to save the table.</span></span>

## <a name="adding-data-to-the-database"></a><span data-ttu-id="3a7c1-189">Veritabanına veri ekleme</span><span class="sxs-lookup"><span data-stu-id="3a7c1-189">Adding Data to the Database</span></span>

<span data-ttu-id="3a7c1-190">Artık, bu makalede daha sonra çalışacağımız bazı örnek verileri veritabanınıza ekleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-190">Now you can add some sample data to your database that you'll work with later in the article.</span></span>

1. <span data-ttu-id="3a7c1-191">Sol bölmede, **Smallbakmes. sdf** düğümünü genişletin ve **Tablolar**' a tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-191">In the left pane, expand the **SmallBakery.sdf** node and then click **Tables**.</span></span>
2. <span data-ttu-id="3a7c1-192">Ürün tablosuna sağ tıklayın ve ardından **veriler**' e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-192">Right-click the Product table and then click **Data**.</span></span>
3. <span data-ttu-id="3a7c1-193">Düzenle bölmesinde, aşağıdaki kayıtları girin:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-193">In the edit pane, enter the following records:</span></span>

    | <span data-ttu-id="3a7c1-194">**Ad**</span><span class="sxs-lookup"><span data-stu-id="3a7c1-194">**Name**</span></span> | <span data-ttu-id="3a7c1-195">**Açıklama**</span><span class="sxs-lookup"><span data-stu-id="3a7c1-195">**Description**</span></span> | <span data-ttu-id="3a7c1-196">**Bkz**</span><span class="sxs-lookup"><span data-stu-id="3a7c1-196">**Price**</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="3a7c1-197">Ekmek</span><span class="sxs-lookup"><span data-stu-id="3a7c1-197">Bread</span></span> | <span data-ttu-id="3a7c1-198">Her gün yeni bir bakmış.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-198">Baked fresh every day.</span></span> | <span data-ttu-id="3a7c1-199">2.99</span><span class="sxs-lookup"><span data-stu-id="3a7c1-199">2.99</span></span> |
    | <span data-ttu-id="3a7c1-200">Çilekli pasta</span><span class="sxs-lookup"><span data-stu-id="3a7c1-200">Strawberry Shortcake</span></span> | <span data-ttu-id="3a7c1-201">Bahçemizdeki organik strawberrıes ile yapılır.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-201">Made with organic strawberries from our garden.</span></span> | <span data-ttu-id="3a7c1-202">9.99</span><span class="sxs-lookup"><span data-stu-id="3a7c1-202">9.99</span></span> |
    | <span data-ttu-id="3a7c1-203">Apple pasta</span><span class="sxs-lookup"><span data-stu-id="3a7c1-203">Apple Pie</span></span> | <span data-ttu-id="3a7c1-204">İkinci olarak yalnızca anneciğim pastana.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-204">Second only to your mom's pie.</span></span> | <span data-ttu-id="3a7c1-205">12.99</span><span class="sxs-lookup"><span data-stu-id="3a7c1-205">12.99</span></span> |
    | <span data-ttu-id="3a7c1-206">Pecan pasta</span><span class="sxs-lookup"><span data-stu-id="3a7c1-206">Pecan Pie</span></span> | <span data-ttu-id="3a7c1-207">Bu şekilde karşılaşırsanız, sizin için bu sizin için önemlidir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-207">If you like pecans, this is for you.</span></span> | <span data-ttu-id="3a7c1-208">10.99</span><span class="sxs-lookup"><span data-stu-id="3a7c1-208">10.99</span></span> |
    | <span data-ttu-id="3a7c1-209">Açık pasta</span><span class="sxs-lookup"><span data-stu-id="3a7c1-209">Lemon Pie</span></span> | <span data-ttu-id="3a7c1-210">Dünyanın en iyi yanlarına göre yapılır.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-210">Made with the best lemons in the world.</span></span> | <span data-ttu-id="3a7c1-211">11.99</span><span class="sxs-lookup"><span data-stu-id="3a7c1-211">11.99</span></span> |
    | <span data-ttu-id="3a7c1-212">Çörekler</span><span class="sxs-lookup"><span data-stu-id="3a7c1-212">Cupcakes</span></span> | <span data-ttu-id="3a7c1-213">Çocuklarınız ve çocuklarınız bunları seveceksiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-213">Your kids and the kid in you will love these.</span></span> | <span data-ttu-id="3a7c1-214">7.99</span><span class="sxs-lookup"><span data-stu-id="3a7c1-214">7.99</span></span> |

    <span data-ttu-id="3a7c1-215">*Kimlik* sütunu için herhangi bir şey girmeniz gerekeceğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-215">Remember that you don't have to enter anything for the *Id* column.</span></span> <span data-ttu-id="3a7c1-216">*ID* sütununu oluştururken, **Identity** özelliği true olarak ayarlanır, bu da otomatik olarak doldurulmasına neden olur.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-216">When you created the *Id* column, you set its **Is Identity** property to true, which causes it to automatically be filled in.</span></span>

    <span data-ttu-id="3a7c1-217">Verileri girmeyi tamamladığınızda Tablo Tasarımcısı şöyle görünür:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-217">When you're finished entering the data, the table designer will look like this:</span></span>

    ![görüntüyle](5-working-with-data/_static/image3.jpg)
4. <span data-ttu-id="3a7c1-219">Veritabanı verilerini içeren sekmeyi kapatın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-219">Close the tab that contains the database data.</span></span>

## <a name="displaying-data-from-a-database"></a><span data-ttu-id="3a7c1-220">Veritabanından verileri görüntüleme</span><span class="sxs-lookup"><span data-stu-id="3a7c1-220">Displaying Data from a Database</span></span>

<span data-ttu-id="3a7c1-221">Verileri içeren bir veritabanına sahip olduktan sonra, verileri bir ASP.NET Web sayfasında görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-221">Once you've got a database with data in it, you can display the data in an ASP.NET web page.</span></span> <span data-ttu-id="3a7c1-222">Görüntülenecek tablo satırlarını seçmek için, veritabanına geçirdiğiniz bir komut olan bir SQL ifadesini kullanırsınız.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-222">To select the table rows to display, you use a SQL statement, which is a command that you pass to the database.</span></span>

1. <span data-ttu-id="3a7c1-223">Sol bölmede **dosyalar** çalışma alanına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-223">In the left pane, click the **Files** workspace.</span></span>
2. <span data-ttu-id="3a7c1-224">Web sitesinin kökünde *ListProducts. cshtml*adlı yenı bir cshtml sayfası oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-224">In the root of the website, create a new CSHTML page named *ListProducts.cshtml*.</span></span>
3. <span data-ttu-id="3a7c1-225">Varolan biçimlendirmeyi aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-225">Replace the existing markup with the following:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample1.cshtml)]

    <span data-ttu-id="3a7c1-226">İlk kod bloğunda, daha önce oluşturduğunuz *Smallbakarah. sdf* dosyasını (veritabanı) açarsınız.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-226">In the first code block, you open the *SmallBakery.sdf* file (database) that you created earlier.</span></span> <span data-ttu-id="3a7c1-227">`Database.Open` yöntemi *. sdf* dosyasının web sitenizin *App\_Data* klasöründe olduğunu varsayar.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-227">The `Database.Open` method assumes that the *.sdf* file is in your website's *App\_Data* folder.</span></span> <span data-ttu-id="3a7c1-228">( *. Sdf* uzantısını &#8212; aslında belirtmeniz gerekmez, bunu yaparsanız `Open` yöntemi çalışmaz.)</span><span class="sxs-lookup"><span data-stu-id="3a7c1-228">(Notice that you don't need to specify the *.sdf* extension &#8212; in fact, if you do, the `Open` method won't work.)</span></span>

    > [!NOTE]
    > <span data-ttu-id="3a7c1-229">*Uygulama\_veri* klasörü, veri dosyalarını depolamak için kullanılan ASP.NET içinde özel bir klasördür.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-229">The *App\_Data* folder is a special folder in ASP.NET that's used to store data files.</span></span> <span data-ttu-id="3a7c1-230">Daha fazla bilgi için bu makalenin ilerleyen kısımlarında [bir veritabanına bağlanma](#SB_ConnectingToADatabase) bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-230">For more information, see [Connecting to a Database](#SB_ConnectingToADatabase) later in this article.</span></span>

    <span data-ttu-id="3a7c1-231">Ardından, aşağıdaki SQL `Select` ifadesini kullanarak veritabanını sorgulamak için bir istek yaparsınız:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-231">You then make a request to query the database using the following SQL `Select` statement:</span></span>

    [!code-sql[Main](5-working-with-data/samples/sample2.sql)]

    <span data-ttu-id="3a7c1-232">İfadesinde, sorgulanacak tabloyu `Product` tanımlar.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-232">In the statement, `Product` identifies the table to query.</span></span> <span data-ttu-id="3a7c1-233">`*` karakteri sorgunun tablodaki tüm sütunları döndürmesi gerektiğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-233">The `*` character specifies that the query should return all the columns from the table.</span></span> <span data-ttu-id="3a7c1-234">(Sütunları yalnızca bir kısmını görmek isterseniz, sütunları virgülle ayırarak ayrı ayrı listeleyebilirsiniz.) `Order By` yan tümcesi, verilerin bu durumda *ad* sütununa göre &#8212; nasıl sıralanacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-234">(You could also list columns individually, separated by commas, if you wanted to see only some of the columns.) The `Order By` clause indicates how the data should be sorted &#8212; in this case, by the *Name* column.</span></span> <span data-ttu-id="3a7c1-235">Bu, verilerin her satır için *ad* sütununun değerine göre alfabetik olarak sıralandığı anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-235">This means that the data is sorted alphabetically based on the value of the *Name* column for each row.</span></span>

    <span data-ttu-id="3a7c1-236">Sayfanın gövdesinde, biçimlendirme, verileri göstermek için kullanılacak bir HTML tablosu oluşturur.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-236">In the body of the page, the markup creates an HTML table that will be used to display the data.</span></span> <span data-ttu-id="3a7c1-237">`<tbody>` öğesinin içinde, sorgu tarafından döndürülen her bir veri satırını tek tek almak için bir `foreach` döngüsü kullanırsınız.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-237">Inside the `<tbody>` element, you use a `foreach` loop to individually get each data row that's returned by the query.</span></span> <span data-ttu-id="3a7c1-238">Her veri satırı için bir HTML tablo satırı (`<tr>` öğesi) oluşturursunuz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-238">For each data row, you create an HTML table row (`<tr>` element).</span></span> <span data-ttu-id="3a7c1-239">Daha sonra her bir sütun için HTML tablosu hücreleri (`<td>` öğeleri) oluşturursunuz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-239">Then you create HTML table cells (`<td>` elements) for each column.</span></span> <span data-ttu-id="3a7c1-240">Döngüden her gittiğinizde, veritabanının bir sonraki kullanılabilir satırı `row` değişkenidir (bunu `foreach` ifadesinde ayarlarsınız).</span><span class="sxs-lookup"><span data-stu-id="3a7c1-240">Each time you go through the loop, the next available row from the database is in the `row` variable (you set this up in the `foreach` statement).</span></span> <span data-ttu-id="3a7c1-241">Satırdan ayrı bir sütun almak için `row.Name` veya `row.Description` ya da istediğiniz sütunun adının ne olduğunu seçebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-241">To get an individual column from the row, you can use `row.Name` or `row.Description` or whatever the name is of the column you want.</span></span>
4. <span data-ttu-id="3a7c1-242">Sayfayı bir tarayıcıda çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-242">Run the page in a browser.</span></span> <span data-ttu-id="3a7c1-243">(Çalıştırmadan önce sayfanın **dosyalar** çalışma alanında seçili olduğundan emin olun.) Sayfada aşağıdaki gibi bir liste görüntülenir:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-243">(Make sure the page is selected in the **Files** workspace before you run it.) The page displays a list like the following:</span></span>

    ![görüntüyle](5-working-with-data/_static/image4.jpg)

> [!TIP] 
> 
> <span data-ttu-id="3a7c1-245">**Yapılandırılmış Sorgu Dili (SQL)**</span><span class="sxs-lookup"><span data-stu-id="3a7c1-245">**Structured Query Language (SQL)**</span></span>
> 
> <span data-ttu-id="3a7c1-246">SQL, bir veritabanındaki verileri yönetmek için en ilişkisel veritabanlarında kullanılan bir dildir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-246">SQL is a language that's used in most relational databases for managing data in a database.</span></span> <span data-ttu-id="3a7c1-247">Veri almanıza ve güncelleştirmenizi sağlayan ve veritabanı tabloları oluşturmanıza, değiştirmenize ve yönetmenize olanak tanıyan komutları içerir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-247">It includes commands that let you retrieve data and update it, and that let you create, modify, and manage database tables.</span></span> <span data-ttu-id="3a7c1-248">SQL, bir programlama dilinden (WebMatrix 'te kullandığınız gibi) farklıdır, bu da veritabanını istediğiniz gibi söylemeniz ve verilerin nasıl alınacağını ya da görevin nasıl gerçekleştirileceğini anlamak için veritabanının işi olduğunu düşünvidir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-248">SQL is different than a programming language (like the one you're using in WebMatrix) because with SQL, the idea is that you tell the database what you want, and it's the database's job to figure out how to get the data or perform the task.</span></span> <span data-ttu-id="3a7c1-249">Aşağıda bazı SQL komutlarının örnekleri ve ne yapacaklarıdır:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-249">Here are examples of some SQL commands and what they do:</span></span>
> 
> `SELECT Id, Name, Price FROM Product WHERE Price > 10.00 ORDER BY Name`
> 
> <span data-ttu-id="3a7c1-250">Bu, *Fiyat* değeri 10 ' dan büyükse *ürün* tablosundaki kayıtlardan *kimliği*, *adı*ve *Fiyat* sütunlarını getirir ve *ad* sütununun değerlerine göre sonuçları alfabetik sırada döndürür.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-250">This fetches the *Id*, *Name*, and *Price* columns from records in the *Product* table if the value of *Price* is more than 10, and returns the results in alphabetical order based on the values of the *Name* column.</span></span> <span data-ttu-id="3a7c1-251">Bu komut, ölçütlere uyan kayıtları veya hiçbir kayıt eşleşmezse boş bir kümeyi içeren bir sonuç kümesi döndürür.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-251">This command will return a result set that contains the records that meet the criteria, or an empty set if no records match.</span></span>
> 
> `INSERT INTO Product (Name, Description, Price) VALUES ("Croissant", "A flaky delight", 1.99)`
> 
> <span data-ttu-id="3a7c1-252">Bu, *ürün* tablosuna yeni bir kayıt ekler, *ad* sütununu &quot;croissant&quot;, *Açıklama* sütununu ise bir düzleme&quot;&quot;ve fiyatı 1,99 olarak ayarlar.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-252">This inserts a new record into the *Product* table, setting the *Name* column to &quot;Croissant&quot;, the *Description* column to &quot;A flaky delight&quot;, and the price to 1.99.</span></span>
> 
> `DELETE FROM Product WHERE ExpirationDate < "01/01/2008"`
> 
> <span data-ttu-id="3a7c1-253">Bu komut, son kullanma tarihi sütunu 1 Ocak 2008 ' den daha eski olan *ürün* tablosundaki kayıtları siler.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-253">This command deletes records in the *Product* table whose expiration date column is earlier than January 1, 2008.</span></span> <span data-ttu-id="3a7c1-254">(Bu, *ürün* tablosunun elbette böyle bir sütun olduğunu varsayar.) Tarih, AA/GG/YYYY biçiminde girilir, ancak yerel ayarınız için kullanılan biçimde girilmelidir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-254">(This assumes that the *Product* table has such a column, of course.) The date is entered here in MM/DD/YYYY format, but it should be entered in the format that's used for your locale.</span></span>
> 
> <span data-ttu-id="3a7c1-255">`Insert Into` ve `Delete` komutları sonuç kümeleri döndürmez.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-255">The `Insert Into` and `Delete` commands don't return result sets.</span></span> <span data-ttu-id="3a7c1-256">Bunun yerine, komuttan kaç kaydın etkilendiğini belirten bir sayı döndürür.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-256">Instead, they return a number that tells you how many records were affected by the command.</span></span>
> 
> <span data-ttu-id="3a7c1-257">Bu işlemlerden bazıları (kayıtları ekleme ve silme gibi) için, işlemi isteyen işlemin veritabanında uygun izinlere sahip olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-257">For some of these operations (like inserting and deleting records), the process that's requesting the operation has to have appropriate permissions in the database.</span></span> <span data-ttu-id="3a7c1-258">Bu nedenle, veritabanına bağlanırken genellikle bir Kullanıcı adı ve parola sağlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-258">This is why for production databases you often have to supply a username and password when you connect to the database.</span></span>
> 
> <span data-ttu-id="3a7c1-259">Onlarca SQL komutu vardır, ancak hepsi bunun gibi bir model izler.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-259">There are dozens of SQL commands, but they all follow a pattern like this.</span></span> <span data-ttu-id="3a7c1-260">SQL komutlarını kullanarak veritabanı tabloları oluşturabilir, tablodaki kayıt sayısını sayabilir, fiyatları hesaplayabilir ve birçok daha fazla işlem gerçekleştirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-260">You can use SQL commands to create database tables, count the number of records in a table, calculate prices, and perform many more operations.</span></span>

## <a name="inserting-data-in-a-database"></a><span data-ttu-id="3a7c1-261">Veritabanına veri ekleme</span><span class="sxs-lookup"><span data-stu-id="3a7c1-261">Inserting Data in a Database</span></span>

<span data-ttu-id="3a7c1-262">Bu bölümde, kullanıcıların *ürün* veritabanı tablosuna yeni bir ürün eklemesine olanak tanıyan bir sayfa oluşturma gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-262">This section shows how to create a page that lets users add a new product to the *Product* database table.</span></span> <span data-ttu-id="3a7c1-263">Yeni bir ürün kaydı eklendikten sonra sayfa, önceki bölümde oluşturduğunuz *ListProducts. cshtml* sayfasını kullanarak güncelleştirilmiş tabloyu görüntüler.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-263">After a new product record is inserted, the page displays the updated table using the *ListProducts.cshtml* page that you created in the previous section.</span></span>

<span data-ttu-id="3a7c1-264">Sayfa, kullanıcının girdiği verilerin veritabanı için geçerli olduğundan emin olmak için doğrulama içerir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-264">The page includes validation to make sure that the data that the user enters is valid for the database.</span></span> <span data-ttu-id="3a7c1-265">Örneğin, sayfadaki kod tüm gerekli sütunlar için bir değer girildiğinden emin olmanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-265">For example, code in the page makes sure that a value has been entered for all required columns.</span></span>

1. <span data-ttu-id="3a7c1-266">Web sitesinde *ınsertproducts. cshtml*adlı yenı bir cshtml dosyası oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-266">In the website, create a new CSHTML file named *InsertProducts.cshtml*.</span></span>
2. <span data-ttu-id="3a7c1-267">Varolan biçimlendirmeyi aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-267">Replace the existing markup with the following:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample3.cshtml)]

    <span data-ttu-id="3a7c1-268">Sayfanın gövdesi, kullanıcıların bir ad, açıklama ve fiyat girmelerini sağlayan üç metin kutusu içeren bir HTML formu içerir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-268">The body of the page contains an HTML form with three text boxes that let users enter a name, description, and price.</span></span> <span data-ttu-id="3a7c1-269">Kullanıcılar **Ekle** düğmesine tıkladığınızda, sayfanın üst kısmındaki kod *smallbakuna. sdf* veritabanına bir bağlantı açar.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-269">When users click the **Insert** button, the code at the top of the page opens a connection to the *SmallBakery.sdf* database.</span></span> <span data-ttu-id="3a7c1-270">Daha sonra, `Request` nesnesini kullanarak kullanıcının gönderdiği değerleri alır ve bu değerleri yerel değişkenlere atar.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-270">You then get the values that the user has submitted by using the `Request` object and assign those values to local variables.</span></span>

    <span data-ttu-id="3a7c1-271">Kullanıcının gerekli her sütun için bir değer girdiğini doğrulamak için, doğrulamak istediğiniz her bir `<input>` öğesini kaydedersiniz:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-271">To validate that the user entered a value for each required column, you register each `<input>` element that you want to validate:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample4.cs)]

    <span data-ttu-id="3a7c1-272">`Validation` Yardımcısı, kaydettiğiniz alanların her birinde bir değer olup olmadığını denetler.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-272">The `Validation` helper checks that there is a value in each of the fields that you've registered.</span></span> <span data-ttu-id="3a7c1-273">Kullanıcıdan aldığınız bilgileri işleyebilmeniz için genellikle yaptığınız `Validation.IsValid()`denetleyerek doğrulama işleminin başarılı olup olmadığını test edebilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-273">You can test whether all the fields passed validation by checking `Validation.IsValid()`, which you typically do before you process the information you get from the user:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample5.cs)]

    <span data-ttu-id="3a7c1-274">(`&&` işleci anlamına gelir — bu test, *Bu bir form GÖNDERISCIDIR ve tüm alanlar doğrulamayı geçtiğinde*olur.)</span><span class="sxs-lookup"><span data-stu-id="3a7c1-274">(The `&&` operator means AND — this test is *If this is a form submission AND all the fields have passed validation*.)</span></span>

    <span data-ttu-id="3a7c1-275">Tüm sütunlar (hiçbiri boş) doğrulandıktan sonra, verileri eklemek ve ardından sonraki gösterildiği gibi yürütmek için bir SQL açıklaması oluşturun:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-275">If all the columns validated (none were empty), you go ahead and create a SQL statement to insert the data and then execute it as shown next:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample6.cs)]

    <span data-ttu-id="3a7c1-276">Eklenecek değerler için parametre yer tutucuları (`@0`, `@1`, `@2`) dahil edersiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-276">For the values to insert, you include parameter placeholders (`@0`, `@1`, `@2`).</span></span>

    > [!NOTE]
    > <span data-ttu-id="3a7c1-277">Bir güvenlik önlemi olarak, önceki örnekte gördüğünüz gibi parametreleri kullanarak her zaman bir SQL ifadesine değer geçirin.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-277">As a security precaution, always pass values to a SQL statement using parameters, as you see in the preceding example.</span></span> <span data-ttu-id="3a7c1-278">Bu size, kullanıcının verilerini doğrulama şansı sağlar ve veritabanınıza kötü amaçlı komutlar gönderme girişimlerine karşı korunmaya yardımcı olur (bazen SQL ekleme saldırıları olarak adlandırılır).</span><span class="sxs-lookup"><span data-stu-id="3a7c1-278">This gives you a chance to validate the user's data, plus it helps protect against attempts to send malicious commands to your database (sometimes referred to as SQL injection attacks).</span></span>

    <span data-ttu-id="3a7c1-279">Sorguyu yürütmek için, bu ifadeyi, yer tutucular için değiştirilecek değerleri içeren değişkenleri geçirerek kullanın:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-279">To execute the query, you use this statement, passing to it the variables that contain the values to substitute for the placeholders:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample7.cs)]

    <span data-ttu-id="3a7c1-280">`Insert Into` deyimleri yürütüldükten sonra, kullanıcıyı bu satırı kullanarak ürünleri listeleyen sayfaya gönderirsiniz:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-280">After the `Insert Into` statement has executed, you send the user to the page that lists the products using this line:</span></span>

    [!code-javascript[Main](5-working-with-data/samples/sample8.js)]

    <span data-ttu-id="3a7c1-281">Doğrulama başarılı olmadıysa, eklemeyi atlayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-281">If validation didn't succeed, you skip the insert.</span></span> <span data-ttu-id="3a7c1-282">Bunun yerine, sayfada birikmiş hata mesajlarını (varsa) görüntüleyebilen bir yardımınızın olması gerekir:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-282">Instead, you have a helper in the page that can display the accumulated error messages (if any):</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample9.cshtml)]

    <span data-ttu-id="3a7c1-283">İşaretlemede stil bloğunun `.validation-summary-errors`adlı bir CSS sınıfı tanımını içerdiğine dikkat edin.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-283">Notice that the style block in the markup includes a CSS class definition named `.validation-summary-errors`.</span></span> <span data-ttu-id="3a7c1-284">Bu, herhangi bir doğrulama hatası içeren `<div>` öğesi için varsayılan olarak kullanılan CSS sınıfının adıdır.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-284">This is the name of the CSS class that's used by default for the `<div>` element that contains any validation errors.</span></span> <span data-ttu-id="3a7c1-285">Bu durumda, CSS sınıfı doğrulama özeti hatalarının kırmızı ve kalın olarak görüntülendiğini belirtir, ancak istediğiniz biçimlendirmeyi göstermek için `.validation-summary-errors` sınıfını tanımlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-285">In this case, the CSS class specifies that validation summary errors are displayed in red and in bold, but you can define the `.validation-summary-errors` class to display any formatting you like.</span></span>

### <a name="testing-the-insert-page"></a><span data-ttu-id="3a7c1-286">Ekleme sayfasını test etme</span><span class="sxs-lookup"><span data-stu-id="3a7c1-286">Testing the Insert Page</span></span>

1. <span data-ttu-id="3a7c1-287">Sayfayı bir tarayıcıda görüntüleyin.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-287">View the page in a browser.</span></span> <span data-ttu-id="3a7c1-288">Sayfa, aşağıdaki çizimde gösterilenle benzer bir form görüntüler.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-288">The page displays a form that's similar to the one that's shown in the following illustration.</span></span>

    ![görüntüyle](5-working-with-data/_static/image5.jpg)
2. <span data-ttu-id="3a7c1-290">Tüm sütunlar için değerler girin, ancak *Fiyat* sütununu boş bıraktığınızdan emin olun.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-290">Enter values for all the columns, but make sure that you leave the *Price* column blank.</span></span>
3. <span data-ttu-id="3a7c1-291">**Ekle**'ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-291">Click **Insert**.</span></span> <span data-ttu-id="3a7c1-292">Sayfada aşağıdaki çizimde gösterildiği gibi bir hata iletisi görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-292">The page displays an error message, as shown in the following illustration.</span></span> <span data-ttu-id="3a7c1-293">(Yeni bir kayıt oluşturulmaz.)</span><span class="sxs-lookup"><span data-stu-id="3a7c1-293">(No new record is created.)</span></span>

    ![görüntüyle](5-working-with-data/_static/image6.jpg)
4. <span data-ttu-id="3a7c1-295">Formu tamamen doldurun ve ardından **Ekle**' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-295">Fill the form out completely, and then click **Insert**.</span></span> <span data-ttu-id="3a7c1-296">Bu kez, *ListProducts. cshtml* sayfası görüntülenir ve yeni kaydı gösterir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-296">This time, the *ListProducts.cshtml* page is displayed and shows the new record.</span></span>

## <a name="updating-data-in-a-database"></a><span data-ttu-id="3a7c1-297">Veritabanındaki verileri güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="3a7c1-297">Updating Data in a Database</span></span>

<span data-ttu-id="3a7c1-298">Veriler bir tabloya girildikten sonra güncelleştirmeniz gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-298">After data has been entered into a table, you might need to update it.</span></span> <span data-ttu-id="3a7c1-299">Bu yordamda, daha önce veri ekleme için oluşturuldıklarıyla benzer iki sayfa oluşturma işlemi gösterilir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-299">This procedure shows you how to create two pages that are similar to the ones you created for data insertion earlier.</span></span> <span data-ttu-id="3a7c1-300">İlk sayfa ürünleri görüntüler ve kullanıcıların değiştirmek için bir tane seçmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-300">The first page displays products and lets users select one to change.</span></span> <span data-ttu-id="3a7c1-301">İkinci sayfa, kullanıcıların düzenlemeleri gerçekten yapıp kaydetmelerini sağlar.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-301">The second page lets the users actually make the edits and save them.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="3a7c1-302">**Önemli** Bir üretim web sitesinde, genellikle verilerde değişiklik yapmasına izin verilen kişileri kısıtlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-302">**Important** In a production website, you typically restrict who's allowed to make changes to the data.</span></span> <span data-ttu-id="3a7c1-303">Üyeliği ayarlama ve kullanıcılara sitede görevler gerçekleştirme izni verme yolları hakkında bilgi için bkz. [ASP.NET Web Pages sitesine güvenlik ve üyelik ekleme](https://go.microsoft.com/fwlink/?LinkId=202904).</span><span class="sxs-lookup"><span data-stu-id="3a7c1-303">For information about how to set up membership and about ways to authorize users to perform tasks on the site, see [Adding Security and Membership to an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202904).</span></span>

1. <span data-ttu-id="3a7c1-304">Web sitesinde, *Editproducts. cshtml*adlı yenı bir cshtml dosyası oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-304">In the website, create a new CSHTML file named *EditProducts.cshtml*.</span></span>
2. <span data-ttu-id="3a7c1-305">Dosyadaki mevcut biçimlendirmeyi aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-305">Replace the existing markup in the file with the following:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample10.cshtml)]

    <span data-ttu-id="3a7c1-306">Bu sayfa ile *ListProducts. cshtml* sayfası arasındaki tek fark, bu sayfadaki HTML tablosunun **düzenleme** bağlantısı görüntüleyen ek bir sütun içerir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-306">The only difference between this page and the *ListProducts.cshtml* page from earlier is that the HTML table in this page includes an extra column that displays an **Edit** link.</span></span> <span data-ttu-id="3a7c1-307">Bu bağlantıya tıkladığınızda, seçili kaydı düzenleyebileceğiniz *UpdateProducts. cshtml* sayfasına (daha sonra oluşturacaksınız) gidersiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-307">When you click this link, it takes you to the *UpdateProducts.cshtml* page (which you'll create next) where you can edit the selected record.</span></span>

    <span data-ttu-id="3a7c1-308">**Düzenleme** bağlantısını oluşturan koda bakın:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-308">Look at the code that creates the **Edit** link:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample11.cshtml)]

    <span data-ttu-id="3a7c1-309">Bu, `href` özniteliği dinamik olarak ayarlanmış olan bir HTML `<a>` öğesi oluşturur.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-309">This creates an HTML `<a>` element whose `href` attribute is set dynamically.</span></span> <span data-ttu-id="3a7c1-310">`href` özniteliği kullanıcı bağlantıya tıkladığında görüntülenecek sayfayı belirtir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-310">The `href` attribute specifies the page to display when the user clicks the link.</span></span> <span data-ttu-id="3a7c1-311">Ayrıca geçerli satırın `Id` değerini bağlantıya geçirir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-311">It also passes the `Id` value of the current row to the link.</span></span> <span data-ttu-id="3a7c1-312">Sayfa çalıştırıldığında, sayfa kaynağı bunlar gibi bağlantılar içerebilir:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-312">When the page runs, the page source might contain links like these:</span></span>

    [!code-html[Main](5-working-with-data/samples/sample12.html)]

    <span data-ttu-id="3a7c1-313">`href` özniteliğinin `UpdateProducts/n`olarak ayarlandığını, burada *n* 'nin bir ürün numarası olduğunu unutmayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-313">Notice that the `href` attribute is set to `UpdateProducts/n`, where *n* is a product number.</span></span> <span data-ttu-id="3a7c1-314">Bir Kullanıcı bu bağlantılardan birine tıkladığında, elde edilen URL şöyle görünür:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-314">When a user clicks one of these links, the resulting URL will look something like this:</span></span>

    `http://localhost:18816/UpdateProducts/6`

    <span data-ttu-id="3a7c1-315">Diğer bir deyişle, düzenlenecek ürün numarası URL 'ye geçirilecektir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-315">In other words, the product number to be edited will be passed in the URL.</span></span>
3. <span data-ttu-id="3a7c1-316">Sayfayı bir tarayıcıda görüntüleyin.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-316">View the page in a browser.</span></span> <span data-ttu-id="3a7c1-317">Sayfa, verileri şöyle bir biçimde görüntüler:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-317">The page displays the data in a format like this:</span></span>

    ![görüntüyle](5-working-with-data/_static/image7.jpg)

    <span data-ttu-id="3a7c1-319">Daha sonra, kullanıcıların verileri gerçekten güncelleştirebilmenizi sağlayan sayfayı oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-319">Next, you'll create the page that lets users actually update the data.</span></span> <span data-ttu-id="3a7c1-320">Güncelleştirme sayfası, kullanıcının girdiği verileri doğrulamak için doğrulama içerir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-320">The update page includes validation to validate the data that the user enters.</span></span> <span data-ttu-id="3a7c1-321">Örneğin, sayfadaki kod tüm gerekli sütunlar için bir değer girildiğinden emin olmanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-321">For example, code in the page makes sure that a value has been entered for all required columns.</span></span>
4. <span data-ttu-id="3a7c1-322">Web sitesinde *UpdateProducts. cshtml*adlı yenı bir cshtml dosyası oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-322">In the website, create a new CSHTML file named *UpdateProducts.cshtml*.</span></span>
5. <span data-ttu-id="3a7c1-323">Dosyadaki varolan biçimlendirmeyi aşağıdaki ile değiştirin.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-323">Replace the existing markup in the file with the following.</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample13.cshtml)]

    <span data-ttu-id="3a7c1-324">Sayfanın gövdesi, bir ürünün görüntülendiği ve kullanıcıların bunu düzenleyebilecekleri bir HTML formu içerir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-324">The body of the page contains an HTML form where a product is displayed and where users can edit it.</span></span> <span data-ttu-id="3a7c1-325">Görüntülenecek ürünü almak için bu SQL ifadesini kullanın:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-325">To get the product to display, you use this SQL statement:</span></span>

    [!code-sql[Main](5-working-with-data/samples/sample14.sql)]

    <span data-ttu-id="3a7c1-326">Bu, KIMLIĞI `@0` parametresine geçirilen değerle eşleşen ürünü seçer.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-326">This will select the product whose ID matches the value that's passed in the `@0` parameter.</span></span> <span data-ttu-id="3a7c1-327">( *Kimlik* birincil anahtar olduğundan ve bu nedenle benzersiz olması gerektiğinden, bu şekilde yalnızca bir ürün kaydı seçilebilir.) Bu `Select` bildirimine geçirilecek KIMLIK değerini almak için, URL 'nin bir parçası olarak, aşağıdaki sözdizimini kullanarak sayfaya geçirilen değeri okuyabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-327">(Because *Id* is the primary key and therefore must be unique, only one product record can ever be selected this way.) To get the ID value to pass to this `Select` statement, you can read the value that's passed to the page as part of the URL, using the following syntax:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample15.cs)]

    <span data-ttu-id="3a7c1-328">Ürün kaydını gerçekten getirmek için, yalnızca bir kayıt döndüren `QuerySingle` yöntemini kullanırsınız:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-328">To actually fetch the product record, you use the `QuerySingle` method, which will return just one record:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample16.cs)]

    <span data-ttu-id="3a7c1-329">Tek satır `row` değişkenine döndürülür.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-329">The single row is returned into the `row` variable.</span></span> <span data-ttu-id="3a7c1-330">Her sütundan veri alabilir ve bunu şöyle yerel değişkenlere atayabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-330">You can get data out of each column and assign it to local variables like this:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample17.cs)]

    <span data-ttu-id="3a7c1-331">Formun biçimlendirmesinde, bu değerler, aşağıdaki gibi katıştırılmış kod kullanılarak tek tek metin kutularında otomatik olarak görüntülenir:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-331">In the markup for the form, these values are displayed automatically in individual text boxes by using embedded code like the following:</span></span>

    [!code-html[Main](5-working-with-data/samples/sample18.html)]

    <span data-ttu-id="3a7c1-332">Kodun bu bölümü, güncellenen ürün kaydını görüntüler.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-332">That part of the code displays the product record to be updated.</span></span> <span data-ttu-id="3a7c1-333">Kayıt görüntülenirken, Kullanıcı sütunları tek tek düzenleyebilir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-333">Once the record has been displayed, the user can edit individual columns.</span></span>

    <span data-ttu-id="3a7c1-334">Kullanıcı, formu **Güncelleştir** düğmesine tıklayarak gönderdiğinde, `if(IsPost)` bloğundaki kod çalıştırılır.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-334">When the user submits the form by clicking the **Update** button, the code in the `if(IsPost)` block runs.</span></span> <span data-ttu-id="3a7c1-335">Bu, kullanıcının `Request` nesnesinden değerlerini alır, değerleri değişkenlerde depolar ve her bir sütunun doldurulduğunu doğrular.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-335">This gets the user's values from the `Request` object, stores the values in variables, and validates that each column has been filled in.</span></span> <span data-ttu-id="3a7c1-336">Doğrulama başarılı olursa, kod aşağıdaki SQL Update ifadesini oluşturur:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-336">If validation passes, the code creates the following SQL Update statement:</span></span>

    [!code-sql[Main](5-working-with-data/samples/sample19.sql)]

    <span data-ttu-id="3a7c1-337">Bir SQL `Update` ifadesinde güncelleştirilecek her sütunu ve ayarlanacak değeri belirtirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-337">In a SQL `Update` statement, you specify each column to update and the value to set it to.</span></span> <span data-ttu-id="3a7c1-338">Bu kodda, değerler `@0`, `@1`, `@2`vb. parametre yer tutucuları kullanılarak belirtilir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-338">In this code, the values are specified using the parameter placeholders `@0`, `@1`, `@2`, and so on.</span></span> <span data-ttu-id="3a7c1-339">(Daha önce belirtildiği gibi, güvenlik için, parametreleri kullanarak her zaman bir SQL ifadesine değer geçirmeniz gerekir.)</span><span class="sxs-lookup"><span data-stu-id="3a7c1-339">(As noted earlier, for security, you should always pass values to a SQL statement by using parameters.)</span></span>

    <span data-ttu-id="3a7c1-340">`db.Execute` yöntemini çağırdığınızda, değerleri içeren değişkenleri SQL deyimindeki parametrelere karşılık gelen sırayla geçirirsiniz:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-340">When you call the `db.Execute` method, you pass the variables that contain the values in the order that corresponds to the parameters in the SQL statement:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample20.cs)]

    <span data-ttu-id="3a7c1-341">`Update` deyimleri yürütüldükten sonra, kullanıcıyı düzenleme sayfasına yeniden yönlendirmek için aşağıdaki yöntemi çağırın:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-341">After the `Update` statement has been executed, you call the following method in order to redirect the user back to the edit page:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample21.cshtml)]

    <span data-ttu-id="3a7c1-342">Etki, kullanıcının veritabanındaki verilerin güncelleştirilmiş bir listesini görmüdür ve başka bir ürünü düzenleyebilirler.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-342">The effect is that the user sees an updated listing of the data in the database and can edit another product.</span></span>
6. <span data-ttu-id="3a7c1-343">Sayfayı kaydedin.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-343">Save the page.</span></span>
7. <span data-ttu-id="3a7c1-344">*Editproducts. cshtml* sayfasını çalıştırın (güncelleştirme sayfasını değil) ve ardından düzenlemek üzere bir ürün seçmek için **Düzenle** ' ye tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-344">Run the *EditProducts.cshtml* page (not the update page) and then click **Edit** to select a product to edit.</span></span> <span data-ttu-id="3a7c1-345">*UpdateProducts. cshtml* sayfası görüntülenir ve seçtiğiniz kaydı gösterir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-345">The *UpdateProducts.cshtml* page is displayed, showing the record you selected.</span></span>

    ![görüntüyle](5-working-with-data/_static/image8.jpg)
8. <span data-ttu-id="3a7c1-347">Değişiklik yapıp **Güncelleştir**' e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-347">Make a change and click **Update**.</span></span> <span data-ttu-id="3a7c1-348">Ürün listesi, güncelleştirilmiş verilerle birlikte gösterilir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-348">The products list is shown again with your updated data.</span></span>

## <a name="deleting-data-in-a-database"></a><span data-ttu-id="3a7c1-349">Veritabanındaki verileri silme</span><span class="sxs-lookup"><span data-stu-id="3a7c1-349">Deleting Data in a Database</span></span>

<span data-ttu-id="3a7c1-350">Bu bölümde, kullanıcıların *ürün veritabanı tablosundan bir ürünü silmesine* izin verilmektedir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-350">This section shows how to let users delete a product from the *Product* database table.</span></span> <span data-ttu-id="3a7c1-351">Örnek iki sayfadan oluşur.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-351">The example consists of two pages.</span></span> <span data-ttu-id="3a7c1-352">İlk sayfada, kullanıcılar silinecek bir kayıt seçer.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-352">In the first page, users select a record to delete.</span></span> <span data-ttu-id="3a7c1-353">Silinecek kayıt daha sonra ikinci bir sayfada görüntülenir ve bu da kayıtları silmek istediğini doğrulayabilirler.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-353">The record to be deleted is then displayed in a second page that lets them confirm that they want to delete the record.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="3a7c1-354">**Önemli** Bir üretim web sitesinde, genellikle verilerde değişiklik yapmasına izin verilen kişileri kısıtlayabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-354">**Important** In a production website, you typically restrict who's allowed to make changes to the data.</span></span> <span data-ttu-id="3a7c1-355">Üyeliği ayarlama ve kullanıcı sitede görevleri yerine getirmek için yetkilendirme yolları hakkında bilgi için bkz. [ASP.NET Web Pages sitesine güvenlik ve üyelik ekleme](https://go.microsoft.com/fwlink/?LinkId=202904).</span><span class="sxs-lookup"><span data-stu-id="3a7c1-355">For information about how to set up membership and about ways to authorize user to perform tasks on the site, see [Adding Security and Membership to an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202904).</span></span>

1. <span data-ttu-id="3a7c1-356">Web sitesinde *Listproductsfordelete. cshtml*adlı yenı bir cshtml dosyası oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-356">In the website, create a new CSHTML file named *ListProductsForDelete.cshtml*.</span></span>
2. <span data-ttu-id="3a7c1-357">Varolan biçimlendirmeyi aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-357">Replace the existing markup with the following:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample22.cshtml)]

    <span data-ttu-id="3a7c1-358">Bu sayfa, daha önce *Editproducts. cshtml* sayfasına benzerdir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-358">This page is similar to the *EditProducts.cshtml* page from earlier.</span></span> <span data-ttu-id="3a7c1-359">Ancak, her bir ürün için bir **düzenleme** bağlantısı görüntülemek yerine, bir **Delete** bağlantısı görüntüler.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-359">However, instead of displaying an **Edit** link for each product, it displays a **Delete** link.</span></span> <span data-ttu-id="3a7c1-360">**Silme** bağlantısı, biçimlendirmede aşağıdaki katıştırılmış kod kullanılarak oluşturulur:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-360">The **Delete** link is created using the following embedded code in the markup:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample23.cshtml)]

    <span data-ttu-id="3a7c1-361">Bu, kullanıcılar bağlantıya tıkladığınızda aşağıdakine benzer bir URL oluşturur:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-361">This creates a URL that looks like this when users click the link:</span></span>

    `http://<server>/DeleteProduct/4`

    <span data-ttu-id="3a7c1-362">URL, *DeleteProduct. cshtml* adlı bir sayfa çağırır (daha sonra oluşturacağınız) ve SILINECEK ürünün kimliğini (burada, 4) geçirir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-362">The URL calls a page named *DeleteProduct.cshtml* (which you'll create next) and passes it the ID of the product to delete (here, 4).</span></span>
3. <span data-ttu-id="3a7c1-363">Dosyayı kaydedin, ancak açık bırakın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-363">Save the file, but leave it open.</span></span>
4. <span data-ttu-id="3a7c1-364">*DeleteProduct. cshtml*adlı başka BIR cHTML dosyası oluşturun.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-364">Create another CHTML file named *DeleteProduct.cshtml*.</span></span> <span data-ttu-id="3a7c1-365">Var olan içeriği aşağıdaki ile değiştirin:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-365">Replace the existing content with the following:</span></span>

    [!code-cshtml[Main](5-working-with-data/samples/sample24.cshtml)]

    <span data-ttu-id="3a7c1-366">Bu sayfa *Listproductsfordelete. cshtml* tarafından çağrılır ve kullanıcıların bir ürünü silmek istediğini onaylamasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-366">This page is called by *ListProductsForDelete.cshtml* and lets users confirm that they want to delete a product.</span></span> <span data-ttu-id="3a7c1-367">Silinecek ürünü listelemek için aşağıdaki kodu kullanarak URL 'den silinecek ürünün KIMLIĞINI alırsınız:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-367">To list the product to be deleted, you get the ID of the product to delete from the URL using the following code:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample25.cs)]

    <span data-ttu-id="3a7c1-368">Daha sonra sayfa, kullanıcıdan kaydı gerçekten silmek için bir düğmeye tıklatabuyor.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-368">The page then asks the user to click a button to actually delete the record.</span></span> <span data-ttu-id="3a7c1-369">Bu önemli bir güvenlik ölçümüdür: Web sitenizde verileri güncelleştirme veya silme gibi hassas işlemler gerçekleştirdiğinizde, bu işlemler her zaman bir POST işlemi kullanılarak yapılmalıdır, bir alma işlemi değil.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-369">This is an important security measure: when you perform sensitive operations in your website like updating or deleting data, these operations should always be done using a POST operation, not a GET operation.</span></span> <span data-ttu-id="3a7c1-370">Siteniz, bir GET işlemi kullanılarak bir silme işleminin gerçekleştirilebilmesi için ayarlandıysa, herkes `http://<server>/DeleteProduct/4` gibi bir URL 'YI geçirebilir ve veritabanınızda istedikleri şeyi silebilir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-370">If your site is set up so that a delete operation can be performed using a GET operation, anyone can pass a URL like `http://<server>/DeleteProduct/4` and delete anything they want from your database.</span></span> <span data-ttu-id="3a7c1-371">Silmeyi ekleyerek ve silme işleminin yalnızca bir GÖNDERI kullanılarak gerçekleştirilebilmesi için sayfayı kodlayarak, sitenize bir güvenlik ölçüsü eklersiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-371">By adding the confirmation and coding the page so that the deletion can be performed only by using a POST, you add a measure of security to your site.</span></span>

    <span data-ttu-id="3a7c1-372">Gerçek silme işlemi, ilk olarak bu bir POST işlemi olduğunu ve KIMLIğIN boş olmadığını doğrulayan aşağıdaki kod kullanılarak gerçekleştirilir:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-372">The actual delete operation is performed using the following code, which first confirms that this is a post operation and that the ID isn't empty:</span></span>

    [!code-csharp[Main](5-working-with-data/samples/sample26.cs)]

    <span data-ttu-id="3a7c1-373">Kod, belirtilen kaydı silen bir SQL ifadesini çalıştırır ve ardından kullanıcıyı listeleme sayfasına yeniden yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-373">The code runs a SQL statement that deletes the specified record and then redirects the user back to the listing page.</span></span>
5. <span data-ttu-id="3a7c1-374">Bir tarayıcıda *Listproductsfordelete. cshtml* dosyasını çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-374">Run *ListProductsForDelete.cshtml* in a browser.</span></span>

    ![görüntüyle](5-working-with-data/_static/image9.jpg)
6. <span data-ttu-id="3a7c1-376">Ürünlerden biri için **silme** bağlantısına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-376">Click the **Delete** link for one of the products.</span></span> <span data-ttu-id="3a7c1-377">Bu kaydı silmek istediğinizi onaylamak için *DeleteProduct. cshtml* sayfası görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-377">The *DeleteProduct.cshtml* page is displayed to confirm that you want to delete that record.</span></span>
7. <span data-ttu-id="3a7c1-378">**Sil** düğmesine tıklayın.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-378">Click the **Delete** button.</span></span> <span data-ttu-id="3a7c1-379">Ürün kaydı silinir ve sayfa güncelleştirilmiş bir ürün listesi ile yenilenir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-379">The product record is deleted and the page is refreshed with an updated product listing.</span></span>

> [!TIP]
> 
> <a id="SB_ConnectingToADatabase"></a>
> ### <a name="connecting-to-a-database"></a><span data-ttu-id="3a7c1-380">Veritabanına bağlanma</span><span class="sxs-lookup"><span data-stu-id="3a7c1-380">Connecting to a Database</span></span>
> 
> <span data-ttu-id="3a7c1-381">Veritabanına iki şekilde bağlanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-381">You can connect to a database in two ways.</span></span> <span data-ttu-id="3a7c1-382">Birincisi `Database.Open` yöntemini kullanmaktır ve veritabanı dosyasının adını ( *. sdf* uzantısı) belirtmek için:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-382">The first is to use the `Database.Open` method and to specify the name of the database file (less the *.sdf* extension):</span></span>
> 
> `var db = Database.Open("SmallBakery");`
> 
> <span data-ttu-id="3a7c1-383">`Open` yöntemi bu olduğunu varsayar. *sdf* dosyası, Web sitesinin *App\_Data* klasöründedir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-383">The `Open` method assumes that the .*sdf* file is in the website's *App\_Data* folder.</span></span> <span data-ttu-id="3a7c1-384">Bu klasör, verileri tutmak için özel olarak tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-384">This folder is designed specifically for holding data.</span></span> <span data-ttu-id="3a7c1-385">Örneğin, Web sitesinin verileri okumasına ve yazmasına izin vermek için uygun izinlere sahip olması ve bir güvenlik ölçüsü olması, WebMatrix bu klasörden dosyalara erişime izin vermez.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-385">For example, it has appropriate permissions to allow the website to read and write data, and as a security measure, WebMatrix does not allow access to files from this folder.</span></span>
> 
> <span data-ttu-id="3a7c1-386">İkinci yöntem bir bağlantı dizesi kullanmaktır.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-386">The second way is to use a connection string.</span></span> <span data-ttu-id="3a7c1-387">Bir bağlantı dizesi, bir veritabanına nasıl bağlanılacağıyla ilgili bilgi içerir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-387">A connection string contains information about how to connect to a database.</span></span> <span data-ttu-id="3a7c1-388">Bu bir dosya yolu içerebilir veya bu sunucuya bağlanmak için bir Kullanıcı adı ve parola ile birlikte bir SQL Server veritabanının adını yerel veya uzak bir sunucuya dahil edebilir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-388">This can include a file path, or it can include the name of a SQL Server database on a local or remote server, along with a user name and password to connect to that server.</span></span> <span data-ttu-id="3a7c1-389">(Bir barındırma sağlayıcısının sitesi gibi SQL Server Merkezi olarak yönetilen bir sürümünde verileri tutarsanız, veritabanı bağlantı bilgilerini belirtmek için her zaman bir bağlantı dizesi kullanırsınız.)</span><span class="sxs-lookup"><span data-stu-id="3a7c1-389">(If you keep data in a centrally managed version of SQL Server, such as on a hosting provider's site, you always use a connection string to specify the database connection information.)</span></span>
> 
> <span data-ttu-id="3a7c1-390">WebMatrix 'te, bağlantı dizeleri genellikle *Web. config*ADLı bir XML dosyasında depolanır. Adından da anlaşılacağı gibi, sitenizin gerekli olabileceği bağlantı dizeleri de dahil olmak üzere, sitenin yapılandırma bilgilerini depolamak için Web sitenizin kökündeki bir *Web. config* dosyası kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-390">In WebMatrix, connection strings are usually stored in an XML file named *Web.config*. As the name implies, you can use a *Web.config* file in the root of your website to store the site's configuration information, including any connection strings that your site might require.</span></span> <span data-ttu-id="3a7c1-391">Bir *Web. config* dosyasındaki bağlantı dizesinin bir örneği aşağıdaki gibi görünebilir:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-391">An example of a connection string in a *Web.config* file might look like the following:</span></span>
> 
> [!code-xml[Main](5-working-with-data/samples/sample27.xml)]
> 
> <span data-ttu-id="3a7c1-392">Örnekte, bağlantı dizesi bir sunucuda çalışan bir SQL Server örneğindeki bir veritabanını (yerel *. sdf* dosyasının aksine) işaret eder.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-392">In the example, the connection string points to a database in an instance of SQL Server that's running on a server somewhere (as opposed to a local *.sdf* file).</span></span> <span data-ttu-id="3a7c1-393">`myServer` ve `myDatabase`ilgili adları yerine getirmeniz ve `username` ve `password`için SQL Server oturum açma değerlerini belirtmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-393">You would need to substitute the appropriate names for `myServer` and `myDatabase`, and specify SQL Server login values for `username` and `password`.</span></span> <span data-ttu-id="3a7c1-394">(Kullanıcı adı ve parola değerleri, Windows kimlik bilgilerinizle aynı veya barındırma sağlayıcınızın kendi sunucularında oturum açmak için size verdiği değerler olarak aynı değildir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-394">(The username and password values are not necessarily the same as your Windows credentials or as the values that your hosting provider has given you for logging in to their servers.</span></span> <span data-ttu-id="3a7c1-395">İhtiyaç duyduğunuz tam değerler için yöneticiye danışın.)</span><span class="sxs-lookup"><span data-stu-id="3a7c1-395">Check with the administrator for the exact values you need.)</span></span>
> 
> <span data-ttu-id="3a7c1-396">`Database.Open` yöntemi esnektir, çünkü bir Database *. sdf* dosyasının veya *Web. config* dosyasında depolanan bir bağlantı dizesinin adını geçirmenize izin verir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-396">The `Database.Open` method is flexible, because it lets you pass either the name of a database *.sdf* file or the name of a connection string that's stored in the *Web.config* file.</span></span> <span data-ttu-id="3a7c1-397">Aşağıdaki örnek, önceki örnekte gösterilen bağlantı dizesi kullanılarak veritabanına nasıl bağlanılacağını gösterir:</span><span class="sxs-lookup"><span data-stu-id="3a7c1-397">The following example shows how to connect to the database using the connection string illustrated in the previous example:</span></span>
> 
> [!code-cshtml[Main](5-working-with-data/samples/sample28.cshtml)]
> 
> <span data-ttu-id="3a7c1-398">Belirtildiği gibi `Database.Open` yöntemi, bir veritabanı adı veya bağlantı dizesi iletmenize olanak tanır ve bunu kullanmayı da anlayabilir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-398">As noted, the `Database.Open` method lets you pass either a database name or a connection string, and it'll figure out which to use.</span></span> <span data-ttu-id="3a7c1-399">Bu, Web sitenizi dağıtırken (yayımladığınızda) çok yararlı olur.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-399">This is very useful when you deploy (publish) your website.</span></span> <span data-ttu-id="3a7c1-400">Sitenizi geliştirirken ve sınarken *App\_Data* klasöründe bir *. sdf* dosyası kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-400">You can use an *.sdf* file in the *App\_Data* folder when you're developing and testing your site.</span></span> <span data-ttu-id="3a7c1-401">Daha sonra, sitenizi bir üretim sunucusuna taşıdığınızda, *Web. config* dosyasında *. sdf* dosyanız ile aynı ada sahip olan ancak bu, barındırma sağlayıcısının veritabanına &#8212; , kodunuzu değiştirmeye gerek kalmadan işaret eden bir bağlantı dizesi kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-401">Then when you move your site to a production server, you can use a connection string in the *Web.config* file that has the same name as your *.sdf* file but that points to the hosting provider's database &#8212; all without having to change your code.</span></span>
> 
> <span data-ttu-id="3a7c1-402">Son olarak, bir bağlantı dizesiyle doğrudan çalışmak istiyorsanız, `Database.OpenConnectionString` yöntemini çağırabilir ve *Web. config* dosyasında yalnızca birinin adı yerine gerçek bağlantı dizesine geçirebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-402">Finally, if you want to work directly with a connection string, you can call the `Database.OpenConnectionString` method and pass it the actual connection string instead of just the name of one in the *Web.config* file.</span></span> <span data-ttu-id="3a7c1-403">Bu, bazı nedenlerle bağlantı dizesine (veya *. sdf* dosya adı gibi) erişim sahibi olmadığınız durumlarda, sayfa çalışmadığı sürece yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-403">This might be useful in situations where for some reason you don't have access to the connection string (or values in it, such as the *.sdf* file name) until the page is running.</span></span> <span data-ttu-id="3a7c1-404">Ancak çoğu senaryoda, bu makalede açıklandığı gibi `Database.Open` kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="3a7c1-404">However, for most scenarios, you can use `Database.Open` as described in this article.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="3a7c1-405">Ek Kaynaklar</span><span class="sxs-lookup"><span data-stu-id="3a7c1-405">Additional Resources</span></span>

- [<span data-ttu-id="3a7c1-406">SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="3a7c1-406">SQL Server Compact</span></span>](https://www.microsoft.com/sqlserver/2008/en/us/compact.aspx)
- [<span data-ttu-id="3a7c1-407">WebMatrix 'te bir SQL Server veya MySQL veritabanına bağlanma</span><span class="sxs-lookup"><span data-stu-id="3a7c1-407">Connecting to a SQL Server or MySQL Database in WebMatrix</span></span>](https://go.microsoft.com/fwlink/?LinkId=208661)
- [<span data-ttu-id="3a7c1-408">ASP.NET Web Sayfaları Sitelerinde Kullanıcı Girişini Doğrulama</span><span class="sxs-lookup"><span data-stu-id="3a7c1-408">Validating User Input in ASP.NET Web Pages Sites</span></span>](https://go.microsoft.com/fwlink/?LinkId=253002)
