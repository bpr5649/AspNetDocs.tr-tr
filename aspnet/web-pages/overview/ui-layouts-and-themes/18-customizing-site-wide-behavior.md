---
uid: web-pages/overview/ui-layouts-and-themes/18-customizing-site-wide-behavior
title: ASP.NET Web Pages (Razor) siteleri için site genelinde davranışı özelleştirme | Microsoft Docs
author: Rick-Anderson
description: Bu bölümde, yalnızca bir sayfa yerine tüm Web sitenizde veya bir klasörün tamamına yönelik ayarların nasıl yapılacağı açıklanmaktadır.
ms.author: riande
ms.date: 02/17/2014
ms.assetid: e158bed7-226f-4275-b02e-7553bd58c669
msc.legacyurl: /web-pages/overview/ui-layouts-and-themes/18-customizing-site-wide-behavior
msc.type: authoredcontent
ms.openlocfilehash: f05e05f725d9209bce283ce18659ae5efe4de2ee
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78634626"
---
# <a name="customizing-site-wide-behavior-for-aspnet-web-pages-razor-sites"></a><span data-ttu-id="026d1-103">ASP.NET Web Pages (Razor) siteleri için site genelinde davranışı özelleştirme</span><span class="sxs-lookup"><span data-stu-id="026d1-103">Customizing Site-Wide Behavior for ASP.NET Web Pages (Razor) Sites</span></span>

<span data-ttu-id="026d1-104">[Tom FitzMacken](https://github.com/tfitzmac) tarafından</span><span class="sxs-lookup"><span data-stu-id="026d1-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="026d1-105">Bu makalede, ASP.NET Web Pages (Razor) Web sitesinde sayfalar için site tarafı ayarlarının nasıl yapılacağı açıklanır.</span><span class="sxs-lookup"><span data-stu-id="026d1-105">This article explains how to make site-side settings for pages in an ASP.NET Web Pages (Razor) website.</span></span>
> 
> <span data-ttu-id="026d1-106">Öğrenecekleriniz:</span><span class="sxs-lookup"><span data-stu-id="026d1-106">What you'll learn:</span></span>
> 
> - <span data-ttu-id="026d1-107">Bir sitedeki tüm sayfalar için değerleri (genel değerler veya Yardım ayarları) ayarlamanıza olanak tanıyan kodu çalıştırma.</span><span class="sxs-lookup"><span data-stu-id="026d1-107">How to run code that lets you set values (global values or helper settings) for all pages in a site.</span></span>
> - <span data-ttu-id="026d1-108">Bir klasördeki tüm sayfalar için değerleri ayarlamanıza olanak tanıyan kodu çalıştırma.</span><span class="sxs-lookup"><span data-stu-id="026d1-108">How to run code that lets you set values for all pages in a folder.</span></span>
> - <span data-ttu-id="026d1-109">Bir sayfa yüklenmeden önce ve sonra kodu çalıştırma.</span><span class="sxs-lookup"><span data-stu-id="026d1-109">How to run code before and after a page loads.</span></span>
> - <span data-ttu-id="026d1-110">Merkezi hata sayfasına hata gönderme.</span><span class="sxs-lookup"><span data-stu-id="026d1-110">How to send errors to a central error page.</span></span>
> - <span data-ttu-id="026d1-111">Bir klasördeki tüm sayfalara kimlik doğrulaması ekleme.</span><span class="sxs-lookup"><span data-stu-id="026d1-111">How to add authentication to all pages in a folder.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="026d1-112">Öğreticide kullanılan yazılım sürümleri</span><span class="sxs-lookup"><span data-stu-id="026d1-112">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="026d1-113">ASP.NET Web sayfaları (Razor) 2</span><span class="sxs-lookup"><span data-stu-id="026d1-113">ASP.NET Web Pages (Razor) 2</span></span>
> - <span data-ttu-id="026d1-114">WebMatrix 3</span><span class="sxs-lookup"><span data-stu-id="026d1-114">WebMatrix 3</span></span>
> - <span data-ttu-id="026d1-115">ASP.NET Web yardımcıları kitaplığı (NuGet paketi)</span><span class="sxs-lookup"><span data-stu-id="026d1-115">ASP.NET Web Helpers Library (NuGet package)</span></span>
>   
> 
> <span data-ttu-id="026d1-116">Bu öğretici, ASP.NET Web yardımcıları kitaplığını kullanana ASP.NET Web sayfaları 3 ve Visual Studio 2013 (Visual Studio Express veya Web için 2013) ile de kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="026d1-116">This tutorial also works with ASP.NET Web Pages 3 and Visual Studio 2013 (or Visual Studio Express 2013 for Web), except you cannot use the ASP.NET Web Helpers Library.</span></span>

<a id="Adding_Website_Startup_Code"></a>
## <a name="adding-website-startup-code-for-aspnet-web-pages"></a><span data-ttu-id="026d1-117">ASP.NET Web sayfaları için Web sitesi başlangıç kodu ekleme</span><span class="sxs-lookup"><span data-stu-id="026d1-117">Adding Website Startup Code for ASP.NET Web Pages</span></span>

<span data-ttu-id="026d1-118">ASP.NET Web sayfalarına yazdığınız kodun büyük bölümü için, tek bir sayfa, Bu sayfa için gereken tüm kodu içerebilir.</span><span class="sxs-lookup"><span data-stu-id="026d1-118">For much of the code that you write in ASP.NET Web Pages, an individual page can contain all the code that's required for that page.</span></span> <span data-ttu-id="026d1-119">Örneğin, bir sayfa bir e-posta iletisi gönderirse, bu işlem için tüm kodu tek bir sayfada yerleştirmek mümkündür.</span><span class="sxs-lookup"><span data-stu-id="026d1-119">For example, if a page sends an email message, it's possible to put all the code for that operation in a single page.</span></span> <span data-ttu-id="026d1-120">Bu, e-posta gönderme (SMTP sunucusu için) ve e-posta iletisini gönderme ayarlarını başlatacak kodu içerebilir.</span><span class="sxs-lookup"><span data-stu-id="026d1-120">This can include the code to initialize the settings for sending email (that is, for the SMTP server) and for sending the email message.</span></span>

<span data-ttu-id="026d1-121">Ancak bazı durumlarda, sitedeki herhangi bir sayfanın çalıştırılmadan önce bazı kodlar çalıştırmak isteyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="026d1-121">However, in some situations, you might want to run some code before any page on the site runs.</span></span> <span data-ttu-id="026d1-122">Bu, sitede herhangi bir yerde kullanılabilecek değerleri ayarlamak için yararlıdır ( *genel değerler*olarak adlandırılır.) Örneğin, bazı yardımcılar e-posta ayarları veya hesap anahtarları gibi değerler sağlamanızı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="026d1-122">This is useful for setting values that can be used anywhere in the site (referred to as *global values*.) For example, some helpers require you to provide values like email settings or account keys.</span></span> <span data-ttu-id="026d1-123">Bu ayarları genel değerlerde tutmak yararlı olabilir.</span><span class="sxs-lookup"><span data-stu-id="026d1-123">It can be handy to keep these settings in global values.</span></span>

<span data-ttu-id="026d1-124">Bunu, site kökünde *AppStart. cshtml\_* adlı bir sayfa oluşturarak yapabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="026d1-124">You can do this by creating a page named *\_AppStart.cshtml* in the root of the site.</span></span> <span data-ttu-id="026d1-125">Bu sayfa varsa, sitede herhangi bir sayfa istendiğinde ilk kez çalışır.</span><span class="sxs-lookup"><span data-stu-id="026d1-125">If this page exists, it runs the first time any page in the site is requested.</span></span> <span data-ttu-id="026d1-126">Bu nedenle, genel değerleri ayarlamak için kodu çalıştırmak iyi bir yerdir.</span><span class="sxs-lookup"><span data-stu-id="026d1-126">Therefore, it's a good place to run code to set global values.</span></span> <span data-ttu-id="026d1-127">( *\_AppStart. cshtml* 'nin bir alt çizgi öneki olduğundan, ASP.net doğrudan istekte bulunsa bile sayfayı tarayıcıya göndermez.)</span><span class="sxs-lookup"><span data-stu-id="026d1-127">(Because *\_AppStart.cshtml* has an underscore prefix, ASP.NET won't send the page to a browser even if users request it directly.)</span></span>

<span data-ttu-id="026d1-128">Aşağıdaki diyagramda *\_AppStart. cshtml* sayfasının nasıl çalıştığı gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="026d1-128">The following diagram shows how the *\_AppStart.cshtml* page works.</span></span> <span data-ttu-id="026d1-129">Bir sayfa için bir istek geldiğinde ve bu, sitedeki herhangi bir sayfa için ilk istek ise, ASP.NET önce *\_AppStart. cshtml* sayfasının var olup olmadığını denetler.</span><span class="sxs-lookup"><span data-stu-id="026d1-129">When a request comes in for a page, and if this is the first request for any page in the site, ASP.NET first checks whether a *\_AppStart.cshtml* page exists.</span></span> <span data-ttu-id="026d1-130">Bu durumda, *\_AppStart. cshtml* sayfasındaki tüm kodlar çalışır ve sonra istenen sayfa çalışır.</span><span class="sxs-lookup"><span data-stu-id="026d1-130">If so, any code in the *\_AppStart.cshtml* page runs, and then the requested page runs.</span></span>

![görüntüyle](18-customizing-site-wide-behavior/_static/image1.jpg)

## <a name="setting-global-values-for-your-website"></a><span data-ttu-id="026d1-132">Web siteniz için genel değerleri ayarlama</span><span class="sxs-lookup"><span data-stu-id="026d1-132">Setting Global Values for Your Website</span></span>

1. <span data-ttu-id="026d1-133">WebMatrix Web sitesinin kök klasöründe *\_AppStart. cshtml*adlı bir dosya oluşturun.</span><span class="sxs-lookup"><span data-stu-id="026d1-133">In the root folder of a WebMatrix website, create a file named *\_AppStart.cshtml*.</span></span> <span data-ttu-id="026d1-134">Dosya, sitenin kökünde olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="026d1-134">The file must be in the root of the site.</span></span>
2. <span data-ttu-id="026d1-135">Var olan içeriği aşağıdaki ile değiştirin:</span><span class="sxs-lookup"><span data-stu-id="026d1-135">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](18-customizing-site-wide-behavior/samples/sample1.cshtml)]

    <span data-ttu-id="026d1-136">Bu kod, sitedeki tüm sayfalar için otomatik olarak kullanılabilen `AppState` sözlüğünde bir değer depolar.</span><span class="sxs-lookup"><span data-stu-id="026d1-136">This code stores a value in the `AppState` dictionary, which is automatically available to all pages in the site.</span></span> <span data-ttu-id="026d1-137">*\_AppStart. cshtml* dosyasında hiçbir biçimlendirme olmadığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="026d1-137">Notice that the *\_AppStart.cshtml* file does not have any markup in it.</span></span> <span data-ttu-id="026d1-138">Sayfa kodu çalıştırır ve ardından başlangıçta istenen sayfaya yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="026d1-138">The page will run the code and then redirect to the page that was originally requested.</span></span>

    > [!NOTE]
    > <span data-ttu-id="026d1-139">*\_AppStart. cshtml* dosyasına kod yerleştirdiğinizde dikkatli olun.</span><span class="sxs-lookup"><span data-stu-id="026d1-139">Be careful when you put code in the *\_AppStart.cshtml* file.</span></span> <span data-ttu-id="026d1-140">*\_AppStart. cshtml* dosyasındaki kodda herhangi bir hata oluşursa, Web sitesi başlatılmaz.</span><span class="sxs-lookup"><span data-stu-id="026d1-140">If any errors occur in code in the *\_AppStart.cshtml* file, the website won't start.</span></span>
3. <span data-ttu-id="026d1-141">Kök klasörde, *appname. cshtml*adlı yeni bir sayfa oluşturun.</span><span class="sxs-lookup"><span data-stu-id="026d1-141">In the root folder, create a new page named *AppName.cshtml*.</span></span>
4. <span data-ttu-id="026d1-142">Varsayılan biçimlendirmeyi ve kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="026d1-142">Replace the default markup and code with the following:</span></span> 

    [!code-html[Main](18-customizing-site-wide-behavior/samples/sample2.html)]

    <span data-ttu-id="026d1-143">Bu kod, *\_AppStart. cshtml* sayfasında ayarladığınız `AppState` nesnesinden değeri ayıklar.</span><span class="sxs-lookup"><span data-stu-id="026d1-143">This code extracts the value from the `AppState` object that you set in the *\_AppStart.cshtml* page.</span></span>
5. <span data-ttu-id="026d1-144">*Appname. cshtml* sayfasını bir tarayıcıda çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="026d1-144">Run the *AppName.cshtml* page in a browser.</span></span> <span data-ttu-id="026d1-145">(Çalıştırmadan önce sayfanın **dosyalar** çalışma alanında seçili olduğundan emin olun.) Sayfa, genel değeri görüntüler.</span><span class="sxs-lookup"><span data-stu-id="026d1-145">(Make sure the page is selected in the **Files** workspace before you run it.) The page displays the global value.</span></span> 

    ![görüntüyle](18-customizing-site-wide-behavior/_static/image2.jpg)

<a id="Setting_Values_For_Helpers"></a>
## <a name="setting-values-for-helpers"></a><span data-ttu-id="026d1-147">Yardımcılar için değerleri ayarlama</span><span class="sxs-lookup"><span data-stu-id="026d1-147">Setting Values for Helpers</span></span>

<span data-ttu-id="026d1-148">*\_AppStart. cshtml* dosyası için iyi bir kullanım, sitenizde kullandığınız ve başlatılması gereken yardımcıların değerlerini ayarlamanıza yöneliktir.</span><span class="sxs-lookup"><span data-stu-id="026d1-148">A good use for the *\_AppStart.cshtml* file is to set values for helpers that you use in your site and that have to be initialized.</span></span> <span data-ttu-id="026d1-149">Tipik örnekler, `WebMail` Yardımcısı için e-posta ayarları ve `ReCaptcha` Yardımcısı için özel ve genel anahtarlardır.</span><span class="sxs-lookup"><span data-stu-id="026d1-149">Typical examples are email settings for the `WebMail` helper and the private and public keys for the `ReCaptcha` helper.</span></span> <span data-ttu-id="026d1-150">Bunlar gibi durumlarda, değerleri *AppStart. cshtml\_* bir kez ayarlayabilir ve ardından sitenizdeki tüm sayfalar için önceden ayarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="026d1-150">In cases like these, you can set the values once in the *\_AppStart.cshtml* and then they're already set for all the pages in your site.</span></span>

<span data-ttu-id="026d1-151">Bu yordamda `WebMail` ayarlarının küresel olarak nasıl ayarlanacağı gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="026d1-151">This procedure shows you how to set `WebMail` settings globally.</span></span> <span data-ttu-id="026d1-152">(`WebMail` Yardımcısını kullanma hakkında daha fazla bilgi için bkz. [ASP.NET Web Pages sitesine e-posta ekleme](../getting-started/11-adding-email-to-your-web-site.md).)</span><span class="sxs-lookup"><span data-stu-id="026d1-152">(For more information about using the `WebMail` helper, see [Adding Email to an ASP.NET Web Pages Site](../getting-started/11-adding-email-to-your-web-site.md).)</span></span>

1. <span data-ttu-id="026d1-153">ASP.NET Web yardımcıları kitaplığını, daha önce eklemediyseniz [bir ASP.NET Web sayfaları sitesine yardımcılar yükleme](https://go.microsoft.com/fwlink/?LinkId=252372)başlığı altında açıklandığı gibi Web sitenize ekleyin.</span><span class="sxs-lookup"><span data-stu-id="026d1-153">Add the ASP.NET Web Helpers Library to your website as described in [Installing Helpers in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=252372), if you haven't already added it.</span></span>
2. <span data-ttu-id="026d1-154">Zaten bir *\_AppStart. cshtml* dosyanız yoksa bir Web sitesinin kök klasöründe *\_AppStart. cshtml*adlı bir dosya oluşturun.</span><span class="sxs-lookup"><span data-stu-id="026d1-154">If you don't already have a *\_AppStart.cshtml* file, in the root folder of a website create a file named *\_AppStart.cshtml*.</span></span>
3. <span data-ttu-id="026d1-155">Aşağıdaki `WebMail` ayarlarını *\_AppStart. cshtml* dosyasına ekleyin:</span><span class="sxs-lookup"><span data-stu-id="026d1-155">Add the following `WebMail` settings to the *\_AppStart.cshtml* file:</span></span> 

    [!code-cshtml[Main](18-customizing-site-wide-behavior/samples/sample3.cshtml?highlight=2-7)]

    <span data-ttu-id="026d1-156">Koddaki aşağıdaki e-posta ile ilgili ayarları değiştirin:</span><span class="sxs-lookup"><span data-stu-id="026d1-156">Modify the following email related settings in the code:</span></span>

   - <span data-ttu-id="026d1-157">`your-SMTP-host`, erişiminiz olan SMTP sunucusunun adına ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="026d1-157">Set `your-SMTP-host` to the name of the SMTP server that you have access to.</span></span>
   - <span data-ttu-id="026d1-158">`your-user-name-here`, SMTP sunucusu hesabınızın kullanıcı adına ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="026d1-158">Set `your-user-name-here` to the user name for your SMTP server account.</span></span>
   - <span data-ttu-id="026d1-159">SMTP sunucusu hesabınızın parolasını `your-account-password` ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="026d1-159">Set `your-account-password` to the password for your SMTP server account.</span></span>
   - <span data-ttu-id="026d1-160">`your-email-address-here` kendi e-posta adresinizi ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="026d1-160">Set `your-email-address-here` to your own email address.</span></span> <span data-ttu-id="026d1-161">Bu, iletinin gönderildiği e-posta adresidir.</span><span class="sxs-lookup"><span data-stu-id="026d1-161">This is the email address that the message is sent from.</span></span> <span data-ttu-id="026d1-162">(Bazı e-posta sağlayıcıları farklı bir `From` adresi belirtmenize izin vermez ve Kullanıcı adınızı `From` adresi olarak kullanır.)</span><span class="sxs-lookup"><span data-stu-id="026d1-162">(Some email providers don't let you specify a different `From` address and will use your user name as the `From` address.)</span></span>

     <span data-ttu-id="026d1-163">SMTP ayarları hakkında daha fazla bilgi [için bkz.](https://go.microsoft.com/fwlink/?LinkID=202899#configuring_email_settings) [ASP.NET Web Pages (Razor) sitesinden e-posta gönderme](https://go.microsoft.com/fwlink/?LinkID=202899) ve [ASP.NET Web Pages (Razor) sorun giderme kılavuzunda](https://go.microsoft.com/fwlink/?LinkId=253001)e [-posta gönderme sorunları](https://go.microsoft.com/fwlink/?LinkId=253001#email) .</span><span class="sxs-lookup"><span data-stu-id="026d1-163">For more information about SMTP settings, see [Configuring Email Settings](https://go.microsoft.com/fwlink/?LinkID=202899#configuring_email_settings) in the article [Sending Email from an ASP.NET Web Pages (Razor) Site](https://go.microsoft.com/fwlink/?LinkID=202899) and [Issues with Sending Email](https://go.microsoft.com/fwlink/?LinkId=253001#email) in the [ASP.NET Web Pages (Razor) Troubleshooting Guide](https://go.microsoft.com/fwlink/?LinkId=253001).</span></span>
4. <span data-ttu-id="026d1-164">*\_AppStart. cshtml* dosyasını kaydedin ve kapatın.</span><span class="sxs-lookup"><span data-stu-id="026d1-164">Save the *\_AppStart.cshtml* file and close it.</span></span>
5. <span data-ttu-id="026d1-165">Bir Web sitesinin kök klasöründe, *TestEmail. cshtml*adlı yeni bir sayfa oluşturun.</span><span class="sxs-lookup"><span data-stu-id="026d1-165">In the root folder of a website, create new page named *TestEmail.cshtml*.</span></span>
6. <span data-ttu-id="026d1-166">Var olan içeriği aşağıdaki ile değiştirin:</span><span class="sxs-lookup"><span data-stu-id="026d1-166">Replace the existing content with the following:</span></span> 

     [!code-cshtml[Main](18-customizing-site-wide-behavior/samples/sample4.cshtml)]
7. <span data-ttu-id="026d1-167">*TestEmail. cshtml* sayfasını bir tarayıcıda çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="026d1-167">Run the *TestEmail.cshtml* page in a browser.</span></span>
8. <span data-ttu-id="026d1-168">Kendinize bir e-posta iletisi göndermek için alanları doldurup **Gönder**' e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="026d1-168">Fill in the fields to send yourself an email message and then click **Send**.</span></span>
9. <span data-ttu-id="026d1-169">İletiyi aldığınızdan emin olmak için e-postanızı kontrol edin.</span><span class="sxs-lookup"><span data-stu-id="026d1-169">Check your email to make sure you've gotten the message.</span></span>

<span data-ttu-id="026d1-170">Bu örneğin önemli bölümü, genellikle değiştirmediğiniz ayarların (SMTP sunucunuzun adı ve e-posta kimlik bilgileriniz gibi) *\_AppStart. cshtml* dosyasında ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="026d1-170">The important part of this example is that the settings that you don't usually change — like the name of your SMTP server and your email credentials — are set in the *\_AppStart.cshtml* file.</span></span> <span data-ttu-id="026d1-171">Bu şekilde, e-posta göndereceğiniz her sayfada bunları tekrar ayarlamanız gerekmez.</span><span class="sxs-lookup"><span data-stu-id="026d1-171">That way you don't need to set them again in each page where you send email.</span></span> <span data-ttu-id="026d1-172">(Bazı nedenlerle bu ayarları değiştirmeniz gerekiyorsa, bunları bir sayfada ayrı ayrı ayarlayabilirsiniz.) Sayfada yalnızca, alıcı ve e-posta iletisinin gövdesi gibi her seferinde genellikle değişen değerleri ayarlarsınız.</span><span class="sxs-lookup"><span data-stu-id="026d1-172">(Although if for some reason you need to change those settings, you can set them individually in a page.) In the page, you only set the values that typically change each time, like the recipient and the body of the email message.</span></span>

<a id="Running_Code_Before_and_After"></a>
## <a name="running-code-before-and-after-files-in-a-folder"></a><span data-ttu-id="026d1-173">Bir klasördeki dosyalardan önce ve sonra kod çalıştırma</span><span class="sxs-lookup"><span data-stu-id="026d1-173">Running Code Before and After Files in a Folder</span></span>

<span data-ttu-id="026d1-174">Site çalıştırmadan sayfalardan önce kod yazmak üzere *AppStart. cshtml\_* de kullanabilirsiniz. belirli bir klasördeki herhangi bir sayfadan önce (ve sonra) çalışan bir kod yazabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="026d1-174">Just like you can use *\_AppStart.cshtml* to write code before pages in the site run, you can write code that runs before (and after) any page in a particular folder run.</span></span> <span data-ttu-id="026d1-175">Bu, bir klasördeki tüm sayfalar için aynı düzen sayfasını ayarlama veya bir kullanıcının klasörde bir sayfa çalıştırmadan önce oturum açmış olduğunu denetleme gibi şeyler için yararlıdır.</span><span class="sxs-lookup"><span data-stu-id="026d1-175">This is useful for things like setting the same layout page for all the pages in a folder, or for checking that a user is logged in before running a page in the folder.</span></span>

<span data-ttu-id="026d1-176">Belirli klasörlerdeki sayfalar için, *\_PageStart. cshtml*adlı bir dosyada kod oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="026d1-176">For pages in particular folders, you can create code in a file named *\_PageStart.cshtml*.</span></span> <span data-ttu-id="026d1-177">Aşağıdaki diyagramda *\_PageStart. cshtml* sayfasının nasıl çalıştığı gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="026d1-177">The following diagram shows how the *\_PageStart.cshtml* page works.</span></span> <span data-ttu-id="026d1-178">Bir sayfa için bir istek geldiğinde, ASP.NET önce *\_AppStart. cshtml* sayfasını denetler ve bunu çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="026d1-178">When a request comes in for a page, ASP.NET first checks for a *\_AppStart.cshtml* page and runs that.</span></span> <span data-ttu-id="026d1-179">Ardından ASP.NET bir *\_PageStart. cshtml* sayfası olup olmadığını denetler ve varsa bunu çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="026d1-179">Then ASP.NET checks whether there's a *\_PageStart.cshtml* page, and if so, runs that.</span></span> <span data-ttu-id="026d1-180">Ardından istenen sayfayı çalıştırır.</span><span class="sxs-lookup"><span data-stu-id="026d1-180">It then runs the requested page.</span></span>

<span data-ttu-id="026d1-181">*\_PageStart. cshtml* sayfasında, bir `RunPage` yöntemi ekleyerek istenen sayfanın çalıştırılmasını istediğiniz yeri belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="026d1-181">Inside the *\_PageStart.cshtml* page, you can specify where during processing you want the requested page to run by including a `RunPage` method.</span></span> <span data-ttu-id="026d1-182">Bu, istenen sayfa çalıştırılmadan önce ve sonra yeniden kod çalıştırmanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="026d1-182">This lets you run code before the requested page runs and then again after it.</span></span> <span data-ttu-id="026d1-183">`RunPage`eklemezseniz, *\_PageStart. cshtml* dosyasındaki tüm kodlar çalışır ve sonra istenen sayfa otomatik olarak çalışır.</span><span class="sxs-lookup"><span data-stu-id="026d1-183">If you don't include `RunPage`, all the code in *\_PageStart.cshtml* runs, and then the requested page runs automatically.</span></span>

![görüntüyle](18-customizing-site-wide-behavior/_static/image3.jpg)

<span data-ttu-id="026d1-185">ASP.NET, *\_PageStart. cshtml* dosyaları hiyerarşisi oluşturmanızı sağlar.</span><span class="sxs-lookup"><span data-stu-id="026d1-185">ASP.NET lets you create a hierarchy of *\_PageStart.cshtml* files.</span></span> <span data-ttu-id="026d1-186">Bir *\_PageStart. cshtml* dosyasını sitenin köküne ve herhangi bir alt klasöre koyabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="026d1-186">You can put a *\_PageStart.cshtml* file in the root of the site and in any subfolder.</span></span> <span data-ttu-id="026d1-187">Bir sayfa istendiğinde, en üst düzeydeki *\_PageStart. cshtml* dosyası (site köküne en yakın) çalışır ve ardından sonraki alt klasördeki *\_pagestart.* cshtml dosyası ve bu, istek istenen sayfayı içeren klasöre ulaşıncaya kadar alt klasör yapısını yavaşlatır.</span><span class="sxs-lookup"><span data-stu-id="026d1-187">When a page is requested, the *\_PageStart.cshtml* file at the top-most level (nearest to the site root) runs, followed by the *\_PageStart.cshtml* file in the next subfolder, and so on down the subfolder structure until the request reaches the folder that contains the requested page.</span></span> <span data-ttu-id="026d1-188">Tüm uygulanabilir *\_PageStart. cshtml* dosyaları çalıştıktan sonra, istenen sayfa çalışır.</span><span class="sxs-lookup"><span data-stu-id="026d1-188">After all the applicable *\_PageStart.cshtml* files have run, the requested page runs.</span></span>

<span data-ttu-id="026d1-189">Örneğin, aşağıdaki *\_PageStart. cshtml* dosyaları ve *default. cshtml* dosyası birleşimine sahip olabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="026d1-189">For example, you might have the following combination of *\_PageStart.cshtml* files and *Default.cshtml* file:</span></span>

[!code-cshtml[Main](18-customizing-site-wide-behavior/samples/sample5.cshtml)]

[!code-cshtml[Main](18-customizing-site-wide-behavior/samples/sample6.cshtml)]

[!code-cshtml[Main](18-customizing-site-wide-behavior/samples/sample7.cshtml)]

<span data-ttu-id="026d1-190">*/MyFolder/default.exe*komutunu çalıştırdığınızda şunları görürsünüz:</span><span class="sxs-lookup"><span data-stu-id="026d1-190">When you run */myfolder/default.cshtml*, you'll see the following:</span></span>

[!code-console[Main](18-customizing-site-wide-behavior/samples/sample8.cmd)]

## <a name="running-initialization-code-for-all-pages-in-a-folder"></a><span data-ttu-id="026d1-191">Bir klasördeki tüm sayfalar için başlatma kodunu çalıştırma</span><span class="sxs-lookup"><span data-stu-id="026d1-191">Running Initialization Code for All Pages in a Folder</span></span>

<span data-ttu-id="026d1-192">*\_PageStart. cshtml* dosyaları için iyi bir kullanım, tek bir klasördeki tüm dosyalar için aynı düzen sayfasını başlatmaktır.</span><span class="sxs-lookup"><span data-stu-id="026d1-192">A good use for *\_PageStart.cshtml* files is to initialize the same layout page for all files in a single folder.</span></span>

1. <span data-ttu-id="026d1-193">Kök klasörde, *ınitpages*adlı yeni bir klasör oluşturun.</span><span class="sxs-lookup"><span data-stu-id="026d1-193">In the root folder, create a new folder named *InitPages*.</span></span>
2. <span data-ttu-id="026d1-194">Web sitenizin *ınitpages* klasöründe *\_pagestart. cshtml* adlı bir dosya oluşturun ve varsayılan biçimlendirmeyi ve kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="026d1-194">In the *InitPages* folder of your website, create a file named *\_PageStart.cshtml* and replace the default markup and code with the following:</span></span> 

    [!code-cshtml[Main](18-customizing-site-wide-behavior/samples/sample9.cshtml)]
3. <span data-ttu-id="026d1-195">Web sitesinin kökünde, *paylaşılan*adlı bir klasör oluşturun.</span><span class="sxs-lookup"><span data-stu-id="026d1-195">In the root of the website, create a folder named *Shared*.</span></span>
4. <span data-ttu-id="026d1-196">*Paylaşılan* klasörde, *\_layout1. cshtml* adlı bir dosya oluşturun ve varsayılan biçimlendirmeyi ve kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="026d1-196">In the *Shared* folder, create a file named *\_Layout1.cshtml* and replace the default markup and code with the following:</span></span> 

    [!code-cshtml[Main](18-customizing-site-wide-behavior/samples/sample10.cshtml)]
5. <span data-ttu-id="026d1-197">*Initpages* klasöründe, *Content1. cshtml* adlı bir dosya oluşturun ve var olan içeriği şu şekilde değiştirin:</span><span class="sxs-lookup"><span data-stu-id="026d1-197">In the *InitPages* folder, create a file named *Content1.cshtml* and replace the existing content with the following:</span></span> 

    [!code-html[Main](18-customizing-site-wide-behavior/samples/sample11.html)]
6. <span data-ttu-id="026d1-198">*Initpages* klasöründe, *Content2. cshtml* adlı başka bir dosya oluşturun ve varsayılan biçimlendirmeyi aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="026d1-198">In the *InitPages* folder, create another file named *Content2.cshtml* and replace the default markup with the following:</span></span> 

    [!code-html[Main](18-customizing-site-wide-behavior/samples/sample12.html)]
7. <span data-ttu-id="026d1-199">Tarayıcıda *Content1. cshtml* dosyasını çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="026d1-199">Run *Content1.cshtml* in a browser.</span></span> 

    ![görüntüyle](18-customizing-site-wide-behavior/_static/image4.jpg)

    <span data-ttu-id="026d1-201">*Content1. cshtml* sayfası çalıştırıldığında, *\_pagestart. cshtml* dosyası `Layout` ayarlar ve ayrıca `PageData["MyBackground"]` bir renge ayarlar.</span><span class="sxs-lookup"><span data-stu-id="026d1-201">When the *Content1.cshtml* page runs, the *\_PageStart.cshtml* file sets `Layout` and also sets `PageData["MyBackground"]` to a color.</span></span> <span data-ttu-id="026d1-202">*Content1. cshtml*içinde düzen ve renk uygulanır.</span><span class="sxs-lookup"><span data-stu-id="026d1-202">In *Content1.cshtml*, the layout and color are applied.</span></span>
8. <span data-ttu-id="026d1-203">*Content2. cshtml* 'yi bir tarayıcıda görüntüleyin.</span><span class="sxs-lookup"><span data-stu-id="026d1-203">Display *Content2.cshtml* in a browser.</span></span> 

    <span data-ttu-id="026d1-204">Her iki sayfa de *\_PageStart. cshtml*içinde başlatılan aynı düzen sayfasını ve rengini kullandığından, düzen aynıdır.</span><span class="sxs-lookup"><span data-stu-id="026d1-204">The layout is the same, because both pages use the same layout page and color as initialized in *\_PageStart.cshtml*.</span></span>

## <a name="using-_pagestartcshtml-to-handle-errors"></a><span data-ttu-id="026d1-205">Hataları Işlemek için \_PageStart. cshtml kullanma</span><span class="sxs-lookup"><span data-stu-id="026d1-205">Using \_PageStart.cshtml to Handle Errors</span></span>

<span data-ttu-id="026d1-206">*\_PageStart. cshtml* dosyası için bir diğer iyi kullanım, bir klasördeki herhangi bir *. cshtml* sayfasında oluşabilen programlama hatalarını (özel durumlar) işlemenin bir yolunu oluşturmaktır.</span><span class="sxs-lookup"><span data-stu-id="026d1-206">Another good use for the *\_PageStart.cshtml* file is to create a way to handle programming errors (exceptions) that might occur in any *.cshtml* page in a folder.</span></span> <span data-ttu-id="026d1-207">Bu örnek, bunu yapmanın bir yolunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="026d1-207">This example shows you one way to do this.</span></span>

1. <span data-ttu-id="026d1-208">Kök klasörde, *ınitcatch*adlı bir klasör oluşturun.</span><span class="sxs-lookup"><span data-stu-id="026d1-208">In the root folder, create a folder named *InitCatch*.</span></span>
2. <span data-ttu-id="026d1-209">Web sitenizin *ınitcatch* klasöründe, *\_pagestart. cshtml* adlı bir dosya oluşturun ve var olan biçimlendirmeyi ve kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="026d1-209">In the *InitCatch* folder of your website, create a file named *\_PageStart.cshtml* and replace the existing markup and code with the following:</span></span> 

    [!code-cshtml[Main](18-customizing-site-wide-behavior/samples/sample13.cshtml)]

    <span data-ttu-id="026d1-210">Bu kodda, bir `try` bloğunun içinde `RunPage` yöntemini çağırarak istenen sayfayı açıkça çalıştırmayı deneyin.</span><span class="sxs-lookup"><span data-stu-id="026d1-210">In this code, you try running the requested page explicitly by calling the `RunPage` method inside a `try` block.</span></span> <span data-ttu-id="026d1-211">İstenen sayfada herhangi bir programlama hatası oluşursa, `catch` bloğu içindeki kod çalışır.</span><span class="sxs-lookup"><span data-stu-id="026d1-211">If any programming errors occur in the requested page, the code inside the `catch` block runs.</span></span> <span data-ttu-id="026d1-212">Bu durumda, kod bir sayfaya (*Error. cshtml*) yönlendirilir ve hata oluşan DOSYANıN adını URL 'nin bir parçası olarak geçirir.</span><span class="sxs-lookup"><span data-stu-id="026d1-212">In this case, the code redirects to a page (*Error.cshtml*) and passes the name of the file that experienced the error as part of the URL.</span></span> <span data-ttu-id="026d1-213">(Sayfayı kısa bir süre içinde oluşturacaksınız.)</span><span class="sxs-lookup"><span data-stu-id="026d1-213">(You'll create the page shortly.)</span></span>
3. <span data-ttu-id="026d1-214">Web sitenizin *ınitcatch* klasöründe *Exception. cshtml* adlı bir dosya oluşturun ve var olan biçimlendirmeyi ve kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="026d1-214">In the *InitCatch* folder of your website, create a file named *Exception.cshtml* and replace the existing markup and code with the following:</span></span> 

    [!code-cshtml[Main](18-customizing-site-wide-behavior/samples/sample14.cshtml)]

    <span data-ttu-id="026d1-215">Bu örneğin amaçları doğrultusunda, bu sayfada yaptığınız şeyler, mevcut olmayan bir veritabanı dosyasını açmaya çalışırken kasıtlı olarak bir hata oluşturuyor.</span><span class="sxs-lookup"><span data-stu-id="026d1-215">For purposes of this example, what you're doing in this page is deliberately creating an error by trying to open a database file that doesn't exist.</span></span>
4. <span data-ttu-id="026d1-216">Kök klasörde, *Error. cshtml* adlı bir dosya oluşturun ve var olan işaretlemeyi ve kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="026d1-216">In the root folder, create a file named *Error.cshtml* and replace the existing markup and code with the following:</span></span> 

    [!code-html[Main](18-customizing-site-wide-behavior/samples/sample15.html)]

    <span data-ttu-id="026d1-217">Bu sayfada ifade `@Request["source"]`, URL 'den dışarı değeri alır ve görüntüler.</span><span class="sxs-lookup"><span data-stu-id="026d1-217">In this page, the expression `@Request["source"]` gets the value out of the URL and displays it.</span></span>
5. <span data-ttu-id="026d1-218">Araç çubuğunda **Kaydet**' e tıklayın.</span><span class="sxs-lookup"><span data-stu-id="026d1-218">In the toolbar, click **Save**.</span></span>
6. <span data-ttu-id="026d1-219">*Özel durum. cshtml* 'yi bir tarayıcıda çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="026d1-219">Run *Exception.cshtml* in a browser.</span></span> 

    ![görüntüyle](18-customizing-site-wide-behavior/_static/image5.jpg)

    <span data-ttu-id="026d1-221">*Exception. cshtml*dosyasında bir hata oluştuğu için, *\_pagestart. cshtml* sayfası, iletiyi görüntüleyen *Error. cshtml* dosyasına yeniden yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="026d1-221">Because an error occurs in *Exception.cshtml*, the *\_PageStart.cshtml* page redirects to the *Error.cshtml* file, which displays the message.</span></span>

    <span data-ttu-id="026d1-222">Özel durumlar hakkında daha fazla bilgi için bkz. [Razor sözdizimini kullanarak ASP.NET Web sayfalarına giriş programlama](https://go.microsoft.com/fwlink/?LinkID=251587).</span><span class="sxs-lookup"><span data-stu-id="026d1-222">For more information about exceptions, see [Introduction to ASP.NET Web Pages Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkID=251587).</span></span>

<a id="Using__PageStart.cshtml_to_Restrict_Folder_Access"></a>
## <a name="using-_pagestartcshtml-to-restrict-folder-access"></a><span data-ttu-id="026d1-223">Klasör erişimini kısıtlamak için \_PageStart. cshtml kullanma</span><span class="sxs-lookup"><span data-stu-id="026d1-223">Using \_PageStart.cshtml to Restrict Folder Access</span></span>

<span data-ttu-id="026d1-224">Ayrıca, bir klasördeki tüm dosyalara erişimi kısıtlamak için *\_PageStart. cshtml* dosyasını da kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="026d1-224">You can also use the *\_PageStart.cshtml* file to restrict access to all the files in a folder.</span></span>

1. <span data-ttu-id="026d1-225">WebMatrix 'te, **şablondan site** seçeneğini kullanarak yeni bir Web sitesi oluşturun.</span><span class="sxs-lookup"><span data-stu-id="026d1-225">In WebMatrix, create a new website using the **Site From Template** option.</span></span>
2. <span data-ttu-id="026d1-226">Kullanılabilir şablonlar ' dan **Başlatıcı site**' yi seçin.</span><span class="sxs-lookup"><span data-stu-id="026d1-226">From the available templates, select **Starter Site**.</span></span>
3. <span data-ttu-id="026d1-227">Kök klasörde, *kimlik doğrulayan Tedcontent*adlı bir klasör oluşturun.</span><span class="sxs-lookup"><span data-stu-id="026d1-227">In the root folder, create a folder named *AuthenticatedContent*.</span></span>
4. <span data-ttu-id="026d1-228">Kimliği *Doğrulatediçerik* klasöründe, *\_pagestart. cshtml* adlı bir dosya oluşturun ve var olan biçimlendirmeyi ve kodu aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="026d1-228">In the *AuthenticatedContent* folder, create a file named *\_PageStart.cshtml* and replace the existing markup and code with the following:</span></span> 

    [!code-cshtml[Main](18-customizing-site-wide-behavior/samples/sample16.cshtml)]

    <span data-ttu-id="026d1-229">Kod, klasördeki tüm dosyaların önbelleğe alınmasını önleyecek şekilde başlatılır.</span><span class="sxs-lookup"><span data-stu-id="026d1-229">The code starts by preventing all files in the folder from being cached.</span></span> <span data-ttu-id="026d1-230">(Bu, bir kullanıcının önbelleğe alınmış sayfalarının bir sonraki Kullanıcı tarafından kullanılabilmesini istemediğiniz genel bilgisayarlar gibi senaryolar için gereklidir.) Daha sonra, kod, kullanıcının klasördeki sayfalardan hiçbirini görüntüleyebilmek için sitede oturum açmış olup olmadığını belirler.</span><span class="sxs-lookup"><span data-stu-id="026d1-230">(This is required for scenarios like public computers, where you don't want one user's cached pages to be available to the next user.) Next, the code determines whether the user has signed in to the site before they can view any of the pages in the folder.</span></span> <span data-ttu-id="026d1-231">Kullanıcı oturum açmamışsa, kod oturum açma sayfasına yeniden yönlendirilir.</span><span class="sxs-lookup"><span data-stu-id="026d1-231">If the user is not signed in, the code redirects to the login page.</span></span> <span data-ttu-id="026d1-232">Oturum açma sayfası, `ReturnUrl`adlı bir sorgu dizesi değeri eklerseniz, kullanıcıyı başlangıçta istenen sayfaya döndürebilir.</span><span class="sxs-lookup"><span data-stu-id="026d1-232">The login page can return the user to the page that was originally requested if you include a query string value named `ReturnUrl`.</span></span>
5. <span data-ttu-id="026d1-233">*Sayfa. cshtml*adlı *kimlik doğrulayan tedcontent* klasöründe yeni bir sayfa oluşturun.</span><span class="sxs-lookup"><span data-stu-id="026d1-233">Create a new page in the *AuthenticatedContent* folder named *Page.cshtml*.</span></span>
6. <span data-ttu-id="026d1-234">Varsayılan biçimlendirmeyi aşağıdaki kodla değiştirin:</span><span class="sxs-lookup"><span data-stu-id="026d1-234">Replace the default markup with the following:</span></span>  

    [!code-cshtml[Main](18-customizing-site-wide-behavior/samples/sample17.cshtml)]
7. <span data-ttu-id="026d1-235">*Sayfa. cshtml* 'yi bir tarayıcıda çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="026d1-235">Run *Page.cshtml* in a browser.</span></span> <span data-ttu-id="026d1-236">Kod sizi bir oturum açma sayfasına yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="026d1-236">The code redirects you to a login page.</span></span> <span data-ttu-id="026d1-237">Oturum açmadan önce kaydolmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="026d1-237">You must register before logging in.</span></span> <span data-ttu-id="026d1-238">Kaydolduktan ve oturum açtıktan sonra, sayfasına gidebilir ve içeriğini görüntüleyebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="026d1-238">After you've registered and logged in, you can navigate to the page and view its contents.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="026d1-239">Ek Kaynaklar</span><span class="sxs-lookup"><span data-stu-id="026d1-239">Additional Resources</span></span>

[<span data-ttu-id="026d1-240">Razor söz dizimini kullanarak ASP.NET Web sayfaları programlamasına giriş</span><span class="sxs-lookup"><span data-stu-id="026d1-240">Introduction to ASP.NET Web Pages Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=251587)
