---
uid: web-pages/overview/performance-and-traffic/15-caching-to-improve-the-performance-of-your-website
title: Daha Iyi performans için bir ASP.NET Web sayfaları (Razor) sitesinde verileri önbelleğe alma | Microsoft Docs
author: Rick-Anderson
description: Web sitenizi, depolama alanı, önbelleğe alma ve genellikle bir işlem almak veya işlemek için uzun zaman alan veri sonuçları gibi bir şekilde hızlandırabilecek şekilde hızlandırabilirsiniz...
ms.author: riande
ms.date: 02/14/2014
ms.assetid: 961e525b-7700-469e-8a68-d7010b6fb68c
msc.legacyurl: /web-pages/overview/performance-and-traffic/15-caching-to-improve-the-performance-of-your-website
msc.type: authoredcontent
ms.openlocfilehash: 01796d3ca699a6af5d9162b22a926551435c2040
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78641521"
---
# <a name="caching-data-in-an-aspnet-web-pages-razor-site-for-better-performance"></a><span data-ttu-id="9c42a-103">Daha Iyi performans için bir ASP.NET Web sayfaları (Razor) sitesinde verileri önbelleğe alma</span><span class="sxs-lookup"><span data-stu-id="9c42a-103">Caching Data in an ASP.NET Web Pages (Razor) Site for Better Performance</span></span>

<span data-ttu-id="9c42a-104">[Tom FitzMacken](https://github.com/tfitzmac) tarafından</span><span class="sxs-lookup"><span data-stu-id="9c42a-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="9c42a-105">Bu makalede, bir ASP.NET Web Pages (Razor) Web sitesinde daha hızlı performans için bilgileri önbelleğe almak üzere bir yardımcı 'nın nasıl kullanılacağı açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="9c42a-105">This article explains how to use a helper to cache information for faster performance in an ASP.NET Web Pages (Razor) website.</span></span> <span data-ttu-id="9c42a-106">Web sitenizi, bir depolama &#8212; alanına sahip olacak şekilde artırabilir, &#8212; bu da genellikle veri alma veya işleme için önemli ölçüde zaman alabilir ve sık değişmemelidir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-106">You can speed up your website by having it store &#8212; that is, cache &#8212; the results of data that ordinarily would take considerable time to retrieve or process and that does not change often.</span></span>
> 
> <span data-ttu-id="9c42a-107">**Şunları öğreneceksiniz:**</span><span class="sxs-lookup"><span data-stu-id="9c42a-107">**What you'll learn:**</span></span> 
> 
> - <span data-ttu-id="9c42a-108">Web sitenizin yanıt hızını artırmak için önbelleğe alma özelliğini kullanma.</span><span class="sxs-lookup"><span data-stu-id="9c42a-108">How to use caching to improve the responsiveness of your website.</span></span>
> 
> <span data-ttu-id="9c42a-109">Makalesinde sunulan ASP.NET özellikleri şunlardır:</span><span class="sxs-lookup"><span data-stu-id="9c42a-109">These are the ASP.NET features introduced in the article:</span></span>
> 
> - <span data-ttu-id="9c42a-110">`WebCache` Yardımcısı.</span><span class="sxs-lookup"><span data-stu-id="9c42a-110">The `WebCache` helper.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="9c42a-111">Öğreticide kullanılan yazılım sürümleri</span><span class="sxs-lookup"><span data-stu-id="9c42a-111">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="9c42a-112">ASP.NET Web sayfaları (Razor) 3</span><span class="sxs-lookup"><span data-stu-id="9c42a-112">ASP.NET Web Pages (Razor) 3</span></span>
>   
> 
> <span data-ttu-id="9c42a-113">Bu öğretici, ASP.NET Web Pages 2 ile de kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-113">This tutorial also works with ASP.NET Web Pages 2.</span></span>

<span data-ttu-id="9c42a-114">Sitenizdeki her bir sayfa istediğinde, Web sunucusunun isteği yerine getirmek için bazı işler yapması gerekir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-114">Every time someone requests a page from your site, the web server has to do some work in order to fulfill the request.</span></span> <span data-ttu-id="9c42a-115">Sayfalarınızın bir kısmı için, bir veritabanından veri alma gibi bir çok uzun süre (karşılaştırmalı) alan görevleri gerçekleştirmek için sunucu gerekebilir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-115">For some of your pages, the server might have to perform tasks that take a (comparatively) long time, such as retrieving data from a database.</span></span> <span data-ttu-id="9c42a-116">Bu görevler mutlak koşullarda uzun sürmese bile, siteniz çok sayıda trafik yaşıyorsa, Web sunucusunun karmaşık veya yavaş görevi gerçekleştirmesini sağlayan bir dizi tek isteğin tamamı çok fazla iş ekleyebilirler.</span><span class="sxs-lookup"><span data-stu-id="9c42a-116">Even if these tasks don't take long in absolute terms, if your site experiences a lot of traffic, a whole series of individual requests that cause the web server to perform the complicated or slow task can add up to a lot of work.</span></span> <span data-ttu-id="9c42a-117">Bu, sonunda sitenin performansını etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-117">This can ultimately affect the performance of the site.</span></span>

<span data-ttu-id="9c42a-118">Bu gibi durumlarda Web sitenizin performansını artırmanın bir yolu, verileri önbelleğe alma yöntemidir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-118">One way to improve the performance of your website in circumstances like this is to cache data.</span></span> <span data-ttu-id="9c42a-119">Siteniz aynı bilgiler için yinelenen istekler alıyorsa ve bilgilerin her bir kişi için değiştirilmesi gerekmiyorsa ve zamana duyarlı değilse, yeniden almak veya yeniden hesaplanması yerine, verileri bir kez getirip sonuçları kaydedebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="9c42a-119">If your site gets repeated requests for the same information, and the information does not need to be modified for each person, and it's not time sensitive, instead of re-fetching or recalculating it, you can fetch the data once and then store the results.</span></span> <span data-ttu-id="9c42a-120">Bu bilgiler için bir sonraki istek geldiğinde, bunu yalnızca önbellekten alırsınız.</span><span class="sxs-lookup"><span data-stu-id="9c42a-120">The next time a request comes in for that information, you just get it out of the cache.</span></span>

<span data-ttu-id="9c42a-121">Genel olarak, sık değişmeyen bilgileri önbelleğe alırsınız.</span><span class="sxs-lookup"><span data-stu-id="9c42a-121">In general, you cache information that doesn't change frequently.</span></span> <span data-ttu-id="9c42a-122">Bilgileri önbelleğe koyduğunuzda, Web sunucusunda bellekte depolanır.</span><span class="sxs-lookup"><span data-stu-id="9c42a-122">When you put information in the cache, it's stored in memory on the web server.</span></span> <span data-ttu-id="9c42a-123">Saniye ile günlere ne kadar süre önbellekte tutulacağını belirtebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="9c42a-123">You can specify how long it should be cached, from seconds to days.</span></span> <span data-ttu-id="9c42a-124">Önbelleğe alma döneminin süresi dolarsa, bilgiler önbellekten otomatik olarak kaldırılır.</span><span class="sxs-lookup"><span data-stu-id="9c42a-124">When the caching period expires, the information is automatically removed from the cache.</span></span>

> [!NOTE]
> <span data-ttu-id="9c42a-125">Önbellekteki girişler, bunların süre doldukları nedenlerle kaldırılabilir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-125">Entries in the cache might be removed for reasons other than that they've expired.</span></span> <span data-ttu-id="9c42a-126">Örneğin, Web sunucusunun belleği geçici olarak azalmış olabilir ve belleği geri kazanmak için bir yol, girişlerin önbellekten çıkarılmasından kaynaklanabilir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-126">For example, the web server might temporarily run low on memory, and one way it can reclaim memory is by throwing entries out of the cache.</span></span> <span data-ttu-id="9c42a-127">Gördüğünüz gibi, önbelleğe bilgi yerleştirseniz bile, yine de ihtiyacınız olduğunda emin olmak için kontrol etmeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-127">As you'll see, even if you've put information into the cache, you have to check to be sure it's still there when you need it.</span></span>

<span data-ttu-id="9c42a-128">Web sitenizin geçerli sıcaklık ve hava durumu tahminini görüntüleyen bir sayfa olduğunu düşünün.</span><span class="sxs-lookup"><span data-stu-id="9c42a-128">Imagine your website has a page that displays the current temperature and weather forecast.</span></span> <span data-ttu-id="9c42a-129">Bu tür bilgileri almak için bir dış hizmete bir istek gönderebilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="9c42a-129">To get this type of information, you might send a request to an external service.</span></span> <span data-ttu-id="9c42a-130">Bu bilgiler çok fazla değişmediğinden (örneğin, iki saatlik bir zaman diliminde) ve dış çağrılar zaman ve bant genişliği gerektirdiğinden, önbelleğe alma işlemi için iyi bir adaydır.</span><span class="sxs-lookup"><span data-stu-id="9c42a-130">Since this information doesn't change much (within a two-hour time period, for example) and since external calls require time and bandwidth, it's a good candidate for caching.</span></span>

## <a name="adding-caching-to-a-page"></a><span data-ttu-id="9c42a-131">Bir sayfaya önbelleğe alma ekleme</span><span class="sxs-lookup"><span data-stu-id="9c42a-131">Adding Caching to a Page</span></span>

<span data-ttu-id="9c42a-132">ASP.NET, sitenize önbellek eklemenizi ve önbelleğe veri eklemenizi kolaylaştıran bir `WebCache` Yardımcısı içerir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-132">ASP.NET includes a `WebCache` helper that makes it easy to add caching to your site and add data to the cache.</span></span> <span data-ttu-id="9c42a-133">Bu yordamda, geçerli saati önbelleğe alan bir sayfa oluşturacaksınız.</span><span class="sxs-lookup"><span data-stu-id="9c42a-133">In this procedure, you'll create a page that caches the current time.</span></span> <span data-ttu-id="9c42a-134">Bu gerçek bir örnek değildir, çünkü geçerli zaman sık değişme ve hesaplanmasının karmaşık olmadığı bir şeydir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-134">This isn't a real-world example, since the current time is something that does change often, and that moreover isn't complex to calculate.</span></span> <span data-ttu-id="9c42a-135">Ancak, önbelleğe alma işlemini çalışırken göstermek için iyi bir yoldur.</span><span class="sxs-lookup"><span data-stu-id="9c42a-135">However, it's a good way to illustrate caching in action.</span></span>

1. <span data-ttu-id="9c42a-136">Web sitesine *webcache. cshtml* adlı yeni bir sayfa ekleyin.</span><span class="sxs-lookup"><span data-stu-id="9c42a-136">Add a new page named *WebCache.cshtml* to the website.</span></span>
2. <span data-ttu-id="9c42a-137">Aşağıdaki kodu ve biçimlendirmeyi sayfaya ekleyin:</span><span class="sxs-lookup"><span data-stu-id="9c42a-137">Add the following code and markup to the page:</span></span>

    [!code-cshtml[Main](15-caching-to-improve-the-performance-of-your-website/samples/sample1.cshtml)]

    <span data-ttu-id="9c42a-138">Verileri önbelleğe aldığınızda, bu Web sitesi genelinde benzersiz bir ad kullanarak önbelleğe koyabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="9c42a-138">When you cache data, you put it into the cache using a name this is unique across the website.</span></span> <span data-ttu-id="9c42a-139">Bu durumda, `CachedTime`adlı bir önbellek girişi kullanacaksınız.</span><span class="sxs-lookup"><span data-stu-id="9c42a-139">In this case, you'll use a cache entry named `CachedTime`.</span></span> <span data-ttu-id="9c42a-140">Bu, kod örneğinde gösterilen `cacheItemKey`.</span><span class="sxs-lookup"><span data-stu-id="9c42a-140">This is the `cacheItemKey` shown in the code example.</span></span>

    <span data-ttu-id="9c42a-141">Kod ilk olarak `CachedTime` önbellek girdisini okur.</span><span class="sxs-lookup"><span data-stu-id="9c42a-141">The code first reads the `CachedTime` cache entry.</span></span> <span data-ttu-id="9c42a-142">Değer döndürülürse (yani, önbellek girdisi null değilse), kod yalnızca zaman değişkeninin değerini önbellek verilerine ayarlar.</span><span class="sxs-lookup"><span data-stu-id="9c42a-142">If a value is returned (that is, if the cache entry isn't null), the code just sets the value of the time variable to the cache data.</span></span>

    <span data-ttu-id="9c42a-143">Ancak, önbellek girdisi yoksa (yani null ise), kod saat değerini ayarlar, önbelleğe ekler ve bir süre sonu değerini bir dakika olarak ayarlar.</span><span class="sxs-lookup"><span data-stu-id="9c42a-143">However, if the cache entry doesn't exist (that is, it's null), the code sets the time value, adds it to the cache, and sets an expiration value to one minute.</span></span> <span data-ttu-id="9c42a-144">Bir dakika sonra, önbellek girdisi atılır.</span><span class="sxs-lookup"><span data-stu-id="9c42a-144">After one minute, the cache entry is discarded.</span></span> <span data-ttu-id="9c42a-145">(Önbellekteki bir öğe için varsayılan süre sonu değeri 20 dakikadır.) Komut `WebCache.Set(cacheItemKey, time, 1, false)`, geçerli saat değerinin önbelleğe nasıl ekleneceğini ve süresinin 1 dakika olarak ayarlanacağını gösterir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-145">(The default expiration value for an item in the cache is 20 minutes.) The command `WebCache.Set(cacheItemKey, time, 1, false)` shows how to add the current time value to the cache and set its expiration to 1 minute.</span></span> <span data-ttu-id="9c42a-146">*SlidingExpiration* parametresinin `false` olarak ayarlanması, sona erme zamanının istendiği her seferinde yenilenmediği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-146">Setting the *slidingExpiration* parameter to `false` means the expiration time is not renewed each time it is requested.</span></span> <span data-ttu-id="9c42a-147">İlk olarak önbelleğe eklendikten sonra 1 dakikalık süre dolacak.</span><span class="sxs-lookup"><span data-stu-id="9c42a-147">It will expire exactly 1 minute after it was originally added to the cache.</span></span> <span data-ttu-id="9c42a-148">Bu değeri `true` olarak ayarlarsanız, değerin önbellekten her istenilişinde 1 dakikalık sona erme saati sıfırlanır.</span><span class="sxs-lookup"><span data-stu-id="9c42a-148">If you set this value to `true` the 1 minute expiration time is reset each time the value is requested from the cache.</span></span>

    <span data-ttu-id="9c42a-149">Bu kod, verileri önbelleğe alırken her zaman kullanmanız gereken kalıbı gösterir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-149">This code illustrates the pattern you should always use when you cache data.</span></span> <span data-ttu-id="9c42a-150">Önbellekten bir şey yapmadan önce, `WebCache.Get` yönteminin null döndürmediğini her zaman denetleyin.</span><span class="sxs-lookup"><span data-stu-id="9c42a-150">Before you get something out of the cache, always check first whether the `WebCache.Get` method has returned null.</span></span> <span data-ttu-id="9c42a-151">Önbellek girişinin dolduğunu veya başka bir nedenle kaldırılmış olabileceğini unutmayın. bu nedenle, belirli bir girdinin önbellekte olması hiçbir zaman garanti edilmez.</span><span class="sxs-lookup"><span data-stu-id="9c42a-151">Remember that the cache entry might have expired or might have been removed for some other reason, so any given entry is never guaranteed to be in the cache.</span></span>
3. <span data-ttu-id="9c42a-152">*Web Cache. cshtml* dosyasını bir tarayıcıda çalıştırın.</span><span class="sxs-lookup"><span data-stu-id="9c42a-152">Run *WebCache.cshtml* in a browser.</span></span> <span data-ttu-id="9c42a-153">(Çalıştırmadan önce sayfanın **dosyalar** çalışma alanında seçili olduğundan emin olun.) Sayfayı ilk kez istediğinizde, zaman verileri önbellekte değildir ve kodun zaman değerini önbelleğe eklemesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-153">(Make sure the page is selected in the **Files** workspace before you run it.) The first time you request the page, the time data isn't in the cache, and the code has to add the time value to the cache.</span></span>

    ![Önbellek-1](15-caching-to-improve-the-performance-of-your-website/_static/image1.jpg)
4. <span data-ttu-id="9c42a-155">Tarayıcıda *webcache. cshtml* dosyasını yenileyin.</span><span class="sxs-lookup"><span data-stu-id="9c42a-155">Refresh *WebCache.cshtml* in the browser.</span></span> <span data-ttu-id="9c42a-156">Bu kez, zaman verileri önbellekte olur.</span><span class="sxs-lookup"><span data-stu-id="9c42a-156">This time, the time data is in the cache.</span></span> <span data-ttu-id="9c42a-157">Sayfayı son görüntülediğiniz zamandan bu yana zaman değişmediğinden emin olun.</span><span class="sxs-lookup"><span data-stu-id="9c42a-157">Notice that the time hasn't changed since the last time you viewed the page.</span></span>

    ![önbellek-2](15-caching-to-improve-the-performance-of-your-website/_static/image2.jpg)
5. <span data-ttu-id="9c42a-159">Önbelleğin boşaltılması için bir dakika bekleyin ve sonra sayfayı yenileyin.</span><span class="sxs-lookup"><span data-stu-id="9c42a-159">Wait one minute for the cache to be emptied, and then refresh the page.</span></span> <span data-ttu-id="9c42a-160">Sayfa, zaman verilerinin önbellekte bulunamadığını ve güncelleştirilmiş saatin önbelleğe eklendiğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="9c42a-160">The page again indicates that the time data wasn't found in the cache, and the updated time is added to the cache.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="9c42a-161">Ek Kaynaklar</span><span class="sxs-lookup"><span data-stu-id="9c42a-161">Additional Resources</span></span>

- [<span data-ttu-id="9c42a-162">Verileri Bir Grafikte Görüntüleme</span><span class="sxs-lookup"><span data-stu-id="9c42a-162">Displaying Data in a Chart</span></span>](https://go.microsoft.com/fwlink/?LinkId=202895)
- <span data-ttu-id="9c42a-163">[WebCache API başvurusu](https://msdn.microsoft.com/library/system.web.helpers.webcache(v=vs.99).aspx) (MSDN)</span><span class="sxs-lookup"><span data-stu-id="9c42a-163">[WebCache API reference](https://msdn.microsoft.com/library/system.web.helpers.webcache(v=vs.99).aspx) (MSDN)</span></span>
